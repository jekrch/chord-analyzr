(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function r(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(i){if(i.ep)return;i.ep=!0;const a=r(i);fetch(i.href,a)}})();var Xr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Er(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function P0(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var n=e.default;if(typeof n=="function"){var r=function s(){var i=!1;try{i=this instanceof s}catch{}return i?Reflect.construct(n,arguments,this.constructor):n.apply(this,arguments)};r.prototype=n.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(s){var i=Object.getOwnPropertyDescriptor(e,s);Object.defineProperty(r,s,i.get?i:{enumerable:!0,get:function(){return e[s]}})}),r}var eu={exports:{}},Bs={},tu={exports:{}},Me={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zp;function Eb(){if(Zp)return Me;Zp=1;var e=Symbol.for("react.element"),n=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),g=Symbol.iterator;function x(A){return A===null||typeof A!="object"?null:(A=g&&A[g]||A["@@iterator"],typeof A=="function"?A:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,E={};function N(A,_,Z){this.props=A,this.context=_,this.refs=E,this.updater=Z||b}N.prototype.isReactComponent={},N.prototype.setState=function(A,_){if(typeof A!="object"&&typeof A!="function"&&A!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,A,_,"setState")},N.prototype.forceUpdate=function(A){this.updater.enqueueForceUpdate(this,A,"forceUpdate")};function j(){}j.prototype=N.prototype;function P(A,_,Z){this.props=A,this.context=_,this.refs=E,this.updater=Z||b}var I=P.prototype=new j;I.constructor=P,S(I,N.prototype),I.isPureReactComponent=!0;var D=Array.isArray,k=Object.prototype.hasOwnProperty,R={current:null},O={key:!0,ref:!0,__self:!0,__source:!0};function M(A,_,Z){var oe,fe={},he=null,Pe=null;if(_!=null)for(oe in _.ref!==void 0&&(Pe=_.ref),_.key!==void 0&&(he=""+_.key),_)k.call(_,oe)&&!O.hasOwnProperty(oe)&&(fe[oe]=_[oe]);var ye=arguments.length-2;if(ye===1)fe.children=Z;else if(1<ye){for(var Se=Array(ye),we=0;we<ye;we++)Se[we]=arguments[we+2];fe.children=Se}if(A&&A.defaultProps)for(oe in ye=A.defaultProps,ye)fe[oe]===void 0&&(fe[oe]=ye[oe]);return{$$typeof:e,type:A,key:he,ref:Pe,props:fe,_owner:R.current}}function q(A,_){return{$$typeof:e,type:A.type,key:_,ref:A.ref,props:A.props,_owner:A._owner}}function J(A){return typeof A=="object"&&A!==null&&A.$$typeof===e}function ie(A){var _={"=":"=0",":":"=2"};return"$"+A.replace(/[=:]/g,function(Z){return _[Z]})}var Y=/\/+/g;function W(A,_){return typeof A=="object"&&A!==null&&A.key!=null?ie(""+A.key):_.toString(36)}function re(A,_,Z,oe,fe){var he=typeof A;(he==="undefined"||he==="boolean")&&(A=null);var Pe=!1;if(A===null)Pe=!0;else switch(he){case"string":case"number":Pe=!0;break;case"object":switch(A.$$typeof){case e:case n:Pe=!0}}if(Pe)return Pe=A,fe=fe(Pe),A=oe===""?"."+W(Pe,0):oe,D(fe)?(Z="",A!=null&&(Z=A.replace(Y,"$&/")+"/"),re(fe,_,Z,"",function(we){return we})):fe!=null&&(J(fe)&&(fe=q(fe,Z+(!fe.key||Pe&&Pe.key===fe.key?"":(""+fe.key).replace(Y,"$&/")+"/")+A)),_.push(fe)),1;if(Pe=0,oe=oe===""?".":oe+":",D(A))for(var ye=0;ye<A.length;ye++){he=A[ye];var Se=oe+W(he,ye);Pe+=re(he,_,Z,Se,fe)}else if(Se=x(A),typeof Se=="function")for(A=Se.call(A),ye=0;!(he=A.next()).done;)he=he.value,Se=oe+W(he,ye++),Pe+=re(he,_,Z,Se,fe);else if(he==="object")throw _=String(A),Error("Objects are not valid as a React child (found: "+(_==="[object Object]"?"object with keys {"+Object.keys(A).join(", ")+"}":_)+"). If you meant to render a collection of children, use an array instead.");return Pe}function ae(A,_,Z){if(A==null)return A;var oe=[],fe=0;return re(A,oe,"","",function(he){return _.call(Z,he,fe++)}),oe}function ce(A){if(A._status===-1){var _=A._result;_=_(),_.then(function(Z){(A._status===0||A._status===-1)&&(A._status=1,A._result=Z)},function(Z){(A._status===0||A._status===-1)&&(A._status=2,A._result=Z)}),A._status===-1&&(A._status=0,A._result=_)}if(A._status===1)return A._result.default;throw A._result}var ee={current:null},Q={transition:null},V={ReactCurrentDispatcher:ee,ReactCurrentBatchConfig:Q,ReactCurrentOwner:R};function F(){throw Error("act(...) is not supported in production builds of React.")}return Me.Children={map:ae,forEach:function(A,_,Z){ae(A,function(){_.apply(this,arguments)},Z)},count:function(A){var _=0;return ae(A,function(){_++}),_},toArray:function(A){return ae(A,function(_){return _})||[]},only:function(A){if(!J(A))throw Error("React.Children.only expected to receive a single React element child.");return A}},Me.Component=N,Me.Fragment=r,Me.Profiler=i,Me.PureComponent=P,Me.StrictMode=s,Me.Suspense=h,Me.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=V,Me.act=F,Me.cloneElement=function(A,_,Z){if(A==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+A+".");var oe=S({},A.props),fe=A.key,he=A.ref,Pe=A._owner;if(_!=null){if(_.ref!==void 0&&(he=_.ref,Pe=R.current),_.key!==void 0&&(fe=""+_.key),A.type&&A.type.defaultProps)var ye=A.type.defaultProps;for(Se in _)k.call(_,Se)&&!O.hasOwnProperty(Se)&&(oe[Se]=_[Se]===void 0&&ye!==void 0?ye[Se]:_[Se])}var Se=arguments.length-2;if(Se===1)oe.children=Z;else if(1<Se){ye=Array(Se);for(var we=0;we<Se;we++)ye[we]=arguments[we+2];oe.children=ye}return{$$typeof:e,type:A.type,key:fe,ref:he,props:oe,_owner:Pe}},Me.createContext=function(A){return A={$$typeof:c,_currentValue:A,_currentValue2:A,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},A.Provider={$$typeof:a,_context:A},A.Consumer=A},Me.createElement=M,Me.createFactory=function(A){var _=M.bind(null,A);return _.type=A,_},Me.createRef=function(){return{current:null}},Me.forwardRef=function(A){return{$$typeof:d,render:A}},Me.isValidElement=J,Me.lazy=function(A){return{$$typeof:m,_payload:{_status:-1,_result:A},_init:ce}},Me.memo=function(A,_){return{$$typeof:p,type:A,compare:_===void 0?null:_}},Me.startTransition=function(A){var _=Q.transition;Q.transition={};try{A()}finally{Q.transition=_}},Me.unstable_act=F,Me.useCallback=function(A,_){return ee.current.useCallback(A,_)},Me.useContext=function(A){return ee.current.useContext(A)},Me.useDebugValue=function(){},Me.useDeferredValue=function(A){return ee.current.useDeferredValue(A)},Me.useEffect=function(A,_){return ee.current.useEffect(A,_)},Me.useId=function(){return ee.current.useId()},Me.useImperativeHandle=function(A,_,Z){return ee.current.useImperativeHandle(A,_,Z)},Me.useInsertionEffect=function(A,_){return ee.current.useInsertionEffect(A,_)},Me.useLayoutEffect=function(A,_){return ee.current.useLayoutEffect(A,_)},Me.useMemo=function(A,_){return ee.current.useMemo(A,_)},Me.useReducer=function(A,_,Z){return ee.current.useReducer(A,_,Z)},Me.useRef=function(A){return ee.current.useRef(A)},Me.useState=function(A){return ee.current.useState(A)},Me.useSyncExternalStore=function(A,_,Z){return ee.current.useSyncExternalStore(A,_,Z)},Me.useTransition=function(){return ee.current.useTransition()},Me.version="18.3.1",Me}var em;function rl(){return em||(em=1,tu.exports=Eb()),tu.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tm;function Db(){if(tm)return Bs;tm=1;var e=rl(),n=Symbol.for("react.element"),r=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,i=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function c(d,h,p){var m,g={},x=null,b=null;p!==void 0&&(x=""+p),h.key!==void 0&&(x=""+h.key),h.ref!==void 0&&(b=h.ref);for(m in h)s.call(h,m)&&!a.hasOwnProperty(m)&&(g[m]=h[m]);if(d&&d.defaultProps)for(m in h=d.defaultProps,h)g[m]===void 0&&(g[m]=h[m]);return{$$typeof:n,type:d,key:x,ref:b,props:g,_owner:i.current}}return Bs.Fragment=r,Bs.jsx=c,Bs.jsxs=c,Bs}var nm;function Ab(){return nm||(nm=1,eu.exports=Db()),eu.exports}var u=Ab(),w=rl();const ve=Er(w);var ja={},nu={exports:{}},dn={},ru={exports:{}},ou={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rm;function jb(){return rm||(rm=1,function(e){function n(Q,V){var F=Q.length;Q.push(V);e:for(;0<F;){var A=F-1>>>1,_=Q[A];if(0<i(_,V))Q[A]=V,Q[F]=_,F=A;else break e}}function r(Q){return Q.length===0?null:Q[0]}function s(Q){if(Q.length===0)return null;var V=Q[0],F=Q.pop();if(F!==V){Q[0]=F;e:for(var A=0,_=Q.length,Z=_>>>1;A<Z;){var oe=2*(A+1)-1,fe=Q[oe],he=oe+1,Pe=Q[he];if(0>i(fe,F))he<_&&0>i(Pe,fe)?(Q[A]=Pe,Q[he]=F,A=he):(Q[A]=fe,Q[oe]=F,A=oe);else if(he<_&&0>i(Pe,F))Q[A]=Pe,Q[he]=F,A=he;else break e}}return V}function i(Q,V){var F=Q.sortIndex-V.sortIndex;return F!==0?F:Q.id-V.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var c=Date,d=c.now();e.unstable_now=function(){return c.now()-d}}var h=[],p=[],m=1,g=null,x=3,b=!1,S=!1,E=!1,N=typeof setTimeout=="function"?setTimeout:null,j=typeof clearTimeout=="function"?clearTimeout:null,P=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I(Q){for(var V=r(p);V!==null;){if(V.callback===null)s(p);else if(V.startTime<=Q)s(p),V.sortIndex=V.expirationTime,n(h,V);else break;V=r(p)}}function D(Q){if(E=!1,I(Q),!S)if(r(h)!==null)S=!0,ce(k);else{var V=r(p);V!==null&&ee(D,V.startTime-Q)}}function k(Q,V){S=!1,E&&(E=!1,j(M),M=-1),b=!0;var F=x;try{for(I(V),g=r(h);g!==null&&(!(g.expirationTime>V)||Q&&!ie());){var A=g.callback;if(typeof A=="function"){g.callback=null,x=g.priorityLevel;var _=A(g.expirationTime<=V);V=e.unstable_now(),typeof _=="function"?g.callback=_:g===r(h)&&s(h),I(V)}else s(h);g=r(h)}if(g!==null)var Z=!0;else{var oe=r(p);oe!==null&&ee(D,oe.startTime-V),Z=!1}return Z}finally{g=null,x=F,b=!1}}var R=!1,O=null,M=-1,q=5,J=-1;function ie(){return!(e.unstable_now()-J<q)}function Y(){if(O!==null){var Q=e.unstable_now();J=Q;var V=!0;try{V=O(!0,Q)}finally{V?W():(R=!1,O=null)}}else R=!1}var W;if(typeof P=="function")W=function(){P(Y)};else if(typeof MessageChannel<"u"){var re=new MessageChannel,ae=re.port2;re.port1.onmessage=Y,W=function(){ae.postMessage(null)}}else W=function(){N(Y,0)};function ce(Q){O=Q,R||(R=!0,W())}function ee(Q,V){M=N(function(){Q(e.unstable_now())},V)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Q){Q.callback=null},e.unstable_continueExecution=function(){S||b||(S=!0,ce(k))},e.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):q=0<Q?Math.floor(1e3/Q):5},e.unstable_getCurrentPriorityLevel=function(){return x},e.unstable_getFirstCallbackNode=function(){return r(h)},e.unstable_next=function(Q){switch(x){case 1:case 2:case 3:var V=3;break;default:V=x}var F=x;x=V;try{return Q()}finally{x=F}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(Q,V){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var F=x;x=Q;try{return V()}finally{x=F}},e.unstable_scheduleCallback=function(Q,V,F){var A=e.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?A+F:A):F=A,Q){case 1:var _=-1;break;case 2:_=250;break;case 5:_=1073741823;break;case 4:_=1e4;break;default:_=5e3}return _=F+_,Q={id:m++,callback:V,priorityLevel:Q,startTime:F,expirationTime:_,sortIndex:-1},F>A?(Q.sortIndex=F,n(p,Q),r(h)===null&&Q===r(p)&&(E?(j(M),M=-1):E=!0,ee(D,F-A))):(Q.sortIndex=_,n(h,Q),S||b||(S=!0,ce(k))),Q},e.unstable_shouldYield=ie,e.unstable_wrapCallback=function(Q){var V=x;return function(){var F=x;x=V;try{return Q.apply(this,arguments)}finally{x=F}}}}(ou)),ou}var om;function Ib(){return om||(om=1,ru.exports=jb()),ru.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sm;function kb(){if(sm)return dn;sm=1;var e=rl(),n=Ib();function r(t){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+t,l=1;l<arguments.length;l++)o+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+t+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,i={};function a(t,o){c(t,o),c(t+"Capture",o)}function c(t,o){for(i[t]=o,t=0;t<o.length;t++)s.add(o[t])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},g={};function x(t){return h.call(g,t)?!0:h.call(m,t)?!1:p.test(t)?g[t]=!0:(m[t]=!0,!1)}function b(t,o,l,f){if(l!==null&&l.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return f?!1:l!==null?!l.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function S(t,o,l,f){if(o===null||typeof o>"u"||b(t,o,l,f))return!0;if(f)return!1;if(l!==null)switch(l.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function E(t,o,l,f,v,y,C){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=f,this.attributeNamespace=v,this.mustUseProperty=l,this.propertyName=t,this.type=o,this.sanitizeURL=y,this.removeEmptyString=C}var N={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){N[t]=new E(t,0,!1,t,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var o=t[0];N[o]=new E(o,1,!1,t[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){N[t]=new E(t,2,!1,t.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){N[t]=new E(t,2,!1,t,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){N[t]=new E(t,3,!1,t.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(t){N[t]=new E(t,3,!0,t,null,!1,!1)}),["capture","download"].forEach(function(t){N[t]=new E(t,4,!1,t,null,!1,!1)}),["cols","rows","size","span"].forEach(function(t){N[t]=new E(t,6,!1,t,null,!1,!1)}),["rowSpan","start"].forEach(function(t){N[t]=new E(t,5,!1,t.toLowerCase(),null,!1,!1)});var j=/[\-:]([a-z])/g;function P(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var o=t.replace(j,P);N[o]=new E(o,1,!1,t,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var o=t.replace(j,P);N[o]=new E(o,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(t){var o=t.replace(j,P);N[o]=new E(o,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(t){N[t]=new E(t,1,!1,t.toLowerCase(),null,!1,!1)}),N.xlinkHref=new E("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(t){N[t]=new E(t,1,!1,t.toLowerCase(),null,!0,!0)});function I(t,o,l,f){var v=N.hasOwnProperty(o)?N[o]:null;(v!==null?v.type!==0:f||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(S(o,l,v,f)&&(l=null),f||v===null?x(o)&&(l===null?t.removeAttribute(o):t.setAttribute(o,""+l)):v.mustUseProperty?t[v.propertyName]=l===null?v.type===3?!1:"":l:(o=v.attributeName,f=v.attributeNamespace,l===null?t.removeAttribute(o):(v=v.type,l=v===3||v===4&&l===!0?"":""+l,f?t.setAttributeNS(f,o,l):t.setAttribute(o,l))))}var D=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,k=Symbol.for("react.element"),R=Symbol.for("react.portal"),O=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),q=Symbol.for("react.profiler"),J=Symbol.for("react.provider"),ie=Symbol.for("react.context"),Y=Symbol.for("react.forward_ref"),W=Symbol.for("react.suspense"),re=Symbol.for("react.suspense_list"),ae=Symbol.for("react.memo"),ce=Symbol.for("react.lazy"),ee=Symbol.for("react.offscreen"),Q=Symbol.iterator;function V(t){return t===null||typeof t!="object"?null:(t=Q&&t[Q]||t["@@iterator"],typeof t=="function"?t:null)}var F=Object.assign,A;function _(t){if(A===void 0)try{throw Error()}catch(l){var o=l.stack.trim().match(/\n( *(at )?)/);A=o&&o[1]||""}return`
`+A+t}var Z=!1;function oe(t,o){if(!t||Z)return"";Z=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(K){var f=K}Reflect.construct(t,[],o)}else{try{o.call()}catch(K){f=K}t.call(o.prototype)}else{try{throw Error()}catch(K){f=K}t()}}catch(K){if(K&&f&&typeof K.stack=="string"){for(var v=K.stack.split(`
`),y=f.stack.split(`
`),C=v.length-1,T=y.length-1;1<=C&&0<=T&&v[C]!==y[T];)T--;for(;1<=C&&0<=T;C--,T--)if(v[C]!==y[T]){if(C!==1||T!==1)do if(C--,T--,0>T||v[C]!==y[T]){var L=`
`+v[C].replace(" at new "," at ");return t.displayName&&L.includes("<anonymous>")&&(L=L.replace("<anonymous>",t.displayName)),L}while(1<=C&&0<=T);break}}}finally{Z=!1,Error.prepareStackTrace=l}return(t=t?t.displayName||t.name:"")?_(t):""}function fe(t){switch(t.tag){case 5:return _(t.type);case 16:return _("Lazy");case 13:return _("Suspense");case 19:return _("SuspenseList");case 0:case 2:case 15:return t=oe(t.type,!1),t;case 11:return t=oe(t.type.render,!1),t;case 1:return t=oe(t.type,!0),t;default:return""}}function he(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case O:return"Fragment";case R:return"Portal";case q:return"Profiler";case M:return"StrictMode";case W:return"Suspense";case re:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case ie:return(t.displayName||"Context")+".Consumer";case J:return(t._context.displayName||"Context")+".Provider";case Y:var o=t.render;return t=t.displayName,t||(t=o.displayName||o.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ae:return o=t.displayName||null,o!==null?o:he(t.type)||"Memo";case ce:o=t._payload,t=t._init;try{return he(t(o))}catch{}}return null}function Pe(t){var o=t.type;switch(t.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=o.render,t=t.displayName||t.name||"",o.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return he(o);case 8:return o===M?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function ye(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Se(t){var o=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function we(t){var o=Se(t)?"checked":"value",l=Object.getOwnPropertyDescriptor(t.constructor.prototype,o),f=""+t[o];if(!t.hasOwnProperty(o)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var v=l.get,y=l.set;return Object.defineProperty(t,o,{configurable:!0,get:function(){return v.call(this)},set:function(C){f=""+C,y.call(this,C)}}),Object.defineProperty(t,o,{enumerable:l.enumerable}),{getValue:function(){return f},setValue:function(C){f=""+C},stopTracking:function(){t._valueTracker=null,delete t[o]}}}}function ht(t){t._valueTracker||(t._valueTracker=we(t))}function Te(t){if(!t)return!1;var o=t._valueTracker;if(!o)return!0;var l=o.getValue(),f="";return t&&(f=Se(t)?t.checked?"true":"false":t.value),t=f,t!==l?(o.setValue(t),!0):!1}function Qe(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Ne(t,o){var l=o.checked;return F({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l??t._wrapperState.initialChecked})}function qe(t,o){var l=o.defaultValue==null?"":o.defaultValue,f=o.checked!=null?o.checked:o.defaultChecked;l=ye(o.value!=null?o.value:l),t._wrapperState={initialChecked:f,initialValue:l,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function et(t,o){o=o.checked,o!=null&&I(t,"checked",o,!1)}function Rt(t,o){et(t,o);var l=ye(o.value),f=o.type;if(l!=null)f==="number"?(l===0&&t.value===""||t.value!=l)&&(t.value=""+l):t.value!==""+l&&(t.value=""+l);else if(f==="submit"||f==="reset"){t.removeAttribute("value");return}o.hasOwnProperty("value")?Kt(t,o.type,l):o.hasOwnProperty("defaultValue")&&Kt(t,o.type,ye(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(t.defaultChecked=!!o.defaultChecked)}function tn(t,o,l){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var f=o.type;if(!(f!=="submit"&&f!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+t._wrapperState.initialValue,l||o===t.value||(t.value=o),t.defaultValue=o}l=t.name,l!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,l!==""&&(t.name=l)}function Kt(t,o,l){(o!=="number"||Qe(t.ownerDocument)!==t)&&(l==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+l&&(t.defaultValue=""+l))}var ut=Array.isArray;function Xe(t,o,l,f){if(t=t.options,o){o={};for(var v=0;v<l.length;v++)o["$"+l[v]]=!0;for(l=0;l<t.length;l++)v=o.hasOwnProperty("$"+t[l].value),t[l].selected!==v&&(t[l].selected=v),v&&f&&(t[l].defaultSelected=!0)}else{for(l=""+ye(l),o=null,v=0;v<t.length;v++){if(t[v].value===l){t[v].selected=!0,f&&(t[v].defaultSelected=!0);return}o!==null||t[v].disabled||(o=t[v])}o!==null&&(o.selected=!0)}}function We(t,o){if(o.dangerouslySetInnerHTML!=null)throw Error(r(91));return F({},o,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function pt(t,o){var l=o.value;if(l==null){if(l=o.children,o=o.defaultValue,l!=null){if(o!=null)throw Error(r(92));if(ut(l)){if(1<l.length)throw Error(r(93));l=l[0]}o=l}o==null&&(o=""),l=o}t._wrapperState={initialValue:ye(l)}}function vt(t,o){var l=ye(o.value),f=ye(o.defaultValue);l!=null&&(l=""+l,l!==t.value&&(t.value=l),o.defaultValue==null&&t.defaultValue!==l&&(t.defaultValue=l)),f!=null&&(t.defaultValue=""+f)}function Dn(t){var o=t.textContent;o===t._wrapperState.initialValue&&o!==""&&o!==null&&(t.value=o)}function mn(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Yt(t,o){return t==null||t==="http://www.w3.org/1999/xhtml"?mn(o):t==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Qt,An=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,l,f,v){MSApp.execUnsafeLocalFunction(function(){return t(o,l,f,v)})}:t}(function(t,o){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=o;else{for(Qt=Qt||document.createElement("div"),Qt.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=Qt.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;o.firstChild;)t.appendChild(o.firstChild)}});function jn(t,o){if(o){var l=t.firstChild;if(l&&l===t.lastChild&&l.nodeType===3){l.nodeValue=o;return}}t.textContent=o}var Ct={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ar=["Webkit","ms","Moz","O"];Object.keys(Ct).forEach(function(t){Ar.forEach(function(o){o=o+t.charAt(0).toUpperCase()+t.substring(1),Ct[o]=Ct[t]})});function jr(t,o,l){return o==null||typeof o=="boolean"||o===""?"":l||typeof o!="number"||o===0||Ct.hasOwnProperty(t)&&Ct[t]?(""+o).trim():o+"px"}function er(t,o){t=t.style;for(var l in o)if(o.hasOwnProperty(l)){var f=l.indexOf("--")===0,v=jr(l,o[l],f);l==="float"&&(l="cssFloat"),f?t.setProperty(l,v):t[l]=v}}var Mt=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function nn(t,o){if(o){if(Mt[t]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(r(137,t));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(r(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(r(61))}if(o.style!=null&&typeof o.style!="object")throw Error(r(62))}}function rn(t,o){if(t.indexOf("-")===-1)return typeof o.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var In=null;function gn(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var on=null,vn=null,U=null;function X(t){if(t=Ss(t)){if(typeof on!="function")throw Error(r(280));var o=t.stateNode;o&&(o=Vi(o),on(t.stateNode,t.type,o))}}function de(t){vn?U?U.push(t):U=[t]:vn=t}function je(){if(vn){var t=vn,o=U;if(U=vn=null,X(t),o)for(t=0;t<o.length;t++)X(o[t])}}function _e(t,o){return t(o)}function Be(){}var Je=!1;function St(t,o,l){if(Je)return t(o,l);Je=!0;try{return _e(t,o,l)}finally{Je=!1,(vn!==null||U!==null)&&(Be(),je())}}function Ve(t,o){var l=t.stateNode;if(l===null)return null;var f=Vi(l);if(f===null)return null;l=f[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(t=t.type,f=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!f;break e;default:t=!1}if(t)return null;if(l&&typeof l!="function")throw Error(r(231,o,typeof l));return l}var Gt=!1;if(d)try{var tt={};Object.defineProperty(tt,"passive",{get:function(){Gt=!0}}),window.addEventListener("test",tt,tt),window.removeEventListener("test",tt,tt)}catch{Gt=!1}function Et(t,o,l,f,v,y,C,T,L){var K=Array.prototype.slice.call(arguments,3);try{o.apply(l,K)}catch(ne){this.onError(ne)}}var Ut=!1,kn=null,Ot=!1,Gn=null,dr={onError:function(t){Ut=!0,kn=t}};function B(t,o,l,f,v,y,C,T,L){Ut=!1,kn=null,Et.apply(dr,arguments)}function Ie(t,o,l,f,v,y,C,T,L){if(B.apply(this,arguments),Ut){if(Ut){var K=kn;Ut=!1,kn=null}else throw Error(r(198));Ot||(Ot=!0,Gn=K)}}function Re(t){var o=t,l=t;if(t.alternate)for(;o.return;)o=o.return;else{t=o;do o=t,(o.flags&4098)!==0&&(l=o.return),t=o.return;while(t)}return o.tag===3?l:null}function dt(t){if(t.tag===13){var o=t.memoizedState;if(o===null&&(t=t.alternate,t!==null&&(o=t.memoizedState)),o!==null)return o.dehydrated}return null}function mt(t){if(Re(t)!==t)throw Error(r(188))}function Ir(t){var o=t.alternate;if(!o){if(o=Re(t),o===null)throw Error(r(188));return o!==t?null:t}for(var l=t,f=o;;){var v=l.return;if(v===null)break;var y=v.alternate;if(y===null){if(f=v.return,f!==null){l=f;continue}break}if(v.child===y.child){for(y=v.child;y;){if(y===l)return mt(v),t;if(y===f)return mt(v),o;y=y.sibling}throw Error(r(188))}if(l.return!==f.return)l=v,f=y;else{for(var C=!1,T=v.child;T;){if(T===l){C=!0,l=v,f=y;break}if(T===f){C=!0,f=v,l=y;break}T=T.sibling}if(!C){for(T=y.child;T;){if(T===l){C=!0,l=y,f=v;break}if(T===f){C=!0,f=y,l=v;break}T=T.sibling}if(!C)throw Error(r(189))}}if(l.alternate!==f)throw Error(r(190))}if(l.tag!==3)throw Error(r(188));return l.stateNode.current===l?t:o}function Un(t){return t=Ir(t),t!==null?fr(t):null}function fr(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var o=fr(t);if(o!==null)return o;t=t.sibling}return null}var kr=n.unstable_scheduleCallback,ro=n.unstable_cancelCallback,os=n.unstable_shouldYield,oo=n.unstable_requestPaint,ot=n.unstable_now,bl=n.unstable_getCurrentPriorityLevel,ss=n.unstable_ImmediatePriority,jf=n.unstable_UserBlockingPriority,Ci=n.unstable_NormalPriority,Bx=n.unstable_LowPriority,If=n.unstable_IdlePriority,Si=null,tr=null;function $x(t){if(tr&&typeof tr.onCommitFiberRoot=="function")try{tr.onCommitFiberRoot(Si,t,void 0,(t.current.flags&128)===128)}catch{}}var Vn=Math.clz32?Math.clz32:Vx,Gx=Math.log,Ux=Math.LN2;function Vx(t){return t>>>=0,t===0?32:31-(Gx(t)/Ux|0)|0}var Ei=64,Di=4194304;function is(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ai(t,o){var l=t.pendingLanes;if(l===0)return 0;var f=0,v=t.suspendedLanes,y=t.pingedLanes,C=l&268435455;if(C!==0){var T=C&~v;T!==0?f=is(T):(y&=C,y!==0&&(f=is(y)))}else C=l&~v,C!==0?f=is(C):y!==0&&(f=is(y));if(f===0)return 0;if(o!==0&&o!==f&&(o&v)===0&&(v=f&-f,y=o&-o,v>=y||v===16&&(y&4194240)!==0))return o;if((f&4)!==0&&(f|=l&16),o=t.entangledLanes,o!==0)for(t=t.entanglements,o&=f;0<o;)l=31-Vn(o),v=1<<l,f|=t[l],o&=~v;return f}function zx(t,o){switch(t){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Wx(t,o){for(var l=t.suspendedLanes,f=t.pingedLanes,v=t.expirationTimes,y=t.pendingLanes;0<y;){var C=31-Vn(y),T=1<<C,L=v[C];L===-1?((T&l)===0||(T&f)!==0)&&(v[C]=zx(T,o)):L<=o&&(t.expiredLanes|=T),y&=~T}}function wl(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function kf(){var t=Ei;return Ei<<=1,(Ei&4194240)===0&&(Ei=64),t}function Nl(t){for(var o=[],l=0;31>l;l++)o.push(t);return o}function as(t,o,l){t.pendingLanes|=o,o!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,o=31-Vn(o),t[o]=l}function Hx(t,o){var l=t.pendingLanes&~o;t.pendingLanes=o,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=o,t.mutableReadLanes&=o,t.entangledLanes&=o,o=t.entanglements;var f=t.eventTimes;for(t=t.expirationTimes;0<l;){var v=31-Vn(l),y=1<<v;o[v]=0,f[v]=-1,t[v]=-1,l&=~y}}function Cl(t,o){var l=t.entangledLanes|=o;for(t=t.entanglements;l;){var f=31-Vn(l),v=1<<f;v&o|t[f]&o&&(t[f]|=o),l&=~v}}var Ke=0;function Pf(t){return t&=-t,1<t?4<t?(t&268435455)!==0?16:536870912:4:1}var Tf,Sl,Rf,Mf,Of,El=!1,ji=[],Pr=null,Tr=null,Rr=null,ls=new Map,cs=new Map,Mr=[],qx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function _f(t,o){switch(t){case"focusin":case"focusout":Pr=null;break;case"dragenter":case"dragleave":Tr=null;break;case"mouseover":case"mouseout":Rr=null;break;case"pointerover":case"pointerout":ls.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":cs.delete(o.pointerId)}}function us(t,o,l,f,v,y){return t===null||t.nativeEvent!==y?(t={blockedOn:o,domEventName:l,eventSystemFlags:f,nativeEvent:y,targetContainers:[v]},o!==null&&(o=Ss(o),o!==null&&Sl(o)),t):(t.eventSystemFlags|=f,o=t.targetContainers,v!==null&&o.indexOf(v)===-1&&o.push(v),t)}function Kx(t,o,l,f,v){switch(o){case"focusin":return Pr=us(Pr,t,o,l,f,v),!0;case"dragenter":return Tr=us(Tr,t,o,l,f,v),!0;case"mouseover":return Rr=us(Rr,t,o,l,f,v),!0;case"pointerover":var y=v.pointerId;return ls.set(y,us(ls.get(y)||null,t,o,l,f,v)),!0;case"gotpointercapture":return y=v.pointerId,cs.set(y,us(cs.get(y)||null,t,o,l,f,v)),!0}return!1}function Lf(t){var o=so(t.target);if(o!==null){var l=Re(o);if(l!==null){if(o=l.tag,o===13){if(o=dt(l),o!==null){t.blockedOn=o,Of(t.priority,function(){Rf(l)});return}}else if(o===3&&l.stateNode.current.memoizedState.isDehydrated){t.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ii(t){if(t.blockedOn!==null)return!1;for(var o=t.targetContainers;0<o.length;){var l=Al(t.domEventName,t.eventSystemFlags,o[0],t.nativeEvent);if(l===null){l=t.nativeEvent;var f=new l.constructor(l.type,l);In=f,l.target.dispatchEvent(f),In=null}else return o=Ss(l),o!==null&&Sl(o),t.blockedOn=l,!1;o.shift()}return!0}function Ff(t,o,l){Ii(t)&&l.delete(o)}function Yx(){El=!1,Pr!==null&&Ii(Pr)&&(Pr=null),Tr!==null&&Ii(Tr)&&(Tr=null),Rr!==null&&Ii(Rr)&&(Rr=null),ls.forEach(Ff),cs.forEach(Ff)}function ds(t,o){t.blockedOn===o&&(t.blockedOn=null,El||(El=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,Yx)))}function fs(t){function o(v){return ds(v,t)}if(0<ji.length){ds(ji[0],t);for(var l=1;l<ji.length;l++){var f=ji[l];f.blockedOn===t&&(f.blockedOn=null)}}for(Pr!==null&&ds(Pr,t),Tr!==null&&ds(Tr,t),Rr!==null&&ds(Rr,t),ls.forEach(o),cs.forEach(o),l=0;l<Mr.length;l++)f=Mr[l],f.blockedOn===t&&(f.blockedOn=null);for(;0<Mr.length&&(l=Mr[0],l.blockedOn===null);)Lf(l),l.blockedOn===null&&Mr.shift()}var Eo=D.ReactCurrentBatchConfig,ki=!0;function Qx(t,o,l,f){var v=Ke,y=Eo.transition;Eo.transition=null;try{Ke=1,Dl(t,o,l,f)}finally{Ke=v,Eo.transition=y}}function Xx(t,o,l,f){var v=Ke,y=Eo.transition;Eo.transition=null;try{Ke=4,Dl(t,o,l,f)}finally{Ke=v,Eo.transition=y}}function Dl(t,o,l,f){if(ki){var v=Al(t,o,l,f);if(v===null)zl(t,o,f,Pi,l),_f(t,f);else if(Kx(v,t,o,l,f))f.stopPropagation();else if(_f(t,f),o&4&&-1<qx.indexOf(t)){for(;v!==null;){var y=Ss(v);if(y!==null&&Tf(y),y=Al(t,o,l,f),y===null&&zl(t,o,f,Pi,l),y===v)break;v=y}v!==null&&f.stopPropagation()}else zl(t,o,f,null,l)}}var Pi=null;function Al(t,o,l,f){if(Pi=null,t=gn(f),t=so(t),t!==null)if(o=Re(t),o===null)t=null;else if(l=o.tag,l===13){if(t=dt(o),t!==null)return t;t=null}else if(l===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;t=null}else o!==t&&(t=null);return Pi=t,null}function Bf(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(bl()){case ss:return 1;case jf:return 4;case Ci:case Bx:return 16;case If:return 536870912;default:return 16}default:return 16}}var Or=null,jl=null,Ti=null;function $f(){if(Ti)return Ti;var t,o=jl,l=o.length,f,v="value"in Or?Or.value:Or.textContent,y=v.length;for(t=0;t<l&&o[t]===v[t];t++);var C=l-t;for(f=1;f<=C&&o[l-f]===v[y-f];f++);return Ti=v.slice(t,1<f?1-f:void 0)}function Ri(t){var o=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&o===13&&(t=13)):t=o,t===10&&(t=13),32<=t||t===13?t:0}function Mi(){return!0}function Gf(){return!1}function xn(t){function o(l,f,v,y,C){this._reactName=l,this._targetInst=v,this.type=f,this.nativeEvent=y,this.target=C,this.currentTarget=null;for(var T in t)t.hasOwnProperty(T)&&(l=t[T],this[T]=l?l(y):y[T]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?Mi:Gf,this.isPropagationStopped=Gf,this}return F(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Mi)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Mi)},persist:function(){},isPersistent:Mi}),o}var Do={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Il=xn(Do),hs=F({},Do,{view:0,detail:0}),Jx=xn(hs),kl,Pl,ps,Oi=F({},hs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Rl,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ps&&(ps&&t.type==="mousemove"?(kl=t.screenX-ps.screenX,Pl=t.screenY-ps.screenY):Pl=kl=0,ps=t),kl)},movementY:function(t){return"movementY"in t?t.movementY:Pl}}),Uf=xn(Oi),Zx=F({},Oi,{dataTransfer:0}),ey=xn(Zx),ty=F({},hs,{relatedTarget:0}),Tl=xn(ty),ny=F({},Do,{animationName:0,elapsedTime:0,pseudoElement:0}),ry=xn(ny),oy=F({},Do,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),sy=xn(oy),iy=F({},Do,{data:0}),Vf=xn(iy),ay={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ly={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},cy={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function uy(t){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(t):(t=cy[t])?!!o[t]:!1}function Rl(){return uy}var dy=F({},hs,{key:function(t){if(t.key){var o=ay[t.key]||t.key;if(o!=="Unidentified")return o}return t.type==="keypress"?(t=Ri(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?ly[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Rl,charCode:function(t){return t.type==="keypress"?Ri(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ri(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),fy=xn(dy),hy=F({},Oi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),zf=xn(hy),py=F({},hs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Rl}),my=xn(py),gy=F({},Do,{propertyName:0,elapsedTime:0,pseudoElement:0}),vy=xn(gy),xy=F({},Oi,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),yy=xn(xy),by=[9,13,27,32],Ml=d&&"CompositionEvent"in window,ms=null;d&&"documentMode"in document&&(ms=document.documentMode);var wy=d&&"TextEvent"in window&&!ms,Wf=d&&(!Ml||ms&&8<ms&&11>=ms),Hf=" ",qf=!1;function Kf(t,o){switch(t){case"keyup":return by.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Yf(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ao=!1;function Ny(t,o){switch(t){case"compositionend":return Yf(o);case"keypress":return o.which!==32?null:(qf=!0,Hf);case"textInput":return t=o.data,t===Hf&&qf?null:t;default:return null}}function Cy(t,o){if(Ao)return t==="compositionend"||!Ml&&Kf(t,o)?(t=$f(),Ti=jl=Or=null,Ao=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return Wf&&o.locale!=="ko"?null:o.data;default:return null}}var Sy={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Qf(t){var o=t&&t.nodeName&&t.nodeName.toLowerCase();return o==="input"?!!Sy[t.type]:o==="textarea"}function Xf(t,o,l,f){de(f),o=$i(o,"onChange"),0<o.length&&(l=new Il("onChange","change",null,l,f),t.push({event:l,listeners:o}))}var gs=null,vs=null;function Ey(t){mh(t,0)}function _i(t){var o=To(t);if(Te(o))return t}function Dy(t,o){if(t==="change")return o}var Jf=!1;if(d){var Ol;if(d){var _l="oninput"in document;if(!_l){var Zf=document.createElement("div");Zf.setAttribute("oninput","return;"),_l=typeof Zf.oninput=="function"}Ol=_l}else Ol=!1;Jf=Ol&&(!document.documentMode||9<document.documentMode)}function eh(){gs&&(gs.detachEvent("onpropertychange",th),vs=gs=null)}function th(t){if(t.propertyName==="value"&&_i(vs)){var o=[];Xf(o,vs,t,gn(t)),St(Ey,o)}}function Ay(t,o,l){t==="focusin"?(eh(),gs=o,vs=l,gs.attachEvent("onpropertychange",th)):t==="focusout"&&eh()}function jy(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return _i(vs)}function Iy(t,o){if(t==="click")return _i(o)}function ky(t,o){if(t==="input"||t==="change")return _i(o)}function Py(t,o){return t===o&&(t!==0||1/t===1/o)||t!==t&&o!==o}var zn=typeof Object.is=="function"?Object.is:Py;function xs(t,o){if(zn(t,o))return!0;if(typeof t!="object"||t===null||typeof o!="object"||o===null)return!1;var l=Object.keys(t),f=Object.keys(o);if(l.length!==f.length)return!1;for(f=0;f<l.length;f++){var v=l[f];if(!h.call(o,v)||!zn(t[v],o[v]))return!1}return!0}function nh(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function rh(t,o){var l=nh(t);t=0;for(var f;l;){if(l.nodeType===3){if(f=t+l.textContent.length,t<=o&&f>=o)return{node:l,offset:o-t};t=f}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=nh(l)}}function oh(t,o){return t&&o?t===o?!0:t&&t.nodeType===3?!1:o&&o.nodeType===3?oh(t,o.parentNode):"contains"in t?t.contains(o):t.compareDocumentPosition?!!(t.compareDocumentPosition(o)&16):!1:!1}function sh(){for(var t=window,o=Qe();o instanceof t.HTMLIFrameElement;){try{var l=typeof o.contentWindow.location.href=="string"}catch{l=!1}if(l)t=o.contentWindow;else break;o=Qe(t.document)}return o}function Ll(t){var o=t&&t.nodeName&&t.nodeName.toLowerCase();return o&&(o==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||o==="textarea"||t.contentEditable==="true")}function Ty(t){var o=sh(),l=t.focusedElem,f=t.selectionRange;if(o!==l&&l&&l.ownerDocument&&oh(l.ownerDocument.documentElement,l)){if(f!==null&&Ll(l)){if(o=f.start,t=f.end,t===void 0&&(t=o),"selectionStart"in l)l.selectionStart=o,l.selectionEnd=Math.min(t,l.value.length);else if(t=(o=l.ownerDocument||document)&&o.defaultView||window,t.getSelection){t=t.getSelection();var v=l.textContent.length,y=Math.min(f.start,v);f=f.end===void 0?y:Math.min(f.end,v),!t.extend&&y>f&&(v=f,f=y,y=v),v=rh(l,y);var C=rh(l,f);v&&C&&(t.rangeCount!==1||t.anchorNode!==v.node||t.anchorOffset!==v.offset||t.focusNode!==C.node||t.focusOffset!==C.offset)&&(o=o.createRange(),o.setStart(v.node,v.offset),t.removeAllRanges(),y>f?(t.addRange(o),t.extend(C.node,C.offset)):(o.setEnd(C.node,C.offset),t.addRange(o)))}}for(o=[],t=l;t=t.parentNode;)t.nodeType===1&&o.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<o.length;l++)t=o[l],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Ry=d&&"documentMode"in document&&11>=document.documentMode,jo=null,Fl=null,ys=null,Bl=!1;function ih(t,o,l){var f=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Bl||jo==null||jo!==Qe(f)||(f=jo,"selectionStart"in f&&Ll(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),ys&&xs(ys,f)||(ys=f,f=$i(Fl,"onSelect"),0<f.length&&(o=new Il("onSelect","select",null,o,l),t.push({event:o,listeners:f}),o.target=jo)))}function Li(t,o){var l={};return l[t.toLowerCase()]=o.toLowerCase(),l["Webkit"+t]="webkit"+o,l["Moz"+t]="moz"+o,l}var Io={animationend:Li("Animation","AnimationEnd"),animationiteration:Li("Animation","AnimationIteration"),animationstart:Li("Animation","AnimationStart"),transitionend:Li("Transition","TransitionEnd")},$l={},ah={};d&&(ah=document.createElement("div").style,"AnimationEvent"in window||(delete Io.animationend.animation,delete Io.animationiteration.animation,delete Io.animationstart.animation),"TransitionEvent"in window||delete Io.transitionend.transition);function Fi(t){if($l[t])return $l[t];if(!Io[t])return t;var o=Io[t],l;for(l in o)if(o.hasOwnProperty(l)&&l in ah)return $l[t]=o[l];return t}var lh=Fi("animationend"),ch=Fi("animationiteration"),uh=Fi("animationstart"),dh=Fi("transitionend"),fh=new Map,hh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function _r(t,o){fh.set(t,o),a(o,[t])}for(var Gl=0;Gl<hh.length;Gl++){var Ul=hh[Gl],My=Ul.toLowerCase(),Oy=Ul[0].toUpperCase()+Ul.slice(1);_r(My,"on"+Oy)}_r(lh,"onAnimationEnd"),_r(ch,"onAnimationIteration"),_r(uh,"onAnimationStart"),_r("dblclick","onDoubleClick"),_r("focusin","onFocus"),_r("focusout","onBlur"),_r(dh,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var bs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_y=new Set("cancel close invalid load scroll toggle".split(" ").concat(bs));function ph(t,o,l){var f=t.type||"unknown-event";t.currentTarget=l,Ie(f,o,void 0,t),t.currentTarget=null}function mh(t,o){o=(o&4)!==0;for(var l=0;l<t.length;l++){var f=t[l],v=f.event;f=f.listeners;e:{var y=void 0;if(o)for(var C=f.length-1;0<=C;C--){var T=f[C],L=T.instance,K=T.currentTarget;if(T=T.listener,L!==y&&v.isPropagationStopped())break e;ph(v,T,K),y=L}else for(C=0;C<f.length;C++){if(T=f[C],L=T.instance,K=T.currentTarget,T=T.listener,L!==y&&v.isPropagationStopped())break e;ph(v,T,K),y=L}}}if(Ot)throw t=Gn,Ot=!1,Gn=null,t}function nt(t,o){var l=o[Ql];l===void 0&&(l=o[Ql]=new Set);var f=t+"__bubble";l.has(f)||(gh(o,t,2,!1),l.add(f))}function Vl(t,o,l){var f=0;o&&(f|=4),gh(l,t,f,o)}var Bi="_reactListening"+Math.random().toString(36).slice(2);function ws(t){if(!t[Bi]){t[Bi]=!0,s.forEach(function(l){l!=="selectionchange"&&(_y.has(l)||Vl(l,!1,t),Vl(l,!0,t))});var o=t.nodeType===9?t:t.ownerDocument;o===null||o[Bi]||(o[Bi]=!0,Vl("selectionchange",!1,o))}}function gh(t,o,l,f){switch(Bf(o)){case 1:var v=Qx;break;case 4:v=Xx;break;default:v=Dl}l=v.bind(null,o,l,t),v=void 0,!Gt||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(v=!0),f?v!==void 0?t.addEventListener(o,l,{capture:!0,passive:v}):t.addEventListener(o,l,!0):v!==void 0?t.addEventListener(o,l,{passive:v}):t.addEventListener(o,l,!1)}function zl(t,o,l,f,v){var y=f;if((o&1)===0&&(o&2)===0&&f!==null)e:for(;;){if(f===null)return;var C=f.tag;if(C===3||C===4){var T=f.stateNode.containerInfo;if(T===v||T.nodeType===8&&T.parentNode===v)break;if(C===4)for(C=f.return;C!==null;){var L=C.tag;if((L===3||L===4)&&(L=C.stateNode.containerInfo,L===v||L.nodeType===8&&L.parentNode===v))return;C=C.return}for(;T!==null;){if(C=so(T),C===null)return;if(L=C.tag,L===5||L===6){f=y=C;continue e}T=T.parentNode}}f=f.return}St(function(){var K=y,ne=gn(l),se=[];e:{var te=fh.get(t);if(te!==void 0){var pe=Il,ge=t;switch(t){case"keypress":if(Ri(l)===0)break e;case"keydown":case"keyup":pe=fy;break;case"focusin":ge="focus",pe=Tl;break;case"focusout":ge="blur",pe=Tl;break;case"beforeblur":case"afterblur":pe=Tl;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":pe=Uf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":pe=ey;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":pe=my;break;case lh:case ch:case uh:pe=ry;break;case dh:pe=vy;break;case"scroll":pe=Jx;break;case"wheel":pe=yy;break;case"copy":case"cut":case"paste":pe=sy;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":pe=zf}var xe=(o&4)!==0,gt=!xe&&t==="scroll",z=xe?te!==null?te+"Capture":null:te;xe=[];for(var $=K,H;$!==null;){H=$;var le=H.stateNode;if(H.tag===5&&le!==null&&(H=le,z!==null&&(le=Ve($,z),le!=null&&xe.push(Ns($,le,H)))),gt)break;$=$.return}0<xe.length&&(te=new pe(te,ge,null,l,ne),se.push({event:te,listeners:xe}))}}if((o&7)===0){e:{if(te=t==="mouseover"||t==="pointerover",pe=t==="mouseout"||t==="pointerout",te&&l!==In&&(ge=l.relatedTarget||l.fromElement)&&(so(ge)||ge[hr]))break e;if((pe||te)&&(te=ne.window===ne?ne:(te=ne.ownerDocument)?te.defaultView||te.parentWindow:window,pe?(ge=l.relatedTarget||l.toElement,pe=K,ge=ge?so(ge):null,ge!==null&&(gt=Re(ge),ge!==gt||ge.tag!==5&&ge.tag!==6)&&(ge=null)):(pe=null,ge=K),pe!==ge)){if(xe=Uf,le="onMouseLeave",z="onMouseEnter",$="mouse",(t==="pointerout"||t==="pointerover")&&(xe=zf,le="onPointerLeave",z="onPointerEnter",$="pointer"),gt=pe==null?te:To(pe),H=ge==null?te:To(ge),te=new xe(le,$+"leave",pe,l,ne),te.target=gt,te.relatedTarget=H,le=null,so(ne)===K&&(xe=new xe(z,$+"enter",ge,l,ne),xe.target=H,xe.relatedTarget=gt,le=xe),gt=le,pe&&ge)t:{for(xe=pe,z=ge,$=0,H=xe;H;H=ko(H))$++;for(H=0,le=z;le;le=ko(le))H++;for(;0<$-H;)xe=ko(xe),$--;for(;0<H-$;)z=ko(z),H--;for(;$--;){if(xe===z||z!==null&&xe===z.alternate)break t;xe=ko(xe),z=ko(z)}xe=null}else xe=null;pe!==null&&vh(se,te,pe,xe,!1),ge!==null&&gt!==null&&vh(se,gt,ge,xe,!0)}}e:{if(te=K?To(K):window,pe=te.nodeName&&te.nodeName.toLowerCase(),pe==="select"||pe==="input"&&te.type==="file")var be=Dy;else if(Qf(te))if(Jf)be=ky;else{be=jy;var De=Ay}else(pe=te.nodeName)&&pe.toLowerCase()==="input"&&(te.type==="checkbox"||te.type==="radio")&&(be=Iy);if(be&&(be=be(t,K))){Xf(se,be,l,ne);break e}De&&De(t,te,K),t==="focusout"&&(De=te._wrapperState)&&De.controlled&&te.type==="number"&&Kt(te,"number",te.value)}switch(De=K?To(K):window,t){case"focusin":(Qf(De)||De.contentEditable==="true")&&(jo=De,Fl=K,ys=null);break;case"focusout":ys=Fl=jo=null;break;case"mousedown":Bl=!0;break;case"contextmenu":case"mouseup":case"dragend":Bl=!1,ih(se,l,ne);break;case"selectionchange":if(Ry)break;case"keydown":case"keyup":ih(se,l,ne)}var Ae;if(Ml)e:{switch(t){case"compositionstart":var ke="onCompositionStart";break e;case"compositionend":ke="onCompositionEnd";break e;case"compositionupdate":ke="onCompositionUpdate";break e}ke=void 0}else Ao?Kf(t,l)&&(ke="onCompositionEnd"):t==="keydown"&&l.keyCode===229&&(ke="onCompositionStart");ke&&(Wf&&l.locale!=="ko"&&(Ao||ke!=="onCompositionStart"?ke==="onCompositionEnd"&&Ao&&(Ae=$f()):(Or=ne,jl="value"in Or?Or.value:Or.textContent,Ao=!0)),De=$i(K,ke),0<De.length&&(ke=new Vf(ke,t,null,l,ne),se.push({event:ke,listeners:De}),Ae?ke.data=Ae:(Ae=Yf(l),Ae!==null&&(ke.data=Ae)))),(Ae=wy?Ny(t,l):Cy(t,l))&&(K=$i(K,"onBeforeInput"),0<K.length&&(ne=new Vf("onBeforeInput","beforeinput",null,l,ne),se.push({event:ne,listeners:K}),ne.data=Ae))}mh(se,o)})}function Ns(t,o,l){return{instance:t,listener:o,currentTarget:l}}function $i(t,o){for(var l=o+"Capture",f=[];t!==null;){var v=t,y=v.stateNode;v.tag===5&&y!==null&&(v=y,y=Ve(t,l),y!=null&&f.unshift(Ns(t,y,v)),y=Ve(t,o),y!=null&&f.push(Ns(t,y,v))),t=t.return}return f}function ko(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function vh(t,o,l,f,v){for(var y=o._reactName,C=[];l!==null&&l!==f;){var T=l,L=T.alternate,K=T.stateNode;if(L!==null&&L===f)break;T.tag===5&&K!==null&&(T=K,v?(L=Ve(l,y),L!=null&&C.unshift(Ns(l,L,T))):v||(L=Ve(l,y),L!=null&&C.push(Ns(l,L,T)))),l=l.return}C.length!==0&&t.push({event:o,listeners:C})}var Ly=/\r\n?/g,Fy=/\u0000|\uFFFD/g;function xh(t){return(typeof t=="string"?t:""+t).replace(Ly,`
`).replace(Fy,"")}function Gi(t,o,l){if(o=xh(o),xh(t)!==o&&l)throw Error(r(425))}function Ui(){}var Wl=null,Hl=null;function ql(t,o){return t==="textarea"||t==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Kl=typeof setTimeout=="function"?setTimeout:void 0,By=typeof clearTimeout=="function"?clearTimeout:void 0,yh=typeof Promise=="function"?Promise:void 0,$y=typeof queueMicrotask=="function"?queueMicrotask:typeof yh<"u"?function(t){return yh.resolve(null).then(t).catch(Gy)}:Kl;function Gy(t){setTimeout(function(){throw t})}function Yl(t,o){var l=o,f=0;do{var v=l.nextSibling;if(t.removeChild(l),v&&v.nodeType===8)if(l=v.data,l==="/$"){if(f===0){t.removeChild(v),fs(o);return}f--}else l!=="$"&&l!=="$?"&&l!=="$!"||f++;l=v}while(l);fs(o)}function Lr(t){for(;t!=null;t=t.nextSibling){var o=t.nodeType;if(o===1||o===3)break;if(o===8){if(o=t.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return t}function bh(t){t=t.previousSibling;for(var o=0;t;){if(t.nodeType===8){var l=t.data;if(l==="$"||l==="$!"||l==="$?"){if(o===0)return t;o--}else l==="/$"&&o++}t=t.previousSibling}return null}var Po=Math.random().toString(36).slice(2),nr="__reactFiber$"+Po,Cs="__reactProps$"+Po,hr="__reactContainer$"+Po,Ql="__reactEvents$"+Po,Uy="__reactListeners$"+Po,Vy="__reactHandles$"+Po;function so(t){var o=t[nr];if(o)return o;for(var l=t.parentNode;l;){if(o=l[hr]||l[nr]){if(l=o.alternate,o.child!==null||l!==null&&l.child!==null)for(t=bh(t);t!==null;){if(l=t[nr])return l;t=bh(t)}return o}t=l,l=t.parentNode}return null}function Ss(t){return t=t[nr]||t[hr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function To(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(r(33))}function Vi(t){return t[Cs]||null}var Xl=[],Ro=-1;function Fr(t){return{current:t}}function rt(t){0>Ro||(t.current=Xl[Ro],Xl[Ro]=null,Ro--)}function Ze(t,o){Ro++,Xl[Ro]=t.current,t.current=o}var Br={},Vt=Fr(Br),sn=Fr(!1),io=Br;function Mo(t,o){var l=t.type.contextTypes;if(!l)return Br;var f=t.stateNode;if(f&&f.__reactInternalMemoizedUnmaskedChildContext===o)return f.__reactInternalMemoizedMaskedChildContext;var v={},y;for(y in l)v[y]=o[y];return f&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=o,t.__reactInternalMemoizedMaskedChildContext=v),v}function an(t){return t=t.childContextTypes,t!=null}function zi(){rt(sn),rt(Vt)}function wh(t,o,l){if(Vt.current!==Br)throw Error(r(168));Ze(Vt,o),Ze(sn,l)}function Nh(t,o,l){var f=t.stateNode;if(o=o.childContextTypes,typeof f.getChildContext!="function")return l;f=f.getChildContext();for(var v in f)if(!(v in o))throw Error(r(108,Pe(t)||"Unknown",v));return F({},l,f)}function Wi(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Br,io=Vt.current,Ze(Vt,t),Ze(sn,sn.current),!0}function Ch(t,o,l){var f=t.stateNode;if(!f)throw Error(r(169));l?(t=Nh(t,o,io),f.__reactInternalMemoizedMergedChildContext=t,rt(sn),rt(Vt),Ze(Vt,t)):rt(sn),Ze(sn,l)}var pr=null,Hi=!1,Jl=!1;function Sh(t){pr===null?pr=[t]:pr.push(t)}function zy(t){Hi=!0,Sh(t)}function $r(){if(!Jl&&pr!==null){Jl=!0;var t=0,o=Ke;try{var l=pr;for(Ke=1;t<l.length;t++){var f=l[t];do f=f(!0);while(f!==null)}pr=null,Hi=!1}catch(v){throw pr!==null&&(pr=pr.slice(t+1)),kr(ss,$r),v}finally{Ke=o,Jl=!1}}return null}var Oo=[],_o=0,qi=null,Ki=0,Pn=[],Tn=0,ao=null,mr=1,gr="";function lo(t,o){Oo[_o++]=Ki,Oo[_o++]=qi,qi=t,Ki=o}function Eh(t,o,l){Pn[Tn++]=mr,Pn[Tn++]=gr,Pn[Tn++]=ao,ao=t;var f=mr;t=gr;var v=32-Vn(f)-1;f&=~(1<<v),l+=1;var y=32-Vn(o)+v;if(30<y){var C=v-v%5;y=(f&(1<<C)-1).toString(32),f>>=C,v-=C,mr=1<<32-Vn(o)+v|l<<v|f,gr=y+t}else mr=1<<y|l<<v|f,gr=t}function Zl(t){t.return!==null&&(lo(t,1),Eh(t,1,0))}function ec(t){for(;t===qi;)qi=Oo[--_o],Oo[_o]=null,Ki=Oo[--_o],Oo[_o]=null;for(;t===ao;)ao=Pn[--Tn],Pn[Tn]=null,gr=Pn[--Tn],Pn[Tn]=null,mr=Pn[--Tn],Pn[Tn]=null}var yn=null,bn=null,st=!1,Wn=null;function Dh(t,o){var l=_n(5,null,null,0);l.elementType="DELETED",l.stateNode=o,l.return=t,o=t.deletions,o===null?(t.deletions=[l],t.flags|=16):o.push(l)}function Ah(t,o){switch(t.tag){case 5:var l=t.type;return o=o.nodeType!==1||l.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(t.stateNode=o,yn=t,bn=Lr(o.firstChild),!0):!1;case 6:return o=t.pendingProps===""||o.nodeType!==3?null:o,o!==null?(t.stateNode=o,yn=t,bn=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(l=ao!==null?{id:mr,overflow:gr}:null,t.memoizedState={dehydrated:o,treeContext:l,retryLane:1073741824},l=_n(18,null,null,0),l.stateNode=o,l.return=t,t.child=l,yn=t,bn=null,!0):!1;default:return!1}}function tc(t){return(t.mode&1)!==0&&(t.flags&128)===0}function nc(t){if(st){var o=bn;if(o){var l=o;if(!Ah(t,o)){if(tc(t))throw Error(r(418));o=Lr(l.nextSibling);var f=yn;o&&Ah(t,o)?Dh(f,l):(t.flags=t.flags&-4097|2,st=!1,yn=t)}}else{if(tc(t))throw Error(r(418));t.flags=t.flags&-4097|2,st=!1,yn=t}}}function jh(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;yn=t}function Yi(t){if(t!==yn)return!1;if(!st)return jh(t),st=!0,!1;var o;if((o=t.tag!==3)&&!(o=t.tag!==5)&&(o=t.type,o=o!=="head"&&o!=="body"&&!ql(t.type,t.memoizedProps)),o&&(o=bn)){if(tc(t))throw Ih(),Error(r(418));for(;o;)Dh(t,o),o=Lr(o.nextSibling)}if(jh(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));e:{for(t=t.nextSibling,o=0;t;){if(t.nodeType===8){var l=t.data;if(l==="/$"){if(o===0){bn=Lr(t.nextSibling);break e}o--}else l!=="$"&&l!=="$!"&&l!=="$?"||o++}t=t.nextSibling}bn=null}}else bn=yn?Lr(t.stateNode.nextSibling):null;return!0}function Ih(){for(var t=bn;t;)t=Lr(t.nextSibling)}function Lo(){bn=yn=null,st=!1}function rc(t){Wn===null?Wn=[t]:Wn.push(t)}var Wy=D.ReactCurrentBatchConfig;function Es(t,o,l){if(t=l.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(r(309));var f=l.stateNode}if(!f)throw Error(r(147,t));var v=f,y=""+t;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===y?o.ref:(o=function(C){var T=v.refs;C===null?delete T[y]:T[y]=C},o._stringRef=y,o)}if(typeof t!="string")throw Error(r(284));if(!l._owner)throw Error(r(290,t))}return t}function Qi(t,o){throw t=Object.prototype.toString.call(o),Error(r(31,t==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":t))}function kh(t){var o=t._init;return o(t._payload)}function Ph(t){function o(z,$){if(t){var H=z.deletions;H===null?(z.deletions=[$],z.flags|=16):H.push($)}}function l(z,$){if(!t)return null;for(;$!==null;)o(z,$),$=$.sibling;return null}function f(z,$){for(z=new Map;$!==null;)$.key!==null?z.set($.key,$):z.set($.index,$),$=$.sibling;return z}function v(z,$){return z=Kr(z,$),z.index=0,z.sibling=null,z}function y(z,$,H){return z.index=H,t?(H=z.alternate,H!==null?(H=H.index,H<$?(z.flags|=2,$):H):(z.flags|=2,$)):(z.flags|=1048576,$)}function C(z){return t&&z.alternate===null&&(z.flags|=2),z}function T(z,$,H,le){return $===null||$.tag!==6?($=Kc(H,z.mode,le),$.return=z,$):($=v($,H),$.return=z,$)}function L(z,$,H,le){var be=H.type;return be===O?ne(z,$,H.props.children,le,H.key):$!==null&&($.elementType===be||typeof be=="object"&&be!==null&&be.$$typeof===ce&&kh(be)===$.type)?(le=v($,H.props),le.ref=Es(z,$,H),le.return=z,le):(le=ba(H.type,H.key,H.props,null,z.mode,le),le.ref=Es(z,$,H),le.return=z,le)}function K(z,$,H,le){return $===null||$.tag!==4||$.stateNode.containerInfo!==H.containerInfo||$.stateNode.implementation!==H.implementation?($=Yc(H,z.mode,le),$.return=z,$):($=v($,H.children||[]),$.return=z,$)}function ne(z,$,H,le,be){return $===null||$.tag!==7?($=vo(H,z.mode,le,be),$.return=z,$):($=v($,H),$.return=z,$)}function se(z,$,H){if(typeof $=="string"&&$!==""||typeof $=="number")return $=Kc(""+$,z.mode,H),$.return=z,$;if(typeof $=="object"&&$!==null){switch($.$$typeof){case k:return H=ba($.type,$.key,$.props,null,z.mode,H),H.ref=Es(z,null,$),H.return=z,H;case R:return $=Yc($,z.mode,H),$.return=z,$;case ce:var le=$._init;return se(z,le($._payload),H)}if(ut($)||V($))return $=vo($,z.mode,H,null),$.return=z,$;Qi(z,$)}return null}function te(z,$,H,le){var be=$!==null?$.key:null;if(typeof H=="string"&&H!==""||typeof H=="number")return be!==null?null:T(z,$,""+H,le);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case k:return H.key===be?L(z,$,H,le):null;case R:return H.key===be?K(z,$,H,le):null;case ce:return be=H._init,te(z,$,be(H._payload),le)}if(ut(H)||V(H))return be!==null?null:ne(z,$,H,le,null);Qi(z,H)}return null}function pe(z,$,H,le,be){if(typeof le=="string"&&le!==""||typeof le=="number")return z=z.get(H)||null,T($,z,""+le,be);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case k:return z=z.get(le.key===null?H:le.key)||null,L($,z,le,be);case R:return z=z.get(le.key===null?H:le.key)||null,K($,z,le,be);case ce:var De=le._init;return pe(z,$,H,De(le._payload),be)}if(ut(le)||V(le))return z=z.get(H)||null,ne($,z,le,be,null);Qi($,le)}return null}function ge(z,$,H,le){for(var be=null,De=null,Ae=$,ke=$=0,jt=null;Ae!==null&&ke<H.length;ke++){Ae.index>ke?(jt=Ae,Ae=null):jt=Ae.sibling;var ze=te(z,Ae,H[ke],le);if(ze===null){Ae===null&&(Ae=jt);break}t&&Ae&&ze.alternate===null&&o(z,Ae),$=y(ze,$,ke),De===null?be=ze:De.sibling=ze,De=ze,Ae=jt}if(ke===H.length)return l(z,Ae),st&&lo(z,ke),be;if(Ae===null){for(;ke<H.length;ke++)Ae=se(z,H[ke],le),Ae!==null&&($=y(Ae,$,ke),De===null?be=Ae:De.sibling=Ae,De=Ae);return st&&lo(z,ke),be}for(Ae=f(z,Ae);ke<H.length;ke++)jt=pe(Ae,z,ke,H[ke],le),jt!==null&&(t&&jt.alternate!==null&&Ae.delete(jt.key===null?ke:jt.key),$=y(jt,$,ke),De===null?be=jt:De.sibling=jt,De=jt);return t&&Ae.forEach(function(Yr){return o(z,Yr)}),st&&lo(z,ke),be}function xe(z,$,H,le){var be=V(H);if(typeof be!="function")throw Error(r(150));if(H=be.call(H),H==null)throw Error(r(151));for(var De=be=null,Ae=$,ke=$=0,jt=null,ze=H.next();Ae!==null&&!ze.done;ke++,ze=H.next()){Ae.index>ke?(jt=Ae,Ae=null):jt=Ae.sibling;var Yr=te(z,Ae,ze.value,le);if(Yr===null){Ae===null&&(Ae=jt);break}t&&Ae&&Yr.alternate===null&&o(z,Ae),$=y(Yr,$,ke),De===null?be=Yr:De.sibling=Yr,De=Yr,Ae=jt}if(ze.done)return l(z,Ae),st&&lo(z,ke),be;if(Ae===null){for(;!ze.done;ke++,ze=H.next())ze=se(z,ze.value,le),ze!==null&&($=y(ze,$,ke),De===null?be=ze:De.sibling=ze,De=ze);return st&&lo(z,ke),be}for(Ae=f(z,Ae);!ze.done;ke++,ze=H.next())ze=pe(Ae,z,ke,ze.value,le),ze!==null&&(t&&ze.alternate!==null&&Ae.delete(ze.key===null?ke:ze.key),$=y(ze,$,ke),De===null?be=ze:De.sibling=ze,De=ze);return t&&Ae.forEach(function(Sb){return o(z,Sb)}),st&&lo(z,ke),be}function gt(z,$,H,le){if(typeof H=="object"&&H!==null&&H.type===O&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case k:e:{for(var be=H.key,De=$;De!==null;){if(De.key===be){if(be=H.type,be===O){if(De.tag===7){l(z,De.sibling),$=v(De,H.props.children),$.return=z,z=$;break e}}else if(De.elementType===be||typeof be=="object"&&be!==null&&be.$$typeof===ce&&kh(be)===De.type){l(z,De.sibling),$=v(De,H.props),$.ref=Es(z,De,H),$.return=z,z=$;break e}l(z,De);break}else o(z,De);De=De.sibling}H.type===O?($=vo(H.props.children,z.mode,le,H.key),$.return=z,z=$):(le=ba(H.type,H.key,H.props,null,z.mode,le),le.ref=Es(z,$,H),le.return=z,z=le)}return C(z);case R:e:{for(De=H.key;$!==null;){if($.key===De)if($.tag===4&&$.stateNode.containerInfo===H.containerInfo&&$.stateNode.implementation===H.implementation){l(z,$.sibling),$=v($,H.children||[]),$.return=z,z=$;break e}else{l(z,$);break}else o(z,$);$=$.sibling}$=Yc(H,z.mode,le),$.return=z,z=$}return C(z);case ce:return De=H._init,gt(z,$,De(H._payload),le)}if(ut(H))return ge(z,$,H,le);if(V(H))return xe(z,$,H,le);Qi(z,H)}return typeof H=="string"&&H!==""||typeof H=="number"?(H=""+H,$!==null&&$.tag===6?(l(z,$.sibling),$=v($,H),$.return=z,z=$):(l(z,$),$=Kc(H,z.mode,le),$.return=z,z=$),C(z)):l(z,$)}return gt}var Fo=Ph(!0),Th=Ph(!1),Xi=Fr(null),Ji=null,Bo=null,oc=null;function sc(){oc=Bo=Ji=null}function ic(t){var o=Xi.current;rt(Xi),t._currentValue=o}function ac(t,o,l){for(;t!==null;){var f=t.alternate;if((t.childLanes&o)!==o?(t.childLanes|=o,f!==null&&(f.childLanes|=o)):f!==null&&(f.childLanes&o)!==o&&(f.childLanes|=o),t===l)break;t=t.return}}function $o(t,o){Ji=t,oc=Bo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&o)!==0&&(ln=!0),t.firstContext=null)}function Rn(t){var o=t._currentValue;if(oc!==t)if(t={context:t,memoizedValue:o,next:null},Bo===null){if(Ji===null)throw Error(r(308));Bo=t,Ji.dependencies={lanes:0,firstContext:t}}else Bo=Bo.next=t;return o}var co=null;function lc(t){co===null?co=[t]:co.push(t)}function Rh(t,o,l,f){var v=o.interleaved;return v===null?(l.next=l,lc(o)):(l.next=v.next,v.next=l),o.interleaved=l,vr(t,f)}function vr(t,o){t.lanes|=o;var l=t.alternate;for(l!==null&&(l.lanes|=o),l=t,t=t.return;t!==null;)t.childLanes|=o,l=t.alternate,l!==null&&(l.childLanes|=o),l=t,t=t.return;return l.tag===3?l.stateNode:null}var Gr=!1;function cc(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Mh(t,o){t=t.updateQueue,o.updateQueue===t&&(o.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function xr(t,o){return{eventTime:t,lane:o,tag:0,payload:null,callback:null,next:null}}function Ur(t,o,l){var f=t.updateQueue;if(f===null)return null;if(f=f.shared,(Ue&2)!==0){var v=f.pending;return v===null?o.next=o:(o.next=v.next,v.next=o),f.pending=o,vr(t,l)}return v=f.interleaved,v===null?(o.next=o,lc(f)):(o.next=v.next,v.next=o),f.interleaved=o,vr(t,l)}function Zi(t,o,l){if(o=o.updateQueue,o!==null&&(o=o.shared,(l&4194240)!==0)){var f=o.lanes;f&=t.pendingLanes,l|=f,o.lanes=l,Cl(t,l)}}function Oh(t,o){var l=t.updateQueue,f=t.alternate;if(f!==null&&(f=f.updateQueue,l===f)){var v=null,y=null;if(l=l.firstBaseUpdate,l!==null){do{var C={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};y===null?v=y=C:y=y.next=C,l=l.next}while(l!==null);y===null?v=y=o:y=y.next=o}else v=y=o;l={baseState:f.baseState,firstBaseUpdate:v,lastBaseUpdate:y,shared:f.shared,effects:f.effects},t.updateQueue=l;return}t=l.lastBaseUpdate,t===null?l.firstBaseUpdate=o:t.next=o,l.lastBaseUpdate=o}function ea(t,o,l,f){var v=t.updateQueue;Gr=!1;var y=v.firstBaseUpdate,C=v.lastBaseUpdate,T=v.shared.pending;if(T!==null){v.shared.pending=null;var L=T,K=L.next;L.next=null,C===null?y=K:C.next=K,C=L;var ne=t.alternate;ne!==null&&(ne=ne.updateQueue,T=ne.lastBaseUpdate,T!==C&&(T===null?ne.firstBaseUpdate=K:T.next=K,ne.lastBaseUpdate=L))}if(y!==null){var se=v.baseState;C=0,ne=K=L=null,T=y;do{var te=T.lane,pe=T.eventTime;if((f&te)===te){ne!==null&&(ne=ne.next={eventTime:pe,lane:0,tag:T.tag,payload:T.payload,callback:T.callback,next:null});e:{var ge=t,xe=T;switch(te=o,pe=l,xe.tag){case 1:if(ge=xe.payload,typeof ge=="function"){se=ge.call(pe,se,te);break e}se=ge;break e;case 3:ge.flags=ge.flags&-65537|128;case 0:if(ge=xe.payload,te=typeof ge=="function"?ge.call(pe,se,te):ge,te==null)break e;se=F({},se,te);break e;case 2:Gr=!0}}T.callback!==null&&T.lane!==0&&(t.flags|=64,te=v.effects,te===null?v.effects=[T]:te.push(T))}else pe={eventTime:pe,lane:te,tag:T.tag,payload:T.payload,callback:T.callback,next:null},ne===null?(K=ne=pe,L=se):ne=ne.next=pe,C|=te;if(T=T.next,T===null){if(T=v.shared.pending,T===null)break;te=T,T=te.next,te.next=null,v.lastBaseUpdate=te,v.shared.pending=null}}while(!0);if(ne===null&&(L=se),v.baseState=L,v.firstBaseUpdate=K,v.lastBaseUpdate=ne,o=v.shared.interleaved,o!==null){v=o;do C|=v.lane,v=v.next;while(v!==o)}else y===null&&(v.shared.lanes=0);ho|=C,t.lanes=C,t.memoizedState=se}}function _h(t,o,l){if(t=o.effects,o.effects=null,t!==null)for(o=0;o<t.length;o++){var f=t[o],v=f.callback;if(v!==null){if(f.callback=null,f=l,typeof v!="function")throw Error(r(191,v));v.call(f)}}}var Ds={},rr=Fr(Ds),As=Fr(Ds),js=Fr(Ds);function uo(t){if(t===Ds)throw Error(r(174));return t}function uc(t,o){switch(Ze(js,o),Ze(As,t),Ze(rr,Ds),t=o.nodeType,t){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:Yt(null,"");break;default:t=t===8?o.parentNode:o,o=t.namespaceURI||null,t=t.tagName,o=Yt(o,t)}rt(rr),Ze(rr,o)}function Go(){rt(rr),rt(As),rt(js)}function Lh(t){uo(js.current);var o=uo(rr.current),l=Yt(o,t.type);o!==l&&(Ze(As,t),Ze(rr,l))}function dc(t){As.current===t&&(rt(rr),rt(As))}var at=Fr(0);function ta(t){for(var o=t;o!==null;){if(o.tag===13){var l=o.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===t)break;for(;o.sibling===null;){if(o.return===null||o.return===t)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var fc=[];function hc(){for(var t=0;t<fc.length;t++)fc[t]._workInProgressVersionPrimary=null;fc.length=0}var na=D.ReactCurrentDispatcher,pc=D.ReactCurrentBatchConfig,fo=0,lt=null,bt=null,Dt=null,ra=!1,Is=!1,ks=0,Hy=0;function zt(){throw Error(r(321))}function mc(t,o){if(o===null)return!1;for(var l=0;l<o.length&&l<t.length;l++)if(!zn(t[l],o[l]))return!1;return!0}function gc(t,o,l,f,v,y){if(fo=y,lt=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,na.current=t===null||t.memoizedState===null?Qy:Xy,t=l(f,v),Is){y=0;do{if(Is=!1,ks=0,25<=y)throw Error(r(301));y+=1,Dt=bt=null,o.updateQueue=null,na.current=Jy,t=l(f,v)}while(Is)}if(na.current=ia,o=bt!==null&&bt.next!==null,fo=0,Dt=bt=lt=null,ra=!1,o)throw Error(r(300));return t}function vc(){var t=ks!==0;return ks=0,t}function or(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Dt===null?lt.memoizedState=Dt=t:Dt=Dt.next=t,Dt}function Mn(){if(bt===null){var t=lt.alternate;t=t!==null?t.memoizedState:null}else t=bt.next;var o=Dt===null?lt.memoizedState:Dt.next;if(o!==null)Dt=o,bt=t;else{if(t===null)throw Error(r(310));bt=t,t={memoizedState:bt.memoizedState,baseState:bt.baseState,baseQueue:bt.baseQueue,queue:bt.queue,next:null},Dt===null?lt.memoizedState=Dt=t:Dt=Dt.next=t}return Dt}function Ps(t,o){return typeof o=="function"?o(t):o}function xc(t){var o=Mn(),l=o.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=t;var f=bt,v=f.baseQueue,y=l.pending;if(y!==null){if(v!==null){var C=v.next;v.next=y.next,y.next=C}f.baseQueue=v=y,l.pending=null}if(v!==null){y=v.next,f=f.baseState;var T=C=null,L=null,K=y;do{var ne=K.lane;if((fo&ne)===ne)L!==null&&(L=L.next={lane:0,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null}),f=K.hasEagerState?K.eagerState:t(f,K.action);else{var se={lane:ne,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null};L===null?(T=L=se,C=f):L=L.next=se,lt.lanes|=ne,ho|=ne}K=K.next}while(K!==null&&K!==y);L===null?C=f:L.next=T,zn(f,o.memoizedState)||(ln=!0),o.memoizedState=f,o.baseState=C,o.baseQueue=L,l.lastRenderedState=f}if(t=l.interleaved,t!==null){v=t;do y=v.lane,lt.lanes|=y,ho|=y,v=v.next;while(v!==t)}else v===null&&(l.lanes=0);return[o.memoizedState,l.dispatch]}function yc(t){var o=Mn(),l=o.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=t;var f=l.dispatch,v=l.pending,y=o.memoizedState;if(v!==null){l.pending=null;var C=v=v.next;do y=t(y,C.action),C=C.next;while(C!==v);zn(y,o.memoizedState)||(ln=!0),o.memoizedState=y,o.baseQueue===null&&(o.baseState=y),l.lastRenderedState=y}return[y,f]}function Fh(){}function Bh(t,o){var l=lt,f=Mn(),v=o(),y=!zn(f.memoizedState,v);if(y&&(f.memoizedState=v,ln=!0),f=f.queue,bc(Uh.bind(null,l,f,t),[t]),f.getSnapshot!==o||y||Dt!==null&&Dt.memoizedState.tag&1){if(l.flags|=2048,Ts(9,Gh.bind(null,l,f,v,o),void 0,null),At===null)throw Error(r(349));(fo&30)!==0||$h(l,o,v)}return v}function $h(t,o,l){t.flags|=16384,t={getSnapshot:o,value:l},o=lt.updateQueue,o===null?(o={lastEffect:null,stores:null},lt.updateQueue=o,o.stores=[t]):(l=o.stores,l===null?o.stores=[t]:l.push(t))}function Gh(t,o,l,f){o.value=l,o.getSnapshot=f,Vh(o)&&zh(t)}function Uh(t,o,l){return l(function(){Vh(o)&&zh(t)})}function Vh(t){var o=t.getSnapshot;t=t.value;try{var l=o();return!zn(t,l)}catch{return!0}}function zh(t){var o=vr(t,1);o!==null&&Yn(o,t,1,-1)}function Wh(t){var o=or();return typeof t=="function"&&(t=t()),o.memoizedState=o.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ps,lastRenderedState:t},o.queue=t,t=t.dispatch=Yy.bind(null,lt,t),[o.memoizedState,t]}function Ts(t,o,l,f){return t={tag:t,create:o,destroy:l,deps:f,next:null},o=lt.updateQueue,o===null?(o={lastEffect:null,stores:null},lt.updateQueue=o,o.lastEffect=t.next=t):(l=o.lastEffect,l===null?o.lastEffect=t.next=t:(f=l.next,l.next=t,t.next=f,o.lastEffect=t)),t}function Hh(){return Mn().memoizedState}function oa(t,o,l,f){var v=or();lt.flags|=t,v.memoizedState=Ts(1|o,l,void 0,f===void 0?null:f)}function sa(t,o,l,f){var v=Mn();f=f===void 0?null:f;var y=void 0;if(bt!==null){var C=bt.memoizedState;if(y=C.destroy,f!==null&&mc(f,C.deps)){v.memoizedState=Ts(o,l,y,f);return}}lt.flags|=t,v.memoizedState=Ts(1|o,l,y,f)}function qh(t,o){return oa(8390656,8,t,o)}function bc(t,o){return sa(2048,8,t,o)}function Kh(t,o){return sa(4,2,t,o)}function Yh(t,o){return sa(4,4,t,o)}function Qh(t,o){if(typeof o=="function")return t=t(),o(t),function(){o(null)};if(o!=null)return t=t(),o.current=t,function(){o.current=null}}function Xh(t,o,l){return l=l!=null?l.concat([t]):null,sa(4,4,Qh.bind(null,o,t),l)}function wc(){}function Jh(t,o){var l=Mn();o=o===void 0?null:o;var f=l.memoizedState;return f!==null&&o!==null&&mc(o,f[1])?f[0]:(l.memoizedState=[t,o],t)}function Zh(t,o){var l=Mn();o=o===void 0?null:o;var f=l.memoizedState;return f!==null&&o!==null&&mc(o,f[1])?f[0]:(t=t(),l.memoizedState=[t,o],t)}function ep(t,o,l){return(fo&21)===0?(t.baseState&&(t.baseState=!1,ln=!0),t.memoizedState=l):(zn(l,o)||(l=kf(),lt.lanes|=l,ho|=l,t.baseState=!0),o)}function qy(t,o){var l=Ke;Ke=l!==0&&4>l?l:4,t(!0);var f=pc.transition;pc.transition={};try{t(!1),o()}finally{Ke=l,pc.transition=f}}function tp(){return Mn().memoizedState}function Ky(t,o,l){var f=Hr(t);if(l={lane:f,action:l,hasEagerState:!1,eagerState:null,next:null},np(t))rp(o,l);else if(l=Rh(t,o,l,f),l!==null){var v=Jt();Yn(l,t,f,v),op(l,o,f)}}function Yy(t,o,l){var f=Hr(t),v={lane:f,action:l,hasEagerState:!1,eagerState:null,next:null};if(np(t))rp(o,v);else{var y=t.alternate;if(t.lanes===0&&(y===null||y.lanes===0)&&(y=o.lastRenderedReducer,y!==null))try{var C=o.lastRenderedState,T=y(C,l);if(v.hasEagerState=!0,v.eagerState=T,zn(T,C)){var L=o.interleaved;L===null?(v.next=v,lc(o)):(v.next=L.next,L.next=v),o.interleaved=v;return}}catch{}finally{}l=Rh(t,o,v,f),l!==null&&(v=Jt(),Yn(l,t,f,v),op(l,o,f))}}function np(t){var o=t.alternate;return t===lt||o!==null&&o===lt}function rp(t,o){Is=ra=!0;var l=t.pending;l===null?o.next=o:(o.next=l.next,l.next=o),t.pending=o}function op(t,o,l){if((l&4194240)!==0){var f=o.lanes;f&=t.pendingLanes,l|=f,o.lanes=l,Cl(t,l)}}var ia={readContext:Rn,useCallback:zt,useContext:zt,useEffect:zt,useImperativeHandle:zt,useInsertionEffect:zt,useLayoutEffect:zt,useMemo:zt,useReducer:zt,useRef:zt,useState:zt,useDebugValue:zt,useDeferredValue:zt,useTransition:zt,useMutableSource:zt,useSyncExternalStore:zt,useId:zt,unstable_isNewReconciler:!1},Qy={readContext:Rn,useCallback:function(t,o){return or().memoizedState=[t,o===void 0?null:o],t},useContext:Rn,useEffect:qh,useImperativeHandle:function(t,o,l){return l=l!=null?l.concat([t]):null,oa(4194308,4,Qh.bind(null,o,t),l)},useLayoutEffect:function(t,o){return oa(4194308,4,t,o)},useInsertionEffect:function(t,o){return oa(4,2,t,o)},useMemo:function(t,o){var l=or();return o=o===void 0?null:o,t=t(),l.memoizedState=[t,o],t},useReducer:function(t,o,l){var f=or();return o=l!==void 0?l(o):o,f.memoizedState=f.baseState=o,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:o},f.queue=t,t=t.dispatch=Ky.bind(null,lt,t),[f.memoizedState,t]},useRef:function(t){var o=or();return t={current:t},o.memoizedState=t},useState:Wh,useDebugValue:wc,useDeferredValue:function(t){return or().memoizedState=t},useTransition:function(){var t=Wh(!1),o=t[0];return t=qy.bind(null,t[1]),or().memoizedState=t,[o,t]},useMutableSource:function(){},useSyncExternalStore:function(t,o,l){var f=lt,v=or();if(st){if(l===void 0)throw Error(r(407));l=l()}else{if(l=o(),At===null)throw Error(r(349));(fo&30)!==0||$h(f,o,l)}v.memoizedState=l;var y={value:l,getSnapshot:o};return v.queue=y,qh(Uh.bind(null,f,y,t),[t]),f.flags|=2048,Ts(9,Gh.bind(null,f,y,l,o),void 0,null),l},useId:function(){var t=or(),o=At.identifierPrefix;if(st){var l=gr,f=mr;l=(f&~(1<<32-Vn(f)-1)).toString(32)+l,o=":"+o+"R"+l,l=ks++,0<l&&(o+="H"+l.toString(32)),o+=":"}else l=Hy++,o=":"+o+"r"+l.toString(32)+":";return t.memoizedState=o},unstable_isNewReconciler:!1},Xy={readContext:Rn,useCallback:Jh,useContext:Rn,useEffect:bc,useImperativeHandle:Xh,useInsertionEffect:Kh,useLayoutEffect:Yh,useMemo:Zh,useReducer:xc,useRef:Hh,useState:function(){return xc(Ps)},useDebugValue:wc,useDeferredValue:function(t){var o=Mn();return ep(o,bt.memoizedState,t)},useTransition:function(){var t=xc(Ps)[0],o=Mn().memoizedState;return[t,o]},useMutableSource:Fh,useSyncExternalStore:Bh,useId:tp,unstable_isNewReconciler:!1},Jy={readContext:Rn,useCallback:Jh,useContext:Rn,useEffect:bc,useImperativeHandle:Xh,useInsertionEffect:Kh,useLayoutEffect:Yh,useMemo:Zh,useReducer:yc,useRef:Hh,useState:function(){return yc(Ps)},useDebugValue:wc,useDeferredValue:function(t){var o=Mn();return bt===null?o.memoizedState=t:ep(o,bt.memoizedState,t)},useTransition:function(){var t=yc(Ps)[0],o=Mn().memoizedState;return[t,o]},useMutableSource:Fh,useSyncExternalStore:Bh,useId:tp,unstable_isNewReconciler:!1};function Hn(t,o){if(t&&t.defaultProps){o=F({},o),t=t.defaultProps;for(var l in t)o[l]===void 0&&(o[l]=t[l]);return o}return o}function Nc(t,o,l,f){o=t.memoizedState,l=l(f,o),l=l==null?o:F({},o,l),t.memoizedState=l,t.lanes===0&&(t.updateQueue.baseState=l)}var aa={isMounted:function(t){return(t=t._reactInternals)?Re(t)===t:!1},enqueueSetState:function(t,o,l){t=t._reactInternals;var f=Jt(),v=Hr(t),y=xr(f,v);y.payload=o,l!=null&&(y.callback=l),o=Ur(t,y,v),o!==null&&(Yn(o,t,v,f),Zi(o,t,v))},enqueueReplaceState:function(t,o,l){t=t._reactInternals;var f=Jt(),v=Hr(t),y=xr(f,v);y.tag=1,y.payload=o,l!=null&&(y.callback=l),o=Ur(t,y,v),o!==null&&(Yn(o,t,v,f),Zi(o,t,v))},enqueueForceUpdate:function(t,o){t=t._reactInternals;var l=Jt(),f=Hr(t),v=xr(l,f);v.tag=2,o!=null&&(v.callback=o),o=Ur(t,v,f),o!==null&&(Yn(o,t,f,l),Zi(o,t,f))}};function sp(t,o,l,f,v,y,C){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(f,y,C):o.prototype&&o.prototype.isPureReactComponent?!xs(l,f)||!xs(v,y):!0}function ip(t,o,l){var f=!1,v=Br,y=o.contextType;return typeof y=="object"&&y!==null?y=Rn(y):(v=an(o)?io:Vt.current,f=o.contextTypes,y=(f=f!=null)?Mo(t,v):Br),o=new o(l,y),t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=aa,t.stateNode=o,o._reactInternals=t,f&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=v,t.__reactInternalMemoizedMaskedChildContext=y),o}function ap(t,o,l,f){t=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(l,f),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(l,f),o.state!==t&&aa.enqueueReplaceState(o,o.state,null)}function Cc(t,o,l,f){var v=t.stateNode;v.props=l,v.state=t.memoizedState,v.refs={},cc(t);var y=o.contextType;typeof y=="object"&&y!==null?v.context=Rn(y):(y=an(o)?io:Vt.current,v.context=Mo(t,y)),v.state=t.memoizedState,y=o.getDerivedStateFromProps,typeof y=="function"&&(Nc(t,o,y,l),v.state=t.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(o=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),o!==v.state&&aa.enqueueReplaceState(v,v.state,null),ea(t,l,v,f),v.state=t.memoizedState),typeof v.componentDidMount=="function"&&(t.flags|=4194308)}function Uo(t,o){try{var l="",f=o;do l+=fe(f),f=f.return;while(f);var v=l}catch(y){v=`
Error generating stack: `+y.message+`
`+y.stack}return{value:t,source:o,stack:v,digest:null}}function Sc(t,o,l){return{value:t,source:null,stack:l??null,digest:o??null}}function Ec(t,o){try{console.error(o.value)}catch(l){setTimeout(function(){throw l})}}var Zy=typeof WeakMap=="function"?WeakMap:Map;function lp(t,o,l){l=xr(-1,l),l.tag=3,l.payload={element:null};var f=o.value;return l.callback=function(){pa||(pa=!0,$c=f),Ec(t,o)},l}function cp(t,o,l){l=xr(-1,l),l.tag=3;var f=t.type.getDerivedStateFromError;if(typeof f=="function"){var v=o.value;l.payload=function(){return f(v)},l.callback=function(){Ec(t,o)}}var y=t.stateNode;return y!==null&&typeof y.componentDidCatch=="function"&&(l.callback=function(){Ec(t,o),typeof f!="function"&&(zr===null?zr=new Set([this]):zr.add(this));var C=o.stack;this.componentDidCatch(o.value,{componentStack:C!==null?C:""})}),l}function up(t,o,l){var f=t.pingCache;if(f===null){f=t.pingCache=new Zy;var v=new Set;f.set(o,v)}else v=f.get(o),v===void 0&&(v=new Set,f.set(o,v));v.has(l)||(v.add(l),t=hb.bind(null,t,o,l),o.then(t,t))}function dp(t){do{var o;if((o=t.tag===13)&&(o=t.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return t;t=t.return}while(t!==null);return null}function fp(t,o,l,f,v){return(t.mode&1)===0?(t===o?t.flags|=65536:(t.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(o=xr(-1,1),o.tag=2,Ur(l,o,1))),l.lanes|=1),t):(t.flags|=65536,t.lanes=v,t)}var eb=D.ReactCurrentOwner,ln=!1;function Xt(t,o,l,f){o.child=t===null?Th(o,null,l,f):Fo(o,t.child,l,f)}function hp(t,o,l,f,v){l=l.render;var y=o.ref;return $o(o,v),f=gc(t,o,l,f,y,v),l=vc(),t!==null&&!ln?(o.updateQueue=t.updateQueue,o.flags&=-2053,t.lanes&=~v,yr(t,o,v)):(st&&l&&Zl(o),o.flags|=1,Xt(t,o,f,v),o.child)}function pp(t,o,l,f,v){if(t===null){var y=l.type;return typeof y=="function"&&!qc(y)&&y.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(o.tag=15,o.type=y,mp(t,o,y,f,v)):(t=ba(l.type,null,f,o,o.mode,v),t.ref=o.ref,t.return=o,o.child=t)}if(y=t.child,(t.lanes&v)===0){var C=y.memoizedProps;if(l=l.compare,l=l!==null?l:xs,l(C,f)&&t.ref===o.ref)return yr(t,o,v)}return o.flags|=1,t=Kr(y,f),t.ref=o.ref,t.return=o,o.child=t}function mp(t,o,l,f,v){if(t!==null){var y=t.memoizedProps;if(xs(y,f)&&t.ref===o.ref)if(ln=!1,o.pendingProps=f=y,(t.lanes&v)!==0)(t.flags&131072)!==0&&(ln=!0);else return o.lanes=t.lanes,yr(t,o,v)}return Dc(t,o,l,f,v)}function gp(t,o,l){var f=o.pendingProps,v=f.children,y=t!==null?t.memoizedState:null;if(f.mode==="hidden")if((o.mode&1)===0)o.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ze(zo,wn),wn|=l;else{if((l&1073741824)===0)return t=y!==null?y.baseLanes|l:l,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:t,cachePool:null,transitions:null},o.updateQueue=null,Ze(zo,wn),wn|=t,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},f=y!==null?y.baseLanes:l,Ze(zo,wn),wn|=f}else y!==null?(f=y.baseLanes|l,o.memoizedState=null):f=l,Ze(zo,wn),wn|=f;return Xt(t,o,v,l),o.child}function vp(t,o){var l=o.ref;(t===null&&l!==null||t!==null&&t.ref!==l)&&(o.flags|=512,o.flags|=2097152)}function Dc(t,o,l,f,v){var y=an(l)?io:Vt.current;return y=Mo(o,y),$o(o,v),l=gc(t,o,l,f,y,v),f=vc(),t!==null&&!ln?(o.updateQueue=t.updateQueue,o.flags&=-2053,t.lanes&=~v,yr(t,o,v)):(st&&f&&Zl(o),o.flags|=1,Xt(t,o,l,v),o.child)}function xp(t,o,l,f,v){if(an(l)){var y=!0;Wi(o)}else y=!1;if($o(o,v),o.stateNode===null)ca(t,o),ip(o,l,f),Cc(o,l,f,v),f=!0;else if(t===null){var C=o.stateNode,T=o.memoizedProps;C.props=T;var L=C.context,K=l.contextType;typeof K=="object"&&K!==null?K=Rn(K):(K=an(l)?io:Vt.current,K=Mo(o,K));var ne=l.getDerivedStateFromProps,se=typeof ne=="function"||typeof C.getSnapshotBeforeUpdate=="function";se||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(T!==f||L!==K)&&ap(o,C,f,K),Gr=!1;var te=o.memoizedState;C.state=te,ea(o,f,C,v),L=o.memoizedState,T!==f||te!==L||sn.current||Gr?(typeof ne=="function"&&(Nc(o,l,ne,f),L=o.memoizedState),(T=Gr||sp(o,l,T,f,te,L,K))?(se||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount()),typeof C.componentDidMount=="function"&&(o.flags|=4194308)):(typeof C.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=f,o.memoizedState=L),C.props=f,C.state=L,C.context=K,f=T):(typeof C.componentDidMount=="function"&&(o.flags|=4194308),f=!1)}else{C=o.stateNode,Mh(t,o),T=o.memoizedProps,K=o.type===o.elementType?T:Hn(o.type,T),C.props=K,se=o.pendingProps,te=C.context,L=l.contextType,typeof L=="object"&&L!==null?L=Rn(L):(L=an(l)?io:Vt.current,L=Mo(o,L));var pe=l.getDerivedStateFromProps;(ne=typeof pe=="function"||typeof C.getSnapshotBeforeUpdate=="function")||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(T!==se||te!==L)&&ap(o,C,f,L),Gr=!1,te=o.memoizedState,C.state=te,ea(o,f,C,v);var ge=o.memoizedState;T!==se||te!==ge||sn.current||Gr?(typeof pe=="function"&&(Nc(o,l,pe,f),ge=o.memoizedState),(K=Gr||sp(o,l,K,f,te,ge,L)||!1)?(ne||typeof C.UNSAFE_componentWillUpdate!="function"&&typeof C.componentWillUpdate!="function"||(typeof C.componentWillUpdate=="function"&&C.componentWillUpdate(f,ge,L),typeof C.UNSAFE_componentWillUpdate=="function"&&C.UNSAFE_componentWillUpdate(f,ge,L)),typeof C.componentDidUpdate=="function"&&(o.flags|=4),typeof C.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof C.componentDidUpdate!="function"||T===t.memoizedProps&&te===t.memoizedState||(o.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||T===t.memoizedProps&&te===t.memoizedState||(o.flags|=1024),o.memoizedProps=f,o.memoizedState=ge),C.props=f,C.state=ge,C.context=L,f=K):(typeof C.componentDidUpdate!="function"||T===t.memoizedProps&&te===t.memoizedState||(o.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||T===t.memoizedProps&&te===t.memoizedState||(o.flags|=1024),f=!1)}return Ac(t,o,l,f,y,v)}function Ac(t,o,l,f,v,y){vp(t,o);var C=(o.flags&128)!==0;if(!f&&!C)return v&&Ch(o,l,!1),yr(t,o,y);f=o.stateNode,eb.current=o;var T=C&&typeof l.getDerivedStateFromError!="function"?null:f.render();return o.flags|=1,t!==null&&C?(o.child=Fo(o,t.child,null,y),o.child=Fo(o,null,T,y)):Xt(t,o,T,y),o.memoizedState=f.state,v&&Ch(o,l,!0),o.child}function yp(t){var o=t.stateNode;o.pendingContext?wh(t,o.pendingContext,o.pendingContext!==o.context):o.context&&wh(t,o.context,!1),uc(t,o.containerInfo)}function bp(t,o,l,f,v){return Lo(),rc(v),o.flags|=256,Xt(t,o,l,f),o.child}var jc={dehydrated:null,treeContext:null,retryLane:0};function Ic(t){return{baseLanes:t,cachePool:null,transitions:null}}function wp(t,o,l){var f=o.pendingProps,v=at.current,y=!1,C=(o.flags&128)!==0,T;if((T=C)||(T=t!==null&&t.memoizedState===null?!1:(v&2)!==0),T?(y=!0,o.flags&=-129):(t===null||t.memoizedState!==null)&&(v|=1),Ze(at,v&1),t===null)return nc(o),t=o.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?((o.mode&1)===0?o.lanes=1:t.data==="$!"?o.lanes=8:o.lanes=1073741824,null):(C=f.children,t=f.fallback,y?(f=o.mode,y=o.child,C={mode:"hidden",children:C},(f&1)===0&&y!==null?(y.childLanes=0,y.pendingProps=C):y=wa(C,f,0,null),t=vo(t,f,l,null),y.return=o,t.return=o,y.sibling=t,o.child=y,o.child.memoizedState=Ic(l),o.memoizedState=jc,t):kc(o,C));if(v=t.memoizedState,v!==null&&(T=v.dehydrated,T!==null))return tb(t,o,C,f,T,v,l);if(y){y=f.fallback,C=o.mode,v=t.child,T=v.sibling;var L={mode:"hidden",children:f.children};return(C&1)===0&&o.child!==v?(f=o.child,f.childLanes=0,f.pendingProps=L,o.deletions=null):(f=Kr(v,L),f.subtreeFlags=v.subtreeFlags&14680064),T!==null?y=Kr(T,y):(y=vo(y,C,l,null),y.flags|=2),y.return=o,f.return=o,f.sibling=y,o.child=f,f=y,y=o.child,C=t.child.memoizedState,C=C===null?Ic(l):{baseLanes:C.baseLanes|l,cachePool:null,transitions:C.transitions},y.memoizedState=C,y.childLanes=t.childLanes&~l,o.memoizedState=jc,f}return y=t.child,t=y.sibling,f=Kr(y,{mode:"visible",children:f.children}),(o.mode&1)===0&&(f.lanes=l),f.return=o,f.sibling=null,t!==null&&(l=o.deletions,l===null?(o.deletions=[t],o.flags|=16):l.push(t)),o.child=f,o.memoizedState=null,f}function kc(t,o){return o=wa({mode:"visible",children:o},t.mode,0,null),o.return=t,t.child=o}function la(t,o,l,f){return f!==null&&rc(f),Fo(o,t.child,null,l),t=kc(o,o.pendingProps.children),t.flags|=2,o.memoizedState=null,t}function tb(t,o,l,f,v,y,C){if(l)return o.flags&256?(o.flags&=-257,f=Sc(Error(r(422))),la(t,o,C,f)):o.memoizedState!==null?(o.child=t.child,o.flags|=128,null):(y=f.fallback,v=o.mode,f=wa({mode:"visible",children:f.children},v,0,null),y=vo(y,v,C,null),y.flags|=2,f.return=o,y.return=o,f.sibling=y,o.child=f,(o.mode&1)!==0&&Fo(o,t.child,null,C),o.child.memoizedState=Ic(C),o.memoizedState=jc,y);if((o.mode&1)===0)return la(t,o,C,null);if(v.data==="$!"){if(f=v.nextSibling&&v.nextSibling.dataset,f)var T=f.dgst;return f=T,y=Error(r(419)),f=Sc(y,f,void 0),la(t,o,C,f)}if(T=(C&t.childLanes)!==0,ln||T){if(f=At,f!==null){switch(C&-C){case 4:v=2;break;case 16:v=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:v=32;break;case 536870912:v=268435456;break;default:v=0}v=(v&(f.suspendedLanes|C))!==0?0:v,v!==0&&v!==y.retryLane&&(y.retryLane=v,vr(t,v),Yn(f,t,v,-1))}return Hc(),f=Sc(Error(r(421))),la(t,o,C,f)}return v.data==="$?"?(o.flags|=128,o.child=t.child,o=pb.bind(null,t),v._reactRetry=o,null):(t=y.treeContext,bn=Lr(v.nextSibling),yn=o,st=!0,Wn=null,t!==null&&(Pn[Tn++]=mr,Pn[Tn++]=gr,Pn[Tn++]=ao,mr=t.id,gr=t.overflow,ao=o),o=kc(o,f.children),o.flags|=4096,o)}function Np(t,o,l){t.lanes|=o;var f=t.alternate;f!==null&&(f.lanes|=o),ac(t.return,o,l)}function Pc(t,o,l,f,v){var y=t.memoizedState;y===null?t.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:f,tail:l,tailMode:v}:(y.isBackwards=o,y.rendering=null,y.renderingStartTime=0,y.last=f,y.tail=l,y.tailMode=v)}function Cp(t,o,l){var f=o.pendingProps,v=f.revealOrder,y=f.tail;if(Xt(t,o,f.children,l),f=at.current,(f&2)!==0)f=f&1|2,o.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=o.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Np(t,l,o);else if(t.tag===19)Np(t,l,o);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===o)break e;for(;t.sibling===null;){if(t.return===null||t.return===o)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}f&=1}if(Ze(at,f),(o.mode&1)===0)o.memoizedState=null;else switch(v){case"forwards":for(l=o.child,v=null;l!==null;)t=l.alternate,t!==null&&ta(t)===null&&(v=l),l=l.sibling;l=v,l===null?(v=o.child,o.child=null):(v=l.sibling,l.sibling=null),Pc(o,!1,v,l,y);break;case"backwards":for(l=null,v=o.child,o.child=null;v!==null;){if(t=v.alternate,t!==null&&ta(t)===null){o.child=v;break}t=v.sibling,v.sibling=l,l=v,v=t}Pc(o,!0,l,null,y);break;case"together":Pc(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function ca(t,o){(o.mode&1)===0&&t!==null&&(t.alternate=null,o.alternate=null,o.flags|=2)}function yr(t,o,l){if(t!==null&&(o.dependencies=t.dependencies),ho|=o.lanes,(l&o.childLanes)===0)return null;if(t!==null&&o.child!==t.child)throw Error(r(153));if(o.child!==null){for(t=o.child,l=Kr(t,t.pendingProps),o.child=l,l.return=o;t.sibling!==null;)t=t.sibling,l=l.sibling=Kr(t,t.pendingProps),l.return=o;l.sibling=null}return o.child}function nb(t,o,l){switch(o.tag){case 3:yp(o),Lo();break;case 5:Lh(o);break;case 1:an(o.type)&&Wi(o);break;case 4:uc(o,o.stateNode.containerInfo);break;case 10:var f=o.type._context,v=o.memoizedProps.value;Ze(Xi,f._currentValue),f._currentValue=v;break;case 13:if(f=o.memoizedState,f!==null)return f.dehydrated!==null?(Ze(at,at.current&1),o.flags|=128,null):(l&o.child.childLanes)!==0?wp(t,o,l):(Ze(at,at.current&1),t=yr(t,o,l),t!==null?t.sibling:null);Ze(at,at.current&1);break;case 19:if(f=(l&o.childLanes)!==0,(t.flags&128)!==0){if(f)return Cp(t,o,l);o.flags|=128}if(v=o.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),Ze(at,at.current),f)break;return null;case 22:case 23:return o.lanes=0,gp(t,o,l)}return yr(t,o,l)}var Sp,Tc,Ep,Dp;Sp=function(t,o){for(var l=o.child;l!==null;){if(l.tag===5||l.tag===6)t.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return;l=l.return}l.sibling.return=l.return,l=l.sibling}},Tc=function(){},Ep=function(t,o,l,f){var v=t.memoizedProps;if(v!==f){t=o.stateNode,uo(rr.current);var y=null;switch(l){case"input":v=Ne(t,v),f=Ne(t,f),y=[];break;case"select":v=F({},v,{value:void 0}),f=F({},f,{value:void 0}),y=[];break;case"textarea":v=We(t,v),f=We(t,f),y=[];break;default:typeof v.onClick!="function"&&typeof f.onClick=="function"&&(t.onclick=Ui)}nn(l,f);var C;l=null;for(K in v)if(!f.hasOwnProperty(K)&&v.hasOwnProperty(K)&&v[K]!=null)if(K==="style"){var T=v[K];for(C in T)T.hasOwnProperty(C)&&(l||(l={}),l[C]="")}else K!=="dangerouslySetInnerHTML"&&K!=="children"&&K!=="suppressContentEditableWarning"&&K!=="suppressHydrationWarning"&&K!=="autoFocus"&&(i.hasOwnProperty(K)?y||(y=[]):(y=y||[]).push(K,null));for(K in f){var L=f[K];if(T=v?.[K],f.hasOwnProperty(K)&&L!==T&&(L!=null||T!=null))if(K==="style")if(T){for(C in T)!T.hasOwnProperty(C)||L&&L.hasOwnProperty(C)||(l||(l={}),l[C]="");for(C in L)L.hasOwnProperty(C)&&T[C]!==L[C]&&(l||(l={}),l[C]=L[C])}else l||(y||(y=[]),y.push(K,l)),l=L;else K==="dangerouslySetInnerHTML"?(L=L?L.__html:void 0,T=T?T.__html:void 0,L!=null&&T!==L&&(y=y||[]).push(K,L)):K==="children"?typeof L!="string"&&typeof L!="number"||(y=y||[]).push(K,""+L):K!=="suppressContentEditableWarning"&&K!=="suppressHydrationWarning"&&(i.hasOwnProperty(K)?(L!=null&&K==="onScroll"&&nt("scroll",t),y||T===L||(y=[])):(y=y||[]).push(K,L))}l&&(y=y||[]).push("style",l);var K=y;(o.updateQueue=K)&&(o.flags|=4)}},Dp=function(t,o,l,f){l!==f&&(o.flags|=4)};function Rs(t,o){if(!st)switch(t.tailMode){case"hidden":o=t.tail;for(var l=null;o!==null;)o.alternate!==null&&(l=o),o=o.sibling;l===null?t.tail=null:l.sibling=null;break;case"collapsed":l=t.tail;for(var f=null;l!==null;)l.alternate!==null&&(f=l),l=l.sibling;f===null?o||t.tail===null?t.tail=null:t.tail.sibling=null:f.sibling=null}}function Wt(t){var o=t.alternate!==null&&t.alternate.child===t.child,l=0,f=0;if(o)for(var v=t.child;v!==null;)l|=v.lanes|v.childLanes,f|=v.subtreeFlags&14680064,f|=v.flags&14680064,v.return=t,v=v.sibling;else for(v=t.child;v!==null;)l|=v.lanes|v.childLanes,f|=v.subtreeFlags,f|=v.flags,v.return=t,v=v.sibling;return t.subtreeFlags|=f,t.childLanes=l,o}function rb(t,o,l){var f=o.pendingProps;switch(ec(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wt(o),null;case 1:return an(o.type)&&zi(),Wt(o),null;case 3:return f=o.stateNode,Go(),rt(sn),rt(Vt),hc(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(t===null||t.child===null)&&(Yi(o)?o.flags|=4:t===null||t.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,Wn!==null&&(Vc(Wn),Wn=null))),Tc(t,o),Wt(o),null;case 5:dc(o);var v=uo(js.current);if(l=o.type,t!==null&&o.stateNode!=null)Ep(t,o,l,f,v),t.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!f){if(o.stateNode===null)throw Error(r(166));return Wt(o),null}if(t=uo(rr.current),Yi(o)){f=o.stateNode,l=o.type;var y=o.memoizedProps;switch(f[nr]=o,f[Cs]=y,t=(o.mode&1)!==0,l){case"dialog":nt("cancel",f),nt("close",f);break;case"iframe":case"object":case"embed":nt("load",f);break;case"video":case"audio":for(v=0;v<bs.length;v++)nt(bs[v],f);break;case"source":nt("error",f);break;case"img":case"image":case"link":nt("error",f),nt("load",f);break;case"details":nt("toggle",f);break;case"input":qe(f,y),nt("invalid",f);break;case"select":f._wrapperState={wasMultiple:!!y.multiple},nt("invalid",f);break;case"textarea":pt(f,y),nt("invalid",f)}nn(l,y),v=null;for(var C in y)if(y.hasOwnProperty(C)){var T=y[C];C==="children"?typeof T=="string"?f.textContent!==T&&(y.suppressHydrationWarning!==!0&&Gi(f.textContent,T,t),v=["children",T]):typeof T=="number"&&f.textContent!==""+T&&(y.suppressHydrationWarning!==!0&&Gi(f.textContent,T,t),v=["children",""+T]):i.hasOwnProperty(C)&&T!=null&&C==="onScroll"&&nt("scroll",f)}switch(l){case"input":ht(f),tn(f,y,!0);break;case"textarea":ht(f),Dn(f);break;case"select":case"option":break;default:typeof y.onClick=="function"&&(f.onclick=Ui)}f=v,o.updateQueue=f,f!==null&&(o.flags|=4)}else{C=v.nodeType===9?v:v.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=mn(l)),t==="http://www.w3.org/1999/xhtml"?l==="script"?(t=C.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof f.is=="string"?t=C.createElement(l,{is:f.is}):(t=C.createElement(l),l==="select"&&(C=t,f.multiple?C.multiple=!0:f.size&&(C.size=f.size))):t=C.createElementNS(t,l),t[nr]=o,t[Cs]=f,Sp(t,o,!1,!1),o.stateNode=t;e:{switch(C=rn(l,f),l){case"dialog":nt("cancel",t),nt("close",t),v=f;break;case"iframe":case"object":case"embed":nt("load",t),v=f;break;case"video":case"audio":for(v=0;v<bs.length;v++)nt(bs[v],t);v=f;break;case"source":nt("error",t),v=f;break;case"img":case"image":case"link":nt("error",t),nt("load",t),v=f;break;case"details":nt("toggle",t),v=f;break;case"input":qe(t,f),v=Ne(t,f),nt("invalid",t);break;case"option":v=f;break;case"select":t._wrapperState={wasMultiple:!!f.multiple},v=F({},f,{value:void 0}),nt("invalid",t);break;case"textarea":pt(t,f),v=We(t,f),nt("invalid",t);break;default:v=f}nn(l,v),T=v;for(y in T)if(T.hasOwnProperty(y)){var L=T[y];y==="style"?er(t,L):y==="dangerouslySetInnerHTML"?(L=L?L.__html:void 0,L!=null&&An(t,L)):y==="children"?typeof L=="string"?(l!=="textarea"||L!=="")&&jn(t,L):typeof L=="number"&&jn(t,""+L):y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&y!=="autoFocus"&&(i.hasOwnProperty(y)?L!=null&&y==="onScroll"&&nt("scroll",t):L!=null&&I(t,y,L,C))}switch(l){case"input":ht(t),tn(t,f,!1);break;case"textarea":ht(t),Dn(t);break;case"option":f.value!=null&&t.setAttribute("value",""+ye(f.value));break;case"select":t.multiple=!!f.multiple,y=f.value,y!=null?Xe(t,!!f.multiple,y,!1):f.defaultValue!=null&&Xe(t,!!f.multiple,f.defaultValue,!0);break;default:typeof v.onClick=="function"&&(t.onclick=Ui)}switch(l){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}}f&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return Wt(o),null;case 6:if(t&&o.stateNode!=null)Dp(t,o,t.memoizedProps,f);else{if(typeof f!="string"&&o.stateNode===null)throw Error(r(166));if(l=uo(js.current),uo(rr.current),Yi(o)){if(f=o.stateNode,l=o.memoizedProps,f[nr]=o,(y=f.nodeValue!==l)&&(t=yn,t!==null))switch(t.tag){case 3:Gi(f.nodeValue,l,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Gi(f.nodeValue,l,(t.mode&1)!==0)}y&&(o.flags|=4)}else f=(l.nodeType===9?l:l.ownerDocument).createTextNode(f),f[nr]=o,o.stateNode=f}return Wt(o),null;case 13:if(rt(at),f=o.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(st&&bn!==null&&(o.mode&1)!==0&&(o.flags&128)===0)Ih(),Lo(),o.flags|=98560,y=!1;else if(y=Yi(o),f!==null&&f.dehydrated!==null){if(t===null){if(!y)throw Error(r(318));if(y=o.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(r(317));y[nr]=o}else Lo(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Wt(o),y=!1}else Wn!==null&&(Vc(Wn),Wn=null),y=!0;if(!y)return o.flags&65536?o:null}return(o.flags&128)!==0?(o.lanes=l,o):(f=f!==null,f!==(t!==null&&t.memoizedState!==null)&&f&&(o.child.flags|=8192,(o.mode&1)!==0&&(t===null||(at.current&1)!==0?wt===0&&(wt=3):Hc())),o.updateQueue!==null&&(o.flags|=4),Wt(o),null);case 4:return Go(),Tc(t,o),t===null&&ws(o.stateNode.containerInfo),Wt(o),null;case 10:return ic(o.type._context),Wt(o),null;case 17:return an(o.type)&&zi(),Wt(o),null;case 19:if(rt(at),y=o.memoizedState,y===null)return Wt(o),null;if(f=(o.flags&128)!==0,C=y.rendering,C===null)if(f)Rs(y,!1);else{if(wt!==0||t!==null&&(t.flags&128)!==0)for(t=o.child;t!==null;){if(C=ta(t),C!==null){for(o.flags|=128,Rs(y,!1),f=C.updateQueue,f!==null&&(o.updateQueue=f,o.flags|=4),o.subtreeFlags=0,f=l,l=o.child;l!==null;)y=l,t=f,y.flags&=14680066,C=y.alternate,C===null?(y.childLanes=0,y.lanes=t,y.child=null,y.subtreeFlags=0,y.memoizedProps=null,y.memoizedState=null,y.updateQueue=null,y.dependencies=null,y.stateNode=null):(y.childLanes=C.childLanes,y.lanes=C.lanes,y.child=C.child,y.subtreeFlags=0,y.deletions=null,y.memoizedProps=C.memoizedProps,y.memoizedState=C.memoizedState,y.updateQueue=C.updateQueue,y.type=C.type,t=C.dependencies,y.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),l=l.sibling;return Ze(at,at.current&1|2),o.child}t=t.sibling}y.tail!==null&&ot()>Wo&&(o.flags|=128,f=!0,Rs(y,!1),o.lanes=4194304)}else{if(!f)if(t=ta(C),t!==null){if(o.flags|=128,f=!0,l=t.updateQueue,l!==null&&(o.updateQueue=l,o.flags|=4),Rs(y,!0),y.tail===null&&y.tailMode==="hidden"&&!C.alternate&&!st)return Wt(o),null}else 2*ot()-y.renderingStartTime>Wo&&l!==1073741824&&(o.flags|=128,f=!0,Rs(y,!1),o.lanes=4194304);y.isBackwards?(C.sibling=o.child,o.child=C):(l=y.last,l!==null?l.sibling=C:o.child=C,y.last=C)}return y.tail!==null?(o=y.tail,y.rendering=o,y.tail=o.sibling,y.renderingStartTime=ot(),o.sibling=null,l=at.current,Ze(at,f?l&1|2:l&1),o):(Wt(o),null);case 22:case 23:return Wc(),f=o.memoizedState!==null,t!==null&&t.memoizedState!==null!==f&&(o.flags|=8192),f&&(o.mode&1)!==0?(wn&1073741824)!==0&&(Wt(o),o.subtreeFlags&6&&(o.flags|=8192)):Wt(o),null;case 24:return null;case 25:return null}throw Error(r(156,o.tag))}function ob(t,o){switch(ec(o),o.tag){case 1:return an(o.type)&&zi(),t=o.flags,t&65536?(o.flags=t&-65537|128,o):null;case 3:return Go(),rt(sn),rt(Vt),hc(),t=o.flags,(t&65536)!==0&&(t&128)===0?(o.flags=t&-65537|128,o):null;case 5:return dc(o),null;case 13:if(rt(at),t=o.memoizedState,t!==null&&t.dehydrated!==null){if(o.alternate===null)throw Error(r(340));Lo()}return t=o.flags,t&65536?(o.flags=t&-65537|128,o):null;case 19:return rt(at),null;case 4:return Go(),null;case 10:return ic(o.type._context),null;case 22:case 23:return Wc(),null;case 24:return null;default:return null}}var ua=!1,Ht=!1,sb=typeof WeakSet=="function"?WeakSet:Set,me=null;function Vo(t,o){var l=t.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(f){ft(t,o,f)}else l.current=null}function Rc(t,o,l){try{l()}catch(f){ft(t,o,f)}}var Ap=!1;function ib(t,o){if(Wl=ki,t=sh(),Ll(t)){if("selectionStart"in t)var l={start:t.selectionStart,end:t.selectionEnd};else e:{l=(l=t.ownerDocument)&&l.defaultView||window;var f=l.getSelection&&l.getSelection();if(f&&f.rangeCount!==0){l=f.anchorNode;var v=f.anchorOffset,y=f.focusNode;f=f.focusOffset;try{l.nodeType,y.nodeType}catch{l=null;break e}var C=0,T=-1,L=-1,K=0,ne=0,se=t,te=null;t:for(;;){for(var pe;se!==l||v!==0&&se.nodeType!==3||(T=C+v),se!==y||f!==0&&se.nodeType!==3||(L=C+f),se.nodeType===3&&(C+=se.nodeValue.length),(pe=se.firstChild)!==null;)te=se,se=pe;for(;;){if(se===t)break t;if(te===l&&++K===v&&(T=C),te===y&&++ne===f&&(L=C),(pe=se.nextSibling)!==null)break;se=te,te=se.parentNode}se=pe}l=T===-1||L===-1?null:{start:T,end:L}}else l=null}l=l||{start:0,end:0}}else l=null;for(Hl={focusedElem:t,selectionRange:l},ki=!1,me=o;me!==null;)if(o=me,t=o.child,(o.subtreeFlags&1028)!==0&&t!==null)t.return=o,me=t;else for(;me!==null;){o=me;try{var ge=o.alternate;if((o.flags&1024)!==0)switch(o.tag){case 0:case 11:case 15:break;case 1:if(ge!==null){var xe=ge.memoizedProps,gt=ge.memoizedState,z=o.stateNode,$=z.getSnapshotBeforeUpdate(o.elementType===o.type?xe:Hn(o.type,xe),gt);z.__reactInternalSnapshotBeforeUpdate=$}break;case 3:var H=o.stateNode.containerInfo;H.nodeType===1?H.textContent="":H.nodeType===9&&H.documentElement&&H.removeChild(H.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(le){ft(o,o.return,le)}if(t=o.sibling,t!==null){t.return=o.return,me=t;break}me=o.return}return ge=Ap,Ap=!1,ge}function Ms(t,o,l){var f=o.updateQueue;if(f=f!==null?f.lastEffect:null,f!==null){var v=f=f.next;do{if((v.tag&t)===t){var y=v.destroy;v.destroy=void 0,y!==void 0&&Rc(o,l,y)}v=v.next}while(v!==f)}}function da(t,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var l=o=o.next;do{if((l.tag&t)===t){var f=l.create;l.destroy=f()}l=l.next}while(l!==o)}}function Mc(t){var o=t.ref;if(o!==null){var l=t.stateNode;switch(t.tag){case 5:t=l;break;default:t=l}typeof o=="function"?o(t):o.current=t}}function jp(t){var o=t.alternate;o!==null&&(t.alternate=null,jp(o)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(o=t.stateNode,o!==null&&(delete o[nr],delete o[Cs],delete o[Ql],delete o[Uy],delete o[Vy])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Ip(t){return t.tag===5||t.tag===3||t.tag===4}function kp(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Ip(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Oc(t,o,l){var f=t.tag;if(f===5||f===6)t=t.stateNode,o?l.nodeType===8?l.parentNode.insertBefore(t,o):l.insertBefore(t,o):(l.nodeType===8?(o=l.parentNode,o.insertBefore(t,l)):(o=l,o.appendChild(t)),l=l._reactRootContainer,l!=null||o.onclick!==null||(o.onclick=Ui));else if(f!==4&&(t=t.child,t!==null))for(Oc(t,o,l),t=t.sibling;t!==null;)Oc(t,o,l),t=t.sibling}function _c(t,o,l){var f=t.tag;if(f===5||f===6)t=t.stateNode,o?l.insertBefore(t,o):l.appendChild(t);else if(f!==4&&(t=t.child,t!==null))for(_c(t,o,l),t=t.sibling;t!==null;)_c(t,o,l),t=t.sibling}var _t=null,qn=!1;function Vr(t,o,l){for(l=l.child;l!==null;)Pp(t,o,l),l=l.sibling}function Pp(t,o,l){if(tr&&typeof tr.onCommitFiberUnmount=="function")try{tr.onCommitFiberUnmount(Si,l)}catch{}switch(l.tag){case 5:Ht||Vo(l,o);case 6:var f=_t,v=qn;_t=null,Vr(t,o,l),_t=f,qn=v,_t!==null&&(qn?(t=_t,l=l.stateNode,t.nodeType===8?t.parentNode.removeChild(l):t.removeChild(l)):_t.removeChild(l.stateNode));break;case 18:_t!==null&&(qn?(t=_t,l=l.stateNode,t.nodeType===8?Yl(t.parentNode,l):t.nodeType===1&&Yl(t,l),fs(t)):Yl(_t,l.stateNode));break;case 4:f=_t,v=qn,_t=l.stateNode.containerInfo,qn=!0,Vr(t,o,l),_t=f,qn=v;break;case 0:case 11:case 14:case 15:if(!Ht&&(f=l.updateQueue,f!==null&&(f=f.lastEffect,f!==null))){v=f=f.next;do{var y=v,C=y.destroy;y=y.tag,C!==void 0&&((y&2)!==0||(y&4)!==0)&&Rc(l,o,C),v=v.next}while(v!==f)}Vr(t,o,l);break;case 1:if(!Ht&&(Vo(l,o),f=l.stateNode,typeof f.componentWillUnmount=="function"))try{f.props=l.memoizedProps,f.state=l.memoizedState,f.componentWillUnmount()}catch(T){ft(l,o,T)}Vr(t,o,l);break;case 21:Vr(t,o,l);break;case 22:l.mode&1?(Ht=(f=Ht)||l.memoizedState!==null,Vr(t,o,l),Ht=f):Vr(t,o,l);break;default:Vr(t,o,l)}}function Tp(t){var o=t.updateQueue;if(o!==null){t.updateQueue=null;var l=t.stateNode;l===null&&(l=t.stateNode=new sb),o.forEach(function(f){var v=mb.bind(null,t,f);l.has(f)||(l.add(f),f.then(v,v))})}}function Kn(t,o){var l=o.deletions;if(l!==null)for(var f=0;f<l.length;f++){var v=l[f];try{var y=t,C=o,T=C;e:for(;T!==null;){switch(T.tag){case 5:_t=T.stateNode,qn=!1;break e;case 3:_t=T.stateNode.containerInfo,qn=!0;break e;case 4:_t=T.stateNode.containerInfo,qn=!0;break e}T=T.return}if(_t===null)throw Error(r(160));Pp(y,C,v),_t=null,qn=!1;var L=v.alternate;L!==null&&(L.return=null),v.return=null}catch(K){ft(v,o,K)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)Rp(o,t),o=o.sibling}function Rp(t,o){var l=t.alternate,f=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Kn(o,t),sr(t),f&4){try{Ms(3,t,t.return),da(3,t)}catch(xe){ft(t,t.return,xe)}try{Ms(5,t,t.return)}catch(xe){ft(t,t.return,xe)}}break;case 1:Kn(o,t),sr(t),f&512&&l!==null&&Vo(l,l.return);break;case 5:if(Kn(o,t),sr(t),f&512&&l!==null&&Vo(l,l.return),t.flags&32){var v=t.stateNode;try{jn(v,"")}catch(xe){ft(t,t.return,xe)}}if(f&4&&(v=t.stateNode,v!=null)){var y=t.memoizedProps,C=l!==null?l.memoizedProps:y,T=t.type,L=t.updateQueue;if(t.updateQueue=null,L!==null)try{T==="input"&&y.type==="radio"&&y.name!=null&&et(v,y),rn(T,C);var K=rn(T,y);for(C=0;C<L.length;C+=2){var ne=L[C],se=L[C+1];ne==="style"?er(v,se):ne==="dangerouslySetInnerHTML"?An(v,se):ne==="children"?jn(v,se):I(v,ne,se,K)}switch(T){case"input":Rt(v,y);break;case"textarea":vt(v,y);break;case"select":var te=v._wrapperState.wasMultiple;v._wrapperState.wasMultiple=!!y.multiple;var pe=y.value;pe!=null?Xe(v,!!y.multiple,pe,!1):te!==!!y.multiple&&(y.defaultValue!=null?Xe(v,!!y.multiple,y.defaultValue,!0):Xe(v,!!y.multiple,y.multiple?[]:"",!1))}v[Cs]=y}catch(xe){ft(t,t.return,xe)}}break;case 6:if(Kn(o,t),sr(t),f&4){if(t.stateNode===null)throw Error(r(162));v=t.stateNode,y=t.memoizedProps;try{v.nodeValue=y}catch(xe){ft(t,t.return,xe)}}break;case 3:if(Kn(o,t),sr(t),f&4&&l!==null&&l.memoizedState.isDehydrated)try{fs(o.containerInfo)}catch(xe){ft(t,t.return,xe)}break;case 4:Kn(o,t),sr(t);break;case 13:Kn(o,t),sr(t),v=t.child,v.flags&8192&&(y=v.memoizedState!==null,v.stateNode.isHidden=y,!y||v.alternate!==null&&v.alternate.memoizedState!==null||(Bc=ot())),f&4&&Tp(t);break;case 22:if(ne=l!==null&&l.memoizedState!==null,t.mode&1?(Ht=(K=Ht)||ne,Kn(o,t),Ht=K):Kn(o,t),sr(t),f&8192){if(K=t.memoizedState!==null,(t.stateNode.isHidden=K)&&!ne&&(t.mode&1)!==0)for(me=t,ne=t.child;ne!==null;){for(se=me=ne;me!==null;){switch(te=me,pe=te.child,te.tag){case 0:case 11:case 14:case 15:Ms(4,te,te.return);break;case 1:Vo(te,te.return);var ge=te.stateNode;if(typeof ge.componentWillUnmount=="function"){f=te,l=te.return;try{o=f,ge.props=o.memoizedProps,ge.state=o.memoizedState,ge.componentWillUnmount()}catch(xe){ft(f,l,xe)}}break;case 5:Vo(te,te.return);break;case 22:if(te.memoizedState!==null){_p(se);continue}}pe!==null?(pe.return=te,me=pe):_p(se)}ne=ne.sibling}e:for(ne=null,se=t;;){if(se.tag===5){if(ne===null){ne=se;try{v=se.stateNode,K?(y=v.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none"):(T=se.stateNode,L=se.memoizedProps.style,C=L!=null&&L.hasOwnProperty("display")?L.display:null,T.style.display=jr("display",C))}catch(xe){ft(t,t.return,xe)}}}else if(se.tag===6){if(ne===null)try{se.stateNode.nodeValue=K?"":se.memoizedProps}catch(xe){ft(t,t.return,xe)}}else if((se.tag!==22&&se.tag!==23||se.memoizedState===null||se===t)&&se.child!==null){se.child.return=se,se=se.child;continue}if(se===t)break e;for(;se.sibling===null;){if(se.return===null||se.return===t)break e;ne===se&&(ne=null),se=se.return}ne===se&&(ne=null),se.sibling.return=se.return,se=se.sibling}}break;case 19:Kn(o,t),sr(t),f&4&&Tp(t);break;case 21:break;default:Kn(o,t),sr(t)}}function sr(t){var o=t.flags;if(o&2){try{e:{for(var l=t.return;l!==null;){if(Ip(l)){var f=l;break e}l=l.return}throw Error(r(160))}switch(f.tag){case 5:var v=f.stateNode;f.flags&32&&(jn(v,""),f.flags&=-33);var y=kp(t);_c(t,y,v);break;case 3:case 4:var C=f.stateNode.containerInfo,T=kp(t);Oc(t,T,C);break;default:throw Error(r(161))}}catch(L){ft(t,t.return,L)}t.flags&=-3}o&4096&&(t.flags&=-4097)}function ab(t,o,l){me=t,Mp(t)}function Mp(t,o,l){for(var f=(t.mode&1)!==0;me!==null;){var v=me,y=v.child;if(v.tag===22&&f){var C=v.memoizedState!==null||ua;if(!C){var T=v.alternate,L=T!==null&&T.memoizedState!==null||Ht;T=ua;var K=Ht;if(ua=C,(Ht=L)&&!K)for(me=v;me!==null;)C=me,L=C.child,C.tag===22&&C.memoizedState!==null?Lp(v):L!==null?(L.return=C,me=L):Lp(v);for(;y!==null;)me=y,Mp(y),y=y.sibling;me=v,ua=T,Ht=K}Op(t)}else(v.subtreeFlags&8772)!==0&&y!==null?(y.return=v,me=y):Op(t)}}function Op(t){for(;me!==null;){var o=me;if((o.flags&8772)!==0){var l=o.alternate;try{if((o.flags&8772)!==0)switch(o.tag){case 0:case 11:case 15:Ht||da(5,o);break;case 1:var f=o.stateNode;if(o.flags&4&&!Ht)if(l===null)f.componentDidMount();else{var v=o.elementType===o.type?l.memoizedProps:Hn(o.type,l.memoizedProps);f.componentDidUpdate(v,l.memoizedState,f.__reactInternalSnapshotBeforeUpdate)}var y=o.updateQueue;y!==null&&_h(o,y,f);break;case 3:var C=o.updateQueue;if(C!==null){if(l=null,o.child!==null)switch(o.child.tag){case 5:l=o.child.stateNode;break;case 1:l=o.child.stateNode}_h(o,C,l)}break;case 5:var T=o.stateNode;if(l===null&&o.flags&4){l=T;var L=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":L.autoFocus&&l.focus();break;case"img":L.src&&(l.src=L.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var K=o.alternate;if(K!==null){var ne=K.memoizedState;if(ne!==null){var se=ne.dehydrated;se!==null&&fs(se)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}Ht||o.flags&512&&Mc(o)}catch(te){ft(o,o.return,te)}}if(o===t){me=null;break}if(l=o.sibling,l!==null){l.return=o.return,me=l;break}me=o.return}}function _p(t){for(;me!==null;){var o=me;if(o===t){me=null;break}var l=o.sibling;if(l!==null){l.return=o.return,me=l;break}me=o.return}}function Lp(t){for(;me!==null;){var o=me;try{switch(o.tag){case 0:case 11:case 15:var l=o.return;try{da(4,o)}catch(L){ft(o,l,L)}break;case 1:var f=o.stateNode;if(typeof f.componentDidMount=="function"){var v=o.return;try{f.componentDidMount()}catch(L){ft(o,v,L)}}var y=o.return;try{Mc(o)}catch(L){ft(o,y,L)}break;case 5:var C=o.return;try{Mc(o)}catch(L){ft(o,C,L)}}}catch(L){ft(o,o.return,L)}if(o===t){me=null;break}var T=o.sibling;if(T!==null){T.return=o.return,me=T;break}me=o.return}}var lb=Math.ceil,fa=D.ReactCurrentDispatcher,Lc=D.ReactCurrentOwner,On=D.ReactCurrentBatchConfig,Ue=0,At=null,xt=null,Lt=0,wn=0,zo=Fr(0),wt=0,Os=null,ho=0,ha=0,Fc=0,_s=null,cn=null,Bc=0,Wo=1/0,br=null,pa=!1,$c=null,zr=null,ma=!1,Wr=null,ga=0,Ls=0,Gc=null,va=-1,xa=0;function Jt(){return(Ue&6)!==0?ot():va!==-1?va:va=ot()}function Hr(t){return(t.mode&1)===0?1:(Ue&2)!==0&&Lt!==0?Lt&-Lt:Wy.transition!==null?(xa===0&&(xa=kf()),xa):(t=Ke,t!==0||(t=window.event,t=t===void 0?16:Bf(t.type)),t)}function Yn(t,o,l,f){if(50<Ls)throw Ls=0,Gc=null,Error(r(185));as(t,l,f),((Ue&2)===0||t!==At)&&(t===At&&((Ue&2)===0&&(ha|=l),wt===4&&qr(t,Lt)),un(t,f),l===1&&Ue===0&&(o.mode&1)===0&&(Wo=ot()+500,Hi&&$r()))}function un(t,o){var l=t.callbackNode;Wx(t,o);var f=Ai(t,t===At?Lt:0);if(f===0)l!==null&&ro(l),t.callbackNode=null,t.callbackPriority=0;else if(o=f&-f,t.callbackPriority!==o){if(l!=null&&ro(l),o===1)t.tag===0?zy(Bp.bind(null,t)):Sh(Bp.bind(null,t)),$y(function(){(Ue&6)===0&&$r()}),l=null;else{switch(Pf(f)){case 1:l=ss;break;case 4:l=jf;break;case 16:l=Ci;break;case 536870912:l=If;break;default:l=Ci}l=qp(l,Fp.bind(null,t))}t.callbackPriority=o,t.callbackNode=l}}function Fp(t,o){if(va=-1,xa=0,(Ue&6)!==0)throw Error(r(327));var l=t.callbackNode;if(Ho()&&t.callbackNode!==l)return null;var f=Ai(t,t===At?Lt:0);if(f===0)return null;if((f&30)!==0||(f&t.expiredLanes)!==0||o)o=ya(t,f);else{o=f;var v=Ue;Ue|=2;var y=Gp();(At!==t||Lt!==o)&&(br=null,Wo=ot()+500,mo(t,o));do try{db();break}catch(T){$p(t,T)}while(!0);sc(),fa.current=y,Ue=v,xt!==null?o=0:(At=null,Lt=0,o=wt)}if(o!==0){if(o===2&&(v=wl(t),v!==0&&(f=v,o=Uc(t,v))),o===1)throw l=Os,mo(t,0),qr(t,f),un(t,ot()),l;if(o===6)qr(t,f);else{if(v=t.current.alternate,(f&30)===0&&!cb(v)&&(o=ya(t,f),o===2&&(y=wl(t),y!==0&&(f=y,o=Uc(t,y))),o===1))throw l=Os,mo(t,0),qr(t,f),un(t,ot()),l;switch(t.finishedWork=v,t.finishedLanes=f,o){case 0:case 1:throw Error(r(345));case 2:go(t,cn,br);break;case 3:if(qr(t,f),(f&130023424)===f&&(o=Bc+500-ot(),10<o)){if(Ai(t,0)!==0)break;if(v=t.suspendedLanes,(v&f)!==f){Jt(),t.pingedLanes|=t.suspendedLanes&v;break}t.timeoutHandle=Kl(go.bind(null,t,cn,br),o);break}go(t,cn,br);break;case 4:if(qr(t,f),(f&4194240)===f)break;for(o=t.eventTimes,v=-1;0<f;){var C=31-Vn(f);y=1<<C,C=o[C],C>v&&(v=C),f&=~y}if(f=v,f=ot()-f,f=(120>f?120:480>f?480:1080>f?1080:1920>f?1920:3e3>f?3e3:4320>f?4320:1960*lb(f/1960))-f,10<f){t.timeoutHandle=Kl(go.bind(null,t,cn,br),f);break}go(t,cn,br);break;case 5:go(t,cn,br);break;default:throw Error(r(329))}}}return un(t,ot()),t.callbackNode===l?Fp.bind(null,t):null}function Uc(t,o){var l=_s;return t.current.memoizedState.isDehydrated&&(mo(t,o).flags|=256),t=ya(t,o),t!==2&&(o=cn,cn=l,o!==null&&Vc(o)),t}function Vc(t){cn===null?cn=t:cn.push.apply(cn,t)}function cb(t){for(var o=t;;){if(o.flags&16384){var l=o.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var f=0;f<l.length;f++){var v=l[f],y=v.getSnapshot;v=v.value;try{if(!zn(y(),v))return!1}catch{return!1}}}if(l=o.child,o.subtreeFlags&16384&&l!==null)l.return=o,o=l;else{if(o===t)break;for(;o.sibling===null;){if(o.return===null||o.return===t)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function qr(t,o){for(o&=~Fc,o&=~ha,t.suspendedLanes|=o,t.pingedLanes&=~o,t=t.expirationTimes;0<o;){var l=31-Vn(o),f=1<<l;t[l]=-1,o&=~f}}function Bp(t){if((Ue&6)!==0)throw Error(r(327));Ho();var o=Ai(t,0);if((o&1)===0)return un(t,ot()),null;var l=ya(t,o);if(t.tag!==0&&l===2){var f=wl(t);f!==0&&(o=f,l=Uc(t,f))}if(l===1)throw l=Os,mo(t,0),qr(t,o),un(t,ot()),l;if(l===6)throw Error(r(345));return t.finishedWork=t.current.alternate,t.finishedLanes=o,go(t,cn,br),un(t,ot()),null}function zc(t,o){var l=Ue;Ue|=1;try{return t(o)}finally{Ue=l,Ue===0&&(Wo=ot()+500,Hi&&$r())}}function po(t){Wr!==null&&Wr.tag===0&&(Ue&6)===0&&Ho();var o=Ue;Ue|=1;var l=On.transition,f=Ke;try{if(On.transition=null,Ke=1,t)return t()}finally{Ke=f,On.transition=l,Ue=o,(Ue&6)===0&&$r()}}function Wc(){wn=zo.current,rt(zo)}function mo(t,o){t.finishedWork=null,t.finishedLanes=0;var l=t.timeoutHandle;if(l!==-1&&(t.timeoutHandle=-1,By(l)),xt!==null)for(l=xt.return;l!==null;){var f=l;switch(ec(f),f.tag){case 1:f=f.type.childContextTypes,f!=null&&zi();break;case 3:Go(),rt(sn),rt(Vt),hc();break;case 5:dc(f);break;case 4:Go();break;case 13:rt(at);break;case 19:rt(at);break;case 10:ic(f.type._context);break;case 22:case 23:Wc()}l=l.return}if(At=t,xt=t=Kr(t.current,null),Lt=wn=o,wt=0,Os=null,Fc=ha=ho=0,cn=_s=null,co!==null){for(o=0;o<co.length;o++)if(l=co[o],f=l.interleaved,f!==null){l.interleaved=null;var v=f.next,y=l.pending;if(y!==null){var C=y.next;y.next=v,f.next=C}l.pending=f}co=null}return t}function $p(t,o){do{var l=xt;try{if(sc(),na.current=ia,ra){for(var f=lt.memoizedState;f!==null;){var v=f.queue;v!==null&&(v.pending=null),f=f.next}ra=!1}if(fo=0,Dt=bt=lt=null,Is=!1,ks=0,Lc.current=null,l===null||l.return===null){wt=1,Os=o,xt=null;break}e:{var y=t,C=l.return,T=l,L=o;if(o=Lt,T.flags|=32768,L!==null&&typeof L=="object"&&typeof L.then=="function"){var K=L,ne=T,se=ne.tag;if((ne.mode&1)===0&&(se===0||se===11||se===15)){var te=ne.alternate;te?(ne.updateQueue=te.updateQueue,ne.memoizedState=te.memoizedState,ne.lanes=te.lanes):(ne.updateQueue=null,ne.memoizedState=null)}var pe=dp(C);if(pe!==null){pe.flags&=-257,fp(pe,C,T,y,o),pe.mode&1&&up(y,K,o),o=pe,L=K;var ge=o.updateQueue;if(ge===null){var xe=new Set;xe.add(L),o.updateQueue=xe}else ge.add(L);break e}else{if((o&1)===0){up(y,K,o),Hc();break e}L=Error(r(426))}}else if(st&&T.mode&1){var gt=dp(C);if(gt!==null){(gt.flags&65536)===0&&(gt.flags|=256),fp(gt,C,T,y,o),rc(Uo(L,T));break e}}y=L=Uo(L,T),wt!==4&&(wt=2),_s===null?_s=[y]:_s.push(y),y=C;do{switch(y.tag){case 3:y.flags|=65536,o&=-o,y.lanes|=o;var z=lp(y,L,o);Oh(y,z);break e;case 1:T=L;var $=y.type,H=y.stateNode;if((y.flags&128)===0&&(typeof $.getDerivedStateFromError=="function"||H!==null&&typeof H.componentDidCatch=="function"&&(zr===null||!zr.has(H)))){y.flags|=65536,o&=-o,y.lanes|=o;var le=cp(y,T,o);Oh(y,le);break e}}y=y.return}while(y!==null)}Vp(l)}catch(be){o=be,xt===l&&l!==null&&(xt=l=l.return);continue}break}while(!0)}function Gp(){var t=fa.current;return fa.current=ia,t===null?ia:t}function Hc(){(wt===0||wt===3||wt===2)&&(wt=4),At===null||(ho&268435455)===0&&(ha&268435455)===0||qr(At,Lt)}function ya(t,o){var l=Ue;Ue|=2;var f=Gp();(At!==t||Lt!==o)&&(br=null,mo(t,o));do try{ub();break}catch(v){$p(t,v)}while(!0);if(sc(),Ue=l,fa.current=f,xt!==null)throw Error(r(261));return At=null,Lt=0,wt}function ub(){for(;xt!==null;)Up(xt)}function db(){for(;xt!==null&&!os();)Up(xt)}function Up(t){var o=Hp(t.alternate,t,wn);t.memoizedProps=t.pendingProps,o===null?Vp(t):xt=o,Lc.current=null}function Vp(t){var o=t;do{var l=o.alternate;if(t=o.return,(o.flags&32768)===0){if(l=rb(l,o,wn),l!==null){xt=l;return}}else{if(l=ob(l,o),l!==null){l.flags&=32767,xt=l;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{wt=6,xt=null;return}}if(o=o.sibling,o!==null){xt=o;return}xt=o=t}while(o!==null);wt===0&&(wt=5)}function go(t,o,l){var f=Ke,v=On.transition;try{On.transition=null,Ke=1,fb(t,o,l,f)}finally{On.transition=v,Ke=f}return null}function fb(t,o,l,f){do Ho();while(Wr!==null);if((Ue&6)!==0)throw Error(r(327));l=t.finishedWork;var v=t.finishedLanes;if(l===null)return null;if(t.finishedWork=null,t.finishedLanes=0,l===t.current)throw Error(r(177));t.callbackNode=null,t.callbackPriority=0;var y=l.lanes|l.childLanes;if(Hx(t,y),t===At&&(xt=At=null,Lt=0),(l.subtreeFlags&2064)===0&&(l.flags&2064)===0||ma||(ma=!0,qp(Ci,function(){return Ho(),null})),y=(l.flags&15990)!==0,(l.subtreeFlags&15990)!==0||y){y=On.transition,On.transition=null;var C=Ke;Ke=1;var T=Ue;Ue|=4,Lc.current=null,ib(t,l),Rp(l,t),Ty(Hl),ki=!!Wl,Hl=Wl=null,t.current=l,ab(l),oo(),Ue=T,Ke=C,On.transition=y}else t.current=l;if(ma&&(ma=!1,Wr=t,ga=v),y=t.pendingLanes,y===0&&(zr=null),$x(l.stateNode),un(t,ot()),o!==null)for(f=t.onRecoverableError,l=0;l<o.length;l++)v=o[l],f(v.value,{componentStack:v.stack,digest:v.digest});if(pa)throw pa=!1,t=$c,$c=null,t;return(ga&1)!==0&&t.tag!==0&&Ho(),y=t.pendingLanes,(y&1)!==0?t===Gc?Ls++:(Ls=0,Gc=t):Ls=0,$r(),null}function Ho(){if(Wr!==null){var t=Pf(ga),o=On.transition,l=Ke;try{if(On.transition=null,Ke=16>t?16:t,Wr===null)var f=!1;else{if(t=Wr,Wr=null,ga=0,(Ue&6)!==0)throw Error(r(331));var v=Ue;for(Ue|=4,me=t.current;me!==null;){var y=me,C=y.child;if((me.flags&16)!==0){var T=y.deletions;if(T!==null){for(var L=0;L<T.length;L++){var K=T[L];for(me=K;me!==null;){var ne=me;switch(ne.tag){case 0:case 11:case 15:Ms(8,ne,y)}var se=ne.child;if(se!==null)se.return=ne,me=se;else for(;me!==null;){ne=me;var te=ne.sibling,pe=ne.return;if(jp(ne),ne===K){me=null;break}if(te!==null){te.return=pe,me=te;break}me=pe}}}var ge=y.alternate;if(ge!==null){var xe=ge.child;if(xe!==null){ge.child=null;do{var gt=xe.sibling;xe.sibling=null,xe=gt}while(xe!==null)}}me=y}}if((y.subtreeFlags&2064)!==0&&C!==null)C.return=y,me=C;else e:for(;me!==null;){if(y=me,(y.flags&2048)!==0)switch(y.tag){case 0:case 11:case 15:Ms(9,y,y.return)}var z=y.sibling;if(z!==null){z.return=y.return,me=z;break e}me=y.return}}var $=t.current;for(me=$;me!==null;){C=me;var H=C.child;if((C.subtreeFlags&2064)!==0&&H!==null)H.return=C,me=H;else e:for(C=$;me!==null;){if(T=me,(T.flags&2048)!==0)try{switch(T.tag){case 0:case 11:case 15:da(9,T)}}catch(be){ft(T,T.return,be)}if(T===C){me=null;break e}var le=T.sibling;if(le!==null){le.return=T.return,me=le;break e}me=T.return}}if(Ue=v,$r(),tr&&typeof tr.onPostCommitFiberRoot=="function")try{tr.onPostCommitFiberRoot(Si,t)}catch{}f=!0}return f}finally{Ke=l,On.transition=o}}return!1}function zp(t,o,l){o=Uo(l,o),o=lp(t,o,1),t=Ur(t,o,1),o=Jt(),t!==null&&(as(t,1,o),un(t,o))}function ft(t,o,l){if(t.tag===3)zp(t,t,l);else for(;o!==null;){if(o.tag===3){zp(o,t,l);break}else if(o.tag===1){var f=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(zr===null||!zr.has(f))){t=Uo(l,t),t=cp(o,t,1),o=Ur(o,t,1),t=Jt(),o!==null&&(as(o,1,t),un(o,t));break}}o=o.return}}function hb(t,o,l){var f=t.pingCache;f!==null&&f.delete(o),o=Jt(),t.pingedLanes|=t.suspendedLanes&l,At===t&&(Lt&l)===l&&(wt===4||wt===3&&(Lt&130023424)===Lt&&500>ot()-Bc?mo(t,0):Fc|=l),un(t,o)}function Wp(t,o){o===0&&((t.mode&1)===0?o=1:(o=Di,Di<<=1,(Di&130023424)===0&&(Di=4194304)));var l=Jt();t=vr(t,o),t!==null&&(as(t,o,l),un(t,l))}function pb(t){var o=t.memoizedState,l=0;o!==null&&(l=o.retryLane),Wp(t,l)}function mb(t,o){var l=0;switch(t.tag){case 13:var f=t.stateNode,v=t.memoizedState;v!==null&&(l=v.retryLane);break;case 19:f=t.stateNode;break;default:throw Error(r(314))}f!==null&&f.delete(o),Wp(t,l)}var Hp;Hp=function(t,o,l){if(t!==null)if(t.memoizedProps!==o.pendingProps||sn.current)ln=!0;else{if((t.lanes&l)===0&&(o.flags&128)===0)return ln=!1,nb(t,o,l);ln=(t.flags&131072)!==0}else ln=!1,st&&(o.flags&1048576)!==0&&Eh(o,Ki,o.index);switch(o.lanes=0,o.tag){case 2:var f=o.type;ca(t,o),t=o.pendingProps;var v=Mo(o,Vt.current);$o(o,l),v=gc(null,o,f,t,v,l);var y=vc();return o.flags|=1,typeof v=="object"&&v!==null&&typeof v.render=="function"&&v.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,an(f)?(y=!0,Wi(o)):y=!1,o.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,cc(o),v.updater=aa,o.stateNode=v,v._reactInternals=o,Cc(o,f,t,l),o=Ac(null,o,f,!0,y,l)):(o.tag=0,st&&y&&Zl(o),Xt(null,o,v,l),o=o.child),o;case 16:f=o.elementType;e:{switch(ca(t,o),t=o.pendingProps,v=f._init,f=v(f._payload),o.type=f,v=o.tag=vb(f),t=Hn(f,t),v){case 0:o=Dc(null,o,f,t,l);break e;case 1:o=xp(null,o,f,t,l);break e;case 11:o=hp(null,o,f,t,l);break e;case 14:o=pp(null,o,f,Hn(f.type,t),l);break e}throw Error(r(306,f,""))}return o;case 0:return f=o.type,v=o.pendingProps,v=o.elementType===f?v:Hn(f,v),Dc(t,o,f,v,l);case 1:return f=o.type,v=o.pendingProps,v=o.elementType===f?v:Hn(f,v),xp(t,o,f,v,l);case 3:e:{if(yp(o),t===null)throw Error(r(387));f=o.pendingProps,y=o.memoizedState,v=y.element,Mh(t,o),ea(o,f,null,l);var C=o.memoizedState;if(f=C.element,y.isDehydrated)if(y={element:f,isDehydrated:!1,cache:C.cache,pendingSuspenseBoundaries:C.pendingSuspenseBoundaries,transitions:C.transitions},o.updateQueue.baseState=y,o.memoizedState=y,o.flags&256){v=Uo(Error(r(423)),o),o=bp(t,o,f,l,v);break e}else if(f!==v){v=Uo(Error(r(424)),o),o=bp(t,o,f,l,v);break e}else for(bn=Lr(o.stateNode.containerInfo.firstChild),yn=o,st=!0,Wn=null,l=Th(o,null,f,l),o.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(Lo(),f===v){o=yr(t,o,l);break e}Xt(t,o,f,l)}o=o.child}return o;case 5:return Lh(o),t===null&&nc(o),f=o.type,v=o.pendingProps,y=t!==null?t.memoizedProps:null,C=v.children,ql(f,v)?C=null:y!==null&&ql(f,y)&&(o.flags|=32),vp(t,o),Xt(t,o,C,l),o.child;case 6:return t===null&&nc(o),null;case 13:return wp(t,o,l);case 4:return uc(o,o.stateNode.containerInfo),f=o.pendingProps,t===null?o.child=Fo(o,null,f,l):Xt(t,o,f,l),o.child;case 11:return f=o.type,v=o.pendingProps,v=o.elementType===f?v:Hn(f,v),hp(t,o,f,v,l);case 7:return Xt(t,o,o.pendingProps,l),o.child;case 8:return Xt(t,o,o.pendingProps.children,l),o.child;case 12:return Xt(t,o,o.pendingProps.children,l),o.child;case 10:e:{if(f=o.type._context,v=o.pendingProps,y=o.memoizedProps,C=v.value,Ze(Xi,f._currentValue),f._currentValue=C,y!==null)if(zn(y.value,C)){if(y.children===v.children&&!sn.current){o=yr(t,o,l);break e}}else for(y=o.child,y!==null&&(y.return=o);y!==null;){var T=y.dependencies;if(T!==null){C=y.child;for(var L=T.firstContext;L!==null;){if(L.context===f){if(y.tag===1){L=xr(-1,l&-l),L.tag=2;var K=y.updateQueue;if(K!==null){K=K.shared;var ne=K.pending;ne===null?L.next=L:(L.next=ne.next,ne.next=L),K.pending=L}}y.lanes|=l,L=y.alternate,L!==null&&(L.lanes|=l),ac(y.return,l,o),T.lanes|=l;break}L=L.next}}else if(y.tag===10)C=y.type===o.type?null:y.child;else if(y.tag===18){if(C=y.return,C===null)throw Error(r(341));C.lanes|=l,T=C.alternate,T!==null&&(T.lanes|=l),ac(C,l,o),C=y.sibling}else C=y.child;if(C!==null)C.return=y;else for(C=y;C!==null;){if(C===o){C=null;break}if(y=C.sibling,y!==null){y.return=C.return,C=y;break}C=C.return}y=C}Xt(t,o,v.children,l),o=o.child}return o;case 9:return v=o.type,f=o.pendingProps.children,$o(o,l),v=Rn(v),f=f(v),o.flags|=1,Xt(t,o,f,l),o.child;case 14:return f=o.type,v=Hn(f,o.pendingProps),v=Hn(f.type,v),pp(t,o,f,v,l);case 15:return mp(t,o,o.type,o.pendingProps,l);case 17:return f=o.type,v=o.pendingProps,v=o.elementType===f?v:Hn(f,v),ca(t,o),o.tag=1,an(f)?(t=!0,Wi(o)):t=!1,$o(o,l),ip(o,f,v),Cc(o,f,v,l),Ac(null,o,f,!0,t,l);case 19:return Cp(t,o,l);case 22:return gp(t,o,l)}throw Error(r(156,o.tag))};function qp(t,o){return kr(t,o)}function gb(t,o,l,f){this.tag=t,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _n(t,o,l,f){return new gb(t,o,l,f)}function qc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function vb(t){if(typeof t=="function")return qc(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Y)return 11;if(t===ae)return 14}return 2}function Kr(t,o){var l=t.alternate;return l===null?(l=_n(t.tag,o,t.key,t.mode),l.elementType=t.elementType,l.type=t.type,l.stateNode=t.stateNode,l.alternate=t,t.alternate=l):(l.pendingProps=o,l.type=t.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=t.flags&14680064,l.childLanes=t.childLanes,l.lanes=t.lanes,l.child=t.child,l.memoizedProps=t.memoizedProps,l.memoizedState=t.memoizedState,l.updateQueue=t.updateQueue,o=t.dependencies,l.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},l.sibling=t.sibling,l.index=t.index,l.ref=t.ref,l}function ba(t,o,l,f,v,y){var C=2;if(f=t,typeof t=="function")qc(t)&&(C=1);else if(typeof t=="string")C=5;else e:switch(t){case O:return vo(l.children,v,y,o);case M:C=8,v|=8;break;case q:return t=_n(12,l,o,v|2),t.elementType=q,t.lanes=y,t;case W:return t=_n(13,l,o,v),t.elementType=W,t.lanes=y,t;case re:return t=_n(19,l,o,v),t.elementType=re,t.lanes=y,t;case ee:return wa(l,v,y,o);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case J:C=10;break e;case ie:C=9;break e;case Y:C=11;break e;case ae:C=14;break e;case ce:C=16,f=null;break e}throw Error(r(130,t==null?t:typeof t,""))}return o=_n(C,l,o,v),o.elementType=t,o.type=f,o.lanes=y,o}function vo(t,o,l,f){return t=_n(7,t,f,o),t.lanes=l,t}function wa(t,o,l,f){return t=_n(22,t,f,o),t.elementType=ee,t.lanes=l,t.stateNode={isHidden:!1},t}function Kc(t,o,l){return t=_n(6,t,null,o),t.lanes=l,t}function Yc(t,o,l){return o=_n(4,t.children!==null?t.children:[],t.key,o),o.lanes=l,o.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},o}function xb(t,o,l,f,v){this.tag=o,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Nl(0),this.expirationTimes=Nl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Nl(0),this.identifierPrefix=f,this.onRecoverableError=v,this.mutableSourceEagerHydrationData=null}function Qc(t,o,l,f,v,y,C,T,L){return t=new xb(t,o,l,T,L),o===1?(o=1,y===!0&&(o|=8)):o=0,y=_n(3,null,null,o),t.current=y,y.stateNode=t,y.memoizedState={element:f,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},cc(y),t}function yb(t,o,l){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:R,key:f==null?null:""+f,children:t,containerInfo:o,implementation:l}}function Kp(t){if(!t)return Br;t=t._reactInternals;e:{if(Re(t)!==t||t.tag!==1)throw Error(r(170));var o=t;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(an(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(r(171))}if(t.tag===1){var l=t.type;if(an(l))return Nh(t,l,o)}return o}function Yp(t,o,l,f,v,y,C,T,L){return t=Qc(l,f,!0,t,v,y,C,T,L),t.context=Kp(null),l=t.current,f=Jt(),v=Hr(l),y=xr(f,v),y.callback=o??null,Ur(l,y,v),t.current.lanes=v,as(t,v,f),un(t,f),t}function Na(t,o,l,f){var v=o.current,y=Jt(),C=Hr(v);return l=Kp(l),o.context===null?o.context=l:o.pendingContext=l,o=xr(y,C),o.payload={element:t},f=f===void 0?null:f,f!==null&&(o.callback=f),t=Ur(v,o,C),t!==null&&(Yn(t,v,C,y),Zi(t,v,C)),C}function Ca(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Qp(t,o){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var l=t.retryLane;t.retryLane=l!==0&&l<o?l:o}}function Xc(t,o){Qp(t,o),(t=t.alternate)&&Qp(t,o)}function bb(){return null}var Xp=typeof reportError=="function"?reportError:function(t){console.error(t)};function Jc(t){this._internalRoot=t}Sa.prototype.render=Jc.prototype.render=function(t){var o=this._internalRoot;if(o===null)throw Error(r(409));Na(t,o,null,null)},Sa.prototype.unmount=Jc.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var o=t.containerInfo;po(function(){Na(null,t,null,null)}),o[hr]=null}};function Sa(t){this._internalRoot=t}Sa.prototype.unstable_scheduleHydration=function(t){if(t){var o=Mf();t={blockedOn:null,target:t,priority:o};for(var l=0;l<Mr.length&&o!==0&&o<Mr[l].priority;l++);Mr.splice(l,0,t),l===0&&Lf(t)}};function Zc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Ea(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Jp(){}function wb(t,o,l,f,v){if(v){if(typeof f=="function"){var y=f;f=function(){var K=Ca(C);y.call(K)}}var C=Yp(o,f,t,0,null,!1,!1,"",Jp);return t._reactRootContainer=C,t[hr]=C.current,ws(t.nodeType===8?t.parentNode:t),po(),C}for(;v=t.lastChild;)t.removeChild(v);if(typeof f=="function"){var T=f;f=function(){var K=Ca(L);T.call(K)}}var L=Qc(t,0,!1,null,null,!1,!1,"",Jp);return t._reactRootContainer=L,t[hr]=L.current,ws(t.nodeType===8?t.parentNode:t),po(function(){Na(o,L,l,f)}),L}function Da(t,o,l,f,v){var y=l._reactRootContainer;if(y){var C=y;if(typeof v=="function"){var T=v;v=function(){var L=Ca(C);T.call(L)}}Na(o,C,t,v)}else C=wb(l,o,t,v,f);return Ca(C)}Tf=function(t){switch(t.tag){case 3:var o=t.stateNode;if(o.current.memoizedState.isDehydrated){var l=is(o.pendingLanes);l!==0&&(Cl(o,l|1),un(o,ot()),(Ue&6)===0&&(Wo=ot()+500,$r()))}break;case 13:po(function(){var f=vr(t,1);if(f!==null){var v=Jt();Yn(f,t,1,v)}}),Xc(t,1)}},Sl=function(t){if(t.tag===13){var o=vr(t,134217728);if(o!==null){var l=Jt();Yn(o,t,134217728,l)}Xc(t,134217728)}},Rf=function(t){if(t.tag===13){var o=Hr(t),l=vr(t,o);if(l!==null){var f=Jt();Yn(l,t,o,f)}Xc(t,o)}},Mf=function(){return Ke},Of=function(t,o){var l=Ke;try{return Ke=t,o()}finally{Ke=l}},on=function(t,o,l){switch(o){case"input":if(Rt(t,l),o=l.name,l.type==="radio"&&o!=null){for(l=t;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<l.length;o++){var f=l[o];if(f!==t&&f.form===t.form){var v=Vi(f);if(!v)throw Error(r(90));Te(f),Rt(f,v)}}}break;case"textarea":vt(t,l);break;case"select":o=l.value,o!=null&&Xe(t,!!l.multiple,o,!1)}},_e=zc,Be=po;var Nb={usingClientEntryPoint:!1,Events:[Ss,To,Vi,de,je,zc]},Fs={findFiberByHostInstance:so,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Cb={bundleType:Fs.bundleType,version:Fs.version,rendererPackageName:Fs.rendererPackageName,rendererConfig:Fs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:D.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Un(t),t===null?null:t.stateNode},findFiberByHostInstance:Fs.findFiberByHostInstance||bb,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Aa=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Aa.isDisabled&&Aa.supportsFiber)try{Si=Aa.inject(Cb),tr=Aa}catch{}}return dn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Nb,dn.createPortal=function(t,o){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Zc(o))throw Error(r(200));return yb(t,o,null,l)},dn.createRoot=function(t,o){if(!Zc(t))throw Error(r(299));var l=!1,f="",v=Xp;return o!=null&&(o.unstable_strictMode===!0&&(l=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onRecoverableError!==void 0&&(v=o.onRecoverableError)),o=Qc(t,1,!1,null,null,l,!1,f,v),t[hr]=o.current,ws(t.nodeType===8?t.parentNode:t),new Jc(o)},dn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var o=t._reactInternals;if(o===void 0)throw typeof t.render=="function"?Error(r(188)):(t=Object.keys(t).join(","),Error(r(268,t)));return t=Un(o),t=t===null?null:t.stateNode,t},dn.flushSync=function(t){return po(t)},dn.hydrate=function(t,o,l){if(!Ea(o))throw Error(r(200));return Da(null,t,o,!0,l)},dn.hydrateRoot=function(t,o,l){if(!Zc(t))throw Error(r(405));var f=l!=null&&l.hydratedSources||null,v=!1,y="",C=Xp;if(l!=null&&(l.unstable_strictMode===!0&&(v=!0),l.identifierPrefix!==void 0&&(y=l.identifierPrefix),l.onRecoverableError!==void 0&&(C=l.onRecoverableError)),o=Yp(o,null,t,1,l??null,v,!1,y,C),t[hr]=o.current,ws(t),f)for(t=0;t<f.length;t++)l=f[t],v=l._getVersion,v=v(l._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[l,v]:o.mutableSourceEagerHydrationData.push(l,v);return new Sa(o)},dn.render=function(t,o,l){if(!Ea(o))throw Error(r(200));return Da(null,t,o,!1,l)},dn.unmountComponentAtNode=function(t){if(!Ea(t))throw Error(r(40));return t._reactRootContainer?(po(function(){Da(null,null,t,!1,function(){t._reactRootContainer=null,t[hr]=null})}),!0):!1},dn.unstable_batchedUpdates=zc,dn.unstable_renderSubtreeIntoContainer=function(t,o,l,f){if(!Ea(l))throw Error(r(200));if(t==null||t._reactInternals===void 0)throw Error(r(38));return Da(t,o,l,!1,f)},dn.version="18.3.1-next-f1338f8080-20240426",dn}var im;function T0(){if(im)return nu.exports;im=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(n){console.error(n)}}return e(),nu.exports=kb(),nu.exports}var am;function Pb(){if(am)return ja;am=1;var e=T0();return ja.createRoot=e.createRoot,ja.hydrateRoot=e.hydrateRoot,ja}var Tb=Pb();const Rb=Er(Tb);var su,lm;function Mb(){if(lm)return su;lm=1,su=e;function e(n,r,s){if(n!=null&&typeof n!="number")throw new Error("start must be a number or null");if(r!=null&&typeof r!="number")throw new Error("stop must be a number or null");if(s!=null&&typeof s!="number")throw new Error("step must be a number or null");r==null&&(r=n||0,n=0),s==null&&(s=r>n?1:-1);for(var i=[],a=n<r;a?n<r:n>r;n+=s)i.push(n);return i}return su}var Ob=Mb();const Od=Er(Ob);var iu={exports:{}},au,cm;function _b(){if(cm)return au;cm=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return au=e,au}var lu,um;function Lb(){if(um)return lu;um=1;var e=_b();function n(){}function r(){}return r.resetWarningCache=n,lu=function(){function s(c,d,h,p,m,g){if(g!==e){var x=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw x.name="Invariant Violation",x}}s.isRequired=s;function i(){return s}var a={array:s,bigint:s,bool:s,func:s,number:s,object:s,string:s,symbol:s,any:s,arrayOf:i,element:s,elementType:s,instanceOf:i,node:s,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:r,resetWarningCache:n};return a.PropTypes=a,a},lu}var dm;function Fb(){return dm||(dm=1,iu.exports=Lb()()),iu.exports}var Bb=Fb();const Ee=Er(Bb);var cu={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var fm;function $b(){return fm||(fm=1,function(e){(function(){var n={}.hasOwnProperty;function r(){for(var a="",c=0;c<arguments.length;c++){var d=arguments[c];d&&(a=i(a,s(d)))}return a}function s(a){if(typeof a=="string"||typeof a=="number")return a;if(typeof a!="object")return"";if(Array.isArray(a))return r.apply(null,a);if(a.toString!==Object.prototype.toString&&!a.toString.toString().includes("[native code]"))return a.toString();var c="";for(var d in a)n.call(a,d)&&a[d]&&(c=i(c,d));return c}function i(a,c){return c?a?a+" "+c:a+c:a}e.exports?(r.default=r,e.exports=r):window.classNames=r})()}(cu)),cu.exports}var Gb=$b();const Bt=Er(Gb);var uu,hm;function Ub(){if(hm)return uu;hm=1;var e=200,n="__lodash_hash_undefined__",r=9007199254740991,s="[object Arguments]",i="[object Function]",a="[object GeneratorFunction]",c=/[\\^$.*+?()[\]{}|]/g,d=/^\[object .+?Constructor\]$/,h=typeof Xr=="object"&&Xr&&Xr.Object===Object&&Xr,p=typeof self=="object"&&self&&self.Object===Object&&self,m=h||p||Function("return this")();function g(U,X,de){switch(de.length){case 0:return U.call(X);case 1:return U.call(X,de[0]);case 2:return U.call(X,de[0],de[1]);case 3:return U.call(X,de[0],de[1],de[2])}return U.apply(X,de)}function x(U,X){var de=U?U.length:0;return!!de&&E(U,X,0)>-1}function b(U,X){for(var de=-1,je=X.length,_e=U.length;++de<je;)U[_e+de]=X[de];return U}function S(U,X,de,je){for(var _e=U.length,Be=de+-1;++Be<_e;)if(X(U[Be],Be,U))return Be;return-1}function E(U,X,de){if(X!==X)return S(U,N,de);for(var je=de-1,_e=U.length;++je<_e;)if(U[je]===X)return je;return-1}function N(U){return U!==U}function j(U,X){return U.has(X)}function P(U,X){return U?.[X]}function I(U){var X=!1;if(U!=null&&typeof U.toString!="function")try{X=!!(U+"")}catch{}return X}var D=Array.prototype,k=Function.prototype,R=Object.prototype,O=m["__core-js_shared__"],M=function(){var U=/[^.]+$/.exec(O&&O.keys&&O.keys.IE_PROTO||"");return U?"Symbol(src)_1."+U:""}(),q=k.toString,J=R.hasOwnProperty,ie=R.toString,Y=RegExp("^"+q.call(J).replace(c,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),W=m.Symbol,re=R.propertyIsEnumerable,ae=D.splice,ce=W?W.isConcatSpreadable:void 0,ee=Math.max,Q=Yt(m,"Map"),V=Yt(Object,"create");function F(U){var X=-1,de=U?U.length:0;for(this.clear();++X<de;){var je=U[X];this.set(je[0],je[1])}}function A(){this.__data__=V?V(null):{}}function _(U){return this.has(U)&&delete this.__data__[U]}function Z(U){var X=this.__data__;if(V){var de=X[U];return de===n?void 0:de}return J.call(X,U)?X[U]:void 0}function oe(U){var X=this.__data__;return V?X[U]!==void 0:J.call(X,U)}function fe(U,X){var de=this.__data__;return de[U]=V&&X===void 0?n:X,this}F.prototype.clear=A,F.prototype.delete=_,F.prototype.get=Z,F.prototype.has=oe,F.prototype.set=fe;function he(U){var X=-1,de=U?U.length:0;for(this.clear();++X<de;){var je=U[X];this.set(je[0],je[1])}}function Pe(){this.__data__=[]}function ye(U){var X=this.__data__,de=Xe(X,U);if(de<0)return!1;var je=X.length-1;return de==je?X.pop():ae.call(X,de,1),!0}function Se(U){var X=this.__data__,de=Xe(X,U);return de<0?void 0:X[de][1]}function we(U){return Xe(this.__data__,U)>-1}function ht(U,X){var de=this.__data__,je=Xe(de,U);return je<0?de.push([U,X]):de[je][1]=X,this}he.prototype.clear=Pe,he.prototype.delete=ye,he.prototype.get=Se,he.prototype.has=we,he.prototype.set=ht;function Te(U){var X=-1,de=U?U.length:0;for(this.clear();++X<de;){var je=U[X];this.set(je[0],je[1])}}function Qe(){this.__data__={hash:new F,map:new(Q||he),string:new F}}function Ne(U){return mn(this,U).delete(U)}function qe(U){return mn(this,U).get(U)}function et(U){return mn(this,U).has(U)}function Rt(U,X){return mn(this,U).set(U,X),this}Te.prototype.clear=Qe,Te.prototype.delete=Ne,Te.prototype.get=qe,Te.prototype.has=et,Te.prototype.set=Rt;function tn(U){var X=-1,de=U?U.length:0;for(this.__data__=new Te;++X<de;)this.add(U[X])}function Kt(U){return this.__data__.set(U,n),this}function ut(U){return this.__data__.has(U)}tn.prototype.add=tn.prototype.push=Kt,tn.prototype.has=ut;function Xe(U,X){for(var de=U.length;de--;)if(jr(U[de][0],X))return de;return-1}function We(U,X,de,je){var _e=-1,Be=x,Je=!0,St=U.length,Ve=[],Gt=X.length;if(!St)return Ve;X.length>=e&&(Be=j,Je=!1,X=new tn(X));e:for(;++_e<St;){var tt=U[_e],Et=tt;if(tt=tt!==0?tt:0,Je&&Et===Et){for(var Ut=Gt;Ut--;)if(X[Ut]===Et)continue e;Ve.push(tt)}else Be(X,Et,je)||Ve.push(tt)}return Ve}function pt(U,X,de,je,_e){var Be=-1,Je=U.length;for(de||(de=Qt),_e||(_e=[]);++Be<Je;){var St=U[Be];de(St)&&b(_e,St)}return _e}function vt(U){if(!on(U)||jn(U))return!1;var X=In(U)||I(U)?Y:d;return X.test(Ct(U))}function Dn(U,X){return X=ee(X===void 0?U.length-1:X,0),function(){for(var de=arguments,je=-1,_e=ee(de.length-X,0),Be=Array(_e);++je<_e;)Be[je]=de[X+je];je=-1;for(var Je=Array(X+1);++je<X;)Je[je]=de[je];return Je[X]=Be,g(U,this,Je)}}function mn(U,X){var de=U.__data__;return An(X)?de[typeof X=="string"?"string":"hash"]:de.map}function Yt(U,X){var de=P(U,X);return vt(de)?de:void 0}function Qt(U){return Mt(U)||er(U)||!!(ce&&U&&U[ce])}function An(U){var X=typeof U;return X=="string"||X=="number"||X=="symbol"||X=="boolean"?U!=="__proto__":U===null}function jn(U){return!!M&&M in U}function Ct(U){if(U!=null){try{return q.call(U)}catch{}try{return U+""}catch{}}return""}var Ar=Dn(function(U,X){return rn(U)?We(U,pt(X,1,rn)):[]});function jr(U,X){return U===X||U!==U&&X!==X}function er(U){return rn(U)&&J.call(U,"callee")&&(!re.call(U,"callee")||ie.call(U)==s)}var Mt=Array.isArray;function nn(U){return U!=null&&gn(U.length)&&!In(U)}function rn(U){return vn(U)&&nn(U)}function In(U){var X=on(U)?ie.call(U):"";return X==i||X==a}function gn(U){return typeof U=="number"&&U>-1&&U%1==0&&U<=r}function on(U){var X=typeof U;return!!U&&(X=="object"||X=="function")}function vn(U){return!!U&&typeof U=="object"}return uu=Ar,uu}var Vb=Ub();const pm=Er(Vb);function ol(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function zb(e,n){for(var r=0;r<n.length;r++){var s=n[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function sl(e,n,r){return n&&zb(e.prototype,n),e}function it(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function dd(){return dd=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},dd.apply(this,arguments)}function il(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&fd(e,n)}function Ko(e){return Ko=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},Ko(e)}function fd(e,n){return fd=Object.setPrototypeOf||function(s,i){return s.__proto__=i,s},fd(e,n)}function Wb(e,n){if(e==null)return{};var r={},s=Object.keys(e),i,a;for(a=0;a<s.length;a++)i=s[a],!(n.indexOf(i)>=0)&&(r[i]=e[i]);return r}function Hb(e,n){if(e==null)return{};var r=Wb(e,n),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)s=a[i],!(n.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function It(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function al(e,n){return n&&(typeof n=="object"||typeof n=="function")?n:It(e)}function qb(e,n){return Kb(e)||Yb(e,n)||Qb()}function Kb(e){if(Array.isArray(e))return e}function Yb(e,n){var r=[],s=!0,i=!1,a=void 0;try{for(var c=e[Symbol.iterator](),d;!(s=(d=c.next()).done)&&(r.push(d.value),!(n&&r.length===n));s=!0);}catch(h){i=!0,a=h}finally{try{!s&&c.return!=null&&c.return()}finally{if(i)throw a}}return r}function Qb(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}var Xb=["C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B"],Jb=["Db","Eb","Gb","Ab","Bb"],Zb={C:0,"C#":1,Db:1,D:2,"D#":3,Eb:3,E:4,F:5,"F#":6,Gb:6,G:7,"G#":8,Ab:8,A:9,"A#":10,Bb:10,B:11},$a=12,_d=$a,Ld=127,e1=/([a-g])([#b]?)(\d+)/,hd=12;function t1(e){if(!e)throw Error("Invalid note argument");var n=e1.exec(e.toLowerCase());if(!n)throw Error("Invalid note argument");var r=qb(n,4),s=r[1],i=r[2],a=r[3],c="".concat(s.toUpperCase()).concat(i),d=Zb[c];if(d==null)throw Error("Invalid note argument");return $a+d+hd*parseInt(a,10)}function n1(e){var n=(e-$a)%hd,r=Math.floor((e-$a)/hd),s=Xb[n];return{note:"".concat(s).concat(r),pitchName:s,octave:r,midiNumber:e,isAccidental:Jb.includes(s)}}function r1(){return Od(_d,Ld+1).reduce(function(e,n){return e[n]=n1(n),e},{})}var o1=r1();function R0(e){var n=o1[e];if(!n)throw Error("Invalid MIDI number");return n}var s1=Od(_d,Ld+1).filter(function(e){return!R0(e).isAccidental}),hn={fromNote:t1,getAttributes:R0,MIN_MIDI_NUMBER:_d,MAX_MIDI_NUMBER:Ld,NATURAL_MIDI_NUMBERS:s1},Fd=function(e){il(n,e);function n(){var r,s;ol(this,n);for(var i=arguments.length,a=new Array(i),c=0;c<i;c++)a[c]=arguments[c];return s=al(this,(r=Ko(n)).call.apply(r,[this].concat(a))),it(It(s),"onPlayNoteInput",function(){s.props.onPlayNoteInput(s.props.midiNumber)}),it(It(s),"onStopNoteInput",function(){s.props.onStopNoteInput(s.props.midiNumber)}),s}return sl(n,[{key:"getAbsoluteKeyPosition",value:function(s){var i=7,a=hn.getAttributes(s),c=a.octave,d=a.pitchName,h=this.props.pitchPositions[d],p=i*c;return h+p}},{key:"getRelativeKeyPosition",value:function(s){return this.getAbsoluteKeyPosition(s)-this.getAbsoluteKeyPosition(this.props.noteRange.first)}},{key:"render",value:function(){var s=this.props,i=s.naturalKeyWidth,a=s.accidentalWidthRatio,c=s.midiNumber,d=s.gliss,h=s.useTouchEvents,p=s.accidental,m=s.active,g=s.disabled,x=s.children;return ve.createElement("div",{className:Bt("ReactPiano__Key",{"ReactPiano__Key--accidental":p,"ReactPiano__Key--natural":!p,"ReactPiano__Key--disabled":g,"ReactPiano__Key--active":m}),style:{left:mm(this.getRelativeKeyPosition(c)*i),width:mm(p?a*i:i)},onMouseDown:h?null:this.onPlayNoteInput,onMouseUp:h?null:this.onStopNoteInput,onMouseEnter:d?this.onPlayNoteInput:null,onMouseLeave:this.onStopNoteInput,onTouchStart:h?this.onPlayNoteInput:null,onTouchCancel:h?this.onStopNoteInput:null,onTouchEnd:h?this.onStopNoteInput:null},ve.createElement("div",{className:"ReactPiano__NoteLabelContainer"},x))}}]),n}(ve.Component);it(Fd,"propTypes",{midiNumber:Ee.number.isRequired,naturalKeyWidth:Ee.number.isRequired,gliss:Ee.bool.isRequired,useTouchEvents:Ee.bool.isRequired,accidental:Ee.bool.isRequired,active:Ee.bool.isRequired,disabled:Ee.bool.isRequired,onPlayNoteInput:Ee.func.isRequired,onStopNoteInput:Ee.func.isRequired,accidentalWidthRatio:Ee.number.isRequired,pitchPositions:Ee.object.isRequired,children:Ee.node});it(Fd,"defaultProps",{accidentalWidthRatio:.65,pitchPositions:{C:0,Db:.55,D:1,Eb:1.8,E:2,F:3,Gb:3.5,G:4,Ab:4.7,A:5,Bb:5.85,B:6}});function mm(e){return"".concat(e*100,"%")}var Bd=function(e){il(n,e);function n(){return ol(this,n),al(this,Ko(n).apply(this,arguments))}return sl(n,[{key:"getMidiNumbers",value:function(){return Od(this.props.noteRange.first,this.props.noteRange.last+1)}},{key:"getNaturalKeyCount",value:function(){return this.getMidiNumbers().filter(function(s){var i=hn.getAttributes(s),a=i.isAccidental;return!a}).length}},{key:"getNaturalKeyWidth",value:function(){return 1/this.getNaturalKeyCount()}},{key:"getWidth",value:function(){return this.props.width?this.props.width:"100%"}},{key:"getHeight",value:function(){if(!this.props.width)return"100%";var s=this.props.width*this.getNaturalKeyWidth();return"".concat(s/this.props.keyWidthToHeight,"px")}},{key:"render",value:function(){var s=this,i=this.getNaturalKeyWidth();return ve.createElement("div",{className:Bt("ReactPiano__Keyboard",this.props.className),style:{width:this.getWidth(),height:this.getHeight()}},this.getMidiNumbers().map(function(a){var c=hn.getAttributes(a);c.note;var d=c.isAccidental,h=!s.props.disabled&&s.props.activeNotes.includes(a);return ve.createElement(Fd,{naturalKeyWidth:i,midiNumber:a,noteRange:s.props.noteRange,active:h,accidental:d,disabled:s.props.disabled,onPlayNoteInput:s.props.onPlayNoteInput,onStopNoteInput:s.props.onStopNoteInput,gliss:s.props.gliss,useTouchEvents:s.props.useTouchEvents,key:a},s.props.disabled?null:s.props.renderNoteLabel({isActive:h,isAccidental:d,midiNumber:a}))}))}}]),n}(ve.Component);it(Bd,"propTypes",{noteRange:i1,activeNotes:Ee.arrayOf(Ee.number),onPlayNoteInput:Ee.func.isRequired,onStopNoteInput:Ee.func.isRequired,renderNoteLabel:Ee.func.isRequired,keyWidthToHeight:Ee.number.isRequired,className:Ee.string,disabled:Ee.bool,gliss:Ee.bool,useTouchEvents:Ee.bool,width:Ee.number});it(Bd,"defaultProps",{disabled:!1,gliss:!1,useTouchEvents:!1,keyWidthToHeight:.33,renderNoteLabel:function(){}});function gm(e){return typeof e!="number"?!1:hn.NATURAL_MIDI_NUMBERS.includes(e)}function i1(e,n,r){var s=e[n],i=s.first,a=s.last;if(!i||!a)return new Error("Invalid prop ".concat(n," supplied to ").concat(r,". ").concat(n," must be an object with .first and .last values."));if(!gm(i)||!gm(a))return new Error("Invalid prop ".concat(n," supplied to ").concat(r,". ").concat(n," values must be valid MIDI numbers, and should not be accidentals (sharp or flat notes)."));if(i>=a)return new Error("Invalid prop ".concat(n," supplied to ").concat(r,". ").concat(n,".first must be smaller than ").concat(n,".last."))}var $d=function(e){il(n,e);function n(){var r,s;ol(this,n);for(var i=arguments.length,a=new Array(i),c=0;c<i;c++)a[c]=arguments[c];return s=al(this,(r=Ko(n)).call.apply(r,[this].concat(a))),it(It(s),"state",{isMouseDown:!1,useTouchEvents:!1}),it(It(s),"handleNoteChanges",function(d){var h=d.prevActiveNotes,p=d.nextActiveNotes;if(!s.props.disabled){var m=pm(h,p),g=pm(p,h);g.forEach(function(x){s.props.playNote(x)}),m.forEach(function(x){s.props.stopNote(x)})}}),it(It(s),"getMidiNumberForKey",function(d){if(!s.props.keyboardShortcuts)return null;var h=s.props.keyboardShortcuts.find(function(p){return p.key===d});return h&&h.midiNumber}),it(It(s),"getKeyForMidiNumber",function(d){if(!s.props.keyboardShortcuts)return null;var h=s.props.keyboardShortcuts.find(function(p){return p.midiNumber===d});return h&&h.key}),it(It(s),"onKeyDown",function(d){if(!(d.ctrlKey||d.metaKey||d.shiftKey)){var h=s.getMidiNumberForKey(d.key);h&&s.onPlayNoteInput(h)}}),it(It(s),"onKeyUp",function(d){var h=s.getMidiNumberForKey(d.key);h&&s.onStopNoteInput(h)}),it(It(s),"onPlayNoteInput",function(d){s.props.disabled||s.props.onPlayNoteInput(d,s.props.activeNotes)}),it(It(s),"onStopNoteInput",function(d){s.props.disabled||s.props.onStopNoteInput(d,s.props.activeNotes)}),it(It(s),"onMouseDown",function(){s.setState({isMouseDown:!0})}),it(It(s),"onMouseUp",function(){s.setState({isMouseDown:!1})}),it(It(s),"onTouchStart",function(){s.setState({useTouchEvents:!0})}),it(It(s),"renderNoteLabel",function(d){var h=d.midiNumber,p=d.isActive,m=d.isAccidental,g=s.getKeyForMidiNumber(h);return s.props.renderNoteLabel({keyboardShortcut:g,midiNumber:h,isActive:p,isAccidental:m})}),s}return sl(n,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.onKeyDown),window.addEventListener("keyup",this.onKeyUp)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.onKeyDown),window.removeEventListener("keyup",this.onKeyUp)}},{key:"componentDidUpdate",value:function(s,i){this.props.activeNotes!==s.activeNotes&&this.handleNoteChanges({prevActiveNotes:s.activeNotes||[],nextActiveNotes:this.props.activeNotes||[]})}},{key:"render",value:function(){return ve.createElement("div",{style:{width:"100%",height:"100%"},onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchStart:this.onTouchStart,"data-testid":"container"},ve.createElement(Bd,{noteRange:this.props.noteRange,onPlayNoteInput:this.onPlayNoteInput,onStopNoteInput:this.onStopNoteInput,activeNotes:this.props.activeNotes,className:this.props.className,disabled:this.props.disabled,width:this.props.width,keyWidthToHeight:this.props.keyWidthToHeight,gliss:this.state.isMouseDown,useTouchEvents:this.state.useTouchEvents,renderNoteLabel:this.renderNoteLabel}))}}]),n}(ve.Component);it($d,"propTypes",{noteRange:Ee.object.isRequired,activeNotes:Ee.arrayOf(Ee.number.isRequired).isRequired,playNote:Ee.func.isRequired,stopNote:Ee.func.isRequired,onPlayNoteInput:Ee.func.isRequired,onStopNoteInput:Ee.func.isRequired,renderNoteLabel:Ee.func.isRequired,className:Ee.string,disabled:Ee.bool,width:Ee.number,keyWidthToHeight:Ee.number,keyboardShortcuts:Ee.arrayOf(Ee.shape({key:Ee.string.isRequired,midiNumber:Ee.number.isRequired}))});it($d,"defaultProps",{renderNoteLabel:function(n){var r=n.keyboardShortcut;n.midiNumber;var s=n.isActive,i=n.isAccidental;return r?ve.createElement("div",{className:Bt("ReactPiano__NoteLabel",{"ReactPiano__NoteLabel--active":s,"ReactPiano__NoteLabel--accidental":i,"ReactPiano__NoteLabel--natural":!i})},r):null}});var Gd=function(e){il(n,e);function n(){var r,s;ol(this,n);for(var i=arguments.length,a=new Array(i),c=0;c<i;c++)a[c]=arguments[c];return s=al(this,(r=Ko(n)).call.apply(r,[this].concat(a))),it(It(s),"state",{activeNotes:s.props.activeNotes||[]}),it(It(s),"handlePlayNoteInput",function(d){s.setState(function(h){return s.props.onPlayNoteInput&&s.props.onPlayNoteInput(d,{prevActiveNotes:h.activeNotes}),h.activeNotes.includes(d)?null:{activeNotes:h.activeNotes.concat(d)}})}),it(It(s),"handleStopNoteInput",function(d){s.setState(function(h){return s.props.onStopNoteInput&&s.props.onStopNoteInput(d,{prevActiveNotes:s.state.activeNotes}),{activeNotes:h.activeNotes.filter(function(p){return d!==p})}})}),s}return sl(n,[{key:"componentDidUpdate",value:function(s){s.activeNotes!==this.props.activeNotes&&this.state.activeNotes!==this.props.activeNotes&&this.setState({activeNotes:this.props.activeNotes||[]})}},{key:"render",value:function(){var s=this.props;s.activeNotes,s.onPlayNoteInput,s.onStopNoteInput;var i=Hb(s,["activeNotes","onPlayNoteInput","onStopNoteInput"]);return ve.createElement($d,dd({activeNotes:this.state.activeNotes,onPlayNoteInput:this.handlePlayNoteInput,onStopNoteInput:this.handleStopNoteInput},i))}}]),n}(ve.Component);it(Gd,"propTypes",{noteRange:Ee.object.isRequired,activeNotes:Ee.arrayOf(Ee.number.isRequired),playNote:Ee.func.isRequired,stopNote:Ee.func.isRequired,onPlayNoteInput:Ee.func,onStopNoteInput:Ee.func,renderNoteLabel:Ee.func,className:Ee.string,disabled:Ee.bool,width:Ee.number,keyWidthToHeight:Ee.number,keyboardShortcuts:Ee.arrayOf(Ee.shape({key:Ee.string.isRequired,midiNumber:Ee.number.isRequired}))});function a1(e){for(var n=e.firstNote,r=e.lastNote,s=e.keyboardConfig,i=n,a=0,c=[];a<s.length&&i<=r;){var d=s[a],h=hn.getAttributes(i),p=h.isAccidental;p?c.push({key:d.flat,midiNumber:i}):(c.push({key:d.natural,midiNumber:i}),a+=1),i+=1}return c}var vm={create:a1,BOTTOM_ROW:[{natural:"z",flat:"a",sharp:"s"},{natural:"x",flat:"s",sharp:"d"},{natural:"c",flat:"d",sharp:"f"},{natural:"v",flat:"f",sharp:"g"},{natural:"b",flat:"g",sharp:"h"},{natural:"n",flat:"h",sharp:"j"},{natural:"m",flat:"j",sharp:"k"},{natural:",",flat:"k",sharp:"l"},{natural:".",flat:"l",sharp:";"},{natural:"/",flat:";",sharp:"'"}],HOME_ROW:[{natural:"a",flat:"q",sharp:"w"},{natural:"s",flat:"w",sharp:"e"},{natural:"d",flat:"e",sharp:"r"},{natural:"f",flat:"r",sharp:"t"},{natural:"g",flat:"t",sharp:"y"},{natural:"h",flat:"y",sharp:"u"},{natural:"j",flat:"u",sharp:"i"},{natural:"k",flat:"i",sharp:"o"},{natural:"l",flat:"o",sharp:"p"},{natural:";",flat:"p",sharp:"["},{natural:"'",flat:"[",sharp:"]"}],QWERTY_ROW:[{natural:"q",flat:"1",sharp:"2"},{natural:"w",flat:"2",sharp:"3"},{natural:"e",flat:"3",sharp:"4"},{natural:"r",flat:"4",sharp:"5"},{natural:"t",flat:"5",sharp:"6"},{natural:"y",flat:"6",sharp:"7"},{natural:"u",flat:"7",sharp:"8"},{natural:"i",flat:"8",sharp:"9"},{natural:"o",flat:"9",sharp:"0"},{natural:"p",flat:"0",sharp:"-"},{natural:"[",flat:"-",sharp:"="}]};const xm=e=>{let n;const r=new Set,s=(p,m)=>{const g=typeof p=="function"?p(n):p;if(!Object.is(g,n)){const x=n;n=m??(typeof g!="object"||g===null)?g:Object.assign({},n,g),r.forEach(b=>b(n,x))}},i=()=>n,d={setState:s,getState:i,getInitialState:()=>h,subscribe:p=>(r.add(p),()=>r.delete(p))},h=n=e(s,i,d);return d},l1=e=>e?xm(e):xm,c1=e=>e;function u1(e,n=c1){const r=ve.useSyncExternalStore(e.subscribe,ve.useCallback(()=>n(e.getState()),[e,n]),ve.useCallback(()=>n(e.getInitialState()),[e,n]));return ve.useDebugValue(r),r}const ym=e=>{const n=l1(e),r=s=>u1(n,s);return Object.assign(r,n),r},gi=e=>e?ym(e):ym;class bm extends Error{constructor(n,r,s){super(s),this.name="ApiError",this.url=r.url,this.status=r.status,this.statusText=r.statusText,this.body=r.body,this.request=n}}class d1 extends Error{constructor(n){super(n),this.name="CancelError"}get isCancelled(){return!0}}class f1{#t;#n;#e;#r;#s;#i;#o;constructor(n){this.#t=!1,this.#n=!1,this.#e=!1,this.#r=[],this.#s=new Promise((r,s)=>{this.#i=r,this.#o=s;const i=d=>{this.#t||this.#n||this.#e||(this.#t=!0,this.#i&&this.#i(d))},a=d=>{this.#t||this.#n||this.#e||(this.#n=!0,this.#o&&this.#o(d))},c=d=>{this.#t||this.#n||this.#e||this.#r.push(d)};return Object.defineProperty(c,"isResolved",{get:()=>this.#t}),Object.defineProperty(c,"isRejected",{get:()=>this.#n}),Object.defineProperty(c,"isCancelled",{get:()=>this.#e}),n(i,a,c)})}get[Symbol.toStringTag](){return"Cancellable Promise"}then(n,r){return this.#s.then(n,r)}catch(n){return this.#s.catch(n)}finally(n){return this.#s.finally(n)}cancel(){if(!(this.#t||this.#n||this.#e)){if(this.#e=!0,this.#r.length)try{for(const n of this.#r)n()}catch(n){console.warn("Cancellation threw an error",n);return}this.#r.length=0,this.#o&&this.#o(new d1("Request aborted"))}}get isCancelled(){return this.#e}}const Ud={BASE:"http://localhost:8080",VERSION:"0",WITH_CREDENTIALS:!1,CREDENTIALS:"include",TOKEN:void 0,USERNAME:void 0,PASSWORD:void 0,HEADERS:void 0,ENCODE_PATH:void 0},Vd=e=>e!=null,vi=e=>typeof e=="string",du=e=>vi(e)&&e!=="",zd=e=>typeof e=="object"&&typeof e.type=="string"&&typeof e.stream=="function"&&typeof e.arrayBuffer=="function"&&typeof e.constructor=="function"&&typeof e.constructor.name=="string"&&/^(Blob|File)$/.test(e.constructor.name)&&/^(Blob|File)$/.test(e[Symbol.toStringTag]),M0=e=>e instanceof FormData,h1=e=>{try{return btoa(e)}catch{return Buffer.from(e).toString("base64")}},p1=e=>{const n=[],r=(i,a)=>{n.push(`${encodeURIComponent(i)}=${encodeURIComponent(String(a))}`)},s=(i,a)=>{Vd(a)&&(Array.isArray(a)?a.forEach(c=>{s(i,c)}):typeof a=="object"?Object.entries(a).forEach(([c,d])=>{s(`${i}[${c}]`,d)}):r(i,a))};return Object.entries(e).forEach(([i,a])=>{s(i,a)}),n.length>0?`?${n.join("&")}`:""},m1=(e,n)=>{const r=encodeURI,s=n.url.replace("{api-version}",e.VERSION).replace(/{(.*?)}/g,(a,c)=>n.path?.hasOwnProperty(c)?r(String(n.path[c])):a),i=`${e.BASE}${s}`;return n.query?`${i}${p1(n.query)}`:i},g1=e=>{if(e.formData){const n=new FormData,r=(s,i)=>{vi(i)||zd(i)?n.append(s,i):n.append(s,JSON.stringify(i))};return Object.entries(e.formData).filter(([s,i])=>Vd(i)).forEach(([s,i])=>{Array.isArray(i)?i.forEach(a=>r(s,a)):r(s,i)}),n}},Ia=async(e,n)=>n,v1=async(e,n)=>{const[r,s,i,a]=await Promise.all([Ia(n,e.TOKEN),Ia(n,e.USERNAME),Ia(n,e.PASSWORD),Ia(n,e.HEADERS)]),c=Object.entries({Accept:"application/json",...a,...n.headers}).filter(([d,h])=>Vd(h)).reduce((d,[h,p])=>({...d,[h]:String(p)}),{});if(du(r)&&(c.Authorization=`Bearer ${r}`),du(s)&&du(i)){const d=h1(`${s}:${i}`);c.Authorization=`Basic ${d}`}return n.body&&(n.mediaType?c["Content-Type"]=n.mediaType:zd(n.body)?c["Content-Type"]=n.body.type||"application/octet-stream":vi(n.body)?c["Content-Type"]="text/plain":M0(n.body)||(c["Content-Type"]="application/json")),new Headers(c)},x1=e=>{if(e.body!==void 0)return e.mediaType?.includes("/json")?JSON.stringify(e.body):vi(e.body)||zd(e.body)||M0(e.body)?e.body:JSON.stringify(e.body)},y1=async(e,n,r,s,i,a,c)=>{const d=new AbortController,h={headers:a,body:s??i,method:n.method,signal:d.signal};return c(()=>d.abort()),await fetch(r,h)},b1=(e,n)=>{if(n){const r=e.headers.get(n);if(vi(r))return r}},w1=async e=>{if(e.status!==204)try{const n=e.headers.get("Content-Type");if(n)return["application/json","application/problem+json"].some(i=>n.toLowerCase().startsWith(i))?await e.json():await e.text()}catch(n){console.error(n)}},N1=(e,n)=>{const s={400:"Bad Request",401:"Unauthorized",403:"Forbidden",404:"Not Found",500:"Internal Server Error",502:"Bad Gateway",503:"Service Unavailable",...e.errors}[n.status];if(s)throw new bm(e,n,s);if(!n.ok){const i=n.status??"unknown",a=n.statusText??"unknown",c=(()=>{try{return JSON.stringify(n.body,null,2)}catch{return}})();throw new bm(e,n,`Generic Error: status: ${i}; status text: ${a}; body: ${c}`)}},Wd=(e,n)=>new f1(async(r,s,i)=>{try{const a=m1(e,n),c=g1(n),d=x1(n),h=await v1(e,n);if(!i.isCancelled){const p=await y1(e,n,a,d,c,h,i),m=await w1(p),g=b1(p,n.responseHeader),x={url:a,ok:p.ok,status:p.status,statusText:p.statusText,body:g??m};N1(n,x),r(x.body)}}catch(a){s(a)}});class wm{static getModeKeyChords(n,r){return Wd(Ud,{method:"GET",url:"/api/chords",query:{key:n,mode:r}})}}class fu{static getModes(){return Wd(Ud,{method:"GET",url:"/api/modes"})}}class C1{static getScaleNotes(n,r){return Wd(Ud,{method:"GET",url:"/api/scales",query:{key:n,mode:r}})}}class S1{constructor(){this.chordTypes={"":[0,4,7],m:[0,3,7],aug:[0,4,8],dim:[0,3,6],5:[0,7],b5:[0,4,6],6:[0,4,7,9],m6:[0,3,7,9],7:[0,4,7,10],m7:[0,3,7,10],maj7:[0,4,7,11],dim7:[0,3,6,9],aug7:[0,4,8,10],m7b5:[0,3,6,10],"maj7#5":[0,4,8,11],maj7b5:[0,4,6,11],"m7#5":[0,3,8,10],m7b9:[0,3,7,10,13],9:[0,4,7,10,14],m9:[0,3,7,10,14],maj9:[0,4,7,11,14],"maj9#11":[0,4,7,11,14,18],"7b9":[0,4,7,10,13],"7#9":[0,4,7,10,15],"9#5":[0,4,8,10,14],"9b5":[0,4,6,10,14],11:[0,4,7,10,14,17],m11:[0,3,7,10,14,17],maj11:[0,4,7,11,14,17],"7#11":[0,4,7,10,18],"maj7#11":[0,4,7,11,18],"m7#11":[0,3,7,10,18],"11b9":[0,4,7,10,13,14,17],13:[0,4,7,10,14,17,21],m13:[0,3,7,10,14,17,21],maj13:[0,4,7,11,14,17,21],"13#11":[0,4,7,10,14,18,21],"maj13#11":[0,4,7,11,14,18,21],sus2:[0,2,7],sus4:[0,5,7],sus2sus4:[0,2,5,7],"7sus2":[0,2,7,10],"7sus4":[0,5,7,10],"9sus4":[0,5,7,10,14],"add(2)":[0,2,4,7],"add(4)":[0,4,5,7],"add(9)":[0,4,7,14],"add(2) add(4)":[0,2,4,5,7],"m add(2)":[0,2,3,7],"m add(4)":[0,3,5,7],"m add(9)":[0,3,7,14],"m add(2) add(4)":[0,2,3,5,7],"7 add(4)":[0,4,5,7,10],"m7 add(4)":[0,3,5,7,10],"6/9":[0,4,7,9,14],"m6/9":[0,3,7,9,14],"maj6/7":[0,4,7,9,11],"7/6":[0,4,7,9,10],"m7/6":[0,3,7,9,10],"m/Maj7":[0,3,7,11],"m/Maj9":[0,3,7,11,14],"m/Maj11":[0,3,7,11,14,17],"m/Maj13":[0,3,7,11,14,17,21],"7b5":[0,4,6,10],"7#5":[0,4,8,10],"7b5b9":[0,4,6,10,13],"7b5#9":[0,4,6,10,15],"7#5b9":[0,4,8,10,13],"7#5#9":[0,4,8,10,15],"7aug5":[0,4,8,10],maj7sus2:[0,2,7,11],maj7sus4:[0,5,7,11],"6sus2":[0,2,7,9],"6sus4":[0,5,7,9],"9sus2":[0,2,7,10,14],"13sus4":[0,5,7,10,14,21],"7b13":[0,4,7,10,20],"7#9#11":[0,4,7,10,15,18],"7b9#11":[0,4,7,10,13,18],"7b9b13":[0,4,7,10,13,20],"7#9b13":[0,4,7,10,15,20],"7alt":[0,4,6,8,10,13,15],madd9:[0,3,7,14],"6add9":[0,4,7,9,14],"7no5":[0,4,10],"9no5":[0,4,10,14],maj7no5:[0,4,11],m7no5:[0,3,10],m9no5:[0,3,10,14],dim9:[0,3,6,9,14],dim11:[0,3,6,9,14,17],dimMaj7:[0,3,6,11],augMaj7:[0,4,8,11],aug9:[0,4,8,10,14],sus4add9:[0,5,7,14],"4th":[0,5,10],"4ths":[0,5,10,15],maj9no5:[0,4,11,14],"11no5":[0,4,10,14,17],maj6add4:[0,4,5,7,9],"7b9#5":[0,4,8,10,13]},this.chromaticNotes=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],this.chromaticNotesFlat=["C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B"]}noteNameToNumber(n){if(!n||n.length===0)return 0;const r=n.charAt(0).toUpperCase(),s=n.slice(1);let a={C:0,D:2,E:4,F:5,G:7,A:9,B:11}[r];if(a===void 0)return 0;const c=(s.match(/#/g)||[]).length,d=(s.match(/b/g)||[]).length;return a+=c,a-=d,a}getChromaticNoteName(n,r){const s=(n%12+12)%12;return r.includes("b")?this.chromaticNotesFlat[s]:this.chromaticNotes[s]}findBestNoteName(n,r,s,i,a){const c=(n%12+12)%12,d=r.find(h=>(this.noteNameToNumber(h.noteName)%12+12)%12===c);return d?d.noteName:this.getChromaticNoteName(c,s)}async generateChordsForScale(n,r,s=!1){try{const i=await Qn.getScaleNotes(n,r),c=(await Qn.getModes()).find(p=>p.name===r);if(!c)throw new Error(`Mode "${r}" not found`);const d=i.map(p=>(this.noteNameToNumber(p.noteName)%12+12)%12),h=[];return i.forEach(p=>{const m=this.noteNameToNumber(p.noteName);Object.entries(this.chordTypes).forEach(([g,x])=>{const b=[],S=[];let E=!0;x.forEach(N=>{const j=m+N,P=(j%12+12)%12;d.includes(P)||(E=!1);const I=this.findBestNoteName(j,i,n,p.noteName,N);b.push(j),S.push(I)}),(E||s)&&h.push({keyName:n,modeId:c.id,chordNote:m,chordNoteName:p.noteName,chordName:`${p.noteName}${g}`,chordNotes:b.join(", "),chordNoteNames:S.join(", ")})})}),h}catch(i){throw console.error("Error generating chords for scale:",i),i}}async generateChord(n,r,s,i){try{const a=this.chordTypes[r];if(!a)throw new Error(`Unknown chord type: ${r}`);const c=await Qn.getScaleNotes(s,i),h=(await Qn.getModes()).find(x=>x.name===i);if(!h)throw new Error(`Mode "${i}" not found`);const p=this.noteNameToNumber(n),m=[],g=[];return a.forEach(x=>{const b=p+x,S=this.findBestNoteName(b,c,s,n,x);m.push(b),g.push(S)}),{keyName:s,modeId:h.id,chordNote:p,chordNoteName:n,chordName:`${n}${r}`,chordNotes:m.join(", "),chordNoteNames:g.join(", ")}}catch(a){return console.error("Error generating chord:",a),null}}async getCompatibleChords(n,r){return this.generateChordsForScale(n,r,!1)}async getAllPossibleChords(n,r){return this.generateChordsForScale(n,r,!0)}getChordTypes(){return Object.keys(this.chordTypes)}addChordType(n,r){this.chordTypes[n]=r}}const Xn=new S1;class E1{constructor(){this.baseUrl="/data",this.indexCache=null,this.modesCache=null,this.scalesCache=new Map,this.distinctChordsCache=null,this.useDynamicChords=!0}normalizeKey(n){const r=n.trim();return r.length===0?"":r.charAt(0).toUpperCase()+r.slice(1).toLowerCase()}setUseDynamicChords(n){this.useDynamicChords=n,this.distinctChordsCache=null}async loadIndex(){if(this.indexCache)return this.indexCache;try{const n=await fetch(`${this.baseUrl}/index.json`);if(!n.ok)throw new Error(`Failed to load index: ${n.statusText}`);return this.indexCache=await n.json(),this.indexCache}catch(n){throw console.error("Error loading static data index:",n),new Error("Failed to load static data. Please ensure the data generation completed successfully.")}}async getModes(){if(this.modesCache)return this.modesCache;try{const n=await fetch(`${this.baseUrl}/modes.json`);if(!n.ok)throw new Error(`Failed to load modes: ${n.statusText}`);return this.modesCache=await n.json(),this.modesCache}catch(n){throw n}}async getModeKeyChords(n,r,s=!1){const i=this.normalizeKey(n);if(this.useDynamicChords)try{return(await Xn.generateChordsForScale(i,r,s)).map(c=>({keyName:c.keyName,modeId:c.modeId,chordNote:c.chordNote,chordNoteName:c.chordNoteName,chordName:c.chordName,chordNotes:c.chordNotes,chordNoteNames:c.chordNoteNames}))}catch(a){console.warn("Dynamic chord generation failed, falling back to static data:",a)}try{const c=(await this.loadIndex()).modes.find(g=>g.name===r);if(!c||!c.id)throw new Error(`Mode "${r}" not found`);const d=c.id.toString(),h=await fetch(`${this.baseUrl}/chords-mode-${d}.json`);if(!h.ok)throw new Error(`Failed to load chords for mode ${r}: ${h.statusText}`);return(await h.json()).filter(g=>g.keyName===i)}catch(a){throw console.error("Error loading chords from static data:",a),a}}async getCompatibleChords(n,r){if(this.useDynamicChords)try{const c=this.normalizeKey(n);return(await Xn.getCompatibleChords(c,r)).map(h=>({keyName:h.keyName,modeId:h.modeId,chordNote:h.chordNote,chordNoteName:h.chordNoteName,chordName:h.chordName,chordNotes:h.chordNotes,chordNoteNames:h.chordNoteNames}))}catch(c){console.warn("Dynamic compatible chord generation failed:",c)}const s=await this.getModeKeyChords(n,r),a=(await this.getScaleNotes(n,r)).map(c=>(({C:0,"C#":1,Db:1,D:2,"D#":3,Eb:3,E:4,"E#":5,Fb:4,F:5,"F#":6,Gb:6,G:7,"G#":8,Ab:8,A:9,"A#":10,Bb:10,B:11,"B#":0,Cb:11}[c.noteName]??0)%12+12)%12);return s.filter(c=>c.chordNotes?c.chordNotes.split(", ").map(h=>(parseInt(h.trim())%12+12)%12).every(h=>a.includes(h)):!1)}async generateSpecificChord(n,r,s,i){if(!this.useDynamicChords)throw new Error("Dynamic chord generation is disabled");try{const a=this.normalizeKey(s),c=await Xn.generateChord(n,r,a,i);return c?{keyName:c.keyName,modeId:c.modeId,chordNote:c.chordNote,chordNoteName:c.chordNoteName,chordName:c.chordName,chordNotes:c.chordNotes,chordNoteNames:c.chordNoteNames}:null}catch(a){return console.error("Error generating specific chord:",a),null}}getAvailableChordTypes(){return Xn.getChordTypes()}async getScaleNotes(n,r){try{const s=this.normalizeKey(n),a=(await this.loadIndex()).modes.find(p=>p.name===r);if(!a||!a.id)throw new Error(`Mode "${r}" not found`);const c=a.id.toString();if(this.scalesCache.has(c))return this.scalesCache.get(c)[s]||[];const d=await fetch(`${this.baseUrl}/scales-mode-${c}.json`);if(!d.ok)throw new Error(`Failed to load scales for mode ${r}: ${d.statusText}`);const h=await d.json();return this.scalesCache.set(c,h),h[s]||[]}catch(s){throw console.error("Error loading scale notes from static data:",s),s}}async getAllDistinctChords(){if(this.distinctChordsCache)return this.distinctChordsCache;if(this.useDynamicChords)try{const n=await this.getModes(),r=["C","D","E","F","G","A","B","C#","F#","Bb","Eb","Ab","Db"],s=[];for(const i of n)for(const a of r)try{const c=await Xn.generateChordsForScale(a,i.name,!0);s.push(...c.map(d=>({keyName:d.keyName,modeId:d.modeId,chordNote:d.chordNote,chordNoteName:d.chordNoteName,chordName:d.chordName,chordNotes:d.chordNotes,chordNoteNames:d.chordNoteNames})))}catch(c){console.warn(`Error generating chords for ${a} ${i.name}:`,c)}return this.distinctChordsCache=this.deduplicateChords(s),this.distinctChordsCache}catch(n){console.warn("Dynamic distinct chord generation failed, falling back to static data:",n)}try{const n=await this.loadIndex(),r=[];for(const s of n.modes){if(!s.id)continue;const i=s.id.toString();try{const a=await fetch(`${this.baseUrl}/chords-mode-${i}.json`);if(!a.ok){console.warn(`Failed to load chords for mode ${s.name} (ID: ${i}): ${a.statusText}`);continue}const c=await a.json();r.push(...c)}catch(a){console.warn(`Error loading chords for mode ${s.name}:`,a)}}return this.distinctChordsCache=this.deduplicateChords(r),this.distinctChordsCache}catch(n){throw console.error("Error loading all distinct chords from static data:",n),n}}deduplicateChords(n){const r=new Map;for(const s of n){let i;const a=s.chordNotes.split(",").map(c=>c.trim()).filter(c=>c.length>0).sort();i=s.chordName+a.join(","),i&&!r.has(i)&&r.set(i,s)}return Array.from(r.values())}async getMetadata(){if(this.useDynamicChords){const r=await this.getModes();return{generatedAt:new Date().toISOString(),modesCount:r.length,usingDynamicChords:!0}}const n=await this.loadIndex();return{generatedAt:n.generated_at,modesCount:n.modes.length,usingDynamicChords:!1}}clearCache(){this.indexCache=null,this.modesCache=null,this.scalesCache.clear(),this.distinctChordsCache=null}}const Qn=new E1,D1={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_BASE_URL:"http://localhost:8080",VITE_USE_STATIC_DATA:"true"};function A1(){try{return D1||{}}catch{return console.warn("Failed to access import.meta.env, using fallbacks"),{}}}const j1=A1();function Nm(e,n=""){const r=j1[e];return typeof r=="string"?r:n}class I1{constructor(){const n=Nm("VITE_USE_STATIC_DATA","true");console.log("Initializing DataService with environment:",{useStaticData:n}),this.config={useStaticData:n.toLowerCase()!=="false",apiBaseUrl:Nm("VITE_API_BASE_URL","http://localhost:8080")},console.log("DataService initialized with config:",this.config)}async getModes(){return this.config.useStaticData?Qn.getModes():fu.getModes()}async getModeKeyChords(n,r){return this.config.useStaticData?Qn.getModeKeyChords(n,r):wm.getModeKeyChords(n,r)}async getScaleNotes(n,r){return this.config.useStaticData?Qn.getScaleNotes(n,r):C1.getScaleNotes(n,r)}async getAllDistinctChords(){if(this.config.useStaticData)return console.log("Loading all distinct chords from static data"),Qn.getAllDistinctChords();{console.log("Loading all distinct chords from API");const n=await fu.getModes(),r=ti,s=[];for(const i of n)for(const a of r)try{const c=await wm.getModeKeyChords(a,i.name);s.push(...c)}catch(c){console.warn(`Failed to load chords for ${i.name} in ${a}:`,c)}return this.deduplicateChords(s)}}deduplicateChords(n){const r=new Map;for(const s of n){let i;if(s.chordName&&s.chordName.trim()!=="")i=s.chordName.trim();else if(s.chordNoteNames&&s.chordNoteNames.trim()!=="")i=s.chordNoteNames.trim();else if(s.chordTypeId!==void 0&&s.chordNoteName)i=`${s.chordNoteName}_type_${s.chordTypeId}`;else if(s.chordNotes&&s.chordNotes.trim()!=="")i=s.chordNotes.trim();else{const a=[];s.chordNote!==void 0&&a.push(`note_${s.chordNote}`),s.chordTypeId!==void 0&&a.push(`type_${s.chordTypeId}`),s.chordNoteName&&a.push(s.chordNoteName),i=a.length>0?a.join("_"):JSON.stringify(s)}r.has(i)||r.set(i,s)}return Array.from(r.values())}getConfig(){return{...this.config}}updateConfig(n){this.config={...this.config,...n},console.log("DataService configuration updated:",this.config),n.useStaticData!==void 0&&Qn.clearCache()}async getDataSourceInfo(){if(this.config.useStaticData)try{return{source:"static",metadata:await Qn.getMetadata()}}catch{return{source:"static",metadata:{error:"Failed to load metadata"}}}else return{source:"api",metadata:{baseUrl:this.config.apiBaseUrl}}}async testConnection(){const n=Date.now();try{return this.config.useStaticData?await Qn.getModes():await fu.getModes(),{success:!0,responseTime:Date.now()-n}}catch(r){return{success:!1,error:r instanceof Error?r.message:"Unknown error",responseTime:Date.now()-n}}}}const Jr=new I1,k1={"C##":"D","D##":"E","E#":"F","F##":"G","G##":"A","A##":"B","B#":"C",Cb:"B",Db:"C#",Eb:"D#",Fb:"E",Gb:"F#",Ab:"G#",Bb:"A#",Dbb:"C",Ebb:"D",Fbb:"E",Gbb:"F",Abb:"G",Bbb:"A",Cbb:"B"},Zr=e=>{if(e)return k1[e]||e},P1=e=>{if(!e||e.length===0)return"C";const n=e.charAt(0).toUpperCase(),r=e.slice(1);let i={C:0,D:2,E:4,F:5,G:7,A:9,B:11}[n];if(i===void 0)return"C";const a=(r.match(/#/g)||[]).length,c=(r.match(/b/g)||[]).length;return i+=a-c,i=(i%12+12)%12,["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"][i]},hu=new Map,ka=(e,n)=>{const r=`${e}-${n}`;if(hu.has(r))return hu.get(r);const s=hn.fromNote(`${P1(e)}${n}`);return hu.set(r,s),s},ct=gi((e,n)=>({chords:void 0,scaleNotes:[],key:"C",mode:"Ionian",modes:[],loadingChords:!1,normalizedScaleNotes:[],allDistinctChords:void 0,loadingAllChords:!1,showAllChords:!1,setKey:r=>{e({key:r}),n().fetchMusicData(r,n().mode)},setMode:r=>{e({mode:r}),n().fetchMusicData(n().key,r)},setModes:r=>{e({modes:r});const{key:s,mode:i,chords:a}=n();!a&&s&&i&&n().fetchMusicData(s,i)},setKeyAndMode:(r,s)=>{e({key:r,mode:s}),n().fetchMusicData(r,s)},fetchMusicData:async(r,s)=>{if(!(!r||!s)){e({loadingChords:!0});try{const[i,a]=await Promise.all([Jr.getModeKeyChords(r,s),Jr.getScaleNotes(r,s)]),c=a.map(d=>d.noteName?Zr(d.noteName):null).filter(Boolean);e({chords:i,scaleNotes:a,normalizedScaleNotes:c,loadingChords:!1})}catch(i){console.error("Error fetching music data:",i),e({loadingChords:!1})}}},initialize:async()=>{const{key:r,mode:s}=n();await n().fetchMusicData(r,s)},fetchAllDistinctChords:async()=>{const{allDistinctChords:r}=n();if(!r){e({loadingAllChords:!0});try{const s=await Jr.getAllDistinctChords();e({allDistinctChords:s,loadingAllChords:!1})}catch(s){console.error("Error fetching all distinct chords:",s),e({loadingAllChords:!1})}}},toggleShowAllChords:()=>{const{showAllChords:r,allDistinctChords:s}=n(),i=!r;e({showAllChords:i}),i&&!s&&n().fetchAllDistinctChords()},setShowAllChords:r=>{e({showAllChords:r}),r&&!n().allDistinctChords&&n().fetchAllDistinctChords()}})),T1=["electric_piano_1","acoustic_grand_piano","bright_acoustic_piano","electric_grand_piano","honkytonk_piano","electric_piano_2","harpsichord","clavinet"],R1=()=>({instrumentName:"electric_piano_1",cutOffPreviousNotes:!0,eq:{bass:0,mid:0,treble:0},octaveOffset:0,reverbLevel:0,noteDuration:.8,volume:.8,chorusLevel:0,delayLevel:0,distortionLevel:0,bitcrusherLevel:0,phaserLevel:0,flangerLevel:0,ringModLevel:0,autoFilterLevel:0,tremoloLevel:0,stereoWidthLevel:0,compressorLevel:0}),Ye=gi((e,n)=>({pianoSettings:R1(),availableInstruments:T1,updatePianoSettings:r=>e(s=>({pianoSettings:{...s.pianoSettings,...r}})),setPianoInstrument:r=>n().updatePianoSettings({instrumentName:r}),setCutOffPreviousNotes:r=>n().updatePianoSettings({cutOffPreviousNotes:r}),setEq:r=>n().updatePianoSettings({eq:r}),setOctaveOffset:r=>n().updatePianoSettings({octaveOffset:r}),setReverbLevel:r=>n().updatePianoSettings({reverbLevel:r}),setNoteDuration:r=>n().updatePianoSettings({noteDuration:r}),setVolume:r=>n().updatePianoSettings({volume:r}),setChorusLevel:r=>n().updatePianoSettings({chorusLevel:r}),setDelayLevel:r=>n().updatePianoSettings({delayLevel:r}),setDistortionLevel:r=>n().updatePianoSettings({distortionLevel:r}),setBitcrusherLevel:r=>n().updatePianoSettings({bitcrusherLevel:r}),setPhaserLevel:r=>n().updatePianoSettings({phaserLevel:r}),setFlangerLevel:r=>n().updatePianoSettings({flangerLevel:r}),setRingModLevel:r=>n().updatePianoSettings({ringModLevel:r}),setAutoFilterLevel:r=>n().updatePianoSettings({autoFilterLevel:r}),setTremoloLevel:r=>n().updatePianoSettings({tremoloLevel:r}),setStereoWidthLevel:r=>n().updatePianoSettings({stereoWidthLevel:r}),setCompressorLevel:r=>n().updatePianoSettings({compressorLevel:r}),setAvailableInstruments:r=>e({availableInstruments:r})})),Ga=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],O0=(e,n)=>{const r={Db:"C#",Eb:"D#",Gb:"F#",Ab:"G#",Bb:"A#"},s=r[e]||e,i=r[n]||n,a=Ga.indexOf(s),c=Ga.indexOf(i);if(a===-1||c===-1)return 0;let d=c-a;return d>6&&(d-=12),d<-5&&(d+=12),d},_0=(e,n)=>{const r={Db:"C#",Eb:"D#",Gb:"F#",Ab:"G#",Bb:"A#"};let s=e;r[e]&&(s=r[e]);const i=Ga.indexOf(s);if(i===-1)return e;const a=(i+n+12)%12;return Ga[a]},pd=(e,n)=>{let r="",s="";return e.length>=2&&(e[1]==="#"||e[1]==="b")?(r=e.substring(0,2),s=e.substring(2)):e.length>=1&&(r=e[0],s=e.substring(1)),_0(r,n)+s},Ua=(e,n)=>{const r=e.includes(",")?",":" ";return e.split(r).map(s=>s.trim()).filter(s=>s.length>0).map(s=>_0(s,n)).join(", ")},Oe=gi((e,n)=>({activeNotes:[],activeChordIndex:null,highlightedChordIndex:null,addedChords:[],temporaryChord:null,isPlayingScale:!1,scalePlaybackTimeouts:[],setActiveNotes:r=>e({activeNotes:r}),setAddedChords:r=>e({addedChords:r}),setActiveChordIndex:r=>e({activeChordIndex:r}),setHighlightedChordIndex:r=>e({highlightedChordIndex:r}),setTemporaryChord:r=>e({temporaryChord:r}),setIsPlayingScale:r=>e({isPlayingScale:r}),addChord:(r,s,i,a,c)=>e(d=>({addedChords:[...d.addedChords,{name:r,notes:s,pattern:[...i],originalKey:a,originalMode:c,originalNotes:s}]})),updateChord:(r,s)=>e(i=>{const a=[...i.addedChords];return a[r]={...s},{addedChords:a}}),removeChord:r=>e(s=>{const i=s.addedChords.filter((c,d)=>d!==r);let a=s.activeChordIndex;return s.activeChordIndex===r?a=null:s.activeChordIndex!==null&&s.activeChordIndex>r&&(a=s.activeChordIndex-1),{addedChords:i,activeChordIndex:a}}),clearAllChords:()=>e({addedChords:[],activeChordIndex:null,temporaryChord:null}),updateChordPattern:(r,s)=>e(i=>{const a=[...i.addedChords];return a[r]={...a[r],pattern:[...s]},{addedChords:a}}),playNotes:r=>{e({activeNotes:[]}),setTimeout(()=>e({activeNotes:r}),10)},handleFetchOriginalChord:async(r,s,i)=>{try{return(await Jr.getModeKeyChords(s,i)).find(d=>d.chordName===r)?.chordNoteNames||null}catch(a){return console.error("Failed to fetch original chord:",a),null}},addScalePlaybackTimeout:r=>e(s=>({scalePlaybackTimeouts:[...s.scalePlaybackTimeouts,r]})),clearScalePlaybackTimeouts:()=>{const{scalePlaybackTimeouts:r}=n();r.forEach(clearTimeout),e({scalePlaybackTimeouts:[]})},transposeAddedChords:async(r,s,i)=>{const{addedChords:a,handleFetchOriginalChord:c}=n();console.log(`Transposing added chords from ${r} to ${s} (${i})`),console.log(a);const d=O0(r,s),h=await Promise.all(a.map(async p=>{const m=pd(p.name,d);console.log(`Transposing chord ${p.name} (${p.notes}) from ${r} to ${s}: ${m}`);const g=await c(m,s,i);if(g)return{...p,name:m,notes:g,originalKey:s,originalMode:i,originalNotes:g};{const x=Ua(p.notes,d),b=p.originalNotes?Ua(p.originalNotes,d):x;return{...p,name:m,notes:x,originalNotes:b}}}));e({addedChords:h})}})),yt=gi((e,n)=>({globalPatternState:{currentPattern:["1","2","3","4"],isPlaying:!1,bpm:120,subdivision:.25,swing:0,currentStep:0,repeat:!0,lastChordChangeTime:0,globalClockStartTime:0},currentlyActivePattern:["1","2","3","4"],setGlobalPatternState:r=>e(s=>({globalPatternState:{...s.globalPatternState,...r}})),setCurrentlyActivePattern:r=>e({currentlyActivePattern:r}),togglePlayback:()=>{const{globalPatternState:r}=n(),s=!r.isPlaying;e(i=>({globalPatternState:{...i.globalPatternState,isPlaying:s}}))},updatePattern:r=>{e(s=>({globalPatternState:{...s.globalPatternState,...r}}))}})),Cr=gi(e=>({isDeleteMode:!1,isLiveMode:!1,showPatternSystem:!1,setIsDeleteMode:n=>e({isDeleteMode:n}),setIsLiveMode:n=>e({isLiveMode:n}),setShowPatternSystem:n=>e({showPatternSystem:n}),toggleDeleteMode:()=>e(n=>({isDeleteMode:!n.isDeleteMode})),toggleLiveMode:()=>e(n=>({isLiveMode:!n.isLiveMode})),togglePatternSystem:()=>e(n=>({showPatternSystem:!n.showPatternSystem}))}));function M1(){const[e,n]=w.useState(),[r,s]=w.useState(null);return w.useEffect(()=>{(async()=>{try{const a=await Jr.getModes();n(a.map(c=>c.name))}catch(a){s(a),console.error("Error fetching modes:",a)}})()},[]),{modes:e,error:r}}const Cm=["C","D","E","F","G","A","B"],Va=(e,n,r)=>{const s=r.split(", ");let i=Cm.indexOf(Zr(s[0])[0]),a=e;return s.map((c,d)=>{const h=Zr(c),p=Cm.indexOf(h[0]);return p<i&&d>0&&a++,a>n&&(a=n),i=p,{note:h,octave:a}})},ll="v9",Le={BPM_MIN:60,BPM_MAX:200,SWING_MAX:50,EQ_OFFSET:24,OCTAVE_OFFSET:3,PATTERN_MAX_LENGTH:16,EFFECT_SCALE:35},fn={INSTRUMENT_INDEX:0,CUT_OFF:!0,EQ:{bass:0,mid:0,treble:0},OCTAVE_OFFSET:0,NOTE_DURATION:.8,VOLUME:.8,BPM:120,SUBDIVISION:.25,SWING:0},L0=[{key:"reverbLevel",default:0},{key:"chorusLevel",default:0},{key:"delayLevel",default:0},{key:"distortionLevel",default:0},{key:"bitcrusherLevel",default:0},{key:"phaserLevel",default:0},{key:"flangerLevel",default:0},{key:"ringModLevel",default:0},{key:"autoFilterLevel",default:0},{key:"tremoloLevel",default:0},{key:"stereoWidthLevel",default:0},{key:"compressorLevel",default:0}],O1={.125:"0",.25:"1",.5:"2",1:"3",2:"4"},_1={0:.125,1:.25,2:.5,3:1,4:2},Sm={C:"0",D:"1",E:"2",F:"3",G:"4",A:"5",B:"6"},L1={0:"C",1:"D",2:"E",3:"F",4:"G",5:"A",6:"B"},F1={C:0,"C#":1,Db:1,D:2,"D#":3,Eb:3,E:4,Fb:4,"E#":5,F:5,"F#":6,Gb:6,G:7,"G#":8,Ab:8,A:9,"A#":10,Bb:10,B:11,Cb:11,"B#":0,"C##":2,Cbb:10,"D##":4,Dbb:0,"E##":6,Ebb:2,"F##":7,Fbb:3,"G##":9,Gbb:5,"A##":11,Abb:7,"B##":1,Bbb:9},B1=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],qt=e=>Math.max(0,Math.round(e)).toString(36),$e=e=>parseInt(e,36)||0,F0=e=>{const n=Object.keys(e).sort((a,c)=>a===""?-1:c===""?1:a.length!==c.length?a.length-c.length:a.localeCompare(c)),r={},s={},i=a=>{const c="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";if(a<62)return c[a];{const d=Math.floor((a-62)/36),h=(a-62)%36;return(d+1).toString()+c[h]}};return n.forEach((a,c)=>{const d=i(c);r[a]=d,s[d]=a}),{typeToCode:r,codeToType:s}},Em=e=>{let n=0;const r=e[n++];if(console.log("test"),!Sm[r])return console.warn("Unknown root note:",r,"in chord:",e),null;let s=Sm[r],i=0,a="";for(;n<e.length&&(e[n]==="#"||e[n]==="b");){if(!a)a=e[n];else if(e[n]!==a)return console.warn("Mixed accidentals in chord name:",e),null;i++,n++}return i===2&&a==="#"?s+="S":i===2&&a==="b"?s+="F":i===1&&a==="#"?s+="s":i===1&&a==="b"&&(s+="f"),{encodedNote:s,remaining:e.substring(n)}},Dm=e=>{let n=0;const r=e[n++],s=L1[r];if(!s)return console.warn("Unknown pitch code:",r),"";let i=s;if(n<e.length){const a=e[n];a==="S"?(i+="##",n++):a==="F"?(i+="bb",n++):a==="s"?(i+="#",n++):a==="f"&&(i+="b",n++)}return n!==e.length&&console.warn("Extra characters in encoded note:",e),i},$1=e=>{console.log("encoding notes:",e);const n=e.split(/[,\s]+/).map(s=>s.trim()).filter(Boolean),r=[];for(const s of n){const i=F1[s];if(i!==void 0)r.push(i.toString(36));else return console.warn("Unknown note name:",s),""}return r.join("-")},G1=e=>{if(!e)return"";const n=e.split("-"),r=[];for(const s of n){if(!s)continue;const i=parseInt(s,36);i>=0&&i<12?r.push(B1[i]):console.warn("Invalid note index:",s,"parsed as:",i)}return console.log("noteNames:",r),r.join(", ")},U1=(e,n)=>{let r,s=e;const i=e.lastIndexOf("/");if(i>0&&i<e.length-1){const m=e.substring(i+1);/^[A-G](?:##|#|bb|b)?$/.test(m)&&(s=e.substring(0,i),r=m)}const a=Em(s);if(!a)return"";const{encodedNote:c,remaining:d}=a,h=n[d];if(h===void 0)return console.warn("Unknown chord type:",d,"from chord:",s),"";let p=`${c}.${h}`;if(r){const m=Em(r);if(!m||m.remaining.length>0)return console.warn("Invalid bass note:",r),"";p+=`/${m.encodedNote}`}return p},V1=(e,n)=>{let r,s=e;const i=e.lastIndexOf("/");if(i>0&&i<e.length-1){const g=e.substring(i+1);g.length>=1&&g.length<=2&&(g.length===1||["S","F","s","f"].includes(g[1]))&&(s=e.substring(0,i),r=g)}const a=s.indexOf(".");if(a===-1)return console.warn("Invalid encoded chord (no delimiter):",s),"";const c=s.substring(0,a),d=s.substring(a+1),h=Dm(c),p=n[d];if(!h)return console.warn("Failed to decode main note:",c),"";if(p===void 0)return console.warn("Unknown chord code:",d,"from encoded:",s),h;let m=h+p;if(r){const g=Dm(r);g?m+=`/${g}`:console.warn("Failed to decode bass note:",r)}return m},z1=(e,n,r,s,i)=>{const a=Math.max(Le.BPM_MIN,Math.min(Le.BPM_MAX,e)),c=qt(a-Le.BPM_MIN),d=O1[n]||"1",h=Math.max(0,Math.min(Le.SWING_MAX,r)),p=qt(h),m=(s?2:0)+(i?1:0),g=qt(m);return`${c}-${d}-${p}-${g}`},W1=e=>{const n=e.split(/[-|]/),r=n[0]?$e(n[0])+Le.BPM_MIN:fn.BPM,s=n[1]&&_1[n[1]]||fn.SUBDIVISION,i=n[2]?$e(n[2]):fn.SWING,a=n[3]?$e(n[3]):0;return{bpm:r,subdivision:s,swing:i,showPattern:(a&2)!==0,liveMode:(a&1)!==0}},H1=(e,n)=>{const r=[],s=n.indexOf(e.instrumentName);r.push(qt(Math.max(0,s)));const i=e.cutOffPreviousNotes!==fn.CUT_OFF?e.cutOffPreviousNotes?"1":"0":"";r.push(i);const c=e.eq.bass!==0||e.eq.mid!==0||e.eq.treble!==0?qt(e.eq.bass+Le.EQ_OFFSET)+qt(e.eq.mid+Le.EQ_OFFSET)+qt(e.eq.treble+Le.EQ_OFFSET):"";r.push(c);const d=e.octaveOffset!==fn.OCTAVE_OFFSET?qt(e.octaveOffset+Le.OCTAVE_OFFSET):"";r.push(d);const h=Math.abs(e.noteDuration-fn.NOTE_DURATION)>.01?qt(Math.max(0,Math.round(e.noteDuration*10)-1)):"";r.push(h);const p=Math.abs(e.volume-fn.VOLUME)>.01?qt(Math.round(e.volume*Le.EFFECT_SCALE)):"";r.push(p);let m=0;const g=[];for(L0.forEach((x,b)=>{const S=e[x.key];S>.01&&(m|=1<<b,g.push(qt(Math.round(S*Le.EFFECT_SCALE))))}),m>0?(r.push(qt(m)),r.push(g.join(""))):(r.push(""),r.push(""));r.length>0&&r[r.length-1]==="";)r.pop();return r.join("-")},q1=(e,n,r)=>{const s={instrumentName:n[fn.INSTRUMENT_INDEX]||"electric_piano_1",cutOffPreviousNotes:fn.CUT_OFF,eq:{...fn.EQ},octaveOffset:fn.OCTAVE_OFFSET,reverbLevel:0,noteDuration:fn.NOTE_DURATION,volume:fn.VOLUME,chorusLevel:0,delayLevel:0,distortionLevel:0,bitcrusherLevel:0,phaserLevel:0,flangerLevel:0,ringModLevel:0,autoFilterLevel:0,tremoloLevel:0,stereoWidthLevel:0,compressorLevel:0},i=e.split(/[-|]/);if(i[0]&&(s.instrumentName=n[$e(i[0])]||n[0]||"electric_piano_1"),r===ll){if(i[1]&&(s.cutOffPreviousNotes=i[1]==="1"),i[2]&&i[2].length>=3&&(s.eq.bass=$e(i[2][0])-Le.EQ_OFFSET,s.eq.mid=$e(i[2][1])-Le.EQ_OFFSET,s.eq.treble=$e(i[2][2])-Le.EQ_OFFSET),i[3]&&(s.octaveOffset=$e(i[3])-Le.OCTAVE_OFFSET),i[4]&&(s.noteDuration=($e(i[4])+1)/10),i[5]&&(s.volume=$e(i[5])/Le.EFFECT_SCALE),i[6]){const a=$e(i[6]),c=i[7]||"";let d=0;L0.forEach((h,p)=>{if(a&1<<p&&d<c.length){const m=$e(c[d])/Le.EFFECT_SCALE;s[h.key]=m,d++}})}}else s.cutOffPreviousNotes=(i[1]||"1")==="1",s.eq.bass=$e(i[2]||"o")-Le.EQ_OFFSET,s.eq.mid=$e(i[3]||"o")-Le.EQ_OFFSET,s.eq.treble=$e(i[4]||"o")-Le.EQ_OFFSET,s.octaveOffset=$e(i[5]||"3")-Le.OCTAVE_OFFSET,s.reverbLevel=$e(i[6]||"0")/Le.EFFECT_SCALE,s.noteDuration=($e(i[7]||"7")+1)/10,s.volume=$e(i[8]||"p")/Le.EFFECT_SCALE,s.chorusLevel=$e(i[9]||"0")/Le.EFFECT_SCALE,s.delayLevel=$e(i[10]||"0")/Le.EFFECT_SCALE,r==="v8"&&(s.distortionLevel=$e(i[11]||"0")/Le.EFFECT_SCALE,s.bitcrusherLevel=$e(i[12]||"0")/Le.EFFECT_SCALE,s.phaserLevel=$e(i[13]||"0")/Le.EFFECT_SCALE,s.flangerLevel=$e(i[14]||"0")/Le.EFFECT_SCALE,s.ringModLevel=$e(i[15]||"0")/Le.EFFECT_SCALE,s.autoFilterLevel=$e(i[16]||"0")/Le.EFFECT_SCALE,s.tremoloLevel=$e(i[17]||"0")/Le.EFFECT_SCALE,s.stereoWidthLevel=$e(i[18]||"0")/Le.EFFECT_SCALE,s.compressorLevel=$e(i[19]||"0")/Le.EFFECT_SCALE);return s},Am=e=>e.map(n=>n.replace(/[xX]/gi,"0")).join(".");function K1(e){let n=e;const r=e.lastIndexOf("/");if(r>0){const i=e.substring(r+1);/^[A-G](?:##|#|bb|b)?$/.test(i)&&(n=e.substring(0,r))}const s=n.match(/^([A-G](?:##|bb|#|b)?)(.*)$/);if(!s)throw new Error(`Cannot parse chord name: ${e}`);return{rootNote:s[1],chordType:s[2]}}const Y1=(e,n,r,s,i,a,c,d,h,p,m,g,x,b,S)=>{if(!b?.length||!m.length||!g.length)return"";try{const{typeToCode:E}=F0(S),N=ll,j=m.indexOf(e),P=qt(Math.max(0,j)),I=g.indexOf(n),D=qt(Math.max(0,I)),k=s.slice(0,Le.PATTERN_MAX_LENGTH).map(q=>q.replace(/[xX]/gi,"0")).join("."),R=z1(i,a,c,d,h),O=H1(p,x),M=X1(r,s,m,g,E);return`${N}_${P}_${D}_${k}_${R}_${O}_${M}`}catch(E){return console.error("Failed to encode state:",E),""}},Q1=async(e,n,r,s,i,a)=>{if(console.log("Decoding state:",e),!e||!i?.length||!n.length||!r.length)return console.log("Cannot decode - missing data"),null;try{const c=e.split("_"),d=c[0];if(!["v7","v8","v9"].includes(d)||c.length<6)return console.log("Invalid state format - only v7/v8/v9 supported"),null;const{codeToType:h}=F0(a),p=$e(c[1]||"0"),m=n[p]||n[0],g=$e(c[2]||"0"),x=r[g]||r[0],S=(c[3]||"1.2.3.4").split(".").map(P=>P==="0"?"x":P),E=W1(c[4]||""),N=q1(c[5]||"",s,d),j=await J1(c[6]||"",S,m,x,n,r,d,h);return{key:m,mode:x,pattern:S,...E,addedChords:j,pianoSettings:N}}catch(c){return console.error("Failed to decode state:",c),null}};function X1(e,n,r,s,i){const a=Am(n);return e.map(d=>{const h=U1(d.name,i);if(!h)return console.warn("Failed to encode chord name:",d.name),"";const p=$1(d.notes);if(!p)return console.warn("Failed to encode notes:",d.notes),"";let m=`${h}n${p}`;if(d.originalKey&&d.originalMode){const x=r.indexOf(d.originalKey),b=s.indexOf(d.originalMode);x>=0&&b>=0&&(m+=`k${qt(x)}${qt(b)}`)}if(Am(d.pattern)!==a){const x=d.pattern.slice(0,Le.PATTERN_MAX_LENGTH).map(b=>b.replace(/[xX]/gi,"0")).join(".");return`${m}p${x}`}return m}).filter(Boolean).join(",")}async function J1(e,n,r,s,i,a,c,d){if(!e)return[];const h=[],p=e.split(/[,|]/).filter(Boolean);for(const m of p){const g=await Z1(m,n,r,s,i,a,c,d);g&&h.push(g)}return h}async function Z1(e,n,r,s,i,a,c,d){let h,p;if(e.includes("p")){const M=e.lastIndexOf("p"),q=e.indexOf("n");M>q&&q>=0?(h=e.substring(0,M),p=e.substring(M+1)):h=e}else e.includes(":")?[h,p]=e.split(":"):h=e;let m=h,g,x;const b=h.indexOf("k"),S=h.indexOf("@"),E=b>=0?b:S;if(E>=0){m=h.substring(0,E);const M=h.substring(E+1);if(M.length>=2){const q=$e(M[0]),J=$e(M[1]);g=i[q],x=a[J]}}let N,j;const P=m.indexOf("n"),I=m.indexOf("~");if(P>=0&&(I===-1||P<I))N=m.substring(0,P),j=m.substring(P+1);else if(I>=0)[N,j]=m.split("~");else return console.warn("Invalid chord format - no separator:",e),null;let D;c===ll&&N.includes(".")?D=V1(N,d):D=decodeURIComponent(N);const k=p?p.split(".").map(M=>M==="0"?"x":M):[...n],R=await tw(D,r,s,j,c);return R?{name:ew(D,R),notes:R,pattern:k,originalKey:g||r,originalMode:x||s,originalNotes:R}:(console.warn("Failed to decode notes for chord:",D),null)}function ew(e,n){const r=e.lastIndexOf("/");let s,i=null;if(r>=0){s=e.substring(0,r);const b=e.substring(r+1);/^[A-G](?:##|#|bb|b)?$/.test(b)?i=b:s=e}else s=e;const a=n.split(",").map(b=>b.trim()),c=i?1:0;if(c>=a.length)return e;const h=a[c].replace(/\d+/g,""),p=s.match(/^([A-G](?:##|#|bb|b)?)/);if(!p)return e;const m=p[1];if(!jm(m,h))return console.warn(`Root note mismatch: ${m}  ${h} are not enharmonic. Keeping original.`),e;const g=s.substring(m.length);let x=h+g;if(i){const S=a[0].replace(/\d+/g,"");jm(i,S)?x+="/"+S:(console.warn(`Slash note mismatch: ${i}  ${S} are not enharmonic. Keeping original.`),x+="/"+i)}return x}function jm(e,n){const r=s=>{const i={C:0,D:2,E:4,F:5,G:7,A:9,B:11},a=s.charAt(0).toUpperCase();let c=i[a];if(c===void 0)return-1;const d=(s.match(/#/g)||[]).length,h=(s.match(/b/g)||[]).length;return c+=d,c-=h,(c%12+12)%12};return r(e)===r(n)}async function tw(e,n,r,s,i){try{const a=e.match(/\/([A-G](##|#|bb|b)?)/),c=a?a[1]:null,{rootNote:d,chordType:h}=K1(e);if(d&&h!==void 0){const p=await Xn.generateChord(d,h,n,r);if(p){let m=p.chordNoteNames;return c&&(m=await nw(c,m,n,r)),m}}}catch(a){console.warn("Failed to regenerate chord notes for:",e,a)}return i===ll&&s.includes("-")&&!s.includes("%")?G1(s):decodeURIComponent(s)}async function nw(e,n,r,s){const i=await Xn.generateChord(e,"",r,s);if(!i)return n;const a=i.chordNoteNames.split(",")[0].trim(),c=n.split(",").map(h=>h.trim());if(c.some(h=>{const p=h.replace(/\d+/,""),m=a.replace(/\d+/,"");return p===m})){const h=c.filter(p=>{const m=p.replace(/\d+/,""),g=a.replace(/\d+/,"");return m!==g});return[a,...h].join(", ")}else return`${a}, ${n}`}const rw=(e,n="s")=>{if(e){const r=new URL(window.location.href);r.searchParams.set(n,e),window.history.replaceState({},"",r.toString())}},ow=(e="s")=>new URL(window.location.href).searchParams.get(e),sw=(e,n,r,s,i,a,c,d,h,p,m,g,x,b,S,E="s")=>{const N=Y1(e,n,r,s,i,a,c,d,h,p,m,g,x,b,S);rw(N,E)},iw=async(e,n,r,s,i,a="s")=>{const c=ow(a);return c?await Q1(c,e,n,r,s,i):null},Im=4,km=7,ti=["C","C#","Db","D","D#","Eb","E","F","F#","Gb","G","G#","Ab","A","A#","Bb","B"],aw=(e,n)=>{if(!e||e.length===0)return!0;const r=e[n%e.length];return r!=="x"&&r!=="X"},lw=(e,n,r,s)=>e?s:n!==null&&r[n]?r[n].pattern:s;function cw(e,n){const r=e.lastIndexOf("/");let s,i=null;if(r>=0){s=e.substring(0,r);const b=e.substring(r+1);/^[A-G](?:##|#|bb|b)?$/.test(b)?i=b:s=e}else s=e;const a=n.split(",").map(b=>b.trim()),c=i?1:0;if(c>=a.length)return e;const h=a[c].replace(/\d+/g,""),p=s.match(/^([A-G](?:##|#|bb|b)?)/);if(!p)return e;const m=p[1],g=s.substring(m.length);let x=h+g;if(i){const S=a[0].replace(/\d+/g,"");x+="/"+S}return x}function uw(e){const n=e.lastIndexOf("/");let r=e,s=null;if(n!==-1){const a=e.substring(n+1);/^[A-G](?:##|#|bb|b)?$/.test(a)&&(r=e.substring(0,n),s=a)}const i=r.match(/^([A-G](?:##|bb|#|b)?)(.*)$/);if(!i)throw new Error(`Cannot parse chord name: ${e}`);return{rootNote:i[1],chordType:i[2],slashNote:s}}async function dw(e,n,r,s,i,a){const c=await Xn.generateChord(e,"",i,a);if(c){const d=c.chordNoteNames.split(",")[0].trim();n=`${r.chordName}/${d}`;const h=s.split(",").map(m=>m.trim());if(h.some(m=>{const g=m.replace(/\d+/,""),x=d.replace(/\d+/,"");return g===x})){const m=h.filter(g=>{const x=g.replace(/\d+/,""),b=d.replace(/\d+/,"");return x!==b});s=[d,...m].join(", ")}else s=`${d}, ${s}`}return{newName:n,newNotes:s}}const fw=()=>{const e=ct(B=>B.chords),n=ct(B=>B.key),r=ct(B=>B.mode),s=ct(B=>B.modes),i=ct(B=>B.scaleNotes),a=ct(B=>B.normalizedScaleNotes),c=ct(B=>B.loadingChords),d=ct(B=>B.setKey),h=ct(B=>B.setMode),p=ct(B=>B.setKeyAndMode),m=ct(B=>B.setModes),g=ct(B=>B.initialize),x=Oe(B=>B.activeNotes),b=Oe(B=>B.activeChordIndex),S=Oe(B=>B.highlightedChordIndex),E=Oe(B=>B.addedChords),N=Oe(B=>B.temporaryChord),j=Oe(B=>B.isPlayingScale),P=Oe(B=>B.setActiveNotes),I=Oe(B=>B.setActiveChordIndex),D=Oe(B=>B.setHighlightedChordIndex),k=Oe(B=>B.setTemporaryChord),R=Oe(B=>B.setIsPlayingScale),O=Oe(B=>B.addChord),M=Oe(B=>B.removeChord),q=Oe(B=>B.updateChord),J=Oe(B=>B.setAddedChords),ie=Oe(B=>B.clearAllChords),Y=Oe(B=>B.updateChordPattern),W=Oe(B=>B.playNotes),re=Oe(B=>B.clearScalePlaybackTimeouts),ae=Oe(B=>B.addScalePlaybackTimeout),ce=Oe(B=>B.handleFetchOriginalChord),ee=yt(B=>B.globalPatternState),Q=yt(B=>B.globalPatternState.isPlaying),V=yt(B=>B.globalPatternState.bpm),F=yt(B=>B.currentlyActivePattern),A=yt(B=>B.setGlobalPatternState),_=yt(B=>B.setCurrentlyActivePattern),Z=yt(B=>B.updatePattern),oe=Cr(B=>B.isDeleteMode),fe=Cr(B=>B.isLiveMode),he=Cr(B=>B.showPatternSystem),Pe=Cr(B=>B.setIsDeleteMode),ye=Cr(B=>B.setIsLiveMode),Se=Cr(B=>B.setShowPatternSystem),we=Cr(B=>B.togglePatternSystem),ht=Cr(B=>B.toggleLiveMode),Te=Ye(B=>B.pianoSettings),Qe=Ye(B=>B.availableInstruments),Ne=Ye(B=>B.setPianoInstrument),qe=Ye(B=>B.setCutOffPreviousNotes),et=Ye(B=>B.setEq),Rt=Ye(B=>B.setOctaveOffset),tn=Ye(B=>B.setReverbLevel),Kt=Ye(B=>B.setNoteDuration),ut=Ye(B=>B.setVolume),Xe=Ye(B=>B.setChorusLevel),We=Ye(B=>B.setDelayLevel),pt=Ye(B=>B.setDistortionLevel),vt=Ye(B=>B.setBitcrusherLevel),Dn=Ye(B=>B.setPhaserLevel),mn=Ye(B=>B.setFlangerLevel),Yt=Ye(B=>B.setRingModLevel),Qt=Ye(B=>B.setAutoFilterLevel),An=Ye(B=>B.setTremoloLevel),jn=Ye(B=>B.setStereoWidthLevel),Ct=Ye(B=>B.setCompressorLevel),Ar=Ye(B=>B.updatePianoSettings),jr=Ye(B=>B.setAvailableInstruments),{modes:er}=M1(),Mt=w.useRef(null),nn=w.useRef(0),rn=w.useRef(0),In=w.useRef(!1),gn=w.useRef(null),on=w.useRef(!0),vn=w.useRef(!1),U=w.useRef(!0);w.useEffect(()=>{if(on.current||!U.current||E.length===0)return;(async()=>{const Ie=[];for(const Re of E)try{const{rootNote:dt,chordType:mt,slashNote:Ir}=uw(Re.name);console.log("Regenerating chord:",Re.name," root:",dt,"type:",mt,"slash:",Ir);const Un=await Xn.generateChord(dt,mt,n,r);if(Un){console.log("Generated notes:",Un.chordNoteNames);let fr=Un.chordNoteNames,kr=Un.chordName;Ir&&({newName:kr,newNotes:fr}=await dw(Ir,kr,Un,fr,n,r));const ro=cw(Re.name,fr);console.log("Final chord name:",Re.name,"",ro),Ie.push({...Re,name:ro,notes:fr})}else console.warn(`Could not regenerate chord: ${Re.name} (generation returned null)`),Ie.push(Re)}catch(dt){console.error("Error regenerating chord:",Re.name,dt),Ie.push(Re)}U.current=!1,J(Ie),setTimeout(()=>{U.current=!0},100)})()},[n,r,E,J]),w.useEffect(()=>{if(er&&!vn.current){vn.current=!0,m(er);const Ie=new URLSearchParams(window.location.search).has("s");!e&&!Ie&&g()}},[er,e]);const X=w.useMemo(()=>6e4/ee.bpm*ee.subdivision,[ee.bpm,ee.subdivision]),de=w.useCallback(B=>{if(ee.swing===0)return X;const Ie=B%2===1,Re=1+ee.swing/100;return Ie?X*Re:X/Re},[X,ee.swing]),je=w.useCallback(()=>lw(N,b,E,F),[N,b,E,F]),_e=w.useMemo(()=>N||(b!==null&&E[b]?E[b]:null),[N,b,E]),Be=w.useMemo(()=>je(),[je]),Je=w.useCallback(()=>{e?.length&&s?.length&&!on.current&&sw(n,r,E,ee.currentPattern,ee.bpm,ee.subdivision,ee.swing,he,fe,Te,ti,s,Qe,e,Xn.chordTypes)},[n,r,e,E,ee.currentPattern,ee.bpm,ee.subdivision,ee.swing,he,fe,Te,Qe,s]),St=w.useCallback(async()=>{if(e?.length){const B=await iw(ti,s||[],Qe,e,Xn.chordTypes);B&&(p(B.key,B.mode),ie(),B.addedChords.forEach(Ie=>{O(Ie.name,Ie.notes,Ie.pattern||["1","2","3","4"],Ie.originalKey||B.key,Ie.originalMode||B.mode)}),A({currentPattern:B.pattern,bpm:B.bpm,subdivision:B.subdivision,swing:B.swing}),Se(B.showPattern),ye(B.liveMode),Ar(B.pianoSettings))}},[e,s,Qe]),Ve=w.useCallback((B,Ie,Re)=>{if(oe&&Ie!==void 0){M(Ie);return}const dt=Va(Im,km,B);Ie!==void 0?(k(null),I(Ie),Q||W(dt),D(Ie),setTimeout(()=>D(null),150)):(Re&&k({name:Re,notes:B}),Q||W(dt))},[oe,Q]),Gt=w.useCallback((B,Ie,Re,dt)=>{O(B,Ie,F,Re,dt)},[F]),tt=w.useCallback((B,Ie)=>{const Re={name:Ie.name,notes:Ie.notes,pattern:Ie.pattern||["1","2","3","4"],originalKey:Ie.originalKey||n,originalMode:Ie.originalMode||r,originalNotes:Ie.originalNotes||Ie.notes};q(B,Re)},[n,r,q]),Et=w.useCallback((B,Ie)=>{const Re=Array.from(E),[dt]=Re.splice(B,1);if(Re.splice(Ie,0,dt),J(Re),b===null)return;let mt=b;b===B?mt=Ie:B<b&&Ie>=b?mt=b-1:B>b&&Ie<=b&&(mt=b+1),mt!==b&&I(mt)},[E,b,J,I]),Ut=w.useCallback(()=>{ie(),A({isPlaying:!1}),ye(!1)},[ie,A,ye]),kn=w.useCallback(B=>{Z(B),B.hasOwnProperty("isPlaying")&&B.isPlaying&&(nn.current=0,rn.current=performance.now())},[Z]),Ot=w.useCallback(()=>{const B=!Q;A({isPlaying:B}),B&&(nn.current=0,rn.current=performance.now())},[Q]),Gn=w.useCallback(()=>{if(j){re(),P([]),R(!1);return}if(!i?.length)return;R(!0);const B=Q;B&&A({isPlaying:!1}),P([]);const Re=6e4/V*.8;let dt=100,mt=4,Ir=0;const Un=[...i];i[0]?.noteName&&Un.push({noteName:i[0].noteName}),Un.forEach(kr=>{if(!kr.noteName)return;const ro=setTimeout(()=>{const os=Zr(kr.noteName);if(!os)return;let oo=hn.fromNote(os+mt);oo<=Ir&&(mt++,oo=hn.fromNote(os+mt)),Ir=oo;const ot=hn.getAttributes(oo),bl=ot.note.slice(0,-1),ss=parseInt(ot.note.slice(-1),10);P([{midiNote:oo,note:bl,octave:ss}])},dt);ae(ro),dt+=Re});const fr=setTimeout(()=>{P([]),R(!1),re(),B&&A({isPlaying:!0})},dt+Re);ae(fr)},[i,j,V,Q]),dr=w.useCallback(B=>{if(B.target instanceof HTMLInputElement)return;if(B.key.toLowerCase()==="p"){we();return}if(B.key.toLowerCase()==="l"){ht();return}if(B.key===" "){B.preventDefault(),Ot();return}const Ie=B.key==="0"?9:parseInt(B.key,10)-1;if(!isNaN(Ie)&&Ie>=0&&Ie<E.length){const Re=E[Ie];Re&&(k(null),Ve(Re.notes,Ie))}},[E,Ve,Ot,we,ht,k]);return w.useEffect(()=>{b!==null&&E[b]?_([...E[b].pattern]):_([...ee.currentPattern])},[b,E,ee.currentPattern]),w.useEffect(()=>{if(ee.isPlaying){if(!Mt.current){rn.current=performance.now(),nn.current=0,A({currentStep:0});const B=()=>{const Re=performance.now()-rn.current;let dt=0,mt=0;for(;dt<Re;)dt+=de(mt),dt<=Re&&mt++;mt!==nn.current&&(nn.current=mt,A({currentStep:mt})),Mt.current=requestAnimationFrame(B)};Mt.current=requestAnimationFrame(B)}}else Mt.current&&(cancelAnimationFrame(Mt.current),Mt.current=null);return()=>{Mt.current&&(cancelAnimationFrame(Mt.current),Mt.current=null)}},[ee.isPlaying,de]),w.useEffect(()=>{if(!ee.isPlaying||!_e)return;const B=ee.currentStep%Be.length;if(aw(Be,B)){const Ie=Va(Im,km,_e.notes);P(Ie)}else P([])},[ee.isPlaying,ee.currentStep,_e,Be]),w.useEffect(()=>{e?.length&&!In.current&&(In.current=!0,on.current=!0,St().then(()=>{setTimeout(()=>{on.current=!1},100)}))},[e,St]),w.useEffect(()=>(e?.length&&s?.length&&!on.current&&(gn.current&&clearTimeout(gn.current),gn.current=setTimeout(()=>{Je()},100)),()=>{gn.current&&clearTimeout(gn.current)}),[n,r,E,ee.currentPattern,ee.bpm,ee.subdivision,ee.swing,he,fe,Te,e?.length,s?.length,Je]),w.useEffect(()=>(document.addEventListener("keydown",dr),()=>document.removeEventListener("keydown",dr)),[dr]),{chords:e,key:n,mode:r,modes:s,activeNotes:x,activeChordIndex:b,highlightedChordIndex:S,addedChords:E,loadingChords:c,isDeleteMode:oe,isPlayingScale:j,isLiveMode:fe,globalPatternState:ee,currentlyActivePattern:F,temporaryChord:N,normalizedScaleNotes:a,pianoSettings:Te,availableInstruments:Qe,setKey:d,setMode:h,setIsDeleteMode:Pe,setIsLiveMode:ye,setAvailableInstruments:jr,handleChordClick:Ve,addChordClick:Gt,updateChord:tt,reorderChords:Et,clearAllChords:Ut,updateChordPattern:Y,toggleScalePlayback:Gn,handlePatternChange:kn,handleTogglePlayback:Ot,getCurrentPattern:je,handleFetchOriginalChord:ce,setPianoInstrument:Ne,setCutOffPreviousNotes:qe,setEq:et,setOctaveOffset:Rt,setReverbLevel:tn,setNoteDuration:Kt,setVolume:ut,setChorusLevel:Xe,setDelayLevel:We,setDistortionLevel:pt,setBitcrusherLevel:vt,setPhaserLevel:Dn,setFlangerLevel:mn,setRingModLevel:Yt,setAutoFilterLevel:Qt,setTremoloLevel:An,setStereoWidthLevel:jn,setCompressorLevel:Ct}};function hw({title:e,titleId:n,...r},s){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":n},r),e?w.createElement("title",{id:n},e):null,w.createElement("path",{d:"M10.75 2.75a.75.75 0 0 0-1.5 0v8.614L6.295 8.235a.75.75 0 1 0-1.09 1.03l4.25 4.5a.75.75 0 0 0 1.09 0l4.25-4.5a.75.75 0 0 0-1.09-1.03l-2.955 3.129V2.75Z"}),w.createElement("path",{d:"M3.5 12.75a.75.75 0 0 0-1.5 0v2.5A2.75 2.75 0 0 0 4.75 18h10.5A2.75 2.75 0 0 0 18 15.25v-2.5a.75.75 0 0 0-1.5 0v2.5c0 .69-.56 1.25-1.25 1.25H4.75c-.69 0-1.25-.56-1.25-1.25v-2.5Z"}))}const pw=w.forwardRef(hw);function mw({title:e,titleId:n,...r},s){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":n},r),e?w.createElement("title",{id:n},e):null,w.createElement("path",{d:"M3.28 2.22a.75.75 0 0 0-1.06 1.06L5.44 6.5H2.75a.75.75 0 0 0 0 1.5h4.5A.75.75 0 0 0 8 7.25v-4.5a.75.75 0 0 0-1.5 0v2.69L3.28 2.22ZM13.5 2.75a.75.75 0 0 0-1.5 0v4.5c0 .414.336.75.75.75h4.5a.75.75 0 0 0 0-1.5h-2.69l3.22-3.22a.75.75 0 0 0-1.06-1.06L13.5 5.44V2.75ZM3.28 17.78l3.22-3.22v2.69a.75.75 0 0 0 1.5 0v-4.5a.75.75 0 0 0-.75-.75h-4.5a.75.75 0 0 0 0 1.5h2.69l-3.22 3.22a.75.75 0 1 0 1.06 1.06ZM13.5 14.56l3.22 3.22a.75.75 0 1 0 1.06-1.06l-3.22-3.22h2.69a.75.75 0 0 0 0-1.5h-4.5a.75.75 0 0 0-.75.75v4.5a.75.75 0 0 0 1.5 0v-2.69Z"}))}const gw=w.forwardRef(mw);function vw({title:e,titleId:n,...r},s){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":n},r),e?w.createElement("title",{id:n},e):null,w.createElement("path",{d:"m13.28 7.78 3.22-3.22v2.69a.75.75 0 0 0 1.5 0v-4.5a.75.75 0 0 0-.75-.75h-4.5a.75.75 0 0 0 0 1.5h2.69l-3.22 3.22a.75.75 0 0 0 1.06 1.06ZM2 17.25v-4.5a.75.75 0 0 1 1.5 0v2.69l3.22-3.22a.75.75 0 0 1 1.06 1.06L4.56 16.5h2.69a.75.75 0 0 1 0 1.5h-4.5a.747.747 0 0 1-.75-.75ZM12.22 13.28l3.22 3.22h-2.69a.75.75 0 0 0 0 1.5h4.5a.747.747 0 0 0 .75-.75v-4.5a.75.75 0 0 0-1.5 0v2.69l-3.22-3.22a.75.75 0 1 0-1.06 1.06ZM3.5 4.56l3.22 3.22a.75.75 0 0 0 1.06-1.06L4.56 3.5h2.69a.75.75 0 0 0 0-1.5h-4.5a.75.75 0 0 0-.75.75v4.5a.75.75 0 0 0 1.5 0V4.56Z"}))}const xw=w.forwardRef(vw);function yw({title:e,titleId:n,...r},s){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":n},r),e?w.createElement("title",{id:n},e):null,w.createElement("path",{fillRule:"evenodd",d:"M16.704 4.153a.75.75 0 0 1 .143 1.052l-8 10.5a.75.75 0 0 1-1.127.075l-4.5-4.5a.75.75 0 0 1 1.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 0 1 1.05-.143Z",clipRule:"evenodd"}))}const bw=w.forwardRef(yw);function ww({title:e,titleId:n,...r},s){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":n},r),e?w.createElement("title",{id:n},e):null,w.createElement("path",{fillRule:"evenodd",d:"M5.22 8.22a.75.75 0 0 1 1.06 0L10 11.94l3.72-3.72a.75.75 0 1 1 1.06 1.06l-4.25 4.25a.75.75 0 0 1-1.06 0L5.22 9.28a.75.75 0 0 1 0-1.06Z",clipRule:"evenodd"}))}const Co=w.forwardRef(ww);function Nw({title:e,titleId:n,...r},s){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":n},r),e?w.createElement("title",{id:n},e):null,w.createElement("path",{fillRule:"evenodd",d:"M11.78 5.22a.75.75 0 0 1 0 1.06L8.06 10l3.72 3.72a.75.75 0 1 1-1.06 1.06l-4.25-4.25a.75.75 0 0 1 0-1.06l4.25-4.25a.75.75 0 0 1 1.06 0Z",clipRule:"evenodd"}))}const Cw=w.forwardRef(Nw);function Sw({title:e,titleId:n,...r},s){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":n},r),e?w.createElement("title",{id:n},e):null,w.createElement("path",{fillRule:"evenodd",d:"M8.22 5.22a.75.75 0 0 1 1.06 0l4.25 4.25a.75.75 0 0 1 0 1.06l-4.25 4.25a.75.75 0 0 1-1.06-1.06L11.94 10 8.22 6.28a.75.75 0 0 1 0-1.06Z",clipRule:"evenodd"}))}const B0=w.forwardRef(Sw);function Ew({title:e,titleId:n,...r},s){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":n},r),e?w.createElement("title",{id:n},e):null,w.createElement("path",{fillRule:"evenodd",d:"M9.47 6.47a.75.75 0 0 1 1.06 0l4.25 4.25a.75.75 0 1 1-1.06 1.06L10 8.06l-3.72 3.72a.75.75 0 0 1-1.06-1.06l4.25-4.25Z",clipRule:"evenodd"}))}const ni=w.forwardRef(Ew);function Dw({title:e,titleId:n,...r},s){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":n},r),e?w.createElement("title",{id:n},e):null,w.createElement("path",{d:"M13.024 9.25c.47 0 .827-.433.637-.863a4 4 0 0 0-4.094-2.364c-.468.05-.665.576-.43.984l1.08 1.868a.75.75 0 0 0 .649.375h2.158ZM7.84 7.758c-.236-.408-.79-.5-1.068-.12A3.982 3.982 0 0 0 6 10c0 .884.287 1.7.772 2.363.278.38.832.287 1.068-.12l1.078-1.868a.75.75 0 0 0 0-.75L7.839 7.758ZM9.138 12.993c-.235.408-.039.934.43.984a4 4 0 0 0 4.094-2.364c.19-.43-.168-.863-.638-.863h-2.158a.75.75 0 0 0-.65.375l-1.078 1.868Z"}),w.createElement("path",{fillRule:"evenodd",d:"m14.13 4.347.644-1.117a.75.75 0 0 0-1.299-.75l-.644 1.116a6.954 6.954 0 0 0-2.081-.556V1.75a.75.75 0 0 0-1.5 0v1.29a6.954 6.954 0 0 0-2.081.556L6.525 2.48a.75.75 0 1 0-1.3.75l.645 1.117A7.04 7.04 0 0 0 4.347 5.87L3.23 5.225a.75.75 0 1 0-.75 1.3l1.116.644A6.954 6.954 0 0 0 3.04 9.25H1.75a.75.75 0 0 0 0 1.5h1.29c.078.733.27 1.433.556 2.081l-1.116.645a.75.75 0 1 0 .75 1.298l1.117-.644a7.04 7.04 0 0 0 1.523 1.523l-.645 1.117a.75.75 0 1 0 1.3.75l.644-1.116a6.954 6.954 0 0 0 2.081.556v1.29a.75.75 0 0 0 1.5 0v-1.29a6.954 6.954 0 0 0 2.081-.556l.645 1.116a.75.75 0 0 0 1.299-.75l-.645-1.117a7.042 7.042 0 0 0 1.523-1.523l1.117.644a.75.75 0 0 0 .75-1.298l-1.116-.645a6.954 6.954 0 0 0 .556-2.081h1.29a.75.75 0 0 0 0-1.5h-1.29a6.954 6.954 0 0 0-.556-2.081l1.116-.644a.75.75 0 0 0-.75-1.3l-1.117.645a7.04 7.04 0 0 0-1.524-1.523ZM10 4.5a5.475 5.475 0 0 0-2.781.754A5.527 5.527 0 0 0 5.22 7.277 5.475 5.475 0 0 0 4.5 10a5.475 5.475 0 0 0 .752 2.777 5.527 5.527 0 0 0 2.028 2.004c.802.458 1.73.719 2.72.719a5.474 5.474 0 0 0 2.78-.753 5.527 5.527 0 0 0 2.001-2.027c.458-.802.719-1.73.719-2.72a5.475 5.475 0 0 0-.753-2.78 5.528 5.528 0 0 0-2.028-2.002A5.475 5.475 0 0 0 10 4.5Z",clipRule:"evenodd"}))}const md=w.forwardRef(Dw);function Aw({title:e,titleId:n,...r},s){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":n},r),e?w.createElement("title",{id:n},e):null,w.createElement("path",{d:"M10 3a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM10 8.5a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM11.5 15.5a1.5 1.5 0 1 0-3 0 1.5 1.5 0 0 0 3 0Z"}))}const jw=w.forwardRef(Aw);function Iw({title:e,titleId:n,...r},s){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":n},r),e?w.createElement("title",{id:n},e):null,w.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 1 1-16 0 8 8 0 0 1 16 0Zm-7-4a1 1 0 1 1-2 0 1 1 0 0 1 2 0ZM9 9a.75.75 0 0 0 0 1.5h.253a.25.25 0 0 1 .244.304l-.459 2.066A1.75 1.75 0 0 0 10.747 15H11a.75.75 0 0 0 0-1.5h-.253a.25.25 0 0 1-.244-.304l.459-2.066A1.75 1.75 0 0 0 9.253 9H9Z",clipRule:"evenodd"}))}const kw=w.forwardRef(Iw);function Pw({title:e,titleId:n,...r},s){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":n},r),e?w.createElement("title",{id:n},e):null,w.createElement("path",{fillRule:"evenodd",d:"M10 1a4.5 4.5 0 0 0-4.5 4.5V9H5a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2v-6a2 2 0 0 0-2-2h-.5V5.5A4.5 4.5 0 0 0 10 1Zm3 8V5.5a3 3 0 1 0-6 0V9h6Z",clipRule:"evenodd"}))}const Pm=w.forwardRef(Pw);function Tw({title:e,titleId:n,...r},s){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":n},r),e?w.createElement("title",{id:n},e):null,w.createElement("path",{fillRule:"evenodd",d:"M9 3.5a5.5 5.5 0 1 0 0 11 5.5 5.5 0 0 0 0-11ZM2 9a7 7 0 1 1 12.452 4.391l3.328 3.329a.75.75 0 1 1-1.06 1.06l-3.329-3.328A7 7 0 0 1 2 9Z",clipRule:"evenodd"}))}const Rw=w.forwardRef(Tw);function Mw({title:e,titleId:n,...r},s){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":n},r),e?w.createElement("title",{id:n},e):null,w.createElement("path",{fillRule:"evenodd",d:"M4 10a.75.75 0 0 1 .75-.75h10.5a.75.75 0 0 1 0 1.5H4.75A.75.75 0 0 1 4 10Z",clipRule:"evenodd"}))}const Tm=w.forwardRef(Mw);function Ow({title:e,titleId:n,...r},s){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":n},r),e?w.createElement("title",{id:n},e):null,w.createElement("path",{d:"M5.75 3a.75.75 0 0 0-.75.75v12.5c0 .414.336.75.75.75h1.5a.75.75 0 0 0 .75-.75V3.75A.75.75 0 0 0 7.25 3h-1.5ZM12.75 3a.75.75 0 0 0-.75.75v12.5c0 .414.336.75.75.75h1.5a.75.75 0 0 0 .75-.75V3.75a.75.75 0 0 0-.75-.75h-1.5Z"}))}const ri=w.forwardRef(Ow);function _w({title:e,titleId:n,...r},s){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":n},r),e?w.createElement("title",{id:n},e):null,w.createElement("path",{fillRule:"evenodd",d:"M2 10a8 8 0 1 1 16 0 8 8 0 0 1-16 0Zm6.39-2.908a.75.75 0 0 1 .766.027l3.5 2.25a.75.75 0 0 1 0 1.262l-3.5 2.25A.75.75 0 0 1 8 12.25v-4.5a.75.75 0 0 1 .39-.658Z",clipRule:"evenodd"}))}const oi=w.forwardRef(_w);function Lw({title:e,titleId:n,...r},s){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":n},r),e?w.createElement("title",{id:n},e):null,w.createElement("path",{d:"M6.3 2.84A1.5 1.5 0 0 0 4 4.11v11.78a1.5 1.5 0 0 0 2.3 1.27l9.344-5.891a1.5 1.5 0 0 0 0-2.538L6.3 2.841Z"}))}const $0=w.forwardRef(Lw);function Fw({title:e,titleId:n,...r},s){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":n},r),e?w.createElement("title",{id:n},e):null,w.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 1 0 0-16 8 8 0 0 0 0 16Zm.75-11.25a.75.75 0 0 0-1.5 0v2.5h-2.5a.75.75 0 0 0 0 1.5h2.5v2.5a.75.75 0 0 0 1.5 0v-2.5h2.5a.75.75 0 0 0 0-1.5h-2.5v-2.5Z",clipRule:"evenodd"}))}const Bw=w.forwardRef(Fw);function $w({title:e,titleId:n,...r},s){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":n},r),e?w.createElement("title",{id:n},e):null,w.createElement("path",{d:"M10.75 4.75a.75.75 0 0 0-1.5 0v4.5h-4.5a.75.75 0 0 0 0 1.5h4.5v4.5a.75.75 0 0 0 1.5 0v-4.5h4.5a.75.75 0 0 0 0-1.5h-4.5v-4.5Z"}))}const Rm=w.forwardRef($w);function Gw({title:e,titleId:n,...r},s){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":n},r),e?w.createElement("title",{id:n},e):null,w.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 1 1-16 0 8 8 0 0 1 16 0ZM8.94 6.94a.75.75 0 1 1-1.061-1.061 3 3 0 1 1 2.871 5.026v.345a.75.75 0 0 1-1.5 0v-.5c0-.72.57-1.172 1.081-1.287A1.5 1.5 0 1 0 8.94 6.94ZM10 15a1 1 0 1 0 0-2 1 1 0 0 0 0 2Z",clipRule:"evenodd"}))}const Uw=w.forwardRef(Gw);function Vw({title:e,titleId:n,...r},s){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":n},r),e?w.createElement("title",{id:n},e):null,w.createElement("path",{fillRule:"evenodd",d:"M8.75 1A2.75 2.75 0 0 0 6 3.75v.443c-.795.077-1.584.176-2.365.298a.75.75 0 1 0 .23 1.482l.149-.022.841 10.518A2.75 2.75 0 0 0 7.596 19h4.807a2.75 2.75 0 0 0 2.742-2.53l.841-10.52.149.023a.75.75 0 0 0 .23-1.482A41.03 41.03 0 0 0 14 4.193V3.75A2.75 2.75 0 0 0 11.25 1h-2.5ZM10 4c.84 0 1.673.025 2.5.075V3.75c0-.69-.56-1.25-1.25-1.25h-2.5c-.69 0-1.25.56-1.25 1.25v.325C8.327 4.025 9.16 4 10 4ZM8.58 7.72a.75.75 0 0 0-1.5.06l.3 7.5a.75.75 0 1 0 1.5-.06l-.3-7.5Zm4.34.06a.75.75 0 1 0-1.5-.06l-.3 7.5a.75.75 0 1 0 1.5.06l.3-7.5Z",clipRule:"evenodd"}))}const G0=w.forwardRef(Vw);function zw({title:e,titleId:n,...r},s){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":n},r),e?w.createElement("title",{id:n},e):null,w.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 1 0 0-16 8 8 0 0 0 0 16ZM8.28 7.22a.75.75 0 0 0-1.06 1.06L8.94 10l-1.72 1.72a.75.75 0 1 0 1.06 1.06L10 11.06l1.72 1.72a.75.75 0 1 0 1.06-1.06L11.06 10l1.72-1.72a.75.75 0 0 0-1.06-1.06L10 8.94 8.28 7.22Z",clipRule:"evenodd"}))}const gd=w.forwardRef(zw);function Ww({title:e,titleId:n,...r},s){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":n},r),e?w.createElement("title",{id:n},e):null,w.createElement("path",{d:"M6.28 5.22a.75.75 0 0 0-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 1 0 1.06 1.06L10 11.06l3.72 3.72a.75.75 0 1 0 1.06-1.06L11.06 10l3.72-3.72a.75.75 0 0 0-1.06-1.06L10 8.94 6.28 5.22Z"}))}const Hw=w.forwardRef(Ww),U0=w.memo(({chord:e,index:n,isExpanded:r,isPlaying:s,isAdding:i,onChordPlay:a,onChordAdd:c,onToggleExpansion:d})=>{const h=w.useCallback(()=>{a(e.chordNoteNames,n,e.chordName)},[a,e.chordNoteNames,e.chordName,n]),p=w.useCallback(g=>{g.stopPropagation(),c(n,e.chordName,e.chordNoteNames,e.keyName,e.modeId)},[c,n,e.chordName,e.chordNoteNames,e.keyName,e.modeId]),m=w.useCallback(g=>{g.stopPropagation(),d(n)},[d,n]);return u.jsxs("div",{className:`bg-[#3d434f] rounded-lg border border-gray-600 hover:border-blue-500 hover:bg-[#444b59] transition-all duration-200 overflow-hidden cursor-pointer group relative ${s?"chord-playing z-50":""} ${i?"chord-adding z-40":""}`,onClick:h,children:[u.jsx("div",{className:"p-3 sm:p-4",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3 flex-1 min-w-0",children:[u.jsx(oi,{className:`h-5 w-5 sm:h-6 sm:w-6 transition-colors flex-shrink-0 ${s?"text-blue-400":"text-gray-400 group-hover:text-blue-300"}`}),u.jsx("h3",{className:`text-base sm:text-lg font-bold transition-colors truncate ${s?"text-blue-200":"text-white group-hover:text-blue-200"}`,children:e.chordName})]}),u.jsxs("div",{className:"flex items-center space-x-1 flex-shrink-0 ml-2",children:[u.jsx("button",{onClick:p,className:`p-1 sm:p-2 rounded-md transition-colors ${i?"bg-green-600 text-white":"hover:bg-green-600 text-gray-400 hover:text-white"}`,title:"Add to sequence",children:u.jsx(Bw,{className:"h-5 w-5 sm:h-4 sm:w-4"})}),u.jsx("button",{onClick:m,className:"p-1.5 sm:p-2 rounded-md hover:bg-[#565b6f] text-gray-400 hover:text-white transition-colors",title:r?"Hide notes":"Show notes",children:r?u.jsx(ni,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"}):u.jsx(Co,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"})})]})]})}),r&&u.jsx("div",{className:"px-3 pb-3 pt-0 sm:px-4 sm:pb-4",children:u.jsxs("div",{className:"bg-gray-800x bg-[#363c46]  rounded-md p-2 sm:p-3 border-1 border-gray-600",children:[u.jsx("div",{className:"text-xs font-medium text-gray-400 uppercase tracking-wide mb-1",children:"Notes"}),u.jsx("div",{className:"text-sm text-gray-200 font-mono",children:e.chordNoteNames})]})})]})});U0.displayName="ChordCard";const qw=({onChordClick:e,addChordClick:n})=>{const[r,s]=w.useState("All"),[i,a]=w.useState(""),[c,d]=w.useState(new Set),[h,p]=w.useState(new Set),[m,g]=w.useState(new Set),[x,b]=w.useState(1),S=ct(),{chords:E,loadingChords:N,allDistinctChords:j,loadingAllChords:P,showAllChords:I,toggleShowAllChords:D,key:k,mode:R}=S,O=I?j:E,M=I?P:N;w.useEffect(()=>{const A=()=>{const _=window.innerWidth;_>=1280?b(3):_>=640?b(2):b(1)};return A(),window.addEventListener("resize",A),()=>window.removeEventListener("resize",A)},[]);const q=w.useCallback(A=>Math.floor(A/x),[x]),J=w.useMemo(()=>O?O.filter(A=>A.chordName&&A.chordNoteNames&&A.chordNoteName&&A.chordName.trim()!==""&&A.chordNoteNames.trim()!==""&&A.chordNoteName.trim()!==""):[],[O]),ie=w.useMemo(()=>{const A=new Set;return J.forEach(_=>{_.chordNoteName&&A.add(_.chordNoteName)}),Array.from(A).sort()},[J]),Y=w.useMemo(()=>{const A={};return J.forEach(_=>{_.chordNoteName&&(A[_.chordNoteName]=(A[_.chordNoteName]||0)+1)}),A},[J]),W=w.useMemo(()=>{let A=J;if(r!=="All"&&(A=A.filter(_=>_.chordNoteName===r)),i.trim()){const _=i.toLowerCase().trim();A=A.filter(Z=>Z.chordName?.toLowerCase().includes(_)||Z.chordNoteNames?.toLowerCase().includes(_))}return A.sort((_,Z)=>{const oe=_.chordName?.toLowerCase()||"",fe=Z.chordName?.toLowerCase()||"";return oe.localeCompare(fe)})},[J,r,i]);w.useEffect(()=>{d(new Set)},[x,W]);const re=w.useCallback((A,_,Z)=>{p(fe=>new Set(fe).add(_)),e(A,void 0,Z);const oe=setTimeout(()=>{p(fe=>{const he=new Set(fe);return he.delete(_),he})},800);return()=>clearTimeout(oe)},[e]),ae=w.useCallback((A,_,Z,oe,fe)=>{g(ye=>new Set(ye).add(A));const he=S.modes[fe-1];n?.(_,Z,oe,he);const Pe=setTimeout(()=>{g(ye=>{const Se=new Set(ye);return Se.delete(A),Se})},600);return()=>clearTimeout(Pe)},[n,S.modes]),ce=w.useCallback(A=>{const _=q(A);d(Z=>{const oe=new Set(Z);return oe.has(_)?oe.delete(_):oe.add(_),oe})},[q]),ee=w.useCallback(()=>{D(),s("All"),a(""),d(new Set)},[D]),Q=w.useCallback(()=>{a(""),s("All")},[]),V=w.useCallback(A=>{a(A.target.value)},[]),F=w.useMemo(()=>u.jsxs("div",{className:"flex space-x-2 overflow-x-auto pb-2 scrollbar-thin scrollbar-thumb-gray-600 scrollbar-track-transparent px-1",children:[u.jsxs("button",{onClick:()=>s("All"),className:`flex-shrink-0 px-3 py-2 rounded-full text-sm font-medium transition-colors ${r==="All"?"bg-blue-600 text-white":"bg-[#444b59] text-gray-300 hover:bg-[#525a6b] hover:text-white"}`,children:["All (",J.length,")"]}),ie.map(A=>u.jsxs("button",{onClick:()=>s(A),className:`flex-shrink-0 px-3 py-2 rounded-full text-sm font-medium transition-colors ${r===A?"bg-blue-600 text-white":"bg-[#444b59] text-gray-300 hover:bg-[#525a6b] hover:text-white"}`,children:[A," (",Y[A]||0,")"]},A))]}),[r,J.length,ie,Y]);return u.jsxs("div",{className:"w-full max-w-7xl mx-auto px-2",children:[u.jsx("div",{className:"bg-[#3d434f]  border border-gray-600 rounded-lg overflow-hidden mb-4",children:u.jsxs("div",{className:"px-4 py-4",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h2",{className:"text-sm font-bold text-slate-300 uppercase tracking-wider",children:"Chord Explorer"}),u.jsxs("div",{className:"text-xs text-gray-400",children:[W.length," of ",J.length," chords"]})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex items-center justify-between p-3 bg-[#444b59]x bg-[#363c46]  rounded-lg border border-gray-600",children:[u.jsxs("div",{className:"flex flex-col text-left",children:[u.jsx("span",{className:"text-xs uppercase font-medium text-gray-400 text-left",children:"Show All Chords"}),u.jsx("span",{className:"text-xs text-gray-400",children:I?j?`${j?.length} chords`:"Loading...":`Showing chords in ${k} ${R}`})]}),u.jsx("button",{onClick:ee,disabled:M,className:`relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:ring-offset-gray-800 ${I?"bg-blue-600":"bg-gray-600"} ${M?"opacity-50 cursor-not-allowed":""}`,role:"switch","aria-checked":I,"aria-label":"Toggle between current mode chords and all distinct chords",children:u.jsx("span",{"aria-hidden":"true",className:`pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ${I?"translate-x-5":"translate-x-0"}`})})]}),u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"absolute left-3 inset-y-0 flex items-center pointer-events-none",children:u.jsx(Rw,{className:"w-4 h-4 text-gray-400"})}),u.jsx("input",{type:"text",placeholder:"Search chords...",value:i,onChange:V,className:"w-full pl-10 pr-4 py-2 bg-[#444b59] border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:border-blue-500 focus:outline-none transition-colors !text-sm"})]})]}),u.jsx("div",{className:"lg:hidden mt-4",children:F})]})}),u.jsxs("div",{className:"flex flex-col lg:flex-row gap-3 lg:gap-4",children:[u.jsx("div",{className:"hidden lg:block lg:w-48 flex-shrink-0",children:u.jsxs("div",{className:"bg-[#3d434f] rounded-lg h-fit",children:[u.jsx("div",{className:"px-4 py-3 border-b border-gray-600",children:u.jsx("h3",{className:"text-sm font-medium text-gray-200 uppercase tracking-wide",children:"Filter by Root"})}),u.jsxs("div",{className:"p-2",children:[u.jsx("button",{onClick:()=>s("All"),className:`w-full px-3 py-2 text-left transition-colors rounded-md border-l-4 ${r==="All"?"bg-[#4a5262] border-l-blue-500 text-white":"hover:bg-[#444b59] border-l-transparent text-gray-300 hover:text-white"}`,children:u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("span",{className:"text-sm font-medium",children:"All Notes"}),u.jsx("span",{className:"text-xs text-gray-400 bg-gray-700 px-2 py-1 rounded",children:J.length})]})}),ie.map(A=>u.jsx("button",{onClick:()=>s(A),className:`w-full px-3 py-2 text-left transition-colors rounded-md border-l-4 mt-1 ${r===A?"bg-[#4a5262] border-l-blue-500 text-white":"hover:bg-[#444b59] border-l-transparent text-gray-300 hover:text-white"}`,children:u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("span",{className:"text-sm font-medium",children:A}),u.jsx("span",{className:"text-xs text-gray-400 bg-gray-700 px-2 py-1 rounded",children:Y[A]||0})]})},A))]})]})}),u.jsxs("div",{className:"flex-1",children:[M?u.jsx("div",{className:"flex justify-center items-center h-64",children:u.jsxs("div",{className:"flex flex-col items-center space-y-3",children:[u.jsx("div",{className:"inline-block h-8 w-8 animate-spin rounded-full border-4 border-solid border-current border-r-transparent text-blue-500"}),u.jsx("span",{className:"text-sm text-gray-400",children:I?"Loading all distinct chords...":"Loading chords..."})]})}):W.length?u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 gap-2 sm:gap-3",children:W.map((A,_)=>u.jsx(U0,{chord:A,index:_,isExpanded:c.has(q(_)),isPlaying:h.has(_),isAdding:m.has(_),onChordPlay:re,onChordAdd:ae,onToggleExpansion:ce},`chord-${A.chordName}-${_}`))}):u.jsx("div",{className:"flex justify-center items-center h-64 bg-[#3d434f] rounded-lg",children:u.jsxs("div",{className:"text-center space-y-3",children:[u.jsx("div",{className:"text-gray-500 text-4xl",children:""}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("div",{className:"text-sm text-gray-400",children:i.trim()?`No chords found matching "${i}"`:r==="All"?I?"No distinct chords available":"No chords available":`No chords found for root note "${r}"`}),(i.trim()||r!=="All")&&u.jsx("button",{onClick:Q,className:"text-sm text-blue-400 hover:text-blue-300 underline transition-colors",children:"Clear filters"})]})]})}),W.length>0&&u.jsx("div",{className:"mt-4 text-center",children:u.jsxs("div",{className:"text-xs text-gray-400",children:["Tap any chord to play ",u.jsx("span",{className:"text-gray-300 mx-1",children:"+"})," to add to sequence ",u.jsx(Co,{className:"inline h-3 w-3 mx-1"})," to show notes for entire row",I&&u.jsx("span",{className:"block mt-1 text-blue-400",children:"Currently showing all distinct chords across all modes and keys (sorted alphabetically)"})]})})]})]})]})},Df=class Df extends w.Component{constructor(){super(...arguments),this.state={instrumentList:null},this.loadInstrumentList=()=>{fetch(`${this.props.hostname}/${this.props.soundfont}/names.json`).then(n=>n.json()).then(n=>{this.setState({instrumentList:n})})}}componentDidMount(){this.loadInstrumentList()}render(){return this.props.render(this.state.instrumentList)}};Df.defaultProps={soundfont:"MusyngKite"};let vd=Df;var pu={exports:{}},mu={exports:{}},gu,Mm;function Kw(){if(Mm)return gu;Mm=1;function e(r){return r>64&&r<91?r-65:r>96&&r<123?r-71:r>47&&r<58?r+4:r===43?62:r===47?63:0}function n(r,s){for(var i=r.replace(/[^A-Za-z0-9\+\/]/g,""),a=i.length,c=s?Math.ceil((a*3+1>>2)/s)*s:a*3+1>>2,d=new Uint8Array(c),h,p,m=0,g=0,x=0;x<a;x++)if(p=x&3,m|=e(i.charCodeAt(x))<<18-6*p,p===3||a-x===1){for(h=0;h<3&&g<c;h++,g++)d[g]=m>>>(16>>>h&24)&255;m=0}return d}return gu={decode:n},gu}var vu,Om;function Yw(){return Om||(Om=1,vu=function(e,n){return new Promise(function(r,s){var i=new XMLHttpRequest;n&&(i.responseType=n),i.open("GET",e),i.onload=function(){i.status===200?r(i.response):s(Error(i.statusText))},i.onerror=function(){s(Error("Network Error"))},i.send()})}),vu}var _m;function Qw(){return _m||(_m=1,function(e){var n=Kw(),r=Yw();function s(O){return function(M){return typeof M=="string"&&O.test(M)}}function i(O,M){return typeof O=="string"?O+M:typeof O=="function"?O(M):M}function a(O,M,q,J){var ie=c(M)?d:h(M)?p:m(M)?g:x(M)?b:S(M)?E:N(M)?j:P(M)?I:D(M)?k:null,Y=q||{};return ie?ie(O,M,Y):J?Promise.resolve(J):Promise.reject("Source not valid ("+M+")")}a.fetch=r;function c(O){return O instanceof ArrayBuffer}function d(O,M,q){return new Promise(function(J,ie){O.decodeAudioData(M,function(Y){J(Y)},function(){ie("Can't decode audio data ("+M.slice(0,30)+"...)")})})}var h=s(/\.(mp3|wav|ogg)(\?.*)?$/i);function p(O,M,q){var J=i(q.from,M);return a(O,a.fetch(J,"arraybuffer"),q)}function m(O){return O&&typeof O.then=="function"}function g(O,M,q){return M.then(function(J){return a(O,J,q)})}var x=Array.isArray;function b(O,M,q){return Promise.all(M.map(function(J){return a(O,J,q,J)}))}function S(O){return O&&typeof O=="object"}function E(O,M,q){var J={},ie=Object.keys(M).map(function(Y){if(q.only&&q.only.indexOf(Y)===-1)return null;var W=M[Y];return a(O,W,q,W).then(function(re){J[Y]=re})});return Promise.all(ie).then(function(){return J})}var N=s(/\.json(\?.*)?$/i);function j(O,M,q){var J=i(q.from,M);return a(O,a.fetch(J,"text").then(JSON.parse),q)}var P=s(/^data:audio/);function I(O,M,q){var J=M.indexOf(",");return a(O,n.decode(M.slice(J+1)).buffer,q)}var D=s(/\.js(\?.*)?$/i);function k(O,M,q){var J=i(q.from,M);return a(O,a.fetch(J,"text").then(R),q)}function R(O){var M=O.indexOf("MIDI.Soundfont.");if(M<0)throw Error("Invalid MIDI.js Soundfont format");M=O.indexOf("=",M)+2;var q=O.lastIndexOf(",");return JSON.parse(O.slice(M,q)+"}")}e.exports&&(e.exports=a),typeof window<"u"&&(window.loadAudio=a)}(mu)),mu.exports}var xu={exports:{}},yu,Lm;function Xw(){if(Lm)return yu;Lm=1,yu=e;function e(d){var h=d.createGain(),p=h._voltage=s(d),m=i(p),g=i(p),x=i(p);return h._startAmount=i(g),h._endAmount=i(x),h._multiplier=i(m),h._multiplier.connect(h),h._startAmount.connect(h),h._endAmount.connect(h),h.value=m.gain,h.startValue=g.gain,h.endValue=x.gain,h.startValue.value=0,h.endValue.value=0,Object.defineProperties(h,n),h}var n={attack:{value:0,writable:!0},decay:{value:0,writable:!0},sustain:{value:1,writable:!0},release:{value:0,writable:!0},getReleaseDuration:{value:function(){return this.release}},start:{value:function(d){var h=this._multiplier.gain,p=this._startAmount.gain,m=this._endAmount.gain;this._voltage.start(d),this._decayFrom=this._decayFrom=d+this.attack,this._startedAt=d;var g=this.sustain;h.cancelScheduledValues(d),p.cancelScheduledValues(d),m.cancelScheduledValues(d),m.setValueAtTime(0,d),this.attack?(h.setValueAtTime(0,d),h.linearRampToValueAtTime(1,d+this.attack),p.setValueAtTime(1,d),p.linearRampToValueAtTime(0,d+this.attack)):(h.setValueAtTime(1,d),p.setValueAtTime(0,d)),this.decay&&h.setTargetAtTime(g,this._decayFrom,a(this.decay))}},stop:{value:function(d,h){h&&(d=d-this.release);var p=d+this.release;if(this.release){var m=this._multiplier.gain,g=this._startAmount.gain,x=this._endAmount.gain;m.cancelScheduledValues(d),g.cancelScheduledValues(d),x.cancelScheduledValues(d);var b=a(this.release);if(this.attack&&d<this._decayFrom){var S=c(0,1,this._startedAt,this._decayFrom,d);m.linearRampToValueAtTime(S,d),g.linearRampToValueAtTime(1-S,d),g.setTargetAtTime(0,d,b)}x.setTargetAtTime(1,d,b),m.setTargetAtTime(0,d,b)}return this._voltage.stop(p),p}},onended:{get:function(){return this._voltage.onended},set:function(d){this._voltage.onended=d}}},r=new Float32Array([1,1]);function s(d){var h=d.createBufferSource(),p=d.createBuffer(1,2,d.sampleRate);return p.getChannelData(0).set(r),h.buffer=p,h.loop=!0,h}function i(d){var h=d.context.createGain();return d.connect(h),h}function a(d){return Math.log(d+1)/Math.log(100)}function c(d,h,p,m,g){var x=h-d,b=m-p,S=g-p,E=S/b,N=d+E*x;return N<=d&&(N=d),N>=h&&(N=h),N}return yu}var bu,Fm;function Jw(){if(Fm)return bu;Fm=1;var e=Xw(),n={},r={gain:1,attack:.01,decay:.1,sustain:.9,release:.3,loop:!1,cents:0,loopStart:0,loopEnd:0};function s(h,p,m){var g=!1,x=0,b={},S=h.createGain();S.gain.value=1;var E=Object.assign({},r,m),N={context:h,out:S,opts:E};return p instanceof AudioBuffer?N.buffer=p:N.buffers=p,N.start=function(I,D,k){if(N.buffer&&I!==null)return N.start(null,I,D);var R=I?N.buffers[I]:N.buffer;if(R){if(!g){console.warn("SamplePlayer not connected to any node.");return}}else{console.warn("Buffer "+I+" not found.");return}var O=k||n;D=Math.max(h.currentTime,D||0),N.emit("start",D,I,O);var M=P(I,R,O);return M.id=j(I,M),M.env.start(D),M.source.start(D),N.emit("started",D,M.id,M),O.duration&&M.stop(D+O.duration),M},N.play=function(I,D,k){return N.start(I,D,k)},N.stop=function(I,D){var k;return D=D||Object.keys(b),D.map(function(R){return k=b[R],k?(k.stop(I),k.id):null})},N.connect=function(I){return g=!0,S.connect(I),N},N.emit=function(I,D,k,R){N.onevent&&N.onevent(I,D,k,R);var O=N["on"+I];O&&O(D,k,R)},N;function j(I,D){return D.id=x++,b[D.id]=D,D.source.onended=function(){var k=h.currentTime;D.source.disconnect(),D.env.disconnect(),D.disconnect(),N.emit("ended",k,D.id,D)},D.id}function P(I,D,k){var R=h.createGain();return R.gain.value=0,R.connect(S),R.env=c(h,k,E),R.env.connect(R.gain),R.source=h.createBufferSource(),R.source.buffer=D,R.source.connect(R),R.source.loop=k.loop||E.loop,R.source.playbackRate.value=d(k.cents||E.cents),R.source.loopStart=k.loopStart||E.loopStart,R.source.loopEnd=k.loopEnd||E.loopEnd,R.stop=function(O){var M=O||h.currentTime;N.emit("stop",M,I);var q=R.env.stop(M);R.source.stop(q)},R}}function i(h){return typeof h=="number"}var a=["attack","decay","sustain","release"];function c(h,p,m){var g=e(h),x=p.adsr||m.adsr;return a.forEach(function(b,S){x?g[b]=x[S]:g[b]=p[b]||m[b]}),g.value.value=i(p.gain)?p.gain:i(m.gain)?m.gain:1,g}function d(h){return h?Math.pow(2,h/1200):1}return bu=s,bu}var wu,Bm;function Zw(){if(Bm)return wu;Bm=1,wu=function(n){return n.on=function(r,s){if(arguments.length===1&&typeof r=="function")return n.on("event",r);var i="on"+r,a=n[i];return n[i]=a?e(a,s):s,n},n};function e(n,r){return function(s,i,a,c){n(s,i,a,c),r(s,i,a,c)}}return wu}var Nu,$m;function eN(){if($m)return Nu;$m=1;var e=/^([a-gA-G])(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)\s*$/;function n(){return e}var r=[0,2,4,5,7,9,11];function s(d,h,p){if(typeof d!="string")return null;var m=e.exec(d);if(!m||!h&&m[4])return null;var g={letter:m[1].toUpperCase(),acc:m[2].replace(/x/g,"##")};return g.pc=g.letter+g.acc,g.step=(g.letter.charCodeAt(0)+3)%7,g.alt=g.acc[0]==="b"?-g.acc.length:g.acc.length,g.chroma=r[g.step]+g.alt,m[3]&&(g.oct=+m[3],g.midi=g.chroma+12*(g.oct+1),g.freq=i(g.midi,p)),h&&(g.tonicOf=m[4]),g}function i(d,h){return Math.pow(2,(d-69)/12)*(h||440)}var a={parse:s,regex:n,midiToFreq:i},c=["letter","acc","pc","step","alt","chroma","oct","midi","freq"];return c.forEach(function(d){a[d]=function(h){var p=s(h);return p&&typeof p[d]<"u"?p[d]:null}}),Nu=a,Nu}var Cu,Gm;function tN(){if(Gm)return Cu;Gm=1;var e=eN(),n=function(i){return i!==null&&i!==[]&&i>=0&&i<129},r=function(i){return n(i)?+i:e.midi(i)};Cu=function(i){if(i.buffers){var a=i.opts.map,c=typeof a=="function"?a:r,d=function(p){return p?c(p)||p:null};i.buffers=s(i.buffers,d);var h=i.start;i.start=function(p,m,g){var x=d(p),b=x%1;return b&&(x=Math.floor(x),g=Object.assign(g||{},{cents:Math.floor(b*100)})),h(x,m,g)}}return i};function s(i,a){return Object.keys(i).reduce(function(c,d){return c[a(d)]=i[d],c},{})}return Cu}var Su,Um;function nN(){if(Um)return Su;Um=1;var e=Array.isArray,n=function(s){return s&&typeof s=="object"},r={};return Su=function(s){return s.schedule=function(i,a){var c=s.context.currentTime,d=i<c?c:i;s.emit("schedule",d,a);var h,p,m,g;return a.map(function(x){if(x)e(x)?(h=x[0],p=x[1]):(h=x.time,p=x);else return null;return n(p)?(m=p.name||p.key||p.note||p.midi||null,g=p):(m=p,g=r),s.start(m,d+(h||0),g)})},s},Su}function Pa(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Eu={exports:{}},Vm;function rN(){return Vm||(Vm=1,function(e,n){(function(r){e.exports=r()})(function(){return function r(s,i,a){function c(p,m){if(!i[p]){if(!s[p]){var g=typeof Pa=="function"&&Pa;if(!m&&g)return g(p,!0);if(d)return d(p,!0);var x=new Error("Cannot find module '"+p+"'");throw x.code="MODULE_NOT_FOUND",x}var b=i[p]={exports:{}};s[p][0].call(b.exports,function(S){var E=s[p][1][S];return c(E||S)},b,b.exports,r,s,i,a)}return i[p].exports}for(var d=typeof Pa=="function"&&Pa,h=0;h<a.length;h++)c(a[h]);return c}({1:[function(r,s,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(a){function c(d){if(this._event=d,this._data=d.data,this.receivedTime=d.receivedTime,this._data&&this._data.length<2){console.warn("Illegal MIDI message of length",this._data.length);return}switch(this._messageCode=d.data[0]&240,this.channel=d.data[0]&15,this._messageCode){case 128:this.messageType="noteoff",this.key=d.data[1]&127,this.velocity=d.data[2]&127;break;case 144:this.messageType="noteon",this.key=d.data[1]&127,this.velocity=d.data[2]&127;break;case 160:this.messageType="keypressure",this.key=d.data[1]&127,this.pressure=d.data[2]&127;break;case 176:this.messageType="controlchange",this.controllerNumber=d.data[1]&127,this.controllerValue=d.data[2]&127,this.controllerNumber===120&&this.controllerValue===0?this.channelModeMessage="allsoundoff":this.controllerNumber===121?this.channelModeMessage="resetallcontrollers":this.controllerNumber===122?this.controllerValue===0?this.channelModeMessage="localcontroloff":this.channelModeMessage="localcontrolon":this.controllerNumber===123&&this.controllerValue===0?this.channelModeMessage="allnotesoff":this.controllerNumber===124&&this.controllerValue===0?this.channelModeMessage="omnimodeoff":this.controllerNumber===125&&this.controllerValue===0?this.channelModeMessage="omnimodeon":this.controllerNumber===126?this.channelModeMessage="monomodeon":this.controllerNumber===127&&(this.channelModeMessage="polymodeon");break;case 192:this.messageType="programchange",this.program=d.data[1];break;case 208:this.messageType="channelpressure",this.pressure=d.data[1]&127;break;case 224:this.messageType="pitchbendchange";var h=d.data[2]&127,p=d.data[1]&127;this.pitchBend=(h<<8)+p;break}}return new c(a)},s.exports=i.default},{}]},{},[1])(1)})}(Eu)),Eu.exports}var Du,zm;function oN(){if(zm)return Du;zm=1;var e=rN();return Du=function(n){return n.listenToMidi=function(r,s){var i={},a=s||{},c=a.gain||function(d){return d/127};return r.onmidimessage=function(d){var h=d.messageType?d:e(d);if(h.messageType==="noteon"&&h.velocity===0&&(h.messageType="noteoff"),!(a.channel&&h.channel!==a.channel))switch(h.messageType){case"noteon":i[h.key]=n.play(h.key,0,{gain:c(h.velocity)});break;case"noteoff":i[h.key]&&(i[h.key].stop(),delete i[h.key]);break}},n},n},Du}var Wm;function sN(){return Wm||(Wm=1,function(e){var n=Jw(),r=Zw(),s=tN(),i=nN(),a=oN();function c(d,h,p){return a(i(s(r(n(d,h,p)))))}e.exports&&(e.exports=c),typeof window<"u"&&(window.SamplePlayer=c)}(xu)),xu.exports}function Hm(e,n){return Array(n+1).join(e)}function Hd(e){return typeof e=="number"}function iN(e){return typeof e=="string"}function aN(e){return typeof e<"u"}function V0(e,n){return Math.pow(2,(e-69)/12)*(n||440)}var z0=/^([a-gA-G])(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)\s*$/;function lN(){return z0}var cN=[0,2,4,5,7,9,11];function Dr(e,n,r){if(typeof e!="string")return null;var s=z0.exec(e);if(!s||!n&&s[4])return null;var i={letter:s[1].toUpperCase(),acc:s[2].replace(/x/g,"##")};i.pc=i.letter+i.acc,i.step=(i.letter.charCodeAt(0)+3)%7,i.alt=i.acc[0]==="b"?-i.acc.length:i.acc.length;var a=cN[i.step]+i.alt;return i.chroma=a<0?12+a:a%12,s[3]&&(i.oct=+s[3],i.midi=a+12*(i.oct+1),i.freq=V0(i.midi,r)),n&&(i.tonicOf=s[4]),i}var uN="CDEFGAB";function dN(e){return Hd(e)?e<0?Hm("b",-e):Hm("#",e):""}function fN(e){return Hd(e)?""+e:""}function W0(e,n,r){return e===null||typeof e>"u"?null:e.step?W0(e.step,e.alt,e.oct):e<0||e>6?null:uN.charAt(e)+dN(n)+fN(r)}function H0(e){if((Hd(e)||iN(e))&&e>=0&&e<128)return+e;var n=Dr(e);return n&&aN(n.midi)?n.midi:null}function hN(e,n){var r=H0(e);return r===null?null:V0(r,n)}function pN(e){return(Dr(e)||{}).letter}function mN(e){return(Dr(e)||{}).acc}function gN(e){return(Dr(e)||{}).pc}function vN(e){return(Dr(e)||{}).step}function xN(e){return(Dr(e)||{}).alt}function yN(e){return(Dr(e)||{}).chroma}function bN(e){return(Dr(e)||{}).oct}const wN=Object.freeze(Object.defineProperty({__proto__:null,acc:mN,alt:xN,build:W0,chroma:yN,freq:hN,letter:pN,midi:H0,oct:bN,parse:Dr,pc:gN,regex:lN,step:vN},Symbol.toStringTag,{value:"Module"})),NN=P0(wN);var Au,qm;function CN(){if(qm)return Au;qm=1;var e=NN;function n(i,a){if(console.warn("new Soundfont() is deprected"),console.log("Please use Soundfont.instrument() instead of new Soundfont().instrument()"),!(this instanceof n))return new n(i);this.nameToUrl=a||n.nameToUrl,this.ctx=i,this.instruments={},this.promises=[]}n.prototype.onready=function(i){console.warn("deprecated API"),console.log("Please use Promise.all(Soundfont.instrument(), Soundfont.instrument()).then() instead of new Soundfont().onready()"),Promise.all(this.promises).then(i)},n.prototype.instrument=function(i,a){console.warn("new Soundfont().instrument() is deprecated."),console.log("Please use Soundfont.instrument() instead.");var c=this.ctx;if(i=i||"default",i in this.instruments)return this.instruments[i];var d={name:i,play:s(c,a)};if(this.instruments[i]=d,i!=="default"){var h=n.instrument(c,i,a).then(function(p){return d.play=p.play,d});this.promises.push(h),d.onready=function(p){console.warn("onready is deprecated. Use Soundfont.instrument().then()"),h.then(p)}}else d.onready=function(p){console.warn("onready is deprecated. Use Soundfont.instrument().then()"),p()};return d};function r(i,a,c){return console.warn("Soundfont.loadBuffers is deprecate."),console.log("Use Soundfont.instrument(..) and get buffers properties from the result."),n.instrument(i,a,c).then(function(d){return d.buffers})}n.loadBuffers=r;function s(i,a){return a=a||{},function(c,d,h,p){console.warn("The oscillator player is deprecated."),console.log("Starting with version 0.9.0 you will have to wait until the soundfont is loaded to play sounds.");var m=c>0&&c<129?+c:e.midi(c),g=m?e.midiToFreq(m,440):null;if(g){h=h||.2,p=p||{};var x=p.destination||a.destination||i.destination,b=p.vcoType||a.vcoType||"sine",S=p.gain||a.gain||.4,E=i.createOscillator();E.type=b,E.frequency.value=g;var N=i.createGain();return N.gain.value=S,E.connect(N),N.connect(x),E.start(d),h>0&&E.stop(d+h),E}}}return n.noteToMidi=e.midi,Au=n,Au}var Km;function SN(){return Km||(Km=1,function(e){var n=Qw(),r=sN();function s(d,h,p){if(arguments.length===1)return function(S,E){return s(d,S,E)};var m=p||{},g=m.isSoundfontURL||i,x=m.nameToUrl||a,b=g(h)?h:x(h,m.soundfont,m.format);return n(d,b,{only:m.only||m.notes}).then(function(S){var E=r(d,S,m).connect(m.destination?m.destination:d.destination);return E.url=b,E.name=h,E})}function i(d){return/\.js(\?.*)?$/i.test(d)}function a(d,h,p){return p=p==="ogg"?p:"mp3",h=h==="FluidR3_GM"?h:"MusyngKite","https://gleitz.github.io/midi-js-soundfonts/"+h+"/"+d+"-"+p+".js"}var c=CN();c.instrument=s,c.nameToUrl=a,e.exports&&(e.exports=c),typeof window<"u"&&(window.Soundfont=c)}(pu)),pu.exports}var EN=SN();const DN=Er(EN),Af=class Af extends ve.Component{constructor(n){super(n),this.setupAudioChain=()=>{const{audioContext:r,eq:s,reverbLevel:i,volume:a,chorusLevel:c,delayLevel:d,distortionLevel:h,bitcrusherLevel:p,phaserLevel:m,flangerLevel:g,ringModLevel:x,autoFilterLevel:b,tremoloLevel:S,stereoWidthLevel:E,compressorLevel:N}=this.props;this.effectsChain=r.createGain(),this.masterVolumeNode=r.createGain(),this.masterVolumeNode.gain.value=a,this.bassNode=r.createBiquadFilter(),this.midNode=r.createBiquadFilter(),this.trebleNode=r.createBiquadFilter(),this.bassNode.type="lowshelf",this.bassNode.frequency.value=320,this.bassNode.gain.value=s.bass,this.midNode.type="peaking",this.midNode.frequency.value=1e3,this.midNode.Q.value=1,this.midNode.gain.value=s.mid,this.trebleNode.type="highshelf",this.trebleNode.frequency.value=3200,this.trebleNode.gain.value=s.treble,this.distortionNode=r.createWaveShaper(),this.distortionNode.curve=this.makeDistortionCurve(0),this.distortionNode.oversample="4x",this.distortionDryGain=r.createGain(),this.distortionWetGain=r.createGain(),this.distortionMixNode=r.createGain(),this.bitcrusherNode=r.createWaveShaper(),this.bitcrusherNode.curve=this.makeBitcrusherCurve(16),this.bitcrusherDryGain=r.createGain(),this.bitcrusherWetGain=r.createGain(),this.bitcrusherMixNode=r.createGain(),this.phaserAllPass1=r.createBiquadFilter(),this.phaserAllPass2=r.createBiquadFilter(),this.phaserAllPass3=r.createBiquadFilter(),this.phaserAllPass4=r.createBiquadFilter(),[this.phaserAllPass1,this.phaserAllPass2,this.phaserAllPass3,this.phaserAllPass4].forEach(j=>{j.type="allpass",j.frequency.value=1e3}),this.phaserLFO=r.createOscillator(),this.phaserLFO.frequency.value=.5,this.phaserLFO.type="sine",this.phaserLFOGain=r.createGain(),this.phaserLFOGain.gain.value=800,this.phaserDryGain=r.createGain(),this.phaserWetGain=r.createGain(),this.phaserMixNode=r.createGain(),this.phaserLFO.connect(this.phaserLFOGain),this.phaserLFOGain.connect(this.phaserAllPass1.frequency),this.phaserLFOGain.connect(this.phaserAllPass2.frequency),this.phaserLFOGain.connect(this.phaserAllPass3.frequency),this.phaserLFOGain.connect(this.phaserAllPass4.frequency),this.phaserLFO.start(),this.flangerDelayNode=r.createDelay(.02),this.flangerDelayNode.delayTime.value=.005,this.flangerLFO=r.createOscillator(),this.flangerLFO.frequency.value=.5,this.flangerLFO.type="sine",this.flangerLFOGain=r.createGain(),this.flangerLFOGain.gain.value=.003,this.flangerFeedbackGain=r.createGain(),this.flangerFeedbackGain.gain.value=.5,this.flangerDryGain=r.createGain(),this.flangerWetGain=r.createGain(),this.flangerMixNode=r.createGain(),this.flangerLFO.connect(this.flangerLFOGain),this.flangerLFOGain.connect(this.flangerDelayNode.delayTime),this.flangerDelayNode.connect(this.flangerFeedbackGain),this.flangerFeedbackGain.connect(this.flangerDelayNode),this.flangerLFO.start(),this.ringModGain=r.createGain(),this.ringModGain.gain.value=0,this.ringModOscillator=r.createOscillator(),this.ringModOscillator.frequency.value=100,this.ringModOscillator.type="sine",this.ringModDryGain=r.createGain(),this.ringModWetGain=r.createGain(),this.ringModMixNode=r.createGain(),this.ringModOscillator.connect(this.ringModGain.gain),this.ringModOscillator.start(),this.autoFilterNode=r.createBiquadFilter(),this.autoFilterNode.type="lowpass",this.autoFilterNode.frequency.value=2e3,this.autoFilterNode.Q.value=5,this.autoFilterLFO=r.createOscillator(),this.autoFilterLFO.frequency.value=2,this.autoFilterLFO.type="sine",this.autoFilterLFOGain=r.createGain(),this.autoFilterLFOGain.gain.value=1500,this.autoFilterDryGain=r.createGain(),this.autoFilterWetGain=r.createGain(),this.autoFilterMixNode=r.createGain(),this.autoFilterLFO.connect(this.autoFilterLFOGain),this.autoFilterLFOGain.connect(this.autoFilterNode.frequency),this.autoFilterLFO.start(),this.tremoloGain=r.createGain(),this.tremoloGain.gain.value=1,this.tremoloLFO=r.createOscillator(),this.tremoloLFO.frequency.value=5,this.tremoloLFO.type="sine",this.tremoloLFOGain=r.createGain(),this.tremoloLFOGain.gain.value=0,this.tremoloDryGain=r.createGain(),this.tremoloWetGain=r.createGain(),this.tremoloMixNode=r.createGain(),this.tremoloLFO.connect(this.tremoloLFOGain),this.tremoloLFOGain.connect(this.tremoloGain.gain),this.tremoloLFO.start(),this.stereoWidthSplitter=r.createChannelSplitter(2),this.stereoWidthMerger=r.createChannelMerger(2),this.stereoWidthDelayL=r.createDelay(.03),this.stereoWidthDelayR=r.createDelay(.03),this.stereoWidthDelayL.delayTime.value=0,this.stereoWidthDelayR.delayTime.value=.02,this.stereoWidthDryGain=r.createGain(),this.stereoWidthWetGain=r.createGain(),this.stereoWidthMixNode=r.createGain(),this.compressorNode=r.createDynamicsCompressor(),this.compressorNode.threshold.value=-24,this.compressorNode.knee.value=30,this.compressorNode.ratio.value=12,this.compressorNode.attack.value=.003,this.compressorNode.release.value=.25,this.compressorDryGain=r.createGain(),this.compressorWetGain=r.createGain(),this.compressorMixNode=r.createGain(),this.chorusDelayNode=r.createDelay(.05),this.chorusDelayNode.delayTime.value=.015,this.chorusLFO=r.createOscillator(),this.chorusLFO.frequency.value=1.5,this.chorusLFO.type="sine",this.chorusLFOGain=r.createGain(),this.chorusLFOGain.gain.value=.005,this.chorusDryGain=r.createGain(),this.chorusWetGain=r.createGain(),this.chorusMixNode=r.createGain(),this.chorusLFO.connect(this.chorusLFOGain),this.chorusLFOGain.connect(this.chorusDelayNode.delayTime),this.chorusLFO.start(),this.delayNode=r.createDelay(1),this.delayNode.delayTime.value=.3,this.delayFeedbackGain=r.createGain(),this.delayFeedbackGain.gain.value=.4,this.delayDryGain=r.createGain(),this.delayWetGain=r.createGain(),this.delayMixNode=r.createGain(),this.delayNode.connect(this.delayFeedbackGain),this.delayFeedbackGain.connect(this.delayNode),this.convolverNode=r.createConvolver(),this.wetGainNode=r.createGain(),this.dryGainNode=r.createGain(),this.convolverNode.buffer=this.generateImpulseResponse(r),this.effectsChain.connect(this.masterVolumeNode),this.masterVolumeNode.connect(this.bassNode),this.bassNode.connect(this.midNode),this.midNode.connect(this.trebleNode),this.trebleNode.connect(this.distortionDryGain),this.trebleNode.connect(this.distortionNode),this.distortionNode.connect(this.distortionWetGain),this.distortionDryGain.connect(this.distortionMixNode),this.distortionWetGain.connect(this.distortionMixNode),this.distortionMixNode.connect(this.bitcrusherDryGain),this.distortionMixNode.connect(this.bitcrusherNode),this.bitcrusherNode.connect(this.bitcrusherWetGain),this.bitcrusherDryGain.connect(this.bitcrusherMixNode),this.bitcrusherWetGain.connect(this.bitcrusherMixNode),this.bitcrusherMixNode.connect(this.phaserDryGain),this.bitcrusherMixNode.connect(this.phaserAllPass1),this.phaserAllPass1.connect(this.phaserAllPass2),this.phaserAllPass2.connect(this.phaserAllPass3),this.phaserAllPass3.connect(this.phaserAllPass4),this.phaserAllPass4.connect(this.phaserWetGain),this.phaserDryGain.connect(this.phaserMixNode),this.phaserWetGain.connect(this.phaserMixNode),this.phaserMixNode.connect(this.flangerDryGain),this.phaserMixNode.connect(this.flangerDelayNode),this.flangerDelayNode.connect(this.flangerWetGain),this.flangerDryGain.connect(this.flangerMixNode),this.flangerWetGain.connect(this.flangerMixNode),this.flangerMixNode.connect(this.ringModDryGain),this.flangerMixNode.connect(this.ringModGain),this.ringModGain.connect(this.ringModWetGain),this.ringModDryGain.connect(this.ringModMixNode),this.ringModWetGain.connect(this.ringModMixNode),this.ringModMixNode.connect(this.autoFilterDryGain),this.ringModMixNode.connect(this.autoFilterNode),this.autoFilterNode.connect(this.autoFilterWetGain),this.autoFilterDryGain.connect(this.autoFilterMixNode),this.autoFilterWetGain.connect(this.autoFilterMixNode),this.autoFilterMixNode.connect(this.tremoloDryGain),this.autoFilterMixNode.connect(this.tremoloGain),this.tremoloGain.connect(this.tremoloWetGain),this.tremoloDryGain.connect(this.tremoloMixNode),this.tremoloWetGain.connect(this.tremoloMixNode),this.tremoloMixNode.connect(this.chorusDryGain),this.tremoloMixNode.connect(this.chorusDelayNode),this.chorusDelayNode.connect(this.chorusWetGain),this.chorusDryGain.connect(this.chorusMixNode),this.chorusWetGain.connect(this.chorusMixNode),this.chorusMixNode.connect(this.delayDryGain),this.chorusMixNode.connect(this.delayNode),this.delayNode.connect(this.delayWetGain),this.delayDryGain.connect(this.delayMixNode),this.delayWetGain.connect(this.delayMixNode),this.delayMixNode.connect(this.stereoWidthDryGain),this.delayMixNode.connect(this.stereoWidthSplitter),this.stereoWidthSplitter.connect(this.stereoWidthDelayL,0),this.stereoWidthSplitter.connect(this.stereoWidthDelayR,1),this.stereoWidthDelayL.connect(this.stereoWidthMerger,0,0),this.stereoWidthDelayR.connect(this.stereoWidthMerger,0,1),this.stereoWidthMerger.connect(this.stereoWidthWetGain),this.stereoWidthDryGain.connect(this.stereoWidthMixNode),this.stereoWidthWetGain.connect(this.stereoWidthMixNode),this.stereoWidthMixNode.connect(this.compressorDryGain),this.stereoWidthMixNode.connect(this.compressorNode),this.compressorNode.connect(this.compressorWetGain),this.compressorDryGain.connect(this.compressorMixNode),this.compressorWetGain.connect(this.compressorMixNode),this.compressorMixNode.connect(this.dryGainNode),this.compressorMixNode.connect(this.convolverNode),this.convolverNode.connect(this.wetGainNode),this.dryGainNode.connect(r.destination),this.wetGainNode.connect(r.destination),this.updateReverbMix(i),this.updateChorusMix(c),this.updateDelayMix(d),this.updateDistortionMix(h),this.updateBitcrusherMix(p),this.updatePhaserMix(m),this.updateFlangerMix(g),this.updateRingModMix(x),this.updateAutoFilterMix(b),this.updateTremoloMix(S),this.updateStereoWidthMix(E),this.updateCompressorMix(N)},this.makeDistortionCurve=r=>{const i=new Float32Array(44100),a=Math.PI/180,c=r*100;for(let d=0;d<44100;d++){const h=d*2/44100-1;i[d]=(3+c)*h*20*a/(Math.PI+c*Math.abs(h))}return i},this.makeBitcrusherCurve=r=>{const i=new Float32Array(65536),a=Math.pow(.5,r);for(let c=0;c<65536;c++){const d=c*2/65536-1;i[c]=a*Math.floor(d/a+.5)}return i},this.generateImpulseResponse=r=>{const s=r.sampleRate,i=3,a=1.5,c=r.createBuffer(2,i*s,s);for(let d=0;d<2;d++){const h=c.getChannelData(d);for(let p=0;p<c.length;p++){const m=p/c.length,g=Math.sin(m*Math.PI*20)*Math.exp(-m*3),x=(Math.random()*2-1)*Math.pow(1-m,a),b=Math.sin(m*Math.PI*100)*.1*Math.exp(-m*8);h[p]=(g*.3+x*.6+b*.1)*1.5,d===1&&(h[p]*=1+Math.sin(m*Math.PI*7)*.2)}}return c},this.updateReverbMix=r=>{const s=this.props.audioContext.currentTime,i=Math.pow(r,.7)*1.2,a=1-r*.6;this.dryGainNode.gain.setValueAtTime(a,s),this.wetGainNode.gain.setValueAtTime(i,s)},this.updateChorusMix=r=>{const s=this.props.audioContext.currentTime,i=r*.8,a=1-r*.3;this.chorusDryGain.gain.setValueAtTime(a,s),this.chorusWetGain.gain.setValueAtTime(i,s)},this.updateDelayMix=r=>{const s=this.props.audioContext.currentTime,i=r*.6,a=1-r*.2;this.delayDryGain.gain.setValueAtTime(a,s),this.delayWetGain.gain.setValueAtTime(i,s)},this.updateDistortionMix=r=>{const s=this.props.audioContext.currentTime;this.distortionNode.curve=this.makeDistortionCurve(r);const i=r,a=1-r*.7;this.distortionDryGain.gain.setValueAtTime(a,s),this.distortionWetGain.gain.setValueAtTime(i,s)},this.updateBitcrusherMix=r=>{const s=this.props.audioContext.currentTime,i=Math.floor(16-r*12);this.bitcrusherNode.curve=this.makeBitcrusherCurve(i);const a=r,c=1-r*.8;this.bitcrusherDryGain.gain.setValueAtTime(c,s),this.bitcrusherWetGain.gain.setValueAtTime(a,s)},this.updatePhaserMix=r=>{const s=this.props.audioContext.currentTime,i=r*.7,a=1-r*.3;this.phaserDryGain.gain.setValueAtTime(a,s),this.phaserWetGain.gain.setValueAtTime(i,s)},this.updateFlangerMix=r=>{const s=this.props.audioContext.currentTime,i=r*.8,a=1-r*.4;this.flangerDryGain.gain.setValueAtTime(a,s),this.flangerWetGain.gain.setValueAtTime(i,s)},this.updateRingModMix=r=>{const s=this.props.audioContext.currentTime,i=50+r*300;this.ringModOscillator.frequency.setValueAtTime(i,s);const a=r,c=1-r*.6;this.ringModDryGain.gain.setValueAtTime(c,s),this.ringModWetGain.gain.setValueAtTime(a,s)},this.updateAutoFilterMix=r=>{const s=this.props.audioContext.currentTime,i=r,a=1-r*.5;this.autoFilterDryGain.gain.setValueAtTime(a,s),this.autoFilterWetGain.gain.setValueAtTime(i,s)},this.updateTremoloMix=r=>{const s=this.props.audioContext.currentTime;this.tremoloLFOGain.gain.setValueAtTime(r*.5,s);const i=r,a=1-r*.3;this.tremoloDryGain.gain.setValueAtTime(a,s),this.tremoloWetGain.gain.setValueAtTime(i,s)},this.updateStereoWidthMix=r=>{const s=this.props.audioContext.currentTime,i=r*.015;this.stereoWidthDelayR.delayTime.setValueAtTime(i,s);const a=r,c=1-r*.5;this.stereoWidthDryGain.gain.setValueAtTime(c,s),this.stereoWidthWetGain.gain.setValueAtTime(a,s)},this.updateCompressorMix=r=>{const s=this.props.audioContext.currentTime,i=-50+r*26,a=1+r*11;this.compressorNode.threshold.setValueAtTime(i,s),this.compressorNode.ratio.setValueAtTime(a,s);const c=r,d=1-r*.4;this.compressorDryGain.gain.setValueAtTime(d,s),this.compressorWetGain.gain.setValueAtTime(c,s)},this.updateVolume=r=>{const s=this.props.audioContext.currentTime;this.masterVolumeNode.gain.setValueAtTime(r,s)},this.loadInstrument=r=>{this.setState({instrument:null}),DN.instrument(this.props.audioContext,r,{format:this.props.format,soundfont:this.props.soundfont,nameToUrl:(s,i,a)=>`${this.props.hostname}/${i}/${s}-${a}.js`,destination:this.effectsChain}).then(s=>{this.setState({instrument:s}),this.props.onLoad&&this.props.onLoad({playNote:this.playNote,stopNote:this.stopNote,stopAllNotes:this.stopAllNotes})})},this.playNote=r=>{this.resumeAudio().then(()=>{if(!this.state.instrument)return;const s=this.state.instrument.play(r.toString());this.setState(i=>({activeAudioNodes:{...i.activeAudioNodes,[r]:s}}))})},this.stopNote=r=>{this.resumeAudio().then(()=>{const s=this.state.activeAudioNodes[r];s&&(s.stop(),this.setState(i=>{const a={...i.activeAudioNodes};return delete a[r],{activeAudioNodes:a}}))})},this.resumeAudio=()=>this.props.audioContext.state==="suspended"?this.props.audioContext.resume():Promise.resolve(),this.stopAllNotes=()=>{this.resumeAudio().then(()=>{Object.values(this.state.activeAudioNodes).forEach(r=>{r&&r.stop()}),this.setState({activeAudioNodes:{}})})},this.state={activeAudioNodes:{},instrument:null},this.setupAudioChain()}componentDidMount(){this.loadInstrument(this.props.instrumentName)}componentDidUpdate(n){if(n.instrumentName!==this.props.instrumentName&&this.loadInstrument(this.props.instrumentName),JSON.stringify(n.eq)!==JSON.stringify(this.props.eq)){const r=this.props.audioContext.currentTime;this.bassNode.gain.setValueAtTime(this.props.eq.bass,r),this.midNode.gain.setValueAtTime(this.props.eq.mid,r),this.trebleNode.gain.setValueAtTime(this.props.eq.treble,r)}n.reverbLevel!==this.props.reverbLevel&&this.updateReverbMix(this.props.reverbLevel),n.volume!==this.props.volume&&this.updateVolume(this.props.volume),n.chorusLevel!==this.props.chorusLevel&&this.updateChorusMix(this.props.chorusLevel),n.delayLevel!==this.props.delayLevel&&this.updateDelayMix(this.props.delayLevel),n.distortionLevel!==this.props.distortionLevel&&this.updateDistortionMix(this.props.distortionLevel),n.bitcrusherLevel!==this.props.bitcrusherLevel&&this.updateBitcrusherMix(this.props.bitcrusherLevel),n.phaserLevel!==this.props.phaserLevel&&this.updatePhaserMix(this.props.phaserLevel),n.flangerLevel!==this.props.flangerLevel&&this.updateFlangerMix(this.props.flangerLevel),n.ringModLevel!==this.props.ringModLevel&&this.updateRingModMix(this.props.ringModLevel),n.autoFilterLevel!==this.props.autoFilterLevel&&this.updateAutoFilterMix(this.props.autoFilterLevel),n.tremoloLevel!==this.props.tremoloLevel&&this.updateTremoloMix(this.props.tremoloLevel),n.stereoWidthLevel!==this.props.stereoWidthLevel&&this.updateStereoWidthMix(this.props.stereoWidthLevel),n.compressorLevel!==this.props.compressorLevel&&this.updateCompressorMix(this.props.compressorLevel)}render(){return this.props.render?this.props.render({isLoading:!this.state.instrument,playNote:this.playNote,stopNote:this.stopNote,stopAllNotes:this.stopAllNotes}):null}};Af.defaultProps={format:"mp3",soundfont:"MusyngKite",instrumentName:"acoustic_grand_piano",eq:{bass:0,mid:0,treble:0},reverbLevel:0,volume:.8,chorusLevel:0,delayLevel:0,distortionLevel:0,bitcrusherLevel:0,phaserLevel:0,flangerLevel:0,ringModLevel:0,autoFilterLevel:0,tremoloLevel:0,stereoWidthLevel:0,compressorLevel:0};let xd=Af;const Ym=typeof window<"u"?new(window.AudioContext||window.webkitAudioContext):null,AN=4,jN=7,IN=({hideConfigControls:e=!1})=>{const n=ct(V=>V.normalizedScaleNotes),r=Ye(V=>V.pianoSettings),s=Ye(V=>V.availableInstruments),i=Ye(V=>V.setAvailableInstruments),a=Oe(V=>V.activeNotes),c=Oe(V=>V.activeChordIndex),d=Oe(V=>V.addedChords),h=yt(V=>V.currentlyActivePattern),p=yt(V=>V.globalPatternState),m="https://d1pzp51pvbm36p.cloudfront.net",g=w.useRef(null),[x,b]=w.useState([]),S=w.useRef(-1),E=w.useRef(null),N=w.useRef(null),j=w.useRef(null),[P,I]=w.useState(500),D=w.useMemo(()=>{const V=P;return V<400?Math.max(320,V-40):V<768?Math.min(600,V-60):V<1200?Math.min(800,V-80):Math.min(1e3,V-100)},[P]),k=w.useMemo(()=>{let V;return()=>{clearTimeout(V),V=window.setTimeout(()=>{j.current&&I(j.current.offsetWidth)},100)}},[]);w.useEffect(()=>{j.current&&I(j.current.offsetWidth);const V=new ResizeObserver(()=>{k()});return j.current&&V.observe(j.current),window.addEventListener("resize",k),()=>{V.disconnect(),window.removeEventListener("resize",k)}},[k]),w.useEffect(()=>{N.current&&N.current.length>0&&N.current!==s&&i(N.current)},[s,i]);const{firstNote:R,lastNote:O,keyboardShortcuts:M,midiOffset:q}=w.useMemo(()=>{const V="c",F=ka(V,AN),A=ka(V,jN),_=r.octaveOffset*12;return{firstNote:F,lastNote:A,midiOffset:_,keyboardShortcuts:vm.create({firstNote:F,lastNote:A,keyboardConfig:vm.HOME_ROW})}},[r.octaveOffset]),[J,ie]=w.useState({instrumentName:r.instrumentName});w.useEffect(()=>{ie(V=>({...V,instrumentName:r.instrumentName}))},[r.instrumentName]),w.useEffect(()=>{if(E.current&&(clearTimeout(E.current),E.current=null),!p.isPlaying&&a.length>0){const V=a.map(({note:F,octave:A=4})=>ka(F,A));b(V),E.current=setTimeout(()=>{p.isPlaying||b([])},2e3)}else!p.isPlaying&&a.length===0&&b([]);return()=>{E.current&&(clearTimeout(E.current),E.current=null)}},[a,p.isPlaying]);const Y=w.useCallback(()=>c!==null&&d[c]?d[c].pattern:h,[c,d,h]),W=w.useCallback((V,F)=>{if(V==="x"||V==="X")return null;const A=V.includes("+"),_=V.includes("-"),Z=parseInt(V.replace(/[+-]/g,""))-1;return Z>=0&&Z<F?{noteIndex:Z,octaveUp:A,octaveDown:_}:null},[]),re=w.useCallback(()=>6e4/p.bpm*p.subdivision,[p.bpm,p.subdivision]);w.useEffect(()=>{const V=Y();if(p.isPlaying&&a.length>0&&V?.length>0&&p.currentStep!==S.current){S.current=p.currentStep;const F=p.currentStep%V.length,A=V[F],_=W(A,a.length);if(_){const{noteIndex:Z,octaveUp:oe,octaveDown:fe}=_,{note:he,octave:Pe=4}=a[Z];let ye=Pe;oe&&(ye+=1),fe&&(ye-=1),ye=Math.max(1,Math.min(8,ye));const Se=ka(he,ye);!r.cutOffPreviousNotes&&g.current&&g.current(),b([Se]);const we=re(),ht=Math.min(we*r.noteDuration,we-50);setTimeout(()=>{b([])},ht)}else b([])}else p.isPlaying||S.current!==-1&&(b([]),S.current=-1)},[p.currentStep,p.isPlaying,a,r.cutOffPreviousNotes,r.noteDuration,re,Y,W]);const ae=w.useCallback(V=>F=>{!r.cutOffPreviousNotes&&g.current&&g.current(),V(F+q)},[r.cutOffPreviousNotes,q]),ce=w.useCallback(V=>F=>{V(F+q)},[q]),ee=w.useCallback(({midiNumber:V,isAccidental:F})=>{const A=hn.getAttributes(V).note.slice(0,-1);return n.includes(Zr(A))?u.jsx("div",{className:`mx-auto mb-2 w-2 h-2 rounded-full ${F?"bg-blue-300":"bg-blue-500"}`}):null},[n]),Q=w.useMemo(()=>({instrumentName:r.instrumentName,audioContext:Ym,hostname:m,eq:r.eq,reverbLevel:r.reverbLevel,volume:r.volume,chorusLevel:r.chorusLevel,delayLevel:r.delayLevel,distortionLevel:r.distortionLevel,bitcrusherLevel:r.bitcrusherLevel,phaserLevel:r.phaserLevel,flangerLevel:r.flangerLevel,ringModLevel:r.ringModLevel,autoFilterLevel:r.autoFilterLevel,tremoloLevel:r.tremoloLevel,stereoWidthLevel:r.stereoWidthLevel,compressorLevel:r.compressorLevel}),[r]);return Ym?u.jsx(xd,{...Q,render:({isLoading:V,playNote:F,stopNote:A,stopAllNotes:_})=>(g.current=_,u.jsxs(u.Fragment,{children:[u.jsx("div",{ref:j,className:"relative w-full",children:u.jsx("div",{className:"w-full flex justify-center overflow-x-auto",children:u.jsx(Gd,{noteRange:{first:R,last:O},playNote:ae(F),stopNote:ce(A),disabled:V,width:D,className:"mx-auto w-full",activeNotes:x,renderNoteLabel:ee})})}),u.jsx(vd,{hostname:m,render:Z=>(Z&&Z.length>0&&(N.current=Z),u.jsx(u.Fragment,{}))})]}))}):u.jsx("div",{children:"Audio context is not available."})},kN="modulepreload",PN=function(e){return"/"+e},Qm={},TN=function(n,r,s){let i=Promise.resolve();if(r&&r.length>0){let h=function(p){return Promise.all(p.map(m=>Promise.resolve(m).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),d=c?.nonce||c?.getAttribute("nonce");i=h(r.map(p=>{if(p=PN(p),p in Qm)return;Qm[p]=!0;const m=p.endsWith(".css"),g=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${g}`))return;const x=document.createElement("link");if(x.rel=m?"stylesheet":kN,m||(x.as="script"),x.crossOrigin="",x.href=p,d&&x.setAttribute("nonce",d),document.head.appendChild(x),m)return new Promise((b,S)=>{x.addEventListener("load",b),x.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${p}`)))})}))}function a(c){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=c,window.dispatchEvent(d),!d.defaultPrevented)throw c}return i.then(c=>{for(const d of c||[])d.status==="rejected"&&a(d.reason);return n().catch(a)})};var ju,Xm;function q0(){if(Xm)return ju;Xm=1;function e(n){var r=typeof n;return n!=null&&(r=="object"||r=="function")}return ju=e,ju}var Iu,Jm;function RN(){if(Jm)return Iu;Jm=1;var e=typeof Xr=="object"&&Xr&&Xr.Object===Object&&Xr;return Iu=e,Iu}var ku,Zm;function K0(){if(Zm)return ku;Zm=1;var e=RN(),n=typeof self=="object"&&self&&self.Object===Object&&self,r=e||n||Function("return this")();return ku=r,ku}var Pu,eg;function MN(){if(eg)return Pu;eg=1;var e=K0(),n=function(){return e.Date.now()};return Pu=n,Pu}var Tu,tg;function ON(){if(tg)return Tu;tg=1;var e=/\s/;function n(r){for(var s=r.length;s--&&e.test(r.charAt(s)););return s}return Tu=n,Tu}var Ru,ng;function _N(){if(ng)return Ru;ng=1;var e=ON(),n=/^\s+/;function r(s){return s&&s.slice(0,e(s)+1).replace(n,"")}return Ru=r,Ru}var Mu,rg;function Y0(){if(rg)return Mu;rg=1;var e=K0(),n=e.Symbol;return Mu=n,Mu}var Ou,og;function LN(){if(og)return Ou;og=1;var e=Y0(),n=Object.prototype,r=n.hasOwnProperty,s=n.toString,i=e?e.toStringTag:void 0;function a(c){var d=r.call(c,i),h=c[i];try{c[i]=void 0;var p=!0}catch{}var m=s.call(c);return p&&(d?c[i]=h:delete c[i]),m}return Ou=a,Ou}var _u,sg;function FN(){if(sg)return _u;sg=1;var e=Object.prototype,n=e.toString;function r(s){return n.call(s)}return _u=r,_u}var Lu,ig;function BN(){if(ig)return Lu;ig=1;var e=Y0(),n=LN(),r=FN(),s="[object Null]",i="[object Undefined]",a=e?e.toStringTag:void 0;function c(d){return d==null?d===void 0?i:s:a&&a in Object(d)?n(d):r(d)}return Lu=c,Lu}var Fu,ag;function $N(){if(ag)return Fu;ag=1;function e(n){return n!=null&&typeof n=="object"}return Fu=e,Fu}var Bu,lg;function GN(){if(lg)return Bu;lg=1;var e=BN(),n=$N(),r="[object Symbol]";function s(i){return typeof i=="symbol"||n(i)&&e(i)==r}return Bu=s,Bu}var $u,cg;function UN(){if(cg)return $u;cg=1;var e=_N(),n=q0(),r=GN(),s=NaN,i=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,c=/^0o[0-7]+$/i,d=parseInt;function h(p){if(typeof p=="number")return p;if(r(p))return s;if(n(p)){var m=typeof p.valueOf=="function"?p.valueOf():p;p=n(m)?m+"":m}if(typeof p!="string")return p===0?p:+p;p=e(p);var g=a.test(p);return g||c.test(p)?d(p.slice(2),g?2:8):i.test(p)?s:+p}return $u=h,$u}var Gu,ug;function VN(){if(ug)return Gu;ug=1;var e=q0(),n=MN(),r=UN(),s="Expected a function",i=Math.max,a=Math.min;function c(d,h,p){var m,g,x,b,S,E,N=0,j=!1,P=!1,I=!0;if(typeof d!="function")throw new TypeError(s);h=r(h)||0,e(p)&&(j=!!p.leading,P="maxWait"in p,x=P?i(r(p.maxWait)||0,h):x,I="trailing"in p?!!p.trailing:I);function D(W){var re=m,ae=g;return m=g=void 0,N=W,b=d.apply(ae,re),b}function k(W){return N=W,S=setTimeout(M,h),j?D(W):b}function R(W){var re=W-E,ae=W-N,ce=h-re;return P?a(ce,x-ae):ce}function O(W){var re=W-E,ae=W-N;return E===void 0||re>=h||re<0||P&&ae>=x}function M(){var W=n();if(O(W))return q(W);S=setTimeout(M,R(W))}function q(W){return S=void 0,I&&m?D(W):(m=g=void 0,b)}function J(){S!==void 0&&clearTimeout(S),N=0,m=E=g=S=void 0}function ie(){return S===void 0?b:q(n())}function Y(){var W=n(),re=O(W);if(m=arguments,g=this,E=W,re){if(S===void 0)return k(E);if(P)return clearTimeout(S),S=setTimeout(M,h),D(E)}return S===void 0&&(S=setTimeout(M,h)),b}return Y.cancel=J,Y.flush=ie,Y}return Gu=c,Gu}var zN=VN();const WN=Er(zN);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HN=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),qN=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(n,r,s)=>s?s.toUpperCase():r.toLowerCase()),dg=e=>{const n=qN(e);return n.charAt(0).toUpperCase()+n.slice(1)},Q0=(...e)=>e.filter((n,r,s)=>!!n&&n.trim()!==""&&s.indexOf(n)===r).join(" ").trim(),KN=e=>{for(const n in e)if(n.startsWith("aria-")||n==="role"||n==="title")return!0};/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var YN={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QN=w.forwardRef(({color:e="currentColor",size:n=24,strokeWidth:r=2,absoluteStrokeWidth:s,className:i="",children:a,iconNode:c,...d},h)=>w.createElement("svg",{ref:h,...YN,width:n,height:n,stroke:e,strokeWidth:s?Number(r)*24/Number(n):r,className:Q0("lucide",i),...!a&&!KN(d)&&{"aria-hidden":"true"},...d},[...c.map(([p,m])=>w.createElement(p,m)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X0=(e,n)=>{const r=w.forwardRef(({className:s,...i},a)=>w.createElement(QN,{ref:a,iconNode:n,className:Q0(`lucide-${HN(dg(e))}`,`lucide-${e}`,s),...i}));return r.displayName=dg(e),r};/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XN=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],JN=X0("chevron-down",XN);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZN=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],eC=X0("search",ZN);var Sr=T0();const tC=Er(Sr),ar=({value:e,onChange:n,options:r,className:s="",menuClassName:i="",showSearch:a=!1,buttonClassName:c=""})=>{const[d,h]=w.useState(!1),[p,m]=w.useState(!1),[g,x]=w.useState(""),b=w.useRef(null),S=w.useRef(null),E=w.useRef(null),N=w.useRef(null),[j,P]=w.useState({top:0,left:0,width:0,maxHeight:320}),I=r.filter(O=>g?.length?O.toLowerCase().includes(g.toLowerCase()):!0),D=()=>{if(b.current){const O=b.current.getBoundingClientRect(),M=window.innerHeight-O.bottom,q=Math.min(M-10,320);P({top:O.bottom+window.scrollY,left:O.left+window.scrollX,width:O.width,maxHeight:q}),m(!0)}};w.useEffect(()=>{const O=q=>{b.current&&!b.current.contains(q.target)&&S.current&&!S.current.contains(q.target)&&(h(!1),x(""),m(!1))},M=q=>{q.key==="Escape"&&(h(!1),x(""),m(!1))};return d&&(document.addEventListener("mousedown",O),document.addEventListener("keydown",M)),()=>{document.removeEventListener("mousedown",O),document.removeEventListener("keydown",M)}},[d]),w.useEffect(()=>{d&&p&&N.current&&E.current&&N.current.scrollIntoView({block:"nearest",behavior:"instant"})},[d,p]);const k=()=>{d?(h(!1),m(!1)):(D(),requestAnimationFrame(()=>{h(!0)}))},R=O=>{n(O),h(!1),x(""),m(!1)};return u.jsxs("div",{className:`relative inline-block text-left text-lg ${s}`,children:[u.jsxs("button",{ref:b,onClick:k,className:`
          inline-flex w-full justify-between items-center gap-x-2 rounded-lg
          bg-[#3d434f] border
          px-4 py-2.5 text-sm font-medium
          text-slate-200 
          ${d?"border-blue-500 bg-[#4a5262]":"border-gray-600 hover:bg-[#4a5262] hover:border-gray-500"}
          focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:ring-offset-2 focus:ring-offset-[#2a2f38]
          transition-all duration-200 ease-out
          ${c.includes("h-")?"":"h-10"}
          ${c}
        `,children:[u.jsx("span",{className:"truncate text-left flex-1 font-medium tracking-wide",children:e}),u.jsx(JN,{className:`
            h-4 w-4 text-slate-400 flex-shrink-0
            transition-all duration-200
            ${d?"rotate-180 text-slate-200":"group-hover:text-slate-200"}
          `,"aria-hidden":"true"})]}),d&&p&&Sr.createPortal(u.jsx("div",{ref:S,style:{position:"absolute",top:`${j.top+4}px`,left:`${j.left}px`,minWidth:`${j.width}px`,maxWidth:`${j.width}px`,zIndex:9999},className:"origin-top dropdown-enter",children:u.jsx("div",{style:{maxHeight:`${j.maxHeight}px`,minWidth:`${j.width}px`},className:"dropdown-menu rounded-lg shadow-2xl ring-1 ring-black/30 overflow-hidden",children:u.jsxs("div",{className:"bg-[#3d434f] border border-gray-600 rounded-lg overflow-hidden shadow-2xl",children:[a&&u.jsx("div",{className:"p-3 border-b border-gray-600 bg-[#444b59]",children:u.jsxs("div",{className:"relative",children:[u.jsx(eC,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-slate-400"}),u.jsx("input",{type:"text",className:`w-full text-slate-200 pl-9 pr-3 py-2 text-sm font-normal 
                        bg-[#2a2f38] border border-gray-600 rounded-md 
                        focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500 
                        placeholder-slate-500 
                        transition-all duration-200
                        hover:bg-[#333844] hover:border-gray-500`,placeholder:"Search options...",value:g,onChange:O=>x(O.target.value),autoFocus:!0})]})}),u.jsx("div",{ref:E,className:`py-1.5 overflow-y-auto ${i}`,style:{maxHeight:a?`${j.maxHeight-60}px`:`${j.maxHeight}px`},children:I.length>0?I.map((O,M)=>u.jsxs("button",{ref:e===O?N:null,onClick:()=>R(O),className:`
                        relative block w-full px-4 py-2.5 text-left text-sm font-medium 
                        transition-all duration-200
                        text-slate-300 hover:text-slate-100
                        hover:bg-[#4a5262]
                        border-l-2 border-l-transparent hover:border-l-blue-400
                      `,children:[u.jsx("span",{className:"relative truncate block tracking-wide",children:O}),e===O&&u.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-1.5 h-1.5 bg-blue-400 rounded-full"})]},M)):u.jsx("div",{className:"px-4 py-3 text-sm text-slate-500 italic text-center",children:"No options found"})})]})})}),document.body)]})},G={BASIC:"basic",RHYTHMIC:"rhythmic",ADVANCED:"advanced",GENRE:"genre",CUSTOM:"custom"},fg=[{name:"Up Down",pattern:["1","2","3","4","3","2"],desc:"Classic ascending and descending",icon:"",category:G.BASIC},{name:"Broken Chord",pattern:["1","3","2","4"],desc:"Mixed chord tones",icon:"",category:G.BASIC},{name:"Octave Jump",pattern:["1","1+","1","1+"],desc:"Root note with octave jumps",icon:"",category:G.BASIC},{name:"Waltz",pattern:["1","2","3"],desc:"Three-beat waltz pattern",icon:"",category:G.BASIC},{name:"Alberti Bass",pattern:["1","3","2","3","1","3","2","3"],desc:"Classical broken chord accompaniment",icon:"",category:G.BASIC},{name:"Syncopated",pattern:["x","1","x","2","x","3","1","x"],desc:"Off-beat emphasis",icon:"",category:G.RHYTHMIC},{name:"Staccato",pattern:["1","x","2","x","3","x","4","x"],desc:"Short, detached notes",icon:"",category:G.RHYTHMIC},{name:"Legato Flow",pattern:["1","2","3","4","4","3","2","1"],desc:"Smooth, connected motion",icon:"",category:G.ADVANCED},{name:"Fifth Wheel",pattern:["1","2","3","4","5"],desc:"Simple ascent through 5-note chord",icon:"5",category:G.BASIC},{name:"Pentagon",pattern:["1","3","5","2","4","1"],desc:"Geometric pattern through 5 notes",icon:"",category:G.BASIC},{name:"Five Alive",pattern:["1","5","2","4","3","5","1","x"],desc:"Dynamic 5-note exploration",icon:"",category:G.ADVANCED},{name:"Jazz Walk",pattern:["1","2","3","4","5","4","3","2"],desc:"Walking bass with 5th extension",icon:"",category:G.ADVANCED},{name:"Quintet Roll",pattern:["1","4","2","3","2+","4","5","3"],desc:"Rolled chord with gaps",icon:"",category:G.RHYTHMIC},{name:"High Five",pattern:["1","2+","3","4+","5","1+"],desc:"Mix of regular and high octave notes",icon:"",category:G.ADVANCED},{name:"Hexagon",pattern:["1","2","3","4","5","6"],desc:"Complete 6-note ascent",icon:"",category:G.BASIC},{name:"Six Pack",pattern:["1","6","2","5","3","4"],desc:"Outside-in pattern",icon:"",category:G.ADVANCED},{name:"Jazz Cascade",pattern:["1","3","5","6","4","2","1","x"],desc:"Complex jazz voicing pattern",icon:"",category:G.ADVANCED},{name:"Spiral Six",pattern:["1","4","2","5","3","6","1"],desc:"Spiraling through 6 notes",icon:"",category:G.ADVANCED},{name:"Double Triple",pattern:["1","2","3","4","5","6","6","5","4","3","2","1"],desc:"Up and down through all 6 notes",icon:"",category:G.ADVANCED},{name:"Sixth Sense",pattern:["1","x","3","x","5","x","6","x"],desc:"Selective 6-note chord tones",icon:"",category:G.RHYTHMIC},{name:"Polyrhythm",pattern:["1","x","x","2","x","3","x","x","1","x","3","x"],desc:"Complex rhythmic displacement",icon:"",category:G.RHYTHMIC},{name:"Bounce",pattern:["1","4","1","4","2","3","2","3"],desc:"Bouncing between chord tones",icon:"",category:G.ADVANCED},{name:"Cascade",pattern:["4+","3+","2+","1+","4","3","2","1"],desc:"Waterfall effect across octaves",icon:"",category:G.ADVANCED},{name:"Morse Code",pattern:["1","x","1","1","x","x","1","x","1","1","x"],desc:"Dot-dash rhythm pattern",icon:"",category:G.RHYTHMIC},{name:"Fibonacci",pattern:["1","1","2","3","2","1","3","4"],desc:"Based on Fibonacci sequence",icon:"",category:G.ADVANCED},{name:"Pendulum",pattern:["1","3","2","4","3","1","2","4","3","2"],desc:"Swinging motion through chord",icon:"",category:G.ADVANCED},{name:"Stutter Step",pattern:["1","1","x","2","2","x","3","3","x"],desc:"Repeated notes with rests",icon:"",category:G.RHYTHMIC},{name:"Call Response",pattern:["1","x","x","3","2","x","x","4"],desc:"Question and answer phrases",icon:"",category:G.RHYTHMIC},{name:"Spiral",pattern:["1","2","4","3","1","4","2","3"],desc:"Spiraling chord progression",icon:"",category:G.ADVANCED},{name:"Latin Clave",pattern:["1","x","x","1","x","1","x","x"],desc:"Based on Latin clave rhythm",icon:"",category:G.RHYTHMIC},{name:"Long Journey",pattern:["1","2","x","3","4","x","3","2","1","x","2","3","4","x","x","1"],desc:"Extended 16-step pattern",icon:"",category:G.ADVANCED},{name:"Minimalist",pattern:["1","x","x","x","x","x","x","x"],desc:"Sparse, contemplative",icon:"",category:G.BASIC},{name:"Maximalist",pattern:["1","2","3","4","1+","2+","3+","4+"],desc:"Dense, energetic pattern",icon:"",category:G.ADVANCED},{name:"Ghost Notes",pattern:["1","x","2","x","x","3","x","4","x","x"],desc:"Implied rhythm with spaces",icon:"",category:G.RHYTHMIC},{name:"Power Chord",pattern:["1","1","1+","1+"],desc:"Rock-style power chord emphasis",icon:"",category:G.BASIC},{name:"Bossa Nova",pattern:["1","x","2","x","3","x","4","2"],desc:"Brazilian bossa nova feel",icon:"",category:G.GENRE},{name:"Reggae Skank",pattern:["x","2","x","4","x","2","x","4"],desc:"Reggae upstroke pattern",icon:"",category:G.GENRE},{name:"Tango",pattern:["1","x","2","3","x","x","4","x"],desc:"Dramatic tango rhythm",icon:"",category:G.GENRE},{name:"Swing Feel",pattern:["1","x","3","x","2","x","4","x"],desc:"Jazz swing pattern",icon:"",category:G.GENRE},{name:"Folk Strum",pattern:["1","2","3","2","1","2","3","2"],desc:"Folk guitar strumming pattern",icon:"",category:G.GENRE},{name:"Extended Jazz",pattern:["1","3","5","6","5","3","1","x"],desc:"Jazz chord extensions",icon:"",category:G.ADVANCED},{name:"Full House",pattern:["1","2","3","4","5","6","x","x"],desc:"All chord tones, then rest",icon:"",category:G.BASIC},{name:"Polyrhythmic 6",pattern:["1","x","3","x","5","x","2","x","4","x","6","x"],desc:"Complex 6-note polyrhythm",icon:"",category:G.RHYTHMIC},{name:"Wave Function",pattern:["1","3","5","6","4","2","1","3","5","4","2","x"],desc:"Wave-like motion through extended chord",icon:"",category:G.ADVANCED},{name:"Grand Scale",pattern:["1","2","3","4","5","6","5","4","3","2","1"],desc:"Full scale ascent and descent",icon:"",category:G.BASIC},{name:"Step by Step",pattern:["1","2","1","3","2","4","3","5","4","6","5"],desc:"Gradual stepping pattern",icon:"",category:G.BASIC},{name:"Simple Sixes",pattern:["1","3","5","1","3","5","6","4","2","6","4","2"],desc:"Two three-note groups with extensions",icon:"",category:G.BASIC},{name:"Double Root",pattern:["1","1","2","3","4","1","1"],desc:"Root emphasis with ascent",icon:"",category:G.BASIC},{name:"Neighbor Tones",pattern:["1","2","1","3","2","3","4","3"],desc:"Step-wise neighboring motion",icon:"",category:G.BASIC},{name:"Triad Plus",pattern:["1","3","5","6","1","3","5","4"],desc:"Basic triad with extensions",icon:"",category:G.BASIC},{name:"Full Circle",pattern:["1","2","3","4","5","6","6","5","4","3","2","1","x","x"],desc:"Complete journey up and down",icon:"",category:G.BASIC},{name:"Building Blocks",pattern:["1","1","2","1","2","3","1","2","3","4"],desc:"Gradually building up the chord",icon:"",category:G.BASIC},{name:"Polymetric 5",pattern:["1","x","x","2","x","3","x","x","4","x","5","x","x","1","x"],desc:"Five-note pattern in complex meter",icon:"",category:G.RHYTHMIC},{name:"Shuffle Step",pattern:["1","x","2","3","x","x","4","x","5","6","x","x"],desc:"Shuffle rhythm through extended chord",icon:"",category:G.RHYTHMIC},{name:"Heartbeat",pattern:["1","1","x","x","2","2","x","x","3","3","x","x"],desc:"Pulse-like doubled pattern",icon:"",category:G.RHYTHMIC},{name:"Cross Rhythm",pattern:["1","x","x","2","x","x","3","x","4","x","x","5","x","x","6"],desc:"Pattern crossing metric boundaries",icon:"",category:G.RHYTHMIC},{name:"Breath Mark",pattern:["1","2","3","x","x","4","5","6","x","x","1","2","x","x"],desc:"Groups of notes with breathing spaces",icon:"",category:G.RHYTHMIC},{name:"Displacement",pattern:["x","1","x","2","x","3","1","x","2","x","3","x","4","x"],desc:"Rhythmically displaced chord tones",icon:"",category:G.RHYTHMIC},{name:"Echo Chamber",pattern:["1","x","1","x","x","2","x","2","x","x","3","x","3","x","x"],desc:"Each note echoes with delays",icon:"",category:G.RHYTHMIC},{name:"Odd Meter",pattern:["1","x","2","x","3","x","x","4","x","5","x","6","x","x"],desc:"Seven-beat groupings",icon:"7",category:G.RHYTHMIC},{name:"Metric Modulation",pattern:["1","2","x","3","4","x","x","5","6","x","1","x","x","2","x"],desc:"Changing rhythmic emphasis",icon:"",category:G.RHYTHMIC},{name:"Chromatic Walk",pattern:["1","2","3","4","5","6","5","4","3","2","1","2","3","4","5","6"],desc:"Extended chromatic voice leading",icon:"",category:G.ADVANCED},{name:"Voice Exchange",pattern:["1","6","2","5","3","4","4","3","5","2","6","1"],desc:"Voices trading positions",icon:"",category:G.ADVANCED},{name:"Nested Loops",pattern:["1","3","5","3","1","4","6","4","2","5","6","5","2","1"],desc:"Loops within loops structure",icon:"",category:G.ADVANCED},{name:"Golden Ratio",pattern:["1","2","3","5","6","4","1","3","5","6","2","4","1"],desc:"Based on mathematical proportions",icon:"",category:G.ADVANCED},{name:"Fractal Pattern",pattern:["1","3","2","1","4","6","5","4","1","3","2","1"],desc:"Self-similar pattern at different scales",icon:"",category:G.ADVANCED},{name:"Intervallic Series",pattern:["1","4","2","5","3","6","1","5","2","6","3","4"],desc:"Systematic interval exploration",icon:"",category:G.ADVANCED},{name:"Orbit",pattern:["1","3","5","2","4","6","3","5","1","4","6","2","5","1","6"],desc:"Circular motion through chord space",icon:"",category:G.ADVANCED},{name:"Double Helix",pattern:["1","6","2","5","3","4","3+","4+","2+","5+","1+","6+","1+"],desc:"Intertwining ascending and descending lines",icon:"",category:G.ADVANCED},{name:"Metamorphosis",pattern:["1","2","1","3","2","4","3","5","4","6","5","6","1+","2+"],desc:"Gradually transforming pattern",icon:"",category:G.ADVANCED},{name:"Tessellation",pattern:["1","3","6","4","2","5","1","4","6","3","2","5"],desc:"Interlocking geometric pattern",icon:"",category:G.ADVANCED},{name:"Prime Number",pattern:["1","x","2","x","x","3","x","x","x","x","5","x","x","x","x","x","x"],desc:"Based on prime number sequence",icon:"",category:G.ADVANCED},{name:"Matrix",pattern:["1","2","3","4+","5+","6+","6","5","4","3+","2+","1+"],desc:"Systematic octave displacement matrix",icon:"",category:G.ADVANCED},{name:"Mandala",pattern:["1","x","3","x","5","x","6","x","4","x","2","x","1","x"],desc:"Symmetric spiritual geometry",icon:"",category:G.ADVANCED},{name:"Infinity Loop",pattern:["1","2","3","4","5","6","5","4","3","2","1","6","5","4","3","2","1"],desc:"Never-ending loop pattern",icon:"",category:G.ADVANCED},{name:"Quantum Jump",pattern:["1","4+","2","5+","x","3","6+","x","1+","4","x","2+","5"],desc:"Unpredictable quantum-like leaps",icon:"",category:G.ADVANCED},{name:"Epic Journey",pattern:["1","2","3","4","5","6","6+","5+","4+","3+","2+","1+","6","5","4","3","2","1","x","x"],desc:"20-step odyssey through all chord tones",icon:"",category:G.ADVANCED},{name:"Full Spectrum",pattern:["1","x","2","x","3","x","4","x","5","x","6","x","1+","x","2+","x","3+","x"],desc:"Complete chord exploration with rests",icon:"",category:G.BASIC},{name:"Polyrhythmic Marathon",pattern:["1","x","x","2","x","3","x","x","4","x","5","x","x","6","x","1+","x","x","2+","x"],desc:"Extended polyrhythmic exploration",icon:"",category:G.RHYTHMIC},{name:"Dimensional Shift",pattern:["1","3","5","1+","3+","5+","6+","4+","2+","6","4","2","1","2","3","4","5","6"],desc:"Moving between octave dimensions",icon:"",category:G.ADVANCED},{name:"Quick Five",pattern:["1","2","3","4","5","1"],desc:"Efficient 5-note exploration",icon:"",category:G.BASIC},{name:"Hex Core",pattern:["1","3","5","2","4","6"],desc:"All 6 notes in compact form",icon:"",category:G.BASIC},{name:"Jazz Snap",pattern:["1","3","6","4","2","5"],desc:"Quick jazz chord exploration",icon:"",category:G.ADVANCED},{name:"Prism",pattern:["1","4","6","3","5","2"],desc:"Light refraction pattern",icon:"",category:G.ADVANCED},{name:"Star Map",pattern:["1","5","2","6","3","4"],desc:"Navigating chord constellation",icon:"",category:G.ADVANCED},{name:"Speed Dial",pattern:["1","2","4","5","6","3"],desc:"Quick access to extended tones",icon:"",category:G.BASIC},{name:"Kaleidoscope",pattern:["1","6","4","2","5","3"],desc:"Shifting colorful pattern",icon:"",category:G.ADVANCED},{name:"Magnetic",pattern:["1","3","5","6","4","2"],desc:"Attraction between chord tones",icon:"",category:G.ADVANCED},{name:"Quantum Six",pattern:["6","1","4","2","5","3"],desc:"Non-linear quantum exploration",icon:"",category:G.ADVANCED},{name:"Crystal",pattern:["1","4","2","5","3","6"],desc:"Crystalline structure pattern",icon:"",category:G.ADVANCED},{name:"Octagon",pattern:["1","2","3","4","5","6","5","4"],desc:"8-sided geometric exploration",icon:"",category:G.BASIC},{name:"Double Helix 6",pattern:["1","6","2","5","3","4","3+","1+"],desc:"DNA-like interweaving pattern",icon:"",category:G.ADVANCED},{name:"Infinity 5",pattern:["1","3","5","4","2","4","5","1"],desc:"Figure-8 through 5 chord tones",icon:"",category:G.ADVANCED},{name:"Compass Rose",pattern:["1","4","6","3","2","5","1","6"],desc:"Navigate all directions",icon:"",category:G.ADVANCED},{name:"Quick March",pattern:["1","2","3","4","5","6","1+","x"],desc:"Military precision through chord",icon:"",category:G.BASIC},{name:"Ripple Effect",pattern:["1","3","5","2","4","6","4","2"],desc:"Waves expanding outward",icon:"",category:G.ADVANCED},{name:"Spider Web",pattern:["1","4","2","6","3","5","1+","4"],desc:"Intricate connecting pattern",icon:"",category:G.ADVANCED},{name:"Gear Shift",pattern:["1","2","4","3","5","6","5","2"],desc:"Mechanical shifting motion",icon:"",category:G.ADVANCED},{name:"Phoenix Rise",pattern:["1","3","5","6","4","2","5+","1+"],desc:"Rising from ashes pattern",icon:"",category:G.ADVANCED},{name:"Molecule",pattern:["1","6","3","2","5","4","6+","1+"],desc:"Chemical bond structure",icon:"",category:G.ADVANCED},{name:"Time Warp",pattern:["1","5","2","4","6","3","1+","5"],desc:"Bending through chord space-time",icon:"",category:G.ADVANCED},{name:"Magic Square",pattern:["1","4","6","2","3","5","4+","1+"],desc:"Mathematical magic pattern",icon:"",category:G.ADVANCED},{name:"Synth Wave",pattern:["1","2","4","6","5","3","2+","1+"],desc:"Electronic wave synthesis",icon:"",category:G.ADVANCED},{name:"Butterfly",pattern:["1","3","6","4","2","5","3+","1+"],desc:"Graceful wing-like motion",icon:"",category:G.ADVANCED},{name:"Binary Code",pattern:["1","x","2","3","4","5","6","x"],desc:"Digital pattern with gaps",icon:"",category:G.RHYTHMIC},{name:"Vortex",pattern:["1","6","4","2","5","3","6+","1+"],desc:"Spiraling energy pattern",icon:"",category:G.ADVANCED},{name:"Lightning",pattern:["1","4","6","2","5","3","1+","x"],desc:"Zigzag electrical pattern",icon:"",category:G.ADVANCED},{name:"Honeycomb",pattern:["1","3","5","2","6","4","5+","1+"],desc:"Hexagonal bee pattern",icon:"",category:G.ADVANCED},{name:"Tidal Wave",pattern:["1","2","4","5","6","3","2+","1+"],desc:"Ocean wave crescendo",icon:"",category:G.ADVANCED},{name:"Satellite",pattern:["1","5","3","6","2","4","1+","5+"],desc:"Orbital motion pattern",icon:"",category:G.ADVANCED},{name:"Quad Core",pattern:["1","2","3","4","3","2"],desc:"4-note mountain shape",icon:"",category:G.BASIC},{name:"Square Dance",pattern:["1","3","2","4","1","3"],desc:"4-note folk pattern",icon:"",category:G.BASIC},{name:"Tetris Block",pattern:["1","4","2","3","4","1","2","3"],desc:"Interlocking 4-note pattern",icon:"",category:G.ADVANCED},{name:"Compass",pattern:["1","2","4","3","1","4"],desc:"4-direction navigation",icon:"",category:G.BASIC},{name:"Engine Cycle",pattern:["1","3","4","2","1","3","4","2"],desc:"Repeating 4-stroke pattern",icon:"",category:G.ADVANCED},{name:"Diamond",pattern:["1","2","4","3","2","1"],desc:"Diamond-shaped 4-note gem",icon:"",category:G.BASIC},{name:"Pentagon Path",pattern:["1","2","3","4","5","1"],desc:"5-sided geometric progression",icon:"",category:G.BASIC},{name:"Star Jump",pattern:["1","3","5","2","4","1"],desc:"5-pointed star navigation",icon:"",category:G.ADVANCED},{name:"High Five",pattern:["1","2","3","4","5","1+"],desc:"5-note celebration with octave",icon:"",category:G.BASIC},{name:"Flower Power",pattern:["1","3","2","5","4","1","3","5"],desc:"5-petal blooming pattern",icon:"",category:G.ADVANCED},{name:"Olympic Rings",pattern:["1","4","2","5","3","4"],desc:"Interlocking 5-note circles",icon:"",category:G.ADVANCED},{name:"Jazz Hand",pattern:["1","2","4","3","5","2","1","4"],desc:"5-finger jazz expression",icon:"",category:G.ADVANCED},{name:"Spiral Five",pattern:["1","3","5","4","2","3"],desc:"Spiraling 5-note motion",icon:"",category:G.ADVANCED},{name:"Power Plant",pattern:["1","5","3","2","4","1+"],desc:"Energy-generating 5-note pattern",icon:"",category:G.ADVANCED},{name:"Full House",pattern:["1","2","3","4","5","6"],desc:"Complete 6-note ascent",icon:"",category:G.BASIC},{name:"Hexagon Spin",pattern:["1","3","5","2","4","6"],desc:"6-sided rotating pattern",icon:"",category:G.BASIC},{name:"Rainbow Arc",pattern:["1","6","2","5","3","4"],desc:"6-color spectrum bridge",icon:"",category:G.ADVANCED},{name:"Dice Roll",pattern:["1","4","6","2","5","3"],desc:"Random 6-sided exploration",icon:"",category:G.ADVANCED},{name:"Spider Legs",pattern:["1","2","4","6","3","5","1","4"],desc:"8-legged 6-note crawl",icon:"",category:G.ADVANCED},{name:"Snowflake",pattern:["1","6","3","4","2","5"],desc:"6-sided crystalline beauty",icon:"",category:G.ADVANCED},{name:"Benzene Ring",pattern:["1","2","4","5","3","6","1","4"],desc:"Chemical 6-carbon structure",icon:"",category:G.ADVANCED},{name:"Clock Face",pattern:["1","3","6","4","2","5"],desc:"12-hour time navigation",icon:"",category:G.ADVANCED},{name:"Mandala Six",pattern:["1","4","2","6","3","5","1","6"],desc:"Sacred 6-fold geometry",icon:"",category:G.ADVANCED},{name:"Puzzle Piece",pattern:["1","5","2","4","6","3"],desc:"Interlocking 6-note solution",icon:"",category:G.ADVANCED},{name:"Rainbow Bridge",pattern:["1","2","3","4","5","6","1+"],desc:"Complete 7-tone spectrum",icon:"",category:G.BASIC},{name:"Lucky Seven",pattern:["1","3","5","6","4","2","1+","3+"],desc:"7-note fortune pattern",icon:"",category:G.ADVANCED},{name:"Chakra Flow",pattern:["1","2","3","4","5","6","1+"],desc:"7-energy center alignment",icon:"",category:G.ADVANCED},{name:"Week Days",pattern:["1","4","2","6","3","5","1+","4+"],desc:"7-day cycle pattern",icon:"",category:G.ADVANCED},{name:"Heptagon",pattern:["1","3","6","2","5","4","1+"],desc:"7-sided geometric form",icon:"",category:G.ADVANCED},{name:"Scale Heaven",pattern:["1","2","3","4","5","6","2+","1+"],desc:"7-note stairway to heaven",icon:"",category:G.ADVANCED},{name:"Prism Split",pattern:["1","6","4","2","5","3","1+"],desc:"Light splitting into 7 colors",icon:"",category:G.ADVANCED},{name:"Musical Bowl",pattern:["1","2","4","6","3","5","1+","4+"],desc:"7-tone singing bowl",icon:"",category:G.ADVANCED},{name:"Fusion Dance",pattern:["1","3","6","4","2","5"],desc:"6-note fusion choreography",icon:"",category:G.ADVANCED},{name:"Crystal Grid",pattern:["1","4","3","6","2","5","1+","4+"],desc:"6-point energy crystal matrix",icon:"",category:G.ADVANCED},{name:"Gear Train",pattern:["1","2","4","3","6","5"],desc:"Mechanical 6-gear system",icon:"",category:G.ADVANCED},{name:"DNA Strand",pattern:["1","5","2","6","3","4","1+","5+"],desc:"Double helix genetic code",icon:"",category:G.ADVANCED},{name:"Meteor Shower",pattern:["1","6","3","5","2","4"],desc:"6-streak cosmic display",icon:"",category:G.ADVANCED},{name:"Magic Circle",pattern:["1","3","2","6","4","5","1+"],desc:"7-point mystical protection",icon:"",category:G.ADVANCED},{name:"Tornado Spin",pattern:["1","4","6","3","2","5","1+","4+"],desc:"Spiraling 7-note vortex",icon:"",category:G.ADVANCED},{name:"Phoenix Wings",pattern:["1","2","5","6","3","4"],desc:"6-feather wing spread",icon:"",category:G.ADVANCED},{name:"Quad Echo",pattern:["1","2","1","3","2","4","3","4"],desc:"4-note echo chamber",icon:"",category:G.RHYTHMIC},{name:"Four Corners",pattern:["1","3","4","2","1","3","4","2"],desc:"Repeating 4-corner square",icon:"",category:G.BASIC},{name:"Heartbeat Quad",pattern:["1","1","2","3","3","4","2","4"],desc:"Pulsing 4-note rhythm",icon:"",category:G.RHYTHMIC},{name:"Compass Spin",pattern:["1","2","4","3","2","1","4","3"],desc:"4-direction circular motion",icon:"",category:G.ADVANCED},{name:"Engine Rev",pattern:["1","4","2","3","4","1","3","2"],desc:"4-cylinder engine pattern",icon:"",category:G.ADVANCED},{name:"Square Wave",pattern:["1","1","3","3","2","2","4","4"],desc:"Digital square wave form",icon:"",category:G.RHYTHMIC},{name:"Four Seasons",pattern:["1","2","3","4","2+","1","4","3"],desc:"Seasonal cycle pattern",icon:"",category:G.ADVANCED},{name:"Card Suit",pattern:["1","3","2","4","3+","1+","2","4"],desc:"Playing card 4-suit pattern",icon:"",category:G.ADVANCED},{name:"Quad Pulse",pattern:["1","2","2","3","3+","4+","4","1"],desc:"Doubled pulse pattern",icon:"",category:G.RHYTHMIC},{name:"Element Mix",pattern:["1","4","3","2","1","2","3","4"],desc:"4-element combination",icon:"",category:G.ADVANCED},{name:"Pentagon Echo",pattern:["1","2","3","4","5","1","3","5"],desc:"5-note with strategic repeats",icon:"",category:G.BASIC},{name:"Five Alive",pattern:["1","3","5","2","4","1","5","3"],desc:"Dynamic 5-note exploration",icon:"",category:G.ADVANCED},{name:"Star Circuit",pattern:["1","2","4","5","3","2","4","1"],desc:"5-pointed star electrical circuit",icon:"",category:G.ADVANCED},{name:"Olympic Flow",pattern:["1","3","2","5","4","3","1","5"],desc:"5-ring Olympic movement",icon:"",category:G.ADVANCED},{name:"Hand Jive",pattern:["1","2","3","4","5","2","4","3"],desc:"5-finger dance pattern",icon:"",category:G.RHYTHMIC},{name:"Jazz Fifth",pattern:["1","3","5","4","2","5","1","3"],desc:"Jazz 5-note improvisation",icon:"",category:G.ADVANCED},{name:"Flower Bloom",pattern:["1","2","4","3","5","4","2","1"],desc:"5-petal opening flower",icon:"",category:G.ADVANCED},{name:"Spiral Five",pattern:["1","5","3","2","4","5","3","1"],desc:"Spiraling 5-note motion",icon:"",category:G.ADVANCED},{name:"Pentagon March",pattern:["1","2","3","4","5","4","3","2"],desc:"Military 5-count march",icon:"",category:G.BASIC},{name:"Five Elements",pattern:["1","4","2","5","3","4","1+","5+"],desc:"Ancient 5-element cycle",icon:"",category:G.ADVANCED},{name:"Quintet Jam",pattern:["1","3","4","2","5","3","4","1"],desc:"5-piece band improvisation",icon:"",category:G.ADVANCED},{name:"Five Fold",pattern:["1","5","2","4","3","2","5","4"],desc:"5-fold symmetrical pattern",icon:"",category:G.ADVANCED},{name:"Hex Repeat",pattern:["1","2","3","4","5","6","1","4"],desc:"6-note with strategic repeats",icon:"",category:G.BASIC},{name:"Rainbow Fade",pattern:["1","6","2","5","3","4","6","1"],desc:"6-color spectrum fade",icon:"",category:G.ADVANCED},{name:"Snowflake Dance",pattern:["1","3","6","4","2","5","3","1"],desc:"6-sided crystal dance",icon:"",category:G.ADVANCED},{name:"Benzene Loop",pattern:["1","2","4","5","3","6","2","4"],desc:"Chemical 6-carbon ring",icon:"",category:G.ADVANCED},{name:"Dice Double",pattern:["1","4","6","2","5","3","4","6"],desc:"6-sided die double roll",icon:"",category:G.ADVANCED},{name:"Hexagon Twist",pattern:["1","3","5","2","4","6","3","5"],desc:"6-sided geometric twist",icon:"",category:G.ADVANCED},{name:"Clock Tick",pattern:["1","2","4","6","3","5","2","6"],desc:"6-hour time progression",icon:"",category:G.RHYTHMIC},{name:"Mandala Six",pattern:["1","4","2","6","3","5","4","2"],desc:"Sacred 6-fold pattern",icon:"",category:G.ADVANCED},{name:"Flower Power",pattern:["1","6","3","2","5","4","6","3"],desc:"6-petal power flower",icon:"",category:G.ADVANCED},{name:"Insect Walk",pattern:["1","2","4","3","6","5","2","4"],desc:"6-legged insect movement",icon:"",category:G.ADVANCED},{name:"Crystal Matrix",pattern:["1","5","3","6","2","4","5","3"],desc:"6-point crystal energy grid",icon:"",category:G.ADVANCED},{name:"Spinner Six",pattern:["1","3","6","2","4","5","3","6"],desc:"6-blade spinner pattern",icon:"",category:G.ADVANCED},{name:"Web Weave",pattern:["1","4","6","3","2","5","4","1"],desc:"6-strand web weaving",icon:"",category:G.ADVANCED},{name:"Honeycomb Flow",pattern:["1","2","5","6","3","4","2","5"],desc:"6-sided honeycomb flow",icon:"",category:G.ADVANCED},{name:"Gear Mesh",pattern:["1","6","4","2","5","3","6","4"],desc:"6-tooth gear meshing",icon:"",category:G.ADVANCED},{name:"Jazz Hexagon",pattern:["1","3+","5","6+","4","2+","3","5+"],desc:"6-note jazz with octave sophistication",icon:"",category:G.ADVANCED}],Uu=e=>new Set(e.filter(r=>r!=="x").map(r=>{const s=parseInt(r.replace("+",""));return isNaN(s)?null:s}).filter(r=>r!==null)).size,nC=(e,n)=>e.length!==n.length?!1:e.every((r,s)=>r===n[s]),rC=({chordNoteCount:e,maxAvailableNotes:n,hideFewerNotePatterns:r,currentPattern:s,onHideFewerNotePatternsChange:i,onApplyPreset:a,className:c=""})=>{const d=Oe(k=>k.addedChords),[h,p]=w.useState("all"),[m,g]=w.useState("all"),x=w.useRef(null),b=w.useRef({}),S=w.useMemo(()=>{const k=[],R=new Set;return fg.forEach(O=>{R.add(O.pattern.join("|"))}),d.forEach((O,M)=>{const q=O.pattern.join("|");!R.has(q)&&q.trim()!==""&&(R.add(q),Uu(O.pattern),k.push({name:`Custom ${k.length+1}`,pattern:[...O.pattern],desc:`Custom pattern from "${O.name}"`,icon:"",category:G.CUSTOM}))}),k},[d]),E=w.useMemo(()=>[...fg,...S],[S]),N=w.useMemo(()=>{const k=new Set(E.map(R=>R.pattern.length));return Array.from(k).sort((R,O)=>R-O)},[E]),j=w.useMemo(()=>E.filter(k=>{const R=Uu(k.pattern);return!(R>e||r&&R<e||Math.max(...k.pattern.filter(M=>M!=="x").map(M=>{const q=parseInt(M.replace("+",""));return isNaN(q)?0:q}))>n||h!=="all"&&k.pattern.length!==parseInt(h)||m!=="all"&&k.category!==m)}),[E,e,r,n,h,m]),P=w.useMemo(()=>s?j.findIndex(k=>nC(k.pattern,s)):-1,[s,j]);w.useEffect(()=>{if(P>=0&&x.current){const k=x.current,R=b.current[P];if(R){const O=k.getBoundingClientRect(),M=R.getBoundingClientRect(),q=M.top-O.top+k.scrollTop,J=q+M.height,ie=k.clientHeight,Y=k.scrollTop,W=Y+ie;if(q<Y||J>W){const re=q-ie/2+M.height/2;k.scrollTo({top:Math.max(0,re),behavior:"instant"})}}}},[P,j]);const I=["All Steps",...N.map(k=>`${k} Steps`)],D=["All Categories","Basic","Rhythmic","Advanced","Genre","Custom"];return u.jsxs("div",{className:`space-y-4 ${c}`,children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-medium text-slate-200 mb-2 uppercase tracking-wide",children:"Pattern Presets"}),u.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[u.jsx("input",{type:"checkbox",checked:r,onChange:k=>i(k.target.checked),className:"w-3 h-3 rounded border-gray-600 bg-[#3d434f] text-blue-600 focus:ring-blue-500 focus:ring-1"}),u.jsx("span",{className:"text-xs text-slate-200",children:"Hide patterns with fewer notes"})]})]}),u.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[u.jsx(ar,{value:I[h==="all"?0:I.findIndex(k=>k===`${h} Steps`)],onChange:k=>{if(k==="All Steps")p("all");else{const R=k.replace(" Steps","");p(R)}},options:I,className:"flex-1",buttonClassName:"w-full p-2 bg-[#3d434f] border border-gray-600 rounded text-slate-200 text-xs transition-colors hover:bg-[#4a5262]"}),u.jsx(ar,{value:D[m==="all"?0:D.findIndex(k=>k.toLowerCase()===m)],onChange:k=>{g(k==="All Categories"?"all":k.toLowerCase())},options:D,className:"flex-1",buttonClassName:"w-full p-2 bg-[#3d434f] border border-gray-600 rounded text-slate-200 text-xs transition-colors hover:bg-[#4a5262]"})]}),u.jsx("div",{ref:x,className:"grid grid-cols-1 gap-2 max-h-80 overflow-y-auto pr-2 custom-scrollbar",children:j.length>0?j.map((k,R)=>{const O=Uu(k.pattern),M=R===P;return u.jsxs("button",{ref:q=>{b.current[R]=q},onClick:()=>a(k),className:`p-2 rounded text-xs transition-colors text-left border ${M?"bg-blue-600/20 text-slate-100 border-blue-500 ring-1 ring-blue-500/50":"bg-[#3d434f] text-slate-300 hover:bg-[#4a5262] hover:text-slate-200 border-gray-600 hover:border-gray-500"}`,children:[u.jsxs("div",{className:"flex items-center justify-between mb-1",children:[u.jsx("span",{className:"font-medium uppercase tracking-wide",children:k.name}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsxs("span",{className:`text-xs ${M?"text-slate-300":"text-slate-500"}`,children:[O,"n  ",k.pattern.length,"s"]}),u.jsx("span",{children:k.icon})]})]}),u.jsx("div",{className:`text-xs opacity-60 ${M?"text-slate-400":"text-slate-500"}`,children:k.pattern.join("-")})]},R)}):u.jsx("div",{className:"p-3 text-xs text-slate-400 text-center",children:"No patterns found matching current filters"})})]})},Ft=({label:e,value:n,min:r,max:s,step:i=.05,onChange:a,suffix:c,showPercentage:d=!1,formatValue:h,showMinMax:p=!1,minLabel:m,maxLabel:g,variant:x="default",showBypass:b=!1,className:S="",labelClassName:E=""})=>{const[N,j]=w.useState(!0),[P,I]=w.useState(n);w.useEffect(()=>{N&&I(n)},[n,N]);const D=()=>{const q=N?n:P;return h?h(q):d?`${Math.round(q*100)}%`:`${q}${c||""}`},k=q=>{const J=parseFloat(q.target.value);I(J),N&&a(J)},R=()=>{!N?(j(!0),a(P)):(I(n),j(!1),a(0))},O=q=>{if(q.key==="ArrowLeft"||q.key==="ArrowRight"||q.key==="ArrowUp"||q.key==="ArrowDown"){q.stopPropagation();return}q.preventDefault(),q.currentTarget.blur();const J=new KeyboardEvent("keydown",{key:q.key,code:q.code,keyCode:q.keyCode,bubbles:!0,cancelable:!0});document.dispatchEvent(J)},M=N?n:P;return x==="split"?u.jsxs("div",{className:S,children:[u.jsxs("div",{className:"flex justify-between items-center mb-1",children:[u.jsx("span",{className:`text-xs text-slate-400 uppercase tracking-wide ${E}`,children:e}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:`text-xs font-mono transition-colors ${N?"text-slate-400":"text-slate-600"}`,children:D()}),b&&u.jsx("button",{onClick:R,className:`w-5 h-5 rounded flex items-center justify-center transition-all ${N?"bg-emerald-600/20 text-emerald-400 hover:bg-emerald-600/30":"bg-slate-700/50 text-slate-500 hover:bg-slate-700/70"}`,title:N?"Bypass effect":"Enable effect",children:u.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M18.36 6.64a9 9 0 1 1-12.73 0"}),u.jsx("line",{x1:"12",y1:"2",x2:"12",y2:"12"})]})})]})]}),u.jsx("input",{type:"range",min:r,max:s,step:i,value:M,onChange:k,onKeyDown:O,className:`w-full h-1.5 bg-[#3d434f] rounded appearance-none cursor-pointer slider-thumb transition-opacity ${N?"opacity-100":"opacity-40"}`}),p&&u.jsxs("div",{className:"flex justify-between text-xs text-slate-500 mt-1",children:[u.jsx("span",{children:m||r}),u.jsx("span",{children:g||s})]})]}):u.jsxs("div",{className:S,children:[u.jsxs("div",{className:"flex justify-between items-center mb-2",children:[u.jsxs("label",{className:`block text-xs font-medium text-slate-200 uppercase tracking-wide ${E}`,children:[e,u.jsxs("span",{className:`text-xs ml-2 normal-case font-mono transition-colors ${N?"text-slate-400":"text-slate-600"}`,children:["(",D(),")"]})]}),b&&u.jsx("button",{onClick:R,className:`w-5 h-5 rounded flex items-center justify-center transition-all flex-shrink-0 ${N?"bg-emerald-600/20 text-emerald-400 hover:bg-emerald-600/30":"bg-slate-700/50 text-slate-500 hover:bg-slate-700/70"}`,title:N?"Bypass effect":"Enable effect",children:u.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M18.36 6.64a9 9 0 1 1-12.73 0"}),u.jsx("line",{x1:"12",y1:"2",x2:"12",y2:"12"})]})})]}),u.jsx("div",{className:"relative",children:u.jsx("input",{type:"range",min:r,max:s,step:i,value:M,onChange:k,onKeyDown:O,className:`slider-mobile w-full h-1.5 bg-[#3d434f] rounded appearance-none cursor-pointer slider-thumb transition-opacity ${N?"opacity-100":"opacity-40"}`})}),p&&u.jsxs("div",{className:"flex justify-between text-xs text-slate-500 mt-1",children:[u.jsx("span",{children:m||r}),u.jsx("span",{children:g||s})]})]})},cr=({children:e,onClick:n,className:r="",variant:s="primary",size:i="md",disabled:a=!1,active:c=!1,"aria-label":d,"aria-expanded":h,type:p="button",title:m})=>{const g=`
    inline-flex justify-center items-center gap-x-2 rounded-sm
    font-medium border
    focus:outline-none
    transition-all duration-200 ease-out
    disabled:opacity-50 disabled:cursor-not-allowed
    relative overflow-hidden
  `,x=`
    focus:ring-2 focus:ring-offset-2 focus:ring-offset-[#2a2f38]
  `,b={sm:"px-3 py-1.5 text-xs h-8",md:"px-4 py-2.5 text-sm h-10",lg:"px-6 py-3 text-base h-12",icon:"w-8 h-8 flex items-center justify-center p-0"},S={primary:`
      ${c?"bg-[#525a6b] border-gray-500 text-slate-100":"bg-[#3d434f] border-gray-600 text-slate-200 hover:bg-[#4a5262] hover:border-gray-500"}
      focus:ring-blue-500/50
    `,secondary:`
      ${c?"bg-[#525a6b] border-gray-500 text-slate-100":"bg-[#4a5262] border-gray-500 text-slate-200 hover:bg-[#525a6b] hover:border-gray-400"}
      focus:ring-gray-400/50
    `,success:`
      ${c?"bg-green-600 border-green-500 text-green-100":"bg-green-700 border-green-600 text-green-100 hover:bg-green-600 hover:border-green-500"}
      focus:ring-green-500/50
    `,danger:`
      ${c?"bg-red-600 border-red-500 text-red-100":"bg-red-700 border-red-600 text-red-100 hover:bg-red-600 hover:border-red-500"}
      focus:ring-red-500/50
    `,icon:`
      ${c?"bg-[#525a6b] border-gray-500 text-slate-200":"bg-[#3d434f] border-gray-600 text-slate-400 hover:bg-[#4a5262] hover:border-gray-500 hover:text-slate-200"}
      focus:ring-gray-500/50
    `,"play-stop":`
      ${c?"bg-red-700 hover:bg-red-600 border-red-600 text-white":"bg-green-600 hover:bg-green-500 border-green-500 text-white"}
      font-medium uppercase tracking-wide text-sm w-[7em] px-4 py-2
      focus:ring-green-500/50
    `};return u.jsx("button",{type:p,onClick:n,disabled:a,"aria-label":d,"aria-expanded":h,title:m,className:Bt(g,x,b[i],S[s],r),children:u.jsx("span",{className:Bt("flex items-center gap-x-2 tracking-wide","relative"),children:e})})};var xo={},Ta={},Vu,hg;function oC(){if(hg)return Vu;hg=1;function e(i){var a=new s(i),c=a.readChunk();if(c.id!="MThd")throw"Bad MIDI file.  Expected 'MHdr', got: '"+c.id+"'";for(var d=n(c.data),h=[],p=0;!a.eof()&&p<d.numTracks;p++){var m=a.readChunk();if(m.id!="MTrk")throw"Bad MIDI file.  Expected 'MTrk', got: '"+m.id+"'";var g=r(m.data);h.push(g)}return{header:d,tracks:h}}function n(i){var a=new s(i),c=a.readUInt16(),d=a.readUInt16(),h={format:c,numTracks:d},p=a.readUInt16();return p&32768?(h.framesPerSecond=256-(p>>8),h.ticksPerFrame=p&255):h.ticksPerBeat=p,h}function r(i){for(var a=new s(i),c=[];!a.eof();){var d=p();c.push(d)}return c;var h;function p(){var m={};m.deltaTime=a.readVarInt();var g=a.readUInt8();if((g&240)===240)if(g===255){m.meta=!0;var x=a.readUInt8(),b=a.readVarInt();switch(x){case 0:if(m.type="sequenceNumber",b!==2)throw"Expected length for sequenceNumber event is 2, got "+b;return m.number=a.readUInt16(),m;case 1:return m.type="text",m.text=a.readString(b),m;case 2:return m.type="copyrightNotice",m.text=a.readString(b),m;case 3:return m.type="trackName",m.text=a.readString(b),m;case 4:return m.type="instrumentName",m.text=a.readString(b),m;case 5:return m.type="lyrics",m.text=a.readString(b),m;case 6:return m.type="marker",m.text=a.readString(b),m;case 7:return m.type="cuePoint",m.text=a.readString(b),m;case 32:if(m.type="channelPrefix",b!=1)throw"Expected length for channelPrefix event is 1, got "+b;return m.channel=a.readUInt8(),m;case 33:if(m.type="portPrefix",b!=1)throw"Expected length for portPrefix event is 1, got "+b;return m.port=a.readUInt8(),m;case 47:if(m.type="endOfTrack",b!=0)throw"Expected length for endOfTrack event is 0, got "+b;return m;case 81:if(m.type="setTempo",b!=3)throw"Expected length for setTempo event is 3, got "+b;return m.microsecondsPerBeat=a.readUInt24(),m;case 84:if(m.type="smpteOffset",b!=5)throw"Expected length for smpteOffset event is 5, got "+b;var S=a.readUInt8(),E={0:24,32:25,64:29,96:30};return m.frameRate=E[S&96],m.hour=S&31,m.min=a.readUInt8(),m.sec=a.readUInt8(),m.frame=a.readUInt8(),m.subFrame=a.readUInt8(),m;case 88:if(m.type="timeSignature",b!=2&&b!=4)throw"Expected length for timeSignature event is 4 or 2, got "+b;return m.numerator=a.readUInt8(),m.denominator=1<<a.readUInt8(),b===4?(m.metronome=a.readUInt8(),m.thirtyseconds=a.readUInt8()):(m.metronome=36,m.thirtyseconds=8),m;case 89:if(m.type="keySignature",b!=2)throw"Expected length for keySignature event is 2, got "+b;return m.key=a.readInt8(),m.scale=a.readUInt8(),m;case 127:return m.type="sequencerSpecific",m.data=a.readBytes(b),m;default:return m.type="unknownMeta",m.data=a.readBytes(b),m.metatypeByte=x,m}}else if(g==240){m.type="sysEx";var b=a.readVarInt();return m.data=a.readBytes(b),m}else if(g==247){m.type="endSysEx";var b=a.readVarInt();return m.data=a.readBytes(b),m}else throw"Unrecognised MIDI event type byte: "+g;else{var N;if((g&128)===0){if(h===null)throw"Running status byte encountered before status byte";N=g,g=h,m.running=!0}else N=a.readUInt8(),h=g;var j=g>>4;switch(m.channel=g&15,j){case 8:return m.type="noteOff",m.noteNumber=N,m.velocity=a.readUInt8(),m;case 9:var P=a.readUInt8();return m.type=P===0?"noteOff":"noteOn",m.noteNumber=N,m.velocity=P,P===0&&(m.byte9=!0),m;case 10:return m.type="noteAftertouch",m.noteNumber=N,m.amount=a.readUInt8(),m;case 11:return m.type="controller",m.controllerType=N,m.value=a.readUInt8(),m;case 12:return m.type="programChange",m.programNumber=N,m;case 13:return m.type="channelAftertouch",m.amount=N,m;case 14:return m.type="pitchBend",m.value=N+(a.readUInt8()<<7)-8192,m;default:throw"Unrecognised MIDI event type: "+j}}}}function s(i){this.buffer=i,this.bufferLen=this.buffer.length,this.pos=0}return s.prototype.eof=function(){return this.pos>=this.bufferLen},s.prototype.readUInt8=function(){var i=this.buffer[this.pos];return this.pos+=1,i},s.prototype.readInt8=function(){var i=this.readUInt8();return i&128?i-256:i},s.prototype.readUInt16=function(){var i=this.readUInt8(),a=this.readUInt8();return(i<<8)+a},s.prototype.readInt16=function(){var i=this.readUInt16();return i&32768?i-65536:i},s.prototype.readUInt24=function(){var i=this.readUInt8(),a=this.readUInt8(),c=this.readUInt8();return(i<<16)+(a<<8)+c},s.prototype.readInt24=function(){var i=this.readUInt24();return i&8388608?i-16777216:i},s.prototype.readUInt32=function(){var i=this.readUInt8(),a=this.readUInt8(),c=this.readUInt8(),d=this.readUInt8();return(i<<24)+(a<<16)+(c<<8)+d},s.prototype.readBytes=function(i){var a=this.buffer.slice(this.pos,this.pos+i);return this.pos+=i,a},s.prototype.readString=function(i){var a=this.readBytes(i);return String.fromCharCode.apply(null,a)},s.prototype.readVarInt=function(){for(var i=0;!this.eof();){var a=this.readUInt8();if(a&128)i+=a&127,i<<=7;else return i+a}return i},s.prototype.readChunk=function(){var i=this.readString(4),a=this.readUInt32(),c=this.readBytes(a);return{id:i,length:a,data:c}},Vu=e,Vu}var zu,pg;function sC(){if(pg)return zu;pg=1;function e(a,c){if(typeof a!="object")throw"Invalid MIDI data";c=c||{};var d=a.header||{},h=a.tracks||[],p,m=h.length,g=new i;for(n(g,d,m),p=0;p<m;p++)r(g,h[p],c);return g.buffer}function n(a,c,d){var h=c.format==null?1:c.format,p=128;c.timeDivision?p=c.timeDivision:c.ticksPerFrame&&c.framesPerSecond?p=-(c.framesPerSecond&255)<<8|c.ticksPerFrame&255:c.ticksPerBeat&&(p=c.ticksPerBeat&32767);var m=new i;m.writeUInt16(h),m.writeUInt16(d),m.writeUInt16(p),a.writeChunk("MThd",m.buffer)}function r(a,c,d){var h=new i,p,m=c.length,g=null;for(p=0;p<m;p++)(d.running===!1||!d.running&&!c[p].running)&&(g=null),g=s(h,c[p],g,d.useByte9ForNoteOff);a.writeChunk("MTrk",h.buffer)}function s(a,c,d,h){var p=c.type,m=c.deltaTime,g=c.text||"",x=c.data||[],b=null;switch(a.writeVarInt(m),p){case"sequenceNumber":a.writeUInt8(255),a.writeUInt8(0),a.writeVarInt(2),a.writeUInt16(c.number);break;case"text":a.writeUInt8(255),a.writeUInt8(1),a.writeVarInt(g.length),a.writeString(g);break;case"copyrightNotice":a.writeUInt8(255),a.writeUInt8(2),a.writeVarInt(g.length),a.writeString(g);break;case"trackName":a.writeUInt8(255),a.writeUInt8(3),a.writeVarInt(g.length),a.writeString(g);break;case"instrumentName":a.writeUInt8(255),a.writeUInt8(4),a.writeVarInt(g.length),a.writeString(g);break;case"lyrics":a.writeUInt8(255),a.writeUInt8(5),a.writeVarInt(g.length),a.writeString(g);break;case"marker":a.writeUInt8(255),a.writeUInt8(6),a.writeVarInt(g.length),a.writeString(g);break;case"cuePoint":a.writeUInt8(255),a.writeUInt8(7),a.writeVarInt(g.length),a.writeString(g);break;case"channelPrefix":a.writeUInt8(255),a.writeUInt8(32),a.writeVarInt(1),a.writeUInt8(c.channel);break;case"portPrefix":a.writeUInt8(255),a.writeUInt8(33),a.writeVarInt(1),a.writeUInt8(c.port);break;case"endOfTrack":a.writeUInt8(255),a.writeUInt8(47),a.writeVarInt(0);break;case"setTempo":a.writeUInt8(255),a.writeUInt8(81),a.writeVarInt(3),a.writeUInt24(c.microsecondsPerBeat);break;case"smpteOffset":a.writeUInt8(255),a.writeUInt8(84),a.writeVarInt(5);var S={24:0,25:32,29:64,30:96},E=c.hour&31|S[c.frameRate];a.writeUInt8(E),a.writeUInt8(c.min),a.writeUInt8(c.sec),a.writeUInt8(c.frame),a.writeUInt8(c.subFrame);break;case"timeSignature":a.writeUInt8(255),a.writeUInt8(88),a.writeVarInt(4),a.writeUInt8(c.numerator);var N=Math.floor(Math.log(c.denominator)/Math.LN2)&255;a.writeUInt8(N),a.writeUInt8(c.metronome),a.writeUInt8(c.thirtyseconds||8);break;case"keySignature":a.writeUInt8(255),a.writeUInt8(89),a.writeVarInt(2),a.writeInt8(c.key),a.writeUInt8(c.scale);break;case"sequencerSpecific":a.writeUInt8(255),a.writeUInt8(127),a.writeVarInt(x.length),a.writeBytes(x);break;case"unknownMeta":c.metatypeByte!=null&&(a.writeUInt8(255),a.writeUInt8(c.metatypeByte),a.writeVarInt(x.length),a.writeBytes(x));break;case"sysEx":a.writeUInt8(240),a.writeVarInt(x.length),a.writeBytes(x);break;case"endSysEx":a.writeUInt8(247),a.writeVarInt(x.length),a.writeBytes(x);break;case"noteOff":var j=h!==!1&&c.byte9||h&&c.velocity==0?144:128;b=j|c.channel,b!==d&&a.writeUInt8(b),a.writeUInt8(c.noteNumber),a.writeUInt8(c.velocity);break;case"noteOn":b=144|c.channel,b!==d&&a.writeUInt8(b),a.writeUInt8(c.noteNumber),a.writeUInt8(c.velocity);break;case"noteAftertouch":b=160|c.channel,b!==d&&a.writeUInt8(b),a.writeUInt8(c.noteNumber),a.writeUInt8(c.amount);break;case"controller":b=176|c.channel,b!==d&&a.writeUInt8(b),a.writeUInt8(c.controllerType),a.writeUInt8(c.value);break;case"programChange":b=192|c.channel,b!==d&&a.writeUInt8(b),a.writeUInt8(c.programNumber);break;case"channelAftertouch":b=208|c.channel,b!==d&&a.writeUInt8(b),a.writeUInt8(c.amount);break;case"pitchBend":b=224|c.channel,b!==d&&a.writeUInt8(b);var P=8192+c.value,I=P&127,D=P>>7&127;a.writeUInt8(I),a.writeUInt8(D);break;default:throw"Unrecognized event type: "+p}return b}function i(){this.buffer=[]}return i.prototype.writeUInt8=function(a){this.buffer.push(a&255)},i.prototype.writeInt8=i.prototype.writeUInt8,i.prototype.writeUInt16=function(a){var c=a>>8&255,d=a&255;this.writeUInt8(c),this.writeUInt8(d)},i.prototype.writeInt16=i.prototype.writeUInt16,i.prototype.writeUInt24=function(a){var c=a>>16&255,d=a>>8&255,h=a&255;this.writeUInt8(c),this.writeUInt8(d),this.writeUInt8(h)},i.prototype.writeInt24=i.prototype.writeUInt24,i.prototype.writeUInt32=function(a){var c=a>>24&255,d=a>>16&255,h=a>>8&255,p=a&255;this.writeUInt8(c),this.writeUInt8(d),this.writeUInt8(h),this.writeUInt8(p)},i.prototype.writeInt32=i.prototype.writeUInt32,i.prototype.writeBytes=function(a){this.buffer=this.buffer.concat(Array.prototype.slice.call(a,0))},i.prototype.writeString=function(a){var c,d=a.length,h=[];for(c=0;c<d;c++)h.push(a.codePointAt(c));this.writeBytes(h)},i.prototype.writeVarInt=function(a){if(a<0)throw"Cannot write negative variable-length integer";if(a<=127)this.writeUInt8(a);else{var c=a,d=[];for(d.push(c&127),c>>=7;c;){var h=c&127|128;d.push(h),c>>=7}this.writeBytes(d.reverse())}},i.prototype.writeChunk=function(a,c){this.writeString(a),this.writeUInt32(c.length),this.writeBytes(c)},zu=e,zu}var mg;function J0(){return mg||(mg=1,Ta.parseMidi=oC(),Ta.writeMidi=sC()),Ta}var Wu={},yo={},gg;function Z0(){if(gg)return yo;gg=1,Object.defineProperty(yo,"__esModule",{value:!0}),yo.insert=yo.search=void 0;function e(r,s,i){i===void 0&&(i="ticks");var a=0,c=r.length,d=c;if(c>0&&r[c-1][i]<=s)return c-1;for(;a<d;){var h=Math.floor(a+(d-a)/2),p=r[h],m=r[h+1];if(p[i]===s){for(var g=h;g<r.length;g++){var x=r[g];x[i]===s&&(h=g)}return h}else{if(p[i]<s&&m[i]>s)return h;p[i]>s?d=h:p[i]<s&&(a=h+1)}}return-1}yo.search=e;function n(r,s,i){if(i===void 0&&(i="ticks"),r.length){var a=e(r,s[i],i);r.splice(a+1,0,s)}else r.push(s)}return yo.insert=n,yo}var vg;function yd(){return vg||(vg=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Header=e.keySignatureKeys=void 0;var n=Z0(),r=new WeakMap;e.keySignatureKeys=["Cb","Gb","Db","Ab","Eb","Bb","F","C","G","D","A","E","B","F#","C#"];var s=function(){function i(a){var c=this;if(this.tempos=[],this.timeSignatures=[],this.keySignatures=[],this.meta=[],this.name="",r.set(this,480),a){r.set(this,a.header.ticksPerBeat),a.tracks.forEach(function(h){h.forEach(function(p){p.meta&&(p.type==="timeSignature"?c.timeSignatures.push({ticks:p.absoluteTime,timeSignature:[p.numerator,p.denominator]}):p.type==="setTempo"?c.tempos.push({bpm:6e7/p.microsecondsPerBeat,ticks:p.absoluteTime}):p.type==="keySignature"&&c.keySignatures.push({key:e.keySignatureKeys[p.key+7],scale:p.scale===0?"major":"minor",ticks:p.absoluteTime}))})});var d=0;a.tracks[0].forEach(function(h){d+=h.deltaTime,h.meta&&(h.type==="trackName"?c.name=h.text:(h.type==="text"||h.type==="cuePoint"||h.type==="marker"||h.type==="lyrics")&&c.meta.push({text:h.text,ticks:d,type:h.type}))}),this.update()}}return i.prototype.update=function(){var a=this,c=0,d=0;this.tempos.sort(function(h,p){return h.ticks-p.ticks}),this.tempos.forEach(function(h,p){var m=p>0?a.tempos[p-1].bpm:a.tempos[0].bpm,g=h.ticks/a.ppq-d,x=60/m*g;h.time=x+c,c=h.time,d+=g}),this.timeSignatures.sort(function(h,p){return h.ticks-p.ticks}),this.timeSignatures.forEach(function(h,p){var m=p>0?a.timeSignatures[p-1]:a.timeSignatures[0],g=(h.ticks-m.ticks)/a.ppq,x=g/m.timeSignature[0]/(m.timeSignature[1]/4);m.measures=m.measures||0,h.measures=x+m.measures})},i.prototype.ticksToSeconds=function(a){var c=(0,n.search)(this.tempos,a);if(c!==-1){var d=this.tempos[c],h=d.time,p=(a-d.ticks)/this.ppq;return h+60/d.bpm*p}else{var m=a/this.ppq;return 60/120*m}},i.prototype.ticksToMeasures=function(a){var c=(0,n.search)(this.timeSignatures,a);if(c!==-1){var d=this.timeSignatures[c],h=(a-d.ticks)/this.ppq;return d.measures+h/(d.timeSignature[0]/d.timeSignature[1])/4}else return a/this.ppq/4},Object.defineProperty(i.prototype,"ppq",{get:function(){return r.get(this)},enumerable:!1,configurable:!0}),i.prototype.secondsToTicks=function(a){var c=(0,n.search)(this.tempos,a,"time");if(c!==-1){var d=this.tempos[c],h=d.time,p=a-h,m=p/(60/d.bpm);return Math.round(d.ticks+m*this.ppq)}else{var g=a/.5;return Math.round(g*this.ppq)}},i.prototype.toJSON=function(){return{keySignatures:this.keySignatures,meta:this.meta,name:this.name,ppq:this.ppq,tempos:this.tempos.map(function(a){return{bpm:a.bpm,ticks:a.ticks}}),timeSignatures:this.timeSignatures}},i.prototype.fromJSON=function(a){this.name=a.name,this.tempos=a.tempos.map(function(c){return Object.assign({},c)}),this.timeSignatures=a.timeSignatures.map(function(c){return Object.assign({},c)}),this.keySignatures=a.keySignatures.map(function(c){return Object.assign({},c)}),this.meta=a.meta.map(function(c){return Object.assign({},c)}),r.set(this,a.ppq),this.update()},i.prototype.setTempo=function(a){this.tempos=[{bpm:a,ticks:0}],this.update()},i}();e.Header=s}(Wu)),Wu}var $s={},Hu={},xg;function ev(){return xg||(xg=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ControlChange=e.controlChangeIds=e.controlChangeNames=void 0,e.controlChangeNames={1:"modulationWheel",2:"breath",4:"footController",5:"portamentoTime",7:"volume",8:"balance",10:"pan",64:"sustain",65:"portamentoTime",66:"sostenuto",67:"softPedal",68:"legatoFootswitch",84:"portamentoControl"},e.controlChangeIds=Object.keys(e.controlChangeNames).reduce(function(i,a){return i[e.controlChangeNames[a]]=a,i},{});var n=new WeakMap,r=new WeakMap,s=function(){function i(a,c){n.set(this,c),r.set(this,a.controllerType),this.ticks=a.absoluteTime,this.value=a.value}return Object.defineProperty(i.prototype,"number",{get:function(){return r.get(this)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"name",{get:function(){return e.controlChangeNames[this.number]?e.controlChangeNames[this.number]:null},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"time",{get:function(){var a=n.get(this);return a.ticksToSeconds(this.ticks)},set:function(a){var c=n.get(this);this.ticks=c.secondsToTicks(a)},enumerable:!1,configurable:!0}),i.prototype.toJSON=function(){return{number:this.number,ticks:this.ticks,time:this.time,value:this.value}},i}();e.ControlChange=s}(Hu)),Hu}var Gs={},yg;function iC(){if(yg)return Gs;yg=1,Object.defineProperty(Gs,"__esModule",{value:!0}),Gs.createControlChanges=void 0;var e=ev();function n(){return new Proxy({},{get:function(r,s){if(r[s])return r[s];if(e.controlChangeIds.hasOwnProperty(s))return r[e.controlChangeIds[s]]},set:function(r,s,i){return e.controlChangeIds.hasOwnProperty(s)?r[e.controlChangeIds[s]]=i:r[s]=i,!0}})}return Gs.createControlChanges=n,Gs}var Us={},bg;function aC(){if(bg)return Us;bg=1,Object.defineProperty(Us,"__esModule",{value:!0}),Us.PitchBend=void 0;var e=new WeakMap,n=function(){function r(s,i){e.set(this,i),this.ticks=s.absoluteTime,this.value=s.value}return Object.defineProperty(r.prototype,"time",{get:function(){var s=e.get(this);return s.ticksToSeconds(this.ticks)},set:function(s){var i=e.get(this);this.ticks=i.secondsToTicks(s)},enumerable:!1,configurable:!0}),r.prototype.toJSON=function(){return{ticks:this.ticks,time:this.time,value:this.value}},r}();return Us.PitchBend=n,Us}var Vs={},wr={},wg;function lC(){return wg||(wg=1,Object.defineProperty(wr,"__esModule",{value:!0}),wr.DrumKitByPatchID=wr.InstrumentFamilyByID=wr.instrumentByPatchID=void 0,wr.instrumentByPatchID=["acoustic grand piano","bright acoustic piano","electric grand piano","honky-tonk piano","electric piano 1","electric piano 2","harpsichord","clavi","celesta","glockenspiel","music box","vibraphone","marimba","xylophone","tubular bells","dulcimer","drawbar organ","percussive organ","rock organ","church organ","reed organ","accordion","harmonica","tango accordion","acoustic guitar (nylon)","acoustic guitar (steel)","electric guitar (jazz)","electric guitar (clean)","electric guitar (muted)","overdriven guitar","distortion guitar","guitar harmonics","acoustic bass","electric bass (finger)","electric bass (pick)","fretless bass","slap bass 1","slap bass 2","synth bass 1","synth bass 2","violin","viola","cello","contrabass","tremolo strings","pizzicato strings","orchestral harp","timpani","string ensemble 1","string ensemble 2","synthstrings 1","synthstrings 2","choir aahs","voice oohs","synth voice","orchestra hit","trumpet","trombone","tuba","muted trumpet","french horn","brass section","synthbrass 1","synthbrass 2","soprano sax","alto sax","tenor sax","baritone sax","oboe","english horn","bassoon","clarinet","piccolo","flute","recorder","pan flute","blown bottle","shakuhachi","whistle","ocarina","lead 1 (square)","lead 2 (sawtooth)","lead 3 (calliope)","lead 4 (chiff)","lead 5 (charang)","lead 6 (voice)","lead 7 (fifths)","lead 8 (bass + lead)","pad 1 (new age)","pad 2 (warm)","pad 3 (polysynth)","pad 4 (choir)","pad 5 (bowed)","pad 6 (metallic)","pad 7 (halo)","pad 8 (sweep)","fx 1 (rain)","fx 2 (soundtrack)","fx 3 (crystal)","fx 4 (atmosphere)","fx 5 (brightness)","fx 6 (goblins)","fx 7 (echoes)","fx 8 (sci-fi)","sitar","banjo","shamisen","koto","kalimba","bag pipe","fiddle","shanai","tinkle bell","agogo","steel drums","woodblock","taiko drum","melodic tom","synth drum","reverse cymbal","guitar fret noise","breath noise","seashore","bird tweet","telephone ring","helicopter","applause","gunshot"],wr.InstrumentFamilyByID=["piano","chromatic percussion","organ","guitar","bass","strings","ensemble","brass","reed","pipe","synth lead","synth pad","synth effects","world","percussive","sound effects"],wr.DrumKitByPatchID={0:"standard kit",8:"room kit",16:"power kit",24:"electronic kit",25:"tr-808 kit",32:"jazz kit",40:"brush kit",48:"orchestra kit",56:"sound fx kit"}),wr}var Ng;function cC(){if(Ng)return Vs;Ng=1,Object.defineProperty(Vs,"__esModule",{value:!0}),Vs.Instrument=void 0;var e=lC(),n=new WeakMap,r=function(){function s(i,a){if(this.number=0,n.set(this,a),this.number=0,i){var c=i.find(function(d){return d.type==="programChange"});c&&(this.number=c.programNumber)}}return Object.defineProperty(s.prototype,"name",{get:function(){return this.percussion?e.DrumKitByPatchID[this.number]:e.instrumentByPatchID[this.number]},set:function(i){var a=e.instrumentByPatchID.indexOf(i);a!==-1&&(this.number=a)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"family",{get:function(){return this.percussion?"drums":e.InstrumentFamilyByID[Math.floor(this.number/8)]},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"percussion",{get:function(){var i=n.get(this);return i.channel===9},enumerable:!1,configurable:!0}),s.prototype.toJSON=function(){return{family:this.family,number:this.number,name:this.name}},s.prototype.fromJSON=function(i){this.number=i.number},s}();return Vs.Instrument=r,Vs}var zs={},Cg;function uC(){if(Cg)return zs;Cg=1,Object.defineProperty(zs,"__esModule",{value:!0}),zs.Note=void 0;function e(c){var d=Math.floor(c/12)-1;return n(c)+d.toString()}function n(c){var d=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],h=c%12;return d[h]}function r(c){var d=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];return d.indexOf(c)}var s=function(){var c=/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i,d={cbb:-2,cb:-1,c:0,"c#":1,cx:2,dbb:0,db:1,d:2,"d#":3,dx:4,ebb:2,eb:3,e:4,"e#":5,ex:6,fbb:3,fb:4,f:5,"f#":6,fx:7,gbb:5,gb:6,g:7,"g#":8,gx:9,abb:7,ab:8,a:9,"a#":10,ax:11,bbb:9,bb:10,b:11,"b#":12,bx:13};return function(h){var p=c.exec(h),m=p[1],g=p[2],x=d[m.toLowerCase()];return x+(parseInt(g,10)+1)*12}}(),i=new WeakMap,a=function(){function c(d,h,p){i.set(this,p),this.midi=d.midi,this.velocity=d.velocity,this.noteOffVelocity=h.velocity,this.ticks=d.ticks,this.durationTicks=h.ticks-d.ticks}return Object.defineProperty(c.prototype,"name",{get:function(){return e(this.midi)},set:function(d){this.midi=s(d)},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"octave",{get:function(){return Math.floor(this.midi/12)-1},set:function(d){var h=d-this.octave;this.midi+=h*12},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"pitch",{get:function(){return n(this.midi)},set:function(d){this.midi=12*(this.octave+1)+r(d)},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"duration",{get:function(){var d=i.get(this);return d.ticksToSeconds(this.ticks+this.durationTicks)-d.ticksToSeconds(this.ticks)},set:function(d){var h=i.get(this),p=h.secondsToTicks(this.time+d);this.durationTicks=p-this.ticks},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"time",{get:function(){var d=i.get(this);return d.ticksToSeconds(this.ticks)},set:function(d){var h=i.get(this);this.ticks=h.secondsToTicks(d)},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"bars",{get:function(){var d=i.get(this);return d.ticksToMeasures(this.ticks)},enumerable:!1,configurable:!0}),c.prototype.toJSON=function(){return{duration:this.duration,durationTicks:this.durationTicks,midi:this.midi,name:this.name,ticks:this.ticks,time:this.time,velocity:this.velocity}},c}();return zs.Note=a,zs}var Sg;function Eg(){if(Sg)return $s;Sg=1,Object.defineProperty($s,"__esModule",{value:!0}),$s.Track=void 0;var e=Z0(),n=ev(),r=iC(),s=aC(),i=cC(),a=uC(),c=new WeakMap,d=function(){function h(p,m){var g=this;if(this.name="",this.notes=[],this.controlChanges=(0,r.createControlChanges)(),this.pitchBends=[],c.set(this,m),p){var x=p.find(function(D){return D.type==="trackName"});this.name=x?x.text:""}if(this.instrument=new i.Instrument(p,this),this.channel=0,p){for(var b=p.filter(function(D){return D.type==="noteOn"}),S=p.filter(function(D){return D.type==="noteOff"}),E=function(){var D=b.shift();N.channel=D.channel;var k=S.findIndex(function(O){return O.noteNumber===D.noteNumber&&O.absoluteTime>=D.absoluteTime});if(k!==-1){var R=S.splice(k,1)[0];N.addNote({durationTicks:R.absoluteTime-D.absoluteTime,midi:D.noteNumber,noteOffVelocity:R.velocity/127,ticks:D.absoluteTime,velocity:D.velocity/127})}},N=this;b.length;)E();var j=p.filter(function(D){return D.type==="controller"});j.forEach(function(D){g.addCC({number:D.controllerType,ticks:D.absoluteTime,value:D.value/127})});var P=p.filter(function(D){return D.type==="pitchBend"});P.forEach(function(D){g.addPitchBend({ticks:D.absoluteTime,value:D.value/Math.pow(2,13)})});var I=p.find(function(D){return D.type==="endOfTrack"});this.endOfTrackTicks=I!==void 0?I.absoluteTime:void 0}}return h.prototype.addNote=function(p){var m=c.get(this),g=new a.Note({midi:0,ticks:0,velocity:1},{ticks:0,velocity:0},m);return Object.assign(g,p),(0,e.insert)(this.notes,g,"ticks"),this},h.prototype.addCC=function(p){var m=c.get(this),g=new n.ControlChange({controllerType:p.number},m);return delete p.number,Object.assign(g,p),Array.isArray(this.controlChanges[g.number])||(this.controlChanges[g.number]=[]),(0,e.insert)(this.controlChanges[g.number],g,"ticks"),this},h.prototype.addPitchBend=function(p){var m=c.get(this),g=new s.PitchBend({},m);return Object.assign(g,p),(0,e.insert)(this.pitchBends,g,"ticks"),this},Object.defineProperty(h.prototype,"duration",{get:function(){if(!this.notes.length)return 0;for(var p=this.notes[this.notes.length-1].time+this.notes[this.notes.length-1].duration,m=0;m<this.notes.length-1;m++){var g=this.notes[m].time+this.notes[m].duration;p<g&&(p=g)}return p},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"durationTicks",{get:function(){if(!this.notes.length)return 0;for(var p=this.notes[this.notes.length-1].ticks+this.notes[this.notes.length-1].durationTicks,m=0;m<this.notes.length-1;m++){var g=this.notes[m].ticks+this.notes[m].durationTicks;p<g&&(p=g)}return p},enumerable:!1,configurable:!0}),h.prototype.fromJSON=function(p){var m=this;this.name=p.name,this.channel=p.channel,this.instrument=new i.Instrument(void 0,this),this.instrument.fromJSON(p.instrument),p.endOfTrackTicks!==void 0&&(this.endOfTrackTicks=p.endOfTrackTicks);for(var g in p.controlChanges)p.controlChanges[g]&&p.controlChanges[g].forEach(function(x){m.addCC({number:x.number,ticks:x.ticks,value:x.value})});p.notes.forEach(function(x){m.addNote({durationTicks:x.durationTicks,midi:x.midi,ticks:x.ticks,velocity:x.velocity})})},h.prototype.toJSON=function(){for(var p={},m=0;m<127;m++)this.controlChanges.hasOwnProperty(m)&&(p[m]=this.controlChanges[m].map(function(x){return x.toJSON()}));var g={channel:this.channel,controlChanges:p,pitchBends:this.pitchBends.map(function(x){return x.toJSON()}),instrument:this.instrument.toJSON(),name:this.name,notes:this.notes.map(function(x){return x.toJSON()})};return this.endOfTrackTicks!==void 0&&(g.endOfTrackTicks=this.endOfTrackTicks),g},h}();return $s.Track=d,$s}var bo={};function dC(e){var n=[];return tv(e,n),n}function tv(e,n){for(var r=0;r<e.length;r++){var s=e[r];Array.isArray(s)?tv(s,n):n.push(s)}}const fC=Object.freeze(Object.defineProperty({__proto__:null,flatten:dC},Symbol.toStringTag,{value:"Module"})),hC=P0(fC);var Dg;function pC(){if(Dg)return bo;Dg=1;var e=bo&&bo.__spreadArray||function(j,P,I){if(I||arguments.length===2)for(var D=0,k=P.length,R;D<k;D++)(R||!(D in P))&&(R||(R=Array.prototype.slice.call(P,0,D)),R[D]=P[D]);return j.concat(R||Array.prototype.slice.call(P))};Object.defineProperty(bo,"__esModule",{value:!0}),bo.encode=void 0;var n=J0(),r=yd(),s=hC;function i(j,P){return[{absoluteTime:j.ticks,channel:P,deltaTime:0,noteNumber:j.midi,type:"noteOn",velocity:Math.floor(j.velocity*127)},{absoluteTime:j.ticks+j.durationTicks,channel:P,deltaTime:0,noteNumber:j.midi,type:"noteOff",velocity:Math.floor(j.noteOffVelocity*127)}]}function a(j){return(0,s.flatten)(j.notes.map(function(P){return i(P,j.channel)}))}function c(j,P){return{absoluteTime:j.ticks,channel:P,controllerType:j.number,deltaTime:0,type:"controller",value:Math.floor(j.value*127)}}function d(j){for(var P=[],I=0;I<127;I++)j.controlChanges.hasOwnProperty(I)&&j.controlChanges[I].forEach(function(D){P.push(c(D,j.channel))});return P}function h(j,P){return{absoluteTime:j.ticks,channel:P,deltaTime:0,type:"pitchBend",value:j.value}}function p(j){var P=[];return j.pitchBends.forEach(function(I){P.push(h(I,j.channel))}),P}function m(j){return{absoluteTime:0,channel:j.channel,deltaTime:0,programNumber:j.instrument.number,type:"programChange"}}function g(j){return{absoluteTime:0,deltaTime:0,meta:!0,text:j,type:"trackName"}}function x(j){return{absoluteTime:j.ticks,deltaTime:0,meta:!0,microsecondsPerBeat:Math.floor(6e7/j.bpm),type:"setTempo"}}function b(j){return{absoluteTime:j.ticks,deltaTime:0,denominator:j.timeSignature[1],meta:!0,metronome:24,numerator:j.timeSignature[0],thirtyseconds:8,type:"timeSignature"}}function S(j){var P=r.keySignatureKeys.indexOf(j.key);return{absoluteTime:j.ticks,deltaTime:0,key:P+7,meta:!0,scale:j.scale==="major"?0:1,type:"keySignature"}}function E(j){return{absoluteTime:j.ticks,deltaTime:0,meta:!0,text:j.text,type:j.type}}function N(j){var P={header:{format:1,numTracks:j.tracks.length+1,ticksPerBeat:j.header.ppq},tracks:e([e(e(e(e([{absoluteTime:0,deltaTime:0,meta:!0,text:j.header.name,type:"trackName"}],j.header.keySignatures.map(function(I){return S(I)}),!0),j.header.meta.map(function(I){return E(I)}),!0),j.header.tempos.map(function(I){return x(I)}),!0),j.header.timeSignatures.map(function(I){return b(I)}),!0)],j.tracks.map(function(I){return e(e(e([g(I.name),m(I)],a(I),!0),d(I),!0),p(I),!0)}),!0)};return P.tracks=P.tracks.map(function(I){I=I.sort(function(k,R){return k.absoluteTime-R.absoluteTime});var D=0;return I.forEach(function(k){k.deltaTime=k.absoluteTime-D,D=k.absoluteTime,delete k.absoluteTime}),I.push({deltaTime:0,meta:!0,type:"endOfTrack"}),I}),new Uint8Array((0,n.writeMidi)(P))}return bo.encode=N,bo}var Ag;function mC(){return Ag||(Ag=1,function(e){var n=xo&&xo.__awaiter||function(g,x,b,S){function E(N){return N instanceof b?N:new b(function(j){j(N)})}return new(b||(b=Promise))(function(N,j){function P(k){try{D(S.next(k))}catch(R){j(R)}}function I(k){try{D(S.throw(k))}catch(R){j(R)}}function D(k){k.done?N(k.value):E(k.value).then(P,I)}D((S=S.apply(g,x||[])).next())})},r=xo&&xo.__generator||function(g,x){var b={label:0,sent:function(){if(N[0]&1)throw N[1];return N[1]},trys:[],ops:[]},S,E,N,j;return j={next:P(0),throw:P(1),return:P(2)},typeof Symbol=="function"&&(j[Symbol.iterator]=function(){return this}),j;function P(D){return function(k){return I([D,k])}}function I(D){if(S)throw new TypeError("Generator is already executing.");for(;b;)try{if(S=1,E&&(N=D[0]&2?E.return:D[0]?E.throw||((N=E.return)&&N.call(E),0):E.next)&&!(N=N.call(E,D[1])).done)return N;switch(E=0,N&&(D=[D[0]&2,N.value]),D[0]){case 0:case 1:N=D;break;case 4:return b.label++,{value:D[1],done:!1};case 5:b.label++,E=D[1],D=[0];continue;case 7:D=b.ops.pop(),b.trys.pop();continue;default:if(N=b.trys,!(N=N.length>0&&N[N.length-1])&&(D[0]===6||D[0]===2)){b=0;continue}if(D[0]===3&&(!N||D[1]>N[0]&&D[1]<N[3])){b.label=D[1];break}if(D[0]===6&&b.label<N[1]){b.label=N[1],N=D;break}if(N&&b.label<N[2]){b.label=N[2],b.ops.push(D);break}N[2]&&b.ops.pop(),b.trys.pop();continue}D=x.call(g,b)}catch(k){D=[6,k],E=0}finally{S=N=0}if(D[0]&5)throw D[1];return{value:D[0]?D[1]:void 0,done:!0}}};Object.defineProperty(e,"__esModule",{value:!0}),e.Header=e.Track=e.Midi=void 0;var s=J0(),i=yd(),a=Eg(),c=pC(),d=function(){function g(x){var b=this,S=null;if(x){var E=x instanceof ArrayBuffer?new Uint8Array(x):x;S=(0,s.parseMidi)(E),S.tracks.forEach(function(N){var j=0;N.forEach(function(P){j+=P.deltaTime,P.absoluteTime=j})}),S.tracks=m(S.tracks)}this.header=new i.Header(S),this.tracks=[],x&&(this.tracks=S.tracks.map(function(N){return new a.Track(N,b.header)}),S.header.format===1&&this.tracks[0].duration===0&&this.tracks.shift())}return g.fromUrl=function(x){return n(this,void 0,void 0,function(){var b,S;return r(this,function(E){switch(E.label){case 0:return[4,fetch(x)];case 1:return b=E.sent(),b.ok?[4,b.arrayBuffer()]:[3,3];case 2:return S=E.sent(),[2,new g(S)];case 3:throw new Error("Could not load '".concat(x,"'"))}})})},Object.defineProperty(g.prototype,"name",{get:function(){return this.header.name},set:function(x){this.header.name=x},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"duration",{get:function(){var x=this.tracks.map(function(b){return b.duration});return Math.max.apply(Math,x)},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"durationTicks",{get:function(){var x=this.tracks.map(function(b){return b.durationTicks});return Math.max.apply(Math,x)},enumerable:!1,configurable:!0}),g.prototype.addTrack=function(){var x=new a.Track(void 0,this.header);return this.tracks.push(x),x},g.prototype.toArray=function(){return(0,c.encode)(this)},g.prototype.toJSON=function(){return{header:this.header.toJSON(),tracks:this.tracks.map(function(x){return x.toJSON()})}},g.prototype.fromJSON=function(x){var b=this;this.header=new i.Header,this.header.fromJSON(x.header),this.tracks=x.tracks.map(function(S){var E=new a.Track(void 0,b.header);return E.fromJSON(S),E})},g.prototype.clone=function(){var x=new g;return x.fromJSON(this.toJSON()),x},g}();e.Midi=d;var h=Eg();Object.defineProperty(e,"Track",{enumerable:!0,get:function(){return h.Track}});var p=yd();Object.defineProperty(e,"Header",{enumerable:!0,get:function(){return p.Header}});function m(g){for(var x=[],b=0;b<g.length;b++)for(var S=x.length,E=new Map,N=Array(16).fill(0),j=0,P=g[b];j<P.length;j++){var I=P[j],D=S,k=I.channel;if(k!==void 0){I.type==="programChange"&&(N[k]=I.programNumber);var R=N[k],O="".concat(R," ").concat(k);E.has(O)?D=E.get(O):(D=S+E.size,E.set(O,D))}x[D]||x.push([]),x[D].push(I)}return x}}(xo)),xo}var gC=mC();const vC=()=>{const[e,n]=w.useState(!1),r=w.useRef(null),s=w.useRef(new Map),i=w.useCallback((m,g)=>{r.current={notes:[],bpm:m,subdivision:g},s.current.clear(),n(!0),console.log("MIDI Recording started at BPM:",m,"Subdivision:",g)},[]),a=w.useCallback((m,g)=>{!r.current||!e||s.current.set(m,g)},[e]),c=w.useCallback((m,g,x)=>{if(!r.current||!e)return;const b=s.current.get(m);if(b===void 0)return;const S=x;r.current.notes.push({note:m,step:b,duration:S}),s.current.delete(m)},[e]),d=w.useCallback(()=>{if(!r.current)return null;s.current.forEach((g,x)=>{r.current.notes.push({note:x,step:g,duration:.9})}),s.current.clear(),n(!1);const m=r.current;return r.current=null,console.log("MIDI Recording stopped. Recorded notes:",m.notes.length),m},[]),h=w.useCallback(m=>{const g=new gC.Midi;g.header.setTempo(m.bpm);const x=g.addTrack(),E=60/m.bpm*m.subdivision;m.notes.forEach(P=>{const I=P.step*E,D=P.duration*E;x.addNote({midi:P.note,time:I,duration:D,velocity:.8})});const j=g.toArray().buffer.slice(0);return new Blob([j],{type:"audio/midi"})},[]),p=w.useCallback((m,g="recording.mid")=>{const x=h(m),b=URL.createObjectURL(x),S=document.createElement("a");S.href=b,S.download=g,document.body.appendChild(S),S.click(),document.body.removeChild(S),URL.revokeObjectURL(b)},[h]);return{isRecording:e,startRecording:i,stopRecording:d,recordNoteOn:a,recordNoteOff:c,downloadMidi:p}},xC=e=>{if(!e||e.length===0)return"C";const n=e.charAt(0).toUpperCase(),r=e.slice(1);let i={C:0,D:2,E:4,F:5,G:7,A:9,B:11}[n];if(i===void 0)return"C";const a=(r.match(/#/g)||[]).length,c=(r.match(/b/g)||[]).length;return i+=a-c,i=(i%12+12)%12,["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"][i]},yC=({className:e=""})=>{const[n,r]=w.useState(!1),{isRecording:s,startRecording:i,stopRecording:a,recordNoteOn:c,recordNoteOff:d,downloadMidi:h}=vC(),{globalPatternState:p}=yt(),{activeNotes:m,activeChordIndex:g,addedChords:x}=Oe(),{pianoSettings:b}=Ye(),S=w.useRef(null),E=w.useRef(-1),N=w.useRef(null);w.useEffect(()=>{if(p.isPlaying&&!s&&n)i(p.bpm,p.subdivision),N.current=null,E.current=-1;else if((!p.isPlaying||!n)&&s){const I=a();I&&I.notes.length>0&&(N.current=I),E.current=-1}},[p.isPlaying,p.bpm,p.subdivision,s,i,a,n]),w.useEffect(()=>{if(!s||!p.isPlaying||p.currentStep===E.current)return;const I=g!==null&&x[g]?x[g].pattern:p.currentPattern;if(!I||I.length===0)return;const D=p.currentStep%I.length,k=I[D],O=((M,q)=>{if(M==="x"||M==="X")return null;const J=M.includes("+"),ie=M.includes("-"),Y=parseInt(M.replace(/[+-]/g,""))-1;return Y>=0&&Y<q?{noteIndex:Y,octaveUp:J,octaveDown:ie}:null})(k,m.length);if(S.current!==null&&(d(S.current,p.currentStep,b.noteDuration),S.current=null),O&&m.length>0){const{noteIndex:M,octaveUp:q,octaveDown:J}=O,{note:ie,octave:Y=4}=m[M];let W=Y;q&&(W+=1),J&&(W-=1),W=Math.max(1,Math.min(8,W));const re=hn.fromNote(`${xC(ie)}${W}`);c(re,p.currentStep),S.current=re}E.current=p.currentStep},[p.currentStep,p.isPlaying,s,m,g,x,p.currentPattern,b.noteDuration,c,d]),w.useEffect(()=>()=>{S.current!==null&&s&&d(S.current,p.currentStep,b.noteDuration)},[d,s,p.currentStep,b.noteDuration]);const j=()=>{if(N.current){const I=new Date().toISOString().replace(/[:.]/g,"-").slice(0,-5);h(N.current,`modal-chordbuildr-${I}.mid`)}},P=()=>{if(r(!n),n&&s){const I=a();I&&I.notes.length>0&&(N.current=I)}};return u.jsxs("div",{className:`space-t-4 ${e}`,children:[u.jsxs("div",{className:"flex items-center justify-between p-3 bg-[#363c46] rounded-lg border border-gray-600",children:[u.jsxs("div",{className:"flex flex-col text-left",children:[u.jsx("span",{className:"text-xs uppercase font-medium text-gray-400 text-left mr-6",children:"MIDI Recording"}),u.jsxs("div",{className:"flex items-center space-x-2",children:[s&&u.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse mt-[0.1em] mr-[0.25em]"}),u.jsx("span",{className:`text-xs ${s?"text-red-300 font-medium":"text-gray-400"}`,children:n?s?"Recording MIDI":(N.current,"Ready to record"):"Disabled"})]})]}),u.jsx("button",{onClick:P,className:`relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:ring-offset-gray-800 ${n?"bg-blue-600":"bg-gray-600"}`,role:"switch","aria-checked":n,"aria-label":"Toggle MIDI recording",children:u.jsx("span",{"aria-hidden":"true",className:`pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ${n?"translate-x-5":"translate-x-0"}`})})]}),!s&&N.current&&u.jsx("div",{className:"mt-3",children:u.jsxs("button",{onClick:j,className:"flex items-center space-x-2 px-3 py-1.5 h-8 bg-green-600 hover:bg-green-700 text-white rounded transition-colors text-xs font-medium uppercase tracking-wide",children:[u.jsx(pw,{className:"w-4 h-4"}),u.jsx("span",{children:"Save"})]})})]})},bC=w.lazy(()=>TN(()=>import("./PatternNotationHelpModal-CDptMkjr.js"),[])),Ws=[{value:.125,symbol:"",name:"32nd notes"},{value:.25,symbol:"",name:"16th notes"},{value:.5,symbol:"",name:"8th notes"},{value:1,symbol:"",name:"Quarter notes"},{value:2,symbol:"",name:"Half notes"}],bd=w.memo(({stepIndex:e,stepValue:n,maxNotes:r,onStepChange:s})=>{const i=w.useMemo(()=>{const p=[""];for(let m=1;m<=r;m++)p.push(String(m)),p.push(`${m}`);return p},[r]),c=(()=>{if(n==="x")return"";const p=parseInt(n.replace("+",""));return!isNaN(p)&&p>r?"":n.replace("+","")})(),d=n!=="x"&&c==="",h=p=>{let m=p;p===""?m="x":p.includes("")&&(m=p.replace("","+")),s(e,m)};return u.jsx("div",{className:"relative",children:u.jsx(ar,{value:c,onChange:h,options:i,className:"w-full",buttonClassName:`w-full h-10 text-xs pl-2.5 ${n==="x"?"bg-[#3d434f] border-gray-700 text-slate-400":d?"bg-[#3d434f] border-gray-700 text-orange-400":"bg-[#3d434f] border-gray-600 text-slate-200 hover:bg-[#4a5262]"} border rounded transition-all duration-200`})})});bd.displayName="StepEditor";const wC=()=>{const e=Oe(F=>F.addedChords),n=Oe(F=>F.activeChordIndex),r=Oe(F=>F.updateChordPattern),s=yt(F=>F.currentlyActivePattern),i=yt(F=>F.globalPatternState),a=yt(F=>F.setGlobalPatternState),c=yt(F=>F.updatePattern),[d,h]=w.useState(!1),[p,m]=w.useState(!0),[g,x]=w.useState("1,2,3,4"),[b,S]=w.useState(!1),E=w.useRef(n),N=w.useRef(r),j=w.useRef(a);w.useEffect(()=>{E.current=n},[n]),w.useEffect(()=>{N.current=r},[r]),w.useEffect(()=>{j.current=a},[a]);const P=w.useMemo(()=>n!==null?e[n]:null,[n,e]),I=P?.pattern??i.currentPattern,D=w.useMemo(()=>P?{type:"chord",title:`Pattern for "${P.name}"`,description:"Editing pattern for this specific chord",chordName:P.name}:{type:"current",title:"Global Pattern",description:"Base pattern - becomes active when no chord is selected",chordName:null},[P]),k=w.useMemo(()=>{if(P){const F=P.notes.split(",").map(_=>_.trim()).filter(_=>_);return new Set(F.map(_=>_.replace(/\d+$/,""))).size}return 4},[P]),R=w.useMemo(()=>{const F=Math.min(4,k);return Math.max(F,k)},[k]);w.useEffect(()=>{I&&x(I.join(","))},[I]);const O=w.useCallback(()=>{const F=!i.isPlaying;j.current({isPlaying:F})},[i.isPlaying]);w.useCallback(()=>{j.current({isPlaying:!1,currentStep:0})},[]);const M=w.useCallback(F=>{const A=E.current;A!==null?N.current(A,F):j.current({currentPattern:F})},[]),q=w.useCallback((F,A)=>{const _=[...I];_[F]=A,M(_)},[I,M]),J=w.useCallback(()=>{if(I.length<16){const F=[...I,"x"];M(F)}},[I,M]),ie=w.useCallback(()=>{if(I.length>1){const F=I.slice(0,-1);M(F)}},[I,M]),Y=w.useCallback(()=>{try{const F=g.split(",").map(A=>A.trim()).filter(A=>A);F.length>0&&M(F)}catch{console.error("Invalid pattern format")}},[g,M]),W=w.useCallback(F=>{M(F.pattern)},[M]),re=w.useMemo(()=>WN(F=>{c(F)},50),[c]),ae=w.useMemo(()=>i.isPlaying?i.currentStep%I.length:-1,[i.isPlaying,i.currentStep,I.length]),ce=Ws.map(F=>`${F.symbol} ${F.name}`),ee=Ws.find(F=>F.value===i.subdivision),Q=ee?`${ee.symbol} ${ee.name}`:`${Ws[1].symbol} ${Ws[1].name}`,V=w.useMemo(()=>{const F=window.innerWidth>=768?8:4,A=Array.from({length:Math.ceil(I.length/F)},(_,Z)=>{const oe=Z*F,fe=Math.min(oe+F,I.length);return{startIndex:oe,endIndex:fe,steps:I.slice(oe,fe)}});return{cols:F,rows:A}},[I]);return u.jsx("div",{className:"w-full max-w-7xl mx-auto px-2 mt-4",children:u.jsxs("div",{className:"bg-[#3d434f] border border-gray-600 rounded-lg overflow-hidden",children:[u.jsxs("div",{className:"px-4 py-3",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("h2",{className:"text-sm font-bold text-slate-300 uppercase tracking-wider",children:"Sequencer"}),u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx("button",{onClick:()=>h(!d),className:"w-[7em] h-8 flex items-center space-x-2 px-3 py-1.5 text-xs text-slate-300 hover:text-slate-200 bg-[#4a5262] hover:bg-[#525a6b] border border-gray-600 rounded transition-all duration-200",children:d?u.jsxs(u.Fragment,{children:[u.jsx(ni,{className:"w-3 h-3"}),u.jsx("span",{children:"Hide"})]}):u.jsxs(u.Fragment,{children:[u.jsx(Co,{className:"w-3 h-3"}),u.jsx("span",{children:"Show"})]})}),u.jsx(cr,{onClick:O,variant:"play-stop",size:"sm",active:i.isPlaying,className:"shadow-lg",children:i.isPlaying?u.jsxs(u.Fragment,{children:[u.jsx(ri,{className:"w-6 h-6"}),u.jsx("span",{className:"hidden sm:inline",children:"Stop"})]}):u.jsxs(u.Fragment,{children:[u.jsx(oi,{className:"w-6 h-6"}),u.jsx("span",{className:"hidden sm:inline",children:"Play"})]})})]})]}),u.jsx("div",{className:"mt-3 pt-3 border-t border-gray-600",children:u.jsx(yC,{})})]}),u.jsxs("div",{className:`transition-all duration-300 ease-in-out overflow-hidden ${d?" opacity-100":"max-h-0 opacity-0"}`,children:[u.jsxs("div",{className:"border-t border-gray-600 bg-[#444b59]",children:[u.jsxs("div",{className:"px-4 py-3 border-b border-gray-600 bg-[#3d434f]",children:[u.jsxs("div",{className:"flex items-center justify-between sm:hidden",children:[u.jsxs("div",{className:"flex items-center space-x-1",children:[u.jsx("button",{onClick:ie,disabled:I.length<=1,className:"flex items-center justify-center w-7 h-7 bg-[#4a5262] hover:bg-red-600 disabled:opacity-50 disabled:cursor-not-allowed text-xs rounded transition-all duration-200 text-slate-200 hover:text-white disabled:hover:bg-[#4a5262] disabled:hover:text-slate-200",title:"Remove step",children:u.jsx(Tm,{className:"w-3 h-3"})}),u.jsx("div",{className:"text-xs text-slate-300 font-mono w-8 text-center",children:I.length}),u.jsx("button",{onClick:J,disabled:I.length>=16,className:"flex items-center justify-center w-7 h-7 bg-[#4a5262] hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed text-xs rounded transition-all duration-200 text-slate-200 hover:text-white disabled:hover:bg-[#4a5262] disabled:hover:text-slate-200",title:"Add step",children:u.jsx(Rm,{className:"w-3 h-3"})})]}),u.jsx("div",{children:D.chordName?u.jsx("div",{className:"text-xs font-medium text-purple-300 bg-purple-900/30 px-2 py-1 rounded border border-purple-700/50",children:D.chordName}):u.jsx("div",{className:"text-xs text-cyan-300 bg-cyan-900/30 px-2 py-1 rounded border border-cyan-700/50",children:"Global Pattern"})})]}),u.jsxs("div",{className:"hidden sm:flex sm:items-center sm:justify-between",children:[u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx("span",{className:"text-xs text-slate-400 font-medium",children:"Pattern:"}),u.jsxs("div",{className:"text-xs text-slate-300 font-mono bg-[#4a5262] px-2 py-1 rounded",children:[I.length," steps"]})]}),D.chordName&&u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("span",{className:"text-xs text-slate-400",children:"for"}),u.jsx("div",{className:"text-xs font-medium text-purple-300 bg-purple-900/30 px-2 py-1 rounded border border-purple-700/50",children:D.chordName})]}),!D.chordName&&u.jsx("div",{className:"text-xs text-cyan-300 bg-cyan-900/30 px-2 py-1 rounded border border-cyan-700/50",children:"Global Pattern"})]}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("span",{className:"text-xs text-slate-400",children:"Steps:"}),u.jsxs("div",{className:"flex items-center space-x-1",children:[u.jsx("button",{onClick:ie,disabled:I.length<=1,className:"flex items-center justify-center w-7 h-7 bg-[#4a5262] hover:bg-red-600 disabled:opacity-50 disabled:cursor-not-allowed text-xs rounded transition-all duration-200 text-slate-200 hover:text-white disabled:hover:bg-[#4a5262] disabled:hover:text-slate-200",title:"Remove step",children:u.jsx(Tm,{className:"w-3 h-3"})}),u.jsx("div",{className:"text-xs text-slate-300 font-mono w-8 text-center",children:I.length}),u.jsx("button",{onClick:J,disabled:I.length>=16,className:"flex items-center justify-center w-7 h-7 bg-[#4a5262] hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed text-xs rounded transition-all duration-200 text-slate-200 hover:text-white disabled:hover:bg-[#4a5262] disabled:hover:text-slate-200",title:"Add step",children:u.jsx(Rm,{className:"w-3 h-3"})})]})]})]})]}),u.jsxs("div",{className:"p-6 px-3 sm:px-4",children:[u.jsx("div",{className:"block md:hidden",children:V.rows.map((F,A)=>u.jsxs("div",{className:"mb-4 last:mb-0",children:[u.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[F.steps.map((_,Z)=>{const oe=F.startIndex+Z;return u.jsx(bd,{stepIndex:oe,stepValue:_,maxNotes:R,onStepChange:q},oe)}),Array.from({length:4-F.steps.length},(_,Z)=>u.jsx("div",{},`empty-${Z}`))]}),u.jsxs("div",{className:"grid grid-cols-4 gap-2 mt-2",children:[F.steps.map((_,Z)=>{const oe=F.startIndex+Z;return u.jsx("div",{className:"flex justify-center",children:u.jsx("div",{className:`transition-all duration-200 ${ae===oe?"w-full h-1 bg-blue-400 rounded-full":"w-full h-1 bg-gray-600 rounded-full"}`})},`indicator-${oe}`)}),Array.from({length:4-F.steps.length},(_,Z)=>u.jsx("div",{},`empty-indicator-${Z}`))]})]},`mobile-row-${A}`))}),u.jsx("div",{className:"hidden md:block",children:V.rows.map((F,A)=>u.jsxs("div",{className:"mb-4 last:mb-0",children:[u.jsxs("div",{className:"grid grid-cols-8 gap-2",children:[F.steps.map((_,Z)=>{const oe=F.startIndex+Z;return u.jsx(bd,{stepIndex:oe,stepValue:_,maxNotes:R,onStepChange:q},oe)}),Array.from({length:8-F.steps.length},(_,Z)=>u.jsx("div",{},`empty-${Z}`))]}),u.jsxs("div",{className:"grid grid-cols-8 gap-2 mt-2",children:[F.steps.map((_,Z)=>{const oe=F.startIndex+Z;return u.jsx("div",{className:"flex justify-center",children:u.jsx("div",{className:`transition-all duration-200 ${ae===oe?"w-full h-1 bg-blue-400 rounded-full shadow-lg shadow-blue-400/50":"w-full h-1 bg-gray-600 rounded-full"}`})},`indicator-${oe}`)}),Array.from({length:8-F.steps.length},(_,Z)=>u.jsx("div",{},`empty-indicator-${Z}`))]})]},`desktop-row-${A}`))})]})]}),u.jsxs("div",{className:"bg-[#3d434f] border-t border-gray-600",children:[u.jsx("div",{className:"px-4 py-3 border-b border-gray-600",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("h3",{className:"text-sm font-medium text-slate-200 uppercase tracking-wider",children:"Settings"}),u.jsx("button",{onClick:()=>m(!p),className:"w-[7em] h-8 flex items-center space-x-2 px-3 py-1.5 text-xs text-slate-300 hover:text-slate-200 bg-[#4a5262] hover:bg-[#525a6b] border border-gray-600 rounded transition-all duration-200",children:p?u.jsxs(u.Fragment,{children:[u.jsx(ni,{className:"w-3 h-3"}),u.jsx("span",{children:"Hide"})]}):u.jsxs(u.Fragment,{children:[u.jsx(Co,{className:"w-3 h-3"}),u.jsx("span",{children:"Show"})]})})]})}),u.jsx("div",{className:`transition-all duration-300 ease-in-out overflow-hidden ${p?" opacity-100":"max-h-0 opacity-0"}`,children:u.jsx("div",{className:"p-6 bg-[#444b59]",children:u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-x-8 gap-y-6",children:[u.jsxs("div",{className:"space-y-6",children:[u.jsx("div",{children:u.jsx("label",{className:"block text-xs font-medium text-slate-200 mb-2 uppercase tracking-wide",children:"Timing"})}),u.jsx(Ft,{label:"BPM",value:i.bpm,min:60,max:200,step:1,onChange:F=>re({bpm:Math.round(F)}),showMinMax:!0,minLabel:"60",maxLabel:"200"}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-medium text-slate-200 mb-2 uppercase tracking-wide",children:"Subdivision"}),u.jsx(ar,{value:Q,onChange:F=>{const A=Ws.find(_=>`${_.symbol} ${_.name}`===F);A&&re({subdivision:A.value})},options:ce,className:"w-full",buttonClassName:"w-full p-3 bg-[#3d434f] border border-gray-600 rounded text-slate-200 text-xs focus:border-blue-500 transition-colors hover:bg-[#4a5262]"})]}),u.jsx(Ft,{label:"Swing",value:i.swing,min:0,max:50,step:1,suffix:"%",onChange:F=>re({swing:Math.round(F)}),showMinMax:!0,minLabel:"0%",maxLabel:"50%"})]}),u.jsx(rC,{chordNoteCount:k,maxAvailableNotes:R,hideFewerNotePatterns:b,onHideFewerNotePatternsChange:S,onApplyPreset:W,currentPattern:s}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("label",{className:"block text-xs font-medium text-slate-200 uppercase tracking-wide",children:"Custom"}),u.jsx(ve.Suspense,{fallback:u.jsx("div",{className:"w-4 h-4"}),children:u.jsx(bC,{})})]}),u.jsxs("div",{className:"space-y-3",children:[u.jsx("input",{type:"text",value:g,onChange:F=>x(F.target.value),onKeyPress:F=>F.key==="Enter"&&Y(),placeholder:"1,x,3,2+",className:"w-full p-2 bg-[#3d434f] border border-gray-600 rounded text-slate-200 text-xs focus:border-blue-500 transition-colors placeholder-slate-500"}),u.jsx("button",{onClick:Y,className:"w-full px-3 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded text-xs font-medium transition-colors uppercase tracking-wide",children:"Apply Pattern"})]})]})]})})})]})]})]})})};function en(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var NC=typeof Symbol=="function"&&Symbol.observable||"@@observable",jg=NC,Ig=()=>Math.random().toString(36).substring(7).split("").join("."),CC={INIT:`@@redux/INIT${Ig()}`,REPLACE:`@@redux/REPLACE${Ig()}`},kg=CC;function SC(e){if(typeof e!="object"||e===null)return!1;let n=e;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(e)===n||Object.getPrototypeOf(e)===null}function nv(e,n,r){if(typeof e!="function")throw new Error(en(2));if(typeof n=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(en(0));if(typeof n=="function"&&typeof r>"u"&&(r=n,n=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(en(1));return r(nv)(e,n)}let s=e,i=n,a=new Map,c=a,d=0,h=!1;function p(){c===a&&(c=new Map,a.forEach((N,j)=>{c.set(j,N)}))}function m(){if(h)throw new Error(en(3));return i}function g(N){if(typeof N!="function")throw new Error(en(4));if(h)throw new Error(en(5));let j=!0;p();const P=d++;return c.set(P,N),function(){if(j){if(h)throw new Error(en(6));j=!1,p(),c.delete(P),a=null}}}function x(N){if(!SC(N))throw new Error(en(7));if(typeof N.type>"u")throw new Error(en(8));if(typeof N.type!="string")throw new Error(en(17));if(h)throw new Error(en(9));try{h=!0,i=s(i,N)}finally{h=!1}return(a=c).forEach(P=>{P()}),N}function b(N){if(typeof N!="function")throw new Error(en(10));s=N,x({type:kg.REPLACE})}function S(){const N=g;return{subscribe(j){if(typeof j!="object"||j===null)throw new Error(en(11));function P(){const D=j;D.next&&D.next(m())}return P(),{unsubscribe:N(P)}},[jg](){return this}}}return x({type:kg.INIT}),{dispatch:x,subscribe:g,getState:m,replaceReducer:b,[jg]:S}}function Pg(e,n){return function(...r){return n(e.apply(this,r))}}function Tg(e,n){if(typeof e=="function")return Pg(e,n);if(typeof e!="object"||e===null)throw new Error(en(16));const r={};for(const s in e){const i=e[s];typeof i=="function"&&(r[s]=Pg(i,n))}return r}function rv(...e){return e.length===0?n=>n:e.length===1?e[0]:e.reduce((n,r)=>(...s)=>n(r(...s)))}function EC(...e){return n=>(r,s)=>{const i=n(r,s);let a=()=>{throw new Error(en(15))};const c={getState:i.getState,dispatch:(h,...p)=>a(h,...p)},d=e.map(h=>h(c));return a=rv(...d)(i.dispatch),{...i,dispatch:a}}}var qu={exports:{}},Ku={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rg;function DC(){if(Rg)return Ku;Rg=1;var e=rl();function n(h,p){return h===p&&(h!==0||1/h===1/p)||h!==h&&p!==p}var r=typeof Object.is=="function"?Object.is:n,s=e.useSyncExternalStore,i=e.useRef,a=e.useEffect,c=e.useMemo,d=e.useDebugValue;return Ku.useSyncExternalStoreWithSelector=function(h,p,m,g,x){var b=i(null);if(b.current===null){var S={hasValue:!1,value:null};b.current=S}else S=b.current;b=c(function(){function N(k){if(!j){if(j=!0,P=k,k=g(k),x!==void 0&&S.hasValue){var R=S.value;if(x(R,k))return I=R}return I=k}if(R=I,r(P,k))return R;var O=g(k);return x!==void 0&&x(R,O)?(P=k,R):(P=k,I=O)}var j=!1,P,I,D=m===void 0?null:m;return[function(){return N(p())},D===null?void 0:function(){return N(D())}]},[p,m,g,x]);var E=s(h,b[0],b[1]);return a(function(){S.hasValue=!0,S.value=E},[E]),d(E),E},Ku}var Mg;function AC(){return Mg||(Mg=1,qu.exports=DC()),qu.exports}AC();var jC=w.version.startsWith("19"),IC=Symbol.for(jC?"react.transitional.element":"react.element"),kC=Symbol.for("react.portal"),PC=Symbol.for("react.fragment"),TC=Symbol.for("react.strict_mode"),RC=Symbol.for("react.profiler"),MC=Symbol.for("react.consumer"),OC=Symbol.for("react.context"),ov=Symbol.for("react.forward_ref"),_C=Symbol.for("react.suspense"),LC=Symbol.for("react.suspense_list"),qd=Symbol.for("react.memo"),FC=Symbol.for("react.lazy"),BC=ov,$C=qd;function GC(e){if(typeof e=="object"&&e!==null){const{$$typeof:n}=e;switch(n){case IC:switch(e=e.type,e){case PC:case RC:case TC:case _C:case LC:return e;default:switch(e=e&&e.$$typeof,e){case OC:case ov:case FC:case qd:return e;case MC:return e;default:return n}}case kC:return n}}}function UC(e){return GC(e)===qd}function VC(e,n,r,s,{areStatesEqual:i,areOwnPropsEqual:a,areStatePropsEqual:c}){let d=!1,h,p,m,g,x;function b(P,I){return h=P,p=I,m=e(h,p),g=n(s,p),x=r(m,g,p),d=!0,x}function S(){return m=e(h,p),n.dependsOnOwnProps&&(g=n(s,p)),x=r(m,g,p),x}function E(){return e.dependsOnOwnProps&&(m=e(h,p)),n.dependsOnOwnProps&&(g=n(s,p)),x=r(m,g,p),x}function N(){const P=e(h,p),I=!c(P,m);return m=P,I&&(x=r(m,g,p)),x}function j(P,I){const D=!a(I,p),k=!i(P,h,I,p);return h=P,p=I,D&&k?S():D?E():k?N():x}return function(I,D){return d?j(I,D):b(I,D)}}function zC(e,{initMapStateToProps:n,initMapDispatchToProps:r,initMergeProps:s,...i}){const a=n(e,i),c=r(e,i),d=s(e,i);return VC(a,c,d,e,i)}function WC(e,n){const r={};for(const s in e){const i=e[s];typeof i=="function"&&(r[s]=(...a)=>n(i(...a)))}return r}function wd(e){return function(r){const s=e(r);function i(){return s}return i.dependsOnOwnProps=!1,i}}function Og(e){return e.dependsOnOwnProps?!!e.dependsOnOwnProps:e.length!==1}function sv(e,n){return function(s,{displayName:i}){const a=function(d,h){return a.dependsOnOwnProps?a.mapToProps(d,h):a.mapToProps(d,void 0)};return a.dependsOnOwnProps=!0,a.mapToProps=function(d,h){a.mapToProps=e,a.dependsOnOwnProps=Og(e);let p=a(d,h);return typeof p=="function"&&(a.mapToProps=p,a.dependsOnOwnProps=Og(p),p=a(d,h)),p},a}}function Kd(e,n){return(r,s)=>{throw new Error(`Invalid value of type ${typeof e} for ${n} argument when connecting component ${s.wrappedComponentName}.`)}}function HC(e){return e&&typeof e=="object"?wd(n=>WC(e,n)):e?typeof e=="function"?sv(e):Kd(e,"mapDispatchToProps"):wd(n=>({dispatch:n}))}function qC(e){return e?typeof e=="function"?sv(e):Kd(e,"mapStateToProps"):wd(()=>({}))}function KC(e,n,r){return{...r,...e,...n}}function YC(e){return function(r,{displayName:s,areMergedPropsEqual:i}){let a=!1,c;return function(h,p,m){const g=e(h,p,m);return a?i(g,c)||(c=g):(a=!0,c=g),c}}}function QC(e){return e?typeof e=="function"?YC(e):Kd(e,"mergeProps"):()=>KC}function XC(e){e()}function JC(){let e=null,n=null;return{clear(){e=null,n=null},notify(){XC(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let s=e;for(;s;)r.push(s),s=s.next;return r},subscribe(r){let s=!0;const i=n={callback:r,next:null,prev:n};return i.prev?i.prev.next=i:e=i,function(){!s||e===null||(s=!1,i.next?i.next.prev=i.prev:n=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}var _g={notify(){},get:()=>[]};function iv(e,n){let r,s=_g,i=0,a=!1;function c(E){m();const N=s.subscribe(E);let j=!1;return()=>{j||(j=!0,N(),g())}}function d(){s.notify()}function h(){S.onStateChange&&S.onStateChange()}function p(){return a}function m(){i++,r||(r=n?n.addNestedSub(h):e.subscribe(h),s=JC())}function g(){i--,r&&i===0&&(r(),r=void 0,s.clear(),s=_g)}function x(){a||(a=!0,m())}function b(){a&&(a=!1,g())}const S={addNestedSub:c,notifyNestedSubs:d,handleChangeWrapper:h,isSubscribed:p,trySubscribe:x,tryUnsubscribe:b,getListeners:()=>s};return S}var ZC=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",e2=ZC(),t2=()=>typeof navigator<"u"&&navigator.product==="ReactNative",n2=t2(),r2=()=>e2||n2?w.useLayoutEffect:w.useEffect,za=r2();function Lg(e,n){return e===n?e!==0||n!==0||1/e===1/n:e!==e&&n!==n}function Yu(e,n){if(Lg(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;const r=Object.keys(e),s=Object.keys(n);if(r.length!==s.length)return!1;for(let i=0;i<r.length;i++)if(!Object.prototype.hasOwnProperty.call(n,r[i])||!Lg(e[r[i]],n[r[i]]))return!1;return!0}var o2={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},s2={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},i2={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},av={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a2={[BC]:i2,[$C]:av};function Fg(e){return UC(e)?av:a2[e.$$typeof]||o2}var l2=Object.defineProperty,c2=Object.getOwnPropertyNames,Bg=Object.getOwnPropertySymbols,u2=Object.getOwnPropertyDescriptor,d2=Object.getPrototypeOf,$g=Object.prototype;function Nd(e,n){if(typeof n!="string"){if($g){const a=d2(n);a&&a!==$g&&Nd(e,a)}let r=c2(n);Bg&&(r=r.concat(Bg(n)));const s=Fg(e),i=Fg(n);for(let a=0;a<r.length;++a){const c=r[a];if(!s2[c]&&!(i&&i[c])&&!(s&&s[c])){const d=u2(n,c);try{l2(e,c,d)}catch{}}}}return e}var f2=Symbol.for("react-redux-context"),h2=typeof globalThis<"u"?globalThis:{};function p2(){if(!w.createContext)return{};const e=h2[f2]??=new Map;let n=e.get(w.createContext);return n||(n=w.createContext(null),e.set(w.createContext,n)),n}var lv=p2(),m2=[null,null];function g2(e,n,r){za(()=>e(...n),r)}function v2(e,n,r,s,i,a){e.current=s,r.current=!1,i.current&&(i.current=null,a())}function x2(e,n,r,s,i,a,c,d,h,p,m){if(!e)return()=>{};let g=!1,x=null;const b=()=>{if(g||!d.current)return;const E=n.getState();let N,j;try{N=s(E,i.current)}catch(P){j=P,x=P}j||(x=null),N===a.current?c.current||p():(a.current=N,h.current=N,c.current=!0,m())};return r.onStateChange=b,r.trySubscribe(),b(),()=>{if(g=!0,r.tryUnsubscribe(),r.onStateChange=null,x)throw x}}function y2(e,n){return e===n}function b2(e,n,r,{pure:s,areStatesEqual:i=y2,areOwnPropsEqual:a=Yu,areStatePropsEqual:c=Yu,areMergedPropsEqual:d=Yu,forwardRef:h=!1,context:p=lv}={}){const m=p,g=qC(e),x=HC(n),b=QC(r),S=!!e;return N=>{const j=N.displayName||N.name||"Component",P=`Connect(${j})`,I={shouldHandleStateChanges:S,displayName:P,wrappedComponentName:j,WrappedComponent:N,initMapStateToProps:g,initMapDispatchToProps:x,initMergeProps:b,areStatesEqual:i,areStatePropsEqual:c,areOwnPropsEqual:a,areMergedPropsEqual:d};function D(O){const[M,q,J]=w.useMemo(()=>{const{reactReduxForwardedRef:Te,...Qe}=O;return[O.context,Te,Qe]},[O]),ie=w.useMemo(()=>{let Te=m;return M?.Consumer,Te},[M,m]),Y=w.useContext(ie),W=!!O.store&&!!O.store.getState&&!!O.store.dispatch,re=!!Y&&!!Y.store,ae=W?O.store:Y.store,ce=re?Y.getServerState:ae.getState,ee=w.useMemo(()=>zC(ae.dispatch,I),[ae]),[Q,V]=w.useMemo(()=>{if(!S)return m2;const Te=iv(ae,W?void 0:Y.subscription),Qe=Te.notifyNestedSubs.bind(Te);return[Te,Qe]},[ae,W,Y]),F=w.useMemo(()=>W?Y:{...Y,subscription:Q},[W,Y,Q]),A=w.useRef(void 0),_=w.useRef(J),Z=w.useRef(void 0),oe=w.useRef(!1),fe=w.useRef(!1),he=w.useRef(void 0);za(()=>(fe.current=!0,()=>{fe.current=!1}),[]);const Pe=w.useMemo(()=>()=>Z.current&&J===_.current?Z.current:ee(ae.getState(),J),[ae,J]),ye=w.useMemo(()=>Qe=>Q?x2(S,ae,Q,ee,_,A,oe,fe,Z,V,Qe):()=>{},[Q]);g2(v2,[_,A,oe,J,Z,V]);let Se;try{Se=w.useSyncExternalStore(ye,Pe,ce?()=>ee(ce(),J):Pe)}catch(Te){throw he.current&&(Te.message+=`
The error may be correlated with this previous error:
${he.current.stack}

`),Te}za(()=>{he.current=void 0,Z.current=void 0,A.current=Se});const we=w.useMemo(()=>w.createElement(N,{...Se,ref:q}),[q,N,Se]);return w.useMemo(()=>S?w.createElement(ie.Provider,{value:F},we):we,[ie,we,F])}const R=w.memo(D);if(R.WrappedComponent=N,R.displayName=D.displayName=P,h){const M=w.forwardRef(function(J,ie){return w.createElement(R,{...J,reactReduxForwardedRef:ie})});return M.displayName=P,M.WrappedComponent=N,Nd(M,N)}return Nd(R,N)}}var cv=b2;function w2(e){const{children:n,context:r,serverState:s,store:i}=e,a=w.useMemo(()=>{const h=iv(i);return{store:i,subscription:h,getServerState:s?()=>s:void 0}},[i,s]),c=w.useMemo(()=>i.getState(),[i]);za(()=>{const{subscription:h}=a;return h.onStateChange=h.notifyNestedSubs,h.trySubscribe(),c!==i.getState()&&h.notifyNestedSubs(),()=>{h.tryUnsubscribe(),h.onStateChange=void 0}},[a,c]);const d=r||lv;return w.createElement(d.Provider,{value:a},n)}var N2=w2,C2="Invariant failed";function S2(e,n){throw new Error(C2)}var Jn=function(n){var r=n.top,s=n.right,i=n.bottom,a=n.left,c=s-a,d=i-r,h={top:r,right:s,bottom:i,left:a,width:c,height:d,x:a,y:r,center:{x:(s+a)/2,y:(i+r)/2}};return h},Yd=function(n,r){return{top:n.top-r.top,left:n.left-r.left,bottom:n.bottom+r.bottom,right:n.right+r.right}},Gg=function(n,r){return{top:n.top+r.top,left:n.left+r.left,bottom:n.bottom-r.bottom,right:n.right-r.right}},E2=function(n,r){return{top:n.top+r.y,left:n.left+r.x,bottom:n.bottom+r.y,right:n.right+r.x}},Qu={top:0,right:0,bottom:0,left:0},Qd=function(n){var r=n.borderBox,s=n.margin,i=s===void 0?Qu:s,a=n.border,c=a===void 0?Qu:a,d=n.padding,h=d===void 0?Qu:d,p=Jn(Yd(r,i)),m=Jn(Gg(r,c)),g=Jn(Gg(m,h));return{marginBox:p,borderBox:Jn(r),paddingBox:m,contentBox:g,margin:i,border:c,padding:h}},Ln=function(n){var r=n.slice(0,-2),s=n.slice(-2);if(s!=="px")return 0;var i=Number(r);return isNaN(i)&&S2(),i},D2=function(){return{x:window.pageXOffset,y:window.pageYOffset}},Wa=function(n,r){var s=n.borderBox,i=n.border,a=n.margin,c=n.padding,d=E2(s,r);return Qd({borderBox:d,border:i,margin:a,padding:c})},Ha=function(n,r){return r===void 0&&(r=D2()),Wa(n,r)},uv=function(n,r){var s={top:Ln(r.marginTop),right:Ln(r.marginRight),bottom:Ln(r.marginBottom),left:Ln(r.marginLeft)},i={top:Ln(r.paddingTop),right:Ln(r.paddingRight),bottom:Ln(r.paddingBottom),left:Ln(r.paddingLeft)},a={top:Ln(r.borderTopWidth),right:Ln(r.borderRightWidth),bottom:Ln(r.borderBottomWidth),left:Ln(r.borderLeftWidth)};return Qd({borderBox:n,margin:s,padding:i,border:a})},dv=function(n){var r=n.getBoundingClientRect(),s=window.getComputedStyle(n);return uv(r,s)},si=function(n){var r=[],s=null,i=function(){for(var c=arguments.length,d=new Array(c),h=0;h<c;h++)d[h]=arguments[h];r=d,!s&&(s=requestAnimationFrame(function(){s=null,n.apply(void 0,r)}))};return i.cancel=function(){s&&(cancelAnimationFrame(s),s=null)},i};function qa(){return qa=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},qa.apply(null,arguments)}function fv(e,n){}fv.bind(null,"warn");fv.bind(null,"error");function eo(){}function A2(e,n){return{...e,...n}}function Bn(e,n,r){const s=n.map(i=>{const a=A2(r,i.options);return e.addEventListener(i.eventName,i.fn,a),function(){e.removeEventListener(i.eventName,i.fn,a)}});return function(){s.forEach(a=>{a()})}}const j2="Invariant failed";class Ka extends Error{}Ka.prototype.toString=function(){return this.message};function ue(e,n){throw new Ka(j2)}class I2 extends ve.Component{constructor(...n){super(...n),this.callbacks=null,this.unbind=eo,this.onWindowError=r=>{const s=this.getCallbacks();s.isDragging()&&s.tryAbort(),r.error instanceof Ka&&r.preventDefault()},this.getCallbacks=()=>{if(!this.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return this.callbacks},this.setCallbacks=r=>{this.callbacks=r}}componentDidMount(){this.unbind=Bn(window,[{eventName:"error",fn:this.onWindowError}])}componentDidCatch(n){if(n instanceof Ka){this.setState({});return}throw n}componentWillUnmount(){this.unbind()}render(){return this.props.children(this.setCallbacks)}}const k2=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,Ya=e=>e+1,P2=e=>`
  You have lifted an item in position ${Ya(e.source.index)}
`,hv=(e,n)=>{const r=e.droppableId===n.droppableId,s=Ya(e.index),i=Ya(n.index);return r?`
      You have moved the item from position ${s}
      to position ${i}
    `:`
    You have moved the item from position ${s}
    in list ${e.droppableId}
    to list ${n.droppableId}
    in position ${i}
  `},pv=(e,n,r)=>n.droppableId===r.droppableId?`
      The item ${e}
      has been combined with ${r.draggableId}`:`
      The item ${e}
      in list ${n.droppableId}
      has been combined with ${r.draggableId}
      in list ${r.droppableId}
    `,T2=e=>{const n=e.destination;if(n)return hv(e.source,n);const r=e.combine;return r?pv(e.draggableId,e.source,r):"You are over an area that cannot be dropped on"},Ug=e=>`
  The item has returned to its starting position
  of ${Ya(e.index)}
`,R2=e=>{if(e.reason==="CANCEL")return`
      Movement cancelled.
      ${Ug(e.source)}
    `;const n=e.destination,r=e.combine;return n?`
      You have dropped the item.
      ${hv(e.source,n)}
    `:r?`
      You have dropped the item.
      ${pv(e.draggableId,e.source,r)}
    `:`
    The item has been dropped while not over a drop area.
    ${Ug(e.source)}
  `},La={dragHandleUsageInstructions:k2,onDragStart:P2,onDragUpdate:T2,onDragEnd:R2};function M2(e,n){return!!(e===n||Number.isNaN(e)&&Number.isNaN(n))}function mv(e,n){if(e.length!==n.length)return!1;for(let r=0;r<e.length;r++)if(!M2(e[r],n[r]))return!1;return!0}function Ge(e,n){const r=w.useState(()=>({inputs:n,result:e()}))[0],s=w.useRef(!0),i=w.useRef(r),c=s.current||!!(n&&i.current.inputs&&mv(n,i.current.inputs))?i.current:{inputs:n,result:e()};return w.useEffect(()=>{s.current=!1,i.current=c},[c]),c.result}function Ce(e,n){return Ge(()=>e,n)}const Tt={x:0,y:0},$t=(e,n)=>({x:e.x+n.x,y:e.y+n.y}),Cn=(e,n)=>({x:e.x-n.x,y:e.y-n.y}),to=(e,n)=>e.x===n.x&&e.y===n.y,Jo=e=>({x:e.x!==0?-e.x:0,y:e.y!==0?-e.y:0}),So=(e,n,r=0)=>e==="x"?{x:n,y:r}:{x:r,y:n},ii=(e,n)=>Math.sqrt((n.x-e.x)**2+(n.y-e.y)**2),Vg=(e,n)=>Math.min(...n.map(r=>ii(e,r))),gv=e=>n=>({x:e(n.x),y:e(n.y)});var O2=(e,n)=>{const r=Jn({top:Math.max(n.top,e.top),right:Math.min(n.right,e.right),bottom:Math.min(n.bottom,e.bottom),left:Math.max(n.left,e.left)});return r.width<=0||r.height<=0?null:r};const xi=(e,n)=>({top:e.top+n.y,left:e.left+n.x,bottom:e.bottom+n.y,right:e.right+n.x}),zg=e=>[{x:e.left,y:e.top},{x:e.right,y:e.top},{x:e.left,y:e.bottom},{x:e.right,y:e.bottom}],_2={top:0,right:0,bottom:0,left:0},L2=(e,n)=>n?xi(e,n.scroll.diff.displacement):e,F2=(e,n,r)=>r&&r.increasedBy?{...e,[n.end]:e[n.end]+r.increasedBy[n.line]}:e,B2=(e,n)=>n&&n.shouldClipSubject?O2(n.pageMarginBox,e):Jn(e);var Yo=({page:e,withPlaceholder:n,axis:r,frame:s})=>{const i=L2(e.marginBox,s),a=F2(i,r,n),c=B2(a,s);return{page:e,withPlaceholder:n,active:c}},Xd=(e,n)=>{e.frame||ue();const r=e.frame,s=Cn(n,r.scroll.initial),i=Jo(s),a={...r,scroll:{initial:r.scroll.initial,current:n,diff:{value:s,displacement:i},max:r.scroll.max}},c=Yo({page:e.subject.page,withPlaceholder:e.subject.withPlaceholder,axis:e.axis,frame:a});return{...e,frame:a,subject:c}};function Pt(e,n=mv){let r=null;function s(...i){if(r&&r.lastThis===this&&n(i,r.lastArgs))return r.lastResult;const a=e.apply(this,i);return r={lastResult:a,lastArgs:i,lastThis:this},a}return s.clear=function(){r=null},s}const vv=Pt(e=>e.reduce((n,r)=>(n[r.descriptor.id]=r,n),{})),xv=Pt(e=>e.reduce((n,r)=>(n[r.descriptor.id]=r,n),{})),cl=Pt(e=>Object.values(e)),$2=Pt(e=>Object.values(e));var Zo=Pt((e,n)=>$2(n).filter(s=>e===s.descriptor.droppableId).sort((s,i)=>s.descriptor.index-i.descriptor.index));function Jd(e){return e.at&&e.at.type==="REORDER"?e.at.destination:null}function ul(e){return e.at&&e.at.type==="COMBINE"?e.at.combine:null}var dl=Pt((e,n)=>n.filter(r=>r.descriptor.id!==e.descriptor.id)),G2=({isMovingForward:e,draggable:n,destination:r,insideDestination:s,previousImpact:i})=>{if(!r.isCombineEnabled||!Jd(i))return null;function c(b){const S={type:"COMBINE",combine:{draggableId:b,droppableId:r.descriptor.id}};return{...i,at:S}}const d=i.displaced.all,h=d.length?d[0]:null;if(e)return h?c(h):null;const p=dl(n,s);if(!h){if(!p.length)return null;const b=p[p.length-1];return c(b.descriptor.id)}const m=p.findIndex(b=>b.descriptor.id===h);m===-1&&ue();const g=m-1;if(g<0)return null;const x=p[g];return c(x.descriptor.id)},es=(e,n)=>e.descriptor.droppableId===n.descriptor.id;const yv={point:Tt,value:0},ai={invisible:{},visible:{},all:[]},U2={displaced:ai,displacedBy:yv,at:null};var $n=(e,n)=>r=>e<=r&&r<=n,bv=e=>{const n=$n(e.top,e.bottom),r=$n(e.left,e.right);return s=>{if(n(s.top)&&n(s.bottom)&&r(s.left)&&r(s.right))return!0;const a=n(s.top)||n(s.bottom),c=r(s.left)||r(s.right);if(a&&c)return!0;const h=s.top<e.top&&s.bottom>e.bottom,p=s.left<e.left&&s.right>e.right;return h&&p?!0:h&&c||p&&a}},V2=e=>{const n=$n(e.top,e.bottom),r=$n(e.left,e.right);return s=>n(s.top)&&n(s.bottom)&&r(s.left)&&r(s.right)};const Zd={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},wv={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"};var z2=e=>n=>{const r=$n(n.top,n.bottom),s=$n(n.left,n.right);return i=>e===Zd?r(i.top)&&r(i.bottom):s(i.left)&&s(i.right)};const W2=(e,n)=>{const r=n.frame?n.frame.scroll.diff.displacement:Tt;return xi(e,r)},H2=(e,n,r)=>n.subject.active?r(n.subject.active)(e):!1,q2=(e,n,r)=>r(n)(e),ef=({target:e,destination:n,viewport:r,withDroppableDisplacement:s,isVisibleThroughFrameFn:i})=>{const a=s?W2(e,n):e;return H2(a,n,i)&&q2(a,r,i)},K2=e=>ef({...e,isVisibleThroughFrameFn:bv}),Nv=e=>ef({...e,isVisibleThroughFrameFn:V2}),Y2=e=>ef({...e,isVisibleThroughFrameFn:z2(e.destination.axis)}),Q2=(e,n,r)=>{if(typeof r=="boolean")return r;if(!n)return!0;const{invisible:s,visible:i}=n;if(s[e])return!1;const a=i[e];return a?a.shouldAnimate:!0};function X2(e,n){const r=e.page.marginBox,s={top:n.point.y,right:0,bottom:0,left:n.point.x};return Jn(Yd(r,s))}function li({afterDragging:e,destination:n,displacedBy:r,viewport:s,forceShouldAnimate:i,last:a}){return e.reduce(function(d,h){const p=X2(h,r),m=h.descriptor.id;if(d.all.push(m),!K2({target:p,destination:n,viewport:s,withDroppableDisplacement:!0}))return d.invisible[h.descriptor.id]=!0,d;const x=Q2(m,a,i),b={draggableId:m,shouldAnimate:x};return d.visible[m]=b,d},{all:[],visible:{},invisible:{}})}function J2(e,n){if(!e.length)return 0;const r=e[e.length-1].descriptor.index;return n.inHomeList?r:r+1}function Wg({insideDestination:e,inHomeList:n,displacedBy:r,destination:s}){const i=J2(e,{inHomeList:n});return{displaced:ai,displacedBy:r,at:{type:"REORDER",destination:{droppableId:s.descriptor.id,index:i}}}}function Qa({draggable:e,insideDestination:n,destination:r,viewport:s,displacedBy:i,last:a,index:c,forceShouldAnimate:d}){const h=es(e,r);if(c==null)return Wg({insideDestination:n,inHomeList:h,displacedBy:i,destination:r});const p=n.find(S=>S.descriptor.index===c);if(!p)return Wg({insideDestination:n,inHomeList:h,displacedBy:i,destination:r});const m=dl(e,n),g=n.indexOf(p),x=m.slice(g);return{displaced:li({afterDragging:x,destination:r,displacedBy:i,last:a,viewport:s.frame,forceShouldAnimate:d}),displacedBy:i,at:{type:"REORDER",destination:{droppableId:r.descriptor.id,index:c}}}}function no(e,n){return!!n.effected[e]}var Z2=({isMovingForward:e,destination:n,draggables:r,combine:s,afterCritical:i})=>{if(!n.isCombineEnabled)return null;const a=s.draggableId,d=r[a].descriptor.index;return no(a,i)?e?d:d-1:e?d+1:d},eS=({isMovingForward:e,isInHomeList:n,insideDestination:r,location:s})=>{if(!r.length)return null;const i=s.index,a=e?i+1:i-1,c=r[0].descriptor.index,d=r[r.length-1].descriptor.index,h=n?d:d+1;return a<c||a>h?null:a},tS=({isMovingForward:e,isInHomeList:n,draggable:r,draggables:s,destination:i,insideDestination:a,previousImpact:c,viewport:d,afterCritical:h})=>{const p=c.at;if(p||ue(),p.type==="REORDER"){const g=eS({isMovingForward:e,isInHomeList:n,location:p.destination,insideDestination:a});return g==null?null:Qa({draggable:r,insideDestination:a,destination:i,viewport:d,last:c.displaced,displacedBy:c.displacedBy,index:g})}const m=Z2({isMovingForward:e,destination:i,displaced:c.displaced,draggables:s,combine:p.combine,afterCritical:h});return m==null?null:Qa({draggable:r,insideDestination:a,destination:i,viewport:d,last:c.displaced,displacedBy:c.displacedBy,index:m})},nS=({displaced:e,afterCritical:n,combineWith:r,displacedBy:s})=>{const i=!!(e.visible[r]||e.invisible[r]);return no(r,n)?i?Tt:Jo(s.point):i?s.point:Tt},rS=({afterCritical:e,impact:n,draggables:r})=>{const s=ul(n);s||ue();const i=s.draggableId,a=r[i].page.borderBox.center,c=nS({displaced:n.displaced,afterCritical:e,combineWith:i,displacedBy:n.displacedBy});return $t(a,c)};const Cv=(e,n)=>n.margin[e.start]+n.borderBox[e.size]/2,oS=(e,n)=>n.margin[e.end]+n.borderBox[e.size]/2,tf=(e,n,r)=>n[e.crossAxisStart]+r.margin[e.crossAxisStart]+r.borderBox[e.crossAxisSize]/2,Hg=({axis:e,moveRelativeTo:n,isMoving:r})=>So(e.line,n.marginBox[e.end]+Cv(e,r),tf(e,n.marginBox,r)),qg=({axis:e,moveRelativeTo:n,isMoving:r})=>So(e.line,n.marginBox[e.start]-oS(e,r),tf(e,n.marginBox,r)),sS=({axis:e,moveInto:n,isMoving:r})=>So(e.line,n.contentBox[e.start]+Cv(e,r),tf(e,n.contentBox,r));var iS=({impact:e,draggable:n,draggables:r,droppable:s,afterCritical:i})=>{const a=Zo(s.descriptor.id,r),c=n.page,d=s.axis;if(!a.length)return sS({axis:d,moveInto:s.page,isMoving:c});const{displaced:h,displacedBy:p}=e,m=h.all[0];if(m){const x=r[m];if(no(m,i))return qg({axis:d,moveRelativeTo:x.page,isMoving:c});const b=Wa(x.page,p.point);return qg({axis:d,moveRelativeTo:b,isMoving:c})}const g=a[a.length-1];if(g.descriptor.id===n.descriptor.id)return c.borderBox.center;if(no(g.descriptor.id,i)){const x=Wa(g.page,Jo(i.displacedBy.point));return Hg({axis:d,moveRelativeTo:x,isMoving:c})}return Hg({axis:d,moveRelativeTo:g.page,isMoving:c})},Cd=(e,n)=>{const r=e.frame;return r?$t(n,r.scroll.diff.displacement):n};const aS=({impact:e,draggable:n,droppable:r,draggables:s,afterCritical:i})=>{const a=n.page.borderBox.center,c=e.at;return!r||!c?a:c.type==="REORDER"?iS({impact:e,draggable:n,draggables:s,droppable:r,afterCritical:i}):rS({impact:e,draggables:s,afterCritical:i})};var fl=e=>{const n=aS(e),r=e.droppable;return r?Cd(r,n):n},Sv=(e,n)=>{const r=Cn(n,e.scroll.initial),s=Jo(r);return{frame:Jn({top:n.y,bottom:n.y+e.frame.height,left:n.x,right:n.x+e.frame.width}),scroll:{initial:e.scroll.initial,max:e.scroll.max,current:n,diff:{value:r,displacement:s}}}};function Kg(e,n){return e.map(r=>n[r])}function lS(e,n){for(let r=0;r<n.length;r++){const s=n[r].visible[e];if(s)return s}return null}var cS=({impact:e,viewport:n,destination:r,draggables:s,maxScrollChange:i})=>{const a=Sv(n,$t(n.scroll.current,i)),c=r.frame?Xd(r,$t(r.frame.scroll.current,i)):r,d=e.displaced,h=li({afterDragging:Kg(d.all,s),destination:r,displacedBy:e.displacedBy,viewport:a.frame,last:d,forceShouldAnimate:!1}),p=li({afterDragging:Kg(d.all,s),destination:c,displacedBy:e.displacedBy,viewport:n.frame,last:d,forceShouldAnimate:!1}),m={},g={},x=[d,h,p];return d.all.forEach(S=>{const E=lS(S,x);if(E){g[S]=E;return}m[S]=!0}),{...e,displaced:{all:d.all,invisible:m,visible:g}}},uS=(e,n)=>$t(e.scroll.diff.displacement,n),nf=({pageBorderBoxCenter:e,draggable:n,viewport:r})=>{const s=uS(r,e),i=Cn(s,n.page.borderBox.center);return $t(n.client.borderBox.center,i)},Ev=({draggable:e,destination:n,newPageBorderBoxCenter:r,viewport:s,withDroppableDisplacement:i,onlyOnMainAxis:a=!1})=>{const c=Cn(r,e.page.borderBox.center),h={target:xi(e.page.borderBox,c),destination:n,withDroppableDisplacement:i,viewport:s};return a?Y2(h):Nv(h)},dS=({isMovingForward:e,draggable:n,destination:r,draggables:s,previousImpact:i,viewport:a,previousPageBorderBoxCenter:c,previousClientSelection:d,afterCritical:h})=>{if(!r.isEnabled)return null;const p=Zo(r.descriptor.id,s),m=es(n,r),g=G2({isMovingForward:e,draggable:n,destination:r,insideDestination:p,previousImpact:i})||tS({isMovingForward:e,isInHomeList:m,draggable:n,draggables:s,destination:r,insideDestination:p,previousImpact:i,viewport:a,afterCritical:h});if(!g)return null;const x=fl({impact:g,draggable:n,droppable:r,draggables:s,afterCritical:h});if(Ev({draggable:n,destination:r,newPageBorderBoxCenter:x,viewport:a.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0}))return{clientSelection:nf({pageBorderBoxCenter:x,draggable:n,viewport:a}),impact:g,scrollJumpRequest:null};const S=Cn(x,c),E=cS({impact:g,viewport:a,destination:r,draggables:s,maxScrollChange:S});return{clientSelection:d,impact:E,scrollJumpRequest:S}};const Zt=e=>{const n=e.subject.active;return n||ue(),n};var fS=({isMovingForward:e,pageBorderBoxCenter:n,source:r,droppables:s,viewport:i})=>{const a=r.subject.active;if(!a)return null;const c=r.axis,d=$n(a[c.start],a[c.end]),h=cl(s).filter(m=>m!==r).filter(m=>m.isEnabled).filter(m=>!!m.subject.active).filter(m=>bv(i.frame)(Zt(m))).filter(m=>{const g=Zt(m);return e?a[c.crossAxisEnd]<g[c.crossAxisEnd]:g[c.crossAxisStart]<a[c.crossAxisStart]}).filter(m=>{const g=Zt(m),x=$n(g[c.start],g[c.end]);return d(g[c.start])||d(g[c.end])||x(a[c.start])||x(a[c.end])}).sort((m,g)=>{const x=Zt(m)[c.crossAxisStart],b=Zt(g)[c.crossAxisStart];return e?x-b:b-x}).filter((m,g,x)=>Zt(m)[c.crossAxisStart]===Zt(x[0])[c.crossAxisStart]);if(!h.length)return null;if(h.length===1)return h[0];const p=h.filter(m=>$n(Zt(m)[c.start],Zt(m)[c.end])(n[c.line]));return p.length===1?p[0]:p.length>1?p.sort((m,g)=>Zt(m)[c.start]-Zt(g)[c.start])[0]:h.sort((m,g)=>{const x=Vg(n,zg(Zt(m))),b=Vg(n,zg(Zt(g)));return x!==b?x-b:Zt(m)[c.start]-Zt(g)[c.start]})[0]};const Yg=(e,n)=>{const r=e.page.borderBox.center;return no(e.descriptor.id,n)?Cn(r,n.displacedBy.point):r},hS=(e,n)=>{const r=e.page.borderBox;return no(e.descriptor.id,n)?xi(r,Jo(n.displacedBy.point)):r};var pS=({pageBorderBoxCenter:e,viewport:n,destination:r,insideDestination:s,afterCritical:i})=>s.filter(c=>Nv({target:hS(c,i),destination:r,viewport:n.frame,withDroppableDisplacement:!0})).sort((c,d)=>{const h=ii(e,Cd(r,Yg(c,i))),p=ii(e,Cd(r,Yg(d,i)));return h<p?-1:p<h?1:c.descriptor.index-d.descriptor.index})[0]||null,yi=Pt(function(n,r){const s=r[n.line];return{value:s,point:So(n.line,s)}});const mS=(e,n,r)=>{const s=e.axis;if(e.descriptor.mode==="virtual")return So(s.line,n[s.line]);const i=e.subject.page.contentBox[s.size],h=Zo(e.descriptor.id,r).reduce((p,m)=>p+m.client.marginBox[s.size],0)+n[s.line]-i;return h<=0?null:So(s.line,h)},Dv=(e,n)=>({...e,scroll:{...e.scroll,max:n}}),Av=(e,n,r)=>{const s=e.frame;es(n,e)&&ue(),e.subject.withPlaceholder&&ue();const i=yi(e.axis,n.displaceBy).point,a=mS(e,i,r),c={placeholderSize:i,increasedBy:a,oldFrameMaxScroll:e.frame?e.frame.scroll.max:null};if(!s){const m=Yo({page:e.subject.page,withPlaceholder:c,axis:e.axis,frame:e.frame});return{...e,subject:m}}const d=a?$t(s.scroll.max,a):s.scroll.max,h=Dv(s,d),p=Yo({page:e.subject.page,withPlaceholder:c,axis:e.axis,frame:h});return{...e,subject:p,frame:h}},gS=e=>{const n=e.subject.withPlaceholder;n||ue();const r=e.frame;if(!r){const c=Yo({page:e.subject.page,axis:e.axis,frame:null,withPlaceholder:null});return{...e,subject:c}}const s=n.oldFrameMaxScroll;s||ue();const i=Dv(r,s),a=Yo({page:e.subject.page,axis:e.axis,frame:i,withPlaceholder:null});return{...e,subject:a,frame:i}};var vS=({previousPageBorderBoxCenter:e,moveRelativeTo:n,insideDestination:r,draggable:s,draggables:i,destination:a,viewport:c,afterCritical:d})=>{if(!n){if(r.length)return null;const g={displaced:ai,displacedBy:yv,at:{type:"REORDER",destination:{droppableId:a.descriptor.id,index:0}}},x=fl({impact:g,draggable:s,droppable:a,draggables:i,afterCritical:d}),b=es(s,a)?a:Av(a,s,i);return Ev({draggable:s,destination:b,newPageBorderBoxCenter:x,viewport:c.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0})?g:null}const h=e[a.axis.line]<=n.page.borderBox.center[a.axis.line],p=(()=>{const g=n.descriptor.index;return n.descriptor.id===s.descriptor.id||h?g:g+1})(),m=yi(a.axis,s.displaceBy);return Qa({draggable:s,insideDestination:r,destination:a,viewport:c,displacedBy:m,last:ai,index:p})},xS=({isMovingForward:e,previousPageBorderBoxCenter:n,draggable:r,isOver:s,draggables:i,droppables:a,viewport:c,afterCritical:d})=>{const h=fS({isMovingForward:e,pageBorderBoxCenter:n,source:s,droppables:a,viewport:c});if(!h)return null;const p=Zo(h.descriptor.id,i),m=pS({pageBorderBoxCenter:n,viewport:c,destination:h,insideDestination:p,afterCritical:d}),g=vS({previousPageBorderBoxCenter:n,destination:h,draggable:r,draggables:i,moveRelativeTo:m,insideDestination:p,viewport:c,afterCritical:d});if(!g)return null;const x=fl({impact:g,draggable:r,droppable:h,draggables:i,afterCritical:d});return{clientSelection:nf({pageBorderBoxCenter:x,draggable:r,viewport:c}),impact:g,scrollJumpRequest:null}},Sn=e=>{const n=e.at;return n?n.type==="REORDER"?n.destination.droppableId:n.combine.droppableId:null};const yS=(e,n)=>{const r=Sn(e);return r?n[r]:null};var bS=({state:e,type:n})=>{const r=yS(e.impact,e.dimensions.droppables),s=!!r,i=e.dimensions.droppables[e.critical.droppable.id],a=r||i,c=a.axis.direction,d=c==="vertical"&&(n==="MOVE_UP"||n==="MOVE_DOWN")||c==="horizontal"&&(n==="MOVE_LEFT"||n==="MOVE_RIGHT");if(d&&!s)return null;const h=n==="MOVE_DOWN"||n==="MOVE_RIGHT",p=e.dimensions.draggables[e.critical.draggable.id],m=e.current.page.borderBoxCenter,{draggables:g,droppables:x}=e.dimensions;return d?dS({isMovingForward:h,previousPageBorderBoxCenter:m,draggable:p,destination:a,draggables:g,viewport:e.viewport,previousClientSelection:e.current.client.selection,previousImpact:e.impact,afterCritical:e.afterCritical}):xS({isMovingForward:h,previousPageBorderBoxCenter:m,draggable:p,isOver:a,draggables:g,droppables:x,viewport:e.viewport,afterCritical:e.afterCritical})};function No(e){return e.phase==="DRAGGING"||e.phase==="COLLECTING"}function jv(e){const n=$n(e.top,e.bottom),r=$n(e.left,e.right);return function(i){return n(i.y)&&r(i.x)}}function wS(e,n){return e.left<n.right&&e.right>n.left&&e.top<n.bottom&&e.bottom>n.top}function NS({pageBorderBox:e,draggable:n,candidates:r}){const s=n.page.borderBox.center,i=r.map(a=>{const c=a.axis,d=So(a.axis.line,e.center[c.line],a.page.borderBox.center[c.crossAxisLine]);return{id:a.descriptor.id,distance:ii(s,d)}}).sort((a,c)=>c.distance-a.distance);return i[0]?i[0].id:null}function CS({pageBorderBox:e,draggable:n,droppables:r}){const s=cl(r).filter(i=>{if(!i.isEnabled)return!1;const a=i.subject.active;if(!a||!wS(e,a))return!1;if(jv(a)(e.center))return!0;const c=i.axis,d=a.center[c.crossAxisLine],h=e[c.crossAxisStart],p=e[c.crossAxisEnd],m=$n(a[c.crossAxisStart],a[c.crossAxisEnd]),g=m(h),x=m(p);return!g&&!x?!0:g?h<d:p>d});return s.length?s.length===1?s[0].descriptor.id:NS({pageBorderBox:e,draggable:n,candidates:s}):null}const Iv=(e,n)=>Jn(xi(e,n));var SS=(e,n)=>{const r=e.frame;return r?Iv(n,r.scroll.diff.value):n};function kv({displaced:e,id:n}){return!!(e.visible[n]||e.invisible[n])}function ES({draggable:e,closest:n,inHomeList:r}){return n?r&&n.descriptor.index>e.descriptor.index?n.descriptor.index-1:n.descriptor.index:null}var DS=({pageBorderBoxWithDroppableScroll:e,draggable:n,destination:r,insideDestination:s,last:i,viewport:a,afterCritical:c})=>{const d=r.axis,h=yi(r.axis,n.displaceBy),p=h.value,m=e[d.start],g=e[d.end],b=dl(n,s).find(E=>{const N=E.descriptor.id,j=E.page.borderBox.center[d.line],P=no(N,c),I=kv({displaced:i,id:N});return P?I?g<=j:m<j-p:I?g<=j+p:m<j})||null,S=ES({draggable:n,closest:b,inHomeList:es(n,r)});return Qa({draggable:n,insideDestination:s,destination:r,viewport:a,last:i,displacedBy:h,index:S})};const AS=4;var jS=({draggable:e,pageBorderBoxWithDroppableScroll:n,previousImpact:r,destination:s,insideDestination:i,afterCritical:a})=>{if(!s.isCombineEnabled)return null;const c=s.axis,d=yi(s.axis,e.displaceBy),h=d.value,p=n[c.start],m=n[c.end],x=dl(e,i).find(S=>{const E=S.descriptor.id,N=S.page.borderBox,P=N[c.size]/AS,I=no(E,a),D=kv({displaced:r.displaced,id:E});return I?D?m>N[c.start]+P&&m<N[c.end]-P:p>N[c.start]-h+P&&p<N[c.end]-h-P:D?m>N[c.start]+h+P&&m<N[c.end]+h-P:p>N[c.start]+P&&p<N[c.end]-P});return x?{displacedBy:d,displaced:r.displaced,at:{type:"COMBINE",combine:{draggableId:x.descriptor.id,droppableId:s.descriptor.id}}}:null},Pv=({pageOffset:e,draggable:n,draggables:r,droppables:s,previousImpact:i,viewport:a,afterCritical:c})=>{const d=Iv(n.page.borderBox,e),h=CS({pageBorderBox:d,draggable:n,droppables:s});if(!h)return U2;const p=s[h],m=Zo(p.descriptor.id,r),g=SS(p,d);return jS({pageBorderBoxWithDroppableScroll:g,draggable:n,previousImpact:i,destination:p,insideDestination:m,afterCritical:c})||DS({pageBorderBoxWithDroppableScroll:g,draggable:n,destination:p,insideDestination:m,last:i.displaced,viewport:a,afterCritical:c})},rf=(e,n)=>({...e,[n.descriptor.id]:n});const IS=({previousImpact:e,impact:n,droppables:r})=>{const s=Sn(e),i=Sn(n);if(!s||s===i)return r;const a=r[s];if(!a.subject.withPlaceholder)return r;const c=gS(a);return rf(r,c)};var kS=({draggable:e,draggables:n,droppables:r,previousImpact:s,impact:i})=>{const a=IS({previousImpact:s,impact:i,droppables:r}),c=Sn(i);if(!c)return a;const d=r[c];if(es(e,d)||d.subject.withPlaceholder)return a;const h=Av(d,e,n);return rf(a,h)},Qs=({state:e,clientSelection:n,dimensions:r,viewport:s,impact:i,scrollJumpRequest:a})=>{const c=s||e.viewport,d=r||e.dimensions,h=n||e.current.client.selection,p=Cn(h,e.initial.client.selection),m={offset:p,selection:h,borderBoxCenter:$t(e.initial.client.borderBoxCenter,p)},g={selection:$t(m.selection,c.scroll.current),borderBoxCenter:$t(m.borderBoxCenter,c.scroll.current),offset:$t(m.offset,c.scroll.diff.value)},x={client:m,page:g};if(e.phase==="COLLECTING")return{...e,dimensions:d,viewport:c,current:x};const b=d.draggables[e.critical.draggable.id],S=i||Pv({pageOffset:g.offset,draggable:b,draggables:d.draggables,droppables:d.droppables,previousImpact:e.impact,viewport:c,afterCritical:e.afterCritical}),E=kS({draggable:b,impact:S,previousImpact:e.impact,draggables:d.draggables,droppables:d.droppables});return{...e,current:x,dimensions:{draggables:d.draggables,droppables:E},impact:S,viewport:c,scrollJumpRequest:a||null,forceShouldAnimate:a?!1:null}};function PS(e,n){return e.map(r=>n[r])}var Tv=({impact:e,viewport:n,draggables:r,destination:s,forceShouldAnimate:i})=>{const a=e.displaced,c=PS(a.all,r),d=li({afterDragging:c,destination:s,displacedBy:e.displacedBy,viewport:n.frame,forceShouldAnimate:i,last:a});return{...e,displaced:d}},Rv=({impact:e,draggable:n,droppable:r,draggables:s,viewport:i,afterCritical:a})=>{const c=fl({impact:e,draggable:n,draggables:s,droppable:r,afterCritical:a});return nf({pageBorderBoxCenter:c,draggable:n,viewport:i})},Mv=({state:e,dimensions:n,viewport:r})=>{e.movementMode!=="SNAP"&&ue();const s=e.impact,i=r||e.viewport,a=n||e.dimensions,{draggables:c,droppables:d}=a,h=c[e.critical.draggable.id],p=Sn(s);p||ue();const m=d[p],g=Tv({impact:s,viewport:i,destination:m,draggables:c}),x=Rv({impact:g,draggable:h,droppable:m,draggables:c,viewport:i,afterCritical:e.afterCritical});return Qs({impact:g,clientSelection:x,state:e,dimensions:a,viewport:i})},TS=e=>({index:e.index,droppableId:e.droppableId}),Ov=({draggable:e,home:n,draggables:r,viewport:s})=>{const i=yi(n.axis,e.displaceBy),a=Zo(n.descriptor.id,r),c=a.indexOf(e);c===-1&&ue();const d=a.slice(c+1),h=d.reduce((x,b)=>(x[b.descriptor.id]=!0,x),{}),p={inVirtualList:n.descriptor.mode==="virtual",displacedBy:i,effected:h};return{impact:{displaced:li({afterDragging:d,destination:n,displacedBy:i,last:null,viewport:s.frame,forceShouldAnimate:!1}),displacedBy:i,at:{type:"REORDER",destination:TS(e.descriptor)}},afterCritical:p}},RS=(e,n)=>({draggables:e.draggables,droppables:rf(e.droppables,n)}),MS=({draggable:e,offset:n,initialWindowScroll:r})=>{const s=Wa(e.client,n),i=Ha(s,r);return{...e,placeholder:{...e.placeholder,client:s},client:s,page:i}},OS=e=>{const n=e.frame;return n||ue(),n},_S=({additions:e,updatedDroppables:n,viewport:r})=>{const s=r.scroll.diff.value;return e.map(i=>{const a=i.descriptor.droppableId,c=n[a],h=OS(c).scroll.diff.value,p=$t(s,h);return MS({draggable:i,offset:p,initialWindowScroll:r.scroll.initial})})},LS=({state:e,published:n})=>{const r=n.modified.map(j=>{const P=e.dimensions.droppables[j.droppableId];return Xd(P,j.scroll)}),s={...e.dimensions.droppables,...vv(r)},i=xv(_S({additions:n.additions,updatedDroppables:s,viewport:e.viewport})),a={...e.dimensions.draggables,...i};n.removals.forEach(j=>{delete a[j]});const c={droppables:s,draggables:a},d=Sn(e.impact),h=d?c.droppables[d]:null,p=c.draggables[e.critical.draggable.id],m=c.droppables[e.critical.droppable.id],{impact:g,afterCritical:x}=Ov({draggable:p,home:m,draggables:a,viewport:e.viewport}),b=h&&h.isCombineEnabled?e.impact:g,S=Pv({pageOffset:e.current.page.offset,draggable:c.draggables[e.critical.draggable.id],draggables:c.draggables,droppables:c.droppables,previousImpact:b,viewport:e.viewport,afterCritical:x}),E={...e,phase:"DRAGGING",impact:S,onLiftImpact:g,dimensions:c,afterCritical:x,forceShouldAnimate:!1};return e.phase==="COLLECTING"?E:{...E,phase:"DROP_PENDING",reason:e.reason,isWaiting:!1}};const Sd=e=>e.movementMode==="SNAP",Xu=(e,n,r)=>{const s=RS(e.dimensions,n);return!Sd(e)||r?Qs({state:e,dimensions:s}):Mv({state:e,dimensions:s})};function Ju(e){return e.isDragging&&e.movementMode==="SNAP"?{...e,scrollJumpRequest:null}:e}const Qg={phase:"IDLE",completed:null,shouldFlush:!1};var FS=(e=Qg,n)=>{if(n.type==="FLUSH")return{...Qg,shouldFlush:!0};if(n.type==="INITIAL_PUBLISH"){e.phase!=="IDLE"&&ue();const{critical:r,clientSelection:s,viewport:i,dimensions:a,movementMode:c}=n.payload,d=a.draggables[r.draggable.id],h=a.droppables[r.droppable.id],p={selection:s,borderBoxCenter:d.client.borderBox.center,offset:Tt},m={client:p,page:{selection:$t(p.selection,i.scroll.initial),borderBoxCenter:$t(p.selection,i.scroll.initial),offset:$t(p.selection,i.scroll.diff.value)}},g=cl(a.droppables).every(E=>!E.isFixedOnPage),{impact:x,afterCritical:b}=Ov({draggable:d,home:h,draggables:a.draggables,viewport:i});return{phase:"DRAGGING",isDragging:!0,critical:r,movementMode:c,dimensions:a,initial:m,current:m,isWindowScrollAllowed:g,impact:x,afterCritical:b,onLiftImpact:x,viewport:i,scrollJumpRequest:null,forceShouldAnimate:null}}if(n.type==="COLLECTION_STARTING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"?e:(e.phase!=="DRAGGING"&&ue(),{...e,phase:"COLLECTING"});if(n.type==="PUBLISH_WHILE_DRAGGING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"||ue(),LS({state:e,published:n.payload});if(n.type==="MOVE"){if(e.phase==="DROP_PENDING")return e;No(e)||ue();const{client:r}=n.payload;return to(r,e.current.client.selection)?e:Qs({state:e,clientSelection:r,impact:Sd(e)?e.impact:null})}if(n.type==="UPDATE_DROPPABLE_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="COLLECTING")return Ju(e);No(e)||ue();const{id:r,newScroll:s}=n.payload,i=e.dimensions.droppables[r];if(!i)return e;const a=Xd(i,s);return Xu(e,a,!1)}if(n.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(e.phase==="DROP_PENDING")return e;No(e)||ue();const{id:r,isEnabled:s}=n.payload,i=e.dimensions.droppables[r];i||ue(),i.isEnabled===s&&ue();const a={...i,isEnabled:s};return Xu(e,a,!0)}if(n.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(e.phase==="DROP_PENDING")return e;No(e)||ue();const{id:r,isCombineEnabled:s}=n.payload,i=e.dimensions.droppables[r];i||ue(),i.isCombineEnabled===s&&ue();const a={...i,isCombineEnabled:s};return Xu(e,a,!0)}if(n.type==="MOVE_BY_WINDOW_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="DROP_ANIMATING")return e;No(e)||ue(),e.isWindowScrollAllowed||ue();const r=n.payload.newScroll;if(to(e.viewport.scroll.current,r))return Ju(e);const s=Sv(e.viewport,r);return Sd(e)?Mv({state:e,viewport:s}):Qs({state:e,viewport:s})}if(n.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!No(e))return e;const r=n.payload.maxScroll;if(to(r,e.viewport.scroll.max))return e;const s={...e.viewport,scroll:{...e.viewport.scroll,max:r}};return{...e,viewport:s}}if(n.type==="MOVE_UP"||n.type==="MOVE_DOWN"||n.type==="MOVE_LEFT"||n.type==="MOVE_RIGHT"){if(e.phase==="COLLECTING"||e.phase==="DROP_PENDING")return e;e.phase!=="DRAGGING"&&ue();const r=bS({state:e,type:n.type});return r?Qs({state:e,impact:r.impact,clientSelection:r.clientSelection,scrollJumpRequest:r.scrollJumpRequest}):e}if(n.type==="DROP_PENDING"){const r=n.payload.reason;return e.phase!=="COLLECTING"&&ue(),{...e,phase:"DROP_PENDING",isWaiting:!0,reason:r}}if(n.type==="DROP_ANIMATE"){const{completed:r,dropDuration:s,newHomeClientOffset:i}=n.payload;return e.phase==="DRAGGING"||e.phase==="DROP_PENDING"||ue(),{phase:"DROP_ANIMATING",completed:r,dropDuration:s,newHomeClientOffset:i,dimensions:e.dimensions}}if(n.type==="DROP_COMPLETE"){const{completed:r}=n.payload;return{phase:"IDLE",completed:r,shouldFlush:!1}}return e};function He(e,n){return e instanceof Object&&"type"in e&&e.type===n}const BS=e=>({type:"BEFORE_INITIAL_CAPTURE",payload:e}),$S=e=>({type:"LIFT",payload:e}),GS=e=>({type:"INITIAL_PUBLISH",payload:e}),US=e=>({type:"PUBLISH_WHILE_DRAGGING",payload:e}),VS=()=>({type:"COLLECTION_STARTING",payload:null}),zS=e=>({type:"UPDATE_DROPPABLE_SCROLL",payload:e}),WS=e=>({type:"UPDATE_DROPPABLE_IS_ENABLED",payload:e}),HS=e=>({type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:e}),_v=e=>({type:"MOVE",payload:e}),qS=e=>({type:"MOVE_BY_WINDOW_SCROLL",payload:e}),KS=e=>({type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:e}),YS=()=>({type:"MOVE_UP",payload:null}),QS=()=>({type:"MOVE_DOWN",payload:null}),XS=()=>({type:"MOVE_RIGHT",payload:null}),JS=()=>({type:"MOVE_LEFT",payload:null}),of=()=>({type:"FLUSH",payload:null}),ZS=e=>({type:"DROP_ANIMATE",payload:e}),sf=e=>({type:"DROP_COMPLETE",payload:e}),Lv=e=>({type:"DROP",payload:e}),eE=e=>({type:"DROP_PENDING",payload:e}),Fv=()=>({type:"DROP_ANIMATION_FINISHED",payload:null});var tE=e=>({getState:n,dispatch:r})=>s=>i=>{if(!He(i,"LIFT")){s(i);return}const{id:a,clientSelection:c,movementMode:d}=i.payload,h=n();h.phase==="DROP_ANIMATING"&&r(sf({completed:h.completed})),n().phase!=="IDLE"&&ue(),r(of()),r(BS({draggableId:a,movementMode:d}));const m={draggableId:a,scrollOptions:{shouldPublishImmediately:d==="SNAP"}},{critical:g,dimensions:x,viewport:b}=e.startPublishing(m);r(GS({critical:g,dimensions:x,clientSelection:c,movementMode:d,viewport:b}))},nE=e=>()=>n=>r=>{He(r,"INITIAL_PUBLISH")&&e.dragging(),He(r,"DROP_ANIMATE")&&e.dropping(r.payload.completed.result.reason),(He(r,"FLUSH")||He(r,"DROP_COMPLETE"))&&e.resting(),n(r)};const af={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},ci={opacity:{drop:0,combining:.7},scale:{drop:.75}},Bv={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},wo=`${Bv.outOfTheWay}s ${af.outOfTheWay}`,Xs={fluid:`opacity ${wo}`,snap:`transform ${wo}, opacity ${wo}`,drop:e=>{const n=`${e}s ${af.drop}`;return`transform ${n}, opacity ${n}`},outOfTheWay:`transform ${wo}`,placeholder:`height ${wo}, width ${wo}, margin ${wo}`},Xg=e=>to(e,Tt)?void 0:`translate(${e.x}px, ${e.y}px)`,Ed={moveTo:Xg,drop:(e,n)=>{const r=Xg(e);if(r)return n?`${r} scale(${ci.scale.drop})`:r}},{minDropTime:Dd,maxDropTime:$v}=Bv,rE=$v-Dd,Jg=1500,oE=.6;var sE=({current:e,destination:n,reason:r})=>{const s=ii(e,n);if(s<=0)return Dd;if(s>=Jg)return $v;const i=s/Jg,a=Dd+rE*i,c=r==="CANCEL"?a*oE:a;return Number(c.toFixed(2))},iE=({impact:e,draggable:n,dimensions:r,viewport:s,afterCritical:i})=>{const{draggables:a,droppables:c}=r,d=Sn(e),h=d?c[d]:null,p=c[n.descriptor.droppableId],m=Rv({impact:e,draggable:n,draggables:a,afterCritical:i,droppable:h||p,viewport:s});return Cn(m,n.client.borderBox.center)},aE=({draggables:e,reason:n,lastImpact:r,home:s,viewport:i,onLiftImpact:a})=>!r.at||n!=="DROP"?{impact:Tv({draggables:e,impact:a,destination:s,viewport:i,forceShouldAnimate:!0}),didDropInsideDroppable:!1}:r.at.type==="REORDER"?{impact:r,didDropInsideDroppable:!0}:{impact:{...r,displaced:ai},didDropInsideDroppable:!0};const lE=({getState:e,dispatch:n})=>r=>s=>{if(!He(s,"DROP")){r(s);return}const i=e(),a=s.payload.reason;if(i.phase==="COLLECTING"){n(eE({reason:a}));return}if(i.phase==="IDLE")return;i.phase==="DROP_PENDING"&&i.isWaiting&&ue(),i.phase==="DRAGGING"||i.phase==="DROP_PENDING"||ue();const d=i.critical,h=i.dimensions,p=h.draggables[i.critical.draggable.id],{impact:m,didDropInsideDroppable:g}=aE({reason:a,lastImpact:i.impact,afterCritical:i.afterCritical,onLiftImpact:i.onLiftImpact,home:i.dimensions.droppables[i.critical.droppable.id],viewport:i.viewport,draggables:i.dimensions.draggables}),x=g?Jd(m):null,b=g?ul(m):null,S={index:d.draggable.index,droppableId:d.droppable.id},E={draggableId:p.descriptor.id,type:p.descriptor.type,source:S,reason:a,mode:i.movementMode,destination:x,combine:b},N=iE({impact:m,draggable:p,dimensions:h,viewport:i.viewport,afterCritical:i.afterCritical}),j={critical:i.critical,afterCritical:i.afterCritical,result:E,impact:m};if(!(!to(i.current.client.offset,N)||!!E.combine)){n(sf({completed:j}));return}const I=sE({current:i.current.client.offset,destination:N,reason:a});n(ZS({newHomeClientOffset:N,dropDuration:I,completed:j}))};var Gv=()=>({x:window.pageXOffset,y:window.pageYOffset});function cE(e){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:n=>{n.target!==window&&n.target!==window.document||e()}}}function uE({onWindowScroll:e}){function n(){e(Gv())}const r=si(n),s=cE(r);let i=eo;function a(){return i!==eo}function c(){a()&&ue(),i=Bn(window,[s])}function d(){a()||ue(),r.cancel(),i(),i=eo}return{start:c,stop:d,isActive:a}}const dE=e=>He(e,"DROP_COMPLETE")||He(e,"DROP_ANIMATE")||He(e,"FLUSH"),fE=e=>{const n=uE({onWindowScroll:r=>{e.dispatch(qS({newScroll:r}))}});return r=>s=>{!n.isActive()&&He(s,"INITIAL_PUBLISH")&&n.start(),n.isActive()&&dE(s)&&n.stop(),r(s)}};var hE=e=>{let n=!1,r=!1;const s=setTimeout(()=>{r=!0}),i=a=>{n||r||(n=!0,e(a),clearTimeout(s))};return i.wasCalled=()=>n,i},pE=()=>{const e=[],n=i=>{const a=e.findIndex(d=>d.timerId===i);a===-1&&ue();const[c]=e.splice(a,1);c.callback()};return{add:i=>{const a=setTimeout(()=>n(a)),c={timerId:a,callback:i};e.push(c)},flush:()=>{if(!e.length)return;const i=[...e];e.length=0,i.forEach(a=>{clearTimeout(a.timerId),a.callback()})}}};const mE=(e,n)=>e==null&&n==null?!0:e==null||n==null?!1:e.droppableId===n.droppableId&&e.index===n.index,gE=(e,n)=>e==null&&n==null?!0:e==null||n==null?!1:e.draggableId===n.draggableId&&e.droppableId===n.droppableId,vE=(e,n)=>{if(e===n)return!0;const r=e.draggable.id===n.draggable.id&&e.draggable.droppableId===n.draggable.droppableId&&e.draggable.type===n.draggable.type&&e.draggable.index===n.draggable.index,s=e.droppable.id===n.droppable.id&&e.droppable.type===n.droppable.type;return r&&s},Hs=(e,n)=>{n()},Ra=(e,n)=>({draggableId:e.draggable.id,type:e.droppable.type,source:{droppableId:e.droppable.id,index:e.draggable.index},mode:n});function Zu(e,n,r,s){if(!e){r(s(n));return}const i=hE(r);e(n,{announce:i}),i.wasCalled()||r(s(n))}var xE=(e,n)=>{const r=pE();let s=null;const i=(g,x)=>{s&&ue(),Hs("onBeforeCapture",()=>{const b=e().onBeforeCapture;b&&b({draggableId:g,mode:x})})},a=(g,x)=>{s&&ue(),Hs("onBeforeDragStart",()=>{const b=e().onBeforeDragStart;b&&b(Ra(g,x))})},c=(g,x)=>{s&&ue();const b=Ra(g,x);s={mode:x,lastCritical:g,lastLocation:b.source,lastCombine:null},r.add(()=>{Hs("onDragStart",()=>Zu(e().onDragStart,b,n,La.onDragStart))})},d=(g,x)=>{const b=Jd(x),S=ul(x);s||ue();const E=!vE(g,s.lastCritical);E&&(s.lastCritical=g);const N=!mE(s.lastLocation,b);N&&(s.lastLocation=b);const j=!gE(s.lastCombine,S);if(j&&(s.lastCombine=S),!E&&!N&&!j)return;const P={...Ra(g,s.mode),combine:S,destination:b};r.add(()=>{Hs("onDragUpdate",()=>Zu(e().onDragUpdate,P,n,La.onDragUpdate))})},h=()=>{s||ue(),r.flush()},p=g=>{s||ue(),s=null,Hs("onDragEnd",()=>Zu(e().onDragEnd,g,n,La.onDragEnd))};return{beforeCapture:i,beforeStart:a,start:c,update:d,flush:h,drop:p,abort:()=>{if(!s)return;const g={...Ra(s.lastCritical,s.mode),combine:null,destination:null,reason:"CANCEL"};p(g)}}},yE=(e,n)=>{const r=xE(e,n);return s=>i=>a=>{if(He(a,"BEFORE_INITIAL_CAPTURE")){r.beforeCapture(a.payload.draggableId,a.payload.movementMode);return}if(He(a,"INITIAL_PUBLISH")){const d=a.payload.critical;r.beforeStart(d,a.payload.movementMode),i(a),r.start(d,a.payload.movementMode);return}if(He(a,"DROP_COMPLETE")){const d=a.payload.completed.result;r.flush(),i(a),r.drop(d);return}if(i(a),He(a,"FLUSH")){r.abort();return}const c=s.getState();c.phase==="DRAGGING"&&r.update(c.critical,c.impact)}};const bE=e=>n=>r=>{if(!He(r,"DROP_ANIMATION_FINISHED")){n(r);return}const s=e.getState();s.phase!=="DROP_ANIMATING"&&ue(),e.dispatch(sf({completed:s.completed}))},wE=e=>{let n=null,r=null;function s(){r&&(cancelAnimationFrame(r),r=null),n&&(n(),n=null)}return i=>a=>{if((He(a,"FLUSH")||He(a,"DROP_COMPLETE")||He(a,"DROP_ANIMATION_FINISHED"))&&s(),i(a),!He(a,"DROP_ANIMATE"))return;const c={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){e.getState().phase==="DROP_ANIMATING"&&e.dispatch(Fv())}};r=requestAnimationFrame(()=>{r=null,n=Bn(window,[c])})}};var NE=e=>()=>n=>r=>{(He(r,"DROP_COMPLETE")||He(r,"FLUSH")||He(r,"DROP_ANIMATE"))&&e.stopPublishing(),n(r)},CE=e=>{let n=!1;return()=>r=>s=>{if(He(s,"INITIAL_PUBLISH")){n=!0,e.tryRecordFocus(s.payload.critical.draggable.id),r(s),e.tryRestoreFocusRecorded();return}if(r(s),!!n){if(He(s,"FLUSH")){n=!1,e.tryRestoreFocusRecorded();return}if(He(s,"DROP_COMPLETE")){n=!1;const i=s.payload.completed.result;i.combine&&e.tryShiftRecord(i.draggableId,i.combine.draggableId),e.tryRestoreFocusRecorded()}}}};const SE=e=>He(e,"DROP_COMPLETE")||He(e,"DROP_ANIMATE")||He(e,"FLUSH");var EE=e=>n=>r=>s=>{if(SE(s)){e.stop(),r(s);return}if(He(s,"INITIAL_PUBLISH")){r(s);const i=n.getState();i.phase!=="DRAGGING"&&ue(),e.start(i);return}r(s),e.scroll(n.getState())};const DE=e=>n=>r=>{if(n(r),!He(r,"PUBLISH_WHILE_DRAGGING"))return;const s=e.getState();s.phase==="DROP_PENDING"&&(s.isWaiting||e.dispatch(Lv({reason:s.reason})))},AE=rv;var jE=({dimensionMarshal:e,focusMarshal:n,styleMarshal:r,getResponders:s,announce:i,autoScroller:a})=>nv(FS,AE(EC(nE(r),NE(e),tE(e),lE,bE,wE,DE,EE(a),fE,CE(n),yE(s,i))));const ed=()=>({additions:{},removals:{},modified:{}});function IE({registry:e,callbacks:n}){let r=ed(),s=null;const i=()=>{s||(n.collectionStarting(),s=requestAnimationFrame(()=>{s=null;const{additions:h,removals:p,modified:m}=r,g=Object.keys(h).map(S=>e.draggable.getById(S).getDimension(Tt)).sort((S,E)=>S.descriptor.index-E.descriptor.index),x=Object.keys(m).map(S=>{const N=e.droppable.getById(S).callbacks.getScrollWhileDragging();return{droppableId:S,scroll:N}}),b={additions:g,removals:Object.keys(p),modified:x};r=ed(),n.publish(b)}))};return{add:h=>{const p=h.descriptor.id;r.additions[p]=h,r.modified[h.descriptor.droppableId]=!0,r.removals[p]&&delete r.removals[p],i()},remove:h=>{const p=h.descriptor;r.removals[p.id]=!0,r.modified[p.droppableId]=!0,r.additions[p.id]&&delete r.additions[p.id],i()},stop:()=>{s&&(cancelAnimationFrame(s),s=null,r=ed())}}}var Uv=({scrollHeight:e,scrollWidth:n,height:r,width:s})=>{const i=Cn({x:n,y:e},{x:s,y:r});return{x:Math.max(0,i.x),y:Math.max(0,i.y)}},Vv=()=>{const e=document.documentElement;return e||ue(),e},zv=()=>{const e=Vv();return Uv({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,width:e.clientWidth,height:e.clientHeight})},kE=()=>{const e=Gv(),n=zv(),r=e.y,s=e.x,i=Vv(),a=i.clientWidth,c=i.clientHeight,d=s+a,h=r+c;return{frame:Jn({top:r,left:s,right:d,bottom:h}),scroll:{initial:e,current:e,max:n,diff:{value:Tt,displacement:Tt}}}},PE=({critical:e,scrollOptions:n,registry:r})=>{const s=kE(),i=s.scroll.current,a=e.droppable,c=r.droppable.getAllByType(a.type).map(m=>m.callbacks.getDimensionAndWatchScroll(i,n)),d=r.draggable.getAllByType(e.draggable.type).map(m=>m.getDimension(i));return{dimensions:{draggables:xv(d),droppables:vv(c)},critical:e,viewport:s}};function Zg(e,n,r){return!(r.descriptor.id===n.id||r.descriptor.type!==n.type||e.droppable.getById(r.descriptor.droppableId).descriptor.mode!=="virtual")}var TE=(e,n)=>{let r=null;const s=IE({callbacks:{publish:n.publishWhileDragging,collectionStarting:n.collectionStarting},registry:e}),i=(x,b)=>{e.droppable.exists(x)||ue(),r&&n.updateDroppableIsEnabled({id:x,isEnabled:b})},a=(x,b)=>{r&&(e.droppable.exists(x)||ue(),n.updateDroppableIsCombineEnabled({id:x,isCombineEnabled:b}))},c=(x,b)=>{r&&(e.droppable.exists(x)||ue(),n.updateDroppableScroll({id:x,newScroll:b}))},d=(x,b)=>{r&&e.droppable.getById(x).callbacks.scroll(b)},h=()=>{if(!r)return;s.stop();const x=r.critical.droppable;e.droppable.getAllByType(x.type).forEach(b=>b.callbacks.dragStopped()),r.unsubscribe(),r=null},p=x=>{r||ue();const b=r.critical.draggable;x.type==="ADDITION"&&Zg(e,b,x.value)&&s.add(x.value),x.type==="REMOVAL"&&Zg(e,b,x.value)&&s.remove(x.value)};return{updateDroppableIsEnabled:i,updateDroppableIsCombineEnabled:a,scrollDroppable:d,updateDroppableScroll:c,startPublishing:x=>{r&&ue();const b=e.draggable.getById(x.draggableId),S=e.droppable.getById(b.descriptor.droppableId),E={draggable:b.descriptor,droppable:S.descriptor},N=e.subscribe(p);return r={critical:E,unsubscribe:N},PE({critical:E,registry:e,scrollOptions:x.scrollOptions})},stopPublishing:h}},Wv=(e,n)=>e.phase==="IDLE"?!0:e.phase!=="DROP_ANIMATING"||e.completed.result.draggableId===n?!1:e.completed.result.reason==="DROP",RE=e=>{window.scrollBy(e.x,e.y)};const ME=Pt(e=>cl(e).filter(n=>!(!n.isEnabled||!n.frame))),OE=(e,n)=>ME(n).find(s=>(s.frame||ue(),jv(s.frame.pageMarginBox)(e)))||null;var _E=({center:e,destination:n,droppables:r})=>{if(n){const i=r[n];return i.frame?i:null}return OE(e,r)};const ui={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:e=>e**2,durationDampening:{stopDampeningAt:1200,accelerateAt:360},disabled:!1};var LE=(e,n,r=()=>ui)=>{const s=r(),i=e[n.size]*s.startFromPercentage,a=e[n.size]*s.maxScrollAtPercentage;return{startScrollingFrom:i,maxScrollValueAt:a}},Hv=({startOfRange:e,endOfRange:n,current:r})=>{const s=n-e;return s===0?0:(r-e)/s},lf=1,FE=(e,n,r=()=>ui)=>{const s=r();if(e>n.startScrollingFrom)return 0;if(e<=n.maxScrollValueAt)return s.maxPixelScroll;if(e===n.startScrollingFrom)return lf;const a=1-Hv({startOfRange:n.maxScrollValueAt,endOfRange:n.startScrollingFrom,current:e}),c=s.maxPixelScroll*s.ease(a);return Math.ceil(c)},BE=(e,n,r)=>{const s=r(),i=s.durationDampening.accelerateAt,a=s.durationDampening.stopDampeningAt,c=n,d=a,p=Date.now()-c;if(p>=a)return e;if(p<i)return lf;const m=Hv({startOfRange:i,endOfRange:d,current:p}),g=e*s.ease(m);return Math.ceil(g)},e0=({distanceToEdge:e,thresholds:n,dragStartTime:r,shouldUseTimeDampening:s,getAutoScrollerOptions:i})=>{const a=FE(e,n,i);return a===0?0:s?Math.max(BE(a,r,i),lf):a},t0=({container:e,distanceToEdges:n,dragStartTime:r,axis:s,shouldUseTimeDampening:i,getAutoScrollerOptions:a})=>{const c=LE(e,s,a);return n[s.end]<n[s.start]?e0({distanceToEdge:n[s.end],thresholds:c,dragStartTime:r,shouldUseTimeDampening:i,getAutoScrollerOptions:a}):-1*e0({distanceToEdge:n[s.start],thresholds:c,dragStartTime:r,shouldUseTimeDampening:i,getAutoScrollerOptions:a})},$E=({container:e,subject:n,proposedScroll:r})=>{const s=n.height>e.height,i=n.width>e.width;return!i&&!s?r:i&&s?null:{x:i?0:r.x,y:s?0:r.y}};const GE=gv(e=>e===0?0:e);var qv=({dragStartTime:e,container:n,subject:r,center:s,shouldUseTimeDampening:i,getAutoScrollerOptions:a})=>{const c={top:s.y-n.top,right:n.right-s.x,bottom:n.bottom-s.y,left:s.x-n.left},d=t0({container:n,distanceToEdges:c,dragStartTime:e,axis:Zd,shouldUseTimeDampening:i,getAutoScrollerOptions:a}),h=t0({container:n,distanceToEdges:c,dragStartTime:e,axis:wv,shouldUseTimeDampening:i,getAutoScrollerOptions:a}),p=GE({x:h,y:d});if(to(p,Tt))return null;const m=$E({container:n,subject:r,proposedScroll:p});return m?to(m,Tt)?null:m:null};const UE=gv(e=>e===0?0:e>0?1:-1),cf=(()=>{const e=(n,r)=>n<0?n:n>r?n-r:0;return({current:n,max:r,change:s})=>{const i=$t(n,s),a={x:e(i.x,r.x),y:e(i.y,r.y)};return to(a,Tt)?null:a}})(),Kv=({max:e,current:n,change:r})=>{const s={x:Math.max(n.x,e.x),y:Math.max(n.y,e.y)},i=UE(r),a=cf({max:s,current:n,change:i});return!a||i.x!==0&&a.x===0||i.y!==0&&a.y===0},uf=(e,n)=>Kv({current:e.scroll.current,max:e.scroll.max,change:n}),VE=(e,n)=>{if(!uf(e,n))return null;const r=e.scroll.max,s=e.scroll.current;return cf({current:s,max:r,change:n})},df=(e,n)=>{const r=e.frame;return r?Kv({current:r.scroll.current,max:r.scroll.max,change:n}):!1},zE=(e,n)=>{const r=e.frame;return!r||!df(e,n)?null:cf({current:r.scroll.current,max:r.scroll.max,change:n})};var WE=({viewport:e,subject:n,center:r,dragStartTime:s,shouldUseTimeDampening:i,getAutoScrollerOptions:a})=>{const c=qv({dragStartTime:s,container:e.frame,subject:n,center:r,shouldUseTimeDampening:i,getAutoScrollerOptions:a});return c&&uf(e,c)?c:null},HE=({droppable:e,subject:n,center:r,dragStartTime:s,shouldUseTimeDampening:i,getAutoScrollerOptions:a})=>{const c=e.frame;if(!c)return null;const d=qv({dragStartTime:s,container:c.pageMarginBox,subject:n,center:r,shouldUseTimeDampening:i,getAutoScrollerOptions:a});return d&&df(e,d)?d:null},n0=({state:e,dragStartTime:n,shouldUseTimeDampening:r,scrollWindow:s,scrollDroppable:i,getAutoScrollerOptions:a})=>{const c=e.current.page.borderBoxCenter,h=e.dimensions.draggables[e.critical.draggable.id].page.marginBox;if(e.isWindowScrollAllowed){const g=e.viewport,x=WE({dragStartTime:n,viewport:g,subject:h,center:c,shouldUseTimeDampening:r,getAutoScrollerOptions:a});if(x){s(x);return}}const p=_E({center:c,destination:Sn(e.impact),droppables:e.dimensions.droppables});if(!p)return;const m=HE({dragStartTime:n,droppable:p,subject:h,center:c,shouldUseTimeDampening:r,getAutoScrollerOptions:a});m&&i(p.descriptor.id,m)},qE=({scrollWindow:e,scrollDroppable:n,getAutoScrollerOptions:r=()=>ui})=>{const s=si(e),i=si(n);let a=null;const c=p=>{a||ue();const{shouldUseTimeDampening:m,dragStartTime:g}=a;n0({state:p,scrollWindow:s,scrollDroppable:i,dragStartTime:g,shouldUseTimeDampening:m,getAutoScrollerOptions:r})};return{start:p=>{a&&ue();const m=Date.now();let g=!1;const x=()=>{g=!0};n0({state:p,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:x,scrollDroppable:x,getAutoScrollerOptions:r}),a={dragStartTime:m,shouldUseTimeDampening:g},g&&c(p)},stop:()=>{a&&(s.cancel(),i.cancel(),a=null)},scroll:c}},KE=({move:e,scrollDroppable:n,scrollWindow:r})=>{const s=(d,h)=>{const p=$t(d.current.client.selection,h);e({client:p})},i=(d,h)=>{if(!df(d,h))return h;const p=zE(d,h);if(!p)return n(d.descriptor.id,h),null;const m=Cn(h,p);return n(d.descriptor.id,m),Cn(h,m)},a=(d,h,p)=>{if(!d||!uf(h,p))return p;const m=VE(h,p);if(!m)return r(p),null;const g=Cn(p,m);return r(g),Cn(p,g)};return d=>{const h=d.scrollJumpRequest;if(!h)return;const p=Sn(d.impact);p||ue();const m=i(d.dimensions.droppables[p],h);if(!m)return;const g=d.viewport,x=a(d.isWindowScrollAllowed,g,m);x&&s(d,x)}},YE=({scrollDroppable:e,scrollWindow:n,move:r,getAutoScrollerOptions:s})=>{const i=qE({scrollWindow:n,scrollDroppable:e,getAutoScrollerOptions:s}),a=KE({move:r,scrollWindow:n,scrollDroppable:e});return{scroll:h=>{if(!(s().disabled||h.phase!=="DRAGGING")){if(h.movementMode==="FLUID"){i.scroll(h);return}h.scrollJumpRequest&&a(h)}},start:i.start,stop:i.stop}};const Qo="data-rfd",Xo=(()=>{const e=`${Qo}-drag-handle`;return{base:e,draggableId:`${e}-draggable-id`,contextId:`${e}-context-id`}})(),Ad=(()=>{const e=`${Qo}-draggable`;return{base:e,contextId:`${e}-context-id`,id:`${e}-id`}})(),QE=(()=>{const e=`${Qo}-droppable`;return{base:e,contextId:`${e}-context-id`,id:`${e}-id`}})(),r0={contextId:`${Qo}-scroll-container-context-id`},XE=e=>n=>`[${n}="${e}"]`,qs=(e,n)=>e.map(r=>{const s=r.styles[n];return s?`${r.selector} { ${s} }`:""}).join(" "),JE="pointer-events: none;";var ZE=e=>{const n=XE(e),r=(()=>{const d=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:n(Xo.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:d,dragging:JE,dropAnimating:d}}})(),s=(()=>{const d=`
      transition: ${Xs.outOfTheWay};
    `;return{selector:n(Ad.contextId),styles:{dragging:d,dropAnimating:d,userCancel:d}}})(),i={selector:n(QE.contextId),styles:{always:"overflow-anchor: none;"}},c=[s,r,i,{selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}}];return{always:qs(c,"always"),resting:qs(c,"resting"),dragging:qs(c,"dragging"),dropAnimating:qs(c,"dropAnimating"),userCancel:qs(c,"userCancel")}};const En=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?w.useLayoutEffect:w.useEffect,td=()=>{const e=document.querySelector("head");return e||ue(),e},o0=e=>{const n=document.createElement("style");return e&&n.setAttribute("nonce",e),n.type="text/css",n};function e4(e,n){const r=Ge(()=>ZE(e),[e]),s=w.useRef(null),i=w.useRef(null),a=Ce(Pt(g=>{const x=i.current;x||ue(),x.textContent=g}),[]),c=Ce(g=>{const x=s.current;x||ue(),x.textContent=g},[]);En(()=>{!s.current&&!i.current||ue();const g=o0(n),x=o0(n);return s.current=g,i.current=x,g.setAttribute(`${Qo}-always`,e),x.setAttribute(`${Qo}-dynamic`,e),td().appendChild(g),td().appendChild(x),c(r.always),a(r.resting),()=>{const b=S=>{const E=S.current;E||ue(),td().removeChild(E),S.current=null};b(s),b(i)}},[n,c,a,r.always,r.resting,e]);const d=Ce(()=>a(r.dragging),[a,r.dragging]),h=Ce(g=>{if(g==="DROP"){a(r.dropAnimating);return}a(r.userCancel)},[a,r.dropAnimating,r.userCancel]),p=Ce(()=>{i.current&&a(r.resting)},[a,r.resting]);return Ge(()=>({dragging:d,dropping:h,resting:p}),[d,h,p])}function Yv(e,n){return Array.from(e.querySelectorAll(n))}var Qv=e=>e&&e.ownerDocument&&e.ownerDocument.defaultView?e.ownerDocument.defaultView:window;function hl(e){return e instanceof Qv(e).HTMLElement}function t4(e,n){const r=`[${Xo.contextId}="${e}"]`,s=Yv(document,r);if(!s.length)return null;const i=s.find(a=>a.getAttribute(Xo.draggableId)===n);return!i||!hl(i)?null:i}function n4(e){const n=w.useRef({}),r=w.useRef(null),s=w.useRef(null),i=w.useRef(!1),a=Ce(function(x,b){const S={id:x,focus:b};return n.current[x]=S,function(){const N=n.current;N[x]!==S&&delete N[x]}},[]),c=Ce(function(x){const b=t4(e,x);b&&b!==document.activeElement&&b.focus()},[e]),d=Ce(function(x,b){r.current===x&&(r.current=b)},[]),h=Ce(function(){s.current||i.current&&(s.current=requestAnimationFrame(()=>{s.current=null;const x=r.current;x&&c(x)}))},[c]),p=Ce(function(x){r.current=null;const b=document.activeElement;b&&b.getAttribute(Xo.draggableId)===x&&(r.current=x)},[]);return En(()=>(i.current=!0,function(){i.current=!1;const x=s.current;x&&cancelAnimationFrame(x)}),[]),Ge(()=>({register:a,tryRecordFocus:p,tryRestoreFocusRecorded:h,tryShiftRecord:d}),[a,p,h,d])}function r4(){const e={draggables:{},droppables:{}},n=[];function r(g){return n.push(g),function(){const b=n.indexOf(g);b!==-1&&n.splice(b,1)}}function s(g){n.length&&n.forEach(x=>x(g))}function i(g){return e.draggables[g]||null}function a(g){const x=i(g);return x||ue(),x}const c={register:g=>{e.draggables[g.descriptor.id]=g,s({type:"ADDITION",value:g})},update:(g,x)=>{const b=e.draggables[x.descriptor.id];b&&b.uniqueId===g.uniqueId&&(delete e.draggables[x.descriptor.id],e.draggables[g.descriptor.id]=g)},unregister:g=>{const x=g.descriptor.id,b=i(x);b&&g.uniqueId===b.uniqueId&&(delete e.draggables[x],e.droppables[g.descriptor.droppableId]&&s({type:"REMOVAL",value:g}))},getById:a,findById:i,exists:g=>!!i(g),getAllByType:g=>Object.values(e.draggables).filter(x=>x.descriptor.type===g)};function d(g){return e.droppables[g]||null}function h(g){const x=d(g);return x||ue(),x}const p={register:g=>{e.droppables[g.descriptor.id]=g},unregister:g=>{const x=d(g.descriptor.id);x&&g.uniqueId===x.uniqueId&&delete e.droppables[g.descriptor.id]},getById:h,findById:d,exists:g=>!!d(g),getAllByType:g=>Object.values(e.droppables).filter(x=>x.descriptor.type===g)};function m(){e.draggables={},e.droppables={},n.length=0}return{draggable:c,droppable:p,subscribe:r,clean:m}}function o4(){const e=Ge(r4,[]);return w.useEffect(()=>function(){e.clean()},[e]),e}var ff=ve.createContext(null),Xa=()=>{const e=document.body;return e||ue(),e};const s4={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},i4=e=>`rfd-announcement-${e}`;function a4(e){const n=Ge(()=>i4(e),[e]),r=w.useRef(null);return w.useEffect(function(){const a=document.createElement("div");return r.current=a,a.id=n,a.setAttribute("aria-live","assertive"),a.setAttribute("aria-atomic","true"),qa(a.style,s4),Xa().appendChild(a),function(){setTimeout(function(){const h=Xa();h.contains(a)&&h.removeChild(a),a===r.current&&(r.current=null)})}},[n]),Ce(i=>{const a=r.current;if(a){a.textContent=i;return}},[])}const l4={separator:"::"};function hf(e,n=l4){const r=ve.useId();return Ge(()=>`${e}${n.separator}${r}`,[n.separator,e,r])}function c4({contextId:e,uniqueId:n}){return`rfd-hidden-text-${e}-${n}`}function u4({contextId:e,text:n}){const r=hf("hidden-text",{separator:"-"}),s=Ge(()=>c4({contextId:e,uniqueId:r}),[r,e]);return w.useEffect(function(){const a=document.createElement("div");return a.id=s,a.textContent=n,a.style.display="none",Xa().appendChild(a),function(){const d=Xa();d.contains(a)&&d.removeChild(a)}},[s,n]),s}var pl=ve.createContext(null);function Xv(e){const n=w.useRef(e);return w.useEffect(()=>{n.current=e}),n}function d4(){let e=null;function n(){return!!e}function r(c){return c===e}function s(c){e&&ue();const d={abandon:c};return e=d,d}function i(){e||ue(),e=null}function a(){e&&(e.abandon(),i())}return{isClaimed:n,isActive:r,claim:s,release:i,tryAbandon:a}}function di(e){return e.phase==="IDLE"||e.phase==="DROP_ANIMATING"?!1:e.isDragging}const f4=9,h4=13,pf=27,Jv=32,p4=33,m4=34,g4=35,v4=36,x4=37,y4=38,b4=39,w4=40,N4={[h4]:!0,[f4]:!0};var Zv=e=>{N4[e.keyCode]&&e.preventDefault()};const ml=(()=>{const e="visibilitychange";return typeof document>"u"?e:[e,`ms${e}`,`webkit${e}`,`moz${e}`,`o${e}`].find(s=>`on${s}`in document)||e})(),ex=0,s0=5;function C4(e,n){return Math.abs(n.x-e.x)>=s0||Math.abs(n.y-e.y)>=s0}const i0={type:"IDLE"};function S4({cancel:e,completed:n,getPhase:r,setPhase:s}){return[{eventName:"mousemove",fn:i=>{const{button:a,clientX:c,clientY:d}=i;if(a!==ex)return;const h={x:c,y:d},p=r();if(p.type==="DRAGGING"){i.preventDefault(),p.actions.move(h);return}p.type!=="PENDING"&&ue();const m=p.point;if(!C4(m,h))return;i.preventDefault();const g=p.actions.fluidLift(h);s({type:"DRAGGING",actions:g})}},{eventName:"mouseup",fn:i=>{const a=r();if(a.type!=="DRAGGING"){e();return}i.preventDefault(),a.actions.drop({shouldBlockNextClick:!0}),n()}},{eventName:"mousedown",fn:i=>{r().type==="DRAGGING"&&i.preventDefault(),e()}},{eventName:"keydown",fn:i=>{if(r().type==="PENDING"){e();return}if(i.keyCode===pf){i.preventDefault(),e();return}Zv(i)}},{eventName:"resize",fn:e},{eventName:"scroll",options:{passive:!0,capture:!1},fn:()=>{r().type==="PENDING"&&e()}},{eventName:"webkitmouseforcedown",fn:i=>{const a=r();if(a.type==="IDLE"&&ue(),a.actions.shouldRespectForcePress()){e();return}i.preventDefault()}},{eventName:ml,fn:e}]}function E4(e){const n=w.useRef(i0),r=w.useRef(eo),s=Ge(()=>({eventName:"mousedown",fn:function(g){if(g.defaultPrevented||g.button!==ex||g.ctrlKey||g.metaKey||g.shiftKey||g.altKey)return;const x=e.findClosestDraggableId(g);if(!x)return;const b=e.tryGetLock(x,c,{sourceEvent:g});if(!b)return;g.preventDefault();const S={x:g.clientX,y:g.clientY};r.current(),p(b,S)}}),[e]),i=Ge(()=>({eventName:"webkitmouseforcewillbegin",fn:m=>{if(m.defaultPrevented)return;const g=e.findClosestDraggableId(m);if(!g)return;const x=e.findOptionsForDraggable(g);x&&(x.shouldRespectForcePress||e.canGetLock(g)&&m.preventDefault())}}),[e]),a=Ce(function(){const g={passive:!1,capture:!0};r.current=Bn(window,[i,s],g)},[i,s]),c=Ce(()=>{n.current.type!=="IDLE"&&(n.current=i0,r.current(),a())},[a]),d=Ce(()=>{const m=n.current;c(),m.type==="DRAGGING"&&m.actions.cancel({shouldBlockNextClick:!0}),m.type==="PENDING"&&m.actions.abort()},[c]),h=Ce(function(){const g={capture:!0,passive:!1},x=S4({cancel:d,completed:c,getPhase:()=>n.current,setPhase:b=>{n.current=b}});r.current=Bn(window,x,g)},[d,c]),p=Ce(function(g,x){n.current.type!=="IDLE"&&ue(),n.current={type:"PENDING",point:x,actions:g},h()},[h]);En(function(){return a(),function(){r.current()}},[a])}function D4(){}const A4={[m4]:!0,[p4]:!0,[v4]:!0,[g4]:!0};function j4(e,n){function r(){n(),e.cancel()}function s(){n(),e.drop()}return[{eventName:"keydown",fn:i=>{if(i.keyCode===pf){i.preventDefault(),r();return}if(i.keyCode===Jv){i.preventDefault(),s();return}if(i.keyCode===w4){i.preventDefault(),e.moveDown();return}if(i.keyCode===y4){i.preventDefault(),e.moveUp();return}if(i.keyCode===b4){i.preventDefault(),e.moveRight();return}if(i.keyCode===x4){i.preventDefault(),e.moveLeft();return}if(A4[i.keyCode]){i.preventDefault();return}Zv(i)}},{eventName:"mousedown",fn:r},{eventName:"mouseup",fn:r},{eventName:"click",fn:r},{eventName:"touchstart",fn:r},{eventName:"resize",fn:r},{eventName:"wheel",fn:r,options:{passive:!0}},{eventName:ml,fn:r}]}function I4(e){const n=w.useRef(D4),r=Ge(()=>({eventName:"keydown",fn:function(a){if(a.defaultPrevented||a.keyCode!==Jv)return;const c=e.findClosestDraggableId(a);if(!c)return;const d=e.tryGetLock(c,m,{sourceEvent:a});if(!d)return;a.preventDefault();let h=!0;const p=d.snapLift();n.current();function m(){h||ue(),h=!1,n.current(),s()}n.current=Bn(window,j4(p,m),{capture:!0,passive:!1})}}),[e]),s=Ce(function(){const a={passive:!1,capture:!0};n.current=Bn(window,[r],a)},[r]);En(function(){return s(),function(){n.current()}},[s])}const nd={type:"IDLE"},k4=120,P4=.15;function T4({cancel:e,getPhase:n}){return[{eventName:"orientationchange",fn:e},{eventName:"resize",fn:e},{eventName:"contextmenu",fn:r=>{r.preventDefault()}},{eventName:"keydown",fn:r=>{if(n().type!=="DRAGGING"){e();return}r.keyCode===pf&&r.preventDefault(),e()}},{eventName:ml,fn:e}]}function R4({cancel:e,completed:n,getPhase:r}){return[{eventName:"touchmove",options:{capture:!1},fn:s=>{const i=r();if(i.type!=="DRAGGING"){e();return}i.hasMoved=!0;const{clientX:a,clientY:c}=s.touches[0],d={x:a,y:c};s.preventDefault(),i.actions.move(d)}},{eventName:"touchend",fn:s=>{const i=r();if(i.type!=="DRAGGING"){e();return}s.preventDefault(),i.actions.drop({shouldBlockNextClick:!0}),n()}},{eventName:"touchcancel",fn:s=>{if(r().type!=="DRAGGING"){e();return}s.preventDefault(),e()}},{eventName:"touchforcechange",fn:s=>{const i=r();i.type==="IDLE"&&ue();const a=s.touches[0];if(!a||!(a.force>=P4))return;const d=i.actions.shouldRespectForcePress();if(i.type==="PENDING"){d&&e();return}if(d){if(i.hasMoved){s.preventDefault();return}e();return}s.preventDefault()}},{eventName:ml,fn:e}]}function M4(e){const n=w.useRef(nd),r=w.useRef(eo),s=Ce(function(){return n.current},[]),i=Ce(function(b){n.current=b},[]),a=Ge(()=>({eventName:"touchstart",fn:function(b){if(b.defaultPrevented)return;const S=e.findClosestDraggableId(b);if(!S)return;const E=e.tryGetLock(S,d,{sourceEvent:b});if(!E)return;const N=b.touches[0],{clientX:j,clientY:P}=N,I={x:j,y:P};r.current(),g(E,I)}}),[e]),c=Ce(function(){const b={capture:!0,passive:!1};r.current=Bn(window,[a],b)},[a]),d=Ce(()=>{const x=n.current;x.type!=="IDLE"&&(x.type==="PENDING"&&clearTimeout(x.longPressTimerId),i(nd),r.current(),c())},[c,i]),h=Ce(()=>{const x=n.current;d(),x.type==="DRAGGING"&&x.actions.cancel({shouldBlockNextClick:!0}),x.type==="PENDING"&&x.actions.abort()},[d]),p=Ce(function(){const b={capture:!0,passive:!1},S={cancel:h,completed:d,getPhase:s},E=Bn(window,R4(S),b),N=Bn(window,T4(S),b);r.current=function(){E(),N()}},[h,s,d]),m=Ce(function(){const b=s();b.type!=="PENDING"&&ue();const S=b.actions.fluidLift(b.point);i({type:"DRAGGING",actions:S,hasMoved:!1})},[s,i]),g=Ce(function(b,S){s().type!=="IDLE"&&ue();const E=setTimeout(m,k4);i({type:"PENDING",point:S,actions:b,longPressTimerId:E}),p()},[p,s,i,m]);En(function(){return c(),function(){r.current();const S=s();S.type==="PENDING"&&(clearTimeout(S.longPressTimerId),i(nd))}},[s,c,i]),En(function(){return Bn(window,[{eventName:"touchmove",fn:()=>{},options:{capture:!1,passive:!1}}])},[])}const O4=["input","button","textarea","select","option","optgroup","video","audio"];function tx(e,n){if(n==null)return!1;if(O4.includes(n.tagName.toLowerCase()))return!0;const s=n.getAttribute("contenteditable");return s==="true"||s===""?!0:n===e?!1:tx(e,n.parentElement)}function _4(e,n){const r=n.target;return hl(r)?tx(e,r):!1}var L4=e=>Jn(e.getBoundingClientRect()).center;function F4(e){return e instanceof Qv(e).Element}const B4=(()=>{const e="matches";return typeof document>"u"?e:[e,"msMatchesSelector","webkitMatchesSelector"].find(s=>s in Element.prototype)||e})();function nx(e,n){return e==null?null:e[B4](n)?e:nx(e.parentElement,n)}function $4(e,n){return e.closest?e.closest(n):nx(e,n)}function G4(e){return`[${Xo.contextId}="${e}"]`}function U4(e,n){const r=n.target;if(!F4(r))return null;const s=G4(e),i=$4(r,s);return!i||!hl(i)?null:i}function V4(e,n){const r=U4(e,n);return r?r.getAttribute(Xo.draggableId):null}function z4(e,n){const r=`[${Ad.contextId}="${e}"]`,i=Yv(document,r).find(a=>a.getAttribute(Ad.id)===n);return!i||!hl(i)?null:i}function W4(e){e.preventDefault()}function Ma({expected:e,phase:n,isLockActive:r,shouldWarn:s}){return!(!r()||e!==n)}function rx({lockAPI:e,store:n,registry:r,draggableId:s}){if(e.isClaimed())return!1;const i=r.draggable.findById(s);return!(!i||!i.options.isEnabled||!Wv(n.getState(),s))}function H4({lockAPI:e,contextId:n,store:r,registry:s,draggableId:i,forceSensorStop:a,sourceEvent:c}){if(!rx({lockAPI:e,store:r,registry:s,draggableId:i}))return null;const h=s.draggable.getById(i),p=z4(n,h.descriptor.id);if(!p||c&&!h.options.canDragInteractiveElements&&_4(p,c))return null;const m=e.claim(a||eo);let g="PRE_DRAG";function x(){return h.options.shouldRespectForcePress}function b(){return e.isActive(m)}function S(k,R){Ma({expected:k,phase:g,isLockActive:b,shouldWarn:!0})&&r.dispatch(R())}const E=S.bind(null,"DRAGGING");function N(k){function R(){e.release(),g="COMPLETED"}g!=="PRE_DRAG"&&(R(),ue()),r.dispatch($S(k.liftActionArgs)),g="DRAGGING";function O(M,q={shouldBlockNextClick:!1}){if(k.cleanup(),q.shouldBlockNextClick){const J=Bn(window,[{eventName:"click",fn:W4,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(J)}R(),r.dispatch(Lv({reason:M}))}return{isActive:()=>Ma({expected:"DRAGGING",phase:g,isLockActive:b,shouldWarn:!1}),shouldRespectForcePress:x,drop:M=>O("DROP",M),cancel:M=>O("CANCEL",M),...k.actions}}function j(k){const R=si(M=>{E(()=>_v({client:M}))});return{...N({liftActionArgs:{id:i,clientSelection:k,movementMode:"FLUID"},cleanup:()=>R.cancel(),actions:{move:R}}),move:R}}function P(){const k={moveUp:()=>E(YS),moveRight:()=>E(XS),moveDown:()=>E(QS),moveLeft:()=>E(JS)};return N({liftActionArgs:{id:i,clientSelection:L4(p),movementMode:"SNAP"},cleanup:eo,actions:k})}function I(){Ma({expected:"PRE_DRAG",phase:g,isLockActive:b,shouldWarn:!0})&&e.release()}return{isActive:()=>Ma({expected:"PRE_DRAG",phase:g,isLockActive:b,shouldWarn:!1}),shouldRespectForcePress:x,fluidLift:j,snapLift:P,abort:I}}const q4=[E4,I4,M4];function K4({contextId:e,store:n,registry:r,customSensors:s,enableDefaultSensors:i}){const a=[...i?q4:[],...s||[]],c=w.useState(()=>d4())[0],d=Ce(function(N,j){di(N)&&!di(j)&&c.tryAbandon()},[c]);En(function(){let N=n.getState();return n.subscribe(()=>{const P=n.getState();d(N,P),N=P})},[c,n,d]),En(()=>c.tryAbandon,[c.tryAbandon]);const h=Ce(E=>rx({lockAPI:c,registry:r,store:n,draggableId:E}),[c,r,n]),p=Ce((E,N,j)=>H4({lockAPI:c,registry:r,contextId:e,store:n,draggableId:E,forceSensorStop:N||null,sourceEvent:j&&j.sourceEvent?j.sourceEvent:null}),[e,c,r,n]),m=Ce(E=>V4(e,E),[e]),g=Ce(E=>{const N=r.draggable.findById(E);return N?N.options:null},[r.draggable]),x=Ce(function(){c.isClaimed()&&(c.tryAbandon(),n.getState().phase!=="IDLE"&&n.dispatch(of()))},[c,n]),b=Ce(()=>c.isClaimed(),[c]),S=Ge(()=>({canGetLock:h,tryGetLock:p,findClosestDraggableId:m,findOptionsForDraggable:g,tryReleaseLock:x,isLockClaimed:b}),[h,p,m,g,x,b]);for(let E=0;E<a.length;E++)a[E](S)}const Y4=e=>({onBeforeCapture:n=>{const r=()=>{e.onBeforeCapture&&e.onBeforeCapture(n)};Sr.flushSync(r)},onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragEnd:e.onDragEnd,onDragUpdate:e.onDragUpdate}),Q4=e=>({...ui,...e.autoScrollerOptions,durationDampening:{...ui.durationDampening,...e.autoScrollerOptions}});function Ks(e){return e.current||ue(),e.current}function X4(e){const{contextId:n,setCallbacks:r,sensors:s,nonce:i,dragHandleUsageInstructions:a}=e,c=w.useRef(null),d=Xv(e),h=Ce(()=>Y4(d.current),[d]),p=Ce(()=>Q4(d.current),[d]),m=a4(n),g=u4({contextId:n,text:a}),x=e4(n,i),b=Ce(J=>{Ks(c).dispatch(J)},[]),S=Ge(()=>Tg({publishWhileDragging:US,updateDroppableScroll:zS,updateDroppableIsEnabled:WS,updateDroppableIsCombineEnabled:HS,collectionStarting:VS},b),[b]),E=o4(),N=Ge(()=>TE(E,S),[E,S]),j=Ge(()=>YE({scrollWindow:RE,scrollDroppable:N.scrollDroppable,getAutoScrollerOptions:p,...Tg({move:_v},b)}),[N.scrollDroppable,b,p]),P=n4(n),I=Ge(()=>jE({announce:m,autoScroller:j,dimensionMarshal:N,focusMarshal:P,getResponders:h,styleMarshal:x}),[m,j,N,P,h,x]);c.current=I;const D=Ce(()=>{const J=Ks(c);J.getState().phase!=="IDLE"&&J.dispatch(of())},[]),k=Ce(()=>{const J=Ks(c).getState();return J.phase==="DROP_ANIMATING"?!0:J.phase==="IDLE"?!1:J.isDragging},[]),R=Ge(()=>({isDragging:k,tryAbort:D}),[k,D]);r(R);const O=Ce(J=>Wv(Ks(c).getState(),J),[]),M=Ce(()=>No(Ks(c).getState()),[]),q=Ge(()=>({marshal:N,focus:P,contextId:n,canLift:O,isMovementAllowed:M,dragHandleUsageInstructionsId:g,registry:E}),[n,N,g,P,O,M,E]);return K4({contextId:n,store:I,registry:E,customSensors:s||null,enableDefaultSensors:e.enableDefaultSensors!==!1}),w.useEffect(()=>D,[D]),ve.createElement(pl.Provider,{value:q},ve.createElement(N2,{context:ff,store:I},e.children))}function J4(){return ve.useId()}function ox(e){const n=J4(),r=e.dragHandleUsageInstructions||La.dragHandleUsageInstructions;return ve.createElement(I2,null,s=>ve.createElement(X4,{nonce:e.nonce,contextId:n,setCallbacks:s,dragHandleUsageInstructions:r,enableDefaultSensors:e.enableDefaultSensors,sensors:e.sensors,onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragUpdate:e.onDragUpdate,onDragEnd:e.onDragEnd,autoScrollerOptions:e.autoScrollerOptions},e.children))}const a0={dragging:5e3,dropAnimating:4500},Z4=(e,n)=>n?Xs.drop(n.duration):e?Xs.snap:Xs.fluid,e5=(e,n)=>{if(e)return n?ci.opacity.drop:ci.opacity.combining},t5=e=>e.forceShouldAnimate!=null?e.forceShouldAnimate:e.mode==="SNAP";function n5(e){const r=e.dimension.client,{offset:s,combineWith:i,dropping:a}=e,c=!!i,d=t5(e),h=!!a,p=h?Ed.drop(s,c):Ed.moveTo(s);return{position:"fixed",top:r.marginBox.top,left:r.marginBox.left,boxSizing:"border-box",width:r.borderBox.width,height:r.borderBox.height,transition:Z4(d,a),transform:p,opacity:e5(c,h),zIndex:h?a0.dropAnimating:a0.dragging,pointerEvents:"none"}}function r5(e){return{transform:Ed.moveTo(e.offset),transition:e.shouldAnimateDisplacement?void 0:"none"}}function o5(e){return e.type==="DRAGGING"?n5(e):r5(e)}function s5(e,n,r=Tt){const s=window.getComputedStyle(n),i=n.getBoundingClientRect(),a=uv(i,s),c=Ha(a,r),d={client:a,tagName:n.tagName.toLowerCase(),display:s.display},h={x:a.marginBox.width,y:a.marginBox.height};return{descriptor:e,placeholder:d,displaceBy:h,client:a,page:c}}function i5(e){const n=hf("draggable"),{descriptor:r,registry:s,getDraggableRef:i,canDragInteractiveElements:a,shouldRespectForcePress:c,isEnabled:d}=e,h=Ge(()=>({canDragInteractiveElements:a,shouldRespectForcePress:c,isEnabled:d}),[a,d,c]),p=Ce(b=>{const S=i();return S||ue(),s5(r,S,b)},[r,i]),m=Ge(()=>({uniqueId:n,descriptor:r,options:h,getDimension:p}),[r,p,h,n]),g=w.useRef(m),x=w.useRef(!0);En(()=>(s.draggable.register(g.current),()=>s.draggable.unregister(g.current)),[s.draggable]),En(()=>{if(x.current){x.current=!1;return}const b=g.current;g.current=m,s.draggable.update(m,b)},[m,s.draggable])}var mf=ve.createContext(null);function Ja(e){const n=w.useContext(e);return n||ue(),n}function a5(e){e.preventDefault()}const l5=e=>{const n=w.useRef(null),r=Ce((R=null)=>{n.current=R},[]),s=Ce(()=>n.current,[]),{contextId:i,dragHandleUsageInstructionsId:a,registry:c}=Ja(pl),{type:d,droppableId:h}=Ja(mf),p=Ge(()=>({id:e.draggableId,index:e.index,type:d,droppableId:h}),[e.draggableId,e.index,d,h]),{children:m,draggableId:g,isEnabled:x,shouldRespectForcePress:b,canDragInteractiveElements:S,isClone:E,mapped:N,dropAnimationFinished:j}=e;if(!E){const R=Ge(()=>({descriptor:p,registry:c,getDraggableRef:s,canDragInteractiveElements:S,shouldRespectForcePress:b,isEnabled:x}),[p,c,s,S,b,x]);i5(R)}const P=Ge(()=>x?{tabIndex:0,role:"button","aria-describedby":a,"data-rfd-drag-handle-draggable-id":g,"data-rfd-drag-handle-context-id":i,draggable:!1,onDragStart:a5}:null,[i,a,g,x]),I=Ce(R=>{N.type==="DRAGGING"&&N.dropping&&R.propertyName==="transform"&&Sr.flushSync(j)},[j,N]),D=Ge(()=>{const R=o5(N),O=N.type==="DRAGGING"&&N.dropping?I:void 0;return{innerRef:r,draggableProps:{"data-rfd-draggable-context-id":i,"data-rfd-draggable-id":g,style:R,onTransitionEnd:O},dragHandleProps:P}},[i,P,g,N,I,r]),k=Ge(()=>({draggableId:p.id,type:p.type,source:{index:p.index,droppableId:p.droppableId}}),[p.droppableId,p.id,p.index,p.type]);return ve.createElement(ve.Fragment,null,m(D,N.snapshot,k))};var sx=(e,n)=>e===n,ix=e=>{const{combine:n,destination:r}=e;return r?r.droppableId:n?n.droppableId:null};const c5=e=>e.combine?e.combine.draggableId:null,u5=e=>e.at&&e.at.type==="COMBINE"?e.at.combine.draggableId:null;function d5(){const e=Pt((i,a)=>({x:i,y:a})),n=Pt((i,a,c=null,d=null,h=null)=>({isDragging:!0,isClone:a,isDropAnimating:!!h,dropAnimation:h,mode:i,draggingOver:c,combineWith:d,combineTargetFor:null})),r=Pt((i,a,c,d,h=null,p=null,m=null)=>({mapped:{type:"DRAGGING",dropping:null,draggingOver:h,combineWith:p,mode:a,offset:i,dimension:c,forceShouldAnimate:m,snapshot:n(a,d,h,p,null)}}));return(i,a)=>{if(di(i)){if(i.critical.draggable.id!==a.draggableId)return null;const c=i.current.client.offset,d=i.dimensions.draggables[a.draggableId],h=Sn(i.impact),p=u5(i.impact),m=i.forceShouldAnimate;return r(e(c.x,c.y),i.movementMode,d,a.isClone,h,p,m)}if(i.phase==="DROP_ANIMATING"){const c=i.completed;if(c.result.draggableId!==a.draggableId)return null;const d=a.isClone,h=i.dimensions.draggables[a.draggableId],p=c.result,m=p.mode,g=ix(p),x=c5(p),S={duration:i.dropDuration,curve:af.drop,moveTo:i.newHomeClientOffset,opacity:x?ci.opacity.drop:null,scale:x?ci.scale.drop:null};return{mapped:{type:"DRAGGING",offset:i.newHomeClientOffset,dimension:h,dropping:S,draggingOver:g,combineWith:x,mode:m,forceShouldAnimate:null,snapshot:n(m,d,g,x,S)}}}return null}}function ax(e=null){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:e,combineWith:null}}const f5={mapped:{type:"SECONDARY",offset:Tt,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:ax(null)}};function h5(){const e=Pt((c,d)=>({x:c,y:d})),n=Pt(ax),r=Pt((c,d=null,h)=>({mapped:{type:"SECONDARY",offset:c,combineTargetFor:d,shouldAnimateDisplacement:h,snapshot:n(d)}})),s=c=>c?r(Tt,c,!0):null,i=(c,d,h,p)=>{const m=h.displaced.visible[c],g=!!(p.inVirtualList&&p.effected[c]),x=ul(h),b=x&&x.draggableId===c?d:null;if(!m){if(!g)return s(b);if(h.displaced.invisible[c])return null;const N=Jo(p.displacedBy.point),j=e(N.x,N.y);return r(j,b,!0)}if(g)return s(b);const S=h.displacedBy.point,E=e(S.x,S.y);return r(E,b,m.shouldAnimate)};return(c,d)=>{if(di(c))return c.critical.draggable.id===d.draggableId?null:i(d.draggableId,c.critical.draggable.id,c.impact,c.afterCritical);if(c.phase==="DROP_ANIMATING"){const h=c.completed;return h.result.draggableId===d.draggableId?null:i(d.draggableId,h.result.draggableId,h.impact,h.afterCritical)}return null}}const p5=()=>{const e=d5(),n=h5();return(s,i)=>e(s,i)||n(s,i)||f5},m5={dropAnimationFinished:Fv},g5=cv(p5,m5,null,{context:ff,areStatePropsEqual:sx})(l5);function lx(e){return Ja(mf).isUsingCloneFor===e.draggableId&&!e.isClone?null:ve.createElement(g5,e)}function cx(e){const n=typeof e.isDragDisabled=="boolean"?!e.isDragDisabled:!0,r=!!e.disableInteractiveElementBlocking,s=!!e.shouldRespectForcePress;return ve.createElement(lx,qa({},e,{isClone:!1,isEnabled:n,canDragInteractiveElements:r,shouldRespectForcePress:s}))}const ux=e=>n=>e===n,v5=ux("scroll"),x5=ux("auto"),l0=(e,n)=>n(e.overflowX)||n(e.overflowY),y5=e=>{const n=window.getComputedStyle(e),r={overflowX:n.overflowX,overflowY:n.overflowY};return l0(r,v5)||l0(r,x5)},b5=()=>!1,dx=e=>e==null?null:e===document.body?b5()?e:null:e===document.documentElement?null:y5(e)?e:dx(e.parentElement);var jd=e=>({x:e.scrollLeft,y:e.scrollTop});const fx=e=>e?window.getComputedStyle(e).position==="fixed"?!0:fx(e.parentElement):!1;var w5=e=>{const n=dx(e),r=fx(e);return{closestScrollable:n,isFixedOnPage:r}},N5=({descriptor:e,isEnabled:n,isCombineEnabled:r,isFixedOnPage:s,direction:i,client:a,page:c,closest:d})=>{const h=(()=>{if(!d)return null;const{scrollSize:x,client:b}=d,S=Uv({scrollHeight:x.scrollHeight,scrollWidth:x.scrollWidth,height:b.paddingBox.height,width:b.paddingBox.width});return{pageMarginBox:d.page.marginBox,frameClient:b,scrollSize:x,shouldClipSubject:d.shouldClipSubject,scroll:{initial:d.scroll,current:d.scroll,max:S,diff:{value:Tt,displacement:Tt}}}})(),p=i==="vertical"?Zd:wv,m=Yo({page:c,withPlaceholder:null,axis:p,frame:h});return{descriptor:e,isCombineEnabled:r,isFixedOnPage:s,axis:p,isEnabled:n,client:a,page:c,frame:h,subject:m}};const C5=(e,n)=>{const r=dv(e);if(!n||e!==n)return r;const s=r.paddingBox.top-n.scrollTop,i=r.paddingBox.left-n.scrollLeft,a=s+n.scrollHeight,c=i+n.scrollWidth,h=Yd({top:s,right:c,bottom:a,left:i},r.border);return Qd({borderBox:h,margin:r.margin,border:r.border,padding:r.padding})};var S5=({ref:e,descriptor:n,env:r,windowScroll:s,direction:i,isDropDisabled:a,isCombineEnabled:c,shouldClipSubject:d})=>{const h=r.closestScrollable,p=C5(e,h),m=Ha(p,s),g=(()=>{if(!h)return null;const b=dv(h),S={scrollHeight:h.scrollHeight,scrollWidth:h.scrollWidth};return{client:b,page:Ha(b,s),scroll:jd(h),scrollSize:S,shouldClipSubject:d}})();return N5({descriptor:n,isEnabled:!a,isCombineEnabled:c,isFixedOnPage:r.isFixedOnPage,direction:i,client:p,page:m,closest:g})};const E5={passive:!1},D5={passive:!0};var c0=e=>e.shouldPublishImmediately?E5:D5;const Oa=e=>e&&e.env.closestScrollable||null;function A5(e){const n=w.useRef(null),r=Ja(pl),s=hf("droppable"),{registry:i,marshal:a}=r,c=Xv(e),d=Ge(()=>({id:e.droppableId,type:e.type,mode:e.mode}),[e.droppableId,e.mode,e.type]),h=w.useRef(d),p=Ge(()=>Pt((D,k)=>{n.current||ue();const R={x:D,y:k};a.updateDroppableScroll(d.id,R)}),[d.id,a]),m=Ce(()=>{const D=n.current;return!D||!D.env.closestScrollable?Tt:jd(D.env.closestScrollable)},[]),g=Ce(()=>{const D=m();p(D.x,D.y)},[m,p]),x=Ge(()=>si(g),[g]),b=Ce(()=>{const D=n.current,k=Oa(D);if(D&&k||ue(),D.scrollOptions.shouldPublishImmediately){g();return}x()},[x,g]),S=Ce((D,k)=>{n.current&&ue();const R=c.current,O=R.getDroppableRef();O||ue();const M=w5(O),q={ref:O,descriptor:d,env:M,scrollOptions:k};n.current=q;const J=S5({ref:O,descriptor:d,env:M,windowScroll:D,direction:R.direction,isDropDisabled:R.isDropDisabled,isCombineEnabled:R.isCombineEnabled,shouldClipSubject:!R.ignoreContainerClipping}),ie=M.closestScrollable;return ie&&(ie.setAttribute(r0.contextId,r.contextId),ie.addEventListener("scroll",b,c0(q.scrollOptions))),J},[r.contextId,d,b,c]),E=Ce(()=>{const D=n.current,k=Oa(D);return D&&k||ue(),jd(k)},[]),N=Ce(()=>{const D=n.current;D||ue();const k=Oa(D);n.current=null,k&&(x.cancel(),k.removeAttribute(r0.contextId),k.removeEventListener("scroll",b,c0(D.scrollOptions)))},[b,x]),j=Ce(D=>{const k=n.current;k||ue();const R=Oa(k);R||ue(),R.scrollTop+=D.y,R.scrollLeft+=D.x},[]),P=Ge(()=>({getDimensionAndWatchScroll:S,getScrollWhileDragging:E,dragStopped:N,scroll:j}),[N,S,E,j]),I=Ge(()=>({uniqueId:s,descriptor:d,callbacks:P}),[P,d,s]);En(()=>(h.current=I.descriptor,i.droppable.register(I),()=>{n.current&&N(),i.droppable.unregister(I)}),[P,d,N,I,a,i.droppable]),En(()=>{n.current&&a.updateDroppableIsEnabled(h.current.id,!e.isDropDisabled)},[e.isDropDisabled,a]),En(()=>{n.current&&a.updateDroppableIsCombineEnabled(h.current.id,e.isCombineEnabled)},[e.isCombineEnabled,a])}function rd(){}const u0={width:0,height:0,margin:_2},j5=({isAnimatingOpenOnMount:e,placeholder:n,animate:r})=>e||r==="close"?u0:{height:n.client.borderBox.height,width:n.client.borderBox.width,margin:n.client.margin},I5=({isAnimatingOpenOnMount:e,placeholder:n,animate:r})=>{const s=j5({isAnimatingOpenOnMount:e,placeholder:n,animate:r});return{display:n.display,boxSizing:"border-box",width:s.width,height:s.height,marginTop:s.margin.top,marginRight:s.margin.right,marginBottom:s.margin.bottom,marginLeft:s.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:r!=="none"?Xs.placeholder:null}},k5=e=>{const n=w.useRef(null),r=Ce(()=>{n.current&&(clearTimeout(n.current),n.current=null)},[]),{animate:s,onTransitionEnd:i,onClose:a,contextId:c}=e,[d,h]=w.useState(e.animate==="open");w.useEffect(()=>d?s!=="open"?(r(),h(!1),rd):n.current?rd:(n.current=setTimeout(()=>{n.current=null,h(!1)}),r):rd,[s,d,r]);const p=Ce(g=>{g.propertyName==="height"&&(i(),s==="close"&&a())},[s,a,i]),m=I5({isAnimatingOpenOnMount:d,animate:e.animate,placeholder:e.placeholder});return ve.createElement(e.placeholder.tagName,{style:m,"data-rfd-placeholder-context-id":c,onTransitionEnd:p,ref:e.innerRef})};var P5=ve.memo(k5);class T5 extends ve.PureComponent{constructor(...n){super(...n),this.state={isVisible:!!this.props.on,data:this.props.on,animate:this.props.shouldAnimate&&this.props.on?"open":"none"},this.onClose=()=>{this.state.animate==="close"&&this.setState({isVisible:!1})}}static getDerivedStateFromProps(n,r){return n.shouldAnimate?n.on?{isVisible:!0,data:n.on,animate:"open"}:r.isVisible?{isVisible:!0,data:r.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!n.on,data:n.on,animate:"none"}}render(){if(!this.state.isVisible)return null;const n={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(n)}}const R5=e=>{const n=w.useContext(pl);n||ue();const{contextId:r,isMovementAllowed:s}=n,i=w.useRef(null),a=w.useRef(null),{children:c,droppableId:d,type:h,mode:p,direction:m,ignoreContainerClipping:g,isDropDisabled:x,isCombineEnabled:b,snapshot:S,useClone:E,updateViewportMaxScroll:N,getContainerForClone:j}=e,P=Ce(()=>i.current,[]),I=Ce((ie=null)=>{i.current=ie},[]);Ce(()=>a.current,[]);const D=Ce((ie=null)=>{a.current=ie},[]),k=Ce(()=>{s()&&N({maxScroll:zv()})},[s,N]);A5({droppableId:d,type:h,mode:p,direction:m,isDropDisabled:x,isCombineEnabled:b,ignoreContainerClipping:g,getDroppableRef:P});const R=Ge(()=>ve.createElement(T5,{on:e.placeholder,shouldAnimate:e.shouldAnimatePlaceholder},({onClose:ie,data:Y,animate:W})=>ve.createElement(P5,{placeholder:Y,onClose:ie,innerRef:D,animate:W,contextId:r,onTransitionEnd:k})),[r,k,e.placeholder,e.shouldAnimatePlaceholder,D]),O=Ge(()=>({innerRef:I,placeholder:R,droppableProps:{"data-rfd-droppable-id":d,"data-rfd-droppable-context-id":r}}),[r,d,R,I]),M=E?E.dragging.draggableId:null,q=Ge(()=>({droppableId:d,type:h,isUsingCloneFor:M}),[d,M,h]);function J(){if(!E)return null;const{dragging:ie,render:Y}=E,W=ve.createElement(lx,{draggableId:ie.draggableId,index:ie.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},(re,ae)=>Y(re,ae,ie));return tC.createPortal(W,j())}return ve.createElement(mf.Provider,{value:q},c(O,S),J())};function M5(){return document.body||ue(),document.body}const d0={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:M5},hx=e=>{let n={...e},r;for(r in d0)e[r]===void 0&&(n={...n,[r]:d0[r]});return n},od=(e,n)=>e===n.droppable.type,f0=(e,n)=>n.draggables[e.draggable.id],O5=()=>{const e={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},n={...e,shouldAnimatePlaceholder:!1},r=Pt(a=>({draggableId:a.id,type:a.type,source:{index:a.index,droppableId:a.droppableId}})),s=Pt((a,c,d,h,p,m)=>{const g=p.descriptor.id;if(p.descriptor.droppableId===a){const S=m?{render:m,dragging:r(p.descriptor)}:null,E={isDraggingOver:d,draggingOverWith:d?g:null,draggingFromThisWith:g,isUsingPlaceholder:!0};return{placeholder:p.placeholder,shouldAnimatePlaceholder:!1,snapshot:E,useClone:S}}if(!c)return n;if(!h)return e;const b={isDraggingOver:d,draggingOverWith:g,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:p.placeholder,shouldAnimatePlaceholder:!0,snapshot:b,useClone:null}});return(a,c)=>{const d=hx(c),h=d.droppableId,p=d.type,m=!d.isDropDisabled,g=d.renderClone;if(di(a)){const x=a.critical;if(!od(p,x))return n;const b=f0(x,a.dimensions),S=Sn(a.impact)===h;return s(h,m,S,S,b,g)}if(a.phase==="DROP_ANIMATING"){const x=a.completed;if(!od(p,x.critical))return n;const b=f0(x.critical,a.dimensions);return s(h,m,ix(x.result)===h,Sn(x.impact)===h,b,g)}if(a.phase==="IDLE"&&a.completed&&!a.shouldFlush){const x=a.completed;if(!od(p,x.critical))return n;const b=Sn(x.impact)===h,S=!!(x.impact.at&&x.impact.at.type==="COMBINE"),E=x.critical.droppable.id===h;return b?S?e:n:E?e:n}return n}},_5={updateViewportMaxScroll:KS},px=cv(O5,_5,(e,n,r)=>({...hx(r),...e,...n}),{context:ff,areStatePropsEqual:sx})(R5),Nn=e=>e.split(",").map(n=>n.trim()),Nr=e=>e.join(", "),Fa=e=>e.trim()?/^[a-gA-G](##|#|bb|b)?(\d+)?$/.test(e.trim()):!0,h0=e=>{if(!e.trim())return e;const n=e.trim();if(!Fa(n))return n;const r=n.match(/^([a-gA-G])(##|#|bb|b)?(\d*)$/);if(r){const[,s,i="",a]=r;return s.toUpperCase()+i.toLowerCase()+a}return n},L5=e=>{const n={C:0,"C#":1,Db:1,D:2,"D#":3,Eb:3,E:4,"E#":5,Fb:4,F:5,"F#":6,Gb:6,G:7,"G#":8,Ab:8,A:9,"A#":10,Bb:10,B:11,"B#":0,Cb:11},r=e.match(/^([A-Ga-g])(##|#|bb|b)?/);if(!r)return null;const[,s,i=""]=r,a=s.toUpperCase()+i.toLowerCase();return n[a]??null},p0=e=>Nn(e).map(r=>L5(r)).filter(r=>r!==null),F5=(e,n)=>{const r=new Set(e),s=new Set(n);let i=0;for(const a of r)s.has(a)&&i++;return i},B5=({chords:e,onUpdateChord:n,onFetchOriginalChord:r,onChordClick:s})=>{const[i,a]=w.useState(null),[c,d]=w.useState(null),[h,p]=w.useState(""),[m,g]=w.useState(""),[x,b]=w.useState(""),S=async Y=>{const W=Y.name.replace(/\/[A-G](##|#|bb|b)?\d*/,"");console.log("Looking for base chord:",W);const re=await Jr.getAllDistinctChords();if(re){const ae=re.filter(ce=>ce.chordName===W);if(ae.length===0)console.log("No matches found in library for:",W);else{console.log(`Found ${ae.length} chord(s) with name "${W}", comparing notes to find best match...`);const ce=p0(Y.originalNotes||Y.notes);console.log("Current chord note numbers:",ce,"from:",Y.originalNotes||Y.notes);let ee=ae[0],Q=0;for(const V of ae)if(V.chordNoteNames){const F=p0(V.chordNoteNames),A=F5(ce,F);console.log(`  - Candidate notes: ${V.chordNoteNames} (note numbers: ${F}) - ${A} shared notes`),A>Q&&(Q=A,ee=V)}if(ee?.chordNoteNames&&Q>0)return console.log(` Best match selected (${Q} shared notes):`,ee.chordNoteNames),ee.chordNoteNames;console.warn(` No good match found (max shared notes: ${Q})`)}}if(Y.originalKey&&Y.originalMode&&r)try{console.log("Fetching base chord",W,"from API");const ae=await r(W,Y.originalKey,Y.originalMode);if(ae)return console.log("Fetched base chord from API:",ae),ae}catch(ae){console.warn("Failed to fetch base chord from API:",ae)}return console.warn("Could not find base chord definition for:",W),null},E=async()=>{if(p(""),b(""),!!c)try{const Y=await S(c);if(Y)if(Nn(Y).every(ce=>/^[A-Ga-g]/.test(ce.trim())&&Fa(ce.trim()))){console.log("Reverting to base chord notes:",Y),d({...c,notes:Y});return}else console.warn("Base chord notes are in invalid format:",Y);const W=Nn(c.notes);if(W.length>1){const re=W[0],ae=h.replace(/\d+/,"");if(re.replace(/\d+/,"")===ae){const ee=W.slice(1),Q=Nr(ee);console.log("Removing slash note manually, result:",Q),d({...c,notes:Q});return}}console.warn("Could not revert slash note - no base chord found and no obvious slash note to remove")}catch(Y){console.error("Error removing slash note:",Y)}},N=Y=>{if(!h.trim()||!m)return!1;const W=Y.replace(/\d+/,""),re=h.trim().replace(/\d+/,"");return W===re?!Nn(m).some(ee=>ee.replace(/\d+/,"")===re):!1},j=async(Y,W)=>{a(Y),d({...W});try{const ae=await S(W);g(ae||W.notes)}catch(ae){console.warn("Failed to load original chord, using current notes:",ae),g(W.originalNotes||W.notes)}const re=W.name.match(/\/([A-G](##|#|bb|b)?\d*)/);p(re?re[1]:"")},P=()=>{if(i!==null&&c&&n){if(x)return;let Y=c.name.replace(/\/[A-G](##|#|bb|b)?\d*/,""),W=c.notes;if(h.trim()){Y+=`/${h.trim()}`;const ae=Nn(W),ce=h.trim();if(ae.some(Q=>{const V=Q.replace(/\d+/,""),F=ce.replace(/\d+/,"");return V===F})){const Q=ae.filter(F=>{const A=F.replace(/\d+/,""),_=ce.replace(/\d+/,"");return A!==_}),V=[ce,...Q];W=Nr(V)}else{const Q=[ce,...ae];W=Nr(Q)}}const re={...c,name:Y,notes:W,originalNotes:c.originalNotes||m};n(i,re)}I()},I=()=>{a(null),d(null),p(""),g(""),b("")},D=async Y=>{if(!c||Y===0)return;const W=Nn(c.notes);Y===1&&N(W[0])||([W[Y],W[Y-1]]=[W[Y-1],W[Y]],d({...c,notes:Nr(W)}),await O(W))},k=async Y=>{if(!c)return;const W=Nn(c.notes);Y!==W.length-1&&(Y===0&&N(W[0])||([W[Y],W[Y+1]]=[W[Y+1],W[Y]],d({...c,notes:Nr(W)}),await O(W)))},R=async Y=>{if(c)try{const re=await S(c)||c.originalNotes||m;if(!re)return;if(!Y.trim()){d({...c,notes:re});return}const ae=Nn(re),ce=Y.trim(),ee=ae.some(V=>{const F=V.replace(/\d+/,""),A=ce.replace(/\d+/,"");return F===A});let Q;if(ee){const V=ae.filter(A=>{const _=A.replace(/\d+/,""),Z=ce.replace(/\d+/,"");return _!==Z}),F=ae.find(A=>{const _=A.replace(/\d+/,""),Z=ce.replace(/\d+/,"");return _===Z});Q=F?[F,...V]:[ce,...V]}else Q=[ce,...ae];d({...c,notes:Nr(Q)})}catch(W){console.warn("Failed to update chord with slash note:",W);const re=c.originalNotes||m;if(!re)return;if(!Y.trim()){d({...c,notes:re});return}const ae=Nn(re),ee=[Y.trim(),...ae];d({...c,notes:Nr(ee)})}},O=async Y=>{if(!(!c||Y.length===0))try{const re=await S(c)||c.originalNotes||m;if(!re)return;const ae=Nn(re),ce=Y[0],ee=ae[0];p(ce!==ee?ce:"")}catch(W){console.warn("Failed to detect slash note from order:",W);const re=c.originalNotes||m;if(!re)return;const ae=Nn(re),ce=Y[0],ee=ae[0];p(ce!==ee?ce:"")}};return{editingChordIndex:i,editingChord:c,slashNote:h,originalChordNotes:m,slashNoteError:x,handleEditChord:j,handleSaveEdit:P,handleCancelEdit:I,moveNoteUp:D,moveNoteDown:k,removeSlashNote:E,handleSlashNoteChange:async Y=>{const W=Y.trim();if(!W){b(""),p(""),await R("");return}if(!Fa(W)){b("Invalid note. Use A-G with optional # or b (e.g., C, F#, Bb, D4)"),p(Y);return}b("");const re=h0(W);p(re),await R(re)},handleDragEnd:async Y=>{if(!Y.destination||!c||Y.source.index===Y.destination.index)return;const W=Nn(c.notes);if(Y.source.index===0&&N(W[0])||Y.destination.index===0&&N(W[0]))return;const[re]=W.splice(Y.source.index,1);W.splice(Y.destination.index,0,re),d({...c,notes:Nr(W)}),await O(W)},handlePreviewChord:()=>{c&&s(c.notes,-1)},isSlashNote:Y=>{if(!h.trim())return!1;const W=Y.replace(/\d+/,""),re=h.trim().replace(/\d+/,"");return W===re},isManualSlashNote:N,parseNotes:Nn,notesToString:Nr,formatNoteName:h0,isValidNoteName:Fa}},$5=4,G5=8,U5=({activeMidiNotes:e})=>{const n=ve.useRef(null),[r,s]=ve.useState(400),i=ve.useMemo(()=>r<400?Math.max(300,r-20):r<768?Math.min(500,r-40):Math.min(600,r-60),[r]);ve.useEffect(()=>{const p=()=>{n.current&&s(n.current.offsetWidth)};p();const m=new ResizeObserver(()=>{p()});return n.current&&m.observe(n.current),()=>{m.disconnect()}},[]),ve.useEffect(()=>{const p=document.createElement("style");return p.textContent=`
            /* Disable all pointer events on piano keys to prevent hover/click interference */
            .ReactPiano__Key {
                pointer-events: none !important;
            }
            
            /* Ultra-specific CSS to override react-piano styles */
            div[class*="ReactPiano"] .ReactPiano__Key--active,
            div[class*="ReactPiano"] .ReactPiano__Key--active.ReactPiano__Key--natural,
            div[class*="ReactPiano"] .ReactPiano__Key--active.ReactPiano__Key--accidental,
            .ReactPiano__Key--active[class*="ReactPiano__Key"],
            .ReactPiano__Key--active[class*="ReactPiano__Key"]:hover,
            .ReactPiano__Key--active[class*="ReactPiano__Key"]:active,
            .ReactPiano__Key--active[class*="ReactPiano__Key"]:focus {
                background: #3b82f6 !important;
                background-color: #3b82f6 !important;
                background-image: none !important;
                color: white !important;
                border-color: #2563eb !important;
                border-top-color: #2563eb !important;
                border-left-color: #2563eb !important;
                border-right-color: #2563eb !important;
                border-bottom-color: #2563eb !important;
                box-shadow: none !important;
                transition: none !important;
            }
            
            /* Force natural (white) keys to stay blue */
            div[class*="ReactPiano"] .ReactPiano__Key--active.ReactPiano__Key--natural,
            .ReactPiano__Key--active.ReactPiano__Key--natural[class*="ReactPiano__Key"],
            .ReactPiano__Key--active.ReactPiano__Key--natural[class*="ReactPiano__Key"]:hover,
            .ReactPiano__Key--active.ReactPiano__Key--natural[class*="ReactPiano__Key"]:active,
            .ReactPiano__Key--active.ReactPiano__Key--natural[class*="ReactPiano__Key"]:focus {
                background: linear-gradient(to bottom, #3b82f6 0%, #2563eb 100%) !important;
                background-color: #3b82f6 !important;
                color: white !important;
                border-top: 1px solid #2563eb !important;
                border-left: 1px solid #2563eb !important;
                border-right: 1px solid #2563eb !important;
                border-bottom: 1px solid #1e40af !important;
                box-shadow: 
                    inset 0 0 0 1px rgba(37, 99, 235, 0.3),
                    inset 0 -3px 6px rgba(0,0,0,0.1) !important;
            }
            
            /* Force accidental (black) keys to stay blue */
            div[class*="ReactPiano"] .ReactPiano__Key--active.ReactPiano__Key--accidental,
            .ReactPiano__Key--active.ReactPiano__Key--accidental[class*="ReactPiano__Key"],
            .ReactPiano__Key--active.ReactPiano__Key--accidental[class*="ReactPiano__Key"]:hover,
            .ReactPiano__Key--active.ReactPiano__Key--accidental[class*="ReactPiano__Key"]:active,
            .ReactPiano__Key--active.ReactPiano__Key--accidental[class*="ReactPiano__Key"]:focus {
                background: linear-gradient(to bottom, #1d4ed8 0%, #1e40af 100%) !important;
                background-color: #1d4ed8 !important;
                color: white !important;
                border: 1px solid #1e40af !important;
                box-shadow: 
                    inset 0 0 0 1px rgba(30, 64, 175, 0.4),
                    inset 0 -2px 4px rgba(0,0,0,0.2) !important;
            }
            
            /* Override any CSS animations or transitions */
            .ReactPiano__Key--active * {
                transition: none !important;
                animation: none !important;
            }
            
            /* Nuclear option - override any inline styles that might be applied */
            .ReactPiano__Key--active[style] {
                background: #3b82f6 !important;
                background-color: #3b82f6 !important;
            }
            
            .ReactPiano__Key--active.ReactPiano__Key--natural[style] {
                background: linear-gradient(to bottom, #3b82f6 0%, #2563eb 100%) !important;
            }
            
            .ReactPiano__Key--active.ReactPiano__Key--accidental[style] {
                background: linear-gradient(to bottom, #1d4ed8 0%, #1e40af 100%) !important;
            }
        `,document.head.appendChild(p),()=>{document.head.removeChild(p)}},[]);const a=4,c=7,d=hn.fromNote(`c${a}`),h=hn.fromNote(`c${c}`);return u.jsx("div",{ref:n,className:"w-full",children:u.jsx(Gd,{noteRange:{first:d,last:h},playNote:()=>{},stopNote:()=>{},disabled:!1,width:i,activeNotes:e,className:"mx-auto"})})},V5=({editingChordIndex:e,editingChord:n,totalChords:r,chords:s,onUpdateChord:i,onFetchOriginalChord:a,onChordClick:c,onClose:d,onNavigateToChord:h})=>{const{editingChord:p,slashNote:m,slashNoteError:g,handleEditChord:x,handleSaveEdit:b,handleCancelEdit:S,moveNoteUp:E,moveNoteDown:N,removeSlashNote:j,handleSlashNoteChange:P,handleDragEnd:I,handlePreviewChord:D,isSlashNote:k,isManualSlashNote:R,parseNotes:O}=B5({chords:s,onUpdateChord:i,onFetchOriginalChord:a,onChordClick:c});ve.useEffect(()=>{x(e,n)},[e,n]);const M=()=>{b(),d()},q=()=>{S(),d()},J=()=>{e>0&&h&&h(e-1)},ie=()=>{e<r-1&&h&&h(e+1)},Y=ve.useMemo(()=>{if(!p?.notes)return[];try{return Va($5,G5,p.notes).map(({note:ee,octave:Q})=>{try{return hn.fromNote(`${ee}${Q}`)}catch(V){return console.warn(`Failed to parse note: ${ee}${Q}`,V),null}}).filter(Boolean)}catch(ce){return console.warn("Failed to parse chord notes:",ce),[]}},[p?.notes]);if(!p)return null;const W=O(p.notes),re=e>0,ae=e<r-1;return u.jsxs("div",{className:"fixed inset-0 bg-[#1a1e24] bg-opacity-95 backdrop-blur-sm z-50 flex flex-col",children:[u.jsxs("div",{className:"flex-shrink-0 max-w-4xl mx-auto px-4 py-4 w-full",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsxs("div",{className:"flex items-center space-x-2 flex-1 min-w-0",children:[u.jsxs("h2",{className:"text-lg sm:text-xl font-bold text-white truncate",children:["Edit: ",p.name.replace(/\/[A-G](##|#|bb|b)?\d*/,"")]}),u.jsxs("span",{className:"px-2 py-1 text-xs bg-slate-700 text-slate-300 rounded font-mono flex-shrink-0",children:[e+1," / ",r]})]}),u.jsxs("div",{className:"flex items-center space-x-2 flex-shrink-0",children:[u.jsxs(cr,{onClick:M,variant:"primary",size:"sm",disabled:!!g,className:Bt("bg-green-600 hover:bg-green-700",g&&"opacity-50 cursor-not-allowed"),title:g?"Fix slash note error before saving":"Save changes",children:[u.jsx(bw,{className:"w-4 h-4 sm:mr-1"}),u.jsx("span",{className:"hidden sm:inline",children:"Save"})]}),u.jsxs(cr,{onClick:q,variant:"secondary",size:"sm",children:[u.jsx("span",{className:"hidden sm:inline",children:"Cancel"}),u.jsx("span",{className:"sm:hidden",children:""})]})]})]}),u.jsx("div",{className:"flex items-center",children:h&&u.jsxs("div",{className:"flex items-center space-x-1",children:[u.jsx(cr,{onClick:J,variant:"secondary",size:"sm",disabled:!re,title:"Previous chord",className:"px-2",children:u.jsx(Cw,{className:"w-4 h-4"})}),u.jsx(cr,{onClick:ie,variant:"secondary",size:"sm",disabled:!ae,title:"Next chord",className:"px-2",children:u.jsx(B0,{className:"w-4 h-4"})})]})}),u.jsxs("div",{className:"p-3 bg-[#2a2f38] rounded-lg border border-gray-600 mb-4 mt-4",children:[u.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Slash Note (Bass Note)"}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("input",{type:"text",value:m,onChange:ce=>P(ce.target.value),onBlur:ce=>P(ce.target.value),onKeyDown:ce=>{ce.key==="Enter"&&P(ce.currentTarget.value)},placeholder:"e.g., C4, F#, Bb3",className:Bt("flex-1 px-3 py-2 bg-[#1a1e24] border rounded text-white placeholder-gray-400 focus:outline-none transition-colors text-sm",g?"border-red-500 focus:border-red-400":"border-gray-600 focus:border-blue-500")}),m.trim()&&!g&&u.jsx("button",{onClick:j,className:"p-2 text-red-400 hover:text-red-300 hover:bg-red-500/10 rounded transition-colors",title:"Remove slash note",children:u.jsx(gd,{className:"w-4 h-4"})})]}),g?u.jsxs("p",{className:"text-xs text-red-400 mt-1 flex items-center space-x-1",children:[u.jsx(gd,{className:"w-3 h-3 flex-shrink-0"}),u.jsx("span",{children:g})]}):u.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Add bass note (e.g., Cmaj7/E)"}),W.length>0&&R(W[0])&&!g&&u.jsx("div",{className:"mt-2 p-2 bg-amber-500/10 border border-amber-500/30 rounded text-xs text-amber-300",children:u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx(Pm,{className:"w-3 h-3"}),u.jsx("span",{children:"Slash note locked in first position"})]})})]}),u.jsx("div",{className:"bg-[#2a2f38] rounded-lg border border-gray-600 p-3 mb-4",children:u.jsx("div",{className:"bg-[#1a1e24] rounded p-2 flex justify-center overflow-x-auto",children:u.jsx(U5,{activeMidiNotes:Y})})})]}),u.jsx("div",{className:"flex-1 max-w-4xl mx-auto px-4 w-full overflow-hidden flex flex-col -mt-4",children:u.jsxs("div",{className:"bg-[#2a2f38] rounded-lg border border-gray-600 p-4 flex-1 flex flex-col min-h-0",children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsxs(cr,{onClick:D,variant:"secondary",size:"sm",className:"bg-blue-600 hover:bg-blue-700 text-white",title:"Preview chord",children:[u.jsx($0,{className:"w-4 h-4 sm:mr-1"}),u.jsx("span",{className:"hidden sm:inline",children:"Preview"})]}),u.jsxs("div",{className:"flex-1 text-center mx-4",children:[u.jsx("h3",{className:"text-lg font-medium text-white leading-tight",children:"Chord Notes"}),u.jsx("p",{className:"text-xs text-gray-400 leading-tight",children:"Drag to reorder"})]}),u.jsx("div",{className:"w-16 sm:w-20"})," "]}),u.jsx("div",{className:"flex-1 min-h-0",children:u.jsx(ox,{onDragEnd:I,children:u.jsx(px,{droppableId:"notes-list",children:(ce,ee)=>u.jsxs("div",{...ce.droppableProps,ref:ce.innerRef,className:Bt("space-y-3 transition-colors duration-200 overflow-y-auto h-full",{"bg-blue-500/5 rounded-lg p-2":ee.isDraggingOver}),children:[W.map((Q,V)=>{const F=k(Q),_=R(Q)&&V===0;return u.jsx(cx,{draggableId:`${Q}-${V}`,index:V,isDragDisabled:_,children:(Z,oe)=>u.jsxs("div",{ref:Z.innerRef,...Z.draggableProps,...Z.dragHandleProps,className:Bt("flex items-center space-x-3 p-3 rounded border transition-all duration-200",{"shadow-lg shadow-blue-500/20 border-blue-500 transform scale-105":oe.isDragging,"cursor-grab":!oe.isDragging&&!_,"cursor-grabbing":oe.isDragging,"cursor-not-allowed":_,"bg-amber-500/10 border-amber-500/50":F&&!oe.isDragging,"hover:border-amber-400/70":F&&!oe.isDragging,"bg-amber-600/15 border-amber-600/60":_&&!oe.isDragging,"bg-[#1a1e24] border-gray-600":!F&&!_&&!oe.isDragging,"hover:border-gray-500":!F&&!_&&!oe.isDragging}),style:Z.draggableProps.style,children:[u.jsxs("div",{className:"flex-1 text-left",children:[u.jsxs("div",{className:"flex items-center justify-between mb-1",children:[u.jsx("span",{className:"text-white font-mono text-lg font-semibold",children:Q}),u.jsxs("div",{className:"flex items-center space-x-2",children:[F&&u.jsx("span",{className:"px-2 py-1 text-xs bg-amber-500/20 text-amber-300 rounded border border-amber-500/30 font-medium",children:"SLASH"}),_&&u.jsxs("span",{className:"px-2 py-1 text-xs bg-amber-600/20 text-amber-200 rounded border border-amber-600/30 font-medium flex items-center space-x-1",children:[u.jsx(Pm,{className:"w-3 h-3"}),u.jsx("span",{children:"LOCKED"})]})]})]}),u.jsxs("div",{className:"text-xs text-slate-400 font-medium",children:["Note ",V+1]})]}),u.jsxs("div",{className:"flex items-center space-x-1",children:[u.jsx("span",{className:"text-xs text-slate-400 mr-2",children:"Order:"}),u.jsx("button",{onClick:fe=>{fe.stopPropagation(),E(V)},disabled:V===0||_||V===1&&R(W[0]),className:"p-1 text-slate-300 hover:text-white hover:bg-[#4a5262] rounded transition-colors disabled:opacity-30 disabled:cursor-not-allowed",title:_?"Cannot move locked slash note":V===1&&R(W[0])?"Cannot move past locked slash note":"Move up",children:u.jsx(ni,{className:"w-4 h-4"})}),u.jsx("button",{onClick:fe=>{fe.stopPropagation(),N(V)},disabled:V===W.length-1||_,className:"p-1 text-slate-300 hover:text-white hover:bg-[#4a5262] rounded transition-colors disabled:opacity-30 disabled:cursor-not-allowed",title:_?"Cannot move locked slash note":"Move down",children:u.jsx(Co,{className:"w-4 h-4"})})]})]})},`${Q}-${V}`)}),ce.placeholder]})})})})]})}),u.jsx("div",{className:"flex-shrink-0 h-4"})]})},z5=4,W5=7,H5=({musicStore:e,playbackStore:n,patternStore:r,uiStore:s,setEditingChordIndex:i})=>{const[a,c]=w.useState(!1),[d,h]=w.useState(!1),p=w.useRef(null);w.useEffect(()=>{const I=()=>{const D=window.innerHeight,k=parseFloat(getComputedStyle(document.documentElement).fontSize);h(D<35*k)};return I(),window.addEventListener("resize",I,{passive:!0}),window.addEventListener("orientationchange",I,{passive:!0}),()=>{window.removeEventListener("resize",I),window.removeEventListener("orientationchange",I)}},[]),w.useEffect(()=>{const{isLiveMode:I}=s;if(I){const D=document.body.style.overflow,k=document.body.style.overscrollBehavior,R=document.body.style.touchAction;document.body.style.overflow="hidden",document.body.style.overscrollBehavior="none",document.body.style.touchAction="none";const O=()=>{setTimeout(()=>{if(p.current&&I&&!a){const M=p.current;M.style.overflowY="hidden",M.style.touchAction="pan-y",M.offsetHeight,M.style.overflowY="auto",M.style.WebkitOverflowScrolling="touch"}},300)};return window.addEventListener("orientationchange",O),()=>{document.body.style.overflow=D,document.body.style.overscrollBehavior=k,document.body.style.touchAction=R,window.removeEventListener("orientationchange",O)}}},[s.isLiveMode,a]),w.useEffect(()=>{const I=()=>/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||"ontouchstart"in window||navigator.maxTouchPoints>0;if(p.current&&s.isLiveMode){const D=p.current;a?I()?(D.style.touchAction="pan-y",D.style.overflowY="auto",D.style.WebkitOverflowScrolling="auto"):(D.style.removeProperty("touchAction"),D.style.overflowY="auto",D.style.WebkitOverflowScrolling="touch"):(D.style.overflowY="auto",D.style.touchAction="pan-y",D.style.WebkitOverflowScrolling="touch")}},[a,s.isLiveMode]);const m=w.useCallback((I,D,k)=>{if(s.isDeleteMode&&D!==void 0){n.removeChord(D);return}const R=Va(z5,W5,I);D!==void 0?(n.setTemporaryChord(null),n.setActiveChordIndex(D),r.globalPatternState.isPlaying||n.playNotes(R),n.setHighlightedChordIndex(D),setTimeout(()=>n.setHighlightedChordIndex(null),150)):(k&&n.setTemporaryChord({name:k,notes:I}),r.globalPatternState.isPlaying||n.playNotes(R))},[s.isDeleteMode,r.globalPatternState.isPlaying,n]),g=w.useCallback(()=>{n.clearAllChords(),r.setGlobalPatternState({isPlaying:!1}),s.setIsLiveMode(!1)},[n,r,s]),x=w.useCallback(()=>{r.setGlobalPatternState({isPlaying:!r.globalPatternState.isPlaying})},[r]),b=w.useCallback(()=>{s.setIsDeleteMode(!s.isDeleteMode)},[s]),S=w.useCallback(()=>{s.setIsLiveMode(!s.isLiveMode)},[s]),E=w.useCallback((I,D)=>{const k={name:D.name,notes:D.notes,pattern:D.pattern||["1","2","3","4"],originalKey:D.originalKey||e.key,originalMode:D.originalMode||e.mode,originalNotes:D.originalNotes||D.notes};n.updateChord(I,k)},[e,n]),N=w.useCallback(I=>{i(I)},[i]),j=w.useCallback(()=>{i(null)},[i]),P=w.useCallback(I=>{I>=0&&I<n.addedChords.length&&i(I)},[n.addedChords.length,i]);return{isEditMode:a,setIsEditMode:c,isCompactHeight:d,scrollContainerRef:p,handleChordClick:m,handleUpdateChord:E,handleEditChord:N,handleCloseEditor:j,handleNavigateToChord:P,handleClearAll:g,handleTogglePlayback:x,handleToggleDeleteMode:b,handleToggleLiveMode:S}};function q5(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return w.useMemo(()=>s=>{n.forEach(i=>i(s))},n)}const gl=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function ts(e){const n=Object.prototype.toString.call(e);return n==="[object Window]"||n==="[object global]"}function gf(e){return"nodeType"in e}function pn(e){var n,r;return e?ts(e)?e:gf(e)&&(n=(r=e.ownerDocument)==null?void 0:r.defaultView)!=null?n:window:window}function vf(e){const{Document:n}=pn(e);return e instanceof n}function bi(e){return ts(e)?!1:e instanceof pn(e).HTMLElement}function mx(e){return e instanceof pn(e).SVGElement}function ns(e){return e?ts(e)?e.document:gf(e)?vf(e)?e:bi(e)||mx(e)?e.ownerDocument:document:document:document}const ur=gl?w.useLayoutEffect:w.useEffect;function xf(e){const n=w.useRef(e);return ur(()=>{n.current=e}),w.useCallback(function(){for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return n.current==null?void 0:n.current(...s)},[])}function K5(){const e=w.useRef(null),n=w.useCallback((s,i)=>{e.current=setInterval(s,i)},[]),r=w.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[n,r]}function fi(e,n){n===void 0&&(n=[e]);const r=w.useRef(e);return ur(()=>{r.current!==e&&(r.current=e)},n),r}function wi(e,n){const r=w.useRef();return w.useMemo(()=>{const s=e(r.current);return r.current=s,s},[...n])}function Za(e){const n=xf(e),r=w.useRef(null),s=w.useCallback(i=>{i!==r.current&&n?.(i,r.current),r.current=i},[]);return[r,s]}function Id(e){const n=w.useRef();return w.useEffect(()=>{n.current=e},[e]),n.current}let sd={};function Ni(e,n){return w.useMemo(()=>{if(n)return n;const r=sd[e]==null?0:sd[e]+1;return sd[e]=r,e+"-"+r},[e,n])}function gx(e){return function(n){for(var r=arguments.length,s=new Array(r>1?r-1:0),i=1;i<r;i++)s[i-1]=arguments[i];return s.reduce((a,c)=>{const d=Object.entries(c);for(const[h,p]of d){const m=a[h];m!=null&&(a[h]=m+e*p)}return a},{...n})}}const qo=gx(1),hi=gx(-1);function Y5(e){return"clientX"in e&&"clientY"in e}function yf(e){if(!e)return!1;const{KeyboardEvent:n}=pn(e.target);return n&&e instanceof n}function Q5(e){if(!e)return!1;const{TouchEvent:n}=pn(e.target);return n&&e instanceof n}function kd(e){if(Q5(e)){if(e.touches&&e.touches.length){const{clientX:n,clientY:r}=e.touches[0];return{x:n,y:r}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:n,clientY:r}=e.changedTouches[0];return{x:n,y:r}}}return Y5(e)?{x:e.clientX,y:e.clientY}:null}const pi=Object.freeze({Translate:{toString(e){if(!e)return;const{x:n,y:r}=e;return"translate3d("+(n?Math.round(n):0)+"px, "+(r?Math.round(r):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:n,scaleY:r}=e;return"scaleX("+n+") scaleY("+r+")"}},Transform:{toString(e){if(e)return[pi.Translate.toString(e),pi.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:n,duration:r,easing:s}=e;return n+" "+r+"ms "+s}}}),m0="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function X5(e){return e.matches(m0)?e:e.querySelector(m0)}const J5={display:"none"};function Z5(e){let{id:n,value:r}=e;return ve.createElement("div",{id:n,style:J5},r)}function eD(e){let{id:n,announcement:r,ariaLiveType:s="assertive"}=e;const i={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return ve.createElement("div",{id:n,style:i,role:"status","aria-live":s,"aria-atomic":!0},r)}function tD(){const[e,n]=w.useState("");return{announce:w.useCallback(s=>{s!=null&&n(s)},[]),announcement:e}}const vx=w.createContext(null);function nD(e){const n=w.useContext(vx);w.useEffect(()=>{if(!n)throw new Error("useDndMonitor must be used within a children of <DndContext>");return n(e)},[e,n])}function rD(){const[e]=w.useState(()=>new Set),n=w.useCallback(s=>(e.add(s),()=>e.delete(s)),[e]);return[w.useCallback(s=>{let{type:i,event:a}=s;e.forEach(c=>{var d;return(d=c[i])==null?void 0:d.call(c,a)})},[e]),n]}const oD={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},sD={onDragStart(e){let{active:n}=e;return"Picked up draggable item "+n.id+"."},onDragOver(e){let{active:n,over:r}=e;return r?"Draggable item "+n.id+" was moved over droppable area "+r.id+".":"Draggable item "+n.id+" is no longer over a droppable area."},onDragEnd(e){let{active:n,over:r}=e;return r?"Draggable item "+n.id+" was dropped over droppable area "+r.id:"Draggable item "+n.id+" was dropped."},onDragCancel(e){let{active:n}=e;return"Dragging was cancelled. Draggable item "+n.id+" was dropped."}};function iD(e){let{announcements:n=sD,container:r,hiddenTextDescribedById:s,screenReaderInstructions:i=oD}=e;const{announce:a,announcement:c}=tD(),d=Ni("DndLiveRegion"),[h,p]=w.useState(!1);if(w.useEffect(()=>{p(!0)},[]),nD(w.useMemo(()=>({onDragStart(g){let{active:x}=g;a(n.onDragStart({active:x}))},onDragMove(g){let{active:x,over:b}=g;n.onDragMove&&a(n.onDragMove({active:x,over:b}))},onDragOver(g){let{active:x,over:b}=g;a(n.onDragOver({active:x,over:b}))},onDragEnd(g){let{active:x,over:b}=g;a(n.onDragEnd({active:x,over:b}))},onDragCancel(g){let{active:x,over:b}=g;a(n.onDragCancel({active:x,over:b}))}}),[a,n])),!h)return null;const m=ve.createElement(ve.Fragment,null,ve.createElement(Z5,{id:s,value:i.draggable}),ve.createElement(eD,{id:d,announcement:c}));return r?Sr.createPortal(m,r):m}var Nt;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(Nt||(Nt={}));function el(){}function id(e,n){return w.useMemo(()=>({sensor:e,options:n??{}}),[e,n])}function aD(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return w.useMemo(()=>[...n].filter(s=>s!=null),[...n])}const Zn=Object.freeze({x:0,y:0});function xx(e,n){return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}function yx(e,n){let{data:{value:r}}=e,{data:{value:s}}=n;return r-s}function lD(e,n){let{data:{value:r}}=e,{data:{value:s}}=n;return s-r}function g0(e){let{left:n,top:r,height:s,width:i}=e;return[{x:n,y:r},{x:n+i,y:r},{x:n,y:r+s},{x:n+i,y:r+s}]}function bx(e,n){if(!e||e.length===0)return null;const[r]=e;return r[n]}function v0(e,n,r){return n===void 0&&(n=e.left),r===void 0&&(r=e.top),{x:n+e.width*.5,y:r+e.height*.5}}const cD=e=>{let{collisionRect:n,droppableRects:r,droppableContainers:s}=e;const i=v0(n,n.left,n.top),a=[];for(const c of s){const{id:d}=c,h=r.get(d);if(h){const p=xx(v0(h),i);a.push({id:d,data:{droppableContainer:c,value:p}})}}return a.sort(yx)},uD=e=>{let{collisionRect:n,droppableRects:r,droppableContainers:s}=e;const i=g0(n),a=[];for(const c of s){const{id:d}=c,h=r.get(d);if(h){const p=g0(h),m=i.reduce((x,b,S)=>x+xx(p[S],b),0),g=Number((m/4).toFixed(4));a.push({id:d,data:{droppableContainer:c,value:g}})}}return a.sort(yx)};function dD(e,n){const r=Math.max(n.top,e.top),s=Math.max(n.left,e.left),i=Math.min(n.left+n.width,e.left+e.width),a=Math.min(n.top+n.height,e.top+e.height),c=i-s,d=a-r;if(s<i&&r<a){const h=n.width*n.height,p=e.width*e.height,m=c*d,g=m/(h+p-m);return Number(g.toFixed(4))}return 0}const fD=e=>{let{collisionRect:n,droppableRects:r,droppableContainers:s}=e;const i=[];for(const a of s){const{id:c}=a,d=r.get(c);if(d){const h=dD(d,n);h>0&&i.push({id:c,data:{droppableContainer:a,value:h}})}}return i.sort(lD)};function hD(e,n,r){return{...e,scaleX:n&&r?n.width/r.width:1,scaleY:n&&r?n.height/r.height:1}}function wx(e,n){return e&&n?{x:e.left-n.left,y:e.top-n.top}:Zn}function pD(e){return function(r){for(var s=arguments.length,i=new Array(s>1?s-1:0),a=1;a<s;a++)i[a-1]=arguments[a];return i.reduce((c,d)=>({...c,top:c.top+e*d.y,bottom:c.bottom+e*d.y,left:c.left+e*d.x,right:c.right+e*d.x}),{...r})}}const mD=pD(1);function gD(e){if(e.startsWith("matrix3d(")){const n=e.slice(9,-1).split(/, /);return{x:+n[12],y:+n[13],scaleX:+n[0],scaleY:+n[5]}}else if(e.startsWith("matrix(")){const n=e.slice(7,-1).split(/, /);return{x:+n[4],y:+n[5],scaleX:+n[0],scaleY:+n[3]}}return null}function vD(e,n,r){const s=gD(n);if(!s)return e;const{scaleX:i,scaleY:a,x:c,y:d}=s,h=e.left-c-(1-i)*parseFloat(r),p=e.top-d-(1-a)*parseFloat(r.slice(r.indexOf(" ")+1)),m=i?e.width/i:e.width,g=a?e.height/a:e.height;return{width:m,height:g,top:p,right:h+m,bottom:p+g,left:h}}const xD={ignoreTransform:!1};function rs(e,n){n===void 0&&(n=xD);let r=e.getBoundingClientRect();if(n.ignoreTransform){const{transform:p,transformOrigin:m}=pn(e).getComputedStyle(e);p&&(r=vD(r,p,m))}const{top:s,left:i,width:a,height:c,bottom:d,right:h}=r;return{top:s,left:i,width:a,height:c,bottom:d,right:h}}function x0(e){return rs(e,{ignoreTransform:!0})}function yD(e){const n=e.innerWidth,r=e.innerHeight;return{top:0,left:0,right:n,bottom:r,width:n,height:r}}function bD(e,n){return n===void 0&&(n=pn(e).getComputedStyle(e)),n.position==="fixed"}function wD(e,n){n===void 0&&(n=pn(e).getComputedStyle(e));const r=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(i=>{const a=n[i];return typeof a=="string"?r.test(a):!1})}function vl(e,n){const r=[];function s(i){if(n!=null&&r.length>=n||!i)return r;if(vf(i)&&i.scrollingElement!=null&&!r.includes(i.scrollingElement))return r.push(i.scrollingElement),r;if(!bi(i)||mx(i)||r.includes(i))return r;const a=pn(e).getComputedStyle(i);return i!==e&&wD(i,a)&&r.push(i),bD(i,a)?r:s(i.parentNode)}return e?s(e):r}function Nx(e){const[n]=vl(e,1);return n??null}function ad(e){return!gl||!e?null:ts(e)?e:gf(e)?vf(e)||e===ns(e).scrollingElement?window:bi(e)?e:null:null}function Cx(e){return ts(e)?e.scrollX:e.scrollLeft}function Sx(e){return ts(e)?e.scrollY:e.scrollTop}function Pd(e){return{x:Cx(e),y:Sx(e)}}var kt;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(kt||(kt={}));function Ex(e){return!gl||!e?!1:e===document.scrollingElement}function Dx(e){const n={x:0,y:0},r=Ex(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},s={x:e.scrollWidth-r.width,y:e.scrollHeight-r.height},i=e.scrollTop<=n.y,a=e.scrollLeft<=n.x,c=e.scrollTop>=s.y,d=e.scrollLeft>=s.x;return{isTop:i,isLeft:a,isBottom:c,isRight:d,maxScroll:s,minScroll:n}}const ND={x:.2,y:.2};function CD(e,n,r,s,i){let{top:a,left:c,right:d,bottom:h}=r;s===void 0&&(s=10),i===void 0&&(i=ND);const{isTop:p,isBottom:m,isLeft:g,isRight:x}=Dx(e),b={x:0,y:0},S={x:0,y:0},E={height:n.height*i.y,width:n.width*i.x};return!p&&a<=n.top+E.height?(b.y=kt.Backward,S.y=s*Math.abs((n.top+E.height-a)/E.height)):!m&&h>=n.bottom-E.height&&(b.y=kt.Forward,S.y=s*Math.abs((n.bottom-E.height-h)/E.height)),!x&&d>=n.right-E.width?(b.x=kt.Forward,S.x=s*Math.abs((n.right-E.width-d)/E.width)):!g&&c<=n.left+E.width&&(b.x=kt.Backward,S.x=s*Math.abs((n.left+E.width-c)/E.width)),{direction:b,speed:S}}function SD(e){if(e===document.scrollingElement){const{innerWidth:a,innerHeight:c}=window;return{top:0,left:0,right:a,bottom:c,width:a,height:c}}const{top:n,left:r,right:s,bottom:i}=e.getBoundingClientRect();return{top:n,left:r,right:s,bottom:i,width:e.clientWidth,height:e.clientHeight}}function Ax(e){return e.reduce((n,r)=>qo(n,Pd(r)),Zn)}function ED(e){return e.reduce((n,r)=>n+Cx(r),0)}function DD(e){return e.reduce((n,r)=>n+Sx(r),0)}function AD(e,n){if(n===void 0&&(n=rs),!e)return;const{top:r,left:s,bottom:i,right:a}=n(e);Nx(e)&&(i<=0||a<=0||r>=window.innerHeight||s>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const jD=[["x",["left","right"],ED],["y",["top","bottom"],DD]];class bf{constructor(n,r){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const s=vl(r),i=Ax(s);this.rect={...n},this.width=n.width,this.height=n.height;for(const[a,c,d]of jD)for(const h of c)Object.defineProperty(this,h,{get:()=>{const p=d(s),m=i[a]-p;return this.rect[h]+m},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Js{constructor(n){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(r=>{var s;return(s=this.target)==null?void 0:s.removeEventListener(...r)})},this.target=n}add(n,r,s){var i;(i=this.target)==null||i.addEventListener(n,r,s),this.listeners.push([n,r,s])}}function ID(e){const{EventTarget:n}=pn(e);return e instanceof n?e:ns(e)}function ld(e,n){const r=Math.abs(e.x),s=Math.abs(e.y);return typeof n=="number"?Math.sqrt(r**2+s**2)>n:"x"in n&&"y"in n?r>n.x&&s>n.y:"x"in n?r>n.x:"y"in n?s>n.y:!1}var Fn;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(Fn||(Fn={}));function y0(e){e.preventDefault()}function kD(e){e.stopPropagation()}var Fe;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(Fe||(Fe={}));const jx={start:[Fe.Space,Fe.Enter],cancel:[Fe.Esc],end:[Fe.Space,Fe.Enter,Fe.Tab]},PD=(e,n)=>{let{currentCoordinates:r}=n;switch(e.code){case Fe.Right:return{...r,x:r.x+25};case Fe.Left:return{...r,x:r.x-25};case Fe.Down:return{...r,y:r.y+25};case Fe.Up:return{...r,y:r.y-25}}};class wf{constructor(n){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=n;const{event:{target:r}}=n;this.props=n,this.listeners=new Js(ns(r)),this.windowListeners=new Js(pn(r)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Fn.Resize,this.handleCancel),this.windowListeners.add(Fn.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Fn.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:n,onStart:r}=this.props,s=n.node.current;s&&AD(s),r(Zn)}handleKeyDown(n){if(yf(n)){const{active:r,context:s,options:i}=this.props,{keyboardCodes:a=jx,coordinateGetter:c=PD,scrollBehavior:d="smooth"}=i,{code:h}=n;if(a.end.includes(h)){this.handleEnd(n);return}if(a.cancel.includes(h)){this.handleCancel(n);return}const{collisionRect:p}=s.current,m=p?{x:p.left,y:p.top}:Zn;this.referenceCoordinates||(this.referenceCoordinates=m);const g=c(n,{active:r,context:s.current,currentCoordinates:m});if(g){const x=hi(g,m),b={x:0,y:0},{scrollableAncestors:S}=s.current;for(const E of S){const N=n.code,{isTop:j,isRight:P,isLeft:I,isBottom:D,maxScroll:k,minScroll:R}=Dx(E),O=SD(E),M={x:Math.min(N===Fe.Right?O.right-O.width/2:O.right,Math.max(N===Fe.Right?O.left:O.left+O.width/2,g.x)),y:Math.min(N===Fe.Down?O.bottom-O.height/2:O.bottom,Math.max(N===Fe.Down?O.top:O.top+O.height/2,g.y))},q=N===Fe.Right&&!P||N===Fe.Left&&!I,J=N===Fe.Down&&!D||N===Fe.Up&&!j;if(q&&M.x!==g.x){const ie=E.scrollLeft+x.x,Y=N===Fe.Right&&ie<=k.x||N===Fe.Left&&ie>=R.x;if(Y&&!x.y){E.scrollTo({left:ie,behavior:d});return}Y?b.x=E.scrollLeft-ie:b.x=N===Fe.Right?E.scrollLeft-k.x:E.scrollLeft-R.x,b.x&&E.scrollBy({left:-b.x,behavior:d});break}else if(J&&M.y!==g.y){const ie=E.scrollTop+x.y,Y=N===Fe.Down&&ie<=k.y||N===Fe.Up&&ie>=R.y;if(Y&&!x.x){E.scrollTo({top:ie,behavior:d});return}Y?b.y=E.scrollTop-ie:b.y=N===Fe.Down?E.scrollTop-k.y:E.scrollTop-R.y,b.y&&E.scrollBy({top:-b.y,behavior:d});break}}this.handleMove(n,qo(hi(g,this.referenceCoordinates),b))}}}handleMove(n,r){const{onMove:s}=this.props;n.preventDefault(),s(r)}handleEnd(n){const{onEnd:r}=this.props;n.preventDefault(),this.detach(),r()}handleCancel(n){const{onCancel:r}=this.props;n.preventDefault(),this.detach(),r()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}wf.activators=[{eventName:"onKeyDown",handler:(e,n,r)=>{let{keyboardCodes:s=jx,onActivation:i}=n,{active:a}=r;const{code:c}=e.nativeEvent;if(s.start.includes(c)){const d=a.activatorNode.current;return d&&e.target!==d?!1:(e.preventDefault(),i?.({event:e.nativeEvent}),!0)}return!1}}];function b0(e){return!!(e&&"distance"in e)}function w0(e){return!!(e&&"delay"in e)}class Nf{constructor(n,r,s){var i;s===void 0&&(s=ID(n.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=n,this.events=r;const{event:a}=n,{target:c}=a;this.props=n,this.events=r,this.document=ns(c),this.documentListeners=new Js(this.document),this.listeners=new Js(s),this.windowListeners=new Js(pn(c)),this.initialCoordinates=(i=kd(a))!=null?i:Zn,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:n,props:{options:{activationConstraint:r,bypassActivationConstraint:s}}}=this;if(this.listeners.add(n.move.name,this.handleMove,{passive:!1}),this.listeners.add(n.end.name,this.handleEnd),n.cancel&&this.listeners.add(n.cancel.name,this.handleCancel),this.windowListeners.add(Fn.Resize,this.handleCancel),this.windowListeners.add(Fn.DragStart,y0),this.windowListeners.add(Fn.VisibilityChange,this.handleCancel),this.windowListeners.add(Fn.ContextMenu,y0),this.documentListeners.add(Fn.Keydown,this.handleKeydown),r){if(s!=null&&s({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(w0(r)){this.timeoutId=setTimeout(this.handleStart,r.delay),this.handlePending(r);return}if(b0(r)){this.handlePending(r);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(n,r){const{active:s,onPending:i}=this.props;i(s,n,this.initialCoordinates,r)}handleStart(){const{initialCoordinates:n}=this,{onStart:r}=this.props;n&&(this.activated=!0,this.documentListeners.add(Fn.Click,kD,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Fn.SelectionChange,this.removeTextSelection),r(n))}handleMove(n){var r;const{activated:s,initialCoordinates:i,props:a}=this,{onMove:c,options:{activationConstraint:d}}=a;if(!i)return;const h=(r=kd(n))!=null?r:Zn,p=hi(i,h);if(!s&&d){if(b0(d)){if(d.tolerance!=null&&ld(p,d.tolerance))return this.handleCancel();if(ld(p,d.distance))return this.handleStart()}if(w0(d)&&ld(p,d.tolerance))return this.handleCancel();this.handlePending(d,p);return}n.cancelable&&n.preventDefault(),c(h)}handleEnd(){const{onAbort:n,onEnd:r}=this.props;this.detach(),this.activated||n(this.props.active),r()}handleCancel(){const{onAbort:n,onCancel:r}=this.props;this.detach(),this.activated||n(this.props.active),r()}handleKeydown(n){n.code===Fe.Esc&&this.handleCancel()}removeTextSelection(){var n;(n=this.document.getSelection())==null||n.removeAllRanges()}}const TD={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Cf extends Nf{constructor(n){const{event:r}=n,s=ns(r.target);super(n,TD,s)}}Cf.activators=[{eventName:"onPointerDown",handler:(e,n)=>{let{nativeEvent:r}=e,{onActivation:s}=n;return!r.isPrimary||r.button!==0?!1:(s?.({event:r}),!0)}}];const RD={move:{name:"mousemove"},end:{name:"mouseup"}};var Td;(function(e){e[e.RightClick=2]="RightClick"})(Td||(Td={}));class MD extends Nf{constructor(n){super(n,RD,ns(n.event.target))}}MD.activators=[{eventName:"onMouseDown",handler:(e,n)=>{let{nativeEvent:r}=e,{onActivation:s}=n;return r.button===Td.RightClick?!1:(s?.({event:r}),!0)}}];const cd={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class Ix extends Nf{constructor(n){super(n,cd)}static setup(){return window.addEventListener(cd.move.name,n,{capture:!1,passive:!1}),function(){window.removeEventListener(cd.move.name,n)};function n(){}}}Ix.activators=[{eventName:"onTouchStart",handler:(e,n)=>{let{nativeEvent:r}=e,{onActivation:s}=n;const{touches:i}=r;return i.length>1?!1:(s?.({event:r}),!0)}}];var Zs;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(Zs||(Zs={}));var tl;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(tl||(tl={}));function OD(e){let{acceleration:n,activator:r=Zs.Pointer,canScroll:s,draggingRect:i,enabled:a,interval:c=5,order:d=tl.TreeOrder,pointerCoordinates:h,scrollableAncestors:p,scrollableAncestorRects:m,delta:g,threshold:x}=e;const b=LD({delta:g,disabled:!a}),[S,E]=K5(),N=w.useRef({x:0,y:0}),j=w.useRef({x:0,y:0}),P=w.useMemo(()=>{switch(r){case Zs.Pointer:return h?{top:h.y,bottom:h.y,left:h.x,right:h.x}:null;case Zs.DraggableRect:return i}},[r,i,h]),I=w.useRef(null),D=w.useCallback(()=>{const R=I.current;if(!R)return;const O=N.current.x*j.current.x,M=N.current.y*j.current.y;R.scrollBy(O,M)},[]),k=w.useMemo(()=>d===tl.TreeOrder?[...p].reverse():p,[d,p]);w.useEffect(()=>{if(!a||!p.length||!P){E();return}for(const R of k){if(s?.(R)===!1)continue;const O=p.indexOf(R),M=m[O];if(!M)continue;const{direction:q,speed:J}=CD(R,M,P,n,x);for(const ie of["x","y"])b[ie][q[ie]]||(J[ie]=0,q[ie]=0);if(J.x>0||J.y>0){E(),I.current=R,S(D,c),N.current=J,j.current=q;return}}N.current={x:0,y:0},j.current={x:0,y:0},E()},[n,D,s,E,a,c,JSON.stringify(P),JSON.stringify(b),S,p,k,m,JSON.stringify(x)])}const _D={x:{[kt.Backward]:!1,[kt.Forward]:!1},y:{[kt.Backward]:!1,[kt.Forward]:!1}};function LD(e){let{delta:n,disabled:r}=e;const s=Id(n);return wi(i=>{if(r||!s||!i)return _D;const a={x:Math.sign(n.x-s.x),y:Math.sign(n.y-s.y)};return{x:{[kt.Backward]:i.x[kt.Backward]||a.x===-1,[kt.Forward]:i.x[kt.Forward]||a.x===1},y:{[kt.Backward]:i.y[kt.Backward]||a.y===-1,[kt.Forward]:i.y[kt.Forward]||a.y===1}}},[r,n,s])}function FD(e,n){const r=n!=null?e.get(n):void 0,s=r?r.node.current:null;return wi(i=>{var a;return n==null?null:(a=s??i)!=null?a:null},[s,n])}function BD(e,n){return w.useMemo(()=>e.reduce((r,s)=>{const{sensor:i}=s,a=i.activators.map(c=>({eventName:c.eventName,handler:n(c.handler,s)}));return[...r,...a]},[]),[e,n])}var mi;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(mi||(mi={}));var Rd;(function(e){e.Optimized="optimized"})(Rd||(Rd={}));const N0=new Map;function $D(e,n){let{dragging:r,dependencies:s,config:i}=n;const[a,c]=w.useState(null),{frequency:d,measure:h,strategy:p}=i,m=w.useRef(e),g=N(),x=fi(g),b=w.useCallback(function(j){j===void 0&&(j=[]),!x.current&&c(P=>P===null?j:P.concat(j.filter(I=>!P.includes(I))))},[x]),S=w.useRef(null),E=wi(j=>{if(g&&!r)return N0;if(!j||j===N0||m.current!==e||a!=null){const P=new Map;for(let I of e){if(!I)continue;if(a&&a.length>0&&!a.includes(I.id)&&I.rect.current){P.set(I.id,I.rect.current);continue}const D=I.node.current,k=D?new bf(h(D),D):null;I.rect.current=k,k&&P.set(I.id,k)}return P}return j},[e,a,r,g,h]);return w.useEffect(()=>{m.current=e},[e]),w.useEffect(()=>{g||b()},[r,g]),w.useEffect(()=>{a&&a.length>0&&c(null)},[JSON.stringify(a)]),w.useEffect(()=>{g||typeof d!="number"||S.current!==null||(S.current=setTimeout(()=>{b(),S.current=null},d))},[d,g,b,...s]),{droppableRects:E,measureDroppableContainers:b,measuringScheduled:a!=null};function N(){switch(p){case mi.Always:return!1;case mi.BeforeDragging:return r;default:return!r}}}function kx(e,n){return wi(r=>e?r||(typeof n=="function"?n(e):e):null,[n,e])}function GD(e,n){return kx(e,n)}function UD(e){let{callback:n,disabled:r}=e;const s=xf(n),i=w.useMemo(()=>{if(r||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:a}=window;return new a(s)},[s,r]);return w.useEffect(()=>()=>i?.disconnect(),[i]),i}function xl(e){let{callback:n,disabled:r}=e;const s=xf(n),i=w.useMemo(()=>{if(r||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:a}=window;return new a(s)},[r]);return w.useEffect(()=>()=>i?.disconnect(),[i]),i}function VD(e){return new bf(rs(e),e)}function C0(e,n,r){n===void 0&&(n=VD);const[s,i]=w.useState(null);function a(){i(h=>{if(!e)return null;if(e.isConnected===!1){var p;return(p=h??r)!=null?p:null}const m=n(e);return JSON.stringify(h)===JSON.stringify(m)?h:m})}const c=UD({callback(h){if(e)for(const p of h){const{type:m,target:g}=p;if(m==="childList"&&g instanceof HTMLElement&&g.contains(e)){a();break}}}}),d=xl({callback:a});return ur(()=>{a(),e?(d?.observe(e),c?.observe(document.body,{childList:!0,subtree:!0})):(d?.disconnect(),c?.disconnect())},[e]),s}function zD(e){const n=kx(e);return wx(e,n)}const S0=[];function WD(e){const n=w.useRef(e),r=wi(s=>e?s&&s!==S0&&e&&n.current&&e.parentNode===n.current.parentNode?s:vl(e):S0,[e]);return w.useEffect(()=>{n.current=e},[e]),r}function HD(e){const[n,r]=w.useState(null),s=w.useRef(e),i=w.useCallback(a=>{const c=ad(a.target);c&&r(d=>d?(d.set(c,Pd(c)),new Map(d)):null)},[]);return w.useEffect(()=>{const a=s.current;if(e!==a){c(a);const d=e.map(h=>{const p=ad(h);return p?(p.addEventListener("scroll",i,{passive:!0}),[p,Pd(p)]):null}).filter(h=>h!=null);r(d.length?new Map(d):null),s.current=e}return()=>{c(e),c(a)};function c(d){d.forEach(h=>{const p=ad(h);p?.removeEventListener("scroll",i)})}},[i,e]),w.useMemo(()=>e.length?n?Array.from(n.values()).reduce((a,c)=>qo(a,c),Zn):Ax(e):Zn,[e,n])}function E0(e,n){n===void 0&&(n=[]);const r=w.useRef(null);return w.useEffect(()=>{r.current=null},n),w.useEffect(()=>{const s=e!==Zn;s&&!r.current&&(r.current=e),!s&&r.current&&(r.current=null)},[e]),r.current?hi(e,r.current):Zn}function qD(e){w.useEffect(()=>{if(!gl)return;const n=e.map(r=>{let{sensor:s}=r;return s.setup==null?void 0:s.setup()});return()=>{for(const r of n)r?.()}},e.map(n=>{let{sensor:r}=n;return r}))}function KD(e,n){return w.useMemo(()=>e.reduce((r,s)=>{let{eventName:i,handler:a}=s;return r[i]=c=>{a(c,n)},r},{}),[e,n])}function Px(e){return w.useMemo(()=>e?yD(e):null,[e])}const D0=[];function YD(e,n){n===void 0&&(n=rs);const[r]=e,s=Px(r?pn(r):null),[i,a]=w.useState(D0);function c(){a(()=>e.length?e.map(h=>Ex(h)?s:new bf(n(h),h)):D0)}const d=xl({callback:c});return ur(()=>{d?.disconnect(),c(),e.forEach(h=>d?.observe(h))},[e]),i}function QD(e){if(!e)return null;if(e.children.length>1)return e;const n=e.children[0];return bi(n)?n:e}function XD(e){let{measure:n}=e;const[r,s]=w.useState(null),i=w.useCallback(p=>{for(const{target:m}of p)if(bi(m)){s(g=>{const x=n(m);return g?{...g,width:x.width,height:x.height}:x});break}},[n]),a=xl({callback:i}),c=w.useCallback(p=>{const m=QD(p);a?.disconnect(),m&&a?.observe(m),s(m?n(m):null)},[n,a]),[d,h]=Za(c);return w.useMemo(()=>({nodeRef:d,rect:r,setRef:h}),[r,d,h])}const JD=[{sensor:Cf,options:{}},{sensor:wf,options:{}}],ZD={current:{}},Ba={draggable:{measure:x0},droppable:{measure:x0,strategy:mi.WhileDragging,frequency:Rd.Optimized},dragOverlay:{measure:rs}};class ei extends Map{get(n){var r;return n!=null&&(r=super.get(n))!=null?r:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(n=>{let{disabled:r}=n;return!r})}getNodeFor(n){var r,s;return(r=(s=this.get(n))==null?void 0:s.node.current)!=null?r:void 0}}const e3={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new ei,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:el},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Ba,measureDroppableContainers:el,windowRect:null,measuringScheduled:!1},t3={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:el,draggableNodes:new Map,over:null,measureDroppableContainers:el},yl=w.createContext(t3),Tx=w.createContext(e3);function n3(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new ei}}}function r3(e,n){switch(n.type){case Nt.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:n.initialCoordinates,active:n.active}};case Nt.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:n.coordinates.x-e.draggable.initialCoordinates.x,y:n.coordinates.y-e.draggable.initialCoordinates.y}}};case Nt.DragEnd:case Nt.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Nt.RegisterDroppable:{const{element:r}=n,{id:s}=r,i=new ei(e.droppable.containers);return i.set(s,r),{...e,droppable:{...e.droppable,containers:i}}}case Nt.SetDroppableDisabled:{const{id:r,key:s,disabled:i}=n,a=e.droppable.containers.get(r);if(!a||s!==a.key)return e;const c=new ei(e.droppable.containers);return c.set(r,{...a,disabled:i}),{...e,droppable:{...e.droppable,containers:c}}}case Nt.UnregisterDroppable:{const{id:r,key:s}=n,i=e.droppable.containers.get(r);if(!i||s!==i.key)return e;const a=new ei(e.droppable.containers);return a.delete(r),{...e,droppable:{...e.droppable,containers:a}}}default:return e}}function o3(e){let{disabled:n}=e;const{active:r,activatorEvent:s,draggableNodes:i}=w.useContext(yl),a=Id(s),c=Id(r?.id);return w.useEffect(()=>{if(!n&&!s&&a&&c!=null){if(!yf(a)||document.activeElement===a.target)return;const d=i.get(c);if(!d)return;const{activatorNode:h,node:p}=d;if(!h.current&&!p.current)return;requestAnimationFrame(()=>{for(const m of[h.current,p.current]){if(!m)continue;const g=X5(m);if(g){g.focus();break}}})}},[s,n,i,c,a]),null}function s3(e,n){let{transform:r,...s}=n;return e!=null&&e.length?e.reduce((i,a)=>a({transform:i,...s}),r):r}function i3(e){return w.useMemo(()=>({draggable:{...Ba.draggable,...e?.draggable},droppable:{...Ba.droppable,...e?.droppable},dragOverlay:{...Ba.dragOverlay,...e?.dragOverlay}}),[e?.draggable,e?.droppable,e?.dragOverlay])}function a3(e){let{activeNode:n,measure:r,initialRect:s,config:i=!0}=e;const a=w.useRef(!1),{x:c,y:d}=typeof i=="boolean"?{x:i,y:i}:i;ur(()=>{if(!c&&!d||!n){a.current=!1;return}if(a.current||!s)return;const p=n?.node.current;if(!p||p.isConnected===!1)return;const m=r(p),g=wx(m,s);if(c||(g.x=0),d||(g.y=0),a.current=!0,Math.abs(g.x)>0||Math.abs(g.y)>0){const x=Nx(p);x&&x.scrollBy({top:g.y,left:g.x})}},[n,c,d,s,r])}const Rx=w.createContext({...Zn,scaleX:1,scaleY:1});var Qr;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(Qr||(Qr={}));const l3=w.memo(function(n){var r,s,i,a;let{id:c,accessibility:d,autoScroll:h=!0,children:p,sensors:m=JD,collisionDetection:g=fD,measuring:x,modifiers:b,...S}=n;const E=w.useReducer(r3,void 0,n3),[N,j]=E,[P,I]=rD(),[D,k]=w.useState(Qr.Uninitialized),R=D===Qr.Initialized,{draggable:{active:O,nodes:M,translate:q},droppable:{containers:J}}=N,ie=O!=null?M.get(O):null,Y=w.useRef({initial:null,translated:null}),W=w.useMemo(()=>{var U;return O!=null?{id:O,data:(U=ie?.data)!=null?U:ZD,rect:Y}:null},[O,ie]),re=w.useRef(null),[ae,ce]=w.useState(null),[ee,Q]=w.useState(null),V=fi(S,Object.values(S)),F=Ni("DndDescribedBy",c),A=w.useMemo(()=>J.getEnabled(),[J]),_=i3(x),{droppableRects:Z,measureDroppableContainers:oe,measuringScheduled:fe}=$D(A,{dragging:R,dependencies:[q.x,q.y],config:_.droppable}),he=FD(M,O),Pe=w.useMemo(()=>ee?kd(ee):null,[ee]),ye=vn(),Se=GD(he,_.draggable.measure);a3({activeNode:O!=null?M.get(O):null,config:ye.layoutShiftCompensation,initialRect:Se,measure:_.draggable.measure});const we=C0(he,_.draggable.measure,Se),ht=C0(he?he.parentElement:null),Te=w.useRef({activatorEvent:null,active:null,activeNode:he,collisionRect:null,collisions:null,droppableRects:Z,draggableNodes:M,draggingNode:null,draggingNodeRect:null,droppableContainers:J,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Qe=J.getNodeFor((r=Te.current.over)==null?void 0:r.id),Ne=XD({measure:_.dragOverlay.measure}),qe=(s=Ne.nodeRef.current)!=null?s:he,et=R?(i=Ne.rect)!=null?i:we:null,Rt=!!(Ne.nodeRef.current&&Ne.rect),tn=zD(Rt?null:we),Kt=Px(qe?pn(qe):null),ut=WD(R?Qe??he:null),Xe=YD(ut),We=s3(b,{transform:{x:q.x-tn.x,y:q.y-tn.y,scaleX:1,scaleY:1},activatorEvent:ee,active:W,activeNodeRect:we,containerNodeRect:ht,draggingNodeRect:et,over:Te.current.over,overlayNodeRect:Ne.rect,scrollableAncestors:ut,scrollableAncestorRects:Xe,windowRect:Kt}),pt=Pe?qo(Pe,q):null,vt=HD(ut),Dn=E0(vt),mn=E0(vt,[we]),Yt=qo(We,Dn),Qt=et?mD(et,We):null,An=W&&Qt?g({active:W,collisionRect:Qt,droppableRects:Z,droppableContainers:A,pointerCoordinates:pt}):null,jn=bx(An,"id"),[Ct,Ar]=w.useState(null),jr=Rt?We:qo(We,mn),er=hD(jr,(a=Ct?.rect)!=null?a:null,we),Mt=w.useRef(null),nn=w.useCallback((U,X)=>{let{sensor:de,options:je}=X;if(re.current==null)return;const _e=M.get(re.current);if(!_e)return;const Be=U.nativeEvent,Je=new de({active:re.current,activeNode:_e,event:Be,options:je,context:Te,onAbort(Ve){if(!M.get(Ve))return;const{onDragAbort:tt}=V.current,Et={id:Ve};tt?.(Et),P({type:"onDragAbort",event:Et})},onPending(Ve,Gt,tt,Et){if(!M.get(Ve))return;const{onDragPending:kn}=V.current,Ot={id:Ve,constraint:Gt,initialCoordinates:tt,offset:Et};kn?.(Ot),P({type:"onDragPending",event:Ot})},onStart(Ve){const Gt=re.current;if(Gt==null)return;const tt=M.get(Gt);if(!tt)return;const{onDragStart:Et}=V.current,Ut={activatorEvent:Be,active:{id:Gt,data:tt.data,rect:Y}};Sr.unstable_batchedUpdates(()=>{Et?.(Ut),k(Qr.Initializing),j({type:Nt.DragStart,initialCoordinates:Ve,active:Gt}),P({type:"onDragStart",event:Ut}),ce(Mt.current),Q(Be)})},onMove(Ve){j({type:Nt.DragMove,coordinates:Ve})},onEnd:St(Nt.DragEnd),onCancel:St(Nt.DragCancel)});Mt.current=Je;function St(Ve){return async function(){const{active:tt,collisions:Et,over:Ut,scrollAdjustedTranslate:kn}=Te.current;let Ot=null;if(tt&&kn){const{cancelDrop:Gn}=V.current;Ot={activatorEvent:Be,active:tt,collisions:Et,delta:kn,over:Ut},Ve===Nt.DragEnd&&typeof Gn=="function"&&await Promise.resolve(Gn(Ot))&&(Ve=Nt.DragCancel)}re.current=null,Sr.unstable_batchedUpdates(()=>{j({type:Ve}),k(Qr.Uninitialized),Ar(null),ce(null),Q(null),Mt.current=null;const Gn=Ve===Nt.DragEnd?"onDragEnd":"onDragCancel";if(Ot){const dr=V.current[Gn];dr?.(Ot),P({type:Gn,event:Ot})}})}}},[M]),rn=w.useCallback((U,X)=>(de,je)=>{const _e=de.nativeEvent,Be=M.get(je);if(re.current!==null||!Be||_e.dndKit||_e.defaultPrevented)return;const Je={active:Be};U(de,X.options,Je)===!0&&(_e.dndKit={capturedBy:X.sensor},re.current=je,nn(de,X))},[M,nn]),In=BD(m,rn);qD(m),ur(()=>{we&&D===Qr.Initializing&&k(Qr.Initialized)},[we,D]),w.useEffect(()=>{const{onDragMove:U}=V.current,{active:X,activatorEvent:de,collisions:je,over:_e}=Te.current;if(!X||!de)return;const Be={active:X,activatorEvent:de,collisions:je,delta:{x:Yt.x,y:Yt.y},over:_e};Sr.unstable_batchedUpdates(()=>{U?.(Be),P({type:"onDragMove",event:Be})})},[Yt.x,Yt.y]),w.useEffect(()=>{const{active:U,activatorEvent:X,collisions:de,droppableContainers:je,scrollAdjustedTranslate:_e}=Te.current;if(!U||re.current==null||!X||!_e)return;const{onDragOver:Be}=V.current,Je=je.get(jn),St=Je&&Je.rect.current?{id:Je.id,rect:Je.rect.current,data:Je.data,disabled:Je.disabled}:null,Ve={active:U,activatorEvent:X,collisions:de,delta:{x:_e.x,y:_e.y},over:St};Sr.unstable_batchedUpdates(()=>{Ar(St),Be?.(Ve),P({type:"onDragOver",event:Ve})})},[jn]),ur(()=>{Te.current={activatorEvent:ee,active:W,activeNode:he,collisionRect:Qt,collisions:An,droppableRects:Z,draggableNodes:M,draggingNode:qe,draggingNodeRect:et,droppableContainers:J,over:Ct,scrollableAncestors:ut,scrollAdjustedTranslate:Yt},Y.current={initial:et,translated:Qt}},[W,he,An,Qt,M,qe,et,Z,J,Ct,ut,Yt]),OD({...ye,delta:q,draggingRect:Qt,pointerCoordinates:pt,scrollableAncestors:ut,scrollableAncestorRects:Xe});const gn=w.useMemo(()=>({active:W,activeNode:he,activeNodeRect:we,activatorEvent:ee,collisions:An,containerNodeRect:ht,dragOverlay:Ne,draggableNodes:M,droppableContainers:J,droppableRects:Z,over:Ct,measureDroppableContainers:oe,scrollableAncestors:ut,scrollableAncestorRects:Xe,measuringConfiguration:_,measuringScheduled:fe,windowRect:Kt}),[W,he,we,ee,An,ht,Ne,M,J,Z,Ct,oe,ut,Xe,_,fe,Kt]),on=w.useMemo(()=>({activatorEvent:ee,activators:In,active:W,activeNodeRect:we,ariaDescribedById:{draggable:F},dispatch:j,draggableNodes:M,over:Ct,measureDroppableContainers:oe}),[ee,In,W,we,j,F,M,Ct,oe]);return ve.createElement(vx.Provider,{value:I},ve.createElement(yl.Provider,{value:on},ve.createElement(Tx.Provider,{value:gn},ve.createElement(Rx.Provider,{value:er},p)),ve.createElement(o3,{disabled:d?.restoreFocus===!1})),ve.createElement(iD,{...d,hiddenTextDescribedById:F}));function vn(){const U=ae?.autoScrollEnabled===!1,X=typeof h=="object"?h.enabled===!1:h===!1,de=R&&!U&&!X;return typeof h=="object"?{...h,enabled:de}:{enabled:de}}}),c3=w.createContext(null),A0="button",u3="Draggable";function d3(e){let{id:n,data:r,disabled:s=!1,attributes:i}=e;const a=Ni(u3),{activators:c,activatorEvent:d,active:h,activeNodeRect:p,ariaDescribedById:m,draggableNodes:g,over:x}=w.useContext(yl),{role:b=A0,roleDescription:S="draggable",tabIndex:E=0}=i??{},N=h?.id===n,j=w.useContext(N?Rx:c3),[P,I]=Za(),[D,k]=Za(),R=KD(c,n),O=fi(r);ur(()=>(g.set(n,{id:n,key:a,node:P,activatorNode:D,data:O}),()=>{const q=g.get(n);q&&q.key===a&&g.delete(n)}),[g,n]);const M=w.useMemo(()=>({role:b,tabIndex:E,"aria-disabled":s,"aria-pressed":N&&b===A0?!0:void 0,"aria-roledescription":S,"aria-describedby":m.draggable}),[s,b,E,N,S,m.draggable]);return{active:h,activatorEvent:d,activeNodeRect:p,attributes:M,isDragging:N,listeners:s?void 0:R,node:P,over:x,setNodeRef:I,setActivatorNodeRef:k,transform:j}}function f3(){return w.useContext(Tx)}const h3="Droppable",p3={timeout:25};function m3(e){let{data:n,disabled:r=!1,id:s,resizeObserverConfig:i}=e;const a=Ni(h3),{active:c,dispatch:d,over:h,measureDroppableContainers:p}=w.useContext(yl),m=w.useRef({disabled:r}),g=w.useRef(!1),x=w.useRef(null),b=w.useRef(null),{disabled:S,updateMeasurementsFor:E,timeout:N}={...p3,...i},j=fi(E??s),P=w.useCallback(()=>{if(!g.current){g.current=!0;return}b.current!=null&&clearTimeout(b.current),b.current=setTimeout(()=>{p(Array.isArray(j.current)?j.current:[j.current]),b.current=null},N)},[N]),I=xl({callback:P,disabled:S||!c}),D=w.useCallback((M,q)=>{I&&(q&&(I.unobserve(q),g.current=!1),M&&I.observe(M))},[I]),[k,R]=Za(D),O=fi(n);return w.useEffect(()=>{!I||!k.current||(I.disconnect(),g.current=!1,I.observe(k.current))},[k,I]),w.useEffect(()=>(d({type:Nt.RegisterDroppable,element:{id:s,key:a,disabled:r,node:k,rect:x,data:O}}),()=>d({type:Nt.UnregisterDroppable,key:a,id:s})),[s]),w.useEffect(()=>{r!==m.current.disabled&&(d({type:Nt.SetDroppableDisabled,id:s,key:a,disabled:r}),m.current.disabled=r)},[s,a,r,d]),{active:c,rect:x,isOver:h?.id===s,node:k,over:h,setNodeRef:R}}function Sf(e,n,r){const s=e.slice();return s.splice(r<0?s.length+r:r,0,s.splice(n,1)[0]),s}function g3(e,n){return e.reduce((r,s,i)=>{const a=n.get(s);return a&&(r[i]=a),r},Array(e.length))}function _a(e){return e!==null&&e>=0}function v3(e,n){if(e===n)return!0;if(e.length!==n.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==n[r])return!1;return!0}function x3(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const Ef=e=>{let{rects:n,activeIndex:r,overIndex:s,index:i}=e;const a=Sf(n,s,r),c=n[i],d=a[i];return!d||!c?null:{x:d.left-c.left,y:d.top-c.top,scaleX:d.width/c.width,scaleY:d.height/c.height}},Mx="Sortable",Ox=ve.createContext({activeIndex:-1,containerId:Mx,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:Ef,disabled:{draggable:!1,droppable:!1}});function y3(e){let{children:n,id:r,items:s,strategy:i=Ef,disabled:a=!1}=e;const{active:c,dragOverlay:d,droppableRects:h,over:p,measureDroppableContainers:m}=f3(),g=Ni(Mx,r),x=d.rect!==null,b=w.useMemo(()=>s.map(R=>typeof R=="object"&&"id"in R?R.id:R),[s]),S=c!=null,E=c?b.indexOf(c.id):-1,N=p?b.indexOf(p.id):-1,j=w.useRef(b),P=!v3(b,j.current),I=N!==-1&&E===-1||P,D=x3(a);ur(()=>{P&&S&&m(b)},[P,b,S,m]),w.useEffect(()=>{j.current=b},[b]);const k=w.useMemo(()=>({activeIndex:E,containerId:g,disabled:D,disableTransforms:I,items:b,overIndex:N,useDragOverlay:x,sortedRects:g3(b,h),strategy:i}),[E,g,D.draggable,D.droppable,I,b,N,h,x,i]);return ve.createElement(Ox.Provider,{value:k},n)}const b3=e=>{let{id:n,items:r,activeIndex:s,overIndex:i}=e;return Sf(r,s,i).indexOf(n)},w3=e=>{let{containerId:n,isSorting:r,wasDragging:s,index:i,items:a,newIndex:c,previousItems:d,previousContainerId:h,transition:p}=e;return!p||!s||d!==a&&i===c?!1:r?!0:c!==i&&n===h},N3={duration:200,easing:"ease"},_x="transform",C3=pi.Transition.toString({property:_x,duration:0,easing:"linear"}),S3={roleDescription:"sortable"};function E3(e){let{disabled:n,index:r,node:s,rect:i}=e;const[a,c]=w.useState(null),d=w.useRef(r);return ur(()=>{if(!n&&r!==d.current&&s.current){const h=i.current;if(h){const p=rs(s.current,{ignoreTransform:!0}),m={x:h.left-p.left,y:h.top-p.top,scaleX:h.width/p.width,scaleY:h.height/p.height};(m.x||m.y)&&c(m)}}r!==d.current&&(d.current=r)},[n,r,s,i]),w.useEffect(()=>{a&&c(null)},[a]),a}function D3(e){let{animateLayoutChanges:n=w3,attributes:r,disabled:s,data:i,getNewIndex:a=b3,id:c,strategy:d,resizeObserverConfig:h,transition:p=N3}=e;const{items:m,containerId:g,activeIndex:x,disabled:b,disableTransforms:S,sortedRects:E,overIndex:N,useDragOverlay:j,strategy:P}=w.useContext(Ox),I=A3(s,b),D=m.indexOf(c),k=w.useMemo(()=>({sortable:{containerId:g,index:D,items:m},...i}),[g,i,D,m]),R=w.useMemo(()=>m.slice(m.indexOf(c)),[m,c]),{rect:O,node:M,isOver:q,setNodeRef:J}=m3({id:c,data:k,disabled:I.droppable,resizeObserverConfig:{updateMeasurementsFor:R,...h}}),{active:ie,activatorEvent:Y,activeNodeRect:W,attributes:re,setNodeRef:ae,listeners:ce,isDragging:ee,over:Q,setActivatorNodeRef:V,transform:F}=d3({id:c,data:k,attributes:{...S3,...r},disabled:I.draggable}),A=q5(J,ae),_=!!ie,Z=_&&!S&&_a(x)&&_a(N),oe=!j&&ee,fe=oe&&Z?F:null,Pe=Z?fe??(d??P)({rects:E,activeNodeRect:W,activeIndex:x,overIndex:N,index:D}):null,ye=_a(x)&&_a(N)?a({id:c,items:m,activeIndex:x,overIndex:N}):D,Se=ie?.id,we=w.useRef({activeId:Se,items:m,newIndex:ye,containerId:g}),ht=m!==we.current.items,Te=n({active:ie,containerId:g,isDragging:ee,isSorting:_,id:c,index:D,items:m,newIndex:we.current.newIndex,previousItems:we.current.items,previousContainerId:we.current.containerId,transition:p,wasDragging:we.current.activeId!=null}),Qe=E3({disabled:!Te,index:D,node:M,rect:O});return w.useEffect(()=>{_&&we.current.newIndex!==ye&&(we.current.newIndex=ye),g!==we.current.containerId&&(we.current.containerId=g),m!==we.current.items&&(we.current.items=m)},[_,ye,g,m]),w.useEffect(()=>{if(Se===we.current.activeId)return;if(Se!=null&&we.current.activeId==null){we.current.activeId=Se;return}const qe=setTimeout(()=>{we.current.activeId=Se},50);return()=>clearTimeout(qe)},[Se]),{active:ie,activeIndex:x,attributes:re,data:k,rect:O,index:D,newIndex:ye,items:m,isOver:q,isSorting:_,isDragging:ee,listeners:ce,node:M,overIndex:N,over:Q,setNodeRef:A,setActivatorNodeRef:V,setDroppableNodeRef:J,setDraggableNodeRef:ae,transform:Qe??Pe,transition:Ne()};function Ne(){if(Qe||ht&&we.current.newIndex===D)return C3;if(!(oe&&!yf(Y)||!p)&&(_||Te))return pi.Transition.toString({...p,property:_x})}}function A3(e,n){var r,s;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(r=e?.draggable)!=null?r:n.draggable,droppable:(s=e?.droppable)!=null?s:n.droppable}}function nl(e){if(!e)return!1;const n=e.data.current;return!!(n&&"sortable"in n&&typeof n.sortable=="object"&&"containerId"in n.sortable&&"items"in n.sortable&&"index"in n.sortable)}const j3=[Fe.Down,Fe.Right,Fe.Up,Fe.Left],I3=(e,n)=>{let{context:{active:r,collisionRect:s,droppableRects:i,droppableContainers:a,over:c,scrollableAncestors:d}}=n;if(j3.includes(e.code)){if(e.preventDefault(),!r||!s)return;const h=[];a.getEnabled().forEach(g=>{if(!g||g!=null&&g.disabled)return;const x=i.get(g.id);if(x)switch(e.code){case Fe.Down:s.top<x.top&&h.push(g);break;case Fe.Up:s.top>x.top&&h.push(g);break;case Fe.Left:s.left>x.left&&h.push(g);break;case Fe.Right:s.left<x.left&&h.push(g);break}});const p=uD({collisionRect:s,droppableRects:i,droppableContainers:h});let m=bx(p,"id");if(m===c?.id&&p.length>1&&(m=p[1].id),m!=null){const g=a.get(r.id),x=a.get(m),b=x?i.get(x.id):null,S=x?.node.current;if(S&&b&&g&&x){const N=vl(S).some((R,O)=>d[O]!==R),j=Lx(g,x),P=k3(g,x),I=N||!j?{x:0,y:0}:{x:P?s.width-b.width:0,y:P?s.height-b.height:0},D={x:b.left,y:b.top};return I.x&&I.y?D:hi(D,I)}}}};function Lx(e,n){return!nl(e)||!nl(n)?!1:e.data.current.sortable.containerId===n.data.current.sortable.containerId}function k3(e,n){return!nl(e)||!nl(n)||!Lx(e,n)?!1:e.data.current.sortable.index<n.data.current.sortable.index}const Ys=()=>/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||"ontouchstart"in window||navigator.maxTouchPoints>0,P3=({addedChords:e,activeChordIndex:n,playbackStore:r,isLiveMode:s})=>{const i=aD(id(Cf,{activationConstraint:Ys()?{delay:300,tolerance:8}:{distance:8}}),id(Ix,{activationConstraint:{delay:400,tolerance:10}}),id(wf,{coordinateGetter:I3})),a=w.useCallback(()=>{if(document.body.classList.add("dragging"),Ys()){document.body.style.overflow="hidden",document.body.style.overscrollBehavior="none",document.body.style.touchAction="none",document.body.style.userSelect="none",document.body.style.webkitUserSelect="none",document.documentElement.style.overscrollBehavior="none",document.documentElement.style.touchAction="none";const m=document.querySelector('meta[name="viewport"]');m&&(m.setAttribute("data-original-content",m.getAttribute("content")||""),m.setAttribute("content","width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"))}},[]),c=w.useCallback(()=>{if(document.body.classList.remove("dragging"),Ys()){document.body.style.overflow="",document.body.style.overscrollBehavior="",document.body.style.touchAction="",document.body.style.userSelect="",document.body.style.webkitUserSelect="",document.documentElement.style.overscrollBehavior="",document.documentElement.style.touchAction="";const m=document.querySelector('meta[name="viewport"]');if(m){const g=m.getAttribute("data-original-content");g&&(m.setAttribute("content",g),m.removeAttribute("data-original-content"))}}},[]),d=w.useCallback(m=>{const{active:g,over:x}=m;if(document.body.classList.remove("dragging"),Ys()){document.body.style.overflow="",document.body.style.overscrollBehavior="",document.body.style.touchAction="",document.body.style.userSelect="",document.body.style.webkitUserSelect="",document.documentElement.style.overscrollBehavior="",document.documentElement.style.touchAction="";const b=document.querySelector('meta[name="viewport"]');if(b){const S=b.getAttribute("data-original-content");S&&(b.setAttribute("content",S),b.removeAttribute("data-original-content"))}}if(x&&g.id!==x.id){const b=parseInt(g.id.toString().replace("chord-","")),S=parseInt(x.id.toString().replace("chord-",""));if(!isNaN(b)&&!isNaN(S)&&b>=0&&b<e.length&&S>=0&&S<e.length){const E=Sf(e,b,S);console.log("Reordered chords:",E.map(N=>N.name)),r.setAddedChords(E),n!==null&&(n===b?r.setActiveChordIndex(S):b<n&&S>=n?r.setActiveChordIndex(n-1):b>n&&S<=n&&r.setActiveChordIndex(n+1))}}},[e,n,r]),h=w.useCallback(m=>{if(!m.destination)return;const g=m.source.index,x=m.destination.index;if(g===x)return;const b=Array.from(e),[S]=b.splice(g,1);b.splice(x,0,S),r.setAddedChords(b),n!==null&&(n===g?r.setActiveChordIndex(x):g<n&&x>=n?r.setActiveChordIndex(n-1):g>n&&x<=n&&r.setActiveChordIndex(n+1))},[e,n,r]),p=w.useCallback(m=>{const{containerNodeRect:g,draggingNodeRect:x,transform:b}=m;if(!g||!x)return b;const S=Ys()?20:10,E=g.left+S,N=g.right-S,j=g.top+S,P=g.bottom-S,I=x.left+b.x,D=x.right+b.x,k=x.top+b.y,R=x.bottom+b.y;let O=b.x,M=b.y;return I<E?O=E-x.left:D>N&&(O=N-x.right),k<j?M=j-x.top:R>P&&(M=P-x.bottom),{...b,x:O,y:M}},[]);return{sensors:i,handleDragStart:a,handleDragCancel:c,handleDragEndDndKit:d,handleDragEnd:h,restrictToContainer:p}},T3=({isLiveMode:e,isEditMode:n,isDeleteMode:r,isCompactHeight:s,globalPatternState:i,addedChords:a,onTogglePlayback:c,onToggleLiveMode:d,onClearAll:h,onToggleDeleteMode:p})=>u.jsxs("div",{className:`${e?"flex-shrink-0":""} max-w-7xl mx-auto px-4 ${e?s?"pt-2 z-10":"pt-4 z-10":"pt-2"} w-full`,children:[u.jsxs("div",{className:`flex items-center justify-between ${e?s?"mb-1":"mb-3":"mb-2"}`,children:[u.jsxs("div",{className:"flex items-center space-x-4",children:[!e&&u.jsx(cr,{onClick:c,variant:"icon",size:"icon",active:i.isPlaying,title:i.isPlaying?"Stop":"Play",children:i.isPlaying?u.jsx(ri,{className:"w-4 h-4"}):u.jsx($0,{className:"w-4 h-4"})}),e&&u.jsx(cr,{onClick:c,variant:"play-stop",size:"sm",active:i.isPlaying,className:"shadow-lg",children:i.isPlaying?u.jsxs(u.Fragment,{children:[u.jsx(ri,{className:"w-4 h-4"})," Stop"]}):u.jsxs(u.Fragment,{children:[u.jsx(oi,{className:"w-4 h-4"})," Play"]})})]}),u.jsxs("div",{className:"text-center sm:w-full sm:text-left sm:mx-4",children:[u.jsxs("div",{className:"hidden sm:block text-xs font-bold text-slate-300 uppercase tracking-wider",children:["chords ",n&&u.jsx("span",{className:"text-blue-400",children:"(drag to reorder)"})]}),u.jsxs("div",{className:"block sm:hidden text-xs text-slate-300 uppercase tracking-wider",children:["chords ",n&&u.jsx("span",{className:"text-blue-400",children:"(drag)"})]})]}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("button",{onClick:d,className:Bt("w-[7em] h-8 flex items-center space-x-2 px-3 py-1.5 text-xs border rounded transition-all duration-200",e?"text-slate-200 bg-[#4a5262] border-gray-600 hover:bg-[#525a6b]":"text-slate-300 hover:text-slate-200 bg-[#4a5262] hover:bg-[#525a6b] border-gray-600"),children:e?u.jsxs(u.Fragment,{children:[u.jsx(gw,{className:"h-3 w-3"}),u.jsx("span",{children:"Collapse"})]}):u.jsxs(u.Fragment,{children:[u.jsx(xw,{className:"h-3 w-3"}),u.jsx("span",{children:"Expand"})]})}),!e&&u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:()=>{e&&d(),h()},className:"w-[5em] h-8 flex items-center justify-center px-3 py-1.5 text-xs text-slate-300 hover:text-slate-200 bg-[#4a5262] hover:bg-[#525a6b] border border-gray-600 rounded transition-all duration-200",children:"Clear"}),u.jsxs("button",{onClick:p,className:Bt("w-[7em] h-8 flex items-center space-x-2 px-3 py-1.5 text-xs border rounded transition-all duration-200",r?"text-white bg-red-600 border-red-500 hover:bg-red-700":"text-slate-300 hover:text-slate-200 bg-[#4a5262] hover:bg-[#525a6b] border-gray-600"),children:[u.jsx(G0,{className:"h-3 w-3"}),u.jsx("span",{children:r?"Done":"Delete"})]})]})]})]}),e&&!s&&u.jsxs("div",{className:"mb-4 text-sm text-center text-slate-400",children:[u.jsxs("div",{children:["Use 1-",Math.min(a.length,9)," or click chords"]}),u.jsxs("div",{className:"mt-2 text-xs",children:[u.jsx("span",{className:"inline-block w-3 h-3 mr-2 bg-blue-500 rounded-full"}),"Active Chord",n&&u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"mx-2",children:""}),u.jsx("span",{className:"text-blue-400",children:"Drag chords to reorder"})]})]})]})]});function R3(e,n,r){const s={...e};return n.top+e.y<=r.top?s.y=r.top-n.top:n.bottom+e.y>=r.top+r.height&&(s.y=r.top+r.height-n.bottom),n.left+e.x<=r.left?s.x=r.left-n.left:n.right+e.x>=r.left+r.width&&(s.x=r.left+r.width-n.right),s}const M3=e=>{let{containerNodeRect:n,draggingNodeRect:r,transform:s}=e;return!r||!n?s:R3(s,r,n)},O3=({id:e,index:n,chord:r,onEdit:s,renderChordButton:i})=>{const{attributes:a,listeners:c,setNodeRef:d,transform:h,transition:p,isDragging:m}=D3({id:e}),g={transform:pi.Transform.toString(h),transition:m?"none":p},x={...a,style:{userSelect:"none",webkitUserSelect:"none",...g}};return u.jsx("div",{ref:d,...x,...c,className:"mobile-drag-item",style:{WebkitTouchCallout:"none",WebkitTapHighlightColor:"transparent",...x.style},children:i(r,n,m,s)})},lr={DRAG_STYLES:`
        .dragging {
            overflow: hidden !important;
            touch-action: none !important;
            overscroll-behavior: none !important;
            -webkit-overflow-scrolling: auto !important;
        }
        
        .dragging * {
            pointer-events: none !important;
        }
        
        .dragging .mobile-drag-item,
        .dragging .mobile-drag-item * {
            pointer-events: auto !important;
        }
        
        @media (max-width: 768px) {
            .dragging {
                -webkit-user-select: none !important;
                user-select: none !important;
            }
        }
    `,GRID_CLASSES:{LIVE_MODE:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4 auto-rows-max pt-0",COLLAPSED_MODE:"flex space-x-2 overflow-x-auto pb-2 chord-sequence-scroll -mx-2 px-2"},BUTTON_SIZES:{LIVE_DESKTOP:{container:"py-8 px-6 text-lg min-h-[120px] flex flex-col items-center justify-center",number:"text-xl mb-2",name:"text-base text-center text-white",icon:"h-6 w-6"},LIVE_MOBILE:{container:"py-8 px-6 text-lg min-h-[140px] flex flex-col items-center justify-center",number:"text-xl mb-2",name:"text-base text-center text-white",icon:"h-6 w-6"},COLLAPSED:{container:"py-4 px-2 text-sm min-w-[85px] bottom-nav-button chord-button space-x-1 mt-1 min-h-[60px] !min-w-[70px] flex flex-col items-center justify-center",number:"text-xs mb-1",name:"text-xs",icon:"h-4 w-4"}},MOBILE_USER_AGENTS:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i},_3=()=>lr.MOBILE_USER_AGENTS.test(navigator.userAgent)||"ontouchstart"in window||navigator.maxTouchPoints>0,L3=({isLiveMode:e,isEditMode:n,onClick:r})=>u.jsx("button",{onClick:r,className:Bt("flex items-center justify-center rounded-lg border-2 border-dashed transition-all duration-200",e?"w-full h-full min-h-[120px] py-8 px-6":"w-12 h-12",n?"border-blue-500 text-blue-400 bg-blue-500/10 hover:bg-blue-500/20":"border-gray-500 text-gray-400 hover:border-gray-400 hover:text-gray-300 hover:bg-gray-500/10"),title:n?"Exit edit mode":"Edit chords",style:{minHeight:e&&_3()?"140px":void 0},children:u.jsx(md,{className:Bt(e?"w-8 h-8":"w-6 h-6",{"animate-spin":n})})}),j0=()=>lr.MOBILE_USER_AGENTS.test(navigator.userAgent)||"ontouchstart"in window||navigator.maxTouchPoints>0,F3=({children:e,onClick:n,onTouchStart:r,onTouchEnd:s,className:i="",variant:a="primary",size:c="md",disabled:d=!1,active:h=!1,"aria-label":p,"aria-expanded":m,type:g="button",title:x,style:b,chord:S,index:E,isLiveMode:N,isDeleteMode:j,isEditMode:P,isHighlighted:I,isDragging:D,sizeConfig:k})=>{const R=`
    font-medium transition-all duration-200 rounded-md border
    focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-[#2a2f38]
    disabled:opacity-50 disabled:cursor-not-allowed
    flex items-center justify-center gap-1
  `,O={sm:"py-1 px-3 text-xs",md:"py-2 px-4 text-sm",lg:"py-3 px-6 text-base"},M={primary:h?"bg-blue-600 border-blue-500 text-white focus:ring-blue-500":"bg-blue-700 border-blue-600 hover:bg-blue-600 hover:border-blue-500 text-white focus:ring-blue-500",secondary:h?"bg-[#525a6b] border-gray-500 text-white focus:ring-gray-500":"bg-[#4a5262] border-gray-600 hover:bg-[#525a6b] hover:border-gray-500 text-white focus:ring-gray-500",danger:h?"bg-red-600 border-red-500 text-white focus:ring-red-500":"bg-red-700 border-red-600 hover:bg-red-600 hover:border-red-500 text-white focus:ring-red-500",success:h?"bg-green-600 border-green-500 text-white focus:ring-green-500":"bg-green-700 border-green-600 hover:bg-green-600 hover:border-green-500 text-white focus:ring-green-500"},q=S?Bt(R,k?"":O[c],M[a],{transform:I,"shadow-xl":N,"border-blue-500 hover:border-blue-400":P,"cursor-grab active:cursor-grabbing":P&&!j0(),"opacity-80 shadow-2xl scale-105":D,"select-none":P},i):Bt(R,O[c],M[a],i);return S&&typeof E=="number"?u.jsxs("button",{type:g,onClick:n,onTouchStart:r,onTouchEnd:s,disabled:d,"aria-label":p,"aria-expanded":m,title:x,style:b,className:q,children:[j&&u.jsx(gd,{className:`absolute top-1 right-1 text-white bg-red-500 rounded-full shadow-sm ${N?"h-6 w-6":"h-4 w-4"}`}),P&&u.jsxs(u.Fragment,{children:[u.jsx(md,{className:`absolute top-1 right-1 text-white bg-blue-500 rounded-full shadow-sm p-0.5 ${N?"h-6 w-6":"h-4 w-4"}`}),u.jsx(md,{className:"absolute rounded-md  right-0 h-full w-full opacity-0"})]}),P&&j0()&&u.jsx("div",{className:"absolute inset-0 w-full bg-blue-500/5 border-2 border-blue-500/20 rounded-lg pointer-events-none"}),u.jsx("div",{className:`text-blue-200 font-bold ${k?.number||"text-xl mb-2"}`,children:E+1}),u.jsx("div",{className:`leading-tight ${k?.name||"text-base text-center text-white"}`,children:S.name}),N&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"mt-4 text-xs text-center text-slate-300",children:S.notes.replace(/,/g,"  ")}),u.jsx("div",{className:"mt-1 font-mono text-xs text-center text-slate-300",children:S.pattern.join("-")})]})]}):u.jsx("button",{type:g,onClick:n,onTouchStart:r,onTouchEnd:s,disabled:d,"aria-label":p,"aria-expanded":m,title:x,style:b,className:q,children:e})},ud=()=>lr.MOBILE_USER_AGENTS.test(navigator.userAgent)||"ontouchstart"in window||navigator.maxTouchPoints>0,B3=w.forwardRef(({isLiveMode:e,isEditMode:n,isDeleteMode:r,isCompactHeight:s,addedChords:i,activeChordIndex:a,highlightedChordIndex:c,sensors:d,onChordClick:h,onEditChord:p,onSetEditMode:m,onDragStart:g,onDragEnd:x,onDragEndDndKit:b,onDragCancel:S},E)=>{const N=(k,R,O=!1,M)=>{const q=R===a,J=R===c,ie=ae=>{ae.stopPropagation(),ae.preventDefault(),n&&M?(console.log("Opening editor for chord",R),M(R)):n||(console.log("Playing chord",R),h(k.notes,R))},Y=ae=>{n||(ae.currentTarget.style.transform="scale(0.95)")},W=ae=>{n||(ae.currentTarget.style.transform="")},re=e?ud()?lr.BUTTON_SIZES.LIVE_MOBILE:lr.BUTTON_SIZES.LIVE_DESKTOP:lr.BUTTON_SIZES.COLLAPSED;return u.jsx(F3,{onClick:ie,onTouchStart:Y,onTouchEnd:W,variant:r?"danger":n?"secondary":"primary",active:q&&!r&&!n,"aria-label":`Pattern: ${k.pattern.join("-")}`,className:`relative w-full h-full mobile-drag-item ${re.container}`,style:{touchAction:n?void 0:"auto"},chord:k,index:R,isLiveMode:e,isDeleteMode:r,isEditMode:n,isHighlighted:J,isDragging:O,sizeConfig:re},R)},j=u.jsx(L3,{isLiveMode:e,isEditMode:n,onClick:()=>m(!n)}),P=e?u.jsxs("div",{className:lr.GRID_CLASSES.LIVE_MODE,children:[i.map((k,R)=>u.jsx("div",{children:N(k,R)},R)),u.jsx("div",{children:j})]}):u.jsxs("div",{className:lr.GRID_CLASSES.COLLAPSED_MODE,children:[i.map((k,R)=>u.jsx("div",{className:"flex-shrink-0",children:N(k,R)},R)),u.jsx("div",{className:"flex-shrink-0 py-4 px-2 min-w-[85px] min-h-[60px] mt-1 flex items-center justify-center",children:j})]}),I=e?u.jsx(l3,{sensors:d,collisionDetection:cD,onDragStart:g,onDragEnd:b,onDragCancel:S,modifiers:[M3],children:u.jsx(y3,{items:i.map((k,R)=>`chord-${R}`),strategy:Ef,children:u.jsxs("div",{className:lr.GRID_CLASSES.LIVE_MODE,style:{gap:"1rem"},children:[i.map((k,R)=>u.jsx(O3,{id:`chord-${R}`,index:R,chord:k,onEdit:p,renderChordButton:N},`${k.name}-${k.notes}-${R}`)),u.jsx("div",{children:j})]})})}):u.jsx(ox,{onDragEnd:x,children:u.jsx(px,{droppableId:"chord-list",direction:"horizontal",children:k=>u.jsxs("div",{ref:k.innerRef,...k.droppableProps,className:"flex pb-2 -mx-2 overflow-x-auto space-x-2 px-2 chord-sequence-scroll",children:[i.map((R,O)=>u.jsx(cx,{draggableId:`chord-${O}`,index:O,children:(M,q)=>u.jsx("div",{ref:M.innerRef,...M.draggableProps,...M.dragHandleProps,className:"flex-shrink-0",children:N(R,O,q.isDragging,p)})},`chord-${O}`)),k.placeholder,u.jsx("div",{className:"flex-shrink-0 py-4 px-2 min-w-[85px] min-h-[60px] mt-1 flex items-center justify-center",children:j})]})})}),D=e&&!n?{WebkitOverflowScrolling:"touch",touchAction:"pan-y",overscrollBehavior:"contain",position:"relative",zIndex:1}:e&&n?{WebkitOverflowScrolling:ud()?"auto":"touch",touchAction:ud()?"pan-y":"auto",overscrollBehavior:"contain",position:"relative",zIndex:1}:void 0;return u.jsx("div",{ref:E,className:`flex-1 max-w-7xl mx-auto w-full ${e?`px-4 pb-8 ${s?"pt-1":"pt-2"} overflow-y-auto`:"px-2 pb-1"}`,style:D,children:n?I:P})}),$3=({isEditMode:e,isDeleteMode:n,addedChords:r,onClearAll:s,onToggleDeleteMode:i})=>u.jsx("div",{className:"flex-shrink-0 bg-[#2a2f38] border-t border-gray-600 px-4 py-3",children:u.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[u.jsxs("div",{className:"text-xs font-medium text-slate-400 mr-3",children:[r.length," chord",r.length!==1?"s":""," loaded",e&&u.jsx("span",{className:"ml-2 text-blue-400",children:" Edit Mode: Click chords to edit"})]}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("button",{onClick:s,className:"w-[5em] h-8 flex items-center justify-center px-3 py-1.5 text-xs text-slate-300 hover:text-slate-200 bg-[#4a5262] hover:bg-[#525a6b] border border-gray-600 rounded transition-all duration-200",children:"Clear"}),u.jsxs("button",{onClick:i,className:Bt("w-[7em] h-8 flex items-center space-x-2 px-3 py-1.5 text-xs border rounded transition-all duration-200",n?"text-white bg-red-600 border-red-500 hover:bg-red-700":"text-slate-300 hover:text-slate-200 bg-[#4a5262] hover:bg-[#525a6b] border-gray-600"),children:[u.jsx(G0,{className:"h-3 w-3"}),u.jsx("span",{children:n?"Done":"Delete"})]})]})]})}),G3=()=>{const e=ct(),n=Oe(),r=yt(),s=Cr(),{addedChords:i,activeChordIndex:a,highlightedChordIndex:c}=n,{isDeleteMode:d,isLiveMode:h}=s,{globalPatternState:p}=r,{chords:m}=e,[g,x]=w.useState(null),{isEditMode:b,setIsEditMode:S,isCompactHeight:E,scrollContainerRef:N,handleChordClick:j,handleUpdateChord:P,handleEditChord:I,handleCloseEditor:D,handleNavigateToChord:k,handleClearAll:R,handleTogglePlayback:O,handleToggleDeleteMode:M,handleToggleLiveMode:q}=H5({musicStore:e,playbackStore:n,patternStore:r,uiStore:s,setEditingChordIndex:x}),{sensors:J,handleDragStart:ie,handleDragCancel:Y,handleDragEndDndKit:W,handleDragEnd:re}=P3({addedChords:i,activeChordIndex:a,playbackStore:n,isLiveMode:h});if(i.length===0)return null;if(g!==null){const ce=i[g];if(ce)return u.jsx(V5,{editingChordIndex:g,editingChord:ce,totalChords:i.length,chords:m,onUpdateChord:P,onFetchOriginalChord:n.handleFetchOriginalChord,onChordClick:j,onClose:D,onNavigateToChord:k})}const ae=h?"fixed inset-0 bg-[#1a1e24] bg-opacity-95 backdrop-blur-sm z-50 flex flex-col":"fixed bottom-0 left-0 right-0 bg-[#2a2f38] bg-[#363c46] border-t border-gray-600 shadow-2xl z-50";return u.jsxs("div",{className:ae,style:h?{touchAction:"none",overscrollBehavior:"none"}:void 0,children:[u.jsx("style",{children:lr.DRAG_STYLES}),u.jsx(T3,{isLiveMode:h,isEditMode:b,isDeleteMode:d,isCompactHeight:E,globalPatternState:p,addedChords:i,onTogglePlayback:O,onToggleLiveMode:q,onClearAll:R,onToggleDeleteMode:M}),u.jsx(B3,{ref:N,isLiveMode:h,isEditMode:b,isDeleteMode:d,isCompactHeight:E,addedChords:i,activeChordIndex:a,highlightedChordIndex:c,sensors:J,onChordClick:j,onEditChord:I,onSetEditMode:S,onDragStart:ie,onDragEnd:re,onDragEndDndKit:W,onDragCancel:Y}),h&&u.jsx($3,{isEditMode:b,isDeleteMode:d,addedChords:i,onClearAll:R,onToggleDeleteMode:M})]})},Md=({size:e=48,className:n=""})=>u.jsxs("div",{className:`relative flex items-center ${n}`,children:[u.jsx("div",{className:"relative",style:{width:e,height:e},children:u.jsxs("svg",{viewBox:"0 0 48 48",style:{width:e,height:e},children:[u.jsx("polygon",{points:"24,2 38,12 38,28 24,38 10,28 10,12",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"text-slate-300"}),u.jsx("circle",{cx:"18",cy:"20",r:"2",fill:"currentColor",className:"text-slate-400"}),u.jsx("circle",{cx:"30",cy:"20",r:"2",fill:"currentColor",className:"text-slate-400"}),u.jsx("circle",{cx:"24",cy:"28",r:"2",fill:"currentColor",className:"text-slate-400"}),u.jsx("line",{x1:"18",y1:"20",x2:"24",y2:"28",stroke:"currentColor",strokeWidth:"1.5",className:"text-slate-400"}),u.jsx("line",{x1:"30",y1:"20",x2:"24",y2:"28",stroke:"currentColor",strokeWidth:"1.5",className:"text-slate-400"}),u.jsx("line",{x1:"18",y1:"20",x2:"30",y2:"20",stroke:"currentColor",strokeWidth:"1.5",className:"text-slate-400"})]})}),u.jsx("div",{className:"absolute -top-1 -right-0 w-2 h-2 border border-slate-400 transform rotate-45"})]}),U3=()=>{const e=s=>{const i=s.match(/\/([A-G](##|#|bb|b)?)/);return i?i[1]:null},n=s=>s.replace(/\/[A-G](##|#|bb|b)?/,"");return{transposeChords:w.useCallback(async(s,i,a,c)=>{const d=Oe.getState().addedChords;if(d.length===0)return;const h=s!==a?O0(s,a):0,[p,m]=await Promise.all([Jr.getModeKeyChords(a,c),Jr.getAllDistinctChords()]),g=d.map(x=>{const b=e(x.name),S=n(x.name),E=h!==0?pd(S,h):S,N=b&&h!==0?pd(b,h):b,j=N?`${E}/${N}`:E;let P;h!==0?P=Ua(x.notes,h):P=x.notes;const D=(p.find(k=>k.chordName===E)||m.find(k=>k.chordName===E))?.chordNoteNames||(x.originalNotes&&h!==0?Ua(x.originalNotes,h):x.originalNotes||P);return{...x,name:j,notes:P,originalKey:a,originalMode:c,originalNotes:D}});Oe.getState().setAddedChords(g)},[])}},I0=({currentKey:e,mode:n,modes:r,pianoSettings:s,availableInstruments:i,isPlayingScale:a,scaleNotes:c,transposeEnabled:d,isDesktop:h=!1,onKeyChange:p,onModeChange:m,onInstrumentChange:g,onToggleTranspose:x,onToggleScalePlayback:b})=>{const S={key:h?"w-[5rem]":"w-[6em]",mode:h?"w-[11rem]":"w-[14rem]",voice:"w-[14rem]"},E=h?"flex flex-col bg-[#3d434f]/30 border border-gray-600/30 rounded-lg px-6 py-4":"space-y-4",N=h?"w-px h-8 bg-gray-600/50 mx-8":"hidden",j=h?"text-sm text-slate-300 font-medium whitespace-nowrap":"text-sm text-slate-300 font-medium whitespace-nowrap w-16 flex items-center";return h?u.jsxs("div",{className:E,children:[u.jsxs("div",{className:"flex items-center",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("span",{className:j,children:"Key:"}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(ar,{value:e,className:S.key,buttonClassName:"px-3 py-1.5 text-center font-medium text-xs h-10 flex items-center justify-center",menuClassName:`min-w-[${S.key}]`,onChange:p,showSearch:!1,options:ti}),u.jsx(cr,{onClick:b,variant:"play-stop",size:"icon",className:"!w-8 !h-8 flex items-center justify-center ml-1",active:a,title:a?"Stop scale":`Play ${e} ${n} scale`,disabled:!c||c.length===0,children:a?u.jsx(ri,{className:"w-6 h-6"}):u.jsx(oi,{className:"w-6 h-6"})})]})]}),u.jsx("div",{className:N}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("span",{className:j,children:"Mode:"}),r&&u.jsx(ar,{value:n,className:S.mode,buttonClassName:"px-3 py-1.5 text-left font-medium text-xs h-10 flex items-center",menuClassName:`min-w-[${S.mode}]`,onChange:m,showSearch:!0,options:r})]}),u.jsx("div",{className:N}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("span",{className:j,children:"Voice:"}),u.jsx(ar,{value:s.instrumentName.replaceAll("_"," "),className:S.voice,buttonClassName:"px-3 py-1.5 text-left font-medium text-xs h-10 flex items-center",menuClassName:"min-w-[11rem]",onChange:g,showSearch:!0,options:i.map(P=>P.replaceAll("_"," "))})]})]}),u.jsx("div",{className:"flex items-start mt-3",children:u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("span",{className:"text-sm text-slate-300 font-medium whitespace-nowrap invisible",children:"Key:"}),u.jsx("button",{onClick:x,className:`relative flex items-center justify-center px-4 py-2 rounded-lg text-xs font-medium uppercase tracking-wide transition-all duration-200 border ${d?"bg-gradient-to-r from-blue-600 to-blue-700 text-white border-blue-600 shadow-lg shadow-blue-600/25":"bg-[#3d434f] text-slate-400 border-gray-600 hover:bg-[#4a5262] hover:text-slate-300"}`,title:"When enabled, changing key or mode will transpose all added chords",children:u.jsxs("div",{className:`flex items-center gap-2 ${d?"text-white":""}`,children:[u.jsx("div",{className:`w-2 h-2 rounded-full transition-colors duration-200 ${d?"bg-white":"bg-slate-500"}`}),u.jsx("span",{children:"Transpose"})]})})]})})]}):u.jsxs("div",{className:E,children:[u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx("span",{className:`${j} mt-2`,children:"Key:"}),u.jsxs("div",{className:"flex flex-col gap-2",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(ar,{value:e,className:S.key,buttonClassName:"px-3 py-1.5 text-center font-medium text-xs h-10 flex items-center justify-center",menuClassName:"min-w-[6rem]",onChange:p,showSearch:!1,options:ti}),u.jsx(cr,{onClick:b,variant:"play-stop",size:"icon",className:"!w-8 !h-8 flex items-center justify-center ml-1",active:a,title:a?"Stop scale":`Play ${e} ${n} scale`,disabled:!c||c.length===0,children:a?u.jsx(ri,{className:"w-6 h-6"}):u.jsx(oi,{className:"w-6 h-6"})})]}),u.jsx("button",{onClick:x,className:`relative flex items-center justify-center px-4 py-2 rounded-lg text-xs font-medium uppercase tracking-wide transition-all duration-200 border max-w-[13em] ${d?"bg-gradient-to-r from-blue-600 to-blue-700 text-white border-blue-600 shadow-lg shadow-blue-600/25":"bg-[#3d434f] text-slate-400 border-gray-600 hover:bg-[#4a5262] hover:text-slate-300"}`,title:"When enabled, changing key or mode will transpose all added chords",children:u.jsxs("div",{className:`flex items-center gap-2 ${d?"text-white":""}`,children:[u.jsx("div",{className:`w-2 h-2 rounded-full transition-colors duration-200 ${d?"bg-white":"bg-slate-500"}`}),u.jsx("span",{children:"Transpose"})]})})]})]}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("span",{className:j,children:"Mode:"}),r&&u.jsx(ar,{value:n,className:S.mode,buttonClassName:"px-3 py-1.5 text-left font-medium text-xs h-10 flex items-center",menuClassName:`min-w-[${S.mode}]`,onChange:m,showSearch:!0,options:r})]}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("span",{className:j,children:"Voice:"}),u.jsx(ar,{value:s.instrumentName.replaceAll("_"," "),className:S.voice,buttonClassName:"px-3 py-1.5 text-left font-medium text-xs h-10 flex items-center",menuClassName:"min-w-[11rem]",onChange:g,showSearch:!0,options:i.map(P=>P.replaceAll("_"," "))})]})]})},V3=(e,n=4)=>{const r={C:0,"C#":1,Db:1,D:2,"D#":3,Eb:3,E:4,F:5,"F#":6,Gb:6,G:7,"G#":8,Ab:8,A:9,"A#":10,Bb:10,B:11};return(n+1)*12+(r[e]??0)},z3=({className:e="",onKeyChange:n,onModeChange:r,onInstrumentChange:s})=>{const i=ct(Ne=>Ne.key),a=ct(Ne=>Ne.mode),c=ct(Ne=>Ne.modes),d=ct(Ne=>Ne.scaleNotes),h=Ye(Ne=>Ne.pianoSettings),p=Ye(Ne=>Ne.availableInstruments),m=Oe(Ne=>Ne.isPlayingScale),g=yt(Ne=>Ne.globalPatternState),{setKey:x,setMode:b}=ct(),{setPianoInstrument:S,setCutOffPreviousNotes:E,setEq:N,setOctaveOffset:j,setReverbLevel:P,setNoteDuration:I,setVolume:D,setChorusLevel:k,setDelayLevel:R,setDistortionLevel:O,setBitcrusherLevel:M,setPhaserLevel:q,setFlangerLevel:J,setRingModLevel:ie,setAutoFilterLevel:Y,setTremoloLevel:W,setStereoWidthLevel:re,setCompressorLevel:ae}=Ye(),{setIsPlayingScale:ce,clearScalePlaybackTimeouts:ee,setActiveNotes:Q}=Oe(),[V,F]=w.useState(!1),[A,_]=w.useState(!1),{transposeChords:Z}=U3(),oe=w.useRef([]),fe=w.useRef(!1);w.useEffect(()=>{(async()=>{i&&a&&i!=="C"&&d.length===0&&(console.log("Forcing data load for key:",i),x(i))})()},[]),w.useEffect(()=>{(async()=>{if(await new Promise(et=>setTimeout(et,200)),!d||d.length===0){console.log("No scale notes, fetching for",i,a),await ct.getState().fetchMusicData(i,a);return}const qe=d[0]?.noteName;if(qe){const et=Zr(qe),Rt=Zr(i);et!==Rt&&await ct.getState().fetchMusicData(i,a)}})()},[i,a,d]);const he=Ne=>{const qe=Ne.replaceAll(" ","_");s?s(qe):S(qe)},Pe=async Ne=>{n?n(Ne):(A&&await Z(i,a,Ne,a),x(Ne))},ye=async Ne=>{r?r(Ne):(A&&await Z(i,a,i,Ne),b(Ne))},Se=w.useCallback(()=>{oe.current.forEach(Ne=>clearTimeout(Ne)),oe.current=[],fe.current=!1},[]),we=w.useCallback(Ne=>6e4/Ne/2,[]),ht=w.useCallback(()=>{if(!d||d.length===0){console.warn("No scale notes available to play");return}Se();const Ne=g?.bpm||120,qe=we(Ne);fe.current=!0,ce(!0);const et=[...d];if(d.length>0){const We=d[0];et.push({...We,seqNote:We.seqNote?We.seqNote+12:void 0})}const Rt=et.map(We=>{const pt=Zr(We.noteName)||"C",vt=4,Dn=We.seqNote?We.seqNote:V3(pt,vt);return{note:pt,octave:vt,sortValue:Dn}}).sort((We,pt)=>We.sortValue-pt.sortValue),tn=We=>({C:0,"C#":1,Db:1,D:2,"D#":3,Eb:3,E:4,F:5,"F#":6,Gb:6,G:7,"G#":8,Ab:8,A:9,"A#":10,Bb:10,B:11})[We]??0,Kt=[];let ut=4,Xe=-1;for(let We=0;We<Rt.length;We++){const pt=Rt[We],vt=tn(pt.note);(Xe!==-1&&Xe===11&&vt<=11&&vt<Xe||Xe!==-1&&vt<Xe&&!(Xe===11&&vt===0))&&ut++,Kt.push({note:pt.note,octave:ut}),Xe=vt}Kt.forEach((We,pt)=>{const vt=setTimeout(()=>{if(!fe.current)return;Q([We]);const Dn=setTimeout(()=>{fe.current&&Q([])},qe*.8);if(oe.current.push(Dn),pt===Kt.length-1){const mn=setTimeout(()=>{fe.current&&Te()},qe);oe.current.push(mn)}},pt*qe);oe.current.push(vt)})},[d,g,ce,Q,Se,we]),Te=w.useCallback(()=>{Se(),Q([]),ce(!1),ee&&ee()},[Se,Q,ce,ee]),Qe=w.useCallback(()=>{m||fe.current?Te():ht()},[m,ht,Te]);return ve.useEffect(()=>()=>Se(),[Se]),u.jsx("div",{className:`w-full max-w-7xl mx-auto px-2 sm:mt-2 mt-0 mb-0 ${e}`,children:u.jsxs("div",{className:"bg-[#3d434f] border border-gray-600 rounded-lg overflow-hidden",children:[u.jsx("div",{className:"px-4 py-3 border-b border-gray-600",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("h2",{className:"text-sm font-bold text-slate-300 uppercase tracking-wider",children:"Controls"}),u.jsx("button",{onClick:()=>F(!V),className:"w-[7em] h-8 flex items-center space-x-2 px-3 py-1.5 text-xs text-slate-300 hover:text-slate-200 bg-[#4a5262] hover:bg-[#525a6b] border border-gray-600 rounded transition-all duration-200",children:V?u.jsxs(u.Fragment,{children:[u.jsx(ni,{className:"w-3 h-3"}),u.jsx("span",{children:"Settings"})]}):u.jsxs(u.Fragment,{children:[u.jsx(Co,{className:"w-3 h-3"}),u.jsx("span",{children:"Settings"})]})})]})}),u.jsx("div",{className:"p-6 py-4 bg-[#444b59]",children:u.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-start lg:justify-center gap-6",children:[u.jsxs("div",{className:"hidden lg:flex items-center justify-between w-full",children:[u.jsx("div",{className:"flex-shrink-0 opacity-30",children:u.jsx(Md,{size:80})}),u.jsx("div",{className:"flex-shrink-0",children:u.jsx(I0,{currentKey:i,mode:a,modes:c,pianoSettings:h,availableInstruments:p,isPlayingScale:m,scaleNotes:d,transposeEnabled:A,isDesktop:!0,onKeyChange:Pe,onModeChange:ye,onInstrumentChange:he,onToggleTranspose:()=>_(!A),onToggleScalePlayback:Qe})}),u.jsx("div",{className:"hidden [@media(min-width:72em)]:flex flex-shrink-0 opacity-30",children:u.jsx(Md,{size:80})})]}),u.jsx("div",{className:"lg:hidden",children:u.jsx(I0,{currentKey:i,mode:a,modes:c,pianoSettings:h,availableInstruments:p,isPlayingScale:m,scaleNotes:d,transposeEnabled:A,isDesktop:!1,onKeyChange:Pe,onModeChange:ye,onInstrumentChange:he,onToggleTranspose:()=>_(!A),onToggleScalePlayback:Qe})})]})}),u.jsx("div",{className:`transition-all duration-300 ease-in-out overflow-hidden ${V?" opacity-100":"max-h-0 opacity-0"}`,children:u.jsxs("div",{className:"border-t border-gray-600 bg-[#3d434f]",children:[u.jsx("div",{className:"px-4 py-3 border-b border-gray-600",children:u.jsx("h3",{className:"text-left text-sm font-medium text-slate-200 uppercase tracking-wider",children:"Piano Settings"})}),u.jsx("div",{className:"p-6 bg-[#444b59]",children:u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-x-8 gap-y-8",children:[u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("div",{className:"bg-[#3d434f] border border-gray-600 rounded px-3 py-2 mb-4",children:u.jsx("h4",{className:"text-xs font-medium text-slate-200 uppercase tracking-wider",children:"Basic"})}),u.jsxs("div",{className:"space-y-4",children:[u.jsx(Ft,{label:"Volume",value:h.volume,min:0,max:1,step:.05,onChange:D,showPercentage:!0,showBypass:!0}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-medium text-slate-200 mb-2 uppercase tracking-wide",children:"Octave Shift"}),u.jsxs("div",{className:"flex items-center justify-between bg-[#3d434f] border border-gray-600 rounded-md p-1.5",children:[u.jsx("button",{onClick:()=>j(Math.max(-3,h.octaveOffset-1)),className:"w-6 h-6 flex items-center justify-center text-slate-300 hover:text-slate-200 hover:bg-[#4a5262] rounded transition-colors",disabled:h.octaveOffset<=-3,children:""}),u.jsx("span",{className:"font-mono text-xs text-slate-200 px-2",children:h.octaveOffset===0?"Normal":`${h.octaveOffset>0?"+":""}${h.octaveOffset} octave${Math.abs(h.octaveOffset)>1?"s":""}`}),u.jsx("button",{onClick:()=>j(Math.min(3,h.octaveOffset+1)),className:"w-6 h-6 flex items-center justify-center text-slate-300 hover:text-slate-200 hover:bg-[#4a5262] rounded transition-colors",disabled:h.octaveOffset>=3,children:"+"})]})]}),u.jsx(Ft,{label:"Note Duration",value:h.noteDuration,min:.1,max:1,step:.05,onChange:I,showPercentage:!0}),u.jsx("div",{children:u.jsxs("label",{className:"flex items-center cursor-pointer",children:[u.jsx("input",{type:"checkbox",className:"w-3.5 h-3.5 text-blue-600 bg-[#3d434f] border-gray-600 rounded focus:ring-blue-500 focus:ring-1",checked:h.cutOffPreviousNotes,onChange:Ne=>E(Ne.target.checked)}),u.jsx("span",{className:"ml-2 text-xs text-slate-300 uppercase tracking-wide",children:"Cut off previous notes"})]})})]})]}),u.jsxs("div",{className:"pt-2",children:[u.jsx("div",{className:"bg-[#3d434f] border border-gray-600 rounded px-3 py-2 mb-4",children:u.jsx("h4",{className:"text-xs font-medium text-slate-200 uppercase tracking-wider",children:"Equalizer"})}),u.jsx("div",{className:"space-y-3",children:[{label:"Bass",key:"bass"},{label:"Mid",key:"mid"},{label:"Treble",key:"treble"}].map(({label:Ne,key:qe})=>u.jsx(Ft,{label:Ne,showBypass:!0,value:h.eq[qe],min:-24,max:24,step:.5,variant:"split",onChange:et=>{const Rt={...h.eq,[qe]:et};N(Rt)},formatValue:et=>`${et>0?"+":""}${et.toFixed(1)}dB`},qe))})]})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("div",{className:"bg-[#3d434f] border border-gray-600 rounded px-3 py-2 mb-4",children:u.jsx("h4",{className:"text-xs font-medium text-slate-200 uppercase tracking-wider",children:"Effects"})}),u.jsx(Ft,{label:"Reverb",value:h.reverbLevel,min:0,max:1,step:.05,onChange:P,showPercentage:!0,showBypass:!0}),u.jsx(Ft,{label:"Chorus",value:h.chorusLevel,min:0,max:1,step:.05,onChange:k,showPercentage:!0,showBypass:!0}),u.jsx(Ft,{label:"Delay",value:h.delayLevel,min:0,max:1,step:.05,onChange:R,showPercentage:!0,showBypass:!0}),u.jsx(Ft,{label:"Phaser",value:h.phaserLevel,min:0,max:1,step:.05,onChange:q,showPercentage:!0,showBypass:!0}),u.jsx(Ft,{label:"Flanger",value:h.flangerLevel,min:0,max:1,step:.05,onChange:J,showPercentage:!0,showBypass:!0}),u.jsx(Ft,{label:"Tremolo",value:h.tremoloLevel,min:0,max:1,step:.05,onChange:W,showPercentage:!0,showBypass:!0})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("div",{className:"bg-[#3d434f] border border-gray-600 rounded px-3 py-2 mb-4",children:u.jsx("h4",{className:"text-xs font-medium text-slate-200 uppercase tracking-wider",children:"Extended"})}),u.jsx(Ft,{label:"Distortion",value:h.distortionLevel,min:0,max:1,step:.05,onChange:O,showPercentage:!0,showBypass:!0}),u.jsx(Ft,{label:"Bitcrusher",value:h.bitcrusherLevel,min:0,max:1,step:.05,onChange:M,showPercentage:!0,showBypass:!0}),u.jsx(Ft,{label:"Ring Mod",value:h.ringModLevel,min:0,max:1,step:.05,onChange:ie,showPercentage:!0,showBypass:!0}),u.jsx(Ft,{label:"Auto-Filter",value:h.autoFilterLevel,min:0,max:1,step:.05,onChange:Y,showPercentage:!0,showBypass:!0}),u.jsx(Ft,{label:"Stereo Width",value:h.stereoWidthLevel,min:0,max:1,step:.05,onChange:re,showPercentage:!0,showBypass:!0}),u.jsx(Ft,{label:"Compressor",value:h.compressorLevel,min:0,max:1,step:.05,onChange:ae,showPercentage:!0,showBypass:!0})]})]})})]})})]})})},Fx=({isOpen:e,onClose:n,children:r,className:s="",showCloseButton:i=!0,closeOnBackdropClick:a=!0,title:c,fixedHeader:d=!1})=>{if(!e)return null;const h=p=>{a&&p.target===p.currentTarget&&n()};return u.jsxs("div",{className:"fixed inset-0 z-[1000] flex items-center justify-center p-4",children:[u.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:h}),u.jsxs("div",{className:`relative bg-[#3d434f] border border-gray-600 rounded-lg shadow-xl w-full animate-in fade-in-0 zoom-in-95 duration-200 ${d?"flex flex-col max-h-full":""} ${s}`,children:[(c||i)&&u.jsxs("div",{className:`flex items-center justify-between p-4 border-b border-gray-600 bg-[#3d434f] rounded-t-lg ${d?"flex-shrink-0":""}`,children:[c&&u.jsx("h3",{className:"text-sm font-semibold text-slate-200 uppercase tracking-wide",children:c}),i&&u.jsx("button",{onClick:n,className:"w-6 h-6 flex items-center justify-center rounded-full hover:bg-slate-600 text-slate-400 hover:text-slate-200 transition-colors ml-auto",children:u.jsx(Hw,{className:"w-4 h-4"})})]}),d?u.jsx("div",{className:"flex-1 min-h-0 overflow-y-auto",children:r}):r]})]})},W3=({isOpen:e,onClose:n,onOpenHelp:r})=>{const s=()=>{n(),r()};return u.jsx(Fx,{isOpen:e,onClose:n,title:"About",className:"max-w-2xl max-h-[85vh]",fixedHeader:!0,children:u.jsxs("div",{className:"p-6 space-y-6",children:[u.jsx("div",{className:"bg-[#2a2f38] rounded-lg border border-gray-600 overflow-hidden",children:u.jsxs("div",{className:"p-4 text-sm leading-relaxed space-y-3 text-slate-300 text-left",children:[u.jsx("p",{children:"Modal Chord Buildr is a music learning, composition, and performance tool built with React. The app provides an intuitive interface for exploring musical scales and building chord progressions, while also offering basic synth and sequencer functionality."}),u.jsxs("p",{children:["For more details on how to use this app, please refer to the"," ",u.jsx("button",{onClick:s,className:"font-semibold text-blue-400 hover:text-blue-300 underline underline-offset-2 transition-colors cursor-pointer",children:"Help & Guide"})," ","documentation."]})]})}),u.jsxs("div",{className:"bg-[#2a2f38] rounded-lg border border-gray-600 overflow-hidden",children:[u.jsx("div",{className:"bg-[#444b59] px-4 py-3 border-b border-gray-600",children:u.jsx("h4",{className:"text-sm font-semibold text-white uppercase tracking-wide",children:"Key Features"})}),u.jsx("div",{className:"p-4",children:u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{className:"flex items-start space-x-3 p-2 rounded-md hover:bg-[#3d434f]/50 transition-colors",children:[u.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-400 mt-2 flex-shrink-0"}),u.jsx("span",{className:"text-sm text-slate-300 text-left",children:"Interactive piano with multiple instruments and audio effects"})]}),u.jsxs("div",{className:"flex items-start space-x-3 p-2 rounded-md hover:bg-[#3d434f]/50 transition-colors",children:[u.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-400 mt-2 flex-shrink-0"}),u.jsx("span",{className:"text-sm text-slate-300 text-left",children:"Pattern sequencer with customizable rhythmic patterns"})]}),u.jsxs("div",{className:"flex items-start space-x-3 p-2 rounded-md hover:bg-[#3d434f]/50 transition-colors",children:[u.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-400 mt-2 flex-shrink-0"}),u.jsx("span",{className:"text-sm text-slate-300 text-left",children:"Extensive chord explorer with mode-based chord generation"})]}),u.jsxs("div",{className:"flex items-start space-x-3 p-2 rounded-md hover:bg-[#3d434f]/50 transition-colors",children:[u.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-400 mt-2 flex-shrink-0"}),u.jsx("span",{className:"text-sm text-slate-300 text-left",children:"Real-time visualization of scale notes and chord relationships"})]}),u.jsxs("div",{className:"flex items-start space-x-3 p-2 rounded-md hover:bg-[#3d434f]/50 transition-colors",children:[u.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-400 mt-2 flex-shrink-0"}),u.jsx("span",{className:"text-sm text-slate-300 text-left",children:"Live mode for performance and improvisation"})]})]})})]}),u.jsxs("div",{className:"bg-[#2a2f38] rounded-lg border border-gray-600 overflow-hidden",children:[u.jsx("div",{className:"bg-[#444b59] px-4 py-3 border-b border-gray-600",children:u.jsx("h4",{className:"text-sm font-semibold text-white uppercase tracking-wide",children:"Links"})}),u.jsxs("div",{className:"p-4 space-y-3",children:[u.jsxs("a",{href:"https://github.com/jekrch/chord-analyzr",target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-3 p-3 rounded-lg bg-[#3d434f]/50 hover:bg-[#4a5262]/70 transition-all duration-200 group",children:[u.jsx("div",{className:"w-8 h-8 flex items-center justify-center rounded-full bg-gray-700 group-hover:bg-gray-600 transition-colors",children:u.jsx("svg",{className:"w-5 h-5 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:u.jsx("path",{fillRule:"evenodd",d:"M10 0C4.477 0 0 4.484 0 10.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0110 4.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.203 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.942.359.31.678.921.678 1.856 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0020 10.017C20 4.484 15.522 0 10 0z",clipRule:"evenodd"})})}),u.jsxs("div",{className:"flex-1 text-left",children:[u.jsx("div",{className:"text-sm font-medium text-white group-hover:text-blue-200 transition-colors",children:"GitHub Repository"}),u.jsx("div",{className:"text-xs text-slate-400",children:"View source code and documentation"})]})]}),u.jsxs("a",{href:"https://jacobkrch.com",target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-3 p-3 rounded-lg bg-[#3d434f]/50 hover:bg-[#4a5262]/70 transition-all duration-200 group",children:[u.jsx("div",{className:"w-8 h-8 flex items-center justify-center rounded-full bg-blue-600 group-hover:bg-blue-500 transition-colors",children:u.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})}),u.jsx("div",{className:"flex-1 text-left",children:u.jsx("div",{className:"text-sm font-medium text-white group-hover:text-blue-200 transition-colors",children:"jacobkrch.com"})})]})]})]}),u.jsx("div",{className:"pt-4 border-t border-gray-600/50",children:u.jsx("p",{className:"text-xs text-slate-400 text-left",children:" 2025 Jacob Krch. All rights reserved."})})]})})},ir=({title:e,children:n,defaultOpen:r=!1})=>{const[s,i]=w.useState(r);return u.jsxs("div",{className:"bg-[#2a2f38] rounded-lg border border-gray-600 overflow-hidden mb-4",children:[u.jsxs("button",{onClick:()=>i(!s),className:"w-full flex items-center justify-between p-4 text-left bg-[#444b59] border-b border-gray-600 hover:bg-[#4a5262] transition-all duration-200",children:[u.jsx("h4",{className:"text-sm font-semibold text-white uppercase tracking-wide",children:e}),s?u.jsx(Co,{className:"w-4 h-4 text-slate-300 flex-shrink-0"}):u.jsx(B0,{className:"w-4 h-4 text-slate-300 flex-shrink-0"})]}),s&&u.jsx("div",{className:"p-4 text-slate-300",children:n})]})},H3=({isOpen:e,onClose:n})=>u.jsx(Fx,{isOpen:e,onClose:n,title:"Help & Guide",className:"max-w-4xl max-h-[85vh]",fixedHeader:!0,children:u.jsxs("div",{className:"p-6 space-y-4",children:[u.jsx(ir,{title:"Quick Start",defaultOpen:!0,children:u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex items-start space-x-4 p-3 rounded-lg bg-[#3d434f]/30 hover:bg-[#3d434f]/50 transition-colors",children:[u.jsx("div",{className:"w-8 h-8 flex items-center justify-center rounded-full bg-blue-600 text-white text-sm font-bold flex-shrink-0",children:"1"}),u.jsxs("div",{className:"text-left",children:[u.jsx("div",{className:"text-sm font-semibold text-white mb-1",children:"Choose a Key & Mode"}),u.jsx("div",{className:"text-sm text-slate-300",children:"Use the Controls section to select your musical key and mode (like C Ionian, D# Lydian, etc.)"})]})]}),u.jsxs("div",{className:"flex items-start space-x-4 p-3 rounded-lg bg-[#3d434f]/30 hover:bg-[#3d434f]/50 transition-colors",children:[u.jsx("div",{className:"w-8 h-8 flex items-center justify-center rounded-full bg-blue-600 text-white text-sm font-bold flex-shrink-0",children:"2"}),u.jsxs("div",{className:"text-left",children:[u.jsx("div",{className:"text-sm font-semibold text-white mb-1",children:"Explore Chords"}),u.jsx("div",{className:"text-sm text-slate-300",children:"Browse the Chord Explorer below to discover chords that fit your chosen key/mode"})]})]}),u.jsxs("div",{className:"flex items-start space-x-4 p-3 rounded-lg bg-[#3d434f]/30 hover:bg-[#3d434f]/50 transition-colors",children:[u.jsx("div",{className:"w-8 h-8 flex items-center justify-center rounded-full bg-blue-600 text-white text-sm font-bold flex-shrink-0",children:"3"}),u.jsxs("div",{className:"text-left",children:[u.jsx("div",{className:"text-sm font-semibold text-white mb-1",children:"Build Sequences"}),u.jsx("div",{className:"text-sm text-slate-300",children:"Click the + button on chords to add them to your sequence"})]})]}),u.jsxs("div",{className:"flex items-start space-x-4 p-3 rounded-lg bg-[#3d434f]/30 hover:bg-[#3d434f]/50 transition-colors",children:[u.jsx("div",{className:"w-8 h-8 flex items-center justify-center rounded-full bg-blue-600 text-white text-sm font-bold flex-shrink-0",children:"4"}),u.jsxs("div",{className:"text-left",children:[u.jsx("div",{className:"text-sm font-semibold text-white mb-1",children:"Create Patterns"}),u.jsx("div",{className:"text-sm text-slate-300",children:"Use the Sequencer to create rhythmic patterns for your chords"})]})]}),u.jsxs("div",{className:"flex items-start space-x-4 p-3 rounded-lg bg-[#3d434f]/30 hover:bg-[#3d434f]/50 transition-colors",children:[u.jsx("div",{className:"w-8 h-8 flex items-center justify-center rounded-full bg-blue-600 text-white text-sm font-bold flex-shrink-0",children:"5"}),u.jsxs("div",{className:"text-left",children:[u.jsx("div",{className:"text-sm font-semibold text-white mb-1",children:"Play & Perform"}),u.jsx("div",{className:"text-sm text-slate-300",children:"Hit Play to hear your creation, or use Live Mode for real-time performance"})]})]})]})}),u.jsx(ir,{title:"Keyboard Shortcuts",children:u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[u.jsxs("div",{className:"space-y-3",children:[u.jsx("h5",{className:"text-white font-semibold text-sm border-b border-gray-600 pb-2 text-left",children:"Playback Control"}),u.jsxs("div",{className:"flex items-center justify-between p-2 rounded-md bg-[#3d434f]/30",children:[u.jsx("span",{className:"text-sm text-left",children:"Play/Pause sequencer"}),u.jsx("kbd",{className:"px-2 py-1 bg-gray-700 rounded text-xs font-mono",children:"Space"})]})]}),u.jsxs("div",{className:"space-y-3",children:[u.jsx("h5",{className:"text-white font-semibold text-sm border-b border-gray-600 pb-2 text-left",children:"Navigation"}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"flex items-center justify-between p-2 rounded-md bg-[#3d434f]/30",children:[u.jsx("span",{className:"text-sm text-left",children:"Expand chord buttons"}),u.jsx("kbd",{className:"px-2 py-1 bg-gray-700 rounded text-xs font-mono",children:"L"})]}),u.jsxs("div",{className:"flex items-center justify-between p-2 rounded-md bg-[#3d434f]/30",children:[u.jsx("span",{className:"text-sm text-left",children:"Select chord from sequence"}),u.jsx("kbd",{className:"px-2 py-1 bg-gray-700 rounded text-xs font-mono",children:"1-9"})]})]})]})]})}),u.jsx(ir,{title:"Piano & Audio Controls",children:u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"p-4 rounded-lg bg-[#3d434f]/30",children:[u.jsx("h5",{className:"text-white font-semibold mb-3 text-sm text-left",children:"Piano Interaction"}),u.jsx("p",{className:"text-sm text-left",children:"Click piano keys to play individual notes. The piano highlights scale notes and chord tones based on your current selection."})]}),u.jsxs("div",{className:"p-4 rounded-lg bg-[#3d434f]/30",children:[u.jsx("h5",{className:"text-white font-semibold mb-3 text-sm text-left",children:"Audio Settings"}),u.jsx("p",{className:"text-sm mb-3 text-left",children:"Access comprehensive audio controls through the Settings panel in the Controls section:"}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"flex items-start space-x-2 text-sm",children:[u.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-400 mt-2 flex-shrink-0"}),u.jsxs("div",{className:"text-left",children:[u.jsx("strong",{className:"text-white",children:"Voice:"})," ",u.jsx("span",{className:"text-slate-300",children:"Choose from multiple instrument sounds"})]})]}),u.jsxs("div",{className:"flex items-start space-x-2 text-sm",children:[u.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-400 mt-2 flex-shrink-0"}),u.jsxs("div",{className:"text-left",children:[u.jsx("strong",{className:"text-white",children:"Volume & Octave:"})," ",u.jsx("span",{className:"text-slate-300",children:"Adjust overall volume and pitch range"})]})]}),u.jsxs("div",{className:"flex items-start space-x-2 text-sm",children:[u.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-400 mt-2 flex-shrink-0"}),u.jsxs("div",{className:"text-left",children:[u.jsx("strong",{className:"text-white",children:"Effects:"})," ",u.jsx("span",{className:"text-slate-300",children:"Add reverb, chorus, and delay"})]})]}),u.jsxs("div",{className:"flex items-start space-x-2 text-sm",children:[u.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-400 mt-2 flex-shrink-0"}),u.jsxs("div",{className:"text-left",children:[u.jsx("strong",{className:"text-white",children:"Equalizer:"})," ",u.jsx("span",{className:"text-slate-300",children:"Shape the sound with bass, mid, and treble controls"})]})]}),u.jsxs("div",{className:"flex items-start space-x-2 text-sm",children:[u.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-400 mt-2 flex-shrink-0"}),u.jsxs("div",{className:"text-left",children:[u.jsx("strong",{className:"text-white",children:"Note Duration:"})," ",u.jsx("span",{className:"text-slate-300",children:"Control how long notes ring out"})]})]})]})]})]})}),u.jsx(ir,{title:"Pattern Sequencer",children:u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"p-4 rounded-lg bg-[#3d434f]/30",children:[u.jsx("h5",{className:"text-white font-semibold mb-3 text-sm text-left",children:"Understanding Patterns"}),u.jsx("p",{className:"text-sm mb-3 text-left",children:"Patterns control which chord tones play at different time steps. Each step can be:"}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"flex items-center space-x-3 p-2 rounded-md bg-[#2a2f38]",children:[u.jsx("code",{className:"px-2 py-1 bg-gray-700 rounded text-xs font-mono text-white min-w-[4rem] text-center",children:""}),u.jsx("span",{className:"text-sm text-slate-300 text-left",children:"Rest/silence (represented as 'x' in custom patterns)"})]}),u.jsxs("div",{className:"flex items-center space-x-3 p-2 rounded-md bg-[#2a2f38]",children:[u.jsx("code",{className:"px-2 py-1 bg-gray-700 rounded text-xs font-mono text-white min-w-[4rem] text-center",children:"1, 2, 3..."}),u.jsx("span",{className:"text-sm text-slate-300 text-left",children:"Play the 1st, 2nd, 3rd... note of the chord"})]}),u.jsxs("div",{className:"flex items-center space-x-3 p-2 rounded-md bg-[#2a2f38]",children:[u.jsx("code",{className:"px-2 py-1 bg-gray-700 rounded text-xs font-mono text-white min-w-[4rem] text-center",children:"1, 2..."}),u.jsx("span",{className:"text-sm text-slate-300 text-left",children:"Play the note one octave higher ('+' in custom patterns)"})]})]})]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[u.jsxs("div",{className:"p-4 rounded-lg bg-[#3d434f]/30",children:[u.jsx("h5",{className:"text-white font-semibold mb-3 text-sm text-left",children:"Pattern Controls"}),u.jsxs("div",{className:"space-y-2 text-sm text-left",children:[u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Add/Remove Steps:"})," Use the +/- buttons to change pattern length (1-16 steps)"]}),u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Pattern Presets:"})," Choose from pre-built patterns organized by category and note count"]}),u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Custom Patterns:"}),' Enter your own pattern using notation like "1,x,3,2+" and click Apply']}),u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Visual Feedback:"})," Blue indicator shows the currently playing step"]})]})]}),u.jsxs("div",{className:"p-4 rounded-lg bg-[#3d434f]/30",children:[u.jsx("h5",{className:"text-white font-semibold mb-3 text-sm text-left",children:"Timing Controls"}),u.jsxs("div",{className:"space-y-2 text-sm text-left",children:[u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"BPM:"})," Set tempo from 60-200 beats per minute"]}),u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Subdivision:"})," Choose note duration (32nd, 16th, 8th, quarter, half notes)"]}),u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Swing:"})," Add groove by delaying alternate notes (0-50%)"]})]})]})]}),u.jsxs("div",{className:"p-4 rounded-lg bg-[#3d434f]/30",children:[u.jsx("h5",{className:"text-white font-semibold mb-3 text-sm text-left",children:"Chord-Specific Patterns"}),u.jsx("p",{className:"text-sm mb-3 text-left",children:"Each chord in your sequence can have its own unique pattern:"}),u.jsxs("div",{className:"space-y-2 text-sm text-left",children:[u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Global Pattern:"}),' The default pattern that plays when no chord is selected (shown with cyan "Global Pattern" label)']}),u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Chord Pattern:"})," Select a chord from your sequence to edit its specific pattern (shown with purple chord name label)"]}),u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Automatic Switching:"})," The sequencer automatically uses each chord's pattern during playback"]}),u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Visual Indicators:"})," Pattern editor shows which chord you're currently editing"]})]})]}),u.jsxs("div",{className:"p-4 rounded-lg bg-[#3d434f]/30",children:[u.jsx("h5",{className:"text-white font-semibold mb-3 text-sm text-left",children:"Pattern Presets"}),u.jsx("p",{className:"text-sm mb-3 text-left",children:"Browse categorized pattern presets to quickly create common rhythmic patterns:"}),u.jsxs("div",{className:"space-y-2 text-sm text-left",children:[u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Filter by Note Count:"}),' Enable "Hide patterns with fewer notes" to show only patterns that use all available chord notes']}),u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Categories:"})," Patterns are organized by style (Arpeggios, Rhythmic, Bass Lines, etc.)"]}),u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Visual Preview:"})," Each preset shows its pattern notation before applying"]})]})]})]})}),u.jsx(ir,{title:"MIDI Recording & Export",children:u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"p-4 rounded-lg bg-[#3d434f]/30",children:[u.jsx("h5",{className:"text-white font-semibold mb-3 text-sm text-left",children:"Automatic MIDI Recording"}),u.jsx("p",{className:"text-sm mb-3 text-left",children:"The app automatically records your sequencer performances as standard MIDI files that you can export and use in any DAW or music software."}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"flex items-start space-x-3 p-2 rounded-md bg-[#2a2f38]",children:[u.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-400 mt-2 flex-shrink-0"}),u.jsxs("div",{className:"text-sm text-left",children:[u.jsx("strong",{className:"text-white",children:"Start Recording:"})," ",u.jsx("span",{className:"text-slate-300",children:"Recording begins automatically when you press Play on the sequencer"})]})]}),u.jsxs("div",{className:"flex items-start space-x-3 p-2 rounded-md bg-[#2a2f38]",children:[u.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-400 mt-2 flex-shrink-0"}),u.jsxs("div",{className:"text-sm text-left",children:[u.jsx("strong",{className:"text-white",children:"Recording Indicator:"})," ",u.jsx("span",{className:"text-slate-300",children:'A red pulsing indicator appears showing "Recording MIDI" during playback'})]})]}),u.jsxs("div",{className:"flex items-start space-x-3 p-2 rounded-md bg-[#2a2f38]",children:[u.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-400 mt-2 flex-shrink-0"}),u.jsxs("div",{className:"text-sm text-left",children:[u.jsx("strong",{className:"text-white",children:"Stop Recording:"})," ",u.jsx("span",{className:"text-slate-300",children:"Recording stops when you press Stop or Pause on the sequencer"})]})]}),u.jsxs("div",{className:"flex items-start space-x-3 p-2 rounded-md bg-[#2a2f38]",children:[u.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-400 mt-2 flex-shrink-0"}),u.jsxs("div",{className:"text-sm text-left",children:[u.jsx("strong",{className:"text-white",children:"Save MIDI:"})," ",u.jsx("span",{className:"text-slate-300",children:'After stopping, a green "Save MIDI" button appears - click to download your recording'})]})]})]})]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[u.jsxs("div",{className:"p-4 rounded-lg bg-[#3d434f]/30",children:[u.jsx("h5",{className:"text-white font-semibold mb-3 text-sm text-left",children:"What Gets Recorded"}),u.jsxs("div",{className:"space-y-2 text-sm text-left",children:[u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Note Events:"})," All notes played by the sequencer with accurate timing"]}),u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Tempo:"})," Your BPM setting is preserved in the MIDI file"]}),u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Duration:"})," Note lengths based on your note duration setting"]}),u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Patterns:"})," Records the full sequence including chord-specific patterns"]})]})]}),u.jsxs("div",{className:"p-4 rounded-lg bg-[#3d434f]/30",children:[u.jsx("h5",{className:"text-white font-semibold mb-3 text-sm text-left",children:"Using MIDI Files"}),u.jsxs("div",{className:"space-y-2 text-sm text-left",children:[u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Import to DAW:"})," Drag the .mid file into any music production software"]}),u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Change Instruments:"})," Assign any virtual instrument or sound"]}),u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Further Editing:"})," Edit timing, velocities, and notes in your DAW"]}),u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Timestamped Files:"})," Each export is automatically named with a timestamp"]})]})]})]}),u.jsxs("div",{className:"p-4 rounded-lg bg-[#3d434f]/30",children:[u.jsx("h5",{className:"text-white font-semibold mb-3 text-sm text-left",children:"Tips for MIDI Recording"}),u.jsxs("div",{className:"space-y-2 text-sm text-left",children:[u.jsx("div",{children:"Set your desired BPM and timing before starting playback"}),u.jsx("div",{children:"Let the sequence play through completely for the best recording"}),u.jsx("div",{children:"Multiple recordings can be made - each creates a new file"}),u.jsx("div",{children:'The "Save MIDI" button remains available until you start a new recording'})]})]})]})}),u.jsx(ir,{title:"Chord Explorer & Sequences",children:u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[u.jsxs("div",{className:"p-4 rounded-lg bg-[#3d434f]/30",children:[u.jsx("h5",{className:"text-white font-semibold mb-3 text-sm text-left",children:"Finding Chords"}),u.jsx("p",{className:"text-sm mb-3 text-left",children:"The Chord Explorer shows all chords that fit your selected key and mode. You can:"}),u.jsxs("div",{className:"space-y-2 text-sm text-left",children:[u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Filter by root note"})," to find specific chord types"]}),u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Search"})," for chord names or note combinations"]}),u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Click to preview"})," any chord"]}),u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Click "})," to see the individual notes in a chord"]})]})]}),u.jsxs("div",{className:"p-4 rounded-lg bg-[#3d434f]/30",children:[u.jsx("h5",{className:"text-white font-semibold mb-3 text-sm text-left",children:"Building Sequences"}),u.jsxs("p",{className:"text-sm mb-3 text-left",children:["Add chords to your sequence using the ",u.jsx("span",{className:"text-green-400 font-bold",children:"+"})," button. Your chord sequence appears at the bottom where you can:"]}),u.jsxs("div",{className:"space-y-2 text-sm text-left",children:[u.jsx("div",{children:"Click any chord to play it immediately"}),u.jsx("div",{children:"Use numbers 1-9 to jump between chords"}),u.jsx("div",{children:"Toggle Delete mode to remove unwanted chords"}),u.jsx("div",{children:"Clear all chords to start fresh"}),u.jsxs("div",{children:[u.jsx("strong",{className:"text-blue-400",children:"Click the gear icon"})," to enter Edit mode and modify chords"]})]})]})]})}),u.jsx(ir,{title:"Chord Editing",children:u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"p-4 rounded-lg bg-[#3d434f]/30",children:[u.jsx("h5",{className:"text-white font-semibold mb-3 text-sm text-left",children:"Edit Mode"}),u.jsxs("p",{className:"text-sm mb-3 text-left",children:["Click the ",u.jsx("span",{className:"text-blue-400 font-bold",children:"gear icon"})," next to your chord sequence to enter Edit Mode. In this mode, you can:"]}),u.jsxs("div",{className:"space-y-2 text-sm text-left",children:[u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Click any chord"})," to open the chord editor"]}),u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Modify chord voicings"})," by reordering notes"]}),u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Add slash chords"})," to change the bass note"]}),u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Preview changes"})," before saving them"]})]})]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[u.jsxs("div",{className:"p-4 rounded-lg bg-[#3d434f]/30",children:[u.jsx("h5",{className:"text-white font-semibold mb-3 text-sm text-left",children:"Slash Chords"}),u.jsx("p",{className:"text-sm mb-3 text-left",children:"Create slash chords (like C/E) by specifying a bass note:"}),u.jsxs("div",{className:"space-y-2 text-sm text-left",children:[u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Bass Note Field:"})," Enter a note name (e.g., E, Gb, C)"]}),u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Automatic Voicing:"})," The bass note moves to the lowest position"]}),u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Chord Name:"})," Updates to show the slash notation (C/E)"]}),u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Remove Bass:"})," Clear the field to return to original chord"]})]})]}),u.jsxs("div",{className:"p-4 rounded-lg bg-[#3d434f]/30",children:[u.jsx("h5",{className:"text-white font-semibold mb-3 text-sm text-left",children:"Note Reordering"}),u.jsx("p",{className:"text-sm mb-3 text-left",children:"Change the order of chord notes for different voicings:"}),u.jsxs("div",{className:"space-y-2 text-sm text-left",children:[u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Drag & Drop:"})," Drag notes to reorder them"]}),u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Arrow Buttons:"})," Use up/down arrows to move notes"]}),u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Auto-Detection:"})," Slash note updates automatically when you change the bass"]}),u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Visual Feedback:"})," Slash notes are highlighted in amber"]})]})]})]}),u.jsxs("div",{className:"p-4 rounded-lg bg-[#3d434f]/30",children:[u.jsx("h5",{className:"text-white font-semibold mb-3 text-sm text-left",children:"Editor Controls"}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[u.jsxs("div",{className:"space-y-2 text-sm text-left",children:[u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Preview:"})," Click the play button to hear your changes"]}),u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Save:"})," Green checkmark to confirm edits"]}),u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Cancel:"})," Discard changes and close editor"]})]}),u.jsxs("div",{className:"space-y-2 text-sm text-left",children:[u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Original Notes:"})," Editor preserves original chord voicing"]}),u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Real-time Updates:"})," Changes reflect immediately in the editor"]}),u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Full-screen:"})," Editor takes over the entire interface for focused editing"]})]})]})]})]})}),u.jsx(ir,{title:"Live Mode",children:u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"p-4 rounded-lg bg-[#3d434f]/30",children:[u.jsx("h5",{className:"text-white font-semibold mb-3 text-sm text-left",children:"Performance Mode"}),u.jsx("p",{className:"text-sm mb-3 text-left",children:"Live Mode expands your chord sequence into a full-screen performance interface perfect for:"}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"flex items-start space-x-3 p-2 rounded-md bg-[#2a2f38]",children:[u.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-400 mt-2 flex-shrink-0"}),u.jsxs("div",{className:"text-sm text-left",children:[u.jsx("strong",{className:"text-white",children:"Live performance:"})," ",u.jsx("span",{className:"text-slate-300",children:"Large, touch-friendly chord buttons"})]})]}),u.jsxs("div",{className:"flex items-start space-x-3 p-2 rounded-md bg-[#2a2f38]",children:[u.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-400 mt-2 flex-shrink-0"}),u.jsxs("div",{className:"text-sm text-left",children:[u.jsx("strong",{className:"text-white",children:"Practice sessions:"})," ",u.jsx("span",{className:"text-slate-300",children:"Easy chord switching with visual feedback"})]})]}),u.jsxs("div",{className:"flex items-start space-x-3 p-2 rounded-md bg-[#2a2f38]",children:[u.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-400 mt-2 flex-shrink-0"}),u.jsxs("div",{className:"text-sm text-left",children:[u.jsx("strong",{className:"text-white",children:"Composition:"})," ",u.jsx("span",{className:"text-slate-300",children:"Hear chord progressions in real-time"})]})]})]})]}),u.jsxs("div",{className:"p-4 rounded-lg bg-[#3d434f]/30",children:[u.jsx("h5",{className:"text-white font-semibold mb-3 text-sm text-left",children:"Using Live Mode"}),u.jsxs("div",{className:"space-y-2 text-sm text-left",children:[u.jsx("div",{children:'Click "Expand" in the chord sequence to enter Live Mode'}),u.jsx("div",{children:"Use keyboard numbers 1-9 or click/tap chord buttons"}),u.jsx("div",{children:"The sequencer continues playing your patterns"}),u.jsx("div",{children:"Active chord is highlighted in blue"})]})]})]})}),u.jsxs(ir,{title:"Interface Tips",children:[u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[u.jsx("div",{className:"space-y-4",children:u.jsxs("div",{className:"p-4 rounded-lg bg-[#3d434f]/30",children:[u.jsx("h5",{className:"text-white font-semibold mb-3 text-sm text-left",children:"Navigation"}),u.jsxs("div",{className:"space-y-2 text-sm text-left",children:[u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Sequencer Header:"})," Click to show/hide the pattern editor"]}),u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Settings Panels:"})," Most sections have expandable settings"]}),u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Status Indicators:"})," Top bar shows current key, mode, and playback status"]})]})]})}),u.jsx("div",{className:"space-y-4",children:u.jsxs("div",{className:"p-4 rounded-lg bg-[#3d434f]/30",children:[u.jsx("h5",{className:"text-white font-semibold mb-3 text-sm text-left",children:"Visual Feedback"}),u.jsxs("div",{className:"space-y-2 text-sm text-left",children:[u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Piano Keys:"})," Scale notes are highlighted in blue"]}),u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Chord Tones:"})," Active chord notes show in brighter colors"]}),u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Step Indicator:"})," Shows current position in the pattern"]}),u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Animations:"})," Visual feedback for chord changes and playback"]})]})]})})]}),u.jsxs("div",{className:"p-4 rounded-lg bg-[#3d434f]/30 mt-4",children:[u.jsx("h5",{className:"text-white font-semibold mb-3 text-sm text-left",children:"Responsive Design"}),u.jsx("p",{className:"text-sm text-left",children:"The interface adapts to different screen sizes. On mobile devices, some controls are simplified and touch-optimized for better usability."})]})]}),u.jsx(ir,{title:"Troubleshooting",children:u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[u.jsxs("div",{className:"p-4 rounded-lg bg-[#3d434f]/30",children:[u.jsx("h5",{className:"text-white font-semibold mb-3 text-sm text-left",children:"Audio Issues"}),u.jsxs("div",{className:"space-y-2 text-sm text-left",children:[u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"No sound:"})," Check device volume and ensure audio isn't muted"]}),u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"iOS devices:"})," Tap any button first to initialize audio"]}),u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Distorted audio:"})," Lower the volume setting in piano controls"]})]})]}),u.jsxs("div",{className:"p-4 rounded-lg bg-[#3d434f]/30",children:[u.jsx("h5",{className:"text-white font-semibold mb-3 text-sm text-left",children:"Performance"}),u.jsxs("div",{className:"space-y-2 text-sm text-left",children:[u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Lag or glitches:"})," Close other browser tabs using audio"]}),u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Mobile performance:"})," Use lower reverb/effect settings for better performance"]})]})]})]})}),u.jsx("div",{className:"mt-8 pt-6 border-t border-gray-600/50",children:u.jsx("p",{className:"text-xs text-slate-400 text-left",children:"Need more help? Check the GitHub repository for detailed documentation and examples."})})]})}),k0=()=>{const[e,n]=w.useState(!1),[r,s]=w.useState(!1),[i,a]=w.useState(!1),c=w.useRef(null),d=w.useRef(null),h=ct(),{key:p,mode:m}=h;w.useEffect(()=>{const b=S=>{c.current&&d.current&&!c.current.contains(S.target)&&!d.current.contains(S.target)&&a(!1)};return document.addEventListener("mousedown",b),()=>document.removeEventListener("mousedown",b)},[]);const g=b=>{b(),a(!1)},x=()=>{s(!0)};return u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"bg-[#3d434f] border-b border-gray-600",children:u.jsx("div",{className:"relative",children:u.jsxs("div",{className:"flex items-center justify-between px-6 py-4",children:[u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsx(Md,{className:"mt-2"}),u.jsx("div",{className:"flex items-center space-x-3",children:u.jsxs("div",{className:"flex flex-col items-start",children:[u.jsx("h1",{className:"text-xl font-bold text-blue-500 tracking-tight leading-none",children:"modal"}),u.jsxs("div",{className:"flex items-center space-x-0.5",children:[u.jsx("span",{className:"text-xs text-slate-400 font-medium uppercase tracking-widest",children:"chord"}),u.jsx("div",{className:"w-1 h-1 mr-[0.2em] bg-slate-400"}),u.jsx("span",{className:"text-xs text-slate-400 font-medium uppercase tracking-widest",children:"buildr"})]})]})})]}),u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsxs("div",{className:"hidden sm:flex items-center space-x-2 text-sm",children:[u.jsx("div",{className:"px-2 py-0.5 bg-[#444b59] border border-gray-600 rounded text-slate-300 font-mono",children:p}),u.jsx("div",{className:"w-px h-4 bg-slate-600"}),u.jsx("div",{className:"px-2 py-1 bg-[#444b59] border border-gray-600 rounded text-slate-300 text-xs font-mono",children:m})]}),u.jsxs("div",{className:"relative",children:[u.jsx("button",{ref:d,onClick:()=>a(!i),className:"w-9 h-9 flex items-center justify-center text-slate-400 hover:text-slate-200 hover:bg-[#4a5262] rounded-lg transition-all duration-200 border border-transparent hover:border-gray-600",title:"Menu",children:u.jsx(jw,{className:"w-5 h-5"})}),i&&u.jsx("div",{ref:c,className:"absolute right-0 mt-2 w-64 bg-[#3d434f] border border-gray-600 rounded-lg shadow-xl z-50 overflow-hidden",children:u.jsxs("div",{className:"py-2",children:[u.jsxs("button",{onClick:()=>g(()=>n(!0)),className:"w-full px-4 py-2.5 text-left flex items-center space-x-3 text-slate-400 hover:text-slate-200 hover:bg-[#4a5262] transition-all duration-150",children:[u.jsx(kw,{className:"w-4 h-4 flex-shrink-0"}),u.jsx("span",{className:"text-sm font-medium",children:"About"})]}),u.jsxs("button",{onClick:()=>g(()=>s(!0)),className:"w-full px-4 py-2.5 text-left flex items-center space-x-3 text-slate-400 hover:text-slate-200 hover:bg-[#4a5262] transition-all duration-150",children:[u.jsx(Uw,{className:"w-4 h-4 flex-shrink-0"}),u.jsx("span",{className:"text-sm font-medium",children:"Help"})]})]})})]})]})]})})}),u.jsx(W3,{isOpen:e,onClose:()=>n(!1),onOpenHelp:x}),u.jsx(H3,{isOpen:r,onClose:()=>s(!1)})]})},q3=(e,n,r,s)=>e?s:n!==null&&r[n]?.pattern?r[n].pattern:s,K3=({className:e=""})=>{const n=yt(b=>b.globalPatternState.isPlaying),r=yt(b=>b.globalPatternState.bpm),s=yt(b=>b.globalPatternState.currentStep),i=yt(b=>b.currentlyActivePattern),a=Oe(b=>b.temporaryChord),c=Oe(b=>b.activeChordIndex),d=Oe(b=>b.addedChords),h=w.useMemo(()=>q3(a,c,d,i),[a,c,d,i]),p=w.useMemo(()=>c!==null?d[c]:null,[c,d]),m=w.useMemo(()=>h.join("-"),[h]),g=h.length>0?h.length:1,x=s%g+1;return n?u.jsx("div",{className:Bt("w-full px-2 mx-auto items-center",e),children:u.jsx("div",{className:"px-6 py-3 bg-green-900 bg-opacity-50 rounded-lg border border-green-700 w-full max-w-7xl mx-auto",children:u.jsxs("div",{className:"text-sm text-green-300 flex items-center justify-center space-x-4",children:[u.jsxs("div",{className:"flex items-center",children:[u.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse mr-2"}),u.jsx("span",{className:"font-medium",children:"Sequencer Active"})]}),u.jsxs("div",{className:"text-xs opacity-80 font-mono",children:[m," |",` ${r}`," BPM | Step ",x,"/",g,a&&u.jsxs("span",{className:"ml-2 text-yellow-300",children:[" ",a.name]}),!a&&p&&u.jsxs("span",{className:"ml-2 text-purple-300",children:[" ",p.name]})]})]})})}):null},Y3=ve.memo(K3);function Q3(){const{isLiveMode:e,handleChordClick:n,addChordClick:r}=fw(),s=w.useRef(null),i=w.useRef(!1),[a,c]=w.useState(!1),d=w.useRef(!1),h=w.useRef(null),p=w.useCallback(()=>{const g=window.innerHeight,x=parseFloat(getComputedStyle(document.documentElement).fontSize),b=g<35*x;b!==d.current&&(d.current=b,c(b),setTimeout(()=>{h.current&&(h.current.style.overflow="hidden",h.current.offsetHeight,h.current.style.overflow="auto")},50))},[]);w.useEffect(()=>{let g;const x=()=>{clearTimeout(g),g=setTimeout(p,100)},b=()=>{setTimeout(()=>{if(p(),h.current&&/Mobi|Android/i.test(navigator.userAgent)){const S=h.current;S.style.overflowY="hidden",S.style.touchAction="pan-y",S.offsetHeight,S.style.overflowY="auto",S.style.WebkitOverflowScrolling="touch"}},250)};return p(),window.addEventListener("resize",x,{passive:!0}),window.addEventListener("orientationchange",b,{passive:!0}),()=>{clearTimeout(g),window.removeEventListener("resize",x),window.removeEventListener("orientationchange",b)}},[p]),w.useEffect(()=>{if(h.current){const g=h.current;g.style.WebkitOverflowScrolling="touch",g.style.touchAction="pan-y",g.style.overscrollBehavior="contain"}},[a]);const m=async()=>{if(!i.current)try{await s.current?.play(),i.current=!0,document.removeEventListener("touchstart",m),document.removeEventListener("mousedown",m),document.removeEventListener("click",m)}catch(g){console.error("failed to initialize audio:",g)}};return w.useEffect(()=>(document.addEventListener("touchstart",m),document.addEventListener("mousedown",m),document.addEventListener("click",m),()=>{document.removeEventListener("touchstart",m),document.removeEventListener("mousedown",m),document.removeEventListener("click",m)}),[]),u.jsxs("div",{className:"select-none text-center bg-[#282c34] min-h-screen h-screen w-screen overflow-hidden flex flex-col",children:[u.jsx("audio",{ref:s,preload:"auto",children:u.jsx("source",{src:"/silence.mp3",type:"audio/mp3"})}),!a&&u.jsx("div",{className:"flex-shrink-0",children:u.jsx(k0,{})}),u.jsxs("div",{ref:h,className:"flex-1 overflow-y-auto flex flex-col",style:{WebkitOverflowScrolling:"touch",touchAction:"pan-y",overscrollBehavior:"contain"},children:[a&&u.jsx("div",{className:"flex-shrink-0",children:u.jsx(k0,{})}),u.jsxs("div",{className:`flex flex-col items-center justify-start text-[calc(10px+2vmin)] text-white p-4 space-y-4x pb-32 ${a?"":"mt-2"} ${e?"pointer-events-none opacity-30":""}`,children:[u.jsx("div",{className:"w-full max-w-7xl mb-6",children:u.jsx(IN,{hideConfigControls:!0})}),u.jsx(z3,{}),u.jsx(wC,{}),u.jsx(Y3,{className:"mt-4"}),u.jsx("div",{className:"w-full max-w-7xl mb-20 mt-4",children:u.jsx(qw,{onChordClick:n,addChordClick:r})})]})]}),u.jsx("div",{className:"flex-shrink-0",children:u.jsx(G3,{})})]})}Rb.createRoot(document.getElementById("root")).render(u.jsx(ve.StrictMode,{children:u.jsx(Q3,{})}));export{Uw as F,Fx as M,u as j,w as r};
