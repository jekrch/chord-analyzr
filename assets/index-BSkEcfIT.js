(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const d of l.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function o(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(a){if(a.ep)return;a.ep=!0;const l=o(a);fetch(a.href,l)}})();var na=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Pr(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function ny(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var n=e.default;if(typeof n=="function"){var o=function s(){var a=!1;try{a=this instanceof s}catch{}return a?Reflect.construct(n,arguments,this.constructor):n.apply(this,arguments)};o.prototype=n.prototype}else o={};return Object.defineProperty(o,"__esModule",{value:!0}),Object.keys(e).forEach(function(s){var a=Object.getOwnPropertyDescriptor(e,s);Object.defineProperty(o,s,a.get?a:{enumerable:!0,get:function(){return e[s]}})}),o}var jc={exports:{}},vs={},Ac={exports:{}},Te={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fh;function ry(){if(fh)return Te;fh=1;var e=Symbol.for("react.element"),n=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),d=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),g=Symbol.iterator;function y(D){return D===null||typeof D!="object"?null:(D=g&&D[g]||D["@@iterator"],typeof D=="function"?D:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,E={};function S(D,F,ae){this.props=D,this.context=F,this.refs=E,this.updater=ae||w}S.prototype.isReactComponent={},S.prototype.setState=function(D,F){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,F,"setState")},S.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function B(){}B.prototype=S.prototype;function $(D,F,ae){this.props=D,this.context=F,this.refs=E,this.updater=ae||w}var P=$.prototype=new B;P.constructor=$,C(P,S.prototype),P.isPureReactComponent=!0;var T=Array.isArray,A=Object.prototype.hasOwnProperty,I={current:null},R={key:!0,ref:!0,__self:!0,__source:!0};function M(D,F,ae){var de,ne={},pe=null,Ae=null;if(F!=null)for(de in F.ref!==void 0&&(Ae=F.ref),F.key!==void 0&&(pe=""+F.key),F)A.call(F,de)&&!R.hasOwnProperty(de)&&(ne[de]=F[de]);var ve=arguments.length-2;if(ve===1)ne.children=ae;else if(1<ve){for(var le=Array(ve),he=0;he<ve;he++)le[he]=arguments[he+2];ne.children=le}if(D&&D.defaultProps)for(de in ve=D.defaultProps,ve)ne[de]===void 0&&(ne[de]=ve[de]);return{$$typeof:e,type:D,key:pe,ref:Ae,props:ne,_owner:I.current}}function Y(D,F){return{$$typeof:e,type:D.type,key:F,ref:D.ref,props:D.props,_owner:D._owner}}function ee(D){return typeof D=="object"&&D!==null&&D.$$typeof===e}function oe(D){var F={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(ae){return F[ae]})}var O=/\/+/g;function V(D,F){return typeof D=="object"&&D!==null&&D.key!=null?oe(""+D.key):F.toString(36)}function U(D,F,ae,de,ne){var pe=typeof D;(pe==="undefined"||pe==="boolean")&&(D=null);var Ae=!1;if(D===null)Ae=!0;else switch(pe){case"string":case"number":Ae=!0;break;case"object":switch(D.$$typeof){case e:case n:Ae=!0}}if(Ae)return Ae=D,ne=ne(Ae),D=de===""?"."+V(Ae,0):de,T(ne)?(ae="",D!=null&&(ae=D.replace(O,"$&/")+"/"),U(ne,F,ae,"",function(he){return he})):ne!=null&&(ee(ne)&&(ne=Y(ne,ae+(!ne.key||Ae&&Ae.key===ne.key?"":(""+ne.key).replace(O,"$&/")+"/")+D)),F.push(ne)),1;if(Ae=0,de=de===""?".":de+":",T(D))for(var ve=0;ve<D.length;ve++){pe=D[ve];var le=de+V(pe,ve);Ae+=U(pe,F,ae,le,ne)}else if(le=y(D),typeof le=="function")for(D=le.call(D),ve=0;!(pe=D.next()).done;)pe=pe.value,le=de+V(pe,ve++),Ae+=U(pe,F,ae,le,ne);else if(pe==="object")throw F=String(D),Error("Objects are not valid as a React child (found: "+(F==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":F)+"). If you meant to render a collection of children, use an array instead.");return Ae}function X(D,F,ae){if(D==null)return D;var de=[],ne=0;return U(D,de,"","",function(pe){return F.call(ae,pe,ne++)}),de}function J(D){if(D._status===-1){var F=D._result;F=F(),F.then(function(ae){(D._status===0||D._status===-1)&&(D._status=1,D._result=ae)},function(ae){(D._status===0||D._status===-1)&&(D._status=2,D._result=ae)}),D._status===-1&&(D._status=0,D._result=F)}if(D._status===1)return D._result.default;throw D._result}var se={current:null},q={transition:null},Q={ReactCurrentDispatcher:se,ReactCurrentBatchConfig:q,ReactCurrentOwner:I};function K(){throw Error("act(...) is not supported in production builds of React.")}return Te.Children={map:X,forEach:function(D,F,ae){X(D,function(){F.apply(this,arguments)},ae)},count:function(D){var F=0;return X(D,function(){F++}),F},toArray:function(D){return X(D,function(F){return F})||[]},only:function(D){if(!ee(D))throw Error("React.Children.only expected to receive a single React element child.");return D}},Te.Component=S,Te.Fragment=o,Te.Profiler=a,Te.PureComponent=$,Te.StrictMode=s,Te.Suspense=p,Te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Q,Te.act=K,Te.cloneElement=function(D,F,ae){if(D==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+D+".");var de=C({},D.props),ne=D.key,pe=D.ref,Ae=D._owner;if(F!=null){if(F.ref!==void 0&&(pe=F.ref,Ae=I.current),F.key!==void 0&&(ne=""+F.key),D.type&&D.type.defaultProps)var ve=D.type.defaultProps;for(le in F)A.call(F,le)&&!R.hasOwnProperty(le)&&(de[le]=F[le]===void 0&&ve!==void 0?ve[le]:F[le])}var le=arguments.length-2;if(le===1)de.children=ae;else if(1<le){ve=Array(le);for(var he=0;he<le;he++)ve[he]=arguments[he+2];de.children=ve}return{$$typeof:e,type:D.type,key:ne,ref:pe,props:de,_owner:Ae}},Te.createContext=function(D){return D={$$typeof:d,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},D.Provider={$$typeof:l,_context:D},D.Consumer=D},Te.createElement=M,Te.createFactory=function(D){var F=M.bind(null,D);return F.type=D,F},Te.createRef=function(){return{current:null}},Te.forwardRef=function(D){return{$$typeof:f,render:D}},Te.isValidElement=ee,Te.lazy=function(D){return{$$typeof:x,_payload:{_status:-1,_result:D},_init:J}},Te.memo=function(D,F){return{$$typeof:m,type:D,compare:F===void 0?null:F}},Te.startTransition=function(D){var F=q.transition;q.transition={};try{D()}finally{q.transition=F}},Te.unstable_act=K,Te.useCallback=function(D,F){return se.current.useCallback(D,F)},Te.useContext=function(D){return se.current.useContext(D)},Te.useDebugValue=function(){},Te.useDeferredValue=function(D){return se.current.useDeferredValue(D)},Te.useEffect=function(D,F){return se.current.useEffect(D,F)},Te.useId=function(){return se.current.useId()},Te.useImperativeHandle=function(D,F,ae){return se.current.useImperativeHandle(D,F,ae)},Te.useInsertionEffect=function(D,F){return se.current.useInsertionEffect(D,F)},Te.useLayoutEffect=function(D,F){return se.current.useLayoutEffect(D,F)},Te.useMemo=function(D,F){return se.current.useMemo(D,F)},Te.useReducer=function(D,F,ae){return se.current.useReducer(D,F,ae)},Te.useRef=function(D){return se.current.useRef(D)},Te.useState=function(D){return se.current.useState(D)},Te.useSyncExternalStore=function(D,F,ae){return se.current.useSyncExternalStore(D,F,ae)},Te.useTransition=function(){return se.current.useTransition()},Te.version="18.3.1",Te}var ph;function ka(){return ph||(ph=1,Ac.exports=ry()),Ac.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hh;function oy(){if(hh)return vs;hh=1;var e=ka(),n=Symbol.for("react.element"),o=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function d(f,p,m){var x,g={},y=null,w=null;m!==void 0&&(y=""+m),p.key!==void 0&&(y=""+p.key),p.ref!==void 0&&(w=p.ref);for(x in p)s.call(p,x)&&!l.hasOwnProperty(x)&&(g[x]=p[x]);if(f&&f.defaultProps)for(x in p=f.defaultProps,p)g[x]===void 0&&(g[x]=p[x]);return{$$typeof:n,type:f,key:y,ref:w,props:g,_owner:a.current}}return vs.Fragment=o,vs.jsx=d,vs.jsxs=d,vs}var mh;function sy(){return mh||(mh=1,jc.exports=oy()),jc.exports}var u=sy(),b=ka();const we=Pr(b);var ra={},Pc={exports:{}},Vt={},Rc={exports:{}},kc={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gh;function iy(){return gh||(gh=1,function(e){function n(q,Q){var K=q.length;q.push(Q);e:for(;0<K;){var D=K-1>>>1,F=q[D];if(0<a(F,Q))q[D]=Q,q[K]=F,K=D;else break e}}function o(q){return q.length===0?null:q[0]}function s(q){if(q.length===0)return null;var Q=q[0],K=q.pop();if(K!==Q){q[0]=K;e:for(var D=0,F=q.length,ae=F>>>1;D<ae;){var de=2*(D+1)-1,ne=q[de],pe=de+1,Ae=q[pe];if(0>a(ne,K))pe<F&&0>a(Ae,ne)?(q[D]=Ae,q[pe]=K,D=pe):(q[D]=ne,q[de]=K,D=de);else if(pe<F&&0>a(Ae,K))q[D]=Ae,q[pe]=K,D=pe;else break e}}return Q}function a(q,Q){var K=q.sortIndex-Q.sortIndex;return K!==0?K:q.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var d=Date,f=d.now();e.unstable_now=function(){return d.now()-f}}var p=[],m=[],x=1,g=null,y=3,w=!1,C=!1,E=!1,S=typeof setTimeout=="function"?setTimeout:null,B=typeof clearTimeout=="function"?clearTimeout:null,$=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function P(q){for(var Q=o(m);Q!==null;){if(Q.callback===null)s(m);else if(Q.startTime<=q)s(m),Q.sortIndex=Q.expirationTime,n(p,Q);else break;Q=o(m)}}function T(q){if(E=!1,P(q),!C)if(o(p)!==null)C=!0,J(A);else{var Q=o(m);Q!==null&&se(T,Q.startTime-q)}}function A(q,Q){C=!1,E&&(E=!1,B(M),M=-1),w=!0;var K=y;try{for(P(Q),g=o(p);g!==null&&(!(g.expirationTime>Q)||q&&!oe());){var D=g.callback;if(typeof D=="function"){g.callback=null,y=g.priorityLevel;var F=D(g.expirationTime<=Q);Q=e.unstable_now(),typeof F=="function"?g.callback=F:g===o(p)&&s(p),P(Q)}else s(p);g=o(p)}if(g!==null)var ae=!0;else{var de=o(m);de!==null&&se(T,de.startTime-Q),ae=!1}return ae}finally{g=null,y=K,w=!1}}var I=!1,R=null,M=-1,Y=5,ee=-1;function oe(){return!(e.unstable_now()-ee<Y)}function O(){if(R!==null){var q=e.unstable_now();ee=q;var Q=!0;try{Q=R(!0,q)}finally{Q?V():(I=!1,R=null)}}else I=!1}var V;if(typeof $=="function")V=function(){$(O)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,X=U.port2;U.port1.onmessage=O,V=function(){X.postMessage(null)}}else V=function(){S(O,0)};function J(q){R=q,I||(I=!0,V())}function se(q,Q){M=S(function(){q(e.unstable_now())},Q)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(q){q.callback=null},e.unstable_continueExecution=function(){C||w||(C=!0,J(A))},e.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Y=0<q?Math.floor(1e3/q):5},e.unstable_getCurrentPriorityLevel=function(){return y},e.unstable_getFirstCallbackNode=function(){return o(p)},e.unstable_next=function(q){switch(y){case 1:case 2:case 3:var Q=3;break;default:Q=y}var K=y;y=Q;try{return q()}finally{y=K}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(q,Q){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var K=y;y=q;try{return Q()}finally{y=K}},e.unstable_scheduleCallback=function(q,Q,K){var D=e.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?D+K:D):K=D,q){case 1:var F=-1;break;case 2:F=250;break;case 5:F=1073741823;break;case 4:F=1e4;break;default:F=5e3}return F=K+F,q={id:x++,callback:Q,priorityLevel:q,startTime:K,expirationTime:F,sortIndex:-1},K>D?(q.sortIndex=K,n(m,q),o(p)===null&&q===o(m)&&(E?(B(M),M=-1):E=!0,se(T,K-D))):(q.sortIndex=F,n(p,q),C||w||(C=!0,J(A))),q},e.unstable_shouldYield=oe,e.unstable_wrapCallback=function(q){var Q=y;return function(){var K=y;y=Q;try{return q.apply(this,arguments)}finally{y=K}}}}(kc)),kc}var vh;function ay(){return vh||(vh=1,Rc.exports=iy()),Rc.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xh;function ly(){if(xh)return Vt;xh=1;var e=ka(),n=ay();function o(t){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+t,i=1;i<arguments.length;i++)r+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,a={};function l(t,r){d(t,r),d(t+"Capture",r)}function d(t,r){for(a[t]=r,t=0;t<r.length;t++)s.add(r[t])}var f=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,x={},g={};function y(t){return p.call(g,t)?!0:p.call(x,t)?!1:m.test(t)?g[t]=!0:(x[t]=!0,!1)}function w(t,r,i,c){if(i!==null&&i.type===0)return!1;switch(typeof r){case"function":case"symbol":return!0;case"boolean":return c?!1:i!==null?!i.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function C(t,r,i,c){if(r===null||typeof r>"u"||w(t,r,i,c))return!0;if(c)return!1;if(i!==null)switch(i.type){case 3:return!r;case 4:return r===!1;case 5:return isNaN(r);case 6:return isNaN(r)||1>r}return!1}function E(t,r,i,c,h,v,N){this.acceptsBooleans=r===2||r===3||r===4,this.attributeName=c,this.attributeNamespace=h,this.mustUseProperty=i,this.propertyName=t,this.type=r,this.sanitizeURL=v,this.removeEmptyString=N}var S={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){S[t]=new E(t,0,!1,t,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var r=t[0];S[r]=new E(r,1,!1,t[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){S[t]=new E(t,2,!1,t.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){S[t]=new E(t,2,!1,t,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){S[t]=new E(t,3,!1,t.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(t){S[t]=new E(t,3,!0,t,null,!1,!1)}),["capture","download"].forEach(function(t){S[t]=new E(t,4,!1,t,null,!1,!1)}),["cols","rows","size","span"].forEach(function(t){S[t]=new E(t,6,!1,t,null,!1,!1)}),["rowSpan","start"].forEach(function(t){S[t]=new E(t,5,!1,t.toLowerCase(),null,!1,!1)});var B=/[\-:]([a-z])/g;function $(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var r=t.replace(B,$);S[r]=new E(r,1,!1,t,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var r=t.replace(B,$);S[r]=new E(r,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(t){var r=t.replace(B,$);S[r]=new E(r,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(t){S[t]=new E(t,1,!1,t.toLowerCase(),null,!1,!1)}),S.xlinkHref=new E("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(t){S[t]=new E(t,1,!1,t.toLowerCase(),null,!0,!0)});function P(t,r,i,c){var h=S.hasOwnProperty(r)?S[r]:null;(h!==null?h.type!==0:c||!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(C(r,i,h,c)&&(i=null),c||h===null?y(r)&&(i===null?t.removeAttribute(r):t.setAttribute(r,""+i)):h.mustUseProperty?t[h.propertyName]=i===null?h.type===3?!1:"":i:(r=h.attributeName,c=h.attributeNamespace,i===null?t.removeAttribute(r):(h=h.type,i=h===3||h===4&&i===!0?"":""+i,c?t.setAttributeNS(c,r,i):t.setAttribute(r,i))))}var T=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,A=Symbol.for("react.element"),I=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),Y=Symbol.for("react.profiler"),ee=Symbol.for("react.provider"),oe=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),V=Symbol.for("react.suspense"),U=Symbol.for("react.suspense_list"),X=Symbol.for("react.memo"),J=Symbol.for("react.lazy"),se=Symbol.for("react.offscreen"),q=Symbol.iterator;function Q(t){return t===null||typeof t!="object"?null:(t=q&&t[q]||t["@@iterator"],typeof t=="function"?t:null)}var K=Object.assign,D;function F(t){if(D===void 0)try{throw Error()}catch(i){var r=i.stack.trim().match(/\n( *(at )?)/);D=r&&r[1]||""}return`
`+D+t}var ae=!1;function de(t,r){if(!t||ae)return"";ae=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(r)if(r=function(){throw Error()},Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(r,[])}catch(W){var c=W}Reflect.construct(t,[],r)}else{try{r.call()}catch(W){c=W}t.call(r.prototype)}else{try{throw Error()}catch(W){c=W}t()}}catch(W){if(W&&c&&typeof W.stack=="string"){for(var h=W.stack.split(`
`),v=c.stack.split(`
`),N=h.length-1,j=v.length-1;1<=N&&0<=j&&h[N]!==v[j];)j--;for(;1<=N&&0<=j;N--,j--)if(h[N]!==v[j]){if(N!==1||j!==1)do if(N--,j--,0>j||h[N]!==v[j]){var k=`
`+h[N].replace(" at new "," at ");return t.displayName&&k.includes("<anonymous>")&&(k=k.replace("<anonymous>",t.displayName)),k}while(1<=N&&0<=j);break}}}finally{ae=!1,Error.prepareStackTrace=i}return(t=t?t.displayName||t.name:"")?F(t):""}function ne(t){switch(t.tag){case 5:return F(t.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return t=de(t.type,!1),t;case 11:return t=de(t.type.render,!1),t;case 1:return t=de(t.type,!0),t;default:return""}}function pe(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case R:return"Fragment";case I:return"Portal";case Y:return"Profiler";case M:return"StrictMode";case V:return"Suspense";case U:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case oe:return(t.displayName||"Context")+".Consumer";case ee:return(t._context.displayName||"Context")+".Provider";case O:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case X:return r=t.displayName||null,r!==null?r:pe(t.type)||"Memo";case J:r=t._payload,t=t._init;try{return pe(t(r))}catch{}}return null}function Ae(t){var r=t.type;switch(t.tag){case 24:return"Cache";case 9:return(r.displayName||"Context")+".Consumer";case 10:return(r._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=r.render,t=t.displayName||t.name||"",r.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return r;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return pe(r);case 8:return r===M?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r}return null}function ve(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function le(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function he(t){var r=le(t)?"checked":"value",i=Object.getOwnPropertyDescriptor(t.constructor.prototype,r),c=""+t[r];if(!t.hasOwnProperty(r)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var h=i.get,v=i.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return h.call(this)},set:function(N){c=""+N,v.call(this,N)}}),Object.defineProperty(t,r,{enumerable:i.enumerable}),{getValue:function(){return c},setValue:function(N){c=""+N},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function Ie(t){t._valueTracker||(t._valueTracker=he(t))}function Ee(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var i=r.getValue(),c="";return t&&(c=le(t)?t.checked?"true":"false":t.value),t=c,t!==i?(r.setValue(t),!0):!1}function xe(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function ke(t,r){var i=r.checked;return K({},r,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:i??t._wrapperState.initialChecked})}function _e(t,r){var i=r.defaultValue==null?"":r.defaultValue,c=r.checked!=null?r.checked:r.defaultChecked;i=ve(r.value!=null?r.value:i),t._wrapperState={initialChecked:c,initialValue:i,controlled:r.type==="checkbox"||r.type==="radio"?r.checked!=null:r.value!=null}}function rt(t,r){r=r.checked,r!=null&&P(t,"checked",r,!1)}function tn(t,r){rt(t,r);var i=ve(r.value),c=r.type;if(i!=null)c==="number"?(i===0&&t.value===""||t.value!=i)&&(t.value=""+i):t.value!==""+i&&(t.value=""+i);else if(c==="submit"||c==="reset"){t.removeAttribute("value");return}r.hasOwnProperty("value")?pn(t,r.type,i):r.hasOwnProperty("defaultValue")&&pn(t,r.type,ve(r.defaultValue)),r.checked==null&&r.defaultChecked!=null&&(t.defaultChecked=!!r.defaultChecked)}function Nt(t,r,i){if(r.hasOwnProperty("value")||r.hasOwnProperty("defaultValue")){var c=r.type;if(!(c!=="submit"&&c!=="reset"||r.value!==void 0&&r.value!==null))return;r=""+t._wrapperState.initialValue,i||r===t.value||(t.value=r),t.defaultValue=r}i=t.name,i!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,i!==""&&(t.name=i)}function pn(t,r,i){(r!=="number"||xe(t.ownerDocument)!==t)&&(i==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+i&&(t.defaultValue=""+i))}var ot=Array.isArray;function lt(t,r,i,c){if(t=t.options,r){r={};for(var h=0;h<i.length;h++)r["$"+i[h]]=!0;for(i=0;i<t.length;i++)h=r.hasOwnProperty("$"+t[i].value),t[i].selected!==h&&(t[i].selected=h),h&&c&&(t[i].defaultSelected=!0)}else{for(i=""+ve(i),r=null,h=0;h<t.length;h++){if(t[h].value===i){t[h].selected=!0,c&&(t[h].defaultSelected=!0);return}r!==null||t[h].disabled||(r=t[h])}r!==null&&(r.selected=!0)}}function jn(t,r){if(r.dangerouslySetInnerHTML!=null)throw Error(o(91));return K({},r,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Rr(t,r){var i=r.value;if(i==null){if(i=r.children,r=r.defaultValue,i!=null){if(r!=null)throw Error(o(92));if(ot(i)){if(1<i.length)throw Error(o(93));i=i[0]}r=i}r==null&&(r=""),i=r}t._wrapperState={initialValue:ve(i)}}function kr(t,r){var i=ve(r.value),c=ve(r.defaultValue);i!=null&&(i=""+i,i!==t.value&&(t.value=i),r.defaultValue==null&&t.defaultValue!==i&&(t.defaultValue=i)),c!=null&&(t.defaultValue=""+c)}function Xr(t){var r=t.textContent;r===t._wrapperState.initialValue&&r!==""&&r!==null&&(t.value=r)}function $n(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ut(t,r){return t==null||t==="http://www.w3.org/1999/xhtml"?$n(r):t==="http://www.w3.org/2000/svg"&&r==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ht,An=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(r,i,c,h){MSApp.execUnsafeLocalFunction(function(){return t(r,i,c,h)})}:t}(function(t,r){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=r;else{for(Ht=Ht||document.createElement("div"),Ht.innerHTML="<svg>"+r.valueOf().toString()+"</svg>",r=Ht.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;r.firstChild;)t.appendChild(r.firstChild)}});function Pn(t,r){if(r){var i=t.firstChild;if(i&&i===t.lastChild&&i.nodeType===3){i.nodeValue=r;return}}t.textContent=r}var Ct={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Zr=["Webkit","ms","Moz","O"];Object.keys(Ct).forEach(function(t){Zr.forEach(function(r){r=r+t.charAt(0).toUpperCase()+t.substring(1),Ct[r]=Ct[t]})});function Jr(t,r,i){return r==null||typeof r=="boolean"||r===""?"":i||typeof r!="number"||r===0||Ct.hasOwnProperty(t)&&Ct[t]?(""+r).trim():r+"px"}function eo(t,r){t=t.style;for(var i in r)if(r.hasOwnProperty(i)){var c=i.indexOf("--")===0,h=Jr(i,r[i],c);i==="float"&&(i="cssFloat"),c?t.setProperty(i,h):t[i]=h}}var Ir=K({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function nr(t,r){if(r){if(Ir[t]&&(r.children!=null||r.dangerouslySetInnerHTML!=null))throw Error(o(137,t));if(r.dangerouslySetInnerHTML!=null){if(r.children!=null)throw Error(o(60));if(typeof r.dangerouslySetInnerHTML!="object"||!("__html"in r.dangerouslySetInnerHTML))throw Error(o(61))}if(r.style!=null&&typeof r.style!="object")throw Error(o(62))}}function zn(t,r){if(t.indexOf("-")===-1)return typeof r.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Vn=null;function Tr(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var rr=null,Rn=null,z=null;function Z(t){if(t=ns(t)){if(typeof rr!="function")throw Error(o(280));var r=t.stateNode;r&&(r=vi(r),rr(t.stateNode,t.type,r))}}function fe(t){Rn?z?z.push(t):z=[t]:Rn=t}function Re(){if(Rn){var t=Rn,r=z;if(z=Rn=null,Z(t),r)for(t=0;t<r.length;t++)Z(r[t])}}function Be(t,r){return t(r)}function $e(){}var Ye=!1;function Rt(t,r,i){if(Ye)return t(r,i);Ye=!0;try{return Be(t,r,i)}finally{Ye=!1,(Rn!==null||z!==null)&&($e(),Re())}}function Ge(t,r){var i=t.stateNode;if(i===null)return null;var c=vi(i);if(c===null)return null;i=c[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(t=t.type,c=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!c;break e;default:t=!1}if(t)return null;if(i&&typeof i!="function")throw Error(o(231,r,typeof i));return i}var Mt=!1;if(f)try{var Qe={};Object.defineProperty(Qe,"passive",{get:function(){Mt=!0}}),window.addEventListener("test",Qe,Qe),window.removeEventListener("test",Qe,Qe)}catch{Mt=!1}function St(t,r,i,c,h,v,N,j,k){var W=Array.prototype.slice.call(arguments,3);try{r.apply(i,W)}catch(re){this.onError(re)}}var _t=!1,kn=null,Wt=!1,Gn=null,Lo={onError:function(t){_t=!0,kn=t}};function uv(t,r,i,c,h,v,N,j,k){_t=!1,kn=null,St.apply(Lo,arguments)}function dv(t,r,i,c,h,v,N,j,k){if(uv.apply(this,arguments),_t){if(_t){var W=kn;_t=!1,kn=null}else throw Error(o(198));Wt||(Wt=!0,Gn=W)}}function Or(t){var r=t,i=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,(r.flags&4098)!==0&&(i=r.return),t=r.return;while(t)}return r.tag===3?i:null}function Od(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function Md(t){if(Or(t)!==t)throw Error(o(188))}function fv(t){var r=t.alternate;if(!r){if(r=Or(t),r===null)throw Error(o(188));return r!==t?null:t}for(var i=t,c=r;;){var h=i.return;if(h===null)break;var v=h.alternate;if(v===null){if(c=h.return,c!==null){i=c;continue}break}if(h.child===v.child){for(v=h.child;v;){if(v===i)return Md(h),t;if(v===c)return Md(h),r;v=v.sibling}throw Error(o(188))}if(i.return!==c.return)i=h,c=v;else{for(var N=!1,j=h.child;j;){if(j===i){N=!0,i=h,c=v;break}if(j===c){N=!0,c=h,i=v;break}j=j.sibling}if(!N){for(j=v.child;j;){if(j===i){N=!0,i=v,c=h;break}if(j===c){N=!0,c=v,i=h;break}j=j.sibling}if(!N)throw Error(o(189))}}if(i.alternate!==c)throw Error(o(190))}if(i.tag!==3)throw Error(o(188));return i.stateNode.current===i?t:r}function _d(t){return t=fv(t),t!==null?Ld(t):null}function Ld(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var r=Ld(t);if(r!==null)return r;t=t.sibling}return null}var Bd=n.unstable_scheduleCallback,Fd=n.unstable_cancelCallback,pv=n.unstable_shouldYield,hv=n.unstable_requestPaint,et=n.unstable_now,mv=n.unstable_getCurrentPriorityLevel,qa=n.unstable_ImmediatePriority,$d=n.unstable_UserBlockingPriority,Xs=n.unstable_NormalPriority,gv=n.unstable_LowPriority,zd=n.unstable_IdlePriority,Zs=null,In=null;function vv(t){if(In&&typeof In.onCommitFiberRoot=="function")try{In.onCommitFiberRoot(Zs,t,void 0,(t.current.flags&128)===128)}catch{}}var hn=Math.clz32?Math.clz32:bv,xv=Math.log,yv=Math.LN2;function bv(t){return t>>>=0,t===0?32:31-(xv(t)/yv|0)|0}var Js=64,ei=4194304;function Bo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ti(t,r){var i=t.pendingLanes;if(i===0)return 0;var c=0,h=t.suspendedLanes,v=t.pingedLanes,N=i&268435455;if(N!==0){var j=N&~h;j!==0?c=Bo(j):(v&=N,v!==0&&(c=Bo(v)))}else N=i&~h,N!==0?c=Bo(N):v!==0&&(c=Bo(v));if(c===0)return 0;if(r!==0&&r!==c&&(r&h)===0&&(h=c&-c,v=r&-r,h>=v||h===16&&(v&4194240)!==0))return r;if((c&4)!==0&&(c|=i&16),r=t.entangledLanes,r!==0)for(t=t.entanglements,r&=c;0<r;)i=31-hn(r),h=1<<i,c|=t[i],r&=~h;return c}function wv(t,r){switch(t){case 1:case 2:case 4:return r+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Nv(t,r){for(var i=t.suspendedLanes,c=t.pingedLanes,h=t.expirationTimes,v=t.pendingLanes;0<v;){var N=31-hn(v),j=1<<N,k=h[N];k===-1?((j&i)===0||(j&c)!==0)&&(h[N]=wv(j,r)):k<=r&&(t.expiredLanes|=j),v&=~j}}function Ka(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Vd(){var t=Js;return Js<<=1,(Js&4194240)===0&&(Js=64),t}function Ya(t){for(var r=[],i=0;31>i;i++)r.push(t);return r}function Fo(t,r,i){t.pendingLanes|=r,r!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,r=31-hn(r),t[r]=i}function Cv(t,r){var i=t.pendingLanes&~r;t.pendingLanes=r,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=r,t.mutableReadLanes&=r,t.entangledLanes&=r,r=t.entanglements;var c=t.eventTimes;for(t=t.expirationTimes;0<i;){var h=31-hn(i),v=1<<h;r[h]=0,c[h]=-1,t[h]=-1,i&=~v}}function Qa(t,r){var i=t.entangledLanes|=r;for(t=t.entanglements;i;){var c=31-hn(i),h=1<<c;h&r|t[c]&r&&(t[c]|=r),i&=~h}}var Ve=0;function Gd(t){return t&=-t,1<t?4<t?(t&268435455)!==0?16:536870912:4:1}var Ud,Xa,Hd,Wd,qd,Za=!1,ni=[],or=null,sr=null,ir=null,$o=new Map,zo=new Map,ar=[],Sv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Kd(t,r){switch(t){case"focusin":case"focusout":or=null;break;case"dragenter":case"dragleave":sr=null;break;case"mouseover":case"mouseout":ir=null;break;case"pointerover":case"pointerout":$o.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":zo.delete(r.pointerId)}}function Vo(t,r,i,c,h,v){return t===null||t.nativeEvent!==v?(t={blockedOn:r,domEventName:i,eventSystemFlags:c,nativeEvent:v,targetContainers:[h]},r!==null&&(r=ns(r),r!==null&&Xa(r)),t):(t.eventSystemFlags|=c,r=t.targetContainers,h!==null&&r.indexOf(h)===-1&&r.push(h),t)}function Ev(t,r,i,c,h){switch(r){case"focusin":return or=Vo(or,t,r,i,c,h),!0;case"dragenter":return sr=Vo(sr,t,r,i,c,h),!0;case"mouseover":return ir=Vo(ir,t,r,i,c,h),!0;case"pointerover":var v=h.pointerId;return $o.set(v,Vo($o.get(v)||null,t,r,i,c,h)),!0;case"gotpointercapture":return v=h.pointerId,zo.set(v,Vo(zo.get(v)||null,t,r,i,c,h)),!0}return!1}function Yd(t){var r=Mr(t.target);if(r!==null){var i=Or(r);if(i!==null){if(r=i.tag,r===13){if(r=Od(i),r!==null){t.blockedOn=r,qd(t.priority,function(){Hd(i)});return}}else if(r===3&&i.stateNode.current.memoizedState.isDehydrated){t.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ri(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var i=el(t.domEventName,t.eventSystemFlags,r[0],t.nativeEvent);if(i===null){i=t.nativeEvent;var c=new i.constructor(i.type,i);Vn=c,i.target.dispatchEvent(c),Vn=null}else return r=ns(i),r!==null&&Xa(r),t.blockedOn=i,!1;r.shift()}return!0}function Qd(t,r,i){ri(t)&&i.delete(r)}function Dv(){Za=!1,or!==null&&ri(or)&&(or=null),sr!==null&&ri(sr)&&(sr=null),ir!==null&&ri(ir)&&(ir=null),$o.forEach(Qd),zo.forEach(Qd)}function Go(t,r){t.blockedOn===r&&(t.blockedOn=null,Za||(Za=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,Dv)))}function Uo(t){function r(h){return Go(h,t)}if(0<ni.length){Go(ni[0],t);for(var i=1;i<ni.length;i++){var c=ni[i];c.blockedOn===t&&(c.blockedOn=null)}}for(or!==null&&Go(or,t),sr!==null&&Go(sr,t),ir!==null&&Go(ir,t),$o.forEach(r),zo.forEach(r),i=0;i<ar.length;i++)c=ar[i],c.blockedOn===t&&(c.blockedOn=null);for(;0<ar.length&&(i=ar[0],i.blockedOn===null);)Yd(i),i.blockedOn===null&&ar.shift()}var to=T.ReactCurrentBatchConfig,oi=!0;function jv(t,r,i,c){var h=Ve,v=to.transition;to.transition=null;try{Ve=1,Ja(t,r,i,c)}finally{Ve=h,to.transition=v}}function Av(t,r,i,c){var h=Ve,v=to.transition;to.transition=null;try{Ve=4,Ja(t,r,i,c)}finally{Ve=h,to.transition=v}}function Ja(t,r,i,c){if(oi){var h=el(t,r,i,c);if(h===null)vl(t,r,c,si,i),Kd(t,c);else if(Ev(h,t,r,i,c))c.stopPropagation();else if(Kd(t,c),r&4&&-1<Sv.indexOf(t)){for(;h!==null;){var v=ns(h);if(v!==null&&Ud(v),v=el(t,r,i,c),v===null&&vl(t,r,c,si,i),v===h)break;h=v}h!==null&&c.stopPropagation()}else vl(t,r,c,null,i)}}var si=null;function el(t,r,i,c){if(si=null,t=Tr(c),t=Mr(t),t!==null)if(r=Or(t),r===null)t=null;else if(i=r.tag,i===13){if(t=Od(r),t!==null)return t;t=null}else if(i===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null);return si=t,null}function Xd(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(mv()){case qa:return 1;case $d:return 4;case Xs:case gv:return 16;case zd:return 536870912;default:return 16}default:return 16}}var lr=null,tl=null,ii=null;function Zd(){if(ii)return ii;var t,r=tl,i=r.length,c,h="value"in lr?lr.value:lr.textContent,v=h.length;for(t=0;t<i&&r[t]===h[t];t++);var N=i-t;for(c=1;c<=N&&r[i-c]===h[v-c];c++);return ii=h.slice(t,1<c?1-c:void 0)}function ai(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function li(){return!0}function Jd(){return!1}function qt(t){function r(i,c,h,v,N){this._reactName=i,this._targetInst=h,this.type=c,this.nativeEvent=v,this.target=N,this.currentTarget=null;for(var j in t)t.hasOwnProperty(j)&&(i=t[j],this[j]=i?i(v):v[j]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?li:Jd,this.isPropagationStopped=Jd,this}return K(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=li)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=li)},persist:function(){},isPersistent:li}),r}var no={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},nl=qt(no),Ho=K({},no,{view:0,detail:0}),Pv=qt(Ho),rl,ol,Wo,ci=K({},Ho,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:il,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Wo&&(Wo&&t.type==="mousemove"?(rl=t.screenX-Wo.screenX,ol=t.screenY-Wo.screenY):ol=rl=0,Wo=t),rl)},movementY:function(t){return"movementY"in t?t.movementY:ol}}),ef=qt(ci),Rv=K({},ci,{dataTransfer:0}),kv=qt(Rv),Iv=K({},Ho,{relatedTarget:0}),sl=qt(Iv),Tv=K({},no,{animationName:0,elapsedTime:0,pseudoElement:0}),Ov=qt(Tv),Mv=K({},no,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),_v=qt(Mv),Lv=K({},no,{data:0}),tf=qt(Lv),Bv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Fv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$v={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function zv(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=$v[t])?!!r[t]:!1}function il(){return zv}var Vv=K({},Ho,{key:function(t){if(t.key){var r=Bv[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=ai(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Fv[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:il,charCode:function(t){return t.type==="keypress"?ai(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ai(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Gv=qt(Vv),Uv=K({},ci,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),nf=qt(Uv),Hv=K({},Ho,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:il}),Wv=qt(Hv),qv=K({},no,{propertyName:0,elapsedTime:0,pseudoElement:0}),Kv=qt(qv),Yv=K({},ci,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Qv=qt(Yv),Xv=[9,13,27,32],al=f&&"CompositionEvent"in window,qo=null;f&&"documentMode"in document&&(qo=document.documentMode);var Zv=f&&"TextEvent"in window&&!qo,rf=f&&(!al||qo&&8<qo&&11>=qo),of=" ",sf=!1;function af(t,r){switch(t){case"keyup":return Xv.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function lf(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ro=!1;function Jv(t,r){switch(t){case"compositionend":return lf(r);case"keypress":return r.which!==32?null:(sf=!0,of);case"textInput":return t=r.data,t===of&&sf?null:t;default:return null}}function ex(t,r){if(ro)return t==="compositionend"||!al&&af(t,r)?(t=Zd(),ii=tl=lr=null,ro=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return rf&&r.locale!=="ko"?null:r.data;default:return null}}var tx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function cf(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!tx[t.type]:r==="textarea"}function uf(t,r,i,c){fe(c),r=hi(r,"onChange"),0<r.length&&(i=new nl("onChange","change",null,i,c),t.push({event:i,listeners:r}))}var Ko=null,Yo=null;function nx(t){Af(t,0)}function ui(t){var r=lo(t);if(Ee(r))return t}function rx(t,r){if(t==="change")return r}var df=!1;if(f){var ll;if(f){var cl="oninput"in document;if(!cl){var ff=document.createElement("div");ff.setAttribute("oninput","return;"),cl=typeof ff.oninput=="function"}ll=cl}else ll=!1;df=ll&&(!document.documentMode||9<document.documentMode)}function pf(){Ko&&(Ko.detachEvent("onpropertychange",hf),Yo=Ko=null)}function hf(t){if(t.propertyName==="value"&&ui(Yo)){var r=[];uf(r,Yo,t,Tr(t)),Rt(nx,r)}}function ox(t,r,i){t==="focusin"?(pf(),Ko=r,Yo=i,Ko.attachEvent("onpropertychange",hf)):t==="focusout"&&pf()}function sx(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ui(Yo)}function ix(t,r){if(t==="click")return ui(r)}function ax(t,r){if(t==="input"||t==="change")return ui(r)}function lx(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var mn=typeof Object.is=="function"?Object.is:lx;function Qo(t,r){if(mn(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var i=Object.keys(t),c=Object.keys(r);if(i.length!==c.length)return!1;for(c=0;c<i.length;c++){var h=i[c];if(!p.call(r,h)||!mn(t[h],r[h]))return!1}return!0}function mf(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function gf(t,r){var i=mf(t);t=0;for(var c;i;){if(i.nodeType===3){if(c=t+i.textContent.length,t<=r&&c>=r)return{node:i,offset:r-t};t=c}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=mf(i)}}function vf(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?vf(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function xf(){for(var t=window,r=xe();r instanceof t.HTMLIFrameElement;){try{var i=typeof r.contentWindow.location.href=="string"}catch{i=!1}if(i)t=r.contentWindow;else break;r=xe(t.document)}return r}function ul(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}function cx(t){var r=xf(),i=t.focusedElem,c=t.selectionRange;if(r!==i&&i&&i.ownerDocument&&vf(i.ownerDocument.documentElement,i)){if(c!==null&&ul(i)){if(r=c.start,t=c.end,t===void 0&&(t=r),"selectionStart"in i)i.selectionStart=r,i.selectionEnd=Math.min(t,i.value.length);else if(t=(r=i.ownerDocument||document)&&r.defaultView||window,t.getSelection){t=t.getSelection();var h=i.textContent.length,v=Math.min(c.start,h);c=c.end===void 0?v:Math.min(c.end,h),!t.extend&&v>c&&(h=c,c=v,v=h),h=gf(i,v);var N=gf(i,c);h&&N&&(t.rangeCount!==1||t.anchorNode!==h.node||t.anchorOffset!==h.offset||t.focusNode!==N.node||t.focusOffset!==N.offset)&&(r=r.createRange(),r.setStart(h.node,h.offset),t.removeAllRanges(),v>c?(t.addRange(r),t.extend(N.node,N.offset)):(r.setEnd(N.node,N.offset),t.addRange(r)))}}for(r=[],t=i;t=t.parentNode;)t.nodeType===1&&r.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof i.focus=="function"&&i.focus(),i=0;i<r.length;i++)t=r[i],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var ux=f&&"documentMode"in document&&11>=document.documentMode,oo=null,dl=null,Xo=null,fl=!1;function yf(t,r,i){var c=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;fl||oo==null||oo!==xe(c)||(c=oo,"selectionStart"in c&&ul(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Xo&&Qo(Xo,c)||(Xo=c,c=hi(dl,"onSelect"),0<c.length&&(r=new nl("onSelect","select",null,r,i),t.push({event:r,listeners:c}),r.target=oo)))}function di(t,r){var i={};return i[t.toLowerCase()]=r.toLowerCase(),i["Webkit"+t]="webkit"+r,i["Moz"+t]="moz"+r,i}var so={animationend:di("Animation","AnimationEnd"),animationiteration:di("Animation","AnimationIteration"),animationstart:di("Animation","AnimationStart"),transitionend:di("Transition","TransitionEnd")},pl={},bf={};f&&(bf=document.createElement("div").style,"AnimationEvent"in window||(delete so.animationend.animation,delete so.animationiteration.animation,delete so.animationstart.animation),"TransitionEvent"in window||delete so.transitionend.transition);function fi(t){if(pl[t])return pl[t];if(!so[t])return t;var r=so[t],i;for(i in r)if(r.hasOwnProperty(i)&&i in bf)return pl[t]=r[i];return t}var wf=fi("animationend"),Nf=fi("animationiteration"),Cf=fi("animationstart"),Sf=fi("transitionend"),Ef=new Map,Df="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function cr(t,r){Ef.set(t,r),l(r,[t])}for(var hl=0;hl<Df.length;hl++){var ml=Df[hl],dx=ml.toLowerCase(),fx=ml[0].toUpperCase()+ml.slice(1);cr(dx,"on"+fx)}cr(wf,"onAnimationEnd"),cr(Nf,"onAnimationIteration"),cr(Cf,"onAnimationStart"),cr("dblclick","onDoubleClick"),cr("focusin","onFocus"),cr("focusout","onBlur"),cr(Sf,"onTransitionEnd"),d("onMouseEnter",["mouseout","mouseover"]),d("onMouseLeave",["mouseout","mouseover"]),d("onPointerEnter",["pointerout","pointerover"]),d("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Zo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),px=new Set("cancel close invalid load scroll toggle".split(" ").concat(Zo));function jf(t,r,i){var c=t.type||"unknown-event";t.currentTarget=i,dv(c,r,void 0,t),t.currentTarget=null}function Af(t,r){r=(r&4)!==0;for(var i=0;i<t.length;i++){var c=t[i],h=c.event;c=c.listeners;e:{var v=void 0;if(r)for(var N=c.length-1;0<=N;N--){var j=c[N],k=j.instance,W=j.currentTarget;if(j=j.listener,k!==v&&h.isPropagationStopped())break e;jf(h,j,W),v=k}else for(N=0;N<c.length;N++){if(j=c[N],k=j.instance,W=j.currentTarget,j=j.listener,k!==v&&h.isPropagationStopped())break e;jf(h,j,W),v=k}}}if(Wt)throw t=Gn,Wt=!1,Gn=null,t}function He(t,r){var i=r[Cl];i===void 0&&(i=r[Cl]=new Set);var c=t+"__bubble";i.has(c)||(Pf(r,t,2,!1),i.add(c))}function gl(t,r,i){var c=0;r&&(c|=4),Pf(i,t,c,r)}var pi="_reactListening"+Math.random().toString(36).slice(2);function Jo(t){if(!t[pi]){t[pi]=!0,s.forEach(function(i){i!=="selectionchange"&&(px.has(i)||gl(i,!1,t),gl(i,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[pi]||(r[pi]=!0,gl("selectionchange",!1,r))}}function Pf(t,r,i,c){switch(Xd(r)){case 1:var h=jv;break;case 4:h=Av;break;default:h=Ja}i=h.bind(null,r,i,t),h=void 0,!Mt||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(h=!0),c?h!==void 0?t.addEventListener(r,i,{capture:!0,passive:h}):t.addEventListener(r,i,!0):h!==void 0?t.addEventListener(r,i,{passive:h}):t.addEventListener(r,i,!1)}function vl(t,r,i,c,h){var v=c;if((r&1)===0&&(r&2)===0&&c!==null)e:for(;;){if(c===null)return;var N=c.tag;if(N===3||N===4){var j=c.stateNode.containerInfo;if(j===h||j.nodeType===8&&j.parentNode===h)break;if(N===4)for(N=c.return;N!==null;){var k=N.tag;if((k===3||k===4)&&(k=N.stateNode.containerInfo,k===h||k.nodeType===8&&k.parentNode===h))return;N=N.return}for(;j!==null;){if(N=Mr(j),N===null)return;if(k=N.tag,k===5||k===6){c=v=N;continue e}j=j.parentNode}}c=c.return}Rt(function(){var W=v,re=Tr(i),ie=[];e:{var te=Ef.get(t);if(te!==void 0){var me=nl,ye=t;switch(t){case"keypress":if(ai(i)===0)break e;case"keydown":case"keyup":me=Gv;break;case"focusin":ye="focus",me=sl;break;case"focusout":ye="blur",me=sl;break;case"beforeblur":case"afterblur":me=sl;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":me=ef;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":me=kv;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":me=Wv;break;case wf:case Nf:case Cf:me=Ov;break;case Sf:me=Kv;break;case"scroll":me=Pv;break;case"wheel":me=Qv;break;case"copy":case"cut":case"paste":me=_v;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":me=nf}var be=(r&4)!==0,tt=!be&&t==="scroll",G=be?te!==null?te+"Capture":null:te;be=[];for(var _=W,H;_!==null;){H=_;var ce=H.stateNode;if(H.tag===5&&ce!==null&&(H=ce,G!==null&&(ce=Ge(_,G),ce!=null&&be.push(es(_,ce,H)))),tt)break;_=_.return}0<be.length&&(te=new me(te,ye,null,i,re),ie.push({event:te,listeners:be}))}}if((r&7)===0){e:{if(te=t==="mouseover"||t==="pointerover",me=t==="mouseout"||t==="pointerout",te&&i!==Vn&&(ye=i.relatedTarget||i.fromElement)&&(Mr(ye)||ye[Un]))break e;if((me||te)&&(te=re.window===re?re:(te=re.ownerDocument)?te.defaultView||te.parentWindow:window,me?(ye=i.relatedTarget||i.toElement,me=W,ye=ye?Mr(ye):null,ye!==null&&(tt=Or(ye),ye!==tt||ye.tag!==5&&ye.tag!==6)&&(ye=null)):(me=null,ye=W),me!==ye)){if(be=ef,ce="onMouseLeave",G="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(be=nf,ce="onPointerLeave",G="onPointerEnter",_="pointer"),tt=me==null?te:lo(me),H=ye==null?te:lo(ye),te=new be(ce,_+"leave",me,i,re),te.target=tt,te.relatedTarget=H,ce=null,Mr(re)===W&&(be=new be(G,_+"enter",ye,i,re),be.target=H,be.relatedTarget=tt,ce=be),tt=ce,me&&ye)t:{for(be=me,G=ye,_=0,H=be;H;H=io(H))_++;for(H=0,ce=G;ce;ce=io(ce))H++;for(;0<_-H;)be=io(be),_--;for(;0<H-_;)G=io(G),H--;for(;_--;){if(be===G||G!==null&&be===G.alternate)break t;be=io(be),G=io(G)}be=null}else be=null;me!==null&&Rf(ie,te,me,be,!1),ye!==null&&tt!==null&&Rf(ie,tt,ye,be,!0)}}e:{if(te=W?lo(W):window,me=te.nodeName&&te.nodeName.toLowerCase(),me==="select"||me==="input"&&te.type==="file")var Ne=rx;else if(cf(te))if(df)Ne=ax;else{Ne=sx;var De=ox}else(me=te.nodeName)&&me.toLowerCase()==="input"&&(te.type==="checkbox"||te.type==="radio")&&(Ne=ix);if(Ne&&(Ne=Ne(t,W))){uf(ie,Ne,i,re);break e}De&&De(t,te,W),t==="focusout"&&(De=te._wrapperState)&&De.controlled&&te.type==="number"&&pn(te,"number",te.value)}switch(De=W?lo(W):window,t){case"focusin":(cf(De)||De.contentEditable==="true")&&(oo=De,dl=W,Xo=null);break;case"focusout":Xo=dl=oo=null;break;case"mousedown":fl=!0;break;case"contextmenu":case"mouseup":case"dragend":fl=!1,yf(ie,i,re);break;case"selectionchange":if(ux)break;case"keydown":case"keyup":yf(ie,i,re)}var je;if(al)e:{switch(t){case"compositionstart":var Pe="onCompositionStart";break e;case"compositionend":Pe="onCompositionEnd";break e;case"compositionupdate":Pe="onCompositionUpdate";break e}Pe=void 0}else ro?af(t,i)&&(Pe="onCompositionEnd"):t==="keydown"&&i.keyCode===229&&(Pe="onCompositionStart");Pe&&(rf&&i.locale!=="ko"&&(ro||Pe!=="onCompositionStart"?Pe==="onCompositionEnd"&&ro&&(je=Zd()):(lr=re,tl="value"in lr?lr.value:lr.textContent,ro=!0)),De=hi(W,Pe),0<De.length&&(Pe=new tf(Pe,t,null,i,re),ie.push({event:Pe,listeners:De}),je?Pe.data=je:(je=lf(i),je!==null&&(Pe.data=je)))),(je=Zv?Jv(t,i):ex(t,i))&&(W=hi(W,"onBeforeInput"),0<W.length&&(re=new tf("onBeforeInput","beforeinput",null,i,re),ie.push({event:re,listeners:W}),re.data=je))}Af(ie,r)})}function es(t,r,i){return{instance:t,listener:r,currentTarget:i}}function hi(t,r){for(var i=r+"Capture",c=[];t!==null;){var h=t,v=h.stateNode;h.tag===5&&v!==null&&(h=v,v=Ge(t,i),v!=null&&c.unshift(es(t,v,h)),v=Ge(t,r),v!=null&&c.push(es(t,v,h))),t=t.return}return c}function io(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Rf(t,r,i,c,h){for(var v=r._reactName,N=[];i!==null&&i!==c;){var j=i,k=j.alternate,W=j.stateNode;if(k!==null&&k===c)break;j.tag===5&&W!==null&&(j=W,h?(k=Ge(i,v),k!=null&&N.unshift(es(i,k,j))):h||(k=Ge(i,v),k!=null&&N.push(es(i,k,j)))),i=i.return}N.length!==0&&t.push({event:r,listeners:N})}var hx=/\r\n?/g,mx=/\u0000|\uFFFD/g;function kf(t){return(typeof t=="string"?t:""+t).replace(hx,`
`).replace(mx,"")}function mi(t,r,i){if(r=kf(r),kf(t)!==r&&i)throw Error(o(425))}function gi(){}var xl=null,yl=null;function bl(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var wl=typeof setTimeout=="function"?setTimeout:void 0,gx=typeof clearTimeout=="function"?clearTimeout:void 0,If=typeof Promise=="function"?Promise:void 0,vx=typeof queueMicrotask=="function"?queueMicrotask:typeof If<"u"?function(t){return If.resolve(null).then(t).catch(xx)}:wl;function xx(t){setTimeout(function(){throw t})}function Nl(t,r){var i=r,c=0;do{var h=i.nextSibling;if(t.removeChild(i),h&&h.nodeType===8)if(i=h.data,i==="/$"){if(c===0){t.removeChild(h),Uo(r);return}c--}else i!=="$"&&i!=="$?"&&i!=="$!"||c++;i=h}while(i);Uo(r)}function ur(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?")break;if(r==="/$")return null}}return t}function Tf(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var i=t.data;if(i==="$"||i==="$!"||i==="$?"){if(r===0)return t;r--}else i==="/$"&&r++}t=t.previousSibling}return null}var ao=Math.random().toString(36).slice(2),Tn="__reactFiber$"+ao,ts="__reactProps$"+ao,Un="__reactContainer$"+ao,Cl="__reactEvents$"+ao,yx="__reactListeners$"+ao,bx="__reactHandles$"+ao;function Mr(t){var r=t[Tn];if(r)return r;for(var i=t.parentNode;i;){if(r=i[Un]||i[Tn]){if(i=r.alternate,r.child!==null||i!==null&&i.child!==null)for(t=Tf(t);t!==null;){if(i=t[Tn])return i;t=Tf(t)}return r}t=i,i=t.parentNode}return null}function ns(t){return t=t[Tn]||t[Un],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function lo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(o(33))}function vi(t){return t[ts]||null}var Sl=[],co=-1;function dr(t){return{current:t}}function We(t){0>co||(t.current=Sl[co],Sl[co]=null,co--)}function Ue(t,r){co++,Sl[co]=t.current,t.current=r}var fr={},Et=dr(fr),Lt=dr(!1),_r=fr;function uo(t,r){var i=t.type.contextTypes;if(!i)return fr;var c=t.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===r)return c.__reactInternalMemoizedMaskedChildContext;var h={},v;for(v in i)h[v]=r[v];return c&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=h),h}function Bt(t){return t=t.childContextTypes,t!=null}function xi(){We(Lt),We(Et)}function Of(t,r,i){if(Et.current!==fr)throw Error(o(168));Ue(Et,r),Ue(Lt,i)}function Mf(t,r,i){var c=t.stateNode;if(r=r.childContextTypes,typeof c.getChildContext!="function")return i;c=c.getChildContext();for(var h in c)if(!(h in r))throw Error(o(108,Ae(t)||"Unknown",h));return K({},i,c)}function yi(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||fr,_r=Et.current,Ue(Et,t),Ue(Lt,Lt.current),!0}function _f(t,r,i){var c=t.stateNode;if(!c)throw Error(o(169));i?(t=Mf(t,r,_r),c.__reactInternalMemoizedMergedChildContext=t,We(Lt),We(Et),Ue(Et,t)):We(Lt),Ue(Lt,i)}var Hn=null,bi=!1,El=!1;function Lf(t){Hn===null?Hn=[t]:Hn.push(t)}function wx(t){bi=!0,Lf(t)}function pr(){if(!El&&Hn!==null){El=!0;var t=0,r=Ve;try{var i=Hn;for(Ve=1;t<i.length;t++){var c=i[t];do c=c(!0);while(c!==null)}Hn=null,bi=!1}catch(h){throw Hn!==null&&(Hn=Hn.slice(t+1)),Bd(qa,pr),h}finally{Ve=r,El=!1}}return null}var fo=[],po=0,wi=null,Ni=0,nn=[],rn=0,Lr=null,Wn=1,qn="";function Br(t,r){fo[po++]=Ni,fo[po++]=wi,wi=t,Ni=r}function Bf(t,r,i){nn[rn++]=Wn,nn[rn++]=qn,nn[rn++]=Lr,Lr=t;var c=Wn;t=qn;var h=32-hn(c)-1;c&=~(1<<h),i+=1;var v=32-hn(r)+h;if(30<v){var N=h-h%5;v=(c&(1<<N)-1).toString(32),c>>=N,h-=N,Wn=1<<32-hn(r)+h|i<<h|c,qn=v+t}else Wn=1<<v|i<<h|c,qn=t}function Dl(t){t.return!==null&&(Br(t,1),Bf(t,1,0))}function jl(t){for(;t===wi;)wi=fo[--po],fo[po]=null,Ni=fo[--po],fo[po]=null;for(;t===Lr;)Lr=nn[--rn],nn[rn]=null,qn=nn[--rn],nn[rn]=null,Wn=nn[--rn],nn[rn]=null}var Kt=null,Yt=null,qe=!1,gn=null;function Ff(t,r){var i=ln(5,null,null,0);i.elementType="DELETED",i.stateNode=r,i.return=t,r=t.deletions,r===null?(t.deletions=[i],t.flags|=16):r.push(i)}function $f(t,r){switch(t.tag){case 5:var i=t.type;return r=r.nodeType!==1||i.toLowerCase()!==r.nodeName.toLowerCase()?null:r,r!==null?(t.stateNode=r,Kt=t,Yt=ur(r.firstChild),!0):!1;case 6:return r=t.pendingProps===""||r.nodeType!==3?null:r,r!==null?(t.stateNode=r,Kt=t,Yt=null,!0):!1;case 13:return r=r.nodeType!==8?null:r,r!==null?(i=Lr!==null?{id:Wn,overflow:qn}:null,t.memoizedState={dehydrated:r,treeContext:i,retryLane:1073741824},i=ln(18,null,null,0),i.stateNode=r,i.return=t,t.child=i,Kt=t,Yt=null,!0):!1;default:return!1}}function Al(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Pl(t){if(qe){var r=Yt;if(r){var i=r;if(!$f(t,r)){if(Al(t))throw Error(o(418));r=ur(i.nextSibling);var c=Kt;r&&$f(t,r)?Ff(c,i):(t.flags=t.flags&-4097|2,qe=!1,Kt=t)}}else{if(Al(t))throw Error(o(418));t.flags=t.flags&-4097|2,qe=!1,Kt=t}}}function zf(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Kt=t}function Ci(t){if(t!==Kt)return!1;if(!qe)return zf(t),qe=!0,!1;var r;if((r=t.tag!==3)&&!(r=t.tag!==5)&&(r=t.type,r=r!=="head"&&r!=="body"&&!bl(t.type,t.memoizedProps)),r&&(r=Yt)){if(Al(t))throw Vf(),Error(o(418));for(;r;)Ff(t,r),r=ur(r.nextSibling)}if(zf(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(o(317));e:{for(t=t.nextSibling,r=0;t;){if(t.nodeType===8){var i=t.data;if(i==="/$"){if(r===0){Yt=ur(t.nextSibling);break e}r--}else i!=="$"&&i!=="$!"&&i!=="$?"||r++}t=t.nextSibling}Yt=null}}else Yt=Kt?ur(t.stateNode.nextSibling):null;return!0}function Vf(){for(var t=Yt;t;)t=ur(t.nextSibling)}function ho(){Yt=Kt=null,qe=!1}function Rl(t){gn===null?gn=[t]:gn.push(t)}var Nx=T.ReactCurrentBatchConfig;function rs(t,r,i){if(t=i.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(i._owner){if(i=i._owner,i){if(i.tag!==1)throw Error(o(309));var c=i.stateNode}if(!c)throw Error(o(147,t));var h=c,v=""+t;return r!==null&&r.ref!==null&&typeof r.ref=="function"&&r.ref._stringRef===v?r.ref:(r=function(N){var j=h.refs;N===null?delete j[v]:j[v]=N},r._stringRef=v,r)}if(typeof t!="string")throw Error(o(284));if(!i._owner)throw Error(o(290,t))}return t}function Si(t,r){throw t=Object.prototype.toString.call(r),Error(o(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t))}function Gf(t){var r=t._init;return r(t._payload)}function Uf(t){function r(G,_){if(t){var H=G.deletions;H===null?(G.deletions=[_],G.flags|=16):H.push(_)}}function i(G,_){if(!t)return null;for(;_!==null;)r(G,_),_=_.sibling;return null}function c(G,_){for(G=new Map;_!==null;)_.key!==null?G.set(_.key,_):G.set(_.index,_),_=_.sibling;return G}function h(G,_){return G=wr(G,_),G.index=0,G.sibling=null,G}function v(G,_,H){return G.index=H,t?(H=G.alternate,H!==null?(H=H.index,H<_?(G.flags|=2,_):H):(G.flags|=2,_)):(G.flags|=1048576,_)}function N(G){return t&&G.alternate===null&&(G.flags|=2),G}function j(G,_,H,ce){return _===null||_.tag!==6?(_=wc(H,G.mode,ce),_.return=G,_):(_=h(_,H),_.return=G,_)}function k(G,_,H,ce){var Ne=H.type;return Ne===R?re(G,_,H.props.children,ce,H.key):_!==null&&(_.elementType===Ne||typeof Ne=="object"&&Ne!==null&&Ne.$$typeof===J&&Gf(Ne)===_.type)?(ce=h(_,H.props),ce.ref=rs(G,_,H),ce.return=G,ce):(ce=Ki(H.type,H.key,H.props,null,G.mode,ce),ce.ref=rs(G,_,H),ce.return=G,ce)}function W(G,_,H,ce){return _===null||_.tag!==4||_.stateNode.containerInfo!==H.containerInfo||_.stateNode.implementation!==H.implementation?(_=Nc(H,G.mode,ce),_.return=G,_):(_=h(_,H.children||[]),_.return=G,_)}function re(G,_,H,ce,Ne){return _===null||_.tag!==7?(_=Wr(H,G.mode,ce,Ne),_.return=G,_):(_=h(_,H),_.return=G,_)}function ie(G,_,H){if(typeof _=="string"&&_!==""||typeof _=="number")return _=wc(""+_,G.mode,H),_.return=G,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case A:return H=Ki(_.type,_.key,_.props,null,G.mode,H),H.ref=rs(G,null,_),H.return=G,H;case I:return _=Nc(_,G.mode,H),_.return=G,_;case J:var ce=_._init;return ie(G,ce(_._payload),H)}if(ot(_)||Q(_))return _=Wr(_,G.mode,H,null),_.return=G,_;Si(G,_)}return null}function te(G,_,H,ce){var Ne=_!==null?_.key:null;if(typeof H=="string"&&H!==""||typeof H=="number")return Ne!==null?null:j(G,_,""+H,ce);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case A:return H.key===Ne?k(G,_,H,ce):null;case I:return H.key===Ne?W(G,_,H,ce):null;case J:return Ne=H._init,te(G,_,Ne(H._payload),ce)}if(ot(H)||Q(H))return Ne!==null?null:re(G,_,H,ce,null);Si(G,H)}return null}function me(G,_,H,ce,Ne){if(typeof ce=="string"&&ce!==""||typeof ce=="number")return G=G.get(H)||null,j(_,G,""+ce,Ne);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case A:return G=G.get(ce.key===null?H:ce.key)||null,k(_,G,ce,Ne);case I:return G=G.get(ce.key===null?H:ce.key)||null,W(_,G,ce,Ne);case J:var De=ce._init;return me(G,_,H,De(ce._payload),Ne)}if(ot(ce)||Q(ce))return G=G.get(H)||null,re(_,G,ce,Ne,null);Si(_,ce)}return null}function ye(G,_,H,ce){for(var Ne=null,De=null,je=_,Pe=_=0,dt=null;je!==null&&Pe<H.length;Pe++){je.index>Pe?(dt=je,je=null):dt=je.sibling;var Fe=te(G,je,H[Pe],ce);if(Fe===null){je===null&&(je=dt);break}t&&je&&Fe.alternate===null&&r(G,je),_=v(Fe,_,Pe),De===null?Ne=Fe:De.sibling=Fe,De=Fe,je=dt}if(Pe===H.length)return i(G,je),qe&&Br(G,Pe),Ne;if(je===null){for(;Pe<H.length;Pe++)je=ie(G,H[Pe],ce),je!==null&&(_=v(je,_,Pe),De===null?Ne=je:De.sibling=je,De=je);return qe&&Br(G,Pe),Ne}for(je=c(G,je);Pe<H.length;Pe++)dt=me(je,G,Pe,H[Pe],ce),dt!==null&&(t&&dt.alternate!==null&&je.delete(dt.key===null?Pe:dt.key),_=v(dt,_,Pe),De===null?Ne=dt:De.sibling=dt,De=dt);return t&&je.forEach(function(Nr){return r(G,Nr)}),qe&&Br(G,Pe),Ne}function be(G,_,H,ce){var Ne=Q(H);if(typeof Ne!="function")throw Error(o(150));if(H=Ne.call(H),H==null)throw Error(o(151));for(var De=Ne=null,je=_,Pe=_=0,dt=null,Fe=H.next();je!==null&&!Fe.done;Pe++,Fe=H.next()){je.index>Pe?(dt=je,je=null):dt=je.sibling;var Nr=te(G,je,Fe.value,ce);if(Nr===null){je===null&&(je=dt);break}t&&je&&Nr.alternate===null&&r(G,je),_=v(Nr,_,Pe),De===null?Ne=Nr:De.sibling=Nr,De=Nr,je=dt}if(Fe.done)return i(G,je),qe&&Br(G,Pe),Ne;if(je===null){for(;!Fe.done;Pe++,Fe=H.next())Fe=ie(G,Fe.value,ce),Fe!==null&&(_=v(Fe,_,Pe),De===null?Ne=Fe:De.sibling=Fe,De=Fe);return qe&&Br(G,Pe),Ne}for(je=c(G,je);!Fe.done;Pe++,Fe=H.next())Fe=me(je,G,Pe,Fe.value,ce),Fe!==null&&(t&&Fe.alternate!==null&&je.delete(Fe.key===null?Pe:Fe.key),_=v(Fe,_,Pe),De===null?Ne=Fe:De.sibling=Fe,De=Fe);return t&&je.forEach(function(ty){return r(G,ty)}),qe&&Br(G,Pe),Ne}function tt(G,_,H,ce){if(typeof H=="object"&&H!==null&&H.type===R&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case A:e:{for(var Ne=H.key,De=_;De!==null;){if(De.key===Ne){if(Ne=H.type,Ne===R){if(De.tag===7){i(G,De.sibling),_=h(De,H.props.children),_.return=G,G=_;break e}}else if(De.elementType===Ne||typeof Ne=="object"&&Ne!==null&&Ne.$$typeof===J&&Gf(Ne)===De.type){i(G,De.sibling),_=h(De,H.props),_.ref=rs(G,De,H),_.return=G,G=_;break e}i(G,De);break}else r(G,De);De=De.sibling}H.type===R?(_=Wr(H.props.children,G.mode,ce,H.key),_.return=G,G=_):(ce=Ki(H.type,H.key,H.props,null,G.mode,ce),ce.ref=rs(G,_,H),ce.return=G,G=ce)}return N(G);case I:e:{for(De=H.key;_!==null;){if(_.key===De)if(_.tag===4&&_.stateNode.containerInfo===H.containerInfo&&_.stateNode.implementation===H.implementation){i(G,_.sibling),_=h(_,H.children||[]),_.return=G,G=_;break e}else{i(G,_);break}else r(G,_);_=_.sibling}_=Nc(H,G.mode,ce),_.return=G,G=_}return N(G);case J:return De=H._init,tt(G,_,De(H._payload),ce)}if(ot(H))return ye(G,_,H,ce);if(Q(H))return be(G,_,H,ce);Si(G,H)}return typeof H=="string"&&H!==""||typeof H=="number"?(H=""+H,_!==null&&_.tag===6?(i(G,_.sibling),_=h(_,H),_.return=G,G=_):(i(G,_),_=wc(H,G.mode,ce),_.return=G,G=_),N(G)):i(G,_)}return tt}var mo=Uf(!0),Hf=Uf(!1),Ei=dr(null),Di=null,go=null,kl=null;function Il(){kl=go=Di=null}function Tl(t){var r=Ei.current;We(Ei),t._currentValue=r}function Ol(t,r,i){for(;t!==null;){var c=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,c!==null&&(c.childLanes|=r)):c!==null&&(c.childLanes&r)!==r&&(c.childLanes|=r),t===i)break;t=t.return}}function vo(t,r){Di=t,kl=go=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&r)!==0&&(Ft=!0),t.firstContext=null)}function on(t){var r=t._currentValue;if(kl!==t)if(t={context:t,memoizedValue:r,next:null},go===null){if(Di===null)throw Error(o(308));go=t,Di.dependencies={lanes:0,firstContext:t}}else go=go.next=t;return r}var Fr=null;function Ml(t){Fr===null?Fr=[t]:Fr.push(t)}function Wf(t,r,i,c){var h=r.interleaved;return h===null?(i.next=i,Ml(r)):(i.next=h.next,h.next=i),r.interleaved=i,Kn(t,c)}function Kn(t,r){t.lanes|=r;var i=t.alternate;for(i!==null&&(i.lanes|=r),i=t,t=t.return;t!==null;)t.childLanes|=r,i=t.alternate,i!==null&&(i.childLanes|=r),i=t,t=t.return;return i.tag===3?i.stateNode:null}var hr=!1;function _l(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function qf(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Yn(t,r){return{eventTime:t,lane:r,tag:0,payload:null,callback:null,next:null}}function mr(t,r,i){var c=t.updateQueue;if(c===null)return null;if(c=c.shared,(Le&2)!==0){var h=c.pending;return h===null?r.next=r:(r.next=h.next,h.next=r),c.pending=r,Kn(t,i)}return h=c.interleaved,h===null?(r.next=r,Ml(c)):(r.next=h.next,h.next=r),c.interleaved=r,Kn(t,i)}function ji(t,r,i){if(r=r.updateQueue,r!==null&&(r=r.shared,(i&4194240)!==0)){var c=r.lanes;c&=t.pendingLanes,i|=c,r.lanes=i,Qa(t,i)}}function Kf(t,r){var i=t.updateQueue,c=t.alternate;if(c!==null&&(c=c.updateQueue,i===c)){var h=null,v=null;if(i=i.firstBaseUpdate,i!==null){do{var N={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};v===null?h=v=N:v=v.next=N,i=i.next}while(i!==null);v===null?h=v=r:v=v.next=r}else h=v=r;i={baseState:c.baseState,firstBaseUpdate:h,lastBaseUpdate:v,shared:c.shared,effects:c.effects},t.updateQueue=i;return}t=i.lastBaseUpdate,t===null?i.firstBaseUpdate=r:t.next=r,i.lastBaseUpdate=r}function Ai(t,r,i,c){var h=t.updateQueue;hr=!1;var v=h.firstBaseUpdate,N=h.lastBaseUpdate,j=h.shared.pending;if(j!==null){h.shared.pending=null;var k=j,W=k.next;k.next=null,N===null?v=W:N.next=W,N=k;var re=t.alternate;re!==null&&(re=re.updateQueue,j=re.lastBaseUpdate,j!==N&&(j===null?re.firstBaseUpdate=W:j.next=W,re.lastBaseUpdate=k))}if(v!==null){var ie=h.baseState;N=0,re=W=k=null,j=v;do{var te=j.lane,me=j.eventTime;if((c&te)===te){re!==null&&(re=re.next={eventTime:me,lane:0,tag:j.tag,payload:j.payload,callback:j.callback,next:null});e:{var ye=t,be=j;switch(te=r,me=i,be.tag){case 1:if(ye=be.payload,typeof ye=="function"){ie=ye.call(me,ie,te);break e}ie=ye;break e;case 3:ye.flags=ye.flags&-65537|128;case 0:if(ye=be.payload,te=typeof ye=="function"?ye.call(me,ie,te):ye,te==null)break e;ie=K({},ie,te);break e;case 2:hr=!0}}j.callback!==null&&j.lane!==0&&(t.flags|=64,te=h.effects,te===null?h.effects=[j]:te.push(j))}else me={eventTime:me,lane:te,tag:j.tag,payload:j.payload,callback:j.callback,next:null},re===null?(W=re=me,k=ie):re=re.next=me,N|=te;if(j=j.next,j===null){if(j=h.shared.pending,j===null)break;te=j,j=te.next,te.next=null,h.lastBaseUpdate=te,h.shared.pending=null}}while(!0);if(re===null&&(k=ie),h.baseState=k,h.firstBaseUpdate=W,h.lastBaseUpdate=re,r=h.shared.interleaved,r!==null){h=r;do N|=h.lane,h=h.next;while(h!==r)}else v===null&&(h.shared.lanes=0);Vr|=N,t.lanes=N,t.memoizedState=ie}}function Yf(t,r,i){if(t=r.effects,r.effects=null,t!==null)for(r=0;r<t.length;r++){var c=t[r],h=c.callback;if(h!==null){if(c.callback=null,c=i,typeof h!="function")throw Error(o(191,h));h.call(c)}}}var os={},On=dr(os),ss=dr(os),is=dr(os);function $r(t){if(t===os)throw Error(o(174));return t}function Ll(t,r){switch(Ue(is,r),Ue(ss,t),Ue(On,os),t=r.nodeType,t){case 9:case 11:r=(r=r.documentElement)?r.namespaceURI:Ut(null,"");break;default:t=t===8?r.parentNode:r,r=t.namespaceURI||null,t=t.tagName,r=Ut(r,t)}We(On),Ue(On,r)}function xo(){We(On),We(ss),We(is)}function Qf(t){$r(is.current);var r=$r(On.current),i=Ut(r,t.type);r!==i&&(Ue(ss,t),Ue(On,i))}function Bl(t){ss.current===t&&(We(On),We(ss))}var Xe=dr(0);function Pi(t){for(var r=t;r!==null;){if(r.tag===13){var i=r.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||i.data==="$!"))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var Fl=[];function $l(){for(var t=0;t<Fl.length;t++)Fl[t]._workInProgressVersionPrimary=null;Fl.length=0}var Ri=T.ReactCurrentDispatcher,zl=T.ReactCurrentBatchConfig,zr=0,Ze=null,st=null,ct=null,ki=!1,as=!1,ls=0,Cx=0;function Dt(){throw Error(o(321))}function Vl(t,r){if(r===null)return!1;for(var i=0;i<r.length&&i<t.length;i++)if(!mn(t[i],r[i]))return!1;return!0}function Gl(t,r,i,c,h,v){if(zr=v,Ze=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,Ri.current=t===null||t.memoizedState===null?jx:Ax,t=i(c,h),as){v=0;do{if(as=!1,ls=0,25<=v)throw Error(o(301));v+=1,ct=st=null,r.updateQueue=null,Ri.current=Px,t=i(c,h)}while(as)}if(Ri.current=Oi,r=st!==null&&st.next!==null,zr=0,ct=st=Ze=null,ki=!1,r)throw Error(o(300));return t}function Ul(){var t=ls!==0;return ls=0,t}function Mn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ct===null?Ze.memoizedState=ct=t:ct=ct.next=t,ct}function sn(){if(st===null){var t=Ze.alternate;t=t!==null?t.memoizedState:null}else t=st.next;var r=ct===null?Ze.memoizedState:ct.next;if(r!==null)ct=r,st=t;else{if(t===null)throw Error(o(310));st=t,t={memoizedState:st.memoizedState,baseState:st.baseState,baseQueue:st.baseQueue,queue:st.queue,next:null},ct===null?Ze.memoizedState=ct=t:ct=ct.next=t}return ct}function cs(t,r){return typeof r=="function"?r(t):r}function Hl(t){var r=sn(),i=r.queue;if(i===null)throw Error(o(311));i.lastRenderedReducer=t;var c=st,h=c.baseQueue,v=i.pending;if(v!==null){if(h!==null){var N=h.next;h.next=v.next,v.next=N}c.baseQueue=h=v,i.pending=null}if(h!==null){v=h.next,c=c.baseState;var j=N=null,k=null,W=v;do{var re=W.lane;if((zr&re)===re)k!==null&&(k=k.next={lane:0,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null}),c=W.hasEagerState?W.eagerState:t(c,W.action);else{var ie={lane:re,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null};k===null?(j=k=ie,N=c):k=k.next=ie,Ze.lanes|=re,Vr|=re}W=W.next}while(W!==null&&W!==v);k===null?N=c:k.next=j,mn(c,r.memoizedState)||(Ft=!0),r.memoizedState=c,r.baseState=N,r.baseQueue=k,i.lastRenderedState=c}if(t=i.interleaved,t!==null){h=t;do v=h.lane,Ze.lanes|=v,Vr|=v,h=h.next;while(h!==t)}else h===null&&(i.lanes=0);return[r.memoizedState,i.dispatch]}function Wl(t){var r=sn(),i=r.queue;if(i===null)throw Error(o(311));i.lastRenderedReducer=t;var c=i.dispatch,h=i.pending,v=r.memoizedState;if(h!==null){i.pending=null;var N=h=h.next;do v=t(v,N.action),N=N.next;while(N!==h);mn(v,r.memoizedState)||(Ft=!0),r.memoizedState=v,r.baseQueue===null&&(r.baseState=v),i.lastRenderedState=v}return[v,c]}function Xf(){}function Zf(t,r){var i=Ze,c=sn(),h=r(),v=!mn(c.memoizedState,h);if(v&&(c.memoizedState=h,Ft=!0),c=c.queue,ql(tp.bind(null,i,c,t),[t]),c.getSnapshot!==r||v||ct!==null&&ct.memoizedState.tag&1){if(i.flags|=2048,us(9,ep.bind(null,i,c,h,r),void 0,null),ut===null)throw Error(o(349));(zr&30)!==0||Jf(i,r,h)}return h}function Jf(t,r,i){t.flags|=16384,t={getSnapshot:r,value:i},r=Ze.updateQueue,r===null?(r={lastEffect:null,stores:null},Ze.updateQueue=r,r.stores=[t]):(i=r.stores,i===null?r.stores=[t]:i.push(t))}function ep(t,r,i,c){r.value=i,r.getSnapshot=c,np(r)&&rp(t)}function tp(t,r,i){return i(function(){np(r)&&rp(t)})}function np(t){var r=t.getSnapshot;t=t.value;try{var i=r();return!mn(t,i)}catch{return!0}}function rp(t){var r=Kn(t,1);r!==null&&bn(r,t,1,-1)}function op(t){var r=Mn();return typeof t=="function"&&(t=t()),r.memoizedState=r.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:cs,lastRenderedState:t},r.queue=t,t=t.dispatch=Dx.bind(null,Ze,t),[r.memoizedState,t]}function us(t,r,i,c){return t={tag:t,create:r,destroy:i,deps:c,next:null},r=Ze.updateQueue,r===null?(r={lastEffect:null,stores:null},Ze.updateQueue=r,r.lastEffect=t.next=t):(i=r.lastEffect,i===null?r.lastEffect=t.next=t:(c=i.next,i.next=t,t.next=c,r.lastEffect=t)),t}function sp(){return sn().memoizedState}function Ii(t,r,i,c){var h=Mn();Ze.flags|=t,h.memoizedState=us(1|r,i,void 0,c===void 0?null:c)}function Ti(t,r,i,c){var h=sn();c=c===void 0?null:c;var v=void 0;if(st!==null){var N=st.memoizedState;if(v=N.destroy,c!==null&&Vl(c,N.deps)){h.memoizedState=us(r,i,v,c);return}}Ze.flags|=t,h.memoizedState=us(1|r,i,v,c)}function ip(t,r){return Ii(8390656,8,t,r)}function ql(t,r){return Ti(2048,8,t,r)}function ap(t,r){return Ti(4,2,t,r)}function lp(t,r){return Ti(4,4,t,r)}function cp(t,r){if(typeof r=="function")return t=t(),r(t),function(){r(null)};if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function up(t,r,i){return i=i!=null?i.concat([t]):null,Ti(4,4,cp.bind(null,r,t),i)}function Kl(){}function dp(t,r){var i=sn();r=r===void 0?null:r;var c=i.memoizedState;return c!==null&&r!==null&&Vl(r,c[1])?c[0]:(i.memoizedState=[t,r],t)}function fp(t,r){var i=sn();r=r===void 0?null:r;var c=i.memoizedState;return c!==null&&r!==null&&Vl(r,c[1])?c[0]:(t=t(),i.memoizedState=[t,r],t)}function pp(t,r,i){return(zr&21)===0?(t.baseState&&(t.baseState=!1,Ft=!0),t.memoizedState=i):(mn(i,r)||(i=Vd(),Ze.lanes|=i,Vr|=i,t.baseState=!0),r)}function Sx(t,r){var i=Ve;Ve=i!==0&&4>i?i:4,t(!0);var c=zl.transition;zl.transition={};try{t(!1),r()}finally{Ve=i,zl.transition=c}}function hp(){return sn().memoizedState}function Ex(t,r,i){var c=yr(t);if(i={lane:c,action:i,hasEagerState:!1,eagerState:null,next:null},mp(t))gp(r,i);else if(i=Wf(t,r,i,c),i!==null){var h=It();bn(i,t,c,h),vp(i,r,c)}}function Dx(t,r,i){var c=yr(t),h={lane:c,action:i,hasEagerState:!1,eagerState:null,next:null};if(mp(t))gp(r,h);else{var v=t.alternate;if(t.lanes===0&&(v===null||v.lanes===0)&&(v=r.lastRenderedReducer,v!==null))try{var N=r.lastRenderedState,j=v(N,i);if(h.hasEagerState=!0,h.eagerState=j,mn(j,N)){var k=r.interleaved;k===null?(h.next=h,Ml(r)):(h.next=k.next,k.next=h),r.interleaved=h;return}}catch{}finally{}i=Wf(t,r,h,c),i!==null&&(h=It(),bn(i,t,c,h),vp(i,r,c))}}function mp(t){var r=t.alternate;return t===Ze||r!==null&&r===Ze}function gp(t,r){as=ki=!0;var i=t.pending;i===null?r.next=r:(r.next=i.next,i.next=r),t.pending=r}function vp(t,r,i){if((i&4194240)!==0){var c=r.lanes;c&=t.pendingLanes,i|=c,r.lanes=i,Qa(t,i)}}var Oi={readContext:on,useCallback:Dt,useContext:Dt,useEffect:Dt,useImperativeHandle:Dt,useInsertionEffect:Dt,useLayoutEffect:Dt,useMemo:Dt,useReducer:Dt,useRef:Dt,useState:Dt,useDebugValue:Dt,useDeferredValue:Dt,useTransition:Dt,useMutableSource:Dt,useSyncExternalStore:Dt,useId:Dt,unstable_isNewReconciler:!1},jx={readContext:on,useCallback:function(t,r){return Mn().memoizedState=[t,r===void 0?null:r],t},useContext:on,useEffect:ip,useImperativeHandle:function(t,r,i){return i=i!=null?i.concat([t]):null,Ii(4194308,4,cp.bind(null,r,t),i)},useLayoutEffect:function(t,r){return Ii(4194308,4,t,r)},useInsertionEffect:function(t,r){return Ii(4,2,t,r)},useMemo:function(t,r){var i=Mn();return r=r===void 0?null:r,t=t(),i.memoizedState=[t,r],t},useReducer:function(t,r,i){var c=Mn();return r=i!==void 0?i(r):r,c.memoizedState=c.baseState=r,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:r},c.queue=t,t=t.dispatch=Ex.bind(null,Ze,t),[c.memoizedState,t]},useRef:function(t){var r=Mn();return t={current:t},r.memoizedState=t},useState:op,useDebugValue:Kl,useDeferredValue:function(t){return Mn().memoizedState=t},useTransition:function(){var t=op(!1),r=t[0];return t=Sx.bind(null,t[1]),Mn().memoizedState=t,[r,t]},useMutableSource:function(){},useSyncExternalStore:function(t,r,i){var c=Ze,h=Mn();if(qe){if(i===void 0)throw Error(o(407));i=i()}else{if(i=r(),ut===null)throw Error(o(349));(zr&30)!==0||Jf(c,r,i)}h.memoizedState=i;var v={value:i,getSnapshot:r};return h.queue=v,ip(tp.bind(null,c,v,t),[t]),c.flags|=2048,us(9,ep.bind(null,c,v,i,r),void 0,null),i},useId:function(){var t=Mn(),r=ut.identifierPrefix;if(qe){var i=qn,c=Wn;i=(c&~(1<<32-hn(c)-1)).toString(32)+i,r=":"+r+"R"+i,i=ls++,0<i&&(r+="H"+i.toString(32)),r+=":"}else i=Cx++,r=":"+r+"r"+i.toString(32)+":";return t.memoizedState=r},unstable_isNewReconciler:!1},Ax={readContext:on,useCallback:dp,useContext:on,useEffect:ql,useImperativeHandle:up,useInsertionEffect:ap,useLayoutEffect:lp,useMemo:fp,useReducer:Hl,useRef:sp,useState:function(){return Hl(cs)},useDebugValue:Kl,useDeferredValue:function(t){var r=sn();return pp(r,st.memoizedState,t)},useTransition:function(){var t=Hl(cs)[0],r=sn().memoizedState;return[t,r]},useMutableSource:Xf,useSyncExternalStore:Zf,useId:hp,unstable_isNewReconciler:!1},Px={readContext:on,useCallback:dp,useContext:on,useEffect:ql,useImperativeHandle:up,useInsertionEffect:ap,useLayoutEffect:lp,useMemo:fp,useReducer:Wl,useRef:sp,useState:function(){return Wl(cs)},useDebugValue:Kl,useDeferredValue:function(t){var r=sn();return st===null?r.memoizedState=t:pp(r,st.memoizedState,t)},useTransition:function(){var t=Wl(cs)[0],r=sn().memoizedState;return[t,r]},useMutableSource:Xf,useSyncExternalStore:Zf,useId:hp,unstable_isNewReconciler:!1};function vn(t,r){if(t&&t.defaultProps){r=K({},r),t=t.defaultProps;for(var i in t)r[i]===void 0&&(r[i]=t[i]);return r}return r}function Yl(t,r,i,c){r=t.memoizedState,i=i(c,r),i=i==null?r:K({},r,i),t.memoizedState=i,t.lanes===0&&(t.updateQueue.baseState=i)}var Mi={isMounted:function(t){return(t=t._reactInternals)?Or(t)===t:!1},enqueueSetState:function(t,r,i){t=t._reactInternals;var c=It(),h=yr(t),v=Yn(c,h);v.payload=r,i!=null&&(v.callback=i),r=mr(t,v,h),r!==null&&(bn(r,t,h,c),ji(r,t,h))},enqueueReplaceState:function(t,r,i){t=t._reactInternals;var c=It(),h=yr(t),v=Yn(c,h);v.tag=1,v.payload=r,i!=null&&(v.callback=i),r=mr(t,v,h),r!==null&&(bn(r,t,h,c),ji(r,t,h))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var i=It(),c=yr(t),h=Yn(i,c);h.tag=2,r!=null&&(h.callback=r),r=mr(t,h,c),r!==null&&(bn(r,t,c,i),ji(r,t,c))}};function xp(t,r,i,c,h,v,N){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(c,v,N):r.prototype&&r.prototype.isPureReactComponent?!Qo(i,c)||!Qo(h,v):!0}function yp(t,r,i){var c=!1,h=fr,v=r.contextType;return typeof v=="object"&&v!==null?v=on(v):(h=Bt(r)?_r:Et.current,c=r.contextTypes,v=(c=c!=null)?uo(t,h):fr),r=new r(i,v),t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=Mi,t.stateNode=r,r._reactInternals=t,c&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=h,t.__reactInternalMemoizedMaskedChildContext=v),r}function bp(t,r,i,c){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(i,c),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(i,c),r.state!==t&&Mi.enqueueReplaceState(r,r.state,null)}function Ql(t,r,i,c){var h=t.stateNode;h.props=i,h.state=t.memoizedState,h.refs={},_l(t);var v=r.contextType;typeof v=="object"&&v!==null?h.context=on(v):(v=Bt(r)?_r:Et.current,h.context=uo(t,v)),h.state=t.memoizedState,v=r.getDerivedStateFromProps,typeof v=="function"&&(Yl(t,r,v,i),h.state=t.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(r=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),r!==h.state&&Mi.enqueueReplaceState(h,h.state,null),Ai(t,i,h,c),h.state=t.memoizedState),typeof h.componentDidMount=="function"&&(t.flags|=4194308)}function yo(t,r){try{var i="",c=r;do i+=ne(c),c=c.return;while(c);var h=i}catch(v){h=`
Error generating stack: `+v.message+`
`+v.stack}return{value:t,source:r,stack:h,digest:null}}function Xl(t,r,i){return{value:t,source:null,stack:i??null,digest:r??null}}function Zl(t,r){try{console.error(r.value)}catch(i){setTimeout(function(){throw i})}}var Rx=typeof WeakMap=="function"?WeakMap:Map;function wp(t,r,i){i=Yn(-1,i),i.tag=3,i.payload={element:null};var c=r.value;return i.callback=function(){Vi||(Vi=!0,pc=c),Zl(t,r)},i}function Np(t,r,i){i=Yn(-1,i),i.tag=3;var c=t.type.getDerivedStateFromError;if(typeof c=="function"){var h=r.value;i.payload=function(){return c(h)},i.callback=function(){Zl(t,r)}}var v=t.stateNode;return v!==null&&typeof v.componentDidCatch=="function"&&(i.callback=function(){Zl(t,r),typeof c!="function"&&(vr===null?vr=new Set([this]):vr.add(this));var N=r.stack;this.componentDidCatch(r.value,{componentStack:N!==null?N:""})}),i}function Cp(t,r,i){var c=t.pingCache;if(c===null){c=t.pingCache=new Rx;var h=new Set;c.set(r,h)}else h=c.get(r),h===void 0&&(h=new Set,c.set(r,h));h.has(i)||(h.add(i),t=Ux.bind(null,t,r,i),r.then(t,t))}function Sp(t){do{var r;if((r=t.tag===13)&&(r=t.memoizedState,r=r!==null?r.dehydrated!==null:!0),r)return t;t=t.return}while(t!==null);return null}function Ep(t,r,i,c,h){return(t.mode&1)===0?(t===r?t.flags|=65536:(t.flags|=128,i.flags|=131072,i.flags&=-52805,i.tag===1&&(i.alternate===null?i.tag=17:(r=Yn(-1,1),r.tag=2,mr(i,r,1))),i.lanes|=1),t):(t.flags|=65536,t.lanes=h,t)}var kx=T.ReactCurrentOwner,Ft=!1;function kt(t,r,i,c){r.child=t===null?Hf(r,null,i,c):mo(r,t.child,i,c)}function Dp(t,r,i,c,h){i=i.render;var v=r.ref;return vo(r,h),c=Gl(t,r,i,c,v,h),i=Ul(),t!==null&&!Ft?(r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~h,Qn(t,r,h)):(qe&&i&&Dl(r),r.flags|=1,kt(t,r,c,h),r.child)}function jp(t,r,i,c,h){if(t===null){var v=i.type;return typeof v=="function"&&!bc(v)&&v.defaultProps===void 0&&i.compare===null&&i.defaultProps===void 0?(r.tag=15,r.type=v,Ap(t,r,v,c,h)):(t=Ki(i.type,null,c,r,r.mode,h),t.ref=r.ref,t.return=r,r.child=t)}if(v=t.child,(t.lanes&h)===0){var N=v.memoizedProps;if(i=i.compare,i=i!==null?i:Qo,i(N,c)&&t.ref===r.ref)return Qn(t,r,h)}return r.flags|=1,t=wr(v,c),t.ref=r.ref,t.return=r,r.child=t}function Ap(t,r,i,c,h){if(t!==null){var v=t.memoizedProps;if(Qo(v,c)&&t.ref===r.ref)if(Ft=!1,r.pendingProps=c=v,(t.lanes&h)!==0)(t.flags&131072)!==0&&(Ft=!0);else return r.lanes=t.lanes,Qn(t,r,h)}return Jl(t,r,i,c,h)}function Pp(t,r,i){var c=r.pendingProps,h=c.children,v=t!==null?t.memoizedState:null;if(c.mode==="hidden")if((r.mode&1)===0)r.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ue(wo,Qt),Qt|=i;else{if((i&1073741824)===0)return t=v!==null?v.baseLanes|i:i,r.lanes=r.childLanes=1073741824,r.memoizedState={baseLanes:t,cachePool:null,transitions:null},r.updateQueue=null,Ue(wo,Qt),Qt|=t,null;r.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=v!==null?v.baseLanes:i,Ue(wo,Qt),Qt|=c}else v!==null?(c=v.baseLanes|i,r.memoizedState=null):c=i,Ue(wo,Qt),Qt|=c;return kt(t,r,h,i),r.child}function Rp(t,r){var i=r.ref;(t===null&&i!==null||t!==null&&t.ref!==i)&&(r.flags|=512,r.flags|=2097152)}function Jl(t,r,i,c,h){var v=Bt(i)?_r:Et.current;return v=uo(r,v),vo(r,h),i=Gl(t,r,i,c,v,h),c=Ul(),t!==null&&!Ft?(r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~h,Qn(t,r,h)):(qe&&c&&Dl(r),r.flags|=1,kt(t,r,i,h),r.child)}function kp(t,r,i,c,h){if(Bt(i)){var v=!0;yi(r)}else v=!1;if(vo(r,h),r.stateNode===null)Li(t,r),yp(r,i,c),Ql(r,i,c,h),c=!0;else if(t===null){var N=r.stateNode,j=r.memoizedProps;N.props=j;var k=N.context,W=i.contextType;typeof W=="object"&&W!==null?W=on(W):(W=Bt(i)?_r:Et.current,W=uo(r,W));var re=i.getDerivedStateFromProps,ie=typeof re=="function"||typeof N.getSnapshotBeforeUpdate=="function";ie||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||(j!==c||k!==W)&&bp(r,N,c,W),hr=!1;var te=r.memoizedState;N.state=te,Ai(r,c,N,h),k=r.memoizedState,j!==c||te!==k||Lt.current||hr?(typeof re=="function"&&(Yl(r,i,re,c),k=r.memoizedState),(j=hr||xp(r,i,j,c,te,k,W))?(ie||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount()),typeof N.componentDidMount=="function"&&(r.flags|=4194308)):(typeof N.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=c,r.memoizedState=k),N.props=c,N.state=k,N.context=W,c=j):(typeof N.componentDidMount=="function"&&(r.flags|=4194308),c=!1)}else{N=r.stateNode,qf(t,r),j=r.memoizedProps,W=r.type===r.elementType?j:vn(r.type,j),N.props=W,ie=r.pendingProps,te=N.context,k=i.contextType,typeof k=="object"&&k!==null?k=on(k):(k=Bt(i)?_r:Et.current,k=uo(r,k));var me=i.getDerivedStateFromProps;(re=typeof me=="function"||typeof N.getSnapshotBeforeUpdate=="function")||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||(j!==ie||te!==k)&&bp(r,N,c,k),hr=!1,te=r.memoizedState,N.state=te,Ai(r,c,N,h);var ye=r.memoizedState;j!==ie||te!==ye||Lt.current||hr?(typeof me=="function"&&(Yl(r,i,me,c),ye=r.memoizedState),(W=hr||xp(r,i,W,c,te,ye,k)||!1)?(re||typeof N.UNSAFE_componentWillUpdate!="function"&&typeof N.componentWillUpdate!="function"||(typeof N.componentWillUpdate=="function"&&N.componentWillUpdate(c,ye,k),typeof N.UNSAFE_componentWillUpdate=="function"&&N.UNSAFE_componentWillUpdate(c,ye,k)),typeof N.componentDidUpdate=="function"&&(r.flags|=4),typeof N.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof N.componentDidUpdate!="function"||j===t.memoizedProps&&te===t.memoizedState||(r.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||j===t.memoizedProps&&te===t.memoizedState||(r.flags|=1024),r.memoizedProps=c,r.memoizedState=ye),N.props=c,N.state=ye,N.context=k,c=W):(typeof N.componentDidUpdate!="function"||j===t.memoizedProps&&te===t.memoizedState||(r.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||j===t.memoizedProps&&te===t.memoizedState||(r.flags|=1024),c=!1)}return ec(t,r,i,c,v,h)}function ec(t,r,i,c,h,v){Rp(t,r);var N=(r.flags&128)!==0;if(!c&&!N)return h&&_f(r,i,!1),Qn(t,r,v);c=r.stateNode,kx.current=r;var j=N&&typeof i.getDerivedStateFromError!="function"?null:c.render();return r.flags|=1,t!==null&&N?(r.child=mo(r,t.child,null,v),r.child=mo(r,null,j,v)):kt(t,r,j,v),r.memoizedState=c.state,h&&_f(r,i,!0),r.child}function Ip(t){var r=t.stateNode;r.pendingContext?Of(t,r.pendingContext,r.pendingContext!==r.context):r.context&&Of(t,r.context,!1),Ll(t,r.containerInfo)}function Tp(t,r,i,c,h){return ho(),Rl(h),r.flags|=256,kt(t,r,i,c),r.child}var tc={dehydrated:null,treeContext:null,retryLane:0};function nc(t){return{baseLanes:t,cachePool:null,transitions:null}}function Op(t,r,i){var c=r.pendingProps,h=Xe.current,v=!1,N=(r.flags&128)!==0,j;if((j=N)||(j=t!==null&&t.memoizedState===null?!1:(h&2)!==0),j?(v=!0,r.flags&=-129):(t===null||t.memoizedState!==null)&&(h|=1),Ue(Xe,h&1),t===null)return Pl(r),t=r.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?((r.mode&1)===0?r.lanes=1:t.data==="$!"?r.lanes=8:r.lanes=1073741824,null):(N=c.children,t=c.fallback,v?(c=r.mode,v=r.child,N={mode:"hidden",children:N},(c&1)===0&&v!==null?(v.childLanes=0,v.pendingProps=N):v=Yi(N,c,0,null),t=Wr(t,c,i,null),v.return=r,t.return=r,v.sibling=t,r.child=v,r.child.memoizedState=nc(i),r.memoizedState=tc,t):rc(r,N));if(h=t.memoizedState,h!==null&&(j=h.dehydrated,j!==null))return Ix(t,r,N,c,j,h,i);if(v){v=c.fallback,N=r.mode,h=t.child,j=h.sibling;var k={mode:"hidden",children:c.children};return(N&1)===0&&r.child!==h?(c=r.child,c.childLanes=0,c.pendingProps=k,r.deletions=null):(c=wr(h,k),c.subtreeFlags=h.subtreeFlags&14680064),j!==null?v=wr(j,v):(v=Wr(v,N,i,null),v.flags|=2),v.return=r,c.return=r,c.sibling=v,r.child=c,c=v,v=r.child,N=t.child.memoizedState,N=N===null?nc(i):{baseLanes:N.baseLanes|i,cachePool:null,transitions:N.transitions},v.memoizedState=N,v.childLanes=t.childLanes&~i,r.memoizedState=tc,c}return v=t.child,t=v.sibling,c=wr(v,{mode:"visible",children:c.children}),(r.mode&1)===0&&(c.lanes=i),c.return=r,c.sibling=null,t!==null&&(i=r.deletions,i===null?(r.deletions=[t],r.flags|=16):i.push(t)),r.child=c,r.memoizedState=null,c}function rc(t,r){return r=Yi({mode:"visible",children:r},t.mode,0,null),r.return=t,t.child=r}function _i(t,r,i,c){return c!==null&&Rl(c),mo(r,t.child,null,i),t=rc(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function Ix(t,r,i,c,h,v,N){if(i)return r.flags&256?(r.flags&=-257,c=Xl(Error(o(422))),_i(t,r,N,c)):r.memoizedState!==null?(r.child=t.child,r.flags|=128,null):(v=c.fallback,h=r.mode,c=Yi({mode:"visible",children:c.children},h,0,null),v=Wr(v,h,N,null),v.flags|=2,c.return=r,v.return=r,c.sibling=v,r.child=c,(r.mode&1)!==0&&mo(r,t.child,null,N),r.child.memoizedState=nc(N),r.memoizedState=tc,v);if((r.mode&1)===0)return _i(t,r,N,null);if(h.data==="$!"){if(c=h.nextSibling&&h.nextSibling.dataset,c)var j=c.dgst;return c=j,v=Error(o(419)),c=Xl(v,c,void 0),_i(t,r,N,c)}if(j=(N&t.childLanes)!==0,Ft||j){if(c=ut,c!==null){switch(N&-N){case 4:h=2;break;case 16:h=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:h=32;break;case 536870912:h=268435456;break;default:h=0}h=(h&(c.suspendedLanes|N))!==0?0:h,h!==0&&h!==v.retryLane&&(v.retryLane=h,Kn(t,h),bn(c,t,h,-1))}return yc(),c=Xl(Error(o(421))),_i(t,r,N,c)}return h.data==="$?"?(r.flags|=128,r.child=t.child,r=Hx.bind(null,t),h._reactRetry=r,null):(t=v.treeContext,Yt=ur(h.nextSibling),Kt=r,qe=!0,gn=null,t!==null&&(nn[rn++]=Wn,nn[rn++]=qn,nn[rn++]=Lr,Wn=t.id,qn=t.overflow,Lr=r),r=rc(r,c.children),r.flags|=4096,r)}function Mp(t,r,i){t.lanes|=r;var c=t.alternate;c!==null&&(c.lanes|=r),Ol(t.return,r,i)}function oc(t,r,i,c,h){var v=t.memoizedState;v===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:c,tail:i,tailMode:h}:(v.isBackwards=r,v.rendering=null,v.renderingStartTime=0,v.last=c,v.tail=i,v.tailMode=h)}function _p(t,r,i){var c=r.pendingProps,h=c.revealOrder,v=c.tail;if(kt(t,r,c.children,i),c=Xe.current,(c&2)!==0)c=c&1|2,r.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Mp(t,i,r);else if(t.tag===19)Mp(t,i,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}c&=1}if(Ue(Xe,c),(r.mode&1)===0)r.memoizedState=null;else switch(h){case"forwards":for(i=r.child,h=null;i!==null;)t=i.alternate,t!==null&&Pi(t)===null&&(h=i),i=i.sibling;i=h,i===null?(h=r.child,r.child=null):(h=i.sibling,i.sibling=null),oc(r,!1,h,i,v);break;case"backwards":for(i=null,h=r.child,r.child=null;h!==null;){if(t=h.alternate,t!==null&&Pi(t)===null){r.child=h;break}t=h.sibling,h.sibling=i,i=h,h=t}oc(r,!0,i,null,v);break;case"together":oc(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function Li(t,r){(r.mode&1)===0&&t!==null&&(t.alternate=null,r.alternate=null,r.flags|=2)}function Qn(t,r,i){if(t!==null&&(r.dependencies=t.dependencies),Vr|=r.lanes,(i&r.childLanes)===0)return null;if(t!==null&&r.child!==t.child)throw Error(o(153));if(r.child!==null){for(t=r.child,i=wr(t,t.pendingProps),r.child=i,i.return=r;t.sibling!==null;)t=t.sibling,i=i.sibling=wr(t,t.pendingProps),i.return=r;i.sibling=null}return r.child}function Tx(t,r,i){switch(r.tag){case 3:Ip(r),ho();break;case 5:Qf(r);break;case 1:Bt(r.type)&&yi(r);break;case 4:Ll(r,r.stateNode.containerInfo);break;case 10:var c=r.type._context,h=r.memoizedProps.value;Ue(Ei,c._currentValue),c._currentValue=h;break;case 13:if(c=r.memoizedState,c!==null)return c.dehydrated!==null?(Ue(Xe,Xe.current&1),r.flags|=128,null):(i&r.child.childLanes)!==0?Op(t,r,i):(Ue(Xe,Xe.current&1),t=Qn(t,r,i),t!==null?t.sibling:null);Ue(Xe,Xe.current&1);break;case 19:if(c=(i&r.childLanes)!==0,(t.flags&128)!==0){if(c)return _p(t,r,i);r.flags|=128}if(h=r.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),Ue(Xe,Xe.current),c)break;return null;case 22:case 23:return r.lanes=0,Pp(t,r,i)}return Qn(t,r,i)}var Lp,sc,Bp,Fp;Lp=function(t,r){for(var i=r.child;i!==null;){if(i.tag===5||i.tag===6)t.appendChild(i.stateNode);else if(i.tag!==4&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return;i=i.return}i.sibling.return=i.return,i=i.sibling}},sc=function(){},Bp=function(t,r,i,c){var h=t.memoizedProps;if(h!==c){t=r.stateNode,$r(On.current);var v=null;switch(i){case"input":h=ke(t,h),c=ke(t,c),v=[];break;case"select":h=K({},h,{value:void 0}),c=K({},c,{value:void 0}),v=[];break;case"textarea":h=jn(t,h),c=jn(t,c),v=[];break;default:typeof h.onClick!="function"&&typeof c.onClick=="function"&&(t.onclick=gi)}nr(i,c);var N;i=null;for(W in h)if(!c.hasOwnProperty(W)&&h.hasOwnProperty(W)&&h[W]!=null)if(W==="style"){var j=h[W];for(N in j)j.hasOwnProperty(N)&&(i||(i={}),i[N]="")}else W!=="dangerouslySetInnerHTML"&&W!=="children"&&W!=="suppressContentEditableWarning"&&W!=="suppressHydrationWarning"&&W!=="autoFocus"&&(a.hasOwnProperty(W)?v||(v=[]):(v=v||[]).push(W,null));for(W in c){var k=c[W];if(j=h?.[W],c.hasOwnProperty(W)&&k!==j&&(k!=null||j!=null))if(W==="style")if(j){for(N in j)!j.hasOwnProperty(N)||k&&k.hasOwnProperty(N)||(i||(i={}),i[N]="");for(N in k)k.hasOwnProperty(N)&&j[N]!==k[N]&&(i||(i={}),i[N]=k[N])}else i||(v||(v=[]),v.push(W,i)),i=k;else W==="dangerouslySetInnerHTML"?(k=k?k.__html:void 0,j=j?j.__html:void 0,k!=null&&j!==k&&(v=v||[]).push(W,k)):W==="children"?typeof k!="string"&&typeof k!="number"||(v=v||[]).push(W,""+k):W!=="suppressContentEditableWarning"&&W!=="suppressHydrationWarning"&&(a.hasOwnProperty(W)?(k!=null&&W==="onScroll"&&He("scroll",t),v||j===k||(v=[])):(v=v||[]).push(W,k))}i&&(v=v||[]).push("style",i);var W=v;(r.updateQueue=W)&&(r.flags|=4)}},Fp=function(t,r,i,c){i!==c&&(r.flags|=4)};function ds(t,r){if(!qe)switch(t.tailMode){case"hidden":r=t.tail;for(var i=null;r!==null;)r.alternate!==null&&(i=r),r=r.sibling;i===null?t.tail=null:i.sibling=null;break;case"collapsed":i=t.tail;for(var c=null;i!==null;)i.alternate!==null&&(c=i),i=i.sibling;c===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:c.sibling=null}}function jt(t){var r=t.alternate!==null&&t.alternate.child===t.child,i=0,c=0;if(r)for(var h=t.child;h!==null;)i|=h.lanes|h.childLanes,c|=h.subtreeFlags&14680064,c|=h.flags&14680064,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)i|=h.lanes|h.childLanes,c|=h.subtreeFlags,c|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=c,t.childLanes=i,r}function Ox(t,r,i){var c=r.pendingProps;switch(jl(r),r.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return jt(r),null;case 1:return Bt(r.type)&&xi(),jt(r),null;case 3:return c=r.stateNode,xo(),We(Lt),We(Et),$l(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(t===null||t.child===null)&&(Ci(r)?r.flags|=4:t===null||t.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,gn!==null&&(gc(gn),gn=null))),sc(t,r),jt(r),null;case 5:Bl(r);var h=$r(is.current);if(i=r.type,t!==null&&r.stateNode!=null)Bp(t,r,i,c,h),t.ref!==r.ref&&(r.flags|=512,r.flags|=2097152);else{if(!c){if(r.stateNode===null)throw Error(o(166));return jt(r),null}if(t=$r(On.current),Ci(r)){c=r.stateNode,i=r.type;var v=r.memoizedProps;switch(c[Tn]=r,c[ts]=v,t=(r.mode&1)!==0,i){case"dialog":He("cancel",c),He("close",c);break;case"iframe":case"object":case"embed":He("load",c);break;case"video":case"audio":for(h=0;h<Zo.length;h++)He(Zo[h],c);break;case"source":He("error",c);break;case"img":case"image":case"link":He("error",c),He("load",c);break;case"details":He("toggle",c);break;case"input":_e(c,v),He("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!v.multiple},He("invalid",c);break;case"textarea":Rr(c,v),He("invalid",c)}nr(i,v),h=null;for(var N in v)if(v.hasOwnProperty(N)){var j=v[N];N==="children"?typeof j=="string"?c.textContent!==j&&(v.suppressHydrationWarning!==!0&&mi(c.textContent,j,t),h=["children",j]):typeof j=="number"&&c.textContent!==""+j&&(v.suppressHydrationWarning!==!0&&mi(c.textContent,j,t),h=["children",""+j]):a.hasOwnProperty(N)&&j!=null&&N==="onScroll"&&He("scroll",c)}switch(i){case"input":Ie(c),Nt(c,v,!0);break;case"textarea":Ie(c),Xr(c);break;case"select":case"option":break;default:typeof v.onClick=="function"&&(c.onclick=gi)}c=h,r.updateQueue=c,c!==null&&(r.flags|=4)}else{N=h.nodeType===9?h:h.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=$n(i)),t==="http://www.w3.org/1999/xhtml"?i==="script"?(t=N.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof c.is=="string"?t=N.createElement(i,{is:c.is}):(t=N.createElement(i),i==="select"&&(N=t,c.multiple?N.multiple=!0:c.size&&(N.size=c.size))):t=N.createElementNS(t,i),t[Tn]=r,t[ts]=c,Lp(t,r,!1,!1),r.stateNode=t;e:{switch(N=zn(i,c),i){case"dialog":He("cancel",t),He("close",t),h=c;break;case"iframe":case"object":case"embed":He("load",t),h=c;break;case"video":case"audio":for(h=0;h<Zo.length;h++)He(Zo[h],t);h=c;break;case"source":He("error",t),h=c;break;case"img":case"image":case"link":He("error",t),He("load",t),h=c;break;case"details":He("toggle",t),h=c;break;case"input":_e(t,c),h=ke(t,c),He("invalid",t);break;case"option":h=c;break;case"select":t._wrapperState={wasMultiple:!!c.multiple},h=K({},c,{value:void 0}),He("invalid",t);break;case"textarea":Rr(t,c),h=jn(t,c),He("invalid",t);break;default:h=c}nr(i,h),j=h;for(v in j)if(j.hasOwnProperty(v)){var k=j[v];v==="style"?eo(t,k):v==="dangerouslySetInnerHTML"?(k=k?k.__html:void 0,k!=null&&An(t,k)):v==="children"?typeof k=="string"?(i!=="textarea"||k!=="")&&Pn(t,k):typeof k=="number"&&Pn(t,""+k):v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&v!=="autoFocus"&&(a.hasOwnProperty(v)?k!=null&&v==="onScroll"&&He("scroll",t):k!=null&&P(t,v,k,N))}switch(i){case"input":Ie(t),Nt(t,c,!1);break;case"textarea":Ie(t),Xr(t);break;case"option":c.value!=null&&t.setAttribute("value",""+ve(c.value));break;case"select":t.multiple=!!c.multiple,v=c.value,v!=null?lt(t,!!c.multiple,v,!1):c.defaultValue!=null&&lt(t,!!c.multiple,c.defaultValue,!0);break;default:typeof h.onClick=="function"&&(t.onclick=gi)}switch(i){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(r.flags|=4)}r.ref!==null&&(r.flags|=512,r.flags|=2097152)}return jt(r),null;case 6:if(t&&r.stateNode!=null)Fp(t,r,t.memoizedProps,c);else{if(typeof c!="string"&&r.stateNode===null)throw Error(o(166));if(i=$r(is.current),$r(On.current),Ci(r)){if(c=r.stateNode,i=r.memoizedProps,c[Tn]=r,(v=c.nodeValue!==i)&&(t=Kt,t!==null))switch(t.tag){case 3:mi(c.nodeValue,i,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&mi(c.nodeValue,i,(t.mode&1)!==0)}v&&(r.flags|=4)}else c=(i.nodeType===9?i:i.ownerDocument).createTextNode(c),c[Tn]=r,r.stateNode=c}return jt(r),null;case 13:if(We(Xe),c=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(qe&&Yt!==null&&(r.mode&1)!==0&&(r.flags&128)===0)Vf(),ho(),r.flags|=98560,v=!1;else if(v=Ci(r),c!==null&&c.dehydrated!==null){if(t===null){if(!v)throw Error(o(318));if(v=r.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(o(317));v[Tn]=r}else ho(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;jt(r),v=!1}else gn!==null&&(gc(gn),gn=null),v=!0;if(!v)return r.flags&65536?r:null}return(r.flags&128)!==0?(r.lanes=i,r):(c=c!==null,c!==(t!==null&&t.memoizedState!==null)&&c&&(r.child.flags|=8192,(r.mode&1)!==0&&(t===null||(Xe.current&1)!==0?it===0&&(it=3):yc())),r.updateQueue!==null&&(r.flags|=4),jt(r),null);case 4:return xo(),sc(t,r),t===null&&Jo(r.stateNode.containerInfo),jt(r),null;case 10:return Tl(r.type._context),jt(r),null;case 17:return Bt(r.type)&&xi(),jt(r),null;case 19:if(We(Xe),v=r.memoizedState,v===null)return jt(r),null;if(c=(r.flags&128)!==0,N=v.rendering,N===null)if(c)ds(v,!1);else{if(it!==0||t!==null&&(t.flags&128)!==0)for(t=r.child;t!==null;){if(N=Pi(t),N!==null){for(r.flags|=128,ds(v,!1),c=N.updateQueue,c!==null&&(r.updateQueue=c,r.flags|=4),r.subtreeFlags=0,c=i,i=r.child;i!==null;)v=i,t=c,v.flags&=14680066,N=v.alternate,N===null?(v.childLanes=0,v.lanes=t,v.child=null,v.subtreeFlags=0,v.memoizedProps=null,v.memoizedState=null,v.updateQueue=null,v.dependencies=null,v.stateNode=null):(v.childLanes=N.childLanes,v.lanes=N.lanes,v.child=N.child,v.subtreeFlags=0,v.deletions=null,v.memoizedProps=N.memoizedProps,v.memoizedState=N.memoizedState,v.updateQueue=N.updateQueue,v.type=N.type,t=N.dependencies,v.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),i=i.sibling;return Ue(Xe,Xe.current&1|2),r.child}t=t.sibling}v.tail!==null&&et()>No&&(r.flags|=128,c=!0,ds(v,!1),r.lanes=4194304)}else{if(!c)if(t=Pi(N),t!==null){if(r.flags|=128,c=!0,i=t.updateQueue,i!==null&&(r.updateQueue=i,r.flags|=4),ds(v,!0),v.tail===null&&v.tailMode==="hidden"&&!N.alternate&&!qe)return jt(r),null}else 2*et()-v.renderingStartTime>No&&i!==1073741824&&(r.flags|=128,c=!0,ds(v,!1),r.lanes=4194304);v.isBackwards?(N.sibling=r.child,r.child=N):(i=v.last,i!==null?i.sibling=N:r.child=N,v.last=N)}return v.tail!==null?(r=v.tail,v.rendering=r,v.tail=r.sibling,v.renderingStartTime=et(),r.sibling=null,i=Xe.current,Ue(Xe,c?i&1|2:i&1),r):(jt(r),null);case 22:case 23:return xc(),c=r.memoizedState!==null,t!==null&&t.memoizedState!==null!==c&&(r.flags|=8192),c&&(r.mode&1)!==0?(Qt&1073741824)!==0&&(jt(r),r.subtreeFlags&6&&(r.flags|=8192)):jt(r),null;case 24:return null;case 25:return null}throw Error(o(156,r.tag))}function Mx(t,r){switch(jl(r),r.tag){case 1:return Bt(r.type)&&xi(),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return xo(),We(Lt),We(Et),$l(),t=r.flags,(t&65536)!==0&&(t&128)===0?(r.flags=t&-65537|128,r):null;case 5:return Bl(r),null;case 13:if(We(Xe),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(o(340));ho()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return We(Xe),null;case 4:return xo(),null;case 10:return Tl(r.type._context),null;case 22:case 23:return xc(),null;case 24:return null;default:return null}}var Bi=!1,At=!1,_x=typeof WeakSet=="function"?WeakSet:Set,ge=null;function bo(t,r){var i=t.ref;if(i!==null)if(typeof i=="function")try{i(null)}catch(c){Je(t,r,c)}else i.current=null}function ic(t,r,i){try{i()}catch(c){Je(t,r,c)}}var $p=!1;function Lx(t,r){if(xl=oi,t=xf(),ul(t)){if("selectionStart"in t)var i={start:t.selectionStart,end:t.selectionEnd};else e:{i=(i=t.ownerDocument)&&i.defaultView||window;var c=i.getSelection&&i.getSelection();if(c&&c.rangeCount!==0){i=c.anchorNode;var h=c.anchorOffset,v=c.focusNode;c=c.focusOffset;try{i.nodeType,v.nodeType}catch{i=null;break e}var N=0,j=-1,k=-1,W=0,re=0,ie=t,te=null;t:for(;;){for(var me;ie!==i||h!==0&&ie.nodeType!==3||(j=N+h),ie!==v||c!==0&&ie.nodeType!==3||(k=N+c),ie.nodeType===3&&(N+=ie.nodeValue.length),(me=ie.firstChild)!==null;)te=ie,ie=me;for(;;){if(ie===t)break t;if(te===i&&++W===h&&(j=N),te===v&&++re===c&&(k=N),(me=ie.nextSibling)!==null)break;ie=te,te=ie.parentNode}ie=me}i=j===-1||k===-1?null:{start:j,end:k}}else i=null}i=i||{start:0,end:0}}else i=null;for(yl={focusedElem:t,selectionRange:i},oi=!1,ge=r;ge!==null;)if(r=ge,t=r.child,(r.subtreeFlags&1028)!==0&&t!==null)t.return=r,ge=t;else for(;ge!==null;){r=ge;try{var ye=r.alternate;if((r.flags&1024)!==0)switch(r.tag){case 0:case 11:case 15:break;case 1:if(ye!==null){var be=ye.memoizedProps,tt=ye.memoizedState,G=r.stateNode,_=G.getSnapshotBeforeUpdate(r.elementType===r.type?be:vn(r.type,be),tt);G.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var H=r.stateNode.containerInfo;H.nodeType===1?H.textContent="":H.nodeType===9&&H.documentElement&&H.removeChild(H.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(ce){Je(r,r.return,ce)}if(t=r.sibling,t!==null){t.return=r.return,ge=t;break}ge=r.return}return ye=$p,$p=!1,ye}function fs(t,r,i){var c=r.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var h=c=c.next;do{if((h.tag&t)===t){var v=h.destroy;h.destroy=void 0,v!==void 0&&ic(r,i,v)}h=h.next}while(h!==c)}}function Fi(t,r){if(r=r.updateQueue,r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var c=i.create;i.destroy=c()}i=i.next}while(i!==r)}}function ac(t){var r=t.ref;if(r!==null){var i=t.stateNode;switch(t.tag){case 5:t=i;break;default:t=i}typeof r=="function"?r(t):r.current=t}}function zp(t){var r=t.alternate;r!==null&&(t.alternate=null,zp(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&(delete r[Tn],delete r[ts],delete r[Cl],delete r[yx],delete r[bx])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Vp(t){return t.tag===5||t.tag===3||t.tag===4}function Gp(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Vp(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function lc(t,r,i){var c=t.tag;if(c===5||c===6)t=t.stateNode,r?i.nodeType===8?i.parentNode.insertBefore(t,r):i.insertBefore(t,r):(i.nodeType===8?(r=i.parentNode,r.insertBefore(t,i)):(r=i,r.appendChild(t)),i=i._reactRootContainer,i!=null||r.onclick!==null||(r.onclick=gi));else if(c!==4&&(t=t.child,t!==null))for(lc(t,r,i),t=t.sibling;t!==null;)lc(t,r,i),t=t.sibling}function cc(t,r,i){var c=t.tag;if(c===5||c===6)t=t.stateNode,r?i.insertBefore(t,r):i.appendChild(t);else if(c!==4&&(t=t.child,t!==null))for(cc(t,r,i),t=t.sibling;t!==null;)cc(t,r,i),t=t.sibling}var gt=null,xn=!1;function gr(t,r,i){for(i=i.child;i!==null;)Up(t,r,i),i=i.sibling}function Up(t,r,i){if(In&&typeof In.onCommitFiberUnmount=="function")try{In.onCommitFiberUnmount(Zs,i)}catch{}switch(i.tag){case 5:At||bo(i,r);case 6:var c=gt,h=xn;gt=null,gr(t,r,i),gt=c,xn=h,gt!==null&&(xn?(t=gt,i=i.stateNode,t.nodeType===8?t.parentNode.removeChild(i):t.removeChild(i)):gt.removeChild(i.stateNode));break;case 18:gt!==null&&(xn?(t=gt,i=i.stateNode,t.nodeType===8?Nl(t.parentNode,i):t.nodeType===1&&Nl(t,i),Uo(t)):Nl(gt,i.stateNode));break;case 4:c=gt,h=xn,gt=i.stateNode.containerInfo,xn=!0,gr(t,r,i),gt=c,xn=h;break;case 0:case 11:case 14:case 15:if(!At&&(c=i.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){h=c=c.next;do{var v=h,N=v.destroy;v=v.tag,N!==void 0&&((v&2)!==0||(v&4)!==0)&&ic(i,r,N),h=h.next}while(h!==c)}gr(t,r,i);break;case 1:if(!At&&(bo(i,r),c=i.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=i.memoizedProps,c.state=i.memoizedState,c.componentWillUnmount()}catch(j){Je(i,r,j)}gr(t,r,i);break;case 21:gr(t,r,i);break;case 22:i.mode&1?(At=(c=At)||i.memoizedState!==null,gr(t,r,i),At=c):gr(t,r,i);break;default:gr(t,r,i)}}function Hp(t){var r=t.updateQueue;if(r!==null){t.updateQueue=null;var i=t.stateNode;i===null&&(i=t.stateNode=new _x),r.forEach(function(c){var h=Wx.bind(null,t,c);i.has(c)||(i.add(c),c.then(h,h))})}}function yn(t,r){var i=r.deletions;if(i!==null)for(var c=0;c<i.length;c++){var h=i[c];try{var v=t,N=r,j=N;e:for(;j!==null;){switch(j.tag){case 5:gt=j.stateNode,xn=!1;break e;case 3:gt=j.stateNode.containerInfo,xn=!0;break e;case 4:gt=j.stateNode.containerInfo,xn=!0;break e}j=j.return}if(gt===null)throw Error(o(160));Up(v,N,h),gt=null,xn=!1;var k=h.alternate;k!==null&&(k.return=null),h.return=null}catch(W){Je(h,r,W)}}if(r.subtreeFlags&12854)for(r=r.child;r!==null;)Wp(r,t),r=r.sibling}function Wp(t,r){var i=t.alternate,c=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(yn(r,t),_n(t),c&4){try{fs(3,t,t.return),Fi(3,t)}catch(be){Je(t,t.return,be)}try{fs(5,t,t.return)}catch(be){Je(t,t.return,be)}}break;case 1:yn(r,t),_n(t),c&512&&i!==null&&bo(i,i.return);break;case 5:if(yn(r,t),_n(t),c&512&&i!==null&&bo(i,i.return),t.flags&32){var h=t.stateNode;try{Pn(h,"")}catch(be){Je(t,t.return,be)}}if(c&4&&(h=t.stateNode,h!=null)){var v=t.memoizedProps,N=i!==null?i.memoizedProps:v,j=t.type,k=t.updateQueue;if(t.updateQueue=null,k!==null)try{j==="input"&&v.type==="radio"&&v.name!=null&&rt(h,v),zn(j,N);var W=zn(j,v);for(N=0;N<k.length;N+=2){var re=k[N],ie=k[N+1];re==="style"?eo(h,ie):re==="dangerouslySetInnerHTML"?An(h,ie):re==="children"?Pn(h,ie):P(h,re,ie,W)}switch(j){case"input":tn(h,v);break;case"textarea":kr(h,v);break;case"select":var te=h._wrapperState.wasMultiple;h._wrapperState.wasMultiple=!!v.multiple;var me=v.value;me!=null?lt(h,!!v.multiple,me,!1):te!==!!v.multiple&&(v.defaultValue!=null?lt(h,!!v.multiple,v.defaultValue,!0):lt(h,!!v.multiple,v.multiple?[]:"",!1))}h[ts]=v}catch(be){Je(t,t.return,be)}}break;case 6:if(yn(r,t),_n(t),c&4){if(t.stateNode===null)throw Error(o(162));h=t.stateNode,v=t.memoizedProps;try{h.nodeValue=v}catch(be){Je(t,t.return,be)}}break;case 3:if(yn(r,t),_n(t),c&4&&i!==null&&i.memoizedState.isDehydrated)try{Uo(r.containerInfo)}catch(be){Je(t,t.return,be)}break;case 4:yn(r,t),_n(t);break;case 13:yn(r,t),_n(t),h=t.child,h.flags&8192&&(v=h.memoizedState!==null,h.stateNode.isHidden=v,!v||h.alternate!==null&&h.alternate.memoizedState!==null||(fc=et())),c&4&&Hp(t);break;case 22:if(re=i!==null&&i.memoizedState!==null,t.mode&1?(At=(W=At)||re,yn(r,t),At=W):yn(r,t),_n(t),c&8192){if(W=t.memoizedState!==null,(t.stateNode.isHidden=W)&&!re&&(t.mode&1)!==0)for(ge=t,re=t.child;re!==null;){for(ie=ge=re;ge!==null;){switch(te=ge,me=te.child,te.tag){case 0:case 11:case 14:case 15:fs(4,te,te.return);break;case 1:bo(te,te.return);var ye=te.stateNode;if(typeof ye.componentWillUnmount=="function"){c=te,i=te.return;try{r=c,ye.props=r.memoizedProps,ye.state=r.memoizedState,ye.componentWillUnmount()}catch(be){Je(c,i,be)}}break;case 5:bo(te,te.return);break;case 22:if(te.memoizedState!==null){Yp(ie);continue}}me!==null?(me.return=te,ge=me):Yp(ie)}re=re.sibling}e:for(re=null,ie=t;;){if(ie.tag===5){if(re===null){re=ie;try{h=ie.stateNode,W?(v=h.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none"):(j=ie.stateNode,k=ie.memoizedProps.style,N=k!=null&&k.hasOwnProperty("display")?k.display:null,j.style.display=Jr("display",N))}catch(be){Je(t,t.return,be)}}}else if(ie.tag===6){if(re===null)try{ie.stateNode.nodeValue=W?"":ie.memoizedProps}catch(be){Je(t,t.return,be)}}else if((ie.tag!==22&&ie.tag!==23||ie.memoizedState===null||ie===t)&&ie.child!==null){ie.child.return=ie,ie=ie.child;continue}if(ie===t)break e;for(;ie.sibling===null;){if(ie.return===null||ie.return===t)break e;re===ie&&(re=null),ie=ie.return}re===ie&&(re=null),ie.sibling.return=ie.return,ie=ie.sibling}}break;case 19:yn(r,t),_n(t),c&4&&Hp(t);break;case 21:break;default:yn(r,t),_n(t)}}function _n(t){var r=t.flags;if(r&2){try{e:{for(var i=t.return;i!==null;){if(Vp(i)){var c=i;break e}i=i.return}throw Error(o(160))}switch(c.tag){case 5:var h=c.stateNode;c.flags&32&&(Pn(h,""),c.flags&=-33);var v=Gp(t);cc(t,v,h);break;case 3:case 4:var N=c.stateNode.containerInfo,j=Gp(t);lc(t,j,N);break;default:throw Error(o(161))}}catch(k){Je(t,t.return,k)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function Bx(t,r,i){ge=t,qp(t)}function qp(t,r,i){for(var c=(t.mode&1)!==0;ge!==null;){var h=ge,v=h.child;if(h.tag===22&&c){var N=h.memoizedState!==null||Bi;if(!N){var j=h.alternate,k=j!==null&&j.memoizedState!==null||At;j=Bi;var W=At;if(Bi=N,(At=k)&&!W)for(ge=h;ge!==null;)N=ge,k=N.child,N.tag===22&&N.memoizedState!==null?Qp(h):k!==null?(k.return=N,ge=k):Qp(h);for(;v!==null;)ge=v,qp(v),v=v.sibling;ge=h,Bi=j,At=W}Kp(t)}else(h.subtreeFlags&8772)!==0&&v!==null?(v.return=h,ge=v):Kp(t)}}function Kp(t){for(;ge!==null;){var r=ge;if((r.flags&8772)!==0){var i=r.alternate;try{if((r.flags&8772)!==0)switch(r.tag){case 0:case 11:case 15:At||Fi(5,r);break;case 1:var c=r.stateNode;if(r.flags&4&&!At)if(i===null)c.componentDidMount();else{var h=r.elementType===r.type?i.memoizedProps:vn(r.type,i.memoizedProps);c.componentDidUpdate(h,i.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var v=r.updateQueue;v!==null&&Yf(r,v,c);break;case 3:var N=r.updateQueue;if(N!==null){if(i=null,r.child!==null)switch(r.child.tag){case 5:i=r.child.stateNode;break;case 1:i=r.child.stateNode}Yf(r,N,i)}break;case 5:var j=r.stateNode;if(i===null&&r.flags&4){i=j;var k=r.memoizedProps;switch(r.type){case"button":case"input":case"select":case"textarea":k.autoFocus&&i.focus();break;case"img":k.src&&(i.src=k.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(r.memoizedState===null){var W=r.alternate;if(W!==null){var re=W.memoizedState;if(re!==null){var ie=re.dehydrated;ie!==null&&Uo(ie)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(o(163))}At||r.flags&512&&ac(r)}catch(te){Je(r,r.return,te)}}if(r===t){ge=null;break}if(i=r.sibling,i!==null){i.return=r.return,ge=i;break}ge=r.return}}function Yp(t){for(;ge!==null;){var r=ge;if(r===t){ge=null;break}var i=r.sibling;if(i!==null){i.return=r.return,ge=i;break}ge=r.return}}function Qp(t){for(;ge!==null;){var r=ge;try{switch(r.tag){case 0:case 11:case 15:var i=r.return;try{Fi(4,r)}catch(k){Je(r,i,k)}break;case 1:var c=r.stateNode;if(typeof c.componentDidMount=="function"){var h=r.return;try{c.componentDidMount()}catch(k){Je(r,h,k)}}var v=r.return;try{ac(r)}catch(k){Je(r,v,k)}break;case 5:var N=r.return;try{ac(r)}catch(k){Je(r,N,k)}}}catch(k){Je(r,r.return,k)}if(r===t){ge=null;break}var j=r.sibling;if(j!==null){j.return=r.return,ge=j;break}ge=r.return}}var Fx=Math.ceil,$i=T.ReactCurrentDispatcher,uc=T.ReactCurrentOwner,an=T.ReactCurrentBatchConfig,Le=0,ut=null,nt=null,vt=0,Qt=0,wo=dr(0),it=0,ps=null,Vr=0,zi=0,dc=0,hs=null,$t=null,fc=0,No=1/0,Xn=null,Vi=!1,pc=null,vr=null,Gi=!1,xr=null,Ui=0,ms=0,hc=null,Hi=-1,Wi=0;function It(){return(Le&6)!==0?et():Hi!==-1?Hi:Hi=et()}function yr(t){return(t.mode&1)===0?1:(Le&2)!==0&&vt!==0?vt&-vt:Nx.transition!==null?(Wi===0&&(Wi=Vd()),Wi):(t=Ve,t!==0||(t=window.event,t=t===void 0?16:Xd(t.type)),t)}function bn(t,r,i,c){if(50<ms)throw ms=0,hc=null,Error(o(185));Fo(t,i,c),((Le&2)===0||t!==ut)&&(t===ut&&((Le&2)===0&&(zi|=i),it===4&&br(t,vt)),zt(t,c),i===1&&Le===0&&(r.mode&1)===0&&(No=et()+500,bi&&pr()))}function zt(t,r){var i=t.callbackNode;Nv(t,r);var c=ti(t,t===ut?vt:0);if(c===0)i!==null&&Fd(i),t.callbackNode=null,t.callbackPriority=0;else if(r=c&-c,t.callbackPriority!==r){if(i!=null&&Fd(i),r===1)t.tag===0?wx(Zp.bind(null,t)):Lf(Zp.bind(null,t)),vx(function(){(Le&6)===0&&pr()}),i=null;else{switch(Gd(c)){case 1:i=qa;break;case 4:i=$d;break;case 16:i=Xs;break;case 536870912:i=zd;break;default:i=Xs}i=ih(i,Xp.bind(null,t))}t.callbackPriority=r,t.callbackNode=i}}function Xp(t,r){if(Hi=-1,Wi=0,(Le&6)!==0)throw Error(o(327));var i=t.callbackNode;if(Co()&&t.callbackNode!==i)return null;var c=ti(t,t===ut?vt:0);if(c===0)return null;if((c&30)!==0||(c&t.expiredLanes)!==0||r)r=qi(t,c);else{r=c;var h=Le;Le|=2;var v=eh();(ut!==t||vt!==r)&&(Xn=null,No=et()+500,Ur(t,r));do try{Vx();break}catch(j){Jp(t,j)}while(!0);Il(),$i.current=v,Le=h,nt!==null?r=0:(ut=null,vt=0,r=it)}if(r!==0){if(r===2&&(h=Ka(t),h!==0&&(c=h,r=mc(t,h))),r===1)throw i=ps,Ur(t,0),br(t,c),zt(t,et()),i;if(r===6)br(t,c);else{if(h=t.current.alternate,(c&30)===0&&!$x(h)&&(r=qi(t,c),r===2&&(v=Ka(t),v!==0&&(c=v,r=mc(t,v))),r===1))throw i=ps,Ur(t,0),br(t,c),zt(t,et()),i;switch(t.finishedWork=h,t.finishedLanes=c,r){case 0:case 1:throw Error(o(345));case 2:Hr(t,$t,Xn);break;case 3:if(br(t,c),(c&130023424)===c&&(r=fc+500-et(),10<r)){if(ti(t,0)!==0)break;if(h=t.suspendedLanes,(h&c)!==c){It(),t.pingedLanes|=t.suspendedLanes&h;break}t.timeoutHandle=wl(Hr.bind(null,t,$t,Xn),r);break}Hr(t,$t,Xn);break;case 4:if(br(t,c),(c&4194240)===c)break;for(r=t.eventTimes,h=-1;0<c;){var N=31-hn(c);v=1<<N,N=r[N],N>h&&(h=N),c&=~v}if(c=h,c=et()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*Fx(c/1960))-c,10<c){t.timeoutHandle=wl(Hr.bind(null,t,$t,Xn),c);break}Hr(t,$t,Xn);break;case 5:Hr(t,$t,Xn);break;default:throw Error(o(329))}}}return zt(t,et()),t.callbackNode===i?Xp.bind(null,t):null}function mc(t,r){var i=hs;return t.current.memoizedState.isDehydrated&&(Ur(t,r).flags|=256),t=qi(t,r),t!==2&&(r=$t,$t=i,r!==null&&gc(r)),t}function gc(t){$t===null?$t=t:$t.push.apply($t,t)}function $x(t){for(var r=t;;){if(r.flags&16384){var i=r.updateQueue;if(i!==null&&(i=i.stores,i!==null))for(var c=0;c<i.length;c++){var h=i[c],v=h.getSnapshot;h=h.value;try{if(!mn(v(),h))return!1}catch{return!1}}}if(i=r.child,r.subtreeFlags&16384&&i!==null)i.return=r,r=i;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function br(t,r){for(r&=~dc,r&=~zi,t.suspendedLanes|=r,t.pingedLanes&=~r,t=t.expirationTimes;0<r;){var i=31-hn(r),c=1<<i;t[i]=-1,r&=~c}}function Zp(t){if((Le&6)!==0)throw Error(o(327));Co();var r=ti(t,0);if((r&1)===0)return zt(t,et()),null;var i=qi(t,r);if(t.tag!==0&&i===2){var c=Ka(t);c!==0&&(r=c,i=mc(t,c))}if(i===1)throw i=ps,Ur(t,0),br(t,r),zt(t,et()),i;if(i===6)throw Error(o(345));return t.finishedWork=t.current.alternate,t.finishedLanes=r,Hr(t,$t,Xn),zt(t,et()),null}function vc(t,r){var i=Le;Le|=1;try{return t(r)}finally{Le=i,Le===0&&(No=et()+500,bi&&pr())}}function Gr(t){xr!==null&&xr.tag===0&&(Le&6)===0&&Co();var r=Le;Le|=1;var i=an.transition,c=Ve;try{if(an.transition=null,Ve=1,t)return t()}finally{Ve=c,an.transition=i,Le=r,(Le&6)===0&&pr()}}function xc(){Qt=wo.current,We(wo)}function Ur(t,r){t.finishedWork=null,t.finishedLanes=0;var i=t.timeoutHandle;if(i!==-1&&(t.timeoutHandle=-1,gx(i)),nt!==null)for(i=nt.return;i!==null;){var c=i;switch(jl(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&xi();break;case 3:xo(),We(Lt),We(Et),$l();break;case 5:Bl(c);break;case 4:xo();break;case 13:We(Xe);break;case 19:We(Xe);break;case 10:Tl(c.type._context);break;case 22:case 23:xc()}i=i.return}if(ut=t,nt=t=wr(t.current,null),vt=Qt=r,it=0,ps=null,dc=zi=Vr=0,$t=hs=null,Fr!==null){for(r=0;r<Fr.length;r++)if(i=Fr[r],c=i.interleaved,c!==null){i.interleaved=null;var h=c.next,v=i.pending;if(v!==null){var N=v.next;v.next=h,c.next=N}i.pending=c}Fr=null}return t}function Jp(t,r){do{var i=nt;try{if(Il(),Ri.current=Oi,ki){for(var c=Ze.memoizedState;c!==null;){var h=c.queue;h!==null&&(h.pending=null),c=c.next}ki=!1}if(zr=0,ct=st=Ze=null,as=!1,ls=0,uc.current=null,i===null||i.return===null){it=1,ps=r,nt=null;break}e:{var v=t,N=i.return,j=i,k=r;if(r=vt,j.flags|=32768,k!==null&&typeof k=="object"&&typeof k.then=="function"){var W=k,re=j,ie=re.tag;if((re.mode&1)===0&&(ie===0||ie===11||ie===15)){var te=re.alternate;te?(re.updateQueue=te.updateQueue,re.memoizedState=te.memoizedState,re.lanes=te.lanes):(re.updateQueue=null,re.memoizedState=null)}var me=Sp(N);if(me!==null){me.flags&=-257,Ep(me,N,j,v,r),me.mode&1&&Cp(v,W,r),r=me,k=W;var ye=r.updateQueue;if(ye===null){var be=new Set;be.add(k),r.updateQueue=be}else ye.add(k);break e}else{if((r&1)===0){Cp(v,W,r),yc();break e}k=Error(o(426))}}else if(qe&&j.mode&1){var tt=Sp(N);if(tt!==null){(tt.flags&65536)===0&&(tt.flags|=256),Ep(tt,N,j,v,r),Rl(yo(k,j));break e}}v=k=yo(k,j),it!==4&&(it=2),hs===null?hs=[v]:hs.push(v),v=N;do{switch(v.tag){case 3:v.flags|=65536,r&=-r,v.lanes|=r;var G=wp(v,k,r);Kf(v,G);break e;case 1:j=k;var _=v.type,H=v.stateNode;if((v.flags&128)===0&&(typeof _.getDerivedStateFromError=="function"||H!==null&&typeof H.componentDidCatch=="function"&&(vr===null||!vr.has(H)))){v.flags|=65536,r&=-r,v.lanes|=r;var ce=Np(v,j,r);Kf(v,ce);break e}}v=v.return}while(v!==null)}nh(i)}catch(Ne){r=Ne,nt===i&&i!==null&&(nt=i=i.return);continue}break}while(!0)}function eh(){var t=$i.current;return $i.current=Oi,t===null?Oi:t}function yc(){(it===0||it===3||it===2)&&(it=4),ut===null||(Vr&268435455)===0&&(zi&268435455)===0||br(ut,vt)}function qi(t,r){var i=Le;Le|=2;var c=eh();(ut!==t||vt!==r)&&(Xn=null,Ur(t,r));do try{zx();break}catch(h){Jp(t,h)}while(!0);if(Il(),Le=i,$i.current=c,nt!==null)throw Error(o(261));return ut=null,vt=0,it}function zx(){for(;nt!==null;)th(nt)}function Vx(){for(;nt!==null&&!pv();)th(nt)}function th(t){var r=sh(t.alternate,t,Qt);t.memoizedProps=t.pendingProps,r===null?nh(t):nt=r,uc.current=null}function nh(t){var r=t;do{var i=r.alternate;if(t=r.return,(r.flags&32768)===0){if(i=Ox(i,r,Qt),i!==null){nt=i;return}}else{if(i=Mx(i,r),i!==null){i.flags&=32767,nt=i;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{it=6,nt=null;return}}if(r=r.sibling,r!==null){nt=r;return}nt=r=t}while(r!==null);it===0&&(it=5)}function Hr(t,r,i){var c=Ve,h=an.transition;try{an.transition=null,Ve=1,Gx(t,r,i,c)}finally{an.transition=h,Ve=c}return null}function Gx(t,r,i,c){do Co();while(xr!==null);if((Le&6)!==0)throw Error(o(327));i=t.finishedWork;var h=t.finishedLanes;if(i===null)return null;if(t.finishedWork=null,t.finishedLanes=0,i===t.current)throw Error(o(177));t.callbackNode=null,t.callbackPriority=0;var v=i.lanes|i.childLanes;if(Cv(t,v),t===ut&&(nt=ut=null,vt=0),(i.subtreeFlags&2064)===0&&(i.flags&2064)===0||Gi||(Gi=!0,ih(Xs,function(){return Co(),null})),v=(i.flags&15990)!==0,(i.subtreeFlags&15990)!==0||v){v=an.transition,an.transition=null;var N=Ve;Ve=1;var j=Le;Le|=4,uc.current=null,Lx(t,i),Wp(i,t),cx(yl),oi=!!xl,yl=xl=null,t.current=i,Bx(i),hv(),Le=j,Ve=N,an.transition=v}else t.current=i;if(Gi&&(Gi=!1,xr=t,Ui=h),v=t.pendingLanes,v===0&&(vr=null),vv(i.stateNode),zt(t,et()),r!==null)for(c=t.onRecoverableError,i=0;i<r.length;i++)h=r[i],c(h.value,{componentStack:h.stack,digest:h.digest});if(Vi)throw Vi=!1,t=pc,pc=null,t;return(Ui&1)!==0&&t.tag!==0&&Co(),v=t.pendingLanes,(v&1)!==0?t===hc?ms++:(ms=0,hc=t):ms=0,pr(),null}function Co(){if(xr!==null){var t=Gd(Ui),r=an.transition,i=Ve;try{if(an.transition=null,Ve=16>t?16:t,xr===null)var c=!1;else{if(t=xr,xr=null,Ui=0,(Le&6)!==0)throw Error(o(331));var h=Le;for(Le|=4,ge=t.current;ge!==null;){var v=ge,N=v.child;if((ge.flags&16)!==0){var j=v.deletions;if(j!==null){for(var k=0;k<j.length;k++){var W=j[k];for(ge=W;ge!==null;){var re=ge;switch(re.tag){case 0:case 11:case 15:fs(8,re,v)}var ie=re.child;if(ie!==null)ie.return=re,ge=ie;else for(;ge!==null;){re=ge;var te=re.sibling,me=re.return;if(zp(re),re===W){ge=null;break}if(te!==null){te.return=me,ge=te;break}ge=me}}}var ye=v.alternate;if(ye!==null){var be=ye.child;if(be!==null){ye.child=null;do{var tt=be.sibling;be.sibling=null,be=tt}while(be!==null)}}ge=v}}if((v.subtreeFlags&2064)!==0&&N!==null)N.return=v,ge=N;else e:for(;ge!==null;){if(v=ge,(v.flags&2048)!==0)switch(v.tag){case 0:case 11:case 15:fs(9,v,v.return)}var G=v.sibling;if(G!==null){G.return=v.return,ge=G;break e}ge=v.return}}var _=t.current;for(ge=_;ge!==null;){N=ge;var H=N.child;if((N.subtreeFlags&2064)!==0&&H!==null)H.return=N,ge=H;else e:for(N=_;ge!==null;){if(j=ge,(j.flags&2048)!==0)try{switch(j.tag){case 0:case 11:case 15:Fi(9,j)}}catch(Ne){Je(j,j.return,Ne)}if(j===N){ge=null;break e}var ce=j.sibling;if(ce!==null){ce.return=j.return,ge=ce;break e}ge=j.return}}if(Le=h,pr(),In&&typeof In.onPostCommitFiberRoot=="function")try{In.onPostCommitFiberRoot(Zs,t)}catch{}c=!0}return c}finally{Ve=i,an.transition=r}}return!1}function rh(t,r,i){r=yo(i,r),r=wp(t,r,1),t=mr(t,r,1),r=It(),t!==null&&(Fo(t,1,r),zt(t,r))}function Je(t,r,i){if(t.tag===3)rh(t,t,i);else for(;r!==null;){if(r.tag===3){rh(r,t,i);break}else if(r.tag===1){var c=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(vr===null||!vr.has(c))){t=yo(i,t),t=Np(r,t,1),r=mr(r,t,1),t=It(),r!==null&&(Fo(r,1,t),zt(r,t));break}}r=r.return}}function Ux(t,r,i){var c=t.pingCache;c!==null&&c.delete(r),r=It(),t.pingedLanes|=t.suspendedLanes&i,ut===t&&(vt&i)===i&&(it===4||it===3&&(vt&130023424)===vt&&500>et()-fc?Ur(t,0):dc|=i),zt(t,r)}function oh(t,r){r===0&&((t.mode&1)===0?r=1:(r=ei,ei<<=1,(ei&130023424)===0&&(ei=4194304)));var i=It();t=Kn(t,r),t!==null&&(Fo(t,r,i),zt(t,i))}function Hx(t){var r=t.memoizedState,i=0;r!==null&&(i=r.retryLane),oh(t,i)}function Wx(t,r){var i=0;switch(t.tag){case 13:var c=t.stateNode,h=t.memoizedState;h!==null&&(i=h.retryLane);break;case 19:c=t.stateNode;break;default:throw Error(o(314))}c!==null&&c.delete(r),oh(t,i)}var sh;sh=function(t,r,i){if(t!==null)if(t.memoizedProps!==r.pendingProps||Lt.current)Ft=!0;else{if((t.lanes&i)===0&&(r.flags&128)===0)return Ft=!1,Tx(t,r,i);Ft=(t.flags&131072)!==0}else Ft=!1,qe&&(r.flags&1048576)!==0&&Bf(r,Ni,r.index);switch(r.lanes=0,r.tag){case 2:var c=r.type;Li(t,r),t=r.pendingProps;var h=uo(r,Et.current);vo(r,i),h=Gl(null,r,c,t,h,i);var v=Ul();return r.flags|=1,typeof h=="object"&&h!==null&&typeof h.render=="function"&&h.$$typeof===void 0?(r.tag=1,r.memoizedState=null,r.updateQueue=null,Bt(c)?(v=!0,yi(r)):v=!1,r.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,_l(r),h.updater=Mi,r.stateNode=h,h._reactInternals=r,Ql(r,c,t,i),r=ec(null,r,c,!0,v,i)):(r.tag=0,qe&&v&&Dl(r),kt(null,r,h,i),r=r.child),r;case 16:c=r.elementType;e:{switch(Li(t,r),t=r.pendingProps,h=c._init,c=h(c._payload),r.type=c,h=r.tag=Kx(c),t=vn(c,t),h){case 0:r=Jl(null,r,c,t,i);break e;case 1:r=kp(null,r,c,t,i);break e;case 11:r=Dp(null,r,c,t,i);break e;case 14:r=jp(null,r,c,vn(c.type,t),i);break e}throw Error(o(306,c,""))}return r;case 0:return c=r.type,h=r.pendingProps,h=r.elementType===c?h:vn(c,h),Jl(t,r,c,h,i);case 1:return c=r.type,h=r.pendingProps,h=r.elementType===c?h:vn(c,h),kp(t,r,c,h,i);case 3:e:{if(Ip(r),t===null)throw Error(o(387));c=r.pendingProps,v=r.memoizedState,h=v.element,qf(t,r),Ai(r,c,null,i);var N=r.memoizedState;if(c=N.element,v.isDehydrated)if(v={element:c,isDehydrated:!1,cache:N.cache,pendingSuspenseBoundaries:N.pendingSuspenseBoundaries,transitions:N.transitions},r.updateQueue.baseState=v,r.memoizedState=v,r.flags&256){h=yo(Error(o(423)),r),r=Tp(t,r,c,i,h);break e}else if(c!==h){h=yo(Error(o(424)),r),r=Tp(t,r,c,i,h);break e}else for(Yt=ur(r.stateNode.containerInfo.firstChild),Kt=r,qe=!0,gn=null,i=Hf(r,null,c,i),r.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(ho(),c===h){r=Qn(t,r,i);break e}kt(t,r,c,i)}r=r.child}return r;case 5:return Qf(r),t===null&&Pl(r),c=r.type,h=r.pendingProps,v=t!==null?t.memoizedProps:null,N=h.children,bl(c,h)?N=null:v!==null&&bl(c,v)&&(r.flags|=32),Rp(t,r),kt(t,r,N,i),r.child;case 6:return t===null&&Pl(r),null;case 13:return Op(t,r,i);case 4:return Ll(r,r.stateNode.containerInfo),c=r.pendingProps,t===null?r.child=mo(r,null,c,i):kt(t,r,c,i),r.child;case 11:return c=r.type,h=r.pendingProps,h=r.elementType===c?h:vn(c,h),Dp(t,r,c,h,i);case 7:return kt(t,r,r.pendingProps,i),r.child;case 8:return kt(t,r,r.pendingProps.children,i),r.child;case 12:return kt(t,r,r.pendingProps.children,i),r.child;case 10:e:{if(c=r.type._context,h=r.pendingProps,v=r.memoizedProps,N=h.value,Ue(Ei,c._currentValue),c._currentValue=N,v!==null)if(mn(v.value,N)){if(v.children===h.children&&!Lt.current){r=Qn(t,r,i);break e}}else for(v=r.child,v!==null&&(v.return=r);v!==null;){var j=v.dependencies;if(j!==null){N=v.child;for(var k=j.firstContext;k!==null;){if(k.context===c){if(v.tag===1){k=Yn(-1,i&-i),k.tag=2;var W=v.updateQueue;if(W!==null){W=W.shared;var re=W.pending;re===null?k.next=k:(k.next=re.next,re.next=k),W.pending=k}}v.lanes|=i,k=v.alternate,k!==null&&(k.lanes|=i),Ol(v.return,i,r),j.lanes|=i;break}k=k.next}}else if(v.tag===10)N=v.type===r.type?null:v.child;else if(v.tag===18){if(N=v.return,N===null)throw Error(o(341));N.lanes|=i,j=N.alternate,j!==null&&(j.lanes|=i),Ol(N,i,r),N=v.sibling}else N=v.child;if(N!==null)N.return=v;else for(N=v;N!==null;){if(N===r){N=null;break}if(v=N.sibling,v!==null){v.return=N.return,N=v;break}N=N.return}v=N}kt(t,r,h.children,i),r=r.child}return r;case 9:return h=r.type,c=r.pendingProps.children,vo(r,i),h=on(h),c=c(h),r.flags|=1,kt(t,r,c,i),r.child;case 14:return c=r.type,h=vn(c,r.pendingProps),h=vn(c.type,h),jp(t,r,c,h,i);case 15:return Ap(t,r,r.type,r.pendingProps,i);case 17:return c=r.type,h=r.pendingProps,h=r.elementType===c?h:vn(c,h),Li(t,r),r.tag=1,Bt(c)?(t=!0,yi(r)):t=!1,vo(r,i),yp(r,c,h),Ql(r,c,h,i),ec(null,r,c,!0,t,i);case 19:return _p(t,r,i);case 22:return Pp(t,r,i)}throw Error(o(156,r.tag))};function ih(t,r){return Bd(t,r)}function qx(t,r,i,c){this.tag=t,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ln(t,r,i,c){return new qx(t,r,i,c)}function bc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Kx(t){if(typeof t=="function")return bc(t)?1:0;if(t!=null){if(t=t.$$typeof,t===O)return 11;if(t===X)return 14}return 2}function wr(t,r){var i=t.alternate;return i===null?(i=ln(t.tag,r,t.key,t.mode),i.elementType=t.elementType,i.type=t.type,i.stateNode=t.stateNode,i.alternate=t,t.alternate=i):(i.pendingProps=r,i.type=t.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=t.flags&14680064,i.childLanes=t.childLanes,i.lanes=t.lanes,i.child=t.child,i.memoizedProps=t.memoizedProps,i.memoizedState=t.memoizedState,i.updateQueue=t.updateQueue,r=t.dependencies,i.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},i.sibling=t.sibling,i.index=t.index,i.ref=t.ref,i}function Ki(t,r,i,c,h,v){var N=2;if(c=t,typeof t=="function")bc(t)&&(N=1);else if(typeof t=="string")N=5;else e:switch(t){case R:return Wr(i.children,h,v,r);case M:N=8,h|=8;break;case Y:return t=ln(12,i,r,h|2),t.elementType=Y,t.lanes=v,t;case V:return t=ln(13,i,r,h),t.elementType=V,t.lanes=v,t;case U:return t=ln(19,i,r,h),t.elementType=U,t.lanes=v,t;case se:return Yi(i,h,v,r);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ee:N=10;break e;case oe:N=9;break e;case O:N=11;break e;case X:N=14;break e;case J:N=16,c=null;break e}throw Error(o(130,t==null?t:typeof t,""))}return r=ln(N,i,r,h),r.elementType=t,r.type=c,r.lanes=v,r}function Wr(t,r,i,c){return t=ln(7,t,c,r),t.lanes=i,t}function Yi(t,r,i,c){return t=ln(22,t,c,r),t.elementType=se,t.lanes=i,t.stateNode={isHidden:!1},t}function wc(t,r,i){return t=ln(6,t,null,r),t.lanes=i,t}function Nc(t,r,i){return r=ln(4,t.children!==null?t.children:[],t.key,r),r.lanes=i,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}function Yx(t,r,i,c,h){this.tag=r,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ya(0),this.expirationTimes=Ya(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ya(0),this.identifierPrefix=c,this.onRecoverableError=h,this.mutableSourceEagerHydrationData=null}function Cc(t,r,i,c,h,v,N,j,k){return t=new Yx(t,r,i,j,k),r===1?(r=1,v===!0&&(r|=8)):r=0,v=ln(3,null,null,r),t.current=v,v.stateNode=t,v.memoizedState={element:c,isDehydrated:i,cache:null,transitions:null,pendingSuspenseBoundaries:null},_l(v),t}function Qx(t,r,i){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:I,key:c==null?null:""+c,children:t,containerInfo:r,implementation:i}}function ah(t){if(!t)return fr;t=t._reactInternals;e:{if(Or(t)!==t||t.tag!==1)throw Error(o(170));var r=t;do{switch(r.tag){case 3:r=r.stateNode.context;break e;case 1:if(Bt(r.type)){r=r.stateNode.__reactInternalMemoizedMergedChildContext;break e}}r=r.return}while(r!==null);throw Error(o(171))}if(t.tag===1){var i=t.type;if(Bt(i))return Mf(t,i,r)}return r}function lh(t,r,i,c,h,v,N,j,k){return t=Cc(i,c,!0,t,h,v,N,j,k),t.context=ah(null),i=t.current,c=It(),h=yr(i),v=Yn(c,h),v.callback=r??null,mr(i,v,h),t.current.lanes=h,Fo(t,h,c),zt(t,c),t}function Qi(t,r,i,c){var h=r.current,v=It(),N=yr(h);return i=ah(i),r.context===null?r.context=i:r.pendingContext=i,r=Yn(v,N),r.payload={element:t},c=c===void 0?null:c,c!==null&&(r.callback=c),t=mr(h,r,N),t!==null&&(bn(t,h,N,v),ji(t,h,N)),N}function Xi(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function ch(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var i=t.retryLane;t.retryLane=i!==0&&i<r?i:r}}function Sc(t,r){ch(t,r),(t=t.alternate)&&ch(t,r)}function Xx(){return null}var uh=typeof reportError=="function"?reportError:function(t){console.error(t)};function Ec(t){this._internalRoot=t}Zi.prototype.render=Ec.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(o(409));Qi(t,r,null,null)},Zi.prototype.unmount=Ec.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;Gr(function(){Qi(null,t,null,null)}),r[Un]=null}};function Zi(t){this._internalRoot=t}Zi.prototype.unstable_scheduleHydration=function(t){if(t){var r=Wd();t={blockedOn:null,target:t,priority:r};for(var i=0;i<ar.length&&r!==0&&r<ar[i].priority;i++);ar.splice(i,0,t),i===0&&Yd(t)}};function Dc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Ji(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function dh(){}function Zx(t,r,i,c,h){if(h){if(typeof c=="function"){var v=c;c=function(){var W=Xi(N);v.call(W)}}var N=lh(r,c,t,0,null,!1,!1,"",dh);return t._reactRootContainer=N,t[Un]=N.current,Jo(t.nodeType===8?t.parentNode:t),Gr(),N}for(;h=t.lastChild;)t.removeChild(h);if(typeof c=="function"){var j=c;c=function(){var W=Xi(k);j.call(W)}}var k=Cc(t,0,!1,null,null,!1,!1,"",dh);return t._reactRootContainer=k,t[Un]=k.current,Jo(t.nodeType===8?t.parentNode:t),Gr(function(){Qi(r,k,i,c)}),k}function ea(t,r,i,c,h){var v=i._reactRootContainer;if(v){var N=v;if(typeof h=="function"){var j=h;h=function(){var k=Xi(N);j.call(k)}}Qi(r,N,t,h)}else N=Zx(i,r,t,h,c);return Xi(N)}Ud=function(t){switch(t.tag){case 3:var r=t.stateNode;if(r.current.memoizedState.isDehydrated){var i=Bo(r.pendingLanes);i!==0&&(Qa(r,i|1),zt(r,et()),(Le&6)===0&&(No=et()+500,pr()))}break;case 13:Gr(function(){var c=Kn(t,1);if(c!==null){var h=It();bn(c,t,1,h)}}),Sc(t,1)}},Xa=function(t){if(t.tag===13){var r=Kn(t,134217728);if(r!==null){var i=It();bn(r,t,134217728,i)}Sc(t,134217728)}},Hd=function(t){if(t.tag===13){var r=yr(t),i=Kn(t,r);if(i!==null){var c=It();bn(i,t,r,c)}Sc(t,r)}},Wd=function(){return Ve},qd=function(t,r){var i=Ve;try{return Ve=t,r()}finally{Ve=i}},rr=function(t,r,i){switch(r){case"input":if(tn(t,i),r=i.name,i.type==="radio"&&r!=null){for(i=t;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),r=0;r<i.length;r++){var c=i[r];if(c!==t&&c.form===t.form){var h=vi(c);if(!h)throw Error(o(90));Ee(c),tn(c,h)}}}break;case"textarea":kr(t,i);break;case"select":r=i.value,r!=null&&lt(t,!!i.multiple,r,!1)}},Be=vc,$e=Gr;var Jx={usingClientEntryPoint:!1,Events:[ns,lo,vi,fe,Re,vc]},gs={findFiberByHostInstance:Mr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ey={bundleType:gs.bundleType,version:gs.version,rendererPackageName:gs.rendererPackageName,rendererConfig:gs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:T.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=_d(t),t===null?null:t.stateNode},findFiberByHostInstance:gs.findFiberByHostInstance||Xx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ta=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ta.isDisabled&&ta.supportsFiber)try{Zs=ta.inject(ey),In=ta}catch{}}return Vt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Jx,Vt.createPortal=function(t,r){var i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Dc(r))throw Error(o(200));return Qx(t,r,null,i)},Vt.createRoot=function(t,r){if(!Dc(t))throw Error(o(299));var i=!1,c="",h=uh;return r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(c=r.identifierPrefix),r.onRecoverableError!==void 0&&(h=r.onRecoverableError)),r=Cc(t,1,!1,null,null,i,!1,c,h),t[Un]=r.current,Jo(t.nodeType===8?t.parentNode:t),new Ec(r)},Vt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(o(188)):(t=Object.keys(t).join(","),Error(o(268,t)));return t=_d(r),t=t===null?null:t.stateNode,t},Vt.flushSync=function(t){return Gr(t)},Vt.hydrate=function(t,r,i){if(!Ji(r))throw Error(o(200));return ea(null,t,r,!0,i)},Vt.hydrateRoot=function(t,r,i){if(!Dc(t))throw Error(o(405));var c=i!=null&&i.hydratedSources||null,h=!1,v="",N=uh;if(i!=null&&(i.unstable_strictMode===!0&&(h=!0),i.identifierPrefix!==void 0&&(v=i.identifierPrefix),i.onRecoverableError!==void 0&&(N=i.onRecoverableError)),r=lh(r,null,t,1,i??null,h,!1,v,N),t[Un]=r.current,Jo(t),c)for(t=0;t<c.length;t++)i=c[t],h=i._getVersion,h=h(i._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[i,h]:r.mutableSourceEagerHydrationData.push(i,h);return new Zi(r)},Vt.render=function(t,r,i){if(!Ji(r))throw Error(o(200));return ea(null,t,r,!1,i)},Vt.unmountComponentAtNode=function(t){if(!Ji(t))throw Error(o(40));return t._reactRootContainer?(Gr(function(){ea(null,null,t,!1,function(){t._reactRootContainer=null,t[Un]=null})}),!0):!1},Vt.unstable_batchedUpdates=vc,Vt.unstable_renderSubtreeIntoContainer=function(t,r,i,c){if(!Ji(i))throw Error(o(200));if(t==null||t._reactInternals===void 0)throw Error(o(38));return ea(t,r,i,!1,c)},Vt.version="18.3.1-next-f1338f8080-20240426",Vt}var yh;function ug(){if(yh)return Pc.exports;yh=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(n){console.error(n)}}return e(),Pc.exports=ly(),Pc.exports}var bh;function cy(){if(bh)return ra;bh=1;var e=ug();return ra.createRoot=e.createRoot,ra.hydrateRoot=e.hydrateRoot,ra}var uy=cy();const dy=Pr(uy);var Ic,wh;function fy(){if(wh)return Ic;wh=1,Ic=e;function e(n,o,s){if(n!=null&&typeof n!="number")throw new Error("start must be a number or null");if(o!=null&&typeof o!="number")throw new Error("stop must be a number or null");if(s!=null&&typeof s!="number")throw new Error("step must be a number or null");o==null&&(o=n||0,n=0),s==null&&(s=o>n?1:-1);for(var a=[],l=n<o;l?n<o:n>o;n+=s)a.push(n);return a}return Ic}var py=fy();const zu=Pr(py);var Tc={exports:{}},Oc,Nh;function hy(){if(Nh)return Oc;Nh=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Oc=e,Oc}var Mc,Ch;function my(){if(Ch)return Mc;Ch=1;var e=hy();function n(){}function o(){}return o.resetWarningCache=n,Mc=function(){function s(d,f,p,m,x,g){if(g!==e){var y=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw y.name="Invariant Violation",y}}s.isRequired=s;function a(){return s}var l={array:s,bigint:s,bool:s,func:s,number:s,object:s,string:s,symbol:s,any:s,arrayOf:a,element:s,elementType:s,instanceOf:a,node:s,objectOf:a,oneOf:a,oneOfType:a,shape:a,exact:a,checkPropTypes:o,resetWarningCache:n};return l.PropTypes=l,l},Mc}var Sh;function gy(){return Sh||(Sh=1,Tc.exports=my()()),Tc.exports}var vy=gy();const Se=Pr(vy);var _c={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var Eh;function xy(){return Eh||(Eh=1,function(e){(function(){var n={}.hasOwnProperty;function o(){for(var l="",d=0;d<arguments.length;d++){var f=arguments[d];f&&(l=a(l,s(f)))}return l}function s(l){if(typeof l=="string"||typeof l=="number")return l;if(typeof l!="object")return"";if(Array.isArray(l))return o.apply(null,l);if(l.toString!==Object.prototype.toString&&!l.toString.toString().includes("[native code]"))return l.toString();var d="";for(var f in l)n.call(l,f)&&l[f]&&(d=a(d,f));return d}function a(l,d){return d?l?l+" "+d:l+d:l}e.exports?(o.default=o,e.exports=o):window.classNames=o})()}(_c)),_c.exports}var yy=xy();const bt=Pr(yy);var Lc,Dh;function by(){if(Dh)return Lc;Dh=1;var e=200,n="__lodash_hash_undefined__",o=9007199254740991,s="[object Arguments]",a="[object Function]",l="[object GeneratorFunction]",d=/[\\^$.*+?()[\]{}|]/g,f=/^\[object .+?Constructor\]$/,p=typeof na=="object"&&na&&na.Object===Object&&na,m=typeof self=="object"&&self&&self.Object===Object&&self,x=p||m||Function("return this")();function g(z,Z,fe){switch(fe.length){case 0:return z.call(Z);case 1:return z.call(Z,fe[0]);case 2:return z.call(Z,fe[0],fe[1]);case 3:return z.call(Z,fe[0],fe[1],fe[2])}return z.apply(Z,fe)}function y(z,Z){var fe=z?z.length:0;return!!fe&&E(z,Z,0)>-1}function w(z,Z){for(var fe=-1,Re=Z.length,Be=z.length;++fe<Re;)z[Be+fe]=Z[fe];return z}function C(z,Z,fe,Re){for(var Be=z.length,$e=fe+-1;++$e<Be;)if(Z(z[$e],$e,z))return $e;return-1}function E(z,Z,fe){if(Z!==Z)return C(z,S,fe);for(var Re=fe-1,Be=z.length;++Re<Be;)if(z[Re]===Z)return Re;return-1}function S(z){return z!==z}function B(z,Z){return z.has(Z)}function $(z,Z){return z?.[Z]}function P(z){var Z=!1;if(z!=null&&typeof z.toString!="function")try{Z=!!(z+"")}catch{}return Z}var T=Array.prototype,A=Function.prototype,I=Object.prototype,R=x["__core-js_shared__"],M=function(){var z=/[^.]+$/.exec(R&&R.keys&&R.keys.IE_PROTO||"");return z?"Symbol(src)_1."+z:""}(),Y=A.toString,ee=I.hasOwnProperty,oe=I.toString,O=RegExp("^"+Y.call(ee).replace(d,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),V=x.Symbol,U=I.propertyIsEnumerable,X=T.splice,J=V?V.isConcatSpreadable:void 0,se=Math.max,q=Ut(x,"Map"),Q=Ut(Object,"create");function K(z){var Z=-1,fe=z?z.length:0;for(this.clear();++Z<fe;){var Re=z[Z];this.set(Re[0],Re[1])}}function D(){this.__data__=Q?Q(null):{}}function F(z){return this.has(z)&&delete this.__data__[z]}function ae(z){var Z=this.__data__;if(Q){var fe=Z[z];return fe===n?void 0:fe}return ee.call(Z,z)?Z[z]:void 0}function de(z){var Z=this.__data__;return Q?Z[z]!==void 0:ee.call(Z,z)}function ne(z,Z){var fe=this.__data__;return fe[z]=Q&&Z===void 0?n:Z,this}K.prototype.clear=D,K.prototype.delete=F,K.prototype.get=ae,K.prototype.has=de,K.prototype.set=ne;function pe(z){var Z=-1,fe=z?z.length:0;for(this.clear();++Z<fe;){var Re=z[Z];this.set(Re[0],Re[1])}}function Ae(){this.__data__=[]}function ve(z){var Z=this.__data__,fe=lt(Z,z);if(fe<0)return!1;var Re=Z.length-1;return fe==Re?Z.pop():X.call(Z,fe,1),!0}function le(z){var Z=this.__data__,fe=lt(Z,z);return fe<0?void 0:Z[fe][1]}function he(z){return lt(this.__data__,z)>-1}function Ie(z,Z){var fe=this.__data__,Re=lt(fe,z);return Re<0?fe.push([z,Z]):fe[Re][1]=Z,this}pe.prototype.clear=Ae,pe.prototype.delete=ve,pe.prototype.get=le,pe.prototype.has=he,pe.prototype.set=Ie;function Ee(z){var Z=-1,fe=z?z.length:0;for(this.clear();++Z<fe;){var Re=z[Z];this.set(Re[0],Re[1])}}function xe(){this.__data__={hash:new K,map:new(q||pe),string:new K}}function ke(z){return $n(this,z).delete(z)}function _e(z){return $n(this,z).get(z)}function rt(z){return $n(this,z).has(z)}function tn(z,Z){return $n(this,z).set(z,Z),this}Ee.prototype.clear=xe,Ee.prototype.delete=ke,Ee.prototype.get=_e,Ee.prototype.has=rt,Ee.prototype.set=tn;function Nt(z){var Z=-1,fe=z?z.length:0;for(this.__data__=new Ee;++Z<fe;)this.add(z[Z])}function pn(z){return this.__data__.set(z,n),this}function ot(z){return this.__data__.has(z)}Nt.prototype.add=Nt.prototype.push=pn,Nt.prototype.has=ot;function lt(z,Z){for(var fe=z.length;fe--;)if(Jr(z[fe][0],Z))return fe;return-1}function jn(z,Z,fe,Re){var Be=-1,$e=y,Ye=!0,Rt=z.length,Ge=[],Mt=Z.length;if(!Rt)return Ge;Z.length>=e&&($e=B,Ye=!1,Z=new Nt(Z));e:for(;++Be<Rt;){var Qe=z[Be],St=Qe;if(Qe=Qe!==0?Qe:0,Ye&&St===St){for(var _t=Mt;_t--;)if(Z[_t]===St)continue e;Ge.push(Qe)}else $e(Z,St,Re)||Ge.push(Qe)}return Ge}function Rr(z,Z,fe,Re,Be){var $e=-1,Ye=z.length;for(fe||(fe=Ht),Be||(Be=[]);++$e<Ye;){var Rt=z[$e];fe(Rt)&&w(Be,Rt)}return Be}function kr(z){if(!rr(z)||Pn(z))return!1;var Z=Vn(z)||P(z)?O:f;return Z.test(Ct(z))}function Xr(z,Z){return Z=se(Z===void 0?z.length-1:Z,0),function(){for(var fe=arguments,Re=-1,Be=se(fe.length-Z,0),$e=Array(Be);++Re<Be;)$e[Re]=fe[Z+Re];Re=-1;for(var Ye=Array(Z+1);++Re<Z;)Ye[Re]=fe[Re];return Ye[Z]=$e,g(z,this,Ye)}}function $n(z,Z){var fe=z.__data__;return An(Z)?fe[typeof Z=="string"?"string":"hash"]:fe.map}function Ut(z,Z){var fe=$(z,Z);return kr(fe)?fe:void 0}function Ht(z){return Ir(z)||eo(z)||!!(J&&z&&z[J])}function An(z){var Z=typeof z;return Z=="string"||Z=="number"||Z=="symbol"||Z=="boolean"?z!=="__proto__":z===null}function Pn(z){return!!M&&M in z}function Ct(z){if(z!=null){try{return Y.call(z)}catch{}try{return z+""}catch{}}return""}var Zr=Xr(function(z,Z){return zn(z)?jn(z,Rr(Z,1,zn)):[]});function Jr(z,Z){return z===Z||z!==z&&Z!==Z}function eo(z){return zn(z)&&ee.call(z,"callee")&&(!U.call(z,"callee")||oe.call(z)==s)}var Ir=Array.isArray;function nr(z){return z!=null&&Tr(z.length)&&!Vn(z)}function zn(z){return Rn(z)&&nr(z)}function Vn(z){var Z=rr(z)?oe.call(z):"";return Z==a||Z==l}function Tr(z){return typeof z=="number"&&z>-1&&z%1==0&&z<=o}function rr(z){var Z=typeof z;return!!z&&(Z=="object"||Z=="function")}function Rn(z){return!!z&&typeof z=="object"}return Lc=Zr,Lc}var wy=by();const jh=Pr(wy);function Ia(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function Ny(e,n){for(var o=0;o<n.length;o++){var s=n[o];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function Ta(e,n,o){return n&&Ny(e.prototype,n),e}function Ke(e,n,o){return n in e?Object.defineProperty(e,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[n]=o,e}function yu(){return yu=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var o=arguments[n];for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(e[s]=o[s])}return e},yu.apply(this,arguments)}function Oa(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&bu(e,n)}function Eo(e){return Eo=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Eo(e)}function bu(e,n){return bu=Object.setPrototypeOf||function(s,a){return s.__proto__=a,s},bu(e,n)}function Cy(e,n){if(e==null)return{};var o={},s=Object.keys(e),a,l;for(l=0;l<s.length;l++)a=s[l],!(n.indexOf(a)>=0)&&(o[a]=e[a]);return o}function Sy(e,n){if(e==null)return{};var o=Cy(e,n),s,a;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)s=l[a],!(n.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(o[s]=e[s])}return o}function ft(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ma(e,n){return n&&(typeof n=="object"||typeof n=="function")?n:ft(e)}function Ey(e,n){return Dy(e)||jy(e,n)||Ay()}function Dy(e){if(Array.isArray(e))return e}function jy(e,n){var o=[],s=!0,a=!1,l=void 0;try{for(var d=e[Symbol.iterator](),f;!(s=(f=d.next()).done)&&(o.push(f.value),!(n&&o.length===n));s=!0);}catch(p){a=!0,l=p}finally{try{!s&&d.return!=null&&d.return()}finally{if(a)throw l}}return o}function Ay(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}var Py=["C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B"],Ry=["Db","Eb","Gb","Ab","Bb"],ky={C:0,"C#":1,Db:1,D:2,"D#":3,Eb:3,E:4,F:5,"F#":6,Gb:6,G:7,"G#":8,Ab:8,A:9,"A#":10,Bb:10,B:11},pa=12,Vu=pa,Gu=127,Iy=/([a-g])([#b]?)(\d+)/,wu=12;function Ty(e){if(!e)throw Error("Invalid note argument");var n=Iy.exec(e.toLowerCase());if(!n)throw Error("Invalid note argument");var o=Ey(n,4),s=o[1],a=o[2],l=o[3],d="".concat(s.toUpperCase()).concat(a),f=ky[d];if(f==null)throw Error("Invalid note argument");return pa+f+wu*parseInt(l,10)}function Oy(e){var n=(e-pa)%wu,o=Math.floor((e-pa)/wu),s=Py[n];return{note:"".concat(s).concat(o),pitchName:s,octave:o,midiNumber:e,isAccidental:Ry.includes(s)}}function My(){return zu(Vu,Gu+1).reduce(function(e,n){return e[n]=Oy(n),e},{})}var _y=My();function dg(e){var n=_y[e];if(!n)throw Error("Invalid MIDI number");return n}var Ly=zu(Vu,Gu+1).filter(function(e){return!dg(e).isAccidental}),Pt={fromNote:Ty,getAttributes:dg,MIN_MIDI_NUMBER:Vu,MAX_MIDI_NUMBER:Gu,NATURAL_MIDI_NUMBERS:Ly},Uu=function(e){Oa(n,e);function n(){var o,s;Ia(this,n);for(var a=arguments.length,l=new Array(a),d=0;d<a;d++)l[d]=arguments[d];return s=Ma(this,(o=Eo(n)).call.apply(o,[this].concat(l))),Ke(ft(s),"onPlayNoteInput",function(){s.props.onPlayNoteInput(s.props.midiNumber)}),Ke(ft(s),"onStopNoteInput",function(){s.props.onStopNoteInput(s.props.midiNumber)}),s}return Ta(n,[{key:"getAbsoluteKeyPosition",value:function(s){var a=7,l=Pt.getAttributes(s),d=l.octave,f=l.pitchName,p=this.props.pitchPositions[f],m=a*d;return p+m}},{key:"getRelativeKeyPosition",value:function(s){return this.getAbsoluteKeyPosition(s)-this.getAbsoluteKeyPosition(this.props.noteRange.first)}},{key:"render",value:function(){var s=this.props,a=s.naturalKeyWidth,l=s.accidentalWidthRatio,d=s.midiNumber,f=s.gliss,p=s.useTouchEvents,m=s.accidental,x=s.active,g=s.disabled,y=s.children;return we.createElement("div",{className:bt("ReactPiano__Key",{"ReactPiano__Key--accidental":m,"ReactPiano__Key--natural":!m,"ReactPiano__Key--disabled":g,"ReactPiano__Key--active":x}),style:{left:Ah(this.getRelativeKeyPosition(d)*a),width:Ah(m?l*a:a)},onMouseDown:p?null:this.onPlayNoteInput,onMouseUp:p?null:this.onStopNoteInput,onMouseEnter:f?this.onPlayNoteInput:null,onMouseLeave:this.onStopNoteInput,onTouchStart:p?this.onPlayNoteInput:null,onTouchCancel:p?this.onStopNoteInput:null,onTouchEnd:p?this.onStopNoteInput:null},we.createElement("div",{className:"ReactPiano__NoteLabelContainer"},y))}}]),n}(we.Component);Ke(Uu,"propTypes",{midiNumber:Se.number.isRequired,naturalKeyWidth:Se.number.isRequired,gliss:Se.bool.isRequired,useTouchEvents:Se.bool.isRequired,accidental:Se.bool.isRequired,active:Se.bool.isRequired,disabled:Se.bool.isRequired,onPlayNoteInput:Se.func.isRequired,onStopNoteInput:Se.func.isRequired,accidentalWidthRatio:Se.number.isRequired,pitchPositions:Se.object.isRequired,children:Se.node});Ke(Uu,"defaultProps",{accidentalWidthRatio:.65,pitchPositions:{C:0,Db:.55,D:1,Eb:1.8,E:2,F:3,Gb:3.5,G:4,Ab:4.7,A:5,Bb:5.85,B:6}});function Ah(e){return"".concat(e*100,"%")}var Hu=function(e){Oa(n,e);function n(){return Ia(this,n),Ma(this,Eo(n).apply(this,arguments))}return Ta(n,[{key:"getMidiNumbers",value:function(){return zu(this.props.noteRange.first,this.props.noteRange.last+1)}},{key:"getNaturalKeyCount",value:function(){return this.getMidiNumbers().filter(function(s){var a=Pt.getAttributes(s),l=a.isAccidental;return!l}).length}},{key:"getNaturalKeyWidth",value:function(){return 1/this.getNaturalKeyCount()}},{key:"getWidth",value:function(){return this.props.width?this.props.width:"100%"}},{key:"getHeight",value:function(){if(!this.props.width)return"100%";var s=this.props.width*this.getNaturalKeyWidth();return"".concat(s/this.props.keyWidthToHeight,"px")}},{key:"render",value:function(){var s=this,a=this.getNaturalKeyWidth();return we.createElement("div",{className:bt("ReactPiano__Keyboard",this.props.className),style:{width:this.getWidth(),height:this.getHeight()}},this.getMidiNumbers().map(function(l){var d=Pt.getAttributes(l);d.note;var f=d.isAccidental,p=!s.props.disabled&&s.props.activeNotes.includes(l);return we.createElement(Uu,{naturalKeyWidth:a,midiNumber:l,noteRange:s.props.noteRange,active:p,accidental:f,disabled:s.props.disabled,onPlayNoteInput:s.props.onPlayNoteInput,onStopNoteInput:s.props.onStopNoteInput,gliss:s.props.gliss,useTouchEvents:s.props.useTouchEvents,key:l},s.props.disabled?null:s.props.renderNoteLabel({isActive:p,isAccidental:f,midiNumber:l}))}))}}]),n}(we.Component);Ke(Hu,"propTypes",{noteRange:By,activeNotes:Se.arrayOf(Se.number),onPlayNoteInput:Se.func.isRequired,onStopNoteInput:Se.func.isRequired,renderNoteLabel:Se.func.isRequired,keyWidthToHeight:Se.number.isRequired,className:Se.string,disabled:Se.bool,gliss:Se.bool,useTouchEvents:Se.bool,width:Se.number});Ke(Hu,"defaultProps",{disabled:!1,gliss:!1,useTouchEvents:!1,keyWidthToHeight:.33,renderNoteLabel:function(){}});function Ph(e){return typeof e!="number"?!1:Pt.NATURAL_MIDI_NUMBERS.includes(e)}function By(e,n,o){var s=e[n],a=s.first,l=s.last;if(!a||!l)return new Error("Invalid prop ".concat(n," supplied to ").concat(o,". ").concat(n," must be an object with .first and .last values."));if(!Ph(a)||!Ph(l))return new Error("Invalid prop ".concat(n," supplied to ").concat(o,". ").concat(n," values must be valid MIDI numbers, and should not be accidentals (sharp or flat notes)."));if(a>=l)return new Error("Invalid prop ".concat(n," supplied to ").concat(o,". ").concat(n,".first must be smaller than ").concat(n,".last."))}var Wu=function(e){Oa(n,e);function n(){var o,s;Ia(this,n);for(var a=arguments.length,l=new Array(a),d=0;d<a;d++)l[d]=arguments[d];return s=Ma(this,(o=Eo(n)).call.apply(o,[this].concat(l))),Ke(ft(s),"state",{isMouseDown:!1,useTouchEvents:!1}),Ke(ft(s),"handleNoteChanges",function(f){var p=f.prevActiveNotes,m=f.nextActiveNotes;if(!s.props.disabled){var x=jh(p,m),g=jh(m,p);g.forEach(function(y){s.props.playNote(y)}),x.forEach(function(y){s.props.stopNote(y)})}}),Ke(ft(s),"getMidiNumberForKey",function(f){if(!s.props.keyboardShortcuts)return null;var p=s.props.keyboardShortcuts.find(function(m){return m.key===f});return p&&p.midiNumber}),Ke(ft(s),"getKeyForMidiNumber",function(f){if(!s.props.keyboardShortcuts)return null;var p=s.props.keyboardShortcuts.find(function(m){return m.midiNumber===f});return p&&p.key}),Ke(ft(s),"onKeyDown",function(f){if(!(f.ctrlKey||f.metaKey||f.shiftKey)){var p=s.getMidiNumberForKey(f.key);p&&s.onPlayNoteInput(p)}}),Ke(ft(s),"onKeyUp",function(f){var p=s.getMidiNumberForKey(f.key);p&&s.onStopNoteInput(p)}),Ke(ft(s),"onPlayNoteInput",function(f){s.props.disabled||s.props.onPlayNoteInput(f,s.props.activeNotes)}),Ke(ft(s),"onStopNoteInput",function(f){s.props.disabled||s.props.onStopNoteInput(f,s.props.activeNotes)}),Ke(ft(s),"onMouseDown",function(){s.setState({isMouseDown:!0})}),Ke(ft(s),"onMouseUp",function(){s.setState({isMouseDown:!1})}),Ke(ft(s),"onTouchStart",function(){s.setState({useTouchEvents:!0})}),Ke(ft(s),"renderNoteLabel",function(f){var p=f.midiNumber,m=f.isActive,x=f.isAccidental,g=s.getKeyForMidiNumber(p);return s.props.renderNoteLabel({keyboardShortcut:g,midiNumber:p,isActive:m,isAccidental:x})}),s}return Ta(n,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.onKeyDown),window.addEventListener("keyup",this.onKeyUp)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.onKeyDown),window.removeEventListener("keyup",this.onKeyUp)}},{key:"componentDidUpdate",value:function(s,a){this.props.activeNotes!==s.activeNotes&&this.handleNoteChanges({prevActiveNotes:s.activeNotes||[],nextActiveNotes:this.props.activeNotes||[]})}},{key:"render",value:function(){return we.createElement("div",{style:{width:"100%",height:"100%"},onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchStart:this.onTouchStart,"data-testid":"container"},we.createElement(Hu,{noteRange:this.props.noteRange,onPlayNoteInput:this.onPlayNoteInput,onStopNoteInput:this.onStopNoteInput,activeNotes:this.props.activeNotes,className:this.props.className,disabled:this.props.disabled,width:this.props.width,keyWidthToHeight:this.props.keyWidthToHeight,gliss:this.state.isMouseDown,useTouchEvents:this.state.useTouchEvents,renderNoteLabel:this.renderNoteLabel}))}}]),n}(we.Component);Ke(Wu,"propTypes",{noteRange:Se.object.isRequired,activeNotes:Se.arrayOf(Se.number.isRequired).isRequired,playNote:Se.func.isRequired,stopNote:Se.func.isRequired,onPlayNoteInput:Se.func.isRequired,onStopNoteInput:Se.func.isRequired,renderNoteLabel:Se.func.isRequired,className:Se.string,disabled:Se.bool,width:Se.number,keyWidthToHeight:Se.number,keyboardShortcuts:Se.arrayOf(Se.shape({key:Se.string.isRequired,midiNumber:Se.number.isRequired}))});Ke(Wu,"defaultProps",{renderNoteLabel:function(n){var o=n.keyboardShortcut;n.midiNumber;var s=n.isActive,a=n.isAccidental;return o?we.createElement("div",{className:bt("ReactPiano__NoteLabel",{"ReactPiano__NoteLabel--active":s,"ReactPiano__NoteLabel--accidental":a,"ReactPiano__NoteLabel--natural":!a})},o):null}});var qu=function(e){Oa(n,e);function n(){var o,s;Ia(this,n);for(var a=arguments.length,l=new Array(a),d=0;d<a;d++)l[d]=arguments[d];return s=Ma(this,(o=Eo(n)).call.apply(o,[this].concat(l))),Ke(ft(s),"state",{activeNotes:s.props.activeNotes||[]}),Ke(ft(s),"handlePlayNoteInput",function(f){s.setState(function(p){return s.props.onPlayNoteInput&&s.props.onPlayNoteInput(f,{prevActiveNotes:p.activeNotes}),p.activeNotes.includes(f)?null:{activeNotes:p.activeNotes.concat(f)}})}),Ke(ft(s),"handleStopNoteInput",function(f){s.setState(function(p){return s.props.onStopNoteInput&&s.props.onStopNoteInput(f,{prevActiveNotes:s.state.activeNotes}),{activeNotes:p.activeNotes.filter(function(m){return f!==m})}})}),s}return Ta(n,[{key:"componentDidUpdate",value:function(s){s.activeNotes!==this.props.activeNotes&&this.state.activeNotes!==this.props.activeNotes&&this.setState({activeNotes:this.props.activeNotes||[]})}},{key:"render",value:function(){var s=this.props;s.activeNotes,s.onPlayNoteInput,s.onStopNoteInput;var a=Sy(s,["activeNotes","onPlayNoteInput","onStopNoteInput"]);return we.createElement(Wu,yu({activeNotes:this.state.activeNotes,onPlayNoteInput:this.handlePlayNoteInput,onStopNoteInput:this.handleStopNoteInput},a))}}]),n}(we.Component);Ke(qu,"propTypes",{noteRange:Se.object.isRequired,activeNotes:Se.arrayOf(Se.number.isRequired),playNote:Se.func.isRequired,stopNote:Se.func.isRequired,onPlayNoteInput:Se.func,onStopNoteInput:Se.func,renderNoteLabel:Se.func,className:Se.string,disabled:Se.bool,width:Se.number,keyWidthToHeight:Se.number,keyboardShortcuts:Se.arrayOf(Se.shape({key:Se.string.isRequired,midiNumber:Se.number.isRequired}))});function Fy(e){for(var n=e.firstNote,o=e.lastNote,s=e.keyboardConfig,a=n,l=0,d=[];l<s.length&&a<=o;){var f=s[l],p=Pt.getAttributes(a),m=p.isAccidental;m?d.push({key:f.flat,midiNumber:a}):(d.push({key:f.natural,midiNumber:a}),l+=1),a+=1}return d}var Rh={create:Fy,BOTTOM_ROW:[{natural:"z",flat:"a",sharp:"s"},{natural:"x",flat:"s",sharp:"d"},{natural:"c",flat:"d",sharp:"f"},{natural:"v",flat:"f",sharp:"g"},{natural:"b",flat:"g",sharp:"h"},{natural:"n",flat:"h",sharp:"j"},{natural:"m",flat:"j",sharp:"k"},{natural:",",flat:"k",sharp:"l"},{natural:".",flat:"l",sharp:";"},{natural:"/",flat:";",sharp:"'"}],HOME_ROW:[{natural:"a",flat:"q",sharp:"w"},{natural:"s",flat:"w",sharp:"e"},{natural:"d",flat:"e",sharp:"r"},{natural:"f",flat:"r",sharp:"t"},{natural:"g",flat:"t",sharp:"y"},{natural:"h",flat:"y",sharp:"u"},{natural:"j",flat:"u",sharp:"i"},{natural:"k",flat:"i",sharp:"o"},{natural:"l",flat:"o",sharp:"p"},{natural:";",flat:"p",sharp:"["},{natural:"'",flat:"[",sharp:"]"}],QWERTY_ROW:[{natural:"q",flat:"1",sharp:"2"},{natural:"w",flat:"2",sharp:"3"},{natural:"e",flat:"3",sharp:"4"},{natural:"r",flat:"4",sharp:"5"},{natural:"t",flat:"5",sharp:"6"},{natural:"y",flat:"6",sharp:"7"},{natural:"u",flat:"7",sharp:"8"},{natural:"i",flat:"8",sharp:"9"},{natural:"o",flat:"9",sharp:"0"},{natural:"p",flat:"0",sharp:"-"},{natural:"[",flat:"-",sharp:"="}]};const kh=e=>{let n;const o=new Set,s=(m,x)=>{const g=typeof m=="function"?m(n):m;if(!Object.is(g,n)){const y=n;n=x??(typeof g!="object"||g===null)?g:Object.assign({},n,g),o.forEach(w=>w(n,y))}},a=()=>n,f={setState:s,getState:a,getInitialState:()=>p,subscribe:m=>(o.add(m),()=>o.delete(m))},p=n=e(s,a,f);return f},$y=e=>e?kh(e):kh,zy=e=>e;function Vy(e,n=zy){const o=we.useSyncExternalStore(e.subscribe,we.useCallback(()=>n(e.getState()),[e,n]),we.useCallback(()=>n(e.getInitialState()),[e,n]));return we.useDebugValue(o),o}const Ih=e=>{const n=$y(e),o=s=>Vy(n,s);return Object.assign(o,n),o},Us=e=>e?Ih(e):Ih;class Th extends Error{constructor(n,o,s){super(s),this.name="ApiError",this.url=o.url,this.status=o.status,this.statusText=o.statusText,this.body=o.body,this.request=n}}class Gy extends Error{constructor(n){super(n),this.name="CancelError"}get isCancelled(){return!0}}class Uy{#t;#n;#e;#r;#s;#i;#o;constructor(n){this.#t=!1,this.#n=!1,this.#e=!1,this.#r=[],this.#s=new Promise((o,s)=>{this.#i=o,this.#o=s;const a=f=>{this.#t||this.#n||this.#e||(this.#t=!0,this.#i&&this.#i(f))},l=f=>{this.#t||this.#n||this.#e||(this.#n=!0,this.#o&&this.#o(f))},d=f=>{this.#t||this.#n||this.#e||this.#r.push(f)};return Object.defineProperty(d,"isResolved",{get:()=>this.#t}),Object.defineProperty(d,"isRejected",{get:()=>this.#n}),Object.defineProperty(d,"isCancelled",{get:()=>this.#e}),n(a,l,d)})}get[Symbol.toStringTag](){return"Cancellable Promise"}then(n,o){return this.#s.then(n,o)}catch(n){return this.#s.catch(n)}finally(n){return this.#s.finally(n)}cancel(){if(!(this.#t||this.#n||this.#e)){if(this.#e=!0,this.#r.length)try{for(const n of this.#r)n()}catch(n){console.warn("Cancellation threw an error",n);return}this.#r.length=0,this.#o&&this.#o(new Gy("Request aborted"))}}get isCancelled(){return this.#e}}const Ku={BASE:"http://localhost:8080",VERSION:"0",WITH_CREDENTIALS:!1,CREDENTIALS:"include",TOKEN:void 0,USERNAME:void 0,PASSWORD:void 0,HEADERS:void 0,ENCODE_PATH:void 0},Yu=e=>e!=null,Hs=e=>typeof e=="string",Bc=e=>Hs(e)&&e!=="",Qu=e=>typeof e=="object"&&typeof e.type=="string"&&typeof e.stream=="function"&&typeof e.arrayBuffer=="function"&&typeof e.constructor=="function"&&typeof e.constructor.name=="string"&&/^(Blob|File)$/.test(e.constructor.name)&&/^(Blob|File)$/.test(e[Symbol.toStringTag]),fg=e=>e instanceof FormData,Hy=e=>{try{return btoa(e)}catch{return Buffer.from(e).toString("base64")}},Wy=e=>{const n=[],o=(a,l)=>{n.push(`${encodeURIComponent(a)}=${encodeURIComponent(String(l))}`)},s=(a,l)=>{Yu(l)&&(Array.isArray(l)?l.forEach(d=>{s(a,d)}):typeof l=="object"?Object.entries(l).forEach(([d,f])=>{s(`${a}[${d}]`,f)}):o(a,l))};return Object.entries(e).forEach(([a,l])=>{s(a,l)}),n.length>0?`?${n.join("&")}`:""},qy=(e,n)=>{const o=encodeURI,s=n.url.replace("{api-version}",e.VERSION).replace(/{(.*?)}/g,(l,d)=>n.path?.hasOwnProperty(d)?o(String(n.path[d])):l),a=`${e.BASE}${s}`;return n.query?`${a}${Wy(n.query)}`:a},Ky=e=>{if(e.formData){const n=new FormData,o=(s,a)=>{Hs(a)||Qu(a)?n.append(s,a):n.append(s,JSON.stringify(a))};return Object.entries(e.formData).filter(([s,a])=>Yu(a)).forEach(([s,a])=>{Array.isArray(a)?a.forEach(l=>o(s,l)):o(s,a)}),n}},oa=async(e,n)=>n,Yy=async(e,n)=>{const[o,s,a,l]=await Promise.all([oa(n,e.TOKEN),oa(n,e.USERNAME),oa(n,e.PASSWORD),oa(n,e.HEADERS)]),d=Object.entries({Accept:"application/json",...l,...n.headers}).filter(([f,p])=>Yu(p)).reduce((f,[p,m])=>({...f,[p]:String(m)}),{});if(Bc(o)&&(d.Authorization=`Bearer ${o}`),Bc(s)&&Bc(a)){const f=Hy(`${s}:${a}`);d.Authorization=`Basic ${f}`}return n.body&&(n.mediaType?d["Content-Type"]=n.mediaType:Qu(n.body)?d["Content-Type"]=n.body.type||"application/octet-stream":Hs(n.body)?d["Content-Type"]="text/plain":fg(n.body)||(d["Content-Type"]="application/json")),new Headers(d)},Qy=e=>{if(e.body!==void 0)return e.mediaType?.includes("/json")?JSON.stringify(e.body):Hs(e.body)||Qu(e.body)||fg(e.body)?e.body:JSON.stringify(e.body)},Xy=async(e,n,o,s,a,l,d)=>{const f=new AbortController,p={headers:l,body:s??a,method:n.method,signal:f.signal};return d(()=>f.abort()),await fetch(o,p)},Zy=(e,n)=>{if(n){const o=e.headers.get(n);if(Hs(o))return o}},Jy=async e=>{if(e.status!==204)try{const n=e.headers.get("Content-Type");if(n)return["application/json","application/problem+json"].some(a=>n.toLowerCase().startsWith(a))?await e.json():await e.text()}catch(n){console.error(n)}},eb=(e,n)=>{const s={400:"Bad Request",401:"Unauthorized",403:"Forbidden",404:"Not Found",500:"Internal Server Error",502:"Bad Gateway",503:"Service Unavailable",...e.errors}[n.status];if(s)throw new Th(e,n,s);if(!n.ok){const a=n.status??"unknown",l=n.statusText??"unknown",d=(()=>{try{return JSON.stringify(n.body,null,2)}catch{return}})();throw new Th(e,n,`Generic Error: status: ${a}; status text: ${l}; body: ${d}`)}},Xu=(e,n)=>new Uy(async(o,s,a)=>{try{const l=qy(e,n),d=Ky(n),f=Qy(n),p=await Yy(e,n);if(!a.isCancelled){const m=await Xy(e,n,l,f,d,p,a),x=await Jy(m),g=Zy(m,n.responseHeader),y={url:l,ok:m.ok,status:m.status,statusText:m.statusText,body:g??x};eb(n,y),o(y.body)}}catch(l){s(l)}});class Oh{static getModeKeyChords(n,o){return Xu(Ku,{method:"GET",url:"/api/chords",query:{key:n,mode:o}})}}class Fc{static getModes(){return Xu(Ku,{method:"GET",url:"/api/modes"})}}class tb{static getScaleNotes(n,o){return Xu(Ku,{method:"GET",url:"/api/scales",query:{key:n,mode:o}})}}class nb{constructor(){this.chordTypes={"":[0,4,7],m:[0,3,7],aug:[0,4,8],dim:[0,3,6],5:[0,7],b5:[0,4,6],6:[0,4,7,9],m6:[0,3,7,9],7:[0,4,7,10],m7:[0,3,7,10],maj7:[0,4,7,11],dim7:[0,3,6,9],aug7:[0,4,8,10],m7b5:[0,3,6,10],"maj7#5":[0,4,8,11],maj7b5:[0,4,6,11],"m7#5":[0,3,8,10],m7b9:[0,3,7,10,13],9:[0,4,7,10,14],m9:[0,3,7,10,14],maj9:[0,4,7,11,14],"maj9#11":[0,4,7,14,18,23],"7b9":[0,4,7,10,13],"7#9":[0,4,7,10,15],"9#5":[0,4,8,14,22],"9b5":[0,4,6,10,14],11:[0,4,7,10,14,17],m11:[0,3,7,10,14,17],maj11:[0,4,7,11,14,17],"7#11":[0,4,7,10,18],"maj7#11":[0,4,7,11,18],"m7#11":[0,3,7,10,18],"11b9":[0,4,7,13,14,17,22],13:[0,4,7,10,14,17,21],m13:[0,3,7,10,14,17,21],maj13:[0,4,7,11,14,17,21],"13#11":[0,4,7,14,18,21,22],"maj13#11":[0,4,7,14,18,21,23],"13#b9":[0,4,7,13,21,22],"13#sus4":[0,2,5,7,21,22],sus2:[0,2,7],sus4:[0,5,7],sus2sus4:[0,2,5,7],"7sus2":[0,2,7,10],"7sus4":[0,5,7,10],"9sus4":[0,5,7,10,14],"add(2)":[0,2,4,7],"add(4)":[0,4,5,7],"add(9)":[0,4,7,14],"add(2) add(4)":[0,2,4,5,7],"m add(2)":[0,2,3,7],"m add(4)":[0,3,5,7],"m add(9)":[0,2,3,7],"m add(2) add(4)":[0,2,3,5,7],"7 add(4)":[0,4,5,7,22],"m7 add(4)":[0,3,5,7,22],"6/9":[0,4,7,9,14],"m6/9":[0,3,7,9,14],"maj6/7":[0,4,7,21,23],"7/6":[0,4,7,21,22],"m7/6":[0,3,7,21,22],"m/Maj7":[0,3,7,11],"m/Maj9":[0,3,7,11,14],"m/Maj11":[0,3,7,11,14,17],"m/Maj13":[0,3,7,11,14,17,21],"7b5":[0,4,6,10],"7#5":[0,4,8,10],"7b5b9":[0,4,6,10,13],"7b5#9":[0,4,6,10,15],"7#5b9":[0,4,8,10,13],"7#5#9":[0,4,8,10,15],"7aug5":[0,4,8,10]},this.chromaticNotes=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],this.chromaticNotesFlat=["C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B"]}noteNameToNumber(n){if(!n||n.length===0)return 0;const o=n.charAt(0).toUpperCase(),s=n.slice(1);let l={C:0,D:2,E:4,F:5,G:7,A:9,B:11}[o];if(l===void 0)return 0;const d=(s.match(/#/g)||[]).length,f=(s.match(/b/g)||[]).length;return l+=d,l-=f,l}getChromaticNoteName(n,o){const s=(n%12+12)%12;return o.includes("b")?this.chromaticNotesFlat[s]:this.chromaticNotes[s]}getLetterName(n){return n.charAt(0).toUpperCase()}getLetterPosition(n){return["C","D","E","F","G","A","B"].indexOf(n.toUpperCase())}calculateIntervalNoteName(n,o){const s=this.getLetterName(n),a=this.getLetterPosition(s),l=this.noteNameToNumber(n),f={0:0,1:0,2:1,3:2,4:2,5:3,6:3,7:4,8:5,9:5,10:6,11:6,12:0,13:0,14:1,15:2,16:2,17:3,18:3,19:4,20:4,21:5,22:5,23:6}[o]??0,p=(a+f)%7,x=["C","D","E","F","G","A","B"][p],g=l+o;let w={C:0,D:2,E:4,F:5,G:7,A:9,B:11}[x];const C=Math.round((g-w)/12);w+=C*12;const E=g-w;return E===0?x:E>0?x+"#".repeat(E):x+"b".repeat(-E)}findBestNoteName(n,o,s,a,l){if(a!==void 0&&l!==void 0)return this.calculateIntervalNoteName(a,l);const d=(n%12+12)%12,f=o.find(p=>(this.noteNameToNumber(p.noteName)%12+12)%12===d);return f?f.noteName:this.getChromaticNoteName(d,s)}async generateChordsForScale(n,o,s=!1){try{const a=await wn.getScaleNotes(n,o),d=(await wn.getModes()).find(m=>m.name===o);if(!d)throw new Error(`Mode "${o}" not found`);const f=a.map(m=>(this.noteNameToNumber(m.noteName)%12+12)%12),p=[];return a.forEach(m=>{const x=this.noteNameToNumber(m.noteName);Object.entries(this.chordTypes).forEach(([g,y])=>{const w=[],C=[];let E=!0;y.forEach(S=>{const B=x+S,$=(B%12+12)%12;f.includes($)||(E=!1);const P=this.findBestNoteName(B,a,n,m.noteName,S);w.push(B),C.push(P)}),(E||s)&&p.push({keyName:n,modeId:d.id,chordNote:x,chordNoteName:m.noteName,chordName:`${m.noteName}${g}`,chordNotes:w.join(", "),chordNoteNames:C.join(", ")})})}),p}catch(a){throw console.error("Error generating chords for scale:",a),a}}async generateChord(n,o,s,a){try{const l=this.chordTypes[o];if(!l)throw new Error(`Unknown chord type: ${o}`);const d=await wn.getScaleNotes(s,a),p=(await wn.getModes()).find(y=>y.name===a);if(!p)throw new Error(`Mode "${a}" not found`);const m=this.noteNameToNumber(n),x=[],g=[];return l.forEach(y=>{const w=m+y,C=this.findBestNoteName(w,d,s,n,y);x.push(w),g.push(C)}),{keyName:s,modeId:p.id,chordNote:m,chordNoteName:n,chordName:`${n}${o}`,chordNotes:x.join(", "),chordNoteNames:g.join(", ")}}catch(l){return console.error("Error generating chord:",l),null}}async getCompatibleChords(n,o){return this.generateChordsForScale(n,o,!1)}async getAllPossibleChords(n,o){return this.generateChordsForScale(n,o,!0)}getChordTypes(){return Object.keys(this.chordTypes)}addChordType(n,o){this.chordTypes[n]=o}}const xs=new nb;class rb{constructor(){this.baseUrl="/data",this.indexCache=null,this.modesCache=null,this.scalesCache=new Map,this.distinctChordsCache=null,this.useDynamicChords=!0}normalizeKey(n){const o=n.trim();return o.length===0?"":o.charAt(0).toUpperCase()+o.slice(1).toLowerCase()}setUseDynamicChords(n){this.useDynamicChords=n,this.distinctChordsCache=null}async loadIndex(){if(this.indexCache)return this.indexCache;try{const n=await fetch(`${this.baseUrl}/index.json`);if(!n.ok)throw new Error(`Failed to load index: ${n.statusText}`);return this.indexCache=await n.json(),this.indexCache}catch(n){throw console.error("Error loading static data index:",n),new Error("Failed to load static data. Please ensure the data generation completed successfully.")}}async getModes(){if(this.modesCache)return this.modesCache;try{const n=await fetch(`${this.baseUrl}/modes.json`);if(!n.ok)throw new Error(`Failed to load modes: ${n.statusText}`);return this.modesCache=await n.json(),this.modesCache}catch(n){throw console.error("Error loading modes from static data:",n),n}}async getModeKeyChords(n,o,s=!1){const a=this.normalizeKey(n);if(this.useDynamicChords)try{return(await xs.generateChordsForScale(a,o,s)).map(d=>({keyName:d.keyName,modeId:d.modeId,chordNote:d.chordNote,chordNoteName:d.chordNoteName,chordName:d.chordName,chordNotes:d.chordNotes,chordNoteNames:d.chordNoteNames}))}catch(l){console.warn("Dynamic chord generation failed, falling back to static data:",l)}try{const d=(await this.loadIndex()).modes.find(g=>g.name===o);if(!d||!d.id)throw new Error(`Mode "${o}" not found`);const f=d.id.toString(),p=await fetch(`${this.baseUrl}/chords-mode-${f}.json`);if(!p.ok)throw new Error(`Failed to load chords for mode ${o}: ${p.statusText}`);return(await p.json()).filter(g=>g.keyName===a)}catch(l){throw console.error("Error loading chords from static data:",l),l}}async getCompatibleChords(n,o){if(this.useDynamicChords)try{const d=this.normalizeKey(n);return(await xs.getCompatibleChords(d,o)).map(p=>({keyName:p.keyName,modeId:p.modeId,chordNote:p.chordNote,chordNoteName:p.chordNoteName,chordName:p.chordName,chordNotes:p.chordNotes,chordNoteNames:p.chordNoteNames}))}catch(d){console.warn("Dynamic compatible chord generation failed:",d)}const s=await this.getModeKeyChords(n,o),l=(await this.getScaleNotes(n,o)).map(d=>(({C:0,"C#":1,Db:1,D:2,"D#":3,Eb:3,E:4,"E#":5,Fb:4,F:5,"F#":6,Gb:6,G:7,"G#":8,Ab:8,A:9,"A#":10,Bb:10,B:11,"B#":0,Cb:11}[d.noteName]??0)%12+12)%12);return s.filter(d=>d.chordNotes?d.chordNotes.split(", ").map(p=>(parseInt(p.trim())%12+12)%12).every(p=>l.includes(p)):!1)}async generateSpecificChord(n,o,s,a){if(!this.useDynamicChords)throw new Error("Dynamic chord generation is disabled");try{const l=this.normalizeKey(s),d=await xs.generateChord(n,o,l,a);return d?{keyName:d.keyName,modeId:d.modeId,chordNote:d.chordNote,chordNoteName:d.chordNoteName,chordName:d.chordName,chordNotes:d.chordNotes,chordNoteNames:d.chordNoteNames}:null}catch(l){return console.error("Error generating specific chord:",l),null}}getAvailableChordTypes(){return xs.getChordTypes()}async getScaleNotes(n,o){try{const s=this.normalizeKey(n),l=(await this.loadIndex()).modes.find(m=>m.name===o);if(!l||!l.id)throw new Error(`Mode "${o}" not found`);const d=l.id.toString();if(this.scalesCache.has(d))return this.scalesCache.get(d)[s]||[];const f=await fetch(`${this.baseUrl}/scales-mode-${d}.json`);if(!f.ok)throw new Error(`Failed to load scales for mode ${o}: ${f.statusText}`);const p=await f.json();return this.scalesCache.set(d,p),p[s]||[]}catch(s){throw console.error("Error loading scale notes from static data:",s),s}}async getAllDistinctChords(){if(this.distinctChordsCache)return this.distinctChordsCache;if(this.useDynamicChords)try{const n=await this.getModes(),o=["C","D","E","F","G","A","B","C#","F#","Bb","Eb","Ab","Db"],s=[];for(const a of n)for(const l of o)try{const d=await xs.generateChordsForScale(l,a.name,!0);s.push(...d.map(f=>({keyName:f.keyName,modeId:f.modeId,chordNote:f.chordNote,chordNoteName:f.chordNoteName,chordName:f.chordName,chordNotes:f.chordNotes,chordNoteNames:f.chordNoteNames})))}catch(d){console.warn(`Error generating chords for ${l} ${a.name}:`,d)}return this.distinctChordsCache=this.deduplicateChords(s),this.distinctChordsCache}catch(n){console.warn("Dynamic distinct chord generation failed, falling back to static data:",n)}try{const n=await this.loadIndex(),o=[];for(const s of n.modes){if(!s.id)continue;const a=s.id.toString();try{const l=await fetch(`${this.baseUrl}/chords-mode-${a}.json`);if(!l.ok){console.warn(`Failed to load chords for mode ${s.name} (ID: ${a}): ${l.statusText}`);continue}const d=await l.json();o.push(...d)}catch(l){console.warn(`Error loading chords for mode ${s.name}:`,l)}}return this.distinctChordsCache=this.deduplicateChords(o),this.distinctChordsCache}catch(n){throw console.error("Error loading all distinct chords from static data:",n),n}}deduplicateChords(n){const o=new Map;for(const s of n){let a;const l=s.chordNotes.split(",").map(d=>d.trim()).filter(d=>d.length>0).sort();a=s.chordName+l.join(","),a&&!o.has(a)&&o.set(a,s)}return Array.from(o.values())}async getMetadata(){if(this.useDynamicChords){const o=await this.getModes();return{generatedAt:new Date().toISOString(),modesCount:o.length,usingDynamicChords:!0}}const n=await this.loadIndex();return{generatedAt:n.generated_at,modesCount:n.modes.length,usingDynamicChords:!1}}clearCache(){this.indexCache=null,this.modesCache=null,this.scalesCache.clear(),this.distinctChordsCache=null}}const wn=new rb,ob={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_BASE_URL:"http://localhost:8080",VITE_USE_STATIC_DATA:"true"};function sb(){try{return ob||{}}catch{return console.warn("Failed to access import.meta.env, using fallbacks"),{}}}const ib=sb();function Mh(e,n=""){const o=ib[e];return typeof o=="string"?o:n}class ab{constructor(){const n=Mh("VITE_USE_STATIC_DATA","true");console.log("Initializing DataService with environment:",{useStaticData:n}),this.config={useStaticData:n.toLowerCase()!=="false",apiBaseUrl:Mh("VITE_API_BASE_URL","http://localhost:8080")},console.log("DataService initialized with config:",this.config)}async getModes(){return this.config.useStaticData?(console.log("Loading modes from static data"),wn.getModes()):(console.log("Loading modes from API"),Fc.getModes())}async getModeKeyChords(n,o){return this.config.useStaticData?wn.getModeKeyChords(n,o):Oh.getModeKeyChords(n,o)}async getScaleNotes(n,o){return this.config.useStaticData?wn.getScaleNotes(n,o):tb.getScaleNotes(n,o)}async getAllDistinctChords(){if(this.config.useStaticData)return console.log("Loading all distinct chords from static data"),wn.getAllDistinctChords();{console.log("Loading all distinct chords from API");const n=await Fc.getModes(),o=Nu,s=[];for(const a of n)for(const l of o)try{const d=await Oh.getModeKeyChords(l,a.name);s.push(...d)}catch(d){console.warn(`Failed to load chords for ${a.name} in ${l}:`,d)}return this.deduplicateChords(s)}}deduplicateChords(n){const o=new Map;for(const s of n){let a;if(s.chordName&&s.chordName.trim()!=="")a=s.chordName.trim();else if(s.chordNoteNames&&s.chordNoteNames.trim()!=="")a=s.chordNoteNames.trim();else if(s.chordTypeId!==void 0&&s.chordNoteName)a=`${s.chordNoteName}_type_${s.chordTypeId}`;else if(s.chordNotes&&s.chordNotes.trim()!=="")a=s.chordNotes.trim();else{const l=[];s.chordNote!==void 0&&l.push(`note_${s.chordNote}`),s.chordTypeId!==void 0&&l.push(`type_${s.chordTypeId}`),s.chordNoteName&&l.push(s.chordNoteName),a=l.length>0?l.join("_"):JSON.stringify(s)}o.has(a)||o.set(a,s)}return Array.from(o.values())}getConfig(){return{...this.config}}updateConfig(n){this.config={...this.config,...n},console.log("DataService configuration updated:",this.config),n.useStaticData!==void 0&&wn.clearCache()}async getDataSourceInfo(){if(this.config.useStaticData)try{return{source:"static",metadata:await wn.getMetadata()}}catch{return{source:"static",metadata:{error:"Failed to load metadata"}}}else return{source:"api",metadata:{baseUrl:this.config.apiBaseUrl}}}async testConnection(){const n=Date.now();try{return this.config.useStaticData?await wn.getModes():await Fc.getModes(),{success:!0,responseTime:Date.now()-n}}catch(o){return{success:!1,error:o instanceof Error?o.message:"Unknown error",responseTime:Date.now()-n}}}}const Er=new ab,lb={"C##":"D","D##":"E","E#":"F","F##":"G","G##":"A","A##":"B","B#":"C",Cb:"B",Db:"C#",Eb:"D#",Fb:"E",Gb:"F#",Ab:"G#",Bb:"A#",Dbb:"C",Ebb:"D",Fbb:"E",Gbb:"F",Abb:"G",Bbb:"A",Cbb:"B"},Do=e=>{if(e)return lb[e]||e},Cn=Us((e,n)=>({chords:void 0,scaleNotes:[],key:"C",mode:"Ionian",modes:[],loadingChords:!1,normalizedScaleNotes:[],allDistinctChords:void 0,loadingAllChords:!1,showAllChords:!1,setKey:o=>{e({key:o}),n().fetchMusicData(o,n().mode)},setMode:o=>{e({mode:o}),n().fetchMusicData(n().key,o)},setModes:o=>{e({modes:o});const{key:s,mode:a,chords:l}=n();!l&&s&&a&&n().fetchMusicData(s,a)},setKeyAndMode:(o,s)=>{e({key:o,mode:s}),n().fetchMusicData(o,s)},fetchMusicData:async(o,s)=>{if(!(!o||!s)){e({loadingChords:!0});try{const[a,l]=await Promise.all([Er.getModeKeyChords(o,s),Er.getScaleNotes(o,s)]),d=l.map(f=>f.noteName?Do(f.noteName):null).filter(Boolean);e({chords:a,scaleNotes:l,normalizedScaleNotes:d,loadingChords:!1})}catch(a){console.error("Error fetching music data:",a),e({loadingChords:!1})}}},initialize:async()=>{const{key:o,mode:s}=n();await n().fetchMusicData(o,s)},fetchAllDistinctChords:async()=>{const{allDistinctChords:o}=n();if(!o){e({loadingAllChords:!0});try{const s=await Er.getAllDistinctChords();e({allDistinctChords:s,loadingAllChords:!1})}catch(s){console.error("Error fetching all distinct chords:",s),e({loadingAllChords:!1})}}},toggleShowAllChords:()=>{const{showAllChords:o,allDistinctChords:s}=n(),a=!o;e({showAllChords:a}),a&&!s&&n().fetchAllDistinctChords()},setShowAllChords:o=>{e({showAllChords:o}),o&&!n().allDistinctChords&&n().fetchAllDistinctChords()}})),cb=["electric_piano_1","acoustic_grand_piano","bright_acoustic_piano","electric_grand_piano","honkytonk_piano","electric_piano_2","harpsichord","clavinet"],ub=()=>({instrumentName:"electric_piano_1",cutOffPreviousNotes:!0,eq:{bass:0,mid:0,treble:0},octaveOffset:0,reverbLevel:0,noteDuration:.8,volume:.8,chorusLevel:0,delayLevel:0}),Ss=Us((e,n)=>({pianoSettings:ub(),availableInstruments:cb,updatePianoSettings:o=>e(s=>({pianoSettings:{...s.pianoSettings,...o}})),setPianoInstrument:o=>n().updatePianoSettings({instrumentName:o}),setCutOffPreviousNotes:o=>n().updatePianoSettings({cutOffPreviousNotes:o}),setEq:o=>n().updatePianoSettings({eq:o}),setOctaveOffset:o=>n().updatePianoSettings({octaveOffset:o}),setReverbLevel:o=>n().updatePianoSettings({reverbLevel:o}),setNoteDuration:o=>n().updatePianoSettings({noteDuration:o}),setVolume:o=>n().updatePianoSettings({volume:o}),setChorusLevel:o=>n().updatePianoSettings({chorusLevel:o}),setDelayLevel:o=>n().updatePianoSettings({delayLevel:o}),setAvailableInstruments:o=>e({availableInstruments:o})})),ha=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],pg=(e,n)=>{const o={Db:"C#",Eb:"D#",Gb:"F#",Ab:"G#",Bb:"A#"},s=o[e]||e,a=o[n]||n,l=ha.indexOf(s),d=ha.indexOf(a);if(l===-1||d===-1)return 0;let f=d-l;return f>6&&(f-=12),f<-5&&(f+=12),f},hg=(e,n)=>{const o={Db:"C#",Eb:"D#",Gb:"F#",Ab:"G#",Bb:"A#"};let s=e;o[e]&&(s=o[e]);const a=ha.indexOf(s);if(a===-1)return e;const l=(a+n+12)%12;return ha[l]},mg=(e,n)=>{let o="",s="";return e.length>=2&&(e[1]==="#"||e[1]==="b")?(o=e.substring(0,2),s=e.substring(2)):e.length>=1&&(o=e[0],s=e.substring(1)),hg(o,n)+s},ma=(e,n)=>e.split(" ").map(o=>hg(o,n)).join(" "),Bn=Us((e,n)=>({activeNotes:[],activeChordIndex:null,highlightedChordIndex:null,addedChords:[],temporaryChord:null,isPlayingScale:!1,scalePlaybackTimeouts:[],setActiveNotes:o=>e({activeNotes:o}),setAddedChords:o=>e({addedChords:o}),setActiveChordIndex:o=>e({activeChordIndex:o}),setHighlightedChordIndex:o=>e({highlightedChordIndex:o}),setTemporaryChord:o=>e({temporaryChord:o}),setIsPlayingScale:o=>e({isPlayingScale:o}),addChord:(o,s,a,l,d)=>e(f=>({addedChords:[...f.addedChords,{name:o,notes:s,pattern:[...a],originalKey:l,originalMode:d,originalNotes:s}]})),updateChord:(o,s)=>e(a=>{const l=[...a.addedChords];return l[o]={...s},{addedChords:l}}),removeChord:o=>e(s=>{const a=s.addedChords.filter((d,f)=>f!==o);let l=s.activeChordIndex;return s.activeChordIndex===o?l=null:s.activeChordIndex!==null&&s.activeChordIndex>o&&(l=s.activeChordIndex-1),{addedChords:a,activeChordIndex:l}}),clearAllChords:()=>e({addedChords:[],activeChordIndex:null,temporaryChord:null}),updateChordPattern:(o,s)=>e(a=>{const l=[...a.addedChords];return l[o]={...l[o],pattern:[...s]},{addedChords:l}}),playNotes:o=>{e({activeNotes:[]}),setTimeout(()=>e({activeNotes:o}),10)},handleFetchOriginalChord:async(o,s,a)=>{try{return(await Er.getModeKeyChords(s,a)).find(f=>f.chordName===o)?.chordNoteNames||null}catch(l){return console.error("Failed to fetch original chord:",l),null}},addScalePlaybackTimeout:o=>e(s=>({scalePlaybackTimeouts:[...s.scalePlaybackTimeouts,o]})),clearScalePlaybackTimeouts:()=>{const{scalePlaybackTimeouts:o}=n();o.forEach(clearTimeout),e({scalePlaybackTimeouts:[]})},transposeAddedChords:async(o,s,a)=>{const{addedChords:l,handleFetchOriginalChord:d}=n();console.log(`Transposing added chords from ${o} to ${s} (${a})`),console.log(l);const f=pg(o,s),p=await Promise.all(l.map(async m=>{const x=mg(m.name,f);console.log(`Transposing chord ${m.name} (${m.notes}) from ${o} to ${s}: ${x}`);const g=await d(x,s,a);if(g)return{...m,name:x,notes:g,originalKey:s,originalMode:a,originalNotes:g};{const y=ma(m.notes,f),w=m.originalNotes?ma(m.originalNotes,f):y;return{...m,name:x,notes:y,originalNotes:w}}}));e({addedChords:p})}})),Ro=Us((e,n)=>({globalPatternState:{currentPattern:["1","2","3","4"],isPlaying:!1,bpm:120,subdivision:.25,swing:0,currentStep:0,repeat:!0,lastChordChangeTime:0,globalClockStartTime:0},currentlyActivePattern:["1","2","3","4"],setGlobalPatternState:o=>e(s=>({globalPatternState:{...s.globalPatternState,...o}})),setCurrentlyActivePattern:o=>e({currentlyActivePattern:o}),togglePlayback:()=>{const{globalPatternState:o}=n(),s=!o.isPlaying;e(a=>({globalPatternState:{...a.globalPatternState,isPlaying:s}}))},updatePattern:o=>{e(s=>({globalPatternState:{...s.globalPatternState,...o}}))}})),gg=Us(e=>({isDeleteMode:!1,isLiveMode:!1,showPatternSystem:!1,setIsDeleteMode:n=>e({isDeleteMode:n}),setIsLiveMode:n=>e({isLiveMode:n}),setShowPatternSystem:n=>e({showPatternSystem:n}),toggleDeleteMode:()=>e(n=>({isDeleteMode:!n.isDeleteMode})),toggleLiveMode:()=>e(n=>({isLiveMode:!n.isLiveMode})),togglePatternSystem:()=>e(n=>({showPatternSystem:!n.showPatternSystem}))}));function db(){const[e,n]=b.useState(),[o,s]=b.useState(null);return b.useEffect(()=>{(async()=>{try{const l=await Er.getModes();n(l.map(d=>d.name))}catch(l){s(l),console.error("Error fetching modes:",l)}})()},[]),{modes:e,error:o}}const _h=["C","D","E","F","G","A","B"],ga=(e,n,o)=>{const s=o.split(", ");let a=_h.indexOf(Do(s[0])[0]),l=e;return s.map((d,f)=>{const p=Do(d),m=_h.indexOf(p[0]);return m<a&&f>0&&l++,l>n&&(l=n),a=m,{note:p,octave:l}})},xt=e=>Math.max(0,Math.round(e)).toString(36),yt=e=>parseInt(e,36)||0,fb=(e,n,o,s,a,l,d,f,p,m,x,g,y,w)=>{if(!w?.length||!x.length||!g.length)return"";try{const C="v7",E=x.indexOf(e),S=xt(Math.max(0,E)),B=g.indexOf(n),$=xt(Math.max(0,B)),P=s.slice(0,16).map(ve=>ve.replace(/[xX]/gi,"0")).join("."),T=Math.max(60,Math.min(200,a)),A=xt(T-60),R={.125:"0",.25:"1",.5:"2",1:"3",2:"4"}[l]||"1",M=Math.max(0,Math.min(50,d)),Y=xt(M),ee=(f?2:0)+(p?1:0),oe=xt(ee),O=`${A}|${R}|${Y}|${oe}`,V=y.indexOf(m.instrumentName),U=xt(Math.max(0,V)),X=m.cutOffPreviousNotes?"1":"0",J=xt(Math.round(m.eq.bass)+24),se=xt(Math.round(m.eq.mid)+24),q=xt(Math.round(m.eq.treble)+24),Q=xt(m.octaveOffset+3),K=xt(Math.round(m.reverbLevel*35)),D=xt(Math.round(m.volume*35)),F=xt(Math.round(m.chorusLevel*35)),ae=xt(Math.round(m.delayLevel*35)),de=xt(Math.max(0,Math.round(m.noteDuration*10)-1)),ne=`${U}|${X}|${J}|${se}|${q}|${Q}|${K}|${de}|${D}|${F}|${ae}`,Ae=o.map(ve=>{const le=encodeURIComponent(ve.name),he=encodeURIComponent(ve.notes);let Ie=`${le}~${he}`;if(ve.originalKey&&ve.originalMode){const ke=x.indexOf(ve.originalKey),_e=g.indexOf(ve.originalMode);ke>=0&&_e>=0&&(Ie+=`@${xt(ke)}${xt(_e)}`)}const Ee=ve.pattern.map(ke=>ke.replace(/[xX]/gi,"0")).join("."),xe=s.map(ke=>ke.replace(/[xX]/gi,"0")).join(".");if(Ee===xe)return Ie;{const ke=ve.pattern.slice(0,16).map(_e=>_e.replace(/[xX]/gi,"0")).join(".");return`${Ie}:${ke}`}}).filter(Boolean).join("|");return`${C}_${S}_${$}_${P}_${O}_${ne}_${Ae}`}catch(C){return console.error("Failed to encode state:",C),""}},pb=(e,n,o,s,a)=>{if(console.log("Decoding state:",e),!e||!a?.length||!n.length||!o.length)return console.log("Cannot decode - missing data"),null;try{const l=e.split("_");if(l[0]!=="v7"||l.length<6)return console.log("Invalid state format - only v7 supported"),null;const f=yt(l[1]||"0"),p=n[f]||n[0],m=yt(l[2]||"0"),x=o[m]||o[0],y=(l[3]||"1.2.3.4").split(".").map(Y=>Y==="0"?"x":Y),w=(l[4]||"").split("|"),C=yt(w[0]||"60")+60,S={0:.125,1:.25,2:.5,3:1,4:2}[w[1]||"1"]||.25,B=yt(w[2]||"0"),$=yt(w[3]||"0"),P=($&2)!==0,T=($&1)!==0,A=(l[5]||"").split("|"),I={instrumentName:s[yt(A[0]||"0")]||s[0]||"electric_piano_1",cutOffPreviousNotes:(A[1]||"1")==="1",eq:{bass:yt(A[2]||"o")-24,mid:yt(A[3]||"o")-24,treble:yt(A[4]||"o")-24},octaveOffset:yt(A[5]||"3")-3,reverbLevel:yt(A[6]||"0")/35,noteDuration:(yt(A[7]||"7")+1)/10,volume:yt(A[8]||"p")/35,chorusLevel:yt(A[9]||"0")/35,delayLevel:yt(A[10]||"0")/35},R=[],M=l[6]||"";if(M){const Y=M.split("|").filter(Boolean);for(const ee of Y){const[oe,O]=ee.split(":");let V=oe,U,X;if(oe.includes("@")){const[q,Q]=oe.split("@");if(V=q,Q.length>=2){const K=yt(Q[0]),D=yt(Q[1]);U=n[K],X=o[D]}}const[J,se]=V.split("~");if(J&&se){const q=decodeURIComponent(J),Q=decodeURIComponent(se);let K;O?K=O.split(".").map(F=>F==="0"?"x":F):K=[...y];const D={name:q,notes:Q,pattern:K,originalKey:U||p,originalMode:X,originalNotes:Q};R.push(D)}else console.warn("Invalid chord format:",ee)}}return{key:p,mode:x,pattern:y,bpm:C,subdivision:S,swing:B,showPattern:P,liveMode:T,addedChords:R,pianoSettings:I}}catch(l){return console.error("Failed to decode state:",l),null}},hb=(e,n="s")=>{if(e){const o=new URL(window.location.href);o.searchParams.set(n,e),window.history.replaceState({},"",o.toString())}},mb=(e="s")=>new URL(window.location.href).searchParams.get(e),gb=(e,n,o,s,a,l,d,f,p,m,x,g,y,w,C="s")=>{const E=fb(e,n,o,s,a,l,d,f,p,m,x,g,y,w);hb(E,C)},vb=(e,n,o,s,a="s")=>{const l=mb(a);return l?pb(l,e,n,o,s):null},Lh=4,Bh=7,Nu=["C","C#","Db","D","Eb","E","F","F#","G","Gb","G#","A","Ab","A#","B"],xb=(e,n)=>{if(!e||e.length===0)return!0;const o=e[n%e.length];return o!=="x"&&o!=="X"},Fh=(e,n,o,s)=>e?s:n!==null&&o[n]?o[n].pattern:s,yb=()=>{const e=Cn(),n=Ss(),o=Bn(),s=Ro(),a=gg(),{modes:l}=db(),d=b.useRef(null),f=b.useRef(0),p=b.useRef(0),m=b.useRef(0),x=b.useRef(!1),g=b.useRef(null),y=b.useRef(!0),w=b.useRef(!1);b.useEffect(()=>{l&&!w.current&&(w.current=!0,e.setModes(l),e.chords||e.initialize())},[l]);const C=b.useMemo(()=>6e4/s.globalPatternState.bpm*s.globalPatternState.subdivision,[s.globalPatternState.bpm,s.globalPatternState.subdivision]),E=b.useCallback(O=>{if(s.globalPatternState.swing===0)return C;const V=O%2===1,U=1+s.globalPatternState.swing/100;return V?C*U:C/U},[C,s.globalPatternState.swing]),S=b.useCallback(()=>Fh(o.temporaryChord,o.activeChordIndex,o.addedChords,s.currentlyActivePattern),[o.temporaryChord,o.activeChordIndex,o.addedChords,s.currentlyActivePattern]),B=b.useCallback(()=>{e.chords?.length&&l?.length&&!y.current&&gb(e.key,e.mode,o.addedChords,s.globalPatternState.currentPattern,s.globalPatternState.bpm,s.globalPatternState.subdivision,s.globalPatternState.swing,a.showPatternSystem,a.isLiveMode,n.pianoSettings,Nu,l,n.availableInstruments,e.chords)},[e.key,e.mode,e.chords,o.addedChords,s.globalPatternState,a.showPatternSystem,a.isLiveMode,n.pianoSettings,n.availableInstruments,l]),$=b.useCallback(()=>{if(e.chords?.length){const O=vb(Nu,l||[],n.availableInstruments,e.chords);O&&(e.setKey(O.key),e.setMode(O.mode),o.clearAllChords(),O.addedChords.forEach(V=>{o.addChord(V.name,V.notes,V.pattern||["1","2","3","4"],V.originalKey||O.key,V.originalMode||O.mode)}),s.setGlobalPatternState({currentPattern:O.pattern,bpm:O.bpm,subdivision:O.subdivision,swing:O.swing}),a.setShowPatternSystem(O.showPattern),a.setIsLiveMode(O.liveMode),n.updatePianoSettings(O.pianoSettings))}},[e.chords,l,n.availableInstruments]),P=b.useCallback((O,V,U)=>{if(a.isDeleteMode&&V!==void 0){o.removeChord(V);return}const X=ga(Lh,Bh,O);V!==void 0?(o.setTemporaryChord(null),o.setActiveChordIndex(V),s.globalPatternState.isPlaying||o.playNotes(X),o.setHighlightedChordIndex(V),setTimeout(()=>o.setHighlightedChordIndex(null),150)):(U&&o.setTemporaryChord({name:U,notes:O}),s.globalPatternState.isPlaying||o.playNotes(X))},[a.isDeleteMode,s.globalPatternState.isPlaying]),T=b.useCallback((O,V,U,X)=>{o.addChord(O,V,s.currentlyActivePattern,U,X)},[s.currentlyActivePattern,e.key,e.mode]),A=b.useCallback((O,V)=>{const U={name:V.name,notes:V.notes,pattern:V.pattern||["1","2","3","4"],originalKey:V.originalKey||e.key,originalMode:V.originalMode||e.mode,originalNotes:V.originalNotes||V.notes};o.updateChord(O,U)},[e.key,e.mode]),I=b.useCallback((O,V)=>{const U=Array.from(o.addedChords),[X]=U.splice(O,1);U.splice(V,0,X),o.setAddedChords(U);const{activeChordIndex:J}=o;if(J===null)return;let se=J;J===O?se=V:O<J&&V>=J?se=J-1:O>J&&V<=J&&(se=J+1),se!==J&&o.setActiveChordIndex(se)},[o]),R=b.useCallback(()=>{o.clearAllChords(),s.setGlobalPatternState({isPlaying:!1}),a.setIsLiveMode(!1)},[]),M=b.useCallback(O=>{s.updatePattern(O),O.hasOwnProperty("isPlaying")&&O.isPlaying&&(f.current=0,p.current=Date.now(),m.current=Date.now()),O.hasOwnProperty("currentStep")&&O.currentStep===0&&(f.current=0,p.current=Date.now(),m.current=Date.now())},[]),Y=b.useCallback(()=>{const O=!s.globalPatternState.isPlaying;s.setGlobalPatternState({isPlaying:O}),O&&(f.current=0,p.current=Date.now(),m.current=Date.now())},[s.globalPatternState.isPlaying]),ee=b.useCallback(()=>{if(o.isPlayingScale){o.clearScalePlaybackTimeouts(),o.setActiveNotes([]),o.setIsPlayingScale(!1);return}if(!e.scaleNotes?.length)return;o.setIsPlayingScale(!0);const O=s.globalPatternState.isPlaying;O&&s.setGlobalPatternState({isPlaying:!1}),o.setActiveNotes([]);const U=6e4/s.globalPatternState.bpm*.8;let X=100,J=4,se=0;const q=[...e.scaleNotes];e.scaleNotes[0]?.noteName&&q.push({noteName:e.scaleNotes[0].noteName}),q.forEach(K=>{if(!K.noteName)return;const D=setTimeout(()=>{const F=Do(K.noteName);if(!F)return;let ae=Pt.fromNote(F+J);ae<=se&&(J++,ae=Pt.fromNote(F+J)),se=ae;const de=Pt.getAttributes(ae),ne=de.note.slice(0,-1),pe=parseInt(de.note.slice(-1),10);o.setActiveNotes([{note:ne,octave:pe}])},X);o.addScalePlaybackTimeout(D),X+=U});const Q=setTimeout(()=>{o.setActiveNotes([]),o.setIsPlayingScale(!1),o.clearScalePlaybackTimeouts(),O&&s.setGlobalPatternState({isPlaying:!0})},X+U);o.addScalePlaybackTimeout(Q)},[e.scaleNotes,o.isPlayingScale,s.globalPatternState.bpm,s.globalPatternState.isPlaying]),oe=b.useCallback(O=>{if(O.target instanceof HTMLInputElement)return;if(O.key.toLowerCase()==="p"){a.togglePatternSystem();return}if(O.key.toLowerCase()==="l"){a.toggleLiveMode();return}if(O.key===" "){O.preventDefault(),Y();return}const V=O.key==="0"?9:parseInt(O.key,10)-1;if(!isNaN(V)&&V>=0&&V<o.addedChords.length){const U=o.addedChords[V];U&&(o.setTemporaryChord(null),P(U.notes,V))}},[o.addedChords,P,Y]);return b.useEffect(()=>{o.activeChordIndex!==null&&o.addedChords[o.activeChordIndex]?s.setCurrentlyActivePattern([...o.addedChords[o.activeChordIndex].pattern]):s.setCurrentlyActivePattern([...s.globalPatternState.currentPattern])},[o.activeChordIndex,o.addedChords,s.globalPatternState.currentPattern]),b.useEffect(()=>{if(s.globalPatternState.isPlaying){if(!d.current){p.current=Date.now(),f.current=0,s.setGlobalPatternState({currentStep:0}),m.current=Date.now()+E(0);const O=()=>{const V=Date.now();if(V>=m.current){f.current++;const U=E(f.current);m.current=V+U,s.setGlobalPatternState({currentStep:f.current})}d.current=setTimeout(O,5)};O()}}else d.current&&(clearTimeout(d.current),d.current=null);return()=>{d.current&&(clearTimeout(d.current),d.current=null)}},[s.globalPatternState.isPlaying,E]),b.useEffect(()=>{if(s.globalPatternState.isPlaying){let O=null;if(o.temporaryChord?O=o.temporaryChord:o.activeChordIndex!==null&&o.addedChords[o.activeChordIndex]&&(O=o.addedChords[o.activeChordIndex]),O){const V=Fh(o.temporaryChord,o.activeChordIndex,o.addedChords,s.currentlyActivePattern),U=s.globalPatternState.currentStep%V.length;if(xb(V,U)){const X=ga(Lh,Bh,O.notes);o.setActiveNotes(X)}else o.setActiveNotes([])}}},[s.globalPatternState.isPlaying,s.globalPatternState.currentStep,o.temporaryChord,o.activeChordIndex,o.addedChords,s.currentlyActivePattern]),b.useEffect(()=>{e.chords?.length&&!x.current&&(x.current=!0,y.current=!0,$(),setTimeout(()=>{y.current=!1},100))},[e.chords,$]),b.useEffect(()=>(e.chords?.length&&l?.length&&!y.current&&(g.current&&clearTimeout(g.current),g.current=setTimeout(()=>{B()},100)),()=>{g.current&&clearTimeout(g.current)}),[e.key,e.mode,o.addedChords,s.globalPatternState,a.showPatternSystem,a.isLiveMode,n.pianoSettings,e.chords?.length,l?.length,B]),b.useEffect(()=>(document.addEventListener("keydown",oe),()=>document.removeEventListener("keydown",oe)),[oe]),{chords:e.chords,key:e.key,mode:e.mode,modes:e.modes,activeNotes:o.activeNotes,activeChordIndex:o.activeChordIndex,highlightedChordIndex:o.highlightedChordIndex,addedChords:o.addedChords,loadingChords:e.loadingChords,isDeleteMode:a.isDeleteMode,isPlayingScale:o.isPlayingScale,isLiveMode:a.isLiveMode,globalPatternState:s.globalPatternState,currentlyActivePattern:s.currentlyActivePattern,temporaryChord:o.temporaryChord,normalizedScaleNotes:e.normalizedScaleNotes,pianoSettings:n.pianoSettings,availableInstruments:n.availableInstruments,setKey:e.setKey,setMode:e.setMode,setIsDeleteMode:a.setIsDeleteMode,setIsLiveMode:a.setIsLiveMode,setAvailableInstruments:n.setAvailableInstruments,handleChordClick:P,addChordClick:T,updateChord:A,reorderChords:I,clearAllChords:R,updateChordPattern:o.updateChordPattern,toggleScalePlayback:ee,handlePatternChange:M,handleTogglePlayback:Y,getCurrentPattern:S,handleFetchOriginalChord:o.handleFetchOriginalChord,setPianoInstrument:n.setPianoInstrument,setCutOffPreviousNotes:n.setCutOffPreviousNotes,setEq:n.setEq,setOctaveOffset:n.setOctaveOffset,setReverbLevel:n.setReverbLevel,setNoteDuration:n.setNoteDuration,setVolume:n.setVolume,setChorusLevel:n.setChorusLevel,setDelayLevel:n.setDelayLevel}};function bb({title:e,titleId:n,...o},s){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":n},o),e?b.createElement("title",{id:n},e):null,b.createElement("path",{d:"M3.28 2.22a.75.75 0 0 0-1.06 1.06L5.44 6.5H2.75a.75.75 0 0 0 0 1.5h4.5A.75.75 0 0 0 8 7.25v-4.5a.75.75 0 0 0-1.5 0v2.69L3.28 2.22ZM13.5 2.75a.75.75 0 0 0-1.5 0v4.5c0 .414.336.75.75.75h4.5a.75.75 0 0 0 0-1.5h-2.69l3.22-3.22a.75.75 0 0 0-1.06-1.06L13.5 5.44V2.75ZM3.28 17.78l3.22-3.22v2.69a.75.75 0 0 0 1.5 0v-4.5a.75.75 0 0 0-.75-.75h-4.5a.75.75 0 0 0 0 1.5h2.69l-3.22 3.22a.75.75 0 1 0 1.06 1.06ZM13.5 14.56l3.22 3.22a.75.75 0 1 0 1.06-1.06l-3.22-3.22h2.69a.75.75 0 0 0 0-1.5h-4.5a.75.75 0 0 0-.75.75v4.5a.75.75 0 0 0 1.5 0v-2.69Z"}))}const wb=b.forwardRef(bb);function Nb({title:e,titleId:n,...o},s){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":n},o),e?b.createElement("title",{id:n},e):null,b.createElement("path",{d:"m13.28 7.78 3.22-3.22v2.69a.75.75 0 0 0 1.5 0v-4.5a.75.75 0 0 0-.75-.75h-4.5a.75.75 0 0 0 0 1.5h2.69l-3.22 3.22a.75.75 0 0 0 1.06 1.06ZM2 17.25v-4.5a.75.75 0 0 1 1.5 0v2.69l3.22-3.22a.75.75 0 0 1 1.06 1.06L4.56 16.5h2.69a.75.75 0 0 1 0 1.5h-4.5a.747.747 0 0 1-.75-.75ZM12.22 13.28l3.22 3.22h-2.69a.75.75 0 0 0 0 1.5h4.5a.747.747 0 0 0 .75-.75v-4.5a.75.75 0 0 0-1.5 0v2.69l-3.22-3.22a.75.75 0 1 0-1.06 1.06ZM3.5 4.56l3.22 3.22a.75.75 0 0 0 1.06-1.06L4.56 3.5h2.69a.75.75 0 0 0 0-1.5h-4.5a.75.75 0 0 0-.75.75v4.5a.75.75 0 0 0 1.5 0V4.56Z"}))}const Cb=b.forwardRef(Nb);function Sb({title:e,titleId:n,...o},s){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":n},o),e?b.createElement("title",{id:n},e):null,b.createElement("path",{fillRule:"evenodd",d:"M16.704 4.153a.75.75 0 0 1 .143 1.052l-8 10.5a.75.75 0 0 1-1.127.075l-4.5-4.5a.75.75 0 0 1 1.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 0 1 1.05-.143Z",clipRule:"evenodd"}))}const Eb=b.forwardRef(Sb);function Db({title:e,titleId:n,...o},s){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":n},o),e?b.createElement("title",{id:n},e):null,b.createElement("path",{fillRule:"evenodd",d:"M5.22 8.22a.75.75 0 0 1 1.06 0L10 11.94l3.72-3.72a.75.75 0 1 1 1.06 1.06l-4.25 4.25a.75.75 0 0 1-1.06 0L5.22 9.28a.75.75 0 0 1 0-1.06Z",clipRule:"evenodd"}))}const Yr=b.forwardRef(Db);function jb({title:e,titleId:n,...o},s){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":n},o),e?b.createElement("title",{id:n},e):null,b.createElement("path",{fillRule:"evenodd",d:"M11.78 5.22a.75.75 0 0 1 0 1.06L8.06 10l3.72 3.72a.75.75 0 1 1-1.06 1.06l-4.25-4.25a.75.75 0 0 1 0-1.06l4.25-4.25a.75.75 0 0 1 1.06 0Z",clipRule:"evenodd"}))}const Ab=b.forwardRef(jb);function Pb({title:e,titleId:n,...o},s){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":n},o),e?b.createElement("title",{id:n},e):null,b.createElement("path",{fillRule:"evenodd",d:"M8.22 5.22a.75.75 0 0 1 1.06 0l4.25 4.25a.75.75 0 0 1 0 1.06l-4.25 4.25a.75.75 0 0 1-1.06-1.06L11.94 10 8.22 6.28a.75.75 0 0 1 0-1.06Z",clipRule:"evenodd"}))}const vg=b.forwardRef(Pb);function Rb({title:e,titleId:n,...o},s){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":n},o),e?b.createElement("title",{id:n},e):null,b.createElement("path",{fillRule:"evenodd",d:"M9.47 6.47a.75.75 0 0 1 1.06 0l4.25 4.25a.75.75 0 1 1-1.06 1.06L10 8.06l-3.72 3.72a.75.75 0 0 1-1.06-1.06l4.25-4.25Z",clipRule:"evenodd"}))}const Rs=b.forwardRef(Rb);function kb({title:e,titleId:n,...o},s){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":n},o),e?b.createElement("title",{id:n},e):null,b.createElement("path",{d:"M13.024 9.25c.47 0 .827-.433.637-.863a4 4 0 0 0-4.094-2.364c-.468.05-.665.576-.43.984l1.08 1.868a.75.75 0 0 0 .649.375h2.158ZM7.84 7.758c-.236-.408-.79-.5-1.068-.12A3.982 3.982 0 0 0 6 10c0 .884.287 1.7.772 2.363.278.38.832.287 1.068-.12l1.078-1.868a.75.75 0 0 0 0-.75L7.839 7.758ZM9.138 12.993c-.235.408-.039.934.43.984a4 4 0 0 0 4.094-2.364c.19-.43-.168-.863-.638-.863h-2.158a.75.75 0 0 0-.65.375l-1.078 1.868Z"}),b.createElement("path",{fillRule:"evenodd",d:"m14.13 4.347.644-1.117a.75.75 0 0 0-1.299-.75l-.644 1.116a6.954 6.954 0 0 0-2.081-.556V1.75a.75.75 0 0 0-1.5 0v1.29a6.954 6.954 0 0 0-2.081.556L6.525 2.48a.75.75 0 1 0-1.3.75l.645 1.117A7.04 7.04 0 0 0 4.347 5.87L3.23 5.225a.75.75 0 1 0-.75 1.3l1.116.644A6.954 6.954 0 0 0 3.04 9.25H1.75a.75.75 0 0 0 0 1.5h1.29c.078.733.27 1.433.556 2.081l-1.116.645a.75.75 0 1 0 .75 1.298l1.117-.644a7.04 7.04 0 0 0 1.523 1.523l-.645 1.117a.75.75 0 1 0 1.3.75l.644-1.116a6.954 6.954 0 0 0 2.081.556v1.29a.75.75 0 0 0 1.5 0v-1.29a6.954 6.954 0 0 0 2.081-.556l.645 1.116a.75.75 0 0 0 1.299-.75l-.645-1.117a7.042 7.042 0 0 0 1.523-1.523l1.117.644a.75.75 0 0 0 .75-1.298l-1.116-.645a6.954 6.954 0 0 0 .556-2.081h1.29a.75.75 0 0 0 0-1.5h-1.29a6.954 6.954 0 0 0-.556-2.081l1.116-.644a.75.75 0 0 0-.75-1.3l-1.117.645a7.04 7.04 0 0 0-1.524-1.523ZM10 4.5a5.475 5.475 0 0 0-2.781.754A5.527 5.527 0 0 0 5.22 7.277 5.475 5.475 0 0 0 4.5 10a5.475 5.475 0 0 0 .752 2.777 5.527 5.527 0 0 0 2.028 2.004c.802.458 1.73.719 2.72.719a5.474 5.474 0 0 0 2.78-.753 5.527 5.527 0 0 0 2.001-2.027c.458-.802.719-1.73.719-2.72a5.475 5.475 0 0 0-.753-2.78 5.528 5.528 0 0 0-2.028-2.002A5.475 5.475 0 0 0 10 4.5Z",clipRule:"evenodd"}))}const Cu=b.forwardRef(kb);function Ib({title:e,titleId:n,...o},s){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":n},o),e?b.createElement("title",{id:n},e):null,b.createElement("path",{d:"M10 3a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM10 8.5a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM11.5 15.5a1.5 1.5 0 1 0-3 0 1.5 1.5 0 0 0 3 0Z"}))}const Tb=b.forwardRef(Ib);function Ob({title:e,titleId:n,...o},s){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":n},o),e?b.createElement("title",{id:n},e):null,b.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 1 1-16 0 8 8 0 0 1 16 0Zm-7-4a1 1 0 1 1-2 0 1 1 0 0 1 2 0ZM9 9a.75.75 0 0 0 0 1.5h.253a.25.25 0 0 1 .244.304l-.459 2.066A1.75 1.75 0 0 0 10.747 15H11a.75.75 0 0 0 0-1.5h-.253a.25.25 0 0 1-.244-.304l.459-2.066A1.75 1.75 0 0 0 9.253 9H9Z",clipRule:"evenodd"}))}const Mb=b.forwardRef(Ob);function _b({title:e,titleId:n,...o},s){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":n},o),e?b.createElement("title",{id:n},e):null,b.createElement("path",{fillRule:"evenodd",d:"M10 1a4.5 4.5 0 0 0-4.5 4.5V9H5a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2v-6a2 2 0 0 0-2-2h-.5V5.5A4.5 4.5 0 0 0 10 1Zm3 8V5.5a3 3 0 1 0-6 0V9h6Z",clipRule:"evenodd"}))}const $h=b.forwardRef(_b);function Lb({title:e,titleId:n,...o},s){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":n},o),e?b.createElement("title",{id:n},e):null,b.createElement("path",{fillRule:"evenodd",d:"M9 3.5a5.5 5.5 0 1 0 0 11 5.5 5.5 0 0 0 0-11ZM2 9a7 7 0 1 1 12.452 4.391l3.328 3.329a.75.75 0 1 1-1.06 1.06l-3.329-3.328A7 7 0 0 1 2 9Z",clipRule:"evenodd"}))}const Bb=b.forwardRef(Lb);function Fb({title:e,titleId:n,...o},s){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":n},o),e?b.createElement("title",{id:n},e):null,b.createElement("path",{fillRule:"evenodd",d:"M4 10a.75.75 0 0 1 .75-.75h10.5a.75.75 0 0 1 0 1.5H4.75A.75.75 0 0 1 4 10Z",clipRule:"evenodd"}))}const zh=b.forwardRef(Fb);function $b({title:e,titleId:n,...o},s){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":n},o),e?b.createElement("title",{id:n},e):null,b.createElement("path",{d:"M5.75 3a.75.75 0 0 0-.75.75v12.5c0 .414.336.75.75.75h1.5a.75.75 0 0 0 .75-.75V3.75A.75.75 0 0 0 7.25 3h-1.5ZM12.75 3a.75.75 0 0 0-.75.75v12.5c0 .414.336.75.75.75h1.5a.75.75 0 0 0 .75-.75V3.75a.75.75 0 0 0-.75-.75h-1.5Z"}))}const ks=b.forwardRef($b);function zb({title:e,titleId:n,...o},s){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":n},o),e?b.createElement("title",{id:n},e):null,b.createElement("path",{fillRule:"evenodd",d:"M2 10a8 8 0 1 1 16 0 8 8 0 0 1-16 0Zm6.39-2.908a.75.75 0 0 1 .766.027l3.5 2.25a.75.75 0 0 1 0 1.262l-3.5 2.25A.75.75 0 0 1 8 12.25v-4.5a.75.75 0 0 1 .39-.658Z",clipRule:"evenodd"}))}const Is=b.forwardRef(zb);function Vb({title:e,titleId:n,...o},s){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":n},o),e?b.createElement("title",{id:n},e):null,b.createElement("path",{d:"M6.3 2.84A1.5 1.5 0 0 0 4 4.11v11.78a1.5 1.5 0 0 0 2.3 1.27l9.344-5.891a1.5 1.5 0 0 0 0-2.538L6.3 2.841Z"}))}const xg=b.forwardRef(Vb);function Gb({title:e,titleId:n,...o},s){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":n},o),e?b.createElement("title",{id:n},e):null,b.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 1 0 0-16 8 8 0 0 0 0 16Zm.75-11.25a.75.75 0 0 0-1.5 0v2.5h-2.5a.75.75 0 0 0 0 1.5h2.5v2.5a.75.75 0 0 0 1.5 0v-2.5h2.5a.75.75 0 0 0 0-1.5h-2.5v-2.5Z",clipRule:"evenodd"}))}const Ub=b.forwardRef(Gb);function Hb({title:e,titleId:n,...o},s){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":n},o),e?b.createElement("title",{id:n},e):null,b.createElement("path",{d:"M10.75 4.75a.75.75 0 0 0-1.5 0v4.5h-4.5a.75.75 0 0 0 0 1.5h4.5v4.5a.75.75 0 0 0 1.5 0v-4.5h4.5a.75.75 0 0 0 0-1.5h-4.5v-4.5Z"}))}const Vh=b.forwardRef(Hb);function Wb({title:e,titleId:n,...o},s){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":n},o),e?b.createElement("title",{id:n},e):null,b.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 1 1-16 0 8 8 0 0 1 16 0ZM8.94 6.94a.75.75 0 1 1-1.061-1.061 3 3 0 1 1 2.871 5.026v.345a.75.75 0 0 1-1.5 0v-.5c0-.72.57-1.172 1.081-1.287A1.5 1.5 0 1 0 8.94 6.94ZM10 15a1 1 0 1 0 0-2 1 1 0 0 0 0 2Z",clipRule:"evenodd"}))}const yg=b.forwardRef(Wb);function qb({title:e,titleId:n,...o},s){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":n},o),e?b.createElement("title",{id:n},e):null,b.createElement("path",{fillRule:"evenodd",d:"M8.75 1A2.75 2.75 0 0 0 6 3.75v.443c-.795.077-1.584.176-2.365.298a.75.75 0 1 0 .23 1.482l.149-.022.841 10.518A2.75 2.75 0 0 0 7.596 19h4.807a2.75 2.75 0 0 0 2.742-2.53l.841-10.52.149.023a.75.75 0 0 0 .23-1.482A41.03 41.03 0 0 0 14 4.193V3.75A2.75 2.75 0 0 0 11.25 1h-2.5ZM10 4c.84 0 1.673.025 2.5.075V3.75c0-.69-.56-1.25-1.25-1.25h-2.5c-.69 0-1.25.56-1.25 1.25v.325C8.327 4.025 9.16 4 10 4ZM8.58 7.72a.75.75 0 0 0-1.5.06l.3 7.5a.75.75 0 1 0 1.5-.06l-.3-7.5Zm4.34.06a.75.75 0 1 0-1.5-.06l-.3 7.5a.75.75 0 1 0 1.5.06l.3-7.5Z",clipRule:"evenodd"}))}const bg=b.forwardRef(qb);function Kb({title:e,titleId:n,...o},s){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":n},o),e?b.createElement("title",{id:n},e):null,b.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 1 0 0-16 8 8 0 0 0 0 16ZM8.28 7.22a.75.75 0 0 0-1.06 1.06L8.94 10l-1.72 1.72a.75.75 0 1 0 1.06 1.06L10 11.06l1.72 1.72a.75.75 0 1 0 1.06-1.06L11.06 10l1.72-1.72a.75.75 0 0 0-1.06-1.06L10 8.94 8.28 7.22Z",clipRule:"evenodd"}))}const Su=b.forwardRef(Kb);function Yb({title:e,titleId:n,...o},s){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":n},o),e?b.createElement("title",{id:n},e):null,b.createElement("path",{d:"M6.28 5.22a.75.75 0 0 0-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 1 0 1.06 1.06L10 11.06l3.72 3.72a.75.75 0 1 0 1.06-1.06L11.06 10l3.72-3.72a.75.75 0 0 0-1.06-1.06L10 8.94 6.28 5.22Z"}))}const Qb=b.forwardRef(Yb),wg=b.memo(({chord:e,index:n,isExpanded:o,isPlaying:s,isAdding:a,onChordPlay:l,onChordAdd:d,onToggleExpansion:f})=>{const p=b.useCallback(()=>{l(e.chordNoteNames,n,e.chordName)},[l,e.chordNoteNames,e.chordName,n]),m=b.useCallback(g=>{g.stopPropagation(),d(n,e.chordName,e.chordNoteNames,e.keyName,e.modeId)},[d,n,e.chordName,e.chordNoteNames,e.keyName,e.modeId]),x=b.useCallback(g=>{g.stopPropagation(),f(n)},[f,n]);return u.jsxs("div",{className:`bg-[#3d434f] rounded-lg border border-gray-600 hover:border-blue-500 hover:bg-[#444b59] transition-all duration-200 overflow-hidden cursor-pointer group relative ${s?"chord-playing z-50":""} ${a?"chord-adding z-40":""}`,onClick:p,children:[u.jsx("div",{className:"p-3 sm:p-4",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3 flex-1 min-w-0",children:[u.jsx(Is,{className:`h-5 w-5 sm:h-6 sm:w-6 transition-colors flex-shrink-0 ${s?"text-blue-400":"text-gray-400 group-hover:text-blue-300"}`}),u.jsx("h3",{className:`text-base sm:text-lg font-bold transition-colors truncate ${s?"text-blue-200":"text-white group-hover:text-blue-200"}`,children:e.chordName})]}),u.jsxs("div",{className:"flex items-center space-x-1 flex-shrink-0 ml-2",children:[u.jsx("button",{onClick:m,className:`p-1 sm:p-2 rounded-md transition-colors ${a?"bg-green-600 text-white":"hover:bg-green-600 text-gray-400 hover:text-white"}`,title:"Add to sequence",children:u.jsx(Ub,{className:"h-5 w-5 sm:h-4 sm:w-4"})}),u.jsx("button",{onClick:x,className:"p-1.5 sm:p-2 rounded-md hover:bg-[#565b6f] text-gray-400 hover:text-white transition-colors",title:o?"Hide notes":"Show notes",children:o?u.jsx(Rs,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"}):u.jsx(Yr,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"})})]})]})}),o&&u.jsx("div",{className:"px-3 pb-3 pt-0 sm:px-4 sm:pb-4",children:u.jsxs("div",{className:"bg-gray-800x bg-[#363c46]  rounded-md p-2 sm:p-3 border-1 border-gray-600",children:[u.jsx("div",{className:"text-xs font-medium text-gray-400 uppercase tracking-wide mb-1",children:"Notes"}),u.jsx("div",{className:"text-sm text-gray-200 font-mono",children:e.chordNoteNames})]})})]})});wg.displayName="ChordCard";const Xb=({onChordClick:e,addChordClick:n})=>{const[o,s]=b.useState("All"),[a,l]=b.useState(""),[d,f]=b.useState(new Set),[p,m]=b.useState(new Set),[x,g]=b.useState(new Set),[y,w]=b.useState(1),C=Cn(),{chords:E,loadingChords:S,allDistinctChords:B,loadingAllChords:$,showAllChords:P,toggleShowAllChords:T,key:A,mode:I}=C,R=P?B:E,M=P?$:S;b.useEffect(()=>{const D=()=>{const F=window.innerWidth;F>=1280?w(3):F>=640?w(2):w(1)};return D(),window.addEventListener("resize",D),()=>window.removeEventListener("resize",D)},[]);const Y=b.useCallback(D=>Math.floor(D/y),[y]),ee=b.useMemo(()=>R?R.filter(D=>D.chordName&&D.chordNoteNames&&D.chordNoteName&&D.chordName.trim()!==""&&D.chordNoteNames.trim()!==""&&D.chordNoteName.trim()!==""):[],[R]),oe=b.useMemo(()=>{const D=new Set;return ee.forEach(F=>{F.chordNoteName&&D.add(F.chordNoteName)}),Array.from(D).sort()},[ee]),O=b.useMemo(()=>{const D={};return ee.forEach(F=>{F.chordNoteName&&(D[F.chordNoteName]=(D[F.chordNoteName]||0)+1)}),D},[ee]),V=b.useMemo(()=>{let D=ee;if(o!=="All"&&(D=D.filter(F=>F.chordNoteName===o)),a.trim()){const F=a.toLowerCase().trim();D=D.filter(ae=>ae.chordName?.toLowerCase().includes(F)||ae.chordNoteNames?.toLowerCase().includes(F))}return D.sort((F,ae)=>{const de=F.chordName?.toLowerCase()||"",ne=ae.chordName?.toLowerCase()||"";return de.localeCompare(ne)})},[ee,o,a]);b.useEffect(()=>{f(new Set)},[y,V]);const U=b.useCallback((D,F,ae)=>{m(ne=>new Set(ne).add(F)),e(D,void 0,ae);const de=setTimeout(()=>{m(ne=>{const pe=new Set(ne);return pe.delete(F),pe})},800);return()=>clearTimeout(de)},[e]),X=b.useCallback((D,F,ae,de,ne)=>{g(ve=>new Set(ve).add(D));const pe=C.modes[ne-1];n?.(F,ae,de,pe);const Ae=setTimeout(()=>{g(ve=>{const le=new Set(ve);return le.delete(D),le})},600);return()=>clearTimeout(Ae)},[n,C.modes]),J=b.useCallback(D=>{const F=Y(D);f(ae=>{const de=new Set(ae);return de.has(F)?de.delete(F):de.add(F),de})},[Y]),se=b.useCallback(()=>{T(),s("All"),l(""),f(new Set)},[T]),q=b.useCallback(()=>{l(""),s("All")},[]),Q=b.useCallback(D=>{l(D.target.value)},[]),K=b.useMemo(()=>u.jsxs("div",{className:"flex space-x-2 overflow-x-auto pb-2 scrollbar-thin scrollbar-thumb-gray-600 scrollbar-track-transparent px-1",children:[u.jsxs("button",{onClick:()=>s("All"),className:`flex-shrink-0 px-3 py-2 rounded-full text-sm font-medium transition-colors ${o==="All"?"bg-blue-600 text-white":"bg-[#444b59] text-gray-300 hover:bg-[#525a6b] hover:text-white"}`,children:["All (",ee.length,")"]}),oe.map(D=>u.jsxs("button",{onClick:()=>s(D),className:`flex-shrink-0 px-3 py-2 rounded-full text-sm font-medium transition-colors ${o===D?"bg-blue-600 text-white":"bg-[#444b59] text-gray-300 hover:bg-[#525a6b] hover:text-white"}`,children:[D," (",O[D]||0,")"]},D))]}),[o,ee.length,oe,O]);return u.jsxs("div",{className:"w-full max-w-7xl mx-auto px-2",children:[u.jsx("div",{className:"bg-[#3d434f]  border border-gray-600 rounded-lg overflow-hidden mb-4",children:u.jsxs("div",{className:"px-4 py-4",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h2",{className:"text-sm font-bold text-slate-300 uppercase tracking-wider",children:"Chord Explorer"}),u.jsxs("div",{className:"text-xs text-gray-400",children:[V.length," of ",ee.length," chords"]})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex items-center justify-between p-3 bg-[#444b59]x bg-[#363c46]  rounded-lg border border-gray-600",children:[u.jsxs("div",{className:"flex flex-col text-left",children:[u.jsx("span",{className:"text-xs uppercase font-medium text-gray-400 text-left",children:"Show All Chords"}),u.jsx("span",{className:"text-xs text-gray-400",children:P?B?`${B?.length} chords`:"Loading...":`Showing chords in ${A} ${I}`})]}),u.jsx("button",{onClick:se,disabled:M,className:`relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:ring-offset-gray-800 ${P?"bg-blue-600":"bg-gray-600"} ${M?"opacity-50 cursor-not-allowed":""}`,role:"switch","aria-checked":P,"aria-label":"Toggle between current mode chords and all distinct chords",children:u.jsx("span",{"aria-hidden":"true",className:`pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ${P?"translate-x-5":"translate-x-0"}`})})]}),u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"absolute left-3 inset-y-0 flex items-center pointer-events-none",children:u.jsx(Bb,{className:"w-4 h-4 text-gray-400"})}),u.jsx("input",{type:"text",placeholder:"Search chords...",value:a,onChange:Q,className:"w-full pl-10 pr-4 py-2 bg-[#444b59] border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:border-blue-500 focus:outline-none transition-colors !text-sm"})]})]}),u.jsx("div",{className:"lg:hidden mt-4",children:K})]})}),u.jsxs("div",{className:"flex flex-col lg:flex-row gap-3 lg:gap-4",children:[u.jsx("div",{className:"hidden lg:block lg:w-48 flex-shrink-0",children:u.jsxs("div",{className:"bg-[#3d434f] rounded-lg h-fit",children:[u.jsx("div",{className:"px-4 py-3 border-b border-gray-600",children:u.jsx("h3",{className:"text-sm font-medium text-gray-200 uppercase tracking-wide",children:"Filter by Root"})}),u.jsxs("div",{className:"p-2",children:[u.jsx("button",{onClick:()=>s("All"),className:`w-full px-3 py-2 text-left transition-colors rounded-md border-l-4 ${o==="All"?"bg-[#4a5262] border-l-blue-500 text-white":"hover:bg-[#444b59] border-l-transparent text-gray-300 hover:text-white"}`,children:u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("span",{className:"text-sm font-medium",children:"All Notes"}),u.jsx("span",{className:"text-xs text-gray-400 bg-gray-700 px-2 py-1 rounded",children:ee.length})]})}),oe.map(D=>u.jsx("button",{onClick:()=>s(D),className:`w-full px-3 py-2 text-left transition-colors rounded-md border-l-4 mt-1 ${o===D?"bg-[#4a5262] border-l-blue-500 text-white":"hover:bg-[#444b59] border-l-transparent text-gray-300 hover:text-white"}`,children:u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("span",{className:"text-sm font-medium",children:D}),u.jsx("span",{className:"text-xs text-gray-400 bg-gray-700 px-2 py-1 rounded",children:O[D]||0})]})},D))]})]})}),u.jsxs("div",{className:"flex-1",children:[M?u.jsx("div",{className:"flex justify-center items-center h-64",children:u.jsxs("div",{className:"flex flex-col items-center space-y-3",children:[u.jsx("div",{className:"inline-block h-8 w-8 animate-spin rounded-full border-4 border-solid border-current border-r-transparent text-blue-500"}),u.jsx("span",{className:"text-sm text-gray-400",children:P?"Loading all distinct chords...":"Loading chords..."})]})}):V.length?u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 gap-2 sm:gap-3",children:V.map((D,F)=>u.jsx(wg,{chord:D,index:F,isExpanded:d.has(Y(F)),isPlaying:p.has(F),isAdding:x.has(F),onChordPlay:U,onChordAdd:X,onToggleExpansion:J},`chord-${D.chordName}-${F}`))}):u.jsx("div",{className:"flex justify-center items-center h-64 bg-[#3d434f] rounded-lg",children:u.jsxs("div",{className:"text-center space-y-3",children:[u.jsx("div",{className:"text-gray-500 text-4xl",children:"🎵"}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("div",{className:"text-sm text-gray-400",children:a.trim()?`No chords found matching "${a}"`:o==="All"?P?"No distinct chords available":"No chords available":`No chords found for root note "${o}"`}),(a.trim()||o!=="All")&&u.jsx("button",{onClick:q,className:"text-sm text-blue-400 hover:text-blue-300 underline transition-colors",children:"Clear filters"})]})]})}),V.length>0&&u.jsx("div",{className:"mt-4 text-center",children:u.jsxs("div",{className:"text-xs text-gray-400",children:["Tap any chord to play •",u.jsx("span",{className:"text-gray-300 mx-1",children:"+"})," to add to sequence •",u.jsx(Yr,{className:"inline h-3 w-3 mx-1"})," to show notes for entire row",P&&u.jsx("span",{className:"block mt-1 text-blue-400",children:"Currently showing all distinct chords across all modes and keys (sorted alphabetically)"})]})})]})]})]})},Id=class Id extends b.Component{constructor(){super(...arguments),this.state={instrumentList:null},this.loadInstrumentList=()=>{fetch(`${this.props.hostname}/${this.props.soundfont}/names.json`).then(n=>n.json()).then(n=>{this.setState({instrumentList:n})})}}componentDidMount(){this.loadInstrumentList()}render(){return this.props.render(this.state.instrumentList)}};Id.defaultProps={soundfont:"MusyngKite"};let va=Id;function Zb({title:e,titleId:n,...o},s){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":n},o),e?b.createElement("title",{id:n},e):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"}),b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const Jb=b.forwardRef(Zb);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e1=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),t1=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(n,o,s)=>s?s.toUpperCase():o.toLowerCase()),Gh=e=>{const n=t1(e);return n.charAt(0).toUpperCase()+n.slice(1)},Ng=(...e)=>e.filter((n,o,s)=>!!n&&n.trim()!==""&&s.indexOf(n)===o).join(" ").trim(),n1=e=>{for(const n in e)if(n.startsWith("aria-")||n==="role"||n==="title")return!0};/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var r1={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o1=b.forwardRef(({color:e="currentColor",size:n=24,strokeWidth:o=2,absoluteStrokeWidth:s,className:a="",children:l,iconNode:d,...f},p)=>b.createElement("svg",{ref:p,...r1,width:n,height:n,stroke:e,strokeWidth:s?Number(o)*24/Number(n):o,className:Ng("lucide",a),...!l&&!n1(f)&&{"aria-hidden":"true"},...f},[...d.map(([m,x])=>b.createElement(m,x)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cg=(e,n)=>{const o=b.forwardRef(({className:s,...a},l)=>b.createElement(o1,{ref:l,iconNode:n,className:Ng(`lucide-${e1(Gh(e))}`,`lucide-${e}`,s),...a}));return o.displayName=Gh(e),o};/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s1=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],i1=Cg("chevron-down",s1);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a1=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],l1=Cg("search",a1);var er=ug();const c1=Pr(er),Nn=({value:e,onChange:n,options:o,className:s="",menuClassName:a="",showSearch:l=!1,buttonClassName:d=""})=>{const[f,p]=b.useState(!1),[m,x]=b.useState(!1),[g,y]=b.useState(""),w=b.useRef(null),C=b.useRef(null),E=b.useRef(null),S=b.useRef(null),[B,$]=b.useState({top:0,left:0,width:0,maxHeight:320}),P=o.filter(R=>g?.length?R.toLowerCase().includes(g.toLowerCase()):!0),T=()=>{if(w.current){const R=w.current.getBoundingClientRect(),M=window.innerHeight-R.bottom,Y=Math.min(M-10,320);$({top:R.bottom+window.scrollY,left:R.left+window.scrollX,width:R.width,maxHeight:Y}),x(!0)}};b.useEffect(()=>{const R=Y=>{w.current&&!w.current.contains(Y.target)&&C.current&&!C.current.contains(Y.target)&&(p(!1),y(""),x(!1))},M=Y=>{Y.key==="Escape"&&(p(!1),y(""),x(!1))};return f&&(document.addEventListener("mousedown",R),document.addEventListener("keydown",M)),()=>{document.removeEventListener("mousedown",R),document.removeEventListener("keydown",M)}},[f]),b.useEffect(()=>{f&&m&&S.current&&E.current&&S.current.scrollIntoView({block:"nearest",behavior:"instant"})},[f,m]);const A=()=>{f?(p(!1),x(!1)):(T(),requestAnimationFrame(()=>{p(!0)}))},I=R=>{n(R),p(!1),y(""),x(!1)};return u.jsxs("div",{className:`relative inline-block text-left text-lg ${s}`,children:[u.jsxs("button",{ref:w,onClick:A,className:`
          inline-flex w-full justify-between items-center gap-x-2 rounded-lg
          bg-[#3d434f] border
          px-4 py-2.5 text-sm font-medium
          text-slate-200 
          ${f?"border-blue-500 bg-[#4a5262]":"border-gray-600 hover:bg-[#4a5262] hover:border-gray-500"}
          focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:ring-offset-2 focus:ring-offset-[#2a2f38]
          transition-all duration-200 ease-out
          ${d.includes("h-")?"":"h-10"}
          ${d}
        `,children:[u.jsx("span",{className:"truncate text-left flex-1 font-medium tracking-wide",children:e}),u.jsx(i1,{className:`
            h-4 w-4 text-slate-400 flex-shrink-0
            transition-all duration-200
            ${f?"rotate-180 text-slate-200":"group-hover:text-slate-200"}
          `,"aria-hidden":"true"})]}),f&&m&&er.createPortal(u.jsx("div",{ref:C,style:{position:"absolute",top:`${B.top+4}px`,left:`${B.left}px`,minWidth:`${B.width}px`,maxWidth:`${B.width}px`,zIndex:9999},className:"origin-top dropdown-enter",children:u.jsx("div",{style:{maxHeight:`${B.maxHeight}px`,minWidth:`${B.width}px`},className:"dropdown-menu rounded-lg shadow-2xl ring-1 ring-black/30 overflow-hidden",children:u.jsxs("div",{className:"bg-[#3d434f] border border-gray-600 rounded-lg overflow-hidden shadow-2xl",children:[l&&u.jsx("div",{className:"p-3 border-b border-gray-600 bg-[#444b59]",children:u.jsxs("div",{className:"relative",children:[u.jsx(l1,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-slate-400"}),u.jsx("input",{type:"text",className:`w-full text-slate-200 pl-9 pr-3 py-2 text-sm font-normal 
                        bg-[#2a2f38] border border-gray-600 rounded-md 
                        focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500 
                        placeholder-slate-500 
                        transition-all duration-200
                        hover:bg-[#333844] hover:border-gray-500`,placeholder:"Search options...",value:g,onChange:R=>y(R.target.value),autoFocus:!0})]})}),u.jsx("div",{ref:E,className:`py-1.5 overflow-y-auto ${a}`,style:{maxHeight:l?`${B.maxHeight-60}px`:`${B.maxHeight}px`},children:P.length>0?P.map((R,M)=>u.jsxs("button",{ref:e===R?S:null,onClick:()=>I(R),className:`
                        relative block w-full px-4 py-2.5 text-left text-sm font-medium 
                        transition-all duration-200
                        text-slate-300 hover:text-slate-100
                        hover:bg-[#4a5262]
                        border-l-2 border-l-transparent hover:border-l-blue-400
                      `,children:[u.jsx("span",{className:"relative truncate block tracking-wide",children:R}),e===R&&u.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-1.5 h-1.5 bg-blue-400 rounded-full"})]},M)):u.jsx("div",{className:"px-4 py-3 text-sm text-slate-500 italic text-center",children:"No options found"})})]})})}),document.body)]})},u1=e=>u.jsx("label",{className:bt("mr-[1em] flex-1 text-right text-sm font-medium text-slate-400",e.className),children:e.value}),d1=({isOpen:e,cutOffPreviousNotes:n,setCutOffPreviousNotes:o,eq:s,setEq:a,octaveOffset:l,setOctaveOffset:d,reverbLevel:f,setReverbLevel:p,noteDuration:m,setNoteDuration:x,volume:g,setVolume:y,chorusLevel:w,setChorusLevel:C,delayLevel:E,setDelayLevel:S})=>{const B=$=>{const{name:P,value:T}=$.target;a({...s,[P]:parseFloat(T)})};return u.jsx("div",{className:`transition-all duration-300 ease-in-out overflow-hidden px-2 ${e?"max-h-[600px] opacity-100 mt-6":"max-h-0 opacity-0"}`,children:u.jsxs("div",{className:"bg-[#3d434f] border border-gray-600 rounded-lg overflow-hidden w-full max-w-7xl mx-auto",children:[u.jsx("div",{className:"px-4 py-3 border-b border-gray-600",children:u.jsx("h3",{className:"text-sm font-medium text-slate-200 uppercase tracking-wider",children:"Piano Settings"})}),u.jsx("div",{className:"p-6 bg-[#444b59]",children:u.jsxs("div",{className:"grid grid-cols-2 gap-x-8",children:[u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsxs("label",{className:"block text-xs font-medium text-slate-200 mb-2 uppercase tracking-wide",children:["Volume",u.jsxs("span",{className:"text-xs text-slate-400 ml-2 normal-case",children:["(",Math.round(g*100),"%)"]})]}),u.jsx("div",{className:"relative",children:u.jsx("input",{type:"range",min:"0",max:"1.0",step:"0.05",value:g,onChange:$=>y(parseFloat($.target.value)),className:"w-full h-1.5 bg-[#3d434f] rounded appearance-none cursor-pointer slider-thumb"})})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-medium text-slate-200 mb-2 uppercase tracking-wide",children:"Octave Shift"}),u.jsxs("div",{className:"flex items-center justify-between bg-[#3d434f] border border-gray-600 rounded-md p-1.5",children:[u.jsx("button",{onClick:()=>d(Math.max(-3,l-1)),className:"w-6 h-6 flex items-center justify-center text-slate-300 hover:text-slate-200 hover:bg-[#4a5262] rounded transition-colors",disabled:l<=-3,children:"−"}),u.jsx("span",{className:"font-mono !text-xs text-slate-200 px-2",children:l===0?"Normal":`${l>0?"+":""}${l} octave${Math.abs(l)>1?"s":""}`}),u.jsx("button",{onClick:()=>d(Math.min(3,l+1)),className:"w-6 h-6 flex items-center justify-center text-slate-300 hover:text-slate-200 hover:bg-[#4a5262] rounded transition-colors",disabled:l>=3,children:"+"})]})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"block text-xs font-medium text-slate-200 mb-2 uppercase tracking-wide",children:["Reverb",u.jsxs("span",{className:"text-xs text-slate-400 ml-2 normal-case",children:["(",Math.round(f*100),"%)"]})]}),u.jsx("div",{className:"relative",children:u.jsx("input",{type:"range",min:"0",max:"1.0",step:"0.05",value:f,onChange:$=>p(parseFloat($.target.value)),className:"w-full h-1.5 bg-[#3d434f] rounded appearance-none cursor-pointer slider-thumb"})})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"block text-xs font-medium text-slate-200 mb-2 uppercase tracking-wide",children:["Note Duration",u.jsxs("span",{className:"text-xs text-slate-400 ml-2 normal-case",children:["(",Math.round(m*100),"%)"]})]}),u.jsx("div",{className:"relative",children:u.jsx("input",{type:"range",min:"0.1",max:"1.0",step:"0.05",value:m,onChange:$=>x(parseFloat($.target.value)),className:"w-full h-1.5 bg-[#3d434f] rounded appearance-none cursor-pointer slider-thumb"})})]}),u.jsx("div",{children:u.jsxs("label",{className:"flex items-center cursor-pointer",children:[u.jsx("input",{type:"checkbox",className:"w-3.5 h-3.5 text-blue-600 bg-[#3d434f] border-gray-600 rounded focus:ring-blue-500 focus:ring-1",checked:n,onChange:$=>o($.target.checked)}),u.jsx("span",{className:"ml-2 text-xs text-slate-300 uppercase tracking-wide",children:"Cut off previous notes"})]})})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-medium text-slate-200 mb-2 uppercase tracking-wide",children:"Equalizer"}),u.jsx("div",{className:"space-y-3",children:[{label:"Bass",key:"bass"},{label:"Mid",key:"mid"},{label:"Treble",key:"treble"}].map(({label:$,key:P})=>u.jsxs("div",{children:[u.jsxs("div",{className:"flex justify-between items-center mb-1",children:[u.jsx("span",{className:"text-xs text-slate-400 uppercase tracking-wide",children:$}),u.jsxs("span",{className:"text-xs text-slate-400 font-mono",children:[s[P]>0?"+":"",s[P].toFixed(1),"dB"]})]}),u.jsx("input",{type:"range",name:P,min:"-24",max:"24",step:"0.5",value:s[P],onChange:B,className:"w-full h-1.5 bg-[#3d434f] rounded appearance-none cursor-pointer slider-thumb"})]},P))})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsxs("label",{className:"block text-xs font-medium text-slate-200 mb-2 uppercase tracking-wide",children:["Chorus",u.jsxs("span",{className:"text-xs text-slate-400 ml-2 normal-case",children:["(",Math.round(w*100),"%)"]})]}),u.jsx("div",{className:"relative",children:u.jsx("input",{type:"range",min:"0",max:"1.0",step:"0.05",value:w,onChange:$=>C(parseFloat($.target.value)),className:"w-full h-1.5 bg-[#3d434f] rounded appearance-none cursor-pointer slider-thumb"})})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"block text-xs font-medium text-slate-200 mb-2 uppercase tracking-wide",children:["Delay",u.jsxs("span",{className:"text-xs text-slate-400 ml-2 normal-case",children:["(",Math.round(E*100),"%)"]})]}),u.jsx("div",{className:"relative",children:u.jsx("input",{type:"range",min:"0",max:"1.0",step:"0.05",value:E,onChange:$=>S(parseFloat($.target.value)),className:"w-full h-1.5 bg-[#3d434f] rounded appearance-none cursor-pointer slider-thumb"})})]})]})]})]})})]})})},Sn=({children:e,onClick:n,className:o="",variant:s="primary",size:a="md",disabled:l=!1,active:d=!1,"aria-label":f,"aria-expanded":p,type:m="button",title:x})=>{const g=`
    inline-flex justify-center items-center gap-x-2 rounded-sm
    font-medium border
    focus:outline-none
    transition-all duration-200 ease-out
    disabled:opacity-50 disabled:cursor-not-allowed
    relative overflow-hidden
  `,y=`
    focus:ring-2 focus:ring-offset-2 focus:ring-offset-[#2a2f38]
  `,w={sm:"px-3 py-1.5 text-xs h-8",md:"px-4 py-2.5 text-sm h-10",lg:"px-6 py-3 text-base h-12",icon:"w-8 h-8 flex items-center justify-center p-0"},C={primary:`
      ${d?"bg-[#525a6b] border-gray-500 text-slate-100":"bg-[#3d434f] border-gray-600 text-slate-200 hover:bg-[#4a5262] hover:border-gray-500"}
      focus:ring-blue-500/50
    `,secondary:`
      ${d?"bg-[#525a6b] border-gray-500 text-slate-100":"bg-[#4a5262] border-gray-500 text-slate-200 hover:bg-[#525a6b] hover:border-gray-400"}
      focus:ring-gray-400/50
    `,success:`
      ${d?"bg-green-600 border-green-500 text-green-100":"bg-green-700 border-green-600 text-green-100 hover:bg-green-600 hover:border-green-500"}
      focus:ring-green-500/50
    `,danger:`
      ${d?"bg-red-600 border-red-500 text-red-100":"bg-red-700 border-red-600 text-red-100 hover:bg-red-600 hover:border-red-500"}
      focus:ring-red-500/50
    `,icon:`
      ${d?"bg-[#525a6b] border-gray-500 text-slate-200":"bg-[#3d434f] border-gray-600 text-slate-400 hover:bg-[#4a5262] hover:border-gray-500 hover:text-slate-200"}
      focus:ring-gray-500/50
    `,"play-stop":`
      ${d?"bg-red-700 hover:bg-red-600 border-red-600 text-white":"bg-green-600 hover:bg-green-500 border-green-500 text-white"}
      font-medium uppercase tracking-wide text-sm w-[7em] px-4 py-2
      focus:ring-green-500/50
    `};return u.jsx("button",{type:m,onClick:n,disabled:l,"aria-label":f,"aria-expanded":p,title:x,className:bt(g,y,w[a],C[s],o),children:u.jsx("span",{className:bt("flex items-center gap-x-2 tracking-wide","relative"),children:e})})};class f1 extends b.Component{constructor(n){super(n),this.handleKeyDown=o=>{const{noteRange:s,keyboardShortcutOffset:a}=this.props.config;if(!s)return;const l=s.last-s.first+1,d=0,f=l-this.props.keyboardShortcuts.length;if(o.key==="ArrowLeft"){const p=a-1;p>=d&&this.props.setConfig({keyboardShortcutOffset:p})}else if(o.key==="ArrowRight"){const p=a+1;p<=f&&this.props.setConfig({keyboardShortcutOffset:p})}},this.onChangeFirstNote=o=>{this.props.setConfig({noteRange:{first:parseInt(o.target.value,10),last:this.props.config.noteRange.last}})},this.onChangeLastNote=o=>{this.props.setConfig({noteRange:{first:this.props.config.noteRange.first,last:parseInt(o.target.value,10)}})},this.onChangeInstrument=o=>{const s=o.replaceAll(" ","_");this.props.setConfig({instrumentName:s}),this.props.onInstrumentChange(s)},this.state={settingsOpen:!1}}componentDidMount(){window.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){window.removeEventListener("keydown",this.handleKeyDown)}render(){const{noteRange:n,instrumentName:o}=this.props.config;return u.jsxs("div",{children:[u.jsx("div",{className:"flex justify-center",children:u.jsxs("div",{className:"inline-flex items-center gap-2",children:[u.jsx("div",{className:"inline-block",children:u.jsx(u1,{value:"voice"})}),u.jsx("div",{className:"inline-block",children:u.jsx(Nn,{className:"form-control h-10",value:this.props.config.instrumentName.replaceAll("_"," ")||o.replaceAll("_"," "),onChange:this.onChangeInstrument,options:this.props.instrumentList.map(s=>s.replaceAll("_"," ")),showSearch:!0})}),u.jsx("div",{className:"inline-block",children:u.jsx(Sn,{onClick:()=>this.setState({settingsOpen:!this.state.settingsOpen}),active:this.state.settingsOpen,"aria-label":"Sound Settings","aria-expanded":this.state.settingsOpen,size:"sm",className:"h-10 ",children:u.jsx(Jb,{className:"h-5 w-5 text-slate-400 group-hover:text-slate-300 transition-colors duration-200 flex-shrink-0"})})})]})}),u.jsx("div",{className:"flex justify-center",children:u.jsx(d1,{isOpen:this.state.settingsOpen,cutOffPreviousNotes:this.props.cutOffPreviousNotes,setCutOffPreviousNotes:this.props.setCutOffPreviousNotes,eq:this.props.eq,setEq:this.props.setEq,octaveOffset:this.props.octaveOffset,setOctaveOffset:this.props.setOctaveOffset,reverbLevel:this.props.reverbLevel,setReverbLevel:this.props.setReverbLevel,noteDuration:this.props.noteDuration,setNoteDuration:this.props.setNoteDuration,volume:this.props.volume,setVolume:this.props.setVolume,chorusLevel:this.props.chorusLevel,setChorusLevel:this.props.setChorusLevel,delayLevel:this.props.delayLevel,setDelayLevel:this.props.setDelayLevel})})]})}}var $c={exports:{}},zc={exports:{}},Vc,Uh;function p1(){if(Uh)return Vc;Uh=1;function e(o){return o>64&&o<91?o-65:o>96&&o<123?o-71:o>47&&o<58?o+4:o===43?62:o===47?63:0}function n(o,s){for(var a=o.replace(/[^A-Za-z0-9\+\/]/g,""),l=a.length,d=s?Math.ceil((l*3+1>>2)/s)*s:l*3+1>>2,f=new Uint8Array(d),p,m,x=0,g=0,y=0;y<l;y++)if(m=y&3,x|=e(a.charCodeAt(y))<<18-6*m,m===3||l-y===1){for(p=0;p<3&&g<d;p++,g++)f[g]=x>>>(16>>>p&24)&255;x=0}return f}return Vc={decode:n},Vc}var Gc,Hh;function h1(){return Hh||(Hh=1,Gc=function(e,n){return new Promise(function(o,s){var a=new XMLHttpRequest;n&&(a.responseType=n),a.open("GET",e),a.onload=function(){a.status===200?o(a.response):s(Error(a.statusText))},a.onerror=function(){s(Error("Network Error"))},a.send()})}),Gc}var Wh;function m1(){return Wh||(Wh=1,function(e){var n=p1(),o=h1();function s(R){return function(M){return typeof M=="string"&&R.test(M)}}function a(R,M){return typeof R=="string"?R+M:typeof R=="function"?R(M):M}function l(R,M,Y,ee){var oe=d(M)?f:p(M)?m:x(M)?g:y(M)?w:C(M)?E:S(M)?B:$(M)?P:T(M)?A:null,O=Y||{};return oe?oe(R,M,O):ee?Promise.resolve(ee):Promise.reject("Source not valid ("+M+")")}l.fetch=o;function d(R){return R instanceof ArrayBuffer}function f(R,M,Y){return new Promise(function(ee,oe){R.decodeAudioData(M,function(O){ee(O)},function(){oe("Can't decode audio data ("+M.slice(0,30)+"...)")})})}var p=s(/\.(mp3|wav|ogg)(\?.*)?$/i);function m(R,M,Y){var ee=a(Y.from,M);return l(R,l.fetch(ee,"arraybuffer"),Y)}function x(R){return R&&typeof R.then=="function"}function g(R,M,Y){return M.then(function(ee){return l(R,ee,Y)})}var y=Array.isArray;function w(R,M,Y){return Promise.all(M.map(function(ee){return l(R,ee,Y,ee)}))}function C(R){return R&&typeof R=="object"}function E(R,M,Y){var ee={},oe=Object.keys(M).map(function(O){if(Y.only&&Y.only.indexOf(O)===-1)return null;var V=M[O];return l(R,V,Y,V).then(function(U){ee[O]=U})});return Promise.all(oe).then(function(){return ee})}var S=s(/\.json(\?.*)?$/i);function B(R,M,Y){var ee=a(Y.from,M);return l(R,l.fetch(ee,"text").then(JSON.parse),Y)}var $=s(/^data:audio/);function P(R,M,Y){var ee=M.indexOf(",");return l(R,n.decode(M.slice(ee+1)).buffer,Y)}var T=s(/\.js(\?.*)?$/i);function A(R,M,Y){var ee=a(Y.from,M);return l(R,l.fetch(ee,"text").then(I),Y)}function I(R){var M=R.indexOf("MIDI.Soundfont.");if(M<0)throw Error("Invalid MIDI.js Soundfont format");M=R.indexOf("=",M)+2;var Y=R.lastIndexOf(",");return JSON.parse(R.slice(M,Y)+"}")}e.exports&&(e.exports=l),typeof window<"u"&&(window.loadAudio=l)}(zc)),zc.exports}var Uc={exports:{}},Hc,qh;function g1(){if(qh)return Hc;qh=1,Hc=e;function e(f){var p=f.createGain(),m=p._voltage=s(f),x=a(m),g=a(m),y=a(m);return p._startAmount=a(g),p._endAmount=a(y),p._multiplier=a(x),p._multiplier.connect(p),p._startAmount.connect(p),p._endAmount.connect(p),p.value=x.gain,p.startValue=g.gain,p.endValue=y.gain,p.startValue.value=0,p.endValue.value=0,Object.defineProperties(p,n),p}var n={attack:{value:0,writable:!0},decay:{value:0,writable:!0},sustain:{value:1,writable:!0},release:{value:0,writable:!0},getReleaseDuration:{value:function(){return this.release}},start:{value:function(f){var p=this._multiplier.gain,m=this._startAmount.gain,x=this._endAmount.gain;this._voltage.start(f),this._decayFrom=this._decayFrom=f+this.attack,this._startedAt=f;var g=this.sustain;p.cancelScheduledValues(f),m.cancelScheduledValues(f),x.cancelScheduledValues(f),x.setValueAtTime(0,f),this.attack?(p.setValueAtTime(0,f),p.linearRampToValueAtTime(1,f+this.attack),m.setValueAtTime(1,f),m.linearRampToValueAtTime(0,f+this.attack)):(p.setValueAtTime(1,f),m.setValueAtTime(0,f)),this.decay&&p.setTargetAtTime(g,this._decayFrom,l(this.decay))}},stop:{value:function(f,p){p&&(f=f-this.release);var m=f+this.release;if(this.release){var x=this._multiplier.gain,g=this._startAmount.gain,y=this._endAmount.gain;x.cancelScheduledValues(f),g.cancelScheduledValues(f),y.cancelScheduledValues(f);var w=l(this.release);if(this.attack&&f<this._decayFrom){var C=d(0,1,this._startedAt,this._decayFrom,f);x.linearRampToValueAtTime(C,f),g.linearRampToValueAtTime(1-C,f),g.setTargetAtTime(0,f,w)}y.setTargetAtTime(1,f,w),x.setTargetAtTime(0,f,w)}return this._voltage.stop(m),m}},onended:{get:function(){return this._voltage.onended},set:function(f){this._voltage.onended=f}}},o=new Float32Array([1,1]);function s(f){var p=f.createBufferSource(),m=f.createBuffer(1,2,f.sampleRate);return m.getChannelData(0).set(o),p.buffer=m,p.loop=!0,p}function a(f){var p=f.context.createGain();return f.connect(p),p}function l(f){return Math.log(f+1)/Math.log(100)}function d(f,p,m,x,g){var y=p-f,w=x-m,C=g-m,E=C/w,S=f+E*y;return S<=f&&(S=f),S>=p&&(S=p),S}return Hc}var Wc,Kh;function v1(){if(Kh)return Wc;Kh=1;var e=g1(),n={},o={gain:1,attack:.01,decay:.1,sustain:.9,release:.3,loop:!1,cents:0,loopStart:0,loopEnd:0};function s(p,m,x){var g=!1,y=0,w={},C=p.createGain();C.gain.value=1;var E=Object.assign({},o,x),S={context:p,out:C,opts:E};return m instanceof AudioBuffer?S.buffer=m:S.buffers=m,S.start=function(P,T,A){if(S.buffer&&P!==null)return S.start(null,P,T);var I=P?S.buffers[P]:S.buffer;if(I){if(!g){console.warn("SamplePlayer not connected to any node.");return}}else{console.warn("Buffer "+P+" not found.");return}var R=A||n;T=Math.max(p.currentTime,T||0),S.emit("start",T,P,R);var M=$(P,I,R);return M.id=B(P,M),M.env.start(T),M.source.start(T),S.emit("started",T,M.id,M),R.duration&&M.stop(T+R.duration),M},S.play=function(P,T,A){return S.start(P,T,A)},S.stop=function(P,T){var A;return T=T||Object.keys(w),T.map(function(I){return A=w[I],A?(A.stop(P),A.id):null})},S.connect=function(P){return g=!0,C.connect(P),S},S.emit=function(P,T,A,I){S.onevent&&S.onevent(P,T,A,I);var R=S["on"+P];R&&R(T,A,I)},S;function B(P,T){return T.id=y++,w[T.id]=T,T.source.onended=function(){var A=p.currentTime;T.source.disconnect(),T.env.disconnect(),T.disconnect(),S.emit("ended",A,T.id,T)},T.id}function $(P,T,A){var I=p.createGain();return I.gain.value=0,I.connect(C),I.env=d(p,A,E),I.env.connect(I.gain),I.source=p.createBufferSource(),I.source.buffer=T,I.source.connect(I),I.source.loop=A.loop||E.loop,I.source.playbackRate.value=f(A.cents||E.cents),I.source.loopStart=A.loopStart||E.loopStart,I.source.loopEnd=A.loopEnd||E.loopEnd,I.stop=function(R){var M=R||p.currentTime;S.emit("stop",M,P);var Y=I.env.stop(M);I.source.stop(Y)},I}}function a(p){return typeof p=="number"}var l=["attack","decay","sustain","release"];function d(p,m,x){var g=e(p),y=m.adsr||x.adsr;return l.forEach(function(w,C){y?g[w]=y[C]:g[w]=m[w]||x[w]}),g.value.value=a(m.gain)?m.gain:a(x.gain)?x.gain:1,g}function f(p){return p?Math.pow(2,p/1200):1}return Wc=s,Wc}var qc,Yh;function x1(){if(Yh)return qc;Yh=1,qc=function(n){return n.on=function(o,s){if(arguments.length===1&&typeof o=="function")return n.on("event",o);var a="on"+o,l=n[a];return n[a]=l?e(l,s):s,n},n};function e(n,o){return function(s,a,l,d){n(s,a,l,d),o(s,a,l,d)}}return qc}var Kc,Qh;function y1(){if(Qh)return Kc;Qh=1;var e=/^([a-gA-G])(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)\s*$/;function n(){return e}var o=[0,2,4,5,7,9,11];function s(f,p,m){if(typeof f!="string")return null;var x=e.exec(f);if(!x||!p&&x[4])return null;var g={letter:x[1].toUpperCase(),acc:x[2].replace(/x/g,"##")};return g.pc=g.letter+g.acc,g.step=(g.letter.charCodeAt(0)+3)%7,g.alt=g.acc[0]==="b"?-g.acc.length:g.acc.length,g.chroma=o[g.step]+g.alt,x[3]&&(g.oct=+x[3],g.midi=g.chroma+12*(g.oct+1),g.freq=a(g.midi,m)),p&&(g.tonicOf=x[4]),g}function a(f,p){return Math.pow(2,(f-69)/12)*(p||440)}var l={parse:s,regex:n,midiToFreq:a},d=["letter","acc","pc","step","alt","chroma","oct","midi","freq"];return d.forEach(function(f){l[f]=function(p){var m=s(p);return m&&typeof m[f]<"u"?m[f]:null}}),Kc=l,Kc}var Yc,Xh;function b1(){if(Xh)return Yc;Xh=1;var e=y1(),n=function(a){return a!==null&&a!==[]&&a>=0&&a<129},o=function(a){return n(a)?+a:e.midi(a)};Yc=function(a){if(a.buffers){var l=a.opts.map,d=typeof l=="function"?l:o,f=function(m){return m?d(m)||m:null};a.buffers=s(a.buffers,f);var p=a.start;a.start=function(m,x,g){var y=f(m),w=y%1;return w&&(y=Math.floor(y),g=Object.assign(g||{},{cents:Math.floor(w*100)})),p(y,x,g)}}return a};function s(a,l){return Object.keys(a).reduce(function(d,f){return d[l(f)]=a[f],d},{})}return Yc}var Qc,Zh;function w1(){if(Zh)return Qc;Zh=1;var e=Array.isArray,n=function(s){return s&&typeof s=="object"},o={};return Qc=function(s){return s.schedule=function(a,l){var d=s.context.currentTime,f=a<d?d:a;s.emit("schedule",f,l);var p,m,x,g;return l.map(function(y){if(y)e(y)?(p=y[0],m=y[1]):(p=y.time,m=y);else return null;return n(m)?(x=m.name||m.key||m.note||m.midi||null,g=m):(x=m,g=o),s.start(x,f+(p||0),g)})},s},Qc}function sa(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Xc={exports:{}},Jh;function N1(){return Jh||(Jh=1,function(e,n){(function(o){e.exports=o()})(function(){return function o(s,a,l){function d(m,x){if(!a[m]){if(!s[m]){var g=typeof sa=="function"&&sa;if(!x&&g)return g(m,!0);if(f)return f(m,!0);var y=new Error("Cannot find module '"+m+"'");throw y.code="MODULE_NOT_FOUND",y}var w=a[m]={exports:{}};s[m][0].call(w.exports,function(C){var E=s[m][1][C];return d(E||C)},w,w.exports,o,s,a,l)}return a[m].exports}for(var f=typeof sa=="function"&&sa,p=0;p<l.length;p++)d(l[p]);return d}({1:[function(o,s,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(l){function d(f){if(this._event=f,this._data=f.data,this.receivedTime=f.receivedTime,this._data&&this._data.length<2){console.warn("Illegal MIDI message of length",this._data.length);return}switch(this._messageCode=f.data[0]&240,this.channel=f.data[0]&15,this._messageCode){case 128:this.messageType="noteoff",this.key=f.data[1]&127,this.velocity=f.data[2]&127;break;case 144:this.messageType="noteon",this.key=f.data[1]&127,this.velocity=f.data[2]&127;break;case 160:this.messageType="keypressure",this.key=f.data[1]&127,this.pressure=f.data[2]&127;break;case 176:this.messageType="controlchange",this.controllerNumber=f.data[1]&127,this.controllerValue=f.data[2]&127,this.controllerNumber===120&&this.controllerValue===0?this.channelModeMessage="allsoundoff":this.controllerNumber===121?this.channelModeMessage="resetallcontrollers":this.controllerNumber===122?this.controllerValue===0?this.channelModeMessage="localcontroloff":this.channelModeMessage="localcontrolon":this.controllerNumber===123&&this.controllerValue===0?this.channelModeMessage="allnotesoff":this.controllerNumber===124&&this.controllerValue===0?this.channelModeMessage="omnimodeoff":this.controllerNumber===125&&this.controllerValue===0?this.channelModeMessage="omnimodeon":this.controllerNumber===126?this.channelModeMessage="monomodeon":this.controllerNumber===127&&(this.channelModeMessage="polymodeon");break;case 192:this.messageType="programchange",this.program=f.data[1];break;case 208:this.messageType="channelpressure",this.pressure=f.data[1]&127;break;case 224:this.messageType="pitchbendchange";var p=f.data[2]&127,m=f.data[1]&127;this.pitchBend=(p<<8)+m;break}}return new d(l)},s.exports=a.default},{}]},{},[1])(1)})}(Xc)),Xc.exports}var Zc,em;function C1(){if(em)return Zc;em=1;var e=N1();return Zc=function(n){return n.listenToMidi=function(o,s){var a={},l=s||{},d=l.gain||function(f){return f/127};return o.onmidimessage=function(f){var p=f.messageType?f:e(f);if(p.messageType==="noteon"&&p.velocity===0&&(p.messageType="noteoff"),!(l.channel&&p.channel!==l.channel))switch(p.messageType){case"noteon":a[p.key]=n.play(p.key,0,{gain:d(p.velocity)});break;case"noteoff":a[p.key]&&(a[p.key].stop(),delete a[p.key]);break}},n},n},Zc}var tm;function S1(){return tm||(tm=1,function(e){var n=v1(),o=x1(),s=b1(),a=w1(),l=C1();function d(f,p,m){return l(a(s(o(n(f,p,m)))))}e.exports&&(e.exports=d),typeof window<"u"&&(window.SamplePlayer=d)}(Uc)),Uc.exports}function nm(e,n){return Array(n+1).join(e)}function Zu(e){return typeof e=="number"}function E1(e){return typeof e=="string"}function D1(e){return typeof e<"u"}function Sg(e,n){return Math.pow(2,(e-69)/12)*(n||440)}var Eg=/^([a-gA-G])(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)\s*$/;function j1(){return Eg}var A1=[0,2,4,5,7,9,11];function tr(e,n,o){if(typeof e!="string")return null;var s=Eg.exec(e);if(!s||!n&&s[4])return null;var a={letter:s[1].toUpperCase(),acc:s[2].replace(/x/g,"##")};a.pc=a.letter+a.acc,a.step=(a.letter.charCodeAt(0)+3)%7,a.alt=a.acc[0]==="b"?-a.acc.length:a.acc.length;var l=A1[a.step]+a.alt;return a.chroma=l<0?12+l:l%12,s[3]&&(a.oct=+s[3],a.midi=l+12*(a.oct+1),a.freq=Sg(a.midi,o)),n&&(a.tonicOf=s[4]),a}var P1="CDEFGAB";function R1(e){return Zu(e)?e<0?nm("b",-e):nm("#",e):""}function k1(e){return Zu(e)?""+e:""}function Dg(e,n,o){return e===null||typeof e>"u"?null:e.step?Dg(e.step,e.alt,e.oct):e<0||e>6?null:P1.charAt(e)+R1(n)+k1(o)}function jg(e){if((Zu(e)||E1(e))&&e>=0&&e<128)return+e;var n=tr(e);return n&&D1(n.midi)?n.midi:null}function I1(e,n){var o=jg(e);return o===null?null:Sg(o,n)}function T1(e){return(tr(e)||{}).letter}function O1(e){return(tr(e)||{}).acc}function M1(e){return(tr(e)||{}).pc}function _1(e){return(tr(e)||{}).step}function L1(e){return(tr(e)||{}).alt}function B1(e){return(tr(e)||{}).chroma}function F1(e){return(tr(e)||{}).oct}const $1=Object.freeze(Object.defineProperty({__proto__:null,acc:O1,alt:L1,build:Dg,chroma:B1,freq:I1,letter:T1,midi:jg,oct:F1,parse:tr,pc:M1,regex:j1,step:_1},Symbol.toStringTag,{value:"Module"})),z1=ny($1);var Jc,rm;function V1(){if(rm)return Jc;rm=1;var e=z1;function n(a,l){if(console.warn("new Soundfont() is deprected"),console.log("Please use Soundfont.instrument() instead of new Soundfont().instrument()"),!(this instanceof n))return new n(a);this.nameToUrl=l||n.nameToUrl,this.ctx=a,this.instruments={},this.promises=[]}n.prototype.onready=function(a){console.warn("deprecated API"),console.log("Please use Promise.all(Soundfont.instrument(), Soundfont.instrument()).then() instead of new Soundfont().onready()"),Promise.all(this.promises).then(a)},n.prototype.instrument=function(a,l){console.warn("new Soundfont().instrument() is deprecated."),console.log("Please use Soundfont.instrument() instead.");var d=this.ctx;if(a=a||"default",a in this.instruments)return this.instruments[a];var f={name:a,play:s(d,l)};if(this.instruments[a]=f,a!=="default"){var p=n.instrument(d,a,l).then(function(m){return f.play=m.play,f});this.promises.push(p),f.onready=function(m){console.warn("onready is deprecated. Use Soundfont.instrument().then()"),p.then(m)}}else f.onready=function(m){console.warn("onready is deprecated. Use Soundfont.instrument().then()"),m()};return f};function o(a,l,d){return console.warn("Soundfont.loadBuffers is deprecate."),console.log("Use Soundfont.instrument(..) and get buffers properties from the result."),n.instrument(a,l,d).then(function(f){return f.buffers})}n.loadBuffers=o;function s(a,l){return l=l||{},function(d,f,p,m){console.warn("The oscillator player is deprecated."),console.log("Starting with version 0.9.0 you will have to wait until the soundfont is loaded to play sounds.");var x=d>0&&d<129?+d:e.midi(d),g=x?e.midiToFreq(x,440):null;if(g){p=p||.2,m=m||{};var y=m.destination||l.destination||a.destination,w=m.vcoType||l.vcoType||"sine",C=m.gain||l.gain||.4,E=a.createOscillator();E.type=w,E.frequency.value=g;var S=a.createGain();return S.gain.value=C,E.connect(S),S.connect(y),E.start(f),p>0&&E.stop(f+p),E}}}return n.noteToMidi=e.midi,Jc=n,Jc}var om;function G1(){return om||(om=1,function(e){var n=m1(),o=S1();function s(f,p,m){if(arguments.length===1)return function(C,E){return s(f,C,E)};var x=m||{},g=x.isSoundfontURL||a,y=x.nameToUrl||l,w=g(p)?p:y(p,x.soundfont,x.format);return n(f,w,{only:x.only||x.notes}).then(function(C){var E=o(f,C,x).connect(x.destination?x.destination:f.destination);return E.url=w,E.name=p,E})}function a(f){return/\.js(\?.*)?$/i.test(f)}function l(f,p,m){return m=m==="ogg"?m:"mp3",p=p==="FluidR3_GM"?p:"MusyngKite","https://gleitz.github.io/midi-js-soundfonts/"+p+"/"+f+"-"+m+".js"}var d=V1();d.instrument=s,d.nameToUrl=l,e.exports&&(e.exports=d),typeof window<"u"&&(window.Soundfont=d)}($c)),$c.exports}var U1=G1();const H1=Pr(U1),Td=class Td extends we.Component{constructor(n){super(n),this.setupAudioChain=()=>{const{audioContext:o,eq:s,reverbLevel:a,volume:l,chorusLevel:d,delayLevel:f}=this.props;this.effectsChain=o.createGain(),this.masterVolumeNode=o.createGain(),this.masterVolumeNode.gain.value=l,this.bassNode=o.createBiquadFilter(),this.midNode=o.createBiquadFilter(),this.trebleNode=o.createBiquadFilter(),this.bassNode.type="lowshelf",this.bassNode.frequency.value=320,this.bassNode.gain.value=s.bass,this.midNode.type="peaking",this.midNode.frequency.value=1e3,this.midNode.Q.value=1,this.midNode.gain.value=s.mid,this.trebleNode.type="highshelf",this.trebleNode.frequency.value=3200,this.trebleNode.gain.value=s.treble,this.chorusDelayNode=o.createDelay(.05),this.chorusDelayNode.delayTime.value=.015,this.chorusLFO=o.createOscillator(),this.chorusLFO.frequency.value=1.5,this.chorusLFO.type="sine",this.chorusLFOGain=o.createGain(),this.chorusLFOGain.gain.value=.005,this.chorusDryGain=o.createGain(),this.chorusWetGain=o.createGain(),this.chorusMixNode=o.createGain(),this.chorusLFO.connect(this.chorusLFOGain),this.chorusLFOGain.connect(this.chorusDelayNode.delayTime),this.chorusLFO.start(),this.delayNode=o.createDelay(1),this.delayNode.delayTime.value=.3,this.delayFeedbackGain=o.createGain(),this.delayFeedbackGain.gain.value=.4,this.delayDryGain=o.createGain(),this.delayWetGain=o.createGain(),this.delayMixNode=o.createGain(),this.delayNode.connect(this.delayFeedbackGain),this.delayFeedbackGain.connect(this.delayNode),this.convolverNode=o.createConvolver(),this.wetGainNode=o.createGain(),this.dryGainNode=o.createGain(),this.convolverNode.buffer=this.generateImpulseResponse(o),this.effectsChain.connect(this.masterVolumeNode),this.masterVolumeNode.connect(this.bassNode),this.bassNode.connect(this.midNode),this.midNode.connect(this.trebleNode),this.trebleNode.connect(this.chorusDryGain),this.trebleNode.connect(this.chorusDelayNode),this.chorusDelayNode.connect(this.chorusWetGain),this.chorusDryGain.connect(this.chorusMixNode),this.chorusWetGain.connect(this.chorusMixNode),this.chorusMixNode.connect(this.delayDryGain),this.chorusMixNode.connect(this.delayNode),this.delayNode.connect(this.delayWetGain),this.delayDryGain.connect(this.delayMixNode),this.delayWetGain.connect(this.delayMixNode),this.delayMixNode.connect(this.dryGainNode),this.delayMixNode.connect(this.convolverNode),this.convolverNode.connect(this.wetGainNode),this.dryGainNode.connect(o.destination),this.wetGainNode.connect(o.destination),this.updateReverbMix(a),this.updateChorusMix(d),this.updateDelayMix(f)},this.generateImpulseResponse=o=>{const s=o.sampleRate,a=3,l=1.5,d=o.createBuffer(2,a*s,s);for(let f=0;f<2;f++){const p=d.getChannelData(f);for(let m=0;m<d.length;m++){const x=m/d.length,g=Math.sin(x*Math.PI*20)*Math.exp(-x*3),y=(Math.random()*2-1)*Math.pow(1-x,l),w=Math.sin(x*Math.PI*100)*.1*Math.exp(-x*8);p[m]=(g*.3+y*.6+w*.1)*1.5,f===1&&(p[m]*=1+Math.sin(x*Math.PI*7)*.2)}}return d},this.updateReverbMix=o=>{const s=this.props.audioContext.currentTime,a=Math.pow(o,.7)*1.2,l=1-o*.6;this.dryGainNode.gain.setValueAtTime(l,s),this.wetGainNode.gain.setValueAtTime(a,s)},this.updateChorusMix=o=>{const s=this.props.audioContext.currentTime,a=o*.8,l=1-o*.3;this.chorusDryGain.gain.setValueAtTime(l,s),this.chorusWetGain.gain.setValueAtTime(a,s)},this.updateDelayMix=o=>{const s=this.props.audioContext.currentTime,a=o*.6,l=1-o*.2;this.delayDryGain.gain.setValueAtTime(l,s),this.delayWetGain.gain.setValueAtTime(a,s)},this.updateVolume=o=>{const s=this.props.audioContext.currentTime;this.masterVolumeNode.gain.setValueAtTime(o,s)},this.loadInstrument=o=>{this.setState({instrument:null}),H1.instrument(this.props.audioContext,o,{format:this.props.format,soundfont:this.props.soundfont,nameToUrl:(s,a,l)=>`${this.props.hostname}/${a}/${s}-${l}.js`,destination:this.effectsChain}).then(s=>{this.setState({instrument:s}),this.props.onLoad&&this.props.onLoad({playNote:this.playNote,stopNote:this.stopNote,stopAllNotes:this.stopAllNotes})})},this.playNote=o=>{this.resumeAudio().then(()=>{if(!this.state.instrument)return;const s=this.state.instrument.play(o.toString());this.setState(a=>({activeAudioNodes:{...a.activeAudioNodes,[o]:s}}))})},this.stopNote=o=>{this.resumeAudio().then(()=>{const s=this.state.activeAudioNodes[o];s&&(s.stop(),this.setState(a=>{const l={...a.activeAudioNodes};return delete l[o],{activeAudioNodes:l}}))})},this.resumeAudio=()=>this.props.audioContext.state==="suspended"?this.props.audioContext.resume():Promise.resolve(),this.stopAllNotes=()=>{this.resumeAudio().then(()=>{Object.values(this.state.activeAudioNodes).forEach(o=>{o&&o.stop()}),this.setState({activeAudioNodes:{}})})},this.state={activeAudioNodes:{},instrument:null},this.setupAudioChain()}componentDidMount(){this.loadInstrument(this.props.instrumentName)}componentDidUpdate(n){if(n.instrumentName!==this.props.instrumentName&&this.loadInstrument(this.props.instrumentName),JSON.stringify(n.eq)!==JSON.stringify(this.props.eq)){const o=this.props.audioContext.currentTime;this.bassNode.gain.setValueAtTime(this.props.eq.bass,o),this.midNode.gain.setValueAtTime(this.props.eq.mid,o),this.trebleNode.gain.setValueAtTime(this.props.eq.treble,o)}n.reverbLevel!==this.props.reverbLevel&&this.updateReverbMix(this.props.reverbLevel),n.volume!==this.props.volume&&this.updateVolume(this.props.volume),n.chorusLevel!==this.props.chorusLevel&&this.updateChorusMix(this.props.chorusLevel),n.delayLevel!==this.props.delayLevel&&this.updateDelayMix(this.props.delayLevel)}render(){return this.props.render?this.props.render({isLoading:!this.state.instrument,playNote:this.playNote,stopNote:this.stopNote,stopAllNotes:this.stopAllNotes}):null}};Td.defaultProps={format:"mp3",soundfont:"MusyngKite",instrumentName:"acoustic_grand_piano",eq:{bass:0,mid:0,treble:0},reverbLevel:0,volume:.8,chorusLevel:0,delayLevel:0};let Eu=Td;const sm=typeof window<"u"?new(window.AudioContext||window.webkitAudioContext):null,W1=4,q1=7,K1=({hideConfigControls:e=!1})=>{const n=le=>{if(!le||le.length===0)return"C";const he=le.charAt(0).toUpperCase(),Ie=le.slice(1);let xe={C:0,D:2,E:4,F:5,G:7,A:9,B:11}[he];if(xe===void 0)return"C";const ke=(Ie.match(/#/g)||[]).length,_e=(Ie.match(/b/g)||[]).length;return xe+=ke-_e,xe=(xe%12+12)%12,["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"][xe]},o=Cn(),s=Ss(),a=Bn(),l=Ro(),{activeNotes:d,activeChordIndex:f,addedChords:p}=a,{normalizedScaleNotes:m}=o,{currentlyActivePattern:x,globalPatternState:g}=l,{pianoSettings:y,availableInstruments:w,setPianoInstrument:C,setCutOffPreviousNotes:E,setEq:S,setOctaveOffset:B,setReverbLevel:$,setNoteDuration:P,setVolume:T,setChorusLevel:A,setDelayLevel:I,setAvailableInstruments:R}=s,M="https://d1pzp51pvbm36p.cloudfront.net",Y=b.useRef(null),[ee,oe]=b.useState([]),O=b.useRef(-1),V=b.useRef(null),U=b.useRef(null),[X,J]=b.useState(500),se=b.useMemo(()=>{const le=X;return le<400?Math.max(320,le-40):le<768?Math.min(600,le-60):le<1200?Math.min(800,le-80):Math.min(1e3,le-100)},[X]);b.useEffect(()=>{const le=()=>{U.current&&J(U.current.offsetWidth)};le();const he=new ResizeObserver(()=>{le()});U.current&&he.observe(U.current);const Ie=()=>{le()};return window.addEventListener("resize",Ie),()=>{he.disconnect(),window.removeEventListener("resize",Ie)}},[]);const{firstNote:q,lastNote:Q,keyboardShortcuts:K,midiOffset:D}=b.useMemo(()=>{const le="c",he=Pt.fromNote(`${le}${W1}`),Ie=Pt.fromNote(`${le}${q1}`),Ee=y.octaveOffset*12;return{firstNote:he,lastNote:Ie,midiOffset:Ee,keyboardShortcuts:Rh.create({firstNote:he,lastNote:Ie,keyboardConfig:Rh.HOME_ROW})}},[y.octaveOffset]),[F,ae]=b.useState({instrumentName:y.instrumentName});b.useEffect(()=>{ae(le=>({...le,instrumentName:y.instrumentName}))},[y.instrumentName]),b.useEffect(()=>{if(V.current&&(clearTimeout(V.current),V.current=null),!g.isPlaying&&d.length>0){const le=d.map(({note:he,octave:Ie=4})=>Pt.fromNote(`${n(he)}${Ie}`));oe(le),V.current=setTimeout(()=>{g.isPlaying||oe([])},2e3)}else!g.isPlaying&&d.length===0&&oe([]);return()=>{V.current&&(clearTimeout(V.current),V.current=null)}},[d,g.isPlaying]);const de=b.useCallback(()=>f!==null&&p[f]?p[f].pattern:x,[f,p,x]),ne=b.useCallback((le,he)=>{if(le==="x"||le==="X")return null;const Ie=le.includes("+"),Ee=le.includes("-"),xe=parseInt(le.replace(/[+-]/g,""))-1;return xe>=0&&xe<he?{noteIndex:xe,octaveUp:Ie,octaveDown:Ee}:null},[]),pe=b.useCallback(()=>6e4/g.bpm*g.subdivision,[g.bpm,g.subdivision]);b.useEffect(()=>{const le=de();if(g.isPlaying&&d.length>0&&le?.length>0&&g.currentStep!==O.current){O.current=g.currentStep;const he=g.currentStep%le.length,Ie=le[he],Ee=ne(Ie,d.length);if(Ee){const{noteIndex:xe,octaveUp:ke,octaveDown:_e}=Ee,{note:rt,octave:tn=4}=d[xe];let Nt=tn;ke&&(Nt+=1),_e&&(Nt-=1),Nt=Math.max(1,Math.min(8,Nt));const pn=Pt.fromNote(`${n(rt)}${Nt}`);!y.cutOffPreviousNotes&&Y.current&&Y.current(),oe([pn]);const ot=pe(),lt=Math.min(ot*y.noteDuration,ot-50);setTimeout(()=>{oe([])},lt)}else oe([])}else g.isPlaying||O.current!==-1&&(oe([]),O.current=-1)},[g.currentStep,g.isPlaying,d,y.cutOffPreviousNotes,y.noteDuration,pe,de,ne]);const Ae=le=>he=>{!y.cutOffPreviousNotes&&Y.current&&Y.current(),le(he+D)},ve=le=>he=>{le(he+D)};return sm?u.jsx(Eu,{instrumentName:y.instrumentName,audioContext:sm,hostname:M,eq:y.eq,reverbLevel:y.reverbLevel,volume:y.volume,chorusLevel:y.chorusLevel,delayLevel:y.delayLevel,render:({isLoading:le,playNote:he,stopNote:Ie,stopAllNotes:Ee})=>(Y.current=Ee,u.jsxs(u.Fragment,{children:[u.jsx("div",{ref:U,className:"relative w-full",children:u.jsx("div",{className:"w-full flex justify-center overflow-x-auto",children:u.jsx(qu,{noteRange:{first:q,last:Q},playNote:Ae(he),stopNote:ve(Ie),disabled:le,width:se,className:"mx-auto w-full",activeNotes:ee,renderNoteLabel:({midiNumber:xe,isAccidental:ke})=>{const _e=Pt.getAttributes(xe).note.slice(0,-1);return m.includes(Do(_e))?u.jsx("div",{className:`mx-auto mb-2 w-2 h-2 rounded-full ${ke?"bg-blue-300":"bg-blue-500"}`}):null}})})}),!e&&u.jsx("div",{className:"mt-5",children:u.jsx(va,{hostname:M,render:xe=>(xe&&xe.length>0&&JSON.stringify(xe)!==JSON.stringify(w)&&R(xe),u.jsx(f1,{config:F,setConfig:ae,instrumentList:xe||w,keyboardShortcuts:K,cutOffPreviousNotes:y.cutOffPreviousNotes,setCutOffPreviousNotes:E,eq:y.eq,setEq:S,octaveOffset:y.octaveOffset,setOctaveOffset:B,reverbLevel:y.reverbLevel,setReverbLevel:$,noteDuration:y.noteDuration,setNoteDuration:P,volume:y.volume,setVolume:T,chorusLevel:y.chorusLevel,setChorusLevel:A,delayLevel:y.delayLevel,setDelayLevel:I,onInstrumentChange:C}))})}),u.jsx(va,{hostname:M,render:xe=>(xe&&xe.length>0&&JSON.stringify(xe)!==JSON.stringify(w)&&R(xe),u.jsx(u.Fragment,{}))})]}))}):u.jsx("div",{children:"Audio context is not available."})},Ju=({isOpen:e,onClose:n,children:o,className:s="",showCloseButton:a=!0,closeOnBackdropClick:l=!0,title:d,fixedHeader:f=!1})=>{if(!e)return null;const p=m=>{l&&m.target===m.currentTarget&&n()};return u.jsxs("div",{className:"fixed inset-0 z-[1000] flex items-center justify-center p-4",children:[u.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:p}),u.jsxs("div",{className:`relative bg-[#3d434f] border border-gray-600 rounded-lg shadow-xl w-full animate-in fade-in-0 zoom-in-95 duration-200 ${f?"flex flex-col max-h-full":""} ${s}`,children:[(d||a)&&u.jsxs("div",{className:`flex items-center justify-between p-4 border-b border-gray-600 bg-[#3d434f] rounded-t-lg ${f?"flex-shrink-0":""}`,children:[d&&u.jsx("h3",{className:"text-sm font-semibold text-slate-200 uppercase tracking-wide",children:d}),a&&u.jsx("button",{onClick:n,className:"w-6 h-6 flex items-center justify-center rounded-full hover:bg-slate-600 text-slate-400 hover:text-slate-200 transition-colors ml-auto",children:u.jsx(Qb,{className:"w-4 h-4"})})]}),f?u.jsx("div",{className:"flex-1 min-h-0 overflow-y-auto",children:o}):o]})]})},Y1=({className:e=""})=>{const[n,o]=b.useState(!1),s=()=>o(!0),a=()=>o(!1);return u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:s,className:`inline-flex items-center justify-center w-5 h-5 rounded-full bg-slate-600 hover:bg-slate-500 text-slate-300 hover:text-white transition-colors ${e}`,title:"Pattern notation help",children:u.jsx(yg,{className:"w-3 h-3"})}),u.jsxs(Ju,{isOpen:n,onClose:a,title:"Pattern Notation Guide",children:[u.jsxs("div",{className:"p-4 space-y-4",children:[u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx("code",{className:"px-2 py-1 bg-slate-700 text-slate-200 rounded text-xs font-mono min-w-[2rem] text-center",children:"x"}),u.jsx("span",{className:"text-xs text-slate-300",children:"Rest (silence)"})]}),u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx("code",{className:"px-2 py-1 bg-slate-700 text-slate-200 rounded text-xs font-mono min-w-[2rem] text-center",children:"1-8"}),u.jsx("span",{className:"text-xs text-slate-300",children:"Note index (1st, 2nd, 3rd note, etc.)"})]}),u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx("code",{className:"px-2 py-1 bg-slate-700 text-slate-200 rounded text-xs font-mono min-w-[2rem] text-center",children:"1+"}),u.jsx("span",{className:"text-xs text-slate-300",children:"Note with octave up"})]})]}),u.jsxs("div",{className:"border-t border-gray-600 pt-4",children:[u.jsx("div",{className:"text-xs text-slate-400 mb-2",children:u.jsx("strong",{className:"text-slate-300",children:"Example:"})}),u.jsxs("div",{className:"bg-slate-700 rounded p-3",children:[u.jsx("code",{className:"text-xs font-mono text-slate-200",children:"1,x,3,2+"}),u.jsx("div",{className:"text-xs text-slate-400 mt-1",children:"Plays: 1st note → rest → 3rd note → 2nd note (octave up)"})]})]}),u.jsx("div",{className:"text-xs text-slate-500",children:"Separate values with commas. Use any combination to create your pattern."})]}),u.jsx("div",{className:"flex justify-end p-4 border-t border-gray-600",children:u.jsx("button",{onClick:a,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white text-xs font-medium rounded transition-colors uppercase tracking-wide",children:"Got it"})})]})]})},L={BASIC:"basic",RHYTHMIC:"rhythmic",ADVANCED:"advanced",GENRE:"genre",CUSTOM:"custom"},im=[{name:"Root Only",pattern:["1","x","1","x"],desc:"Simple root note emphasis",icon:"🎯",category:L.BASIC},{name:"Root Bass",pattern:["1","x","x","x","1","x","x","x"],desc:"Steady root note bass line",icon:"🎸",category:L.BASIC},{name:"Up Down",pattern:["1","2","3","4","3","2"],desc:"Classic ascending and descending",icon:"⬆️",category:L.BASIC},{name:"Broken Chord",pattern:["1","3","2","4"],desc:"Mixed chord tones",icon:"🔀",category:L.BASIC},{name:"Octave Jump",pattern:["1","1+","1","1+"],desc:"Root note with octave jumps",icon:"🦘",category:L.BASIC},{name:"Waltz",pattern:["1","2","3"],desc:"Three-beat waltz pattern",icon:"💃",category:L.BASIC},{name:"Alberti Bass",pattern:["1","3","2","3","1","3","2","3"],desc:"Classical broken chord accompaniment",icon:"🎼",category:L.BASIC},{name:"Syncopated",pattern:["x","1","x","2","x","3","1","x"],desc:"Off-beat emphasis",icon:"⚡",category:L.RHYTHMIC},{name:"Dotted Rhythm",pattern:["1","x","x","2","x","x"],desc:"Long-short rhythm pattern",icon:"🎵",category:L.RHYTHMIC},{name:"Staccato",pattern:["1","x","2","x","3","x","4","x"],desc:"Short, detached notes",icon:"🔸",category:L.RHYTHMIC},{name:"Legato Flow",pattern:["1","2","3","4","4","3","2","1"],desc:"Smooth, connected motion",icon:"🌊",category:L.ADVANCED},{name:"Fifth Wheel",pattern:["1","2","3","4","5"],desc:"Simple ascent through 5-note chord",icon:"5️⃣",category:L.BASIC},{name:"Pentagon",pattern:["1","3","5","2","4","1"],desc:"Geometric pattern through 5 notes",icon:"⬟",category:L.BASIC},{name:"Five Alive",pattern:["1","5","2","4","3","5","1","x"],desc:"Dynamic 5-note exploration",icon:"🖐️",category:L.ADVANCED},{name:"Jazz Walk",pattern:["1","2","3","4","5","4","3","2"],desc:"Walking bass with 5th extension",icon:"🚶",category:L.ADVANCED},{name:"Quintet Roll",pattern:["1","x","2","3","x","4","5","x"],desc:"Rolled chord with gaps",icon:"🎲",category:L.RHYTHMIC},{name:"High Five",pattern:["1","2+","3","4+","5","1+"],desc:"Mix of regular and high octave notes",icon:"🙌",category:L.ADVANCED},{name:"Hexagon",pattern:["1","2","3","4","5","6"],desc:"Complete 6-note ascent",icon:"⬡",category:L.BASIC},{name:"Six Pack",pattern:["1","6","2","5","3","4"],desc:"Outside-in pattern",icon:"📦",category:L.ADVANCED},{name:"Jazz Cascade",pattern:["1","3","5","6","4","2","1","x"],desc:"Complex jazz voicing pattern",icon:"🎺",category:L.ADVANCED},{name:"Spiral Six",pattern:["1","4","2","5","3","6","1"],desc:"Spiraling through 6 notes",icon:"🌀",category:L.ADVANCED},{name:"Double Triple",pattern:["1","2","3","4","5","6","6","5","4","3","2","1"],desc:"Up and down through all 6 notes",icon:"↕️",category:L.ADVANCED},{name:"Sixth Sense",pattern:["1","x","3","x","5","x","6","x"],desc:"Selective 6-note chord tones",icon:"👁️",category:L.RHYTHMIC},{name:"Polyrhythm",pattern:["1","x","x","2","x","3","x","x","1","x","3","x"],desc:"Complex rhythmic displacement",icon:"🎛️",category:L.RHYTHMIC},{name:"Bounce",pattern:["1","4","1","4","2","3","2","3"],desc:"Bouncing between chord tones",icon:"⚾",category:L.ADVANCED},{name:"Cascade",pattern:["4+","3+","2+","1+","4","3","2","1"],desc:"Waterfall effect across octaves",icon:"🏔️",category:L.ADVANCED},{name:"Morse Code",pattern:["1","x","1","1","x","x","1","x","1","1","x"],desc:"Dot-dash rhythm pattern",icon:"📡",category:L.RHYTHMIC},{name:"Fibonacci",pattern:["1","1","2","3","2","1","3","4"],desc:"Based on Fibonacci sequence",icon:"🌻",category:L.ADVANCED},{name:"Pendulum",pattern:["1","3","2","4","3","1","2","4","3","2"],desc:"Swinging motion through chord",icon:"⚖️",category:L.ADVANCED},{name:"Stutter Step",pattern:["1","1","x","2","2","x","3","3","x"],desc:"Repeated notes with rests",icon:"💬",category:L.RHYTHMIC},{name:"Call Response",pattern:["1","x","x","3","2","x","x","4"],desc:"Question and answer phrases",icon:"🗣️",category:L.RHYTHMIC},{name:"Spiral",pattern:["1","2","4","3","1","4","2","3"],desc:"Spiraling chord progression",icon:"🌪️",category:L.ADVANCED},{name:"Latin Clave",pattern:["1","x","x","1","x","1","x","x"],desc:"Based on Latin clave rhythm",icon:"🥥",category:L.RHYTHMIC},{name:"Long Journey",pattern:["1","2","x","3","4","x","3","2","1","x","2","3","4","x","x","1"],desc:"Extended 16-step pattern",icon:"🛤️",category:L.ADVANCED},{name:"Minimalist",pattern:["1","x","x","x","x","x","x","x"],desc:"Sparse, contemplative",icon:"🎋",category:L.BASIC},{name:"Maximalist",pattern:["1","2","3","4","1+","2+","3+","4+"],desc:"Dense, energetic pattern",icon:"🎆",category:L.ADVANCED},{name:"Ghost Notes",pattern:["1","x","2","x","x","3","x","4","x","x"],desc:"Implied rhythm with spaces",icon:"👻",category:L.RHYTHMIC},{name:"Power Chord",pattern:["1","1","1+","1+"],desc:"Rock-style power chord emphasis",icon:"⚡",category:L.BASIC},{name:"Bossa Nova",pattern:["1","x","2","x","3","x","4","2"],desc:"Brazilian bossa nova feel",icon:"🏖️",category:L.GENRE},{name:"Reggae Skank",pattern:["x","2","x","4","x","2","x","4"],desc:"Reggae upstroke pattern",icon:"🇯🇲",category:L.GENRE},{name:"Tango",pattern:["1","x","2","3","x","x","4","x"],desc:"Dramatic tango rhythm",icon:"💃",category:L.GENRE},{name:"Swing Feel",pattern:["1","x","3","x","2","x","4","x"],desc:"Jazz swing pattern",icon:"🎷",category:L.GENRE},{name:"Folk Strum",pattern:["1","2","3","2","1","2","3","2"],desc:"Folk guitar strumming pattern",icon:"🪕",category:L.GENRE},{name:"Extended Jazz",pattern:["1","3","5","6","5","3","1","x"],desc:"Jazz chord extensions",icon:"🎼",category:L.ADVANCED},{name:"Full House",pattern:["1","2","3","4","5","6","x","x"],desc:"All chord tones, then rest",icon:"🏠",category:L.BASIC},{name:"Polyrhythmic 6",pattern:["1","x","3","x","5","x","2","x","4","x","6","x"],desc:"Complex 6-note polyrhythm",icon:"🎯",category:L.RHYTHMIC},{name:"Wave Function",pattern:["1","3","5","6","4","2","1","3","5","4","2","x"],desc:"Wave-like motion through extended chord",icon:"〰️",category:L.ADVANCED},{name:"Grand Scale",pattern:["1","2","3","4","5","6","5","4","3","2","1"],desc:"Full scale ascent and descent",icon:"🎹",category:L.BASIC},{name:"Step by Step",pattern:["1","2","1","3","2","4","3","5","4","6","5"],desc:"Gradual stepping pattern",icon:"🪜",category:L.BASIC},{name:"Simple Sixes",pattern:["1","3","5","1","3","5","6","4","2","6","4","2"],desc:"Two three-note groups with extensions",icon:"👥",category:L.BASIC},{name:"Double Root",pattern:["1","1","2","3","4","1","1"],desc:"Root emphasis with ascent",icon:"🎯",category:L.BASIC},{name:"Neighbor Tones",pattern:["1","2","1","3","2","3","4","3"],desc:"Step-wise neighboring motion",icon:"🏠",category:L.BASIC},{name:"Triad Plus",pattern:["1","3","5","6","1","3","5","4"],desc:"Basic triad with extensions",icon:"➕",category:L.BASIC},{name:"Full Circle",pattern:["1","2","3","4","5","6","6","5","4","3","2","1","x","x"],desc:"Complete journey up and down",icon:"🔄",category:L.BASIC},{name:"Building Blocks",pattern:["1","1","2","1","2","3","1","2","3","4"],desc:"Gradually building up the chord",icon:"🧱",category:L.BASIC},{name:"Polymetric 5",pattern:["1","x","x","2","x","3","x","x","4","x","5","x","x","1","x"],desc:"Five-note pattern in complex meter",icon:"🎲",category:L.RHYTHMIC},{name:"Shuffle Step",pattern:["1","x","2","3","x","x","4","x","5","6","x","x"],desc:"Shuffle rhythm through extended chord",icon:"🃏",category:L.RHYTHMIC},{name:"Heartbeat",pattern:["1","1","x","x","2","2","x","x","3","3","x","x"],desc:"Pulse-like doubled pattern",icon:"💓",category:L.RHYTHMIC},{name:"Cross Rhythm",pattern:["1","x","x","2","x","x","3","x","4","x","x","5","x","x","6"],desc:"Pattern crossing metric boundaries",icon:"❌",category:L.RHYTHMIC},{name:"Breath Mark",pattern:["1","2","3","x","x","4","5","6","x","x","1","2","x","x"],desc:"Groups of notes with breathing spaces",icon:"🫁",category:L.RHYTHMIC},{name:"Displacement",pattern:["x","1","x","2","x","3","1","x","2","x","3","x","4","x"],desc:"Rhythmically displaced chord tones",icon:"📐",category:L.RHYTHMIC},{name:"Echo Chamber",pattern:["1","x","1","x","x","2","x","2","x","x","3","x","3","x","x"],desc:"Each note echoes with delays",icon:"📢",category:L.RHYTHMIC},{name:"Odd Meter",pattern:["1","x","2","x","3","x","x","4","x","5","x","6","x","x"],desc:"Seven-beat groupings",icon:"7️⃣",category:L.RHYTHMIC},{name:"Metric Modulation",pattern:["1","2","x","3","4","x","x","5","6","x","1","x","x","2","x"],desc:"Changing rhythmic emphasis",icon:"🔄",category:L.RHYTHMIC},{name:"Chromatic Walk",pattern:["1","2","3","4","5","6","5","4","3","2","1","2","3","4","5","6"],desc:"Extended chromatic voice leading",icon:"🚶‍♂️",category:L.ADVANCED},{name:"Voice Exchange",pattern:["1","6","2","5","3","4","4","3","5","2","6","1"],desc:"Voices trading positions",icon:"🔄",category:L.ADVANCED},{name:"Nested Loops",pattern:["1","3","5","3","1","4","6","4","2","5","6","5","2","1"],desc:"Loops within loops structure",icon:"🪆",category:L.ADVANCED},{name:"Golden Ratio",pattern:["1","2","3","5","6","4","1","3","5","6","2","4","1"],desc:"Based on mathematical proportions",icon:"📐",category:L.ADVANCED},{name:"Fractal Pattern",pattern:["1","3","2","1","4","6","5","4","1","3","2","1"],desc:"Self-similar pattern at different scales",icon:"🌿",category:L.ADVANCED},{name:"Intervallic Series",pattern:["1","4","2","5","3","6","1","5","2","6","3","4"],desc:"Systematic interval exploration",icon:"📏",category:L.ADVANCED},{name:"Orbit",pattern:["1","3","5","2","4","6","3","5","1","4","6","2","5","1","6"],desc:"Circular motion through chord space",icon:"🪐",category:L.ADVANCED},{name:"Double Helix",pattern:["1","6","2","5","3","4","3+","4+","2+","5+","1+","6+","1+"],desc:"Intertwining ascending and descending lines",icon:"🧬",category:L.ADVANCED},{name:"Metamorphosis",pattern:["1","2","1","3","2","4","3","5","4","6","5","6","1+","2+"],desc:"Gradually transforming pattern",icon:"🦋",category:L.ADVANCED},{name:"Tessellation",pattern:["1","3","6","4","2","5","1","4","6","3","2","5"],desc:"Interlocking geometric pattern",icon:"🔷",category:L.ADVANCED},{name:"Prime Number",pattern:["1","x","2","x","x","3","x","x","x","x","5","x","x","x","x","x","x"],desc:"Based on prime number sequence",icon:"🔢",category:L.ADVANCED},{name:"Matrix",pattern:["1","2","3","4+","5+","6+","6","5","4","3+","2+","1+"],desc:"Systematic octave displacement matrix",icon:"🎯",category:L.ADVANCED},{name:"Mandala",pattern:["1","x","3","x","5","x","6","x","4","x","2","x","1","x"],desc:"Symmetric spiritual geometry",icon:"🕉️",category:L.ADVANCED},{name:"Infinity Loop",pattern:["1","2","3","4","5","6","5","4","3","2","1","6","5","4","3","2","1"],desc:"Never-ending loop pattern",icon:"♾️",category:L.ADVANCED},{name:"Quantum Jump",pattern:["1","4+","2","5+","x","3","6+","x","1+","4","x","2+","5"],desc:"Unpredictable quantum-like leaps",icon:"⚛️",category:L.ADVANCED},{name:"Epic Journey",pattern:["1","2","3","4","5","6","6+","5+","4+","3+","2+","1+","6","5","4","3","2","1","x","x"],desc:"20-step odyssey through all chord tones",icon:"🗺️",category:L.ADVANCED},{name:"Full Spectrum",pattern:["1","x","2","x","3","x","4","x","5","x","6","x","1+","x","2+","x","3+","x"],desc:"Complete chord exploration with rests",icon:"🌈",category:L.BASIC},{name:"Polyrhythmic Marathon",pattern:["1","x","x","2","x","3","x","x","4","x","5","x","x","6","x","1+","x","x","2+","x"],desc:"Extended polyrhythmic exploration",icon:"🏃‍♀️",category:L.RHYTHMIC},{name:"Dimensional Shift",pattern:["1","3","5","1+","3+","5+","6+","4+","2+","6","4","2","1","2","3","4","5","6"],desc:"Moving between octave dimensions",icon:"🌌",category:L.ADVANCED},{name:"Quick Five",pattern:["1","2","3","4","5","1"],desc:"Efficient 5-note exploration",icon:"⚡",category:L.BASIC},{name:"Hex Core",pattern:["1","3","5","2","4","6"],desc:"All 6 notes in compact form",icon:"⬡",category:L.BASIC},{name:"Jazz Snap",pattern:["1","3","6","4","2","5"],desc:"Quick jazz chord exploration",icon:"🎺",category:L.ADVANCED},{name:"Prism",pattern:["1","4","6","3","5","2"],desc:"Light refraction pattern",icon:"💎",category:L.ADVANCED},{name:"Star Map",pattern:["1","5","2","6","3","4"],desc:"Navigating chord constellation",icon:"⭐",category:L.ADVANCED},{name:"Speed Dial",pattern:["1","2","4","5","6","3"],desc:"Quick access to extended tones",icon:"📞",category:L.BASIC},{name:"Kaleidoscope",pattern:["1","6","4","2","5","3"],desc:"Shifting colorful pattern",icon:"🔮",category:L.ADVANCED},{name:"Magnetic",pattern:["1","3","5","6","4","2"],desc:"Attraction between chord tones",icon:"🧲",category:L.ADVANCED},{name:"Quantum Six",pattern:["6","1","4","2","5","3"],desc:"Non-linear quantum exploration",icon:"⚛️",category:L.ADVANCED},{name:"Crystal",pattern:["1","4","2","5","3","6"],desc:"Crystalline structure pattern",icon:"💎",category:L.ADVANCED},{name:"Octagon",pattern:["1","2","3","4","5","6","5","4"],desc:"8-sided geometric exploration",icon:"⬛",category:L.BASIC},{name:"Double Helix 6",pattern:["1","6","2","5","3","4","3+","1+"],desc:"DNA-like interweaving pattern",icon:"🧬",category:L.ADVANCED},{name:"Infinity 5",pattern:["1","3","5","4","2","4","5","1"],desc:"Figure-8 through 5 chord tones",icon:"♾️",category:L.ADVANCED},{name:"Compass Rose",pattern:["1","4","6","3","2","5","1","6"],desc:"Navigate all directions",icon:"🧭",category:L.ADVANCED},{name:"Quick March",pattern:["1","2","3","4","5","6","1+","x"],desc:"Military precision through chord",icon:"🥾",category:L.BASIC},{name:"Ripple Effect",pattern:["1","3","5","2","4","6","4","2"],desc:"Waves expanding outward",icon:"🌊",category:L.ADVANCED},{name:"Spider Web",pattern:["1","4","2","6","3","5","1+","4"],desc:"Intricate connecting pattern",icon:"🕸️",category:L.ADVANCED},{name:"Gear Shift",pattern:["1","2","4","3","5","6","5","2"],desc:"Mechanical shifting motion",icon:"⚙️",category:L.ADVANCED},{name:"Phoenix Rise",pattern:["1","3","5","6","4","2","5+","1+"],desc:"Rising from ashes pattern",icon:"🔥",category:L.ADVANCED},{name:"Molecule",pattern:["1","6","3","2","5","4","6+","1+"],desc:"Chemical bond structure",icon:"⚗️",category:L.ADVANCED},{name:"Time Warp",pattern:["1","5","2","4","6","3","1+","5"],desc:"Bending through chord space-time",icon:"⏰",category:L.ADVANCED},{name:"Magic Square",pattern:["1","4","6","2","3","5","4+","1+"],desc:"Mathematical magic pattern",icon:"🔢",category:L.ADVANCED},{name:"Synth Wave",pattern:["1","2","4","6","5","3","2+","1+"],desc:"Electronic wave synthesis",icon:"🎛️",category:L.ADVANCED},{name:"Butterfly",pattern:["1","3","6","4","2","5","3+","1+"],desc:"Graceful wing-like motion",icon:"🦋",category:L.ADVANCED},{name:"Binary Code",pattern:["1","x","2","3","4","5","6","x"],desc:"Digital pattern with gaps",icon:"💻",category:L.RHYTHMIC},{name:"Vortex",pattern:["1","6","4","2","5","3","6+","1+"],desc:"Spiraling energy pattern",icon:"🌪️",category:L.ADVANCED},{name:"Lightning",pattern:["1","4","6","2","5","3","1+","x"],desc:"Zigzag electrical pattern",icon:"⚡",category:L.ADVANCED},{name:"Honeycomb",pattern:["1","3","5","2","6","4","5+","1+"],desc:"Hexagonal bee pattern",icon:"🍯",category:L.ADVANCED},{name:"Tidal Wave",pattern:["1","2","4","5","6","3","2+","1+"],desc:"Ocean wave crescendo",icon:"🌊",category:L.ADVANCED},{name:"Satellite",pattern:["1","5","3","6","2","4","1+","5+"],desc:"Orbital motion pattern",icon:"🛰️",category:L.ADVANCED},{name:"Quad Core",pattern:["1","2","3","4","3","2"],desc:"4-note mountain shape",icon:"🏔️",category:L.BASIC},{name:"Square Dance",pattern:["1","3","2","4","1","3"],desc:"4-note folk pattern",icon:"💃",category:L.BASIC},{name:"Tetris Block",pattern:["1","4","2","3","4","1","2","3"],desc:"Interlocking 4-note pattern",icon:"🧩",category:L.ADVANCED},{name:"Compass",pattern:["1","2","4","3","1","4"],desc:"4-direction navigation",icon:"🧭",category:L.BASIC},{name:"Engine Cycle",pattern:["1","3","4","2","1","3","4","2"],desc:"Repeating 4-stroke pattern",icon:"🚗",category:L.ADVANCED},{name:"Diamond",pattern:["1","2","4","3","2","1"],desc:"Diamond-shaped 4-note gem",icon:"💎",category:L.BASIC},{name:"Pentagon Path",pattern:["1","2","3","4","5","1"],desc:"5-sided geometric progression",icon:"⬟",category:L.BASIC},{name:"Star Jump",pattern:["1","3","5","2","4","1"],desc:"5-pointed star navigation",icon:"⭐",category:L.ADVANCED},{name:"High Five",pattern:["1","2","3","4","5","1+"],desc:"5-note celebration with octave",icon:"🙌",category:L.BASIC},{name:"Flower Power",pattern:["1","3","2","5","4","1","3","5"],desc:"5-petal blooming pattern",icon:"🌸",category:L.ADVANCED},{name:"Olympic Rings",pattern:["1","4","2","5","3","4"],desc:"Interlocking 5-note circles",icon:"🏅",category:L.ADVANCED},{name:"Jazz Hand",pattern:["1","2","4","3","5","2","1","4"],desc:"5-finger jazz expression",icon:"🎭",category:L.ADVANCED},{name:"Spiral Five",pattern:["1","3","5","4","2","3"],desc:"Spiraling 5-note motion",icon:"🌀",category:L.ADVANCED},{name:"Power Plant",pattern:["1","5","3","2","4","1+"],desc:"Energy-generating 5-note pattern",icon:"⚡",category:L.ADVANCED},{name:"Full House",pattern:["1","2","3","4","5","6"],desc:"Complete 6-note ascent",icon:"🏠",category:L.BASIC},{name:"Hexagon Spin",pattern:["1","3","5","2","4","6"],desc:"6-sided rotating pattern",icon:"⬡",category:L.BASIC},{name:"Rainbow Arc",pattern:["1","6","2","5","3","4"],desc:"6-color spectrum bridge",icon:"🌈",category:L.ADVANCED},{name:"Dice Roll",pattern:["1","4","6","2","5","3"],desc:"Random 6-sided exploration",icon:"🎲",category:L.ADVANCED},{name:"Spider Legs",pattern:["1","2","4","6","3","5","1","4"],desc:"8-legged 6-note crawl",icon:"🕷️",category:L.ADVANCED},{name:"Snowflake",pattern:["1","6","3","4","2","5"],desc:"6-sided crystalline beauty",icon:"❄️",category:L.ADVANCED},{name:"Benzene Ring",pattern:["1","2","4","5","3","6","1","4"],desc:"Chemical 6-carbon structure",icon:"⚗️",category:L.ADVANCED},{name:"Clock Face",pattern:["1","3","6","4","2","5"],desc:"12-hour time navigation",icon:"🕐",category:L.ADVANCED},{name:"Mandala Six",pattern:["1","4","2","6","3","5","1","6"],desc:"Sacred 6-fold geometry",icon:"🕉️",category:L.ADVANCED},{name:"Puzzle Piece",pattern:["1","5","2","4","6","3"],desc:"Interlocking 6-note solution",icon:"🧩",category:L.ADVANCED},{name:"Rainbow Bridge",pattern:["1","2","3","4","5","6","1+"],desc:"Complete 7-tone spectrum",icon:"🌈",category:L.BASIC},{name:"Lucky Seven",pattern:["1","3","5","6","4","2","1+","3+"],desc:"7-note fortune pattern",icon:"🍀",category:L.ADVANCED},{name:"Chakra Flow",pattern:["1","2","3","4","5","6","1+"],desc:"7-energy center alignment",icon:"🧘",category:L.ADVANCED},{name:"Week Days",pattern:["1","4","2","6","3","5","1+","4+"],desc:"7-day cycle pattern",icon:"📅",category:L.ADVANCED},{name:"Heptagon",pattern:["1","3","6","2","5","4","1+"],desc:"7-sided geometric form",icon:"🔷",category:L.ADVANCED},{name:"Scale Heaven",pattern:["1","2","3","4","5","6","2+","1+"],desc:"7-note stairway to heaven",icon:"🪜",category:L.ADVANCED},{name:"Prism Split",pattern:["1","6","4","2","5","3","1+"],desc:"Light splitting into 7 colors",icon:"💎",category:L.ADVANCED},{name:"Musical Bowl",pattern:["1","2","4","6","3","5","1+","4+"],desc:"7-tone singing bowl",icon:"🎵",category:L.ADVANCED},{name:"Fusion Dance",pattern:["1","3","6","4","2","5"],desc:"6-note fusion choreography",icon:"🕺",category:L.ADVANCED},{name:"Crystal Grid",pattern:["1","4","3","6","2","5","1+","4+"],desc:"6-point energy crystal matrix",icon:"💎",category:L.ADVANCED},{name:"Gear Train",pattern:["1","2","4","3","6","5"],desc:"Mechanical 6-gear system",icon:"⚙️",category:L.ADVANCED},{name:"DNA Strand",pattern:["1","5","2","6","3","4","1+","5+"],desc:"Double helix genetic code",icon:"🧬",category:L.ADVANCED},{name:"Meteor Shower",pattern:["1","6","3","5","2","4"],desc:"6-streak cosmic display",icon:"☄️",category:L.ADVANCED},{name:"Magic Circle",pattern:["1","3","2","6","4","5","1+"],desc:"7-point mystical protection",icon:"🔮",category:L.ADVANCED},{name:"Tornado Spin",pattern:["1","4","6","3","2","5","1+","4+"],desc:"Spiraling 7-note vortex",icon:"🌪️",category:L.ADVANCED},{name:"Phoenix Wings",pattern:["1","2","5","6","3","4"],desc:"6-feather wing spread",icon:"🔥",category:L.ADVANCED},{name:"Quad Echo",pattern:["1","2","1","3","2","4","3","4"],desc:"4-note echo chamber",icon:"📢",category:L.RHYTHMIC},{name:"Four Corners",pattern:["1","3","4","2","1","3","4","2"],desc:"Repeating 4-corner square",icon:"🔲",category:L.BASIC},{name:"Heartbeat Quad",pattern:["1","1","2","3","3","4","2","4"],desc:"Pulsing 4-note rhythm",icon:"💓",category:L.RHYTHMIC},{name:"Compass Spin",pattern:["1","2","4","3","2","1","4","3"],desc:"4-direction circular motion",icon:"🧭",category:L.ADVANCED},{name:"Engine Rev",pattern:["1","4","2","3","4","1","3","2"],desc:"4-cylinder engine pattern",icon:"🏎️",category:L.ADVANCED},{name:"Square Wave",pattern:["1","1","3","3","2","2","4","4"],desc:"Digital square wave form",icon:"⬛",category:L.RHYTHMIC},{name:"Four Seasons",pattern:["1","2","3","4","2+","1","4","3"],desc:"Seasonal cycle pattern",icon:"🍂",category:L.ADVANCED},{name:"Card Suit",pattern:["1","3","2","4","3+","1+","2","4"],desc:"Playing card 4-suit pattern",icon:"🃏",category:L.ADVANCED},{name:"Quad Pulse",pattern:["1","2","2","3","3+","4+","4","1"],desc:"Doubled pulse pattern",icon:"⚡",category:L.RHYTHMIC},{name:"Element Mix",pattern:["1","4","3","2","1","2","3","4"],desc:"4-element combination",icon:"🔥",category:L.ADVANCED},{name:"Pentagon Echo",pattern:["1","2","3","4","5","1","3","5"],desc:"5-note with strategic repeats",icon:"⬟",category:L.BASIC},{name:"Five Alive",pattern:["1","3","5","2","4","1","5","3"],desc:"Dynamic 5-note exploration",icon:"🖐️",category:L.ADVANCED},{name:"Star Circuit",pattern:["1","2","4","5","3","2","4","1"],desc:"5-pointed star electrical circuit",icon:"⭐",category:L.ADVANCED},{name:"Olympic Flow",pattern:["1","3","2","5","4","3","1","5"],desc:"5-ring Olympic movement",icon:"🏅",category:L.ADVANCED},{name:"Hand Jive",pattern:["1","2","3","4","5","2","4","3"],desc:"5-finger dance pattern",icon:"✋",category:L.RHYTHMIC},{name:"Jazz Fifth",pattern:["1","3","5","4","2","5","1","3"],desc:"Jazz 5-note improvisation",icon:"🎺",category:L.ADVANCED},{name:"Flower Bloom",pattern:["1","2","4","3","5","4","2","1"],desc:"5-petal opening flower",icon:"🌺",category:L.ADVANCED},{name:"Spiral Five",pattern:["1","5","3","2","4","5","3","1"],desc:"Spiraling 5-note motion",icon:"🌀",category:L.ADVANCED},{name:"Pentagon March",pattern:["1","2","3","4","5","4","3","2"],desc:"Military 5-count march",icon:"🥾",category:L.BASIC},{name:"Five Elements",pattern:["1","4","2","5","3","4","1+","5+"],desc:"Ancient 5-element cycle",icon:"🌊",category:L.ADVANCED},{name:"Quintet Jam",pattern:["1","3","4","2","5","3","4","1"],desc:"5-piece band improvisation",icon:"🎵",category:L.ADVANCED},{name:"Five Fold",pattern:["1","5","2","4","3","2","5","4"],desc:"5-fold symmetrical pattern",icon:"🔷",category:L.ADVANCED},{name:"Hex Repeat",pattern:["1","2","3","4","5","6","1","4"],desc:"6-note with strategic repeats",icon:"⬡",category:L.BASIC},{name:"Rainbow Fade",pattern:["1","6","2","5","3","4","6","1"],desc:"6-color spectrum fade",icon:"🌈",category:L.ADVANCED},{name:"Snowflake Dance",pattern:["1","3","6","4","2","5","3","1"],desc:"6-sided crystal dance",icon:"❄️",category:L.ADVANCED},{name:"Benzene Loop",pattern:["1","2","4","5","3","6","2","4"],desc:"Chemical 6-carbon ring",icon:"⚗️",category:L.ADVANCED},{name:"Dice Double",pattern:["1","4","6","2","5","3","4","6"],desc:"6-sided die double roll",icon:"🎲",category:L.ADVANCED},{name:"Hexagon Twist",pattern:["1","3","5","2","4","6","3","5"],desc:"6-sided geometric twist",icon:"⬡",category:L.ADVANCED},{name:"Clock Tick",pattern:["1","2","4","6","3","5","2","6"],desc:"6-hour time progression",icon:"🕐",category:L.RHYTHMIC},{name:"Mandala Six",pattern:["1","4","2","6","3","5","4","2"],desc:"Sacred 6-fold pattern",icon:"🕉️",category:L.ADVANCED},{name:"Flower Power",pattern:["1","6","3","2","5","4","6","3"],desc:"6-petal power flower",icon:"🌻",category:L.ADVANCED},{name:"Insect Walk",pattern:["1","2","4","3","6","5","2","4"],desc:"6-legged insect movement",icon:"🐛",category:L.ADVANCED},{name:"Crystal Matrix",pattern:["1","5","3","6","2","4","5","3"],desc:"6-point crystal energy grid",icon:"💎",category:L.ADVANCED},{name:"Spinner Six",pattern:["1","3","6","2","4","5","3","6"],desc:"6-blade spinner pattern",icon:"🔄",category:L.ADVANCED},{name:"Web Weave",pattern:["1","4","6","3","2","5","4","1"],desc:"6-strand web weaving",icon:"🕸️",category:L.ADVANCED},{name:"Honeycomb Flow",pattern:["1","2","5","6","3","4","2","5"],desc:"6-sided honeycomb flow",icon:"🍯",category:L.ADVANCED},{name:"Gear Mesh",pattern:["1","6","4","2","5","3","6","4"],desc:"6-tooth gear meshing",icon:"⚙️",category:L.ADVANCED},{name:"Jazz Hexagon",pattern:["1","3+","5","6+","4","2+","3","5+"],desc:"6-note jazz with octave sophistication",icon:"🎷",category:L.ADVANCED},{name:"Empty 4-Step",pattern:["x","x","x","x"],desc:"Let's do this!",icon:"✨",category:L.CUSTOM}],eu=e=>new Set(e.filter(o=>o!=="x").map(o=>{const s=parseInt(o.replace("+",""));return isNaN(s)?null:s}).filter(o=>o!==null)).size,Q1=(e,n)=>e.length!==n.length?!1:e.every((o,s)=>o===n[s]),X1=({chordNoteCount:e,maxAvailableNotes:n,hideFewerNotePatterns:o,currentPattern:s,onHideFewerNotePatternsChange:a,onApplyPreset:l,className:d=""})=>{const f=Bn(A=>A.addedChords),[p,m]=b.useState("all"),[x,g]=b.useState("all"),y=b.useRef(null),w=b.useRef({}),C=b.useMemo(()=>{const A=[],I=new Set;return im.forEach(R=>{I.add(R.pattern.join("|"))}),f.forEach((R,M)=>{const Y=R.pattern.join("|");!I.has(Y)&&Y.trim()!==""&&(I.add(Y),eu(R.pattern),A.push({name:`Custom ${A.length+1}`,pattern:[...R.pattern],desc:`Custom pattern from "${R.name}"`,icon:"🎨",category:L.CUSTOM}))}),A},[f]),E=b.useMemo(()=>[...im,...C],[C]),S=b.useMemo(()=>{const A=new Set(E.map(I=>I.pattern.length));return Array.from(A).sort((I,R)=>I-R)},[E]),B=b.useMemo(()=>E.filter(A=>{const I=eu(A.pattern);return!(I>e||o&&I<e||Math.max(...A.pattern.filter(M=>M!=="x").map(M=>{const Y=parseInt(M.replace("+",""));return isNaN(Y)?0:Y}))>n||p!=="all"&&A.pattern.length!==parseInt(p)||x!=="all"&&A.category!==x)}),[E,e,o,n,p,x]),$=b.useMemo(()=>s?B.findIndex(A=>Q1(A.pattern,s)):-1,[s,B]);b.useEffect(()=>{if($>=0&&y.current){const A=y.current,I=w.current[$];if(I){const R=A.getBoundingClientRect(),M=I.getBoundingClientRect(),Y=M.top-R.top+A.scrollTop,ee=Y+M.height,oe=A.clientHeight,O=A.scrollTop,V=O+oe;if(Y<O||ee>V){const U=Y-oe/2+M.height/2;A.scrollTo({top:Math.max(0,U),behavior:"instant"})}}}},[$,B]);const P=["All Steps",...S.map(A=>`${A} Steps`)],T=["All Categories","Basic","Rhythmic","Advanced","Genre","Custom"];return u.jsxs("div",{className:`space-y-4 ${d}`,children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-medium text-slate-200 mb-2 uppercase tracking-wide",children:"Pattern Presets"}),u.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[u.jsx("input",{type:"checkbox",checked:o,onChange:A=>a(A.target.checked),className:"w-3 h-3 rounded border-gray-600 bg-[#3d434f] text-blue-600 focus:ring-blue-500 focus:ring-1"}),u.jsx("span",{className:"text-xs text-slate-200",children:"Hide patterns with fewer notes"})]})]}),u.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[u.jsx(Nn,{value:P[p==="all"?0:P.findIndex(A=>A===`${p} Steps`)],onChange:A=>{if(A==="All Steps")m("all");else{const I=A.replace(" Steps","");m(I)}},options:P,className:"flex-1",buttonClassName:"w-full p-2 bg-[#3d434f] border border-gray-600 rounded text-slate-200 text-xs transition-colors hover:bg-[#4a5262]"}),u.jsx(Nn,{value:T[x==="all"?0:T.findIndex(A=>A.toLowerCase()===x)],onChange:A=>{g(A==="All Categories"?"all":A.toLowerCase())},options:T,className:"flex-1",buttonClassName:"w-full p-2 bg-[#3d434f] border border-gray-600 rounded text-slate-200 text-xs transition-colors hover:bg-[#4a5262]"})]}),u.jsx("div",{ref:y,className:"grid grid-cols-1 gap-2 max-h-80 overflow-y-auto pr-2 custom-scrollbar",children:B.length>0?B.map((A,I)=>{const R=eu(A.pattern),M=I===$;return u.jsxs("button",{ref:Y=>{w.current[I]=Y},onClick:()=>l(A),className:`p-2 rounded text-xs transition-colors text-left border ${M?"bg-blue-600/20 text-slate-100 border-blue-500 ring-1 ring-blue-500/50":"bg-[#3d434f] text-slate-300 hover:bg-[#4a5262] hover:text-slate-200 border-gray-600 hover:border-gray-500"}`,children:[u.jsxs("div",{className:"flex items-center justify-between mb-1",children:[u.jsx("span",{className:"font-medium uppercase tracking-wide",children:A.name}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsxs("span",{className:`text-xs ${M?"text-slate-300":"text-slate-500"}`,children:[R,"n • ",A.pattern.length,"s"]}),u.jsx("span",{children:A.icon})]})]}),u.jsx("div",{className:`text-xs opacity-60 ${M?"text-slate-400":"text-slate-500"}`,children:A.pattern.join("-")})]},I)}):u.jsx("div",{className:"p-3 text-xs text-slate-400 text-center",children:"No patterns found matching current filters"})})]})},Cr=({label:e,value:n,min:o,max:s,step:a=.05,onChange:l,suffix:d,showPercentage:f=!1,formatValue:p,showMinMax:m=!1,minLabel:x,maxLabel:g,variant:y="default",className:w="",labelClassName:C=""})=>{const E=()=>p?p(n):f?`${Math.round(n*100)}%`:`${n}${d||""}`,S=B=>{const $=parseFloat(B.target.value);l($)};return y==="split"?u.jsxs("div",{className:w,children:[u.jsxs("div",{className:"flex justify-between items-center mb-1",children:[u.jsx("span",{className:`text-xs text-slate-400 uppercase tracking-wide ${C}`,children:e}),u.jsx("span",{className:"text-xs text-slate-400 font-mono",children:E()})]}),u.jsx("input",{type:"range",min:o,max:s,step:a,value:n,onChange:S,className:"w-full h-1.5 bg-[#3d434f] rounded appearance-none cursor-pointer slider-thumb"}),m&&u.jsxs("div",{className:"flex justify-between text-xs text-slate-500 mt-1",children:[u.jsx("span",{children:x||o}),u.jsx("span",{children:g||s})]})]}):u.jsxs("div",{className:w,children:[u.jsxs("label",{className:`block text-xs font-medium text-slate-200 mb-2 uppercase tracking-wide ${C}`,children:[e,u.jsxs("span",{className:"text-xs text-slate-400 ml-2 normal-case",children:["(",E(),")"]})]}),u.jsx("div",{className:"relative",children:u.jsx("input",{type:"range",min:o,max:s,step:a,value:n,onChange:S,className:"slider-mobile w-full h-1.5 bg-[#3d434f] rounded appearance-none cursor-pointer slider-thumb"})}),m&&u.jsxs("div",{className:"flex justify-between text-xs text-slate-500 mt-1",children:[u.jsx("span",{children:x||o}),u.jsx("span",{children:g||s})]})]})},ys=[{value:.125,symbol:"♬",name:"32nd notes"},{value:.25,symbol:"♪",name:"16th notes"},{value:.5,symbol:"♩",name:"8th notes"},{value:1,symbol:"♪",name:"Quarter notes"},{value:2,symbol:"♪",name:"Half notes"}],Du=b.memo(({stepIndex:e,stepValue:n,maxNotes:o,onStepChange:s})=>{const a=b.useMemo(()=>{const m=["—"];for(let x=1;x<=o;x++)m.push(String(x)),m.push(`${x}↑`);return m},[o]),d=(()=>{if(n==="x")return"—";const m=parseInt(n.replace("+",""));return!isNaN(m)&&m>o?"—":n.replace("+","↑")})(),f=n!=="x"&&d==="—",p=m=>{let x=m;m==="—"?x="x":m.includes("↑")&&(x=m.replace("↑","+")),s(e,x)};return u.jsx("div",{className:"relative",children:u.jsx(Nn,{value:d,onChange:p,options:a,className:"w-full",buttonClassName:`w-full h-10 text-xs pl-2.5 ${n==="x"?"bg-[#3d434f] border-gray-700 text-slate-400":f?"bg-[#3d434f] border-gray-700 text-orange-400":"bg-[#3d434f] border-gray-600 text-slate-200 hover:bg-[#4a5262]"} border rounded transition-all duration-200`})})});Du.displayName="StepEditor";const Z1=()=>{Cn();const e=Bn(),n=Ro(),{addedChords:o,activeChordIndex:s}=e,{currentlyActivePattern:a,globalPatternState:l}=n,[d,f]=b.useState(!1),[p,m]=b.useState(!0),[x,g]=b.useState("1,2,3,4"),[y,w]=b.useState(!1);b.useCallback(()=>s!==null&&o[s]?o[s].pattern:a,[s,o,a]);const{currentPattern:C,editingContext:E}=b.useMemo(()=>{if(s!==null&&o[s]){const U=o[s];return{currentPattern:U.pattern,editingContext:{type:"chord",title:`Pattern for "${U.name}"`,description:"Editing pattern for this specific chord",chordName:U.name}}}else return{currentPattern:l.currentPattern,editingContext:{type:"current",title:"Global Pattern",description:"Base pattern - becomes active when no chord is selected",chordName:null}}},[s,o,l.currentPattern]),S=b.useMemo(()=>{if(s!==null&&o[s]){const X=o[s].notes.split(",").map(se=>se.trim()).filter(se=>se);return new Set(X.map(se=>se.replace(/\d+$/,""))).size}return 4},[s,o]),B=b.useMemo(()=>{const U=Math.min(4,S);return Math.max(U,S)},[S]);b.useEffect(()=>{C&&g(C.join(","))},[C]);const $=b.useCallback(()=>{const U=!l.isPlaying;n.setGlobalPatternState({isPlaying:U})},[l.isPlaying]);b.useCallback(()=>{n.setGlobalPatternState({isPlaying:!1,currentStep:0})},[]);const P=b.useCallback(U=>{E.type==="current"?n.setGlobalPatternState({currentPattern:U}):E.type==="chord"&&s!==null&&e.updateChordPattern(s,U)},[E.type,s]),T=b.useCallback((U,X)=>{const J=[...C];J[U]=X,P(J)},[C,P]),A=b.useCallback(()=>{if(C.length<16){const U=[...C,"x"];P(U)}},[C,P]),I=b.useCallback(()=>{if(C.length>1){const U=C.slice(0,-1);P(U)}},[C,P]),R=b.useCallback(()=>{try{const U=x.split(",").map(X=>X.trim()).filter(X=>X);U.length>0&&P(U)}catch{console.error("Invalid pattern format")}},[x,P]),M=b.useCallback(U=>{P(U.pattern)},[P]),Y=b.useCallback(U=>{n.updatePattern(U)},[]),ee=b.useMemo(()=>l.isPlaying?l.currentStep%C.length:-1,[l.isPlaying,l.currentStep,C.length]),oe=ys.map(U=>`${U.symbol} ${U.name}`),O=ys.find(U=>U.value===l.subdivision),V=O?`${O.symbol} ${O.name}`:`${ys[1].symbol} ${ys[1].name}`;return u.jsx("div",{className:"w-full max-w-7xl mx-auto px-2 mt-4",children:u.jsxs("div",{className:"bg-[#3d434f] border border-gray-600 rounded-lg overflow-hidden",children:[u.jsx("div",{className:"px-4 py-3",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("h2",{className:"text-sm font-bold text-slate-300 uppercase tracking-wider",children:"Sequencer"}),u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx("button",{onClick:()=>f(!d),className:"w-[7em] h-8 flex items-center space-x-2 px-3 py-1.5 text-xs text-slate-300 hover:text-slate-200 bg-[#4a5262] hover:bg-[#525a6b] border border-gray-600 rounded transition-all duration-200",children:d?u.jsxs(u.Fragment,{children:[u.jsx(Rs,{className:"w-3 h-3"}),u.jsx("span",{children:"Hide"})]}):u.jsxs(u.Fragment,{children:[u.jsx(Yr,{className:"w-3 h-3"}),u.jsx("span",{children:"Show"})]})}),u.jsx(Sn,{onClick:$,variant:"play-stop",size:"sm",active:l.isPlaying,className:"shadow-lg",children:l.isPlaying?u.jsxs(u.Fragment,{children:[u.jsx(ks,{className:"w-6 h-6"}),u.jsx("span",{className:"hidden sm:inline",children:"Stop"})]}):u.jsxs(u.Fragment,{children:[u.jsx(Is,{className:"w-6 h-6"}),u.jsx("span",{className:"hidden sm:inline",children:"Play"})]})})]})]})}),u.jsxs("div",{className:`transition-all duration-300 ease-in-out overflow-hidden ${d?" opacity-100":"max-h-0 opacity-0"}`,children:[u.jsxs("div",{className:"border-t border-gray-600 bg-[#444b59]",children:[u.jsxs("div",{className:"px-4 py-3 border-b border-gray-600 bg-[#3d434f]",children:[u.jsxs("div",{className:"flex items-center justify-between sm:hidden",children:[u.jsxs("div",{className:"flex items-center space-x-1",children:[u.jsx("button",{onClick:I,disabled:C.length<=1,className:"flex items-center justify-center w-7 h-7 bg-[#4a5262] hover:bg-red-600 disabled:opacity-50 disabled:cursor-not-allowed text-xs rounded transition-all duration-200 text-slate-200 hover:text-white disabled:hover:bg-[#4a5262] disabled:hover:text-slate-200",title:"Remove step",children:u.jsx(zh,{className:"w-3 h-3"})}),u.jsx("div",{className:"text-xs text-slate-300 font-mono w-8 text-center",children:C.length}),u.jsx("button",{onClick:A,disabled:C.length>=16,className:"flex items-center justify-center w-7 h-7 bg-[#4a5262] hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed text-xs rounded transition-all duration-200 text-slate-200 hover:text-white disabled:hover:bg-[#4a5262] disabled:hover:text-slate-200",title:"Add step",children:u.jsx(Vh,{className:"w-3 h-3"})})]}),u.jsx("div",{children:E.chordName?u.jsx("div",{className:"text-xs font-medium text-purple-300 bg-purple-900/30 px-2 py-1 rounded border border-purple-700/50",children:E.chordName}):u.jsx("div",{className:"text-xs text-cyan-300 bg-cyan-900/30 px-2 py-1 rounded border border-cyan-700/50",children:"Global Pattern"})})]}),u.jsxs("div",{className:"hidden sm:flex sm:items-center sm:justify-between",children:[u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx("span",{className:"text-xs text-slate-400 font-medium",children:"Pattern:"}),u.jsxs("div",{className:"text-xs text-slate-300 font-mono bg-[#4a5262] px-2 py-1 rounded",children:[C.length," steps"]})]}),E.chordName&&u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("span",{className:"text-xs text-slate-400",children:"for"}),u.jsx("div",{className:"text-xs font-medium text-purple-300 bg-purple-900/30 px-2 py-1 rounded border border-purple-700/50",children:E.chordName})]}),!E.chordName&&u.jsx("div",{className:"text-xs text-cyan-300 bg-cyan-900/30 px-2 py-1 rounded border border-cyan-700/50",children:"Global Pattern"})]}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("span",{className:"text-xs text-slate-400",children:"Steps:"}),u.jsxs("div",{className:"flex items-center space-x-1",children:[u.jsx("button",{onClick:I,disabled:C.length<=1,className:"flex items-center justify-center w-7 h-7 bg-[#4a5262] hover:bg-red-600 disabled:opacity-50 disabled:cursor-not-allowed text-xs rounded transition-all duration-200 text-slate-200 hover:text-white disabled:hover:bg-[#4a5262] disabled:hover:text-slate-200",title:"Remove step",children:u.jsx(zh,{className:"w-3 h-3"})}),u.jsx("div",{className:"text-xs text-slate-300 font-mono w-8 text-center",children:C.length}),u.jsx("button",{onClick:A,disabled:C.length>=16,className:"flex items-center justify-center w-7 h-7 bg-[#4a5262] hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed text-xs rounded transition-all duration-200 text-slate-200 hover:text-white disabled:hover:bg-[#4a5262] disabled:hover:text-slate-200",title:"Add step",children:u.jsx(Vh,{className:"w-3 h-3"})})]})]})]})]}),u.jsxs("div",{className:"p-6 px-3 sm:px-4",children:[u.jsx("div",{className:"block md:hidden",children:Array.from({length:Math.ceil(C.length/4)},(U,X)=>{const J=X*4,se=Math.min(J+4,C.length),q=C.slice(J,se);return u.jsxs("div",{className:"mb-4 last:mb-0",children:[u.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[q.map((Q,K)=>{const D=J+K;return u.jsx(Du,{stepIndex:D,stepValue:Q,maxNotes:B,onStepChange:T},`pattern-${E.type}-${s}-${D}`)}),Array.from({length:4-q.length},(Q,K)=>u.jsx("div",{},`empty-${K}`))]}),u.jsxs("div",{className:"grid grid-cols-4 gap-2 mt-2",children:[q.map((Q,K)=>{const D=J+K;return u.jsx("div",{className:"flex justify-center",children:u.jsx("div",{className:`transition-all duration-200 ${ee===D?"w-full h-1 bg-blue-400 rounded-full":"w-full h-1 bg-gray-600 rounded-full"}`})},`indicator-${D}`)}),Array.from({length:4-q.length},(Q,K)=>u.jsx("div",{},`empty-indicator-${K}`))]})]},`mobile-row-${X}`)})}),u.jsx("div",{className:"hidden md:block",children:Array.from({length:Math.ceil(C.length/8)},(U,X)=>{const J=X*8,se=Math.min(J+8,C.length),q=C.slice(J,se);return u.jsxs("div",{className:"mb-4 last:mb-0",children:[u.jsxs("div",{className:"grid grid-cols-8 gap-2",children:[q.map((Q,K)=>{const D=J+K;return u.jsx(Du,{stepIndex:D,stepValue:Q,maxNotes:B,onStepChange:T},`pattern-${E.type}-${s}-${D}`)}),Array.from({length:8-q.length},(Q,K)=>u.jsx("div",{},`empty-${K}`))]}),u.jsxs("div",{className:"grid grid-cols-8 gap-2 mt-2",children:[q.map((Q,K)=>{const D=J+K;return u.jsx("div",{className:"flex justify-center",children:u.jsx("div",{className:`transition-all duration-200 ${ee===D?"w-full h-1 bg-blue-400 rounded-full shadow-lg shadow-blue-400/50":"w-full h-1 bg-gray-600 rounded-full"}`})},`indicator-${D}`)}),Array.from({length:8-q.length},(Q,K)=>u.jsx("div",{},`empty-indicator-${K}`))]})]},`desktop-row-${X}`)})})]})]}),u.jsxs("div",{className:"bg-[#3d434f] border-t border-gray-600",children:[u.jsx("div",{className:"px-4 py-3 border-b border-gray-600",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("h3",{className:"text-sm font-medium text-slate-200 uppercase tracking-wider",children:"Settings"}),u.jsx("button",{onClick:()=>m(!p),className:"w-[7em] h-8 flex items-center space-x-2 px-3 py-1.5 text-xs text-slate-300 hover:text-slate-200 bg-[#4a5262] hover:bg-[#525a6b] border border-gray-600 rounded transition-all duration-200",children:p?u.jsxs(u.Fragment,{children:[u.jsx(Rs,{className:"w-3 h-3"}),u.jsx("span",{children:"Hide"})]}):u.jsxs(u.Fragment,{children:[u.jsx(Yr,{className:"w-3 h-3"}),u.jsx("span",{children:"Show"})]})})]})}),u.jsx("div",{className:`transition-all duration-300 ease-in-out overflow-hidden ${p?" opacity-100":"max-h-0 opacity-0"}`,children:u.jsx("div",{className:"p-6 bg-[#444b59]",children:u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-x-8 gap-y-6",children:[u.jsxs("div",{className:"space-y-6",children:[u.jsx("div",{children:u.jsx("label",{className:"block text-xs font-medium text-slate-200 mb-2 uppercase tracking-wide",children:"Timing"})}),u.jsx(Cr,{label:"BPM",value:l.bpm,min:60,max:200,step:1,onChange:U=>Y({bpm:Math.round(U)}),showMinMax:!0,minLabel:"60",maxLabel:"200"}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-medium text-slate-200 mb-2 uppercase tracking-wide",children:"Subdivision"}),u.jsx(Nn,{value:V,onChange:U=>{const X=ys.find(J=>`${J.symbol} ${J.name}`===U);X&&Y({subdivision:X.value})},options:oe,className:"w-full",buttonClassName:"w-full p-3 bg-[#3d434f] border border-gray-600 rounded text-slate-200 text-xs focus:border-blue-500 transition-colors hover:bg-[#4a5262]"})]}),u.jsx(Cr,{label:"Swing",value:l.swing,min:0,max:50,step:1,suffix:"%",onChange:U=>Y({swing:Math.round(U)}),showMinMax:!0,minLabel:"0%",maxLabel:"50%"})]}),u.jsx(X1,{chordNoteCount:S,maxAvailableNotes:B,hideFewerNotePatterns:y,onHideFewerNotePatternsChange:w,onApplyPreset:M,currentPattern:a}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("label",{className:"block text-xs font-medium text-slate-200 uppercase tracking-wide",children:"Custom"}),u.jsx(Y1,{})]}),u.jsxs("div",{className:"space-y-3",children:[u.jsx("input",{type:"text",value:x,onChange:U=>g(U.target.value),onKeyPress:U=>U.key==="Enter"&&R(),placeholder:"1,x,3,2+",className:"w-full p-2 bg-[#3d434f] border border-gray-600 rounded text-slate-200 text-xs focus:border-blue-500 transition-colors placeholder-slate-500"}),u.jsx("button",{onClick:R,className:"w-full px-3 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded text-xs font-medium transition-colors uppercase tracking-wide",children:"Apply Pattern"})]})]})]})})})]})]})]})})};function Ot(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var J1=typeof Symbol=="function"&&Symbol.observable||"@@observable",am=J1,lm=()=>Math.random().toString(36).substring(7).split("").join("."),ew={INIT:`@@redux/INIT${lm()}`,REPLACE:`@@redux/REPLACE${lm()}`},cm=ew;function tw(e){if(typeof e!="object"||e===null)return!1;let n=e;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(e)===n||Object.getPrototypeOf(e)===null}function Ag(e,n,o){if(typeof e!="function")throw new Error(Ot(2));if(typeof n=="function"&&typeof o=="function"||typeof o=="function"&&typeof arguments[3]=="function")throw new Error(Ot(0));if(typeof n=="function"&&typeof o>"u"&&(o=n,n=void 0),typeof o<"u"){if(typeof o!="function")throw new Error(Ot(1));return o(Ag)(e,n)}let s=e,a=n,l=new Map,d=l,f=0,p=!1;function m(){d===l&&(d=new Map,l.forEach((S,B)=>{d.set(B,S)}))}function x(){if(p)throw new Error(Ot(3));return a}function g(S){if(typeof S!="function")throw new Error(Ot(4));if(p)throw new Error(Ot(5));let B=!0;m();const $=f++;return d.set($,S),function(){if(B){if(p)throw new Error(Ot(6));B=!1,m(),d.delete($),l=null}}}function y(S){if(!tw(S))throw new Error(Ot(7));if(typeof S.type>"u")throw new Error(Ot(8));if(typeof S.type!="string")throw new Error(Ot(17));if(p)throw new Error(Ot(9));try{p=!0,a=s(a,S)}finally{p=!1}return(l=d).forEach($=>{$()}),S}function w(S){if(typeof S!="function")throw new Error(Ot(10));s=S,y({type:cm.REPLACE})}function C(){const S=g;return{subscribe(B){if(typeof B!="object"||B===null)throw new Error(Ot(11));function $(){const T=B;T.next&&T.next(x())}return $(),{unsubscribe:S($)}},[am](){return this}}}return y({type:cm.INIT}),{dispatch:y,subscribe:g,getState:x,replaceReducer:w,[am]:C}}function um(e,n){return function(...o){return n(e.apply(this,o))}}function dm(e,n){if(typeof e=="function")return um(e,n);if(typeof e!="object"||e===null)throw new Error(Ot(16));const o={};for(const s in e){const a=e[s];typeof a=="function"&&(o[s]=um(a,n))}return o}function Pg(...e){return e.length===0?n=>n:e.length===1?e[0]:e.reduce((n,o)=>(...s)=>n(o(...s)))}function nw(...e){return n=>(o,s)=>{const a=n(o,s);let l=()=>{throw new Error(Ot(15))};const d={getState:a.getState,dispatch:(p,...m)=>l(p,...m)},f=e.map(p=>p(d));return l=Pg(...f)(a.dispatch),{...a,dispatch:l}}}var tu={exports:{}},nu={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fm;function rw(){if(fm)return nu;fm=1;var e=ka();function n(p,m){return p===m&&(p!==0||1/p===1/m)||p!==p&&m!==m}var o=typeof Object.is=="function"?Object.is:n,s=e.useSyncExternalStore,a=e.useRef,l=e.useEffect,d=e.useMemo,f=e.useDebugValue;return nu.useSyncExternalStoreWithSelector=function(p,m,x,g,y){var w=a(null);if(w.current===null){var C={hasValue:!1,value:null};w.current=C}else C=w.current;w=d(function(){function S(A){if(!B){if(B=!0,$=A,A=g(A),y!==void 0&&C.hasValue){var I=C.value;if(y(I,A))return P=I}return P=A}if(I=P,o($,A))return I;var R=g(A);return y!==void 0&&y(I,R)?($=A,I):($=A,P=R)}var B=!1,$,P,T=x===void 0?null:x;return[function(){return S(m())},T===null?void 0:function(){return S(T())}]},[m,x,g,y]);var E=s(p,w[0],w[1]);return l(function(){C.hasValue=!0,C.value=E},[E]),f(E),E},nu}var pm;function ow(){return pm||(pm=1,tu.exports=rw()),tu.exports}ow();var sw=b.version.startsWith("19"),iw=Symbol.for(sw?"react.transitional.element":"react.element"),aw=Symbol.for("react.portal"),lw=Symbol.for("react.fragment"),cw=Symbol.for("react.strict_mode"),uw=Symbol.for("react.profiler"),dw=Symbol.for("react.consumer"),fw=Symbol.for("react.context"),Rg=Symbol.for("react.forward_ref"),pw=Symbol.for("react.suspense"),hw=Symbol.for("react.suspense_list"),ed=Symbol.for("react.memo"),mw=Symbol.for("react.lazy"),gw=Rg,vw=ed;function xw(e){if(typeof e=="object"&&e!==null){const{$$typeof:n}=e;switch(n){case iw:switch(e=e.type,e){case lw:case uw:case cw:case pw:case hw:return e;default:switch(e=e&&e.$$typeof,e){case fw:case Rg:case mw:case ed:return e;case dw:return e;default:return n}}case aw:return n}}}function yw(e){return xw(e)===ed}function bw(e,n,o,s,{areStatesEqual:a,areOwnPropsEqual:l,areStatePropsEqual:d}){let f=!1,p,m,x,g,y;function w($,P){return p=$,m=P,x=e(p,m),g=n(s,m),y=o(x,g,m),f=!0,y}function C(){return x=e(p,m),n.dependsOnOwnProps&&(g=n(s,m)),y=o(x,g,m),y}function E(){return e.dependsOnOwnProps&&(x=e(p,m)),n.dependsOnOwnProps&&(g=n(s,m)),y=o(x,g,m),y}function S(){const $=e(p,m),P=!d($,x);return x=$,P&&(y=o(x,g,m)),y}function B($,P){const T=!l(P,m),A=!a($,p,P,m);return p=$,m=P,T&&A?C():T?E():A?S():y}return function(P,T){return f?B(P,T):w(P,T)}}function ww(e,{initMapStateToProps:n,initMapDispatchToProps:o,initMergeProps:s,...a}){const l=n(e,a),d=o(e,a),f=s(e,a);return bw(l,d,f,e,a)}function Nw(e,n){const o={};for(const s in e){const a=e[s];typeof a=="function"&&(o[s]=(...l)=>n(a(...l)))}return o}function ju(e){return function(o){const s=e(o);function a(){return s}return a.dependsOnOwnProps=!1,a}}function hm(e){return e.dependsOnOwnProps?!!e.dependsOnOwnProps:e.length!==1}function kg(e,n){return function(s,{displayName:a}){const l=function(f,p){return l.dependsOnOwnProps?l.mapToProps(f,p):l.mapToProps(f,void 0)};return l.dependsOnOwnProps=!0,l.mapToProps=function(f,p){l.mapToProps=e,l.dependsOnOwnProps=hm(e);let m=l(f,p);return typeof m=="function"&&(l.mapToProps=m,l.dependsOnOwnProps=hm(m),m=l(f,p)),m},l}}function td(e,n){return(o,s)=>{throw new Error(`Invalid value of type ${typeof e} for ${n} argument when connecting component ${s.wrappedComponentName}.`)}}function Cw(e){return e&&typeof e=="object"?ju(n=>Nw(e,n)):e?typeof e=="function"?kg(e):td(e,"mapDispatchToProps"):ju(n=>({dispatch:n}))}function Sw(e){return e?typeof e=="function"?kg(e):td(e,"mapStateToProps"):ju(()=>({}))}function Ew(e,n,o){return{...o,...e,...n}}function Dw(e){return function(o,{displayName:s,areMergedPropsEqual:a}){let l=!1,d;return function(p,m,x){const g=e(p,m,x);return l?a(g,d)||(d=g):(l=!0,d=g),d}}}function jw(e){return e?typeof e=="function"?Dw(e):td(e,"mergeProps"):()=>Ew}function Aw(e){e()}function Pw(){let e=null,n=null;return{clear(){e=null,n=null},notify(){Aw(()=>{let o=e;for(;o;)o.callback(),o=o.next})},get(){const o=[];let s=e;for(;s;)o.push(s),s=s.next;return o},subscribe(o){let s=!0;const a=n={callback:o,next:null,prev:n};return a.prev?a.prev.next=a:e=a,function(){!s||e===null||(s=!1,a.next?a.next.prev=a.prev:n=a.prev,a.prev?a.prev.next=a.next:e=a.next)}}}}var mm={notify(){},get:()=>[]};function Ig(e,n){let o,s=mm,a=0,l=!1;function d(E){x();const S=s.subscribe(E);let B=!1;return()=>{B||(B=!0,S(),g())}}function f(){s.notify()}function p(){C.onStateChange&&C.onStateChange()}function m(){return l}function x(){a++,o||(o=n?n.addNestedSub(p):e.subscribe(p),s=Pw())}function g(){a--,o&&a===0&&(o(),o=void 0,s.clear(),s=mm)}function y(){l||(l=!0,x())}function w(){l&&(l=!1,g())}const C={addNestedSub:d,notifyNestedSubs:f,handleChangeWrapper:p,isSubscribed:m,trySubscribe:y,tryUnsubscribe:w,getListeners:()=>s};return C}var Rw=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",kw=Rw(),Iw=()=>typeof navigator<"u"&&navigator.product==="ReactNative",Tw=Iw(),Ow=()=>kw||Tw?b.useLayoutEffect:b.useEffect,xa=Ow();function gm(e,n){return e===n?e!==0||n!==0||1/e===1/n:e!==e&&n!==n}function ru(e,n){if(gm(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;const o=Object.keys(e),s=Object.keys(n);if(o.length!==s.length)return!1;for(let a=0;a<o.length;a++)if(!Object.prototype.hasOwnProperty.call(n,o[a])||!gm(e[o[a]],n[o[a]]))return!1;return!0}var Mw={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},_w={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},Lw={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Tg={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},Bw={[gw]:Lw,[vw]:Tg};function vm(e){return yw(e)?Tg:Bw[e.$$typeof]||Mw}var Fw=Object.defineProperty,$w=Object.getOwnPropertyNames,xm=Object.getOwnPropertySymbols,zw=Object.getOwnPropertyDescriptor,Vw=Object.getPrototypeOf,ym=Object.prototype;function Au(e,n){if(typeof n!="string"){if(ym){const l=Vw(n);l&&l!==ym&&Au(e,l)}let o=$w(n);xm&&(o=o.concat(xm(n)));const s=vm(e),a=vm(n);for(let l=0;l<o.length;++l){const d=o[l];if(!_w[d]&&!(a&&a[d])&&!(s&&s[d])){const f=zw(n,d);try{Fw(e,d,f)}catch{}}}}return e}var Gw=Symbol.for("react-redux-context"),Uw=typeof globalThis<"u"?globalThis:{};function Hw(){if(!b.createContext)return{};const e=Uw[Gw]??=new Map;let n=e.get(b.createContext);return n||(n=b.createContext(null),e.set(b.createContext,n)),n}var Og=Hw(),Ww=[null,null];function qw(e,n,o){xa(()=>e(...n),o)}function Kw(e,n,o,s,a,l){e.current=s,o.current=!1,a.current&&(a.current=null,l())}function Yw(e,n,o,s,a,l,d,f,p,m,x){if(!e)return()=>{};let g=!1,y=null;const w=()=>{if(g||!f.current)return;const E=n.getState();let S,B;try{S=s(E,a.current)}catch($){B=$,y=$}B||(y=null),S===l.current?d.current||m():(l.current=S,p.current=S,d.current=!0,x())};return o.onStateChange=w,o.trySubscribe(),w(),()=>{if(g=!0,o.tryUnsubscribe(),o.onStateChange=null,y)throw y}}function Qw(e,n){return e===n}function Xw(e,n,o,{pure:s,areStatesEqual:a=Qw,areOwnPropsEqual:l=ru,areStatePropsEqual:d=ru,areMergedPropsEqual:f=ru,forwardRef:p=!1,context:m=Og}={}){const x=m,g=Sw(e),y=Cw(n),w=jw(o),C=!!e;return S=>{const B=S.displayName||S.name||"Component",$=`Connect(${B})`,P={shouldHandleStateChanges:C,displayName:$,wrappedComponentName:B,WrappedComponent:S,initMapStateToProps:g,initMapDispatchToProps:y,initMergeProps:w,areStatesEqual:a,areStatePropsEqual:d,areOwnPropsEqual:l,areMergedPropsEqual:f};function T(R){const[M,Y,ee]=b.useMemo(()=>{const{reactReduxForwardedRef:Ee,...xe}=R;return[R.context,Ee,xe]},[R]),oe=b.useMemo(()=>{let Ee=x;return M?.Consumer,Ee},[M,x]),O=b.useContext(oe),V=!!R.store&&!!R.store.getState&&!!R.store.dispatch,U=!!O&&!!O.store,X=V?R.store:O.store,J=U?O.getServerState:X.getState,se=b.useMemo(()=>ww(X.dispatch,P),[X]),[q,Q]=b.useMemo(()=>{if(!C)return Ww;const Ee=Ig(X,V?void 0:O.subscription),xe=Ee.notifyNestedSubs.bind(Ee);return[Ee,xe]},[X,V,O]),K=b.useMemo(()=>V?O:{...O,subscription:q},[V,O,q]),D=b.useRef(void 0),F=b.useRef(ee),ae=b.useRef(void 0),de=b.useRef(!1),ne=b.useRef(!1),pe=b.useRef(void 0);xa(()=>(ne.current=!0,()=>{ne.current=!1}),[]);const Ae=b.useMemo(()=>()=>ae.current&&ee===F.current?ae.current:se(X.getState(),ee),[X,ee]),ve=b.useMemo(()=>xe=>q?Yw(C,X,q,se,F,D,de,ne,ae,Q,xe):()=>{},[q]);qw(Kw,[F,D,de,ee,ae,Q]);let le;try{le=b.useSyncExternalStore(ve,Ae,J?()=>se(J(),ee):Ae)}catch(Ee){throw pe.current&&(Ee.message+=`
The error may be correlated with this previous error:
${pe.current.stack}

`),Ee}xa(()=>{pe.current=void 0,ae.current=void 0,D.current=le});const he=b.useMemo(()=>b.createElement(S,{...le,ref:Y}),[Y,S,le]);return b.useMemo(()=>C?b.createElement(oe.Provider,{value:K},he):he,[oe,he,K])}const I=b.memo(T);if(I.WrappedComponent=S,I.displayName=T.displayName=$,p){const M=b.forwardRef(function(ee,oe){return b.createElement(I,{...ee,reactReduxForwardedRef:oe})});return M.displayName=$,M.WrappedComponent=S,Au(M,S)}return Au(I,S)}}var Mg=Xw;function Zw(e){const{children:n,context:o,serverState:s,store:a}=e,l=b.useMemo(()=>{const p=Ig(a);return{store:a,subscription:p,getServerState:s?()=>s:void 0}},[a,s]),d=b.useMemo(()=>a.getState(),[a]);xa(()=>{const{subscription:p}=l;return p.onStateChange=p.notifyNestedSubs,p.trySubscribe(),d!==a.getState()&&p.notifyNestedSubs(),()=>{p.tryUnsubscribe(),p.onStateChange=void 0}},[l,d]);const f=o||Og;return b.createElement(f.Provider,{value:l},n)}var Jw=Zw,eN="Invariant failed";function tN(e,n){throw new Error(eN)}var En=function(n){var o=n.top,s=n.right,a=n.bottom,l=n.left,d=s-l,f=a-o,p={top:o,right:s,bottom:a,left:l,width:d,height:f,x:l,y:o,center:{x:(s+l)/2,y:(a+o)/2}};return p},nd=function(n,o){return{top:n.top-o.top,left:n.left-o.left,bottom:n.bottom+o.bottom,right:n.right+o.right}},bm=function(n,o){return{top:n.top+o.top,left:n.left+o.left,bottom:n.bottom-o.bottom,right:n.right-o.right}},nN=function(n,o){return{top:n.top+o.y,left:n.left+o.x,bottom:n.bottom+o.y,right:n.right+o.x}},ou={top:0,right:0,bottom:0,left:0},rd=function(n){var o=n.borderBox,s=n.margin,a=s===void 0?ou:s,l=n.border,d=l===void 0?ou:l,f=n.padding,p=f===void 0?ou:f,m=En(nd(o,a)),x=En(bm(o,d)),g=En(bm(x,p));return{marginBox:m,borderBox:En(o),paddingBox:x,contentBox:g,margin:a,border:d,padding:p}},cn=function(n){var o=n.slice(0,-2),s=n.slice(-2);if(s!=="px")return 0;var a=Number(o);return isNaN(a)&&tN(),a},rN=function(){return{x:window.pageXOffset,y:window.pageYOffset}},ya=function(n,o){var s=n.borderBox,a=n.border,l=n.margin,d=n.padding,f=nN(s,o);return rd({borderBox:f,border:a,margin:l,padding:d})},ba=function(n,o){return o===void 0&&(o=rN()),ya(n,o)},_g=function(n,o){var s={top:cn(o.marginTop),right:cn(o.marginRight),bottom:cn(o.marginBottom),left:cn(o.marginLeft)},a={top:cn(o.paddingTop),right:cn(o.paddingRight),bottom:cn(o.paddingBottom),left:cn(o.paddingLeft)},l={top:cn(o.borderTopWidth),right:cn(o.borderRightWidth),bottom:cn(o.borderBottomWidth),left:cn(o.borderLeftWidth)};return rd({borderBox:n,margin:s,padding:a,border:l})},Lg=function(n){var o=n.getBoundingClientRect(),s=window.getComputedStyle(n);return _g(o,s)},Ts=function(n){var o=[],s=null,a=function(){for(var d=arguments.length,f=new Array(d),p=0;p<d;p++)f[p]=arguments[p];o=f,!s&&(s=requestAnimationFrame(function(){s=null,n.apply(void 0,o)}))};return a.cancel=function(){s&&(cancelAnimationFrame(s),s=null)},a};function wa(){return wa=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var o=arguments[n];for(var s in o)({}).hasOwnProperty.call(o,s)&&(e[s]=o[s])}return e},wa.apply(null,arguments)}function Bg(e,n){}Bg.bind(null,"warn");Bg.bind(null,"error");function Dr(){}function oN(e,n){return{...e,...n}}function dn(e,n,o){const s=n.map(a=>{const l=oN(o,a.options);return e.addEventListener(a.eventName,a.fn,l),function(){e.removeEventListener(a.eventName,a.fn,l)}});return function(){s.forEach(l=>{l()})}}const sN="Invariant failed";class Na extends Error{}Na.prototype.toString=function(){return this.message};function ue(e,n){throw new Na(sN)}class iN extends we.Component{constructor(...n){super(...n),this.callbacks=null,this.unbind=Dr,this.onWindowError=o=>{const s=this.getCallbacks();s.isDragging()&&s.tryAbort(),o.error instanceof Na&&o.preventDefault()},this.getCallbacks=()=>{if(!this.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return this.callbacks},this.setCallbacks=o=>{this.callbacks=o}}componentDidMount(){this.unbind=dn(window,[{eventName:"error",fn:this.onWindowError}])}componentDidCatch(n){if(n instanceof Na){this.setState({});return}throw n}componentWillUnmount(){this.unbind()}render(){return this.props.children(this.setCallbacks)}}const aN=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,Ca=e=>e+1,lN=e=>`
  You have lifted an item in position ${Ca(e.source.index)}
`,Fg=(e,n)=>{const o=e.droppableId===n.droppableId,s=Ca(e.index),a=Ca(n.index);return o?`
      You have moved the item from position ${s}
      to position ${a}
    `:`
    You have moved the item from position ${s}
    in list ${e.droppableId}
    to list ${n.droppableId}
    in position ${a}
  `},$g=(e,n,o)=>n.droppableId===o.droppableId?`
      The item ${e}
      has been combined with ${o.draggableId}`:`
      The item ${e}
      in list ${n.droppableId}
      has been combined with ${o.draggableId}
      in list ${o.droppableId}
    `,cN=e=>{const n=e.destination;if(n)return Fg(e.source,n);const o=e.combine;return o?$g(e.draggableId,e.source,o):"You are over an area that cannot be dropped on"},wm=e=>`
  The item has returned to its starting position
  of ${Ca(e.index)}
`,uN=e=>{if(e.reason==="CANCEL")return`
      Movement cancelled.
      ${wm(e.source)}
    `;const n=e.destination,o=e.combine;return n?`
      You have dropped the item.
      ${Fg(e.source,n)}
    `:o?`
      You have dropped the item.
      ${$g(e.draggableId,e.source,o)}
    `:`
    The item has been dropped while not over a drop area.
    ${wm(e.source)}
  `},ua={dragHandleUsageInstructions:aN,onDragStart:lN,onDragUpdate:cN,onDragEnd:uN};function dN(e,n){return!!(e===n||Number.isNaN(e)&&Number.isNaN(n))}function zg(e,n){if(e.length!==n.length)return!1;for(let o=0;o<e.length;o++)if(!dN(e[o],n[o]))return!1;return!0}function Me(e,n){const o=b.useState(()=>({inputs:n,result:e()}))[0],s=b.useRef(!0),a=b.useRef(o),d=s.current||!!(n&&a.current.inputs&&zg(n,a.current.inputs))?a.current:{inputs:n,result:e()};return b.useEffect(()=>{s.current=!1,a.current=d},[d]),d.result}function Ce(e,n){return Me(()=>e,n)}const mt={x:0,y:0},wt=(e,n)=>({x:e.x+n.x,y:e.y+n.y}),Zt=(e,n)=>({x:e.x-n.x,y:e.y-n.y}),jr=(e,n)=>e.x===n.x&&e.y===n.y,ko=e=>({x:e.x!==0?-e.x:0,y:e.y!==0?-e.y:0}),Qr=(e,n,o=0)=>e==="x"?{x:n,y:o}:{x:o,y:n},Os=(e,n)=>Math.sqrt((n.x-e.x)**2+(n.y-e.y)**2),Nm=(e,n)=>Math.min(...n.map(o=>Os(e,o))),Vg=e=>n=>({x:e(n.x),y:e(n.y)});var fN=(e,n)=>{const o=En({top:Math.max(n.top,e.top),right:Math.min(n.right,e.right),bottom:Math.min(n.bottom,e.bottom),left:Math.max(n.left,e.left)});return o.width<=0||o.height<=0?null:o};const Ws=(e,n)=>({top:e.top+n.y,left:e.left+n.x,bottom:e.bottom+n.y,right:e.right+n.x}),Cm=e=>[{x:e.left,y:e.top},{x:e.right,y:e.top},{x:e.left,y:e.bottom},{x:e.right,y:e.bottom}],pN={top:0,right:0,bottom:0,left:0},hN=(e,n)=>n?Ws(e,n.scroll.diff.displacement):e,mN=(e,n,o)=>o&&o.increasedBy?{...e,[n.end]:e[n.end]+o.increasedBy[n.line]}:e,gN=(e,n)=>n&&n.shouldClipSubject?fN(n.pageMarginBox,e):En(e);var jo=({page:e,withPlaceholder:n,axis:o,frame:s})=>{const a=hN(e.marginBox,s),l=mN(a,o,n),d=gN(l,s);return{page:e,withPlaceholder:n,active:d}},od=(e,n)=>{e.frame||ue();const o=e.frame,s=Zt(n,o.scroll.initial),a=ko(s),l={...o,scroll:{initial:o.scroll.initial,current:n,diff:{value:s,displacement:a},max:o.scroll.max}},d=jo({page:e.subject.page,withPlaceholder:e.subject.withPlaceholder,axis:e.axis,frame:l});return{...e,frame:l,subject:d}};function ht(e,n=zg){let o=null;function s(...a){if(o&&o.lastThis===this&&n(a,o.lastArgs))return o.lastResult;const l=e.apply(this,a);return o={lastResult:l,lastArgs:a,lastThis:this},l}return s.clear=function(){o=null},s}const Gg=ht(e=>e.reduce((n,o)=>(n[o.descriptor.id]=o,n),{})),Ug=ht(e=>e.reduce((n,o)=>(n[o.descriptor.id]=o,n),{})),_a=ht(e=>Object.values(e)),vN=ht(e=>Object.values(e));var Io=ht((e,n)=>vN(n).filter(s=>e===s.descriptor.droppableId).sort((s,a)=>s.descriptor.index-a.descriptor.index));function sd(e){return e.at&&e.at.type==="REORDER"?e.at.destination:null}function La(e){return e.at&&e.at.type==="COMBINE"?e.at.combine:null}var Ba=ht((e,n)=>n.filter(o=>o.descriptor.id!==e.descriptor.id)),xN=({isMovingForward:e,draggable:n,destination:o,insideDestination:s,previousImpact:a})=>{if(!o.isCombineEnabled||!sd(a))return null;function d(w){const C={type:"COMBINE",combine:{draggableId:w,droppableId:o.descriptor.id}};return{...a,at:C}}const f=a.displaced.all,p=f.length?f[0]:null;if(e)return p?d(p):null;const m=Ba(n,s);if(!p){if(!m.length)return null;const w=m[m.length-1];return d(w.descriptor.id)}const x=m.findIndex(w=>w.descriptor.id===p);x===-1&&ue();const g=x-1;if(g<0)return null;const y=m[g];return d(y.descriptor.id)},To=(e,n)=>e.descriptor.droppableId===n.descriptor.id;const Hg={point:mt,value:0},Ms={invisible:{},visible:{},all:[]},yN={displaced:Ms,displacedBy:Hg,at:null};var fn=(e,n)=>o=>e<=o&&o<=n,Wg=e=>{const n=fn(e.top,e.bottom),o=fn(e.left,e.right);return s=>{if(n(s.top)&&n(s.bottom)&&o(s.left)&&o(s.right))return!0;const l=n(s.top)||n(s.bottom),d=o(s.left)||o(s.right);if(l&&d)return!0;const p=s.top<e.top&&s.bottom>e.bottom,m=s.left<e.left&&s.right>e.right;return p&&m?!0:p&&d||m&&l}},bN=e=>{const n=fn(e.top,e.bottom),o=fn(e.left,e.right);return s=>n(s.top)&&n(s.bottom)&&o(s.left)&&o(s.right)};const id={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},qg={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"};var wN=e=>n=>{const o=fn(n.top,n.bottom),s=fn(n.left,n.right);return a=>e===id?o(a.top)&&o(a.bottom):s(a.left)&&s(a.right)};const NN=(e,n)=>{const o=n.frame?n.frame.scroll.diff.displacement:mt;return Ws(e,o)},CN=(e,n,o)=>n.subject.active?o(n.subject.active)(e):!1,SN=(e,n,o)=>o(n)(e),ad=({target:e,destination:n,viewport:o,withDroppableDisplacement:s,isVisibleThroughFrameFn:a})=>{const l=s?NN(e,n):e;return CN(l,n,a)&&SN(l,o,a)},EN=e=>ad({...e,isVisibleThroughFrameFn:Wg}),Kg=e=>ad({...e,isVisibleThroughFrameFn:bN}),DN=e=>ad({...e,isVisibleThroughFrameFn:wN(e.destination.axis)}),jN=(e,n,o)=>{if(typeof o=="boolean")return o;if(!n)return!0;const{invisible:s,visible:a}=n;if(s[e])return!1;const l=a[e];return l?l.shouldAnimate:!0};function AN(e,n){const o=e.page.marginBox,s={top:n.point.y,right:0,bottom:0,left:n.point.x};return En(nd(o,s))}function _s({afterDragging:e,destination:n,displacedBy:o,viewport:s,forceShouldAnimate:a,last:l}){return e.reduce(function(f,p){const m=AN(p,o),x=p.descriptor.id;if(f.all.push(x),!EN({target:m,destination:n,viewport:s,withDroppableDisplacement:!0}))return f.invisible[p.descriptor.id]=!0,f;const y=jN(x,l,a),w={draggableId:x,shouldAnimate:y};return f.visible[x]=w,f},{all:[],visible:{},invisible:{}})}function PN(e,n){if(!e.length)return 0;const o=e[e.length-1].descriptor.index;return n.inHomeList?o:o+1}function Sm({insideDestination:e,inHomeList:n,displacedBy:o,destination:s}){const a=PN(e,{inHomeList:n});return{displaced:Ms,displacedBy:o,at:{type:"REORDER",destination:{droppableId:s.descriptor.id,index:a}}}}function Sa({draggable:e,insideDestination:n,destination:o,viewport:s,displacedBy:a,last:l,index:d,forceShouldAnimate:f}){const p=To(e,o);if(d==null)return Sm({insideDestination:n,inHomeList:p,displacedBy:a,destination:o});const m=n.find(C=>C.descriptor.index===d);if(!m)return Sm({insideDestination:n,inHomeList:p,displacedBy:a,destination:o});const x=Ba(e,n),g=n.indexOf(m),y=x.slice(g);return{displaced:_s({afterDragging:y,destination:o,displacedBy:a,last:l,viewport:s.frame,forceShouldAnimate:f}),displacedBy:a,at:{type:"REORDER",destination:{droppableId:o.descriptor.id,index:d}}}}function Ar(e,n){return!!n.effected[e]}var RN=({isMovingForward:e,destination:n,draggables:o,combine:s,afterCritical:a})=>{if(!n.isCombineEnabled)return null;const l=s.draggableId,f=o[l].descriptor.index;return Ar(l,a)?e?f:f-1:e?f+1:f},kN=({isMovingForward:e,isInHomeList:n,insideDestination:o,location:s})=>{if(!o.length)return null;const a=s.index,l=e?a+1:a-1,d=o[0].descriptor.index,f=o[o.length-1].descriptor.index,p=n?f:f+1;return l<d||l>p?null:l},IN=({isMovingForward:e,isInHomeList:n,draggable:o,draggables:s,destination:a,insideDestination:l,previousImpact:d,viewport:f,afterCritical:p})=>{const m=d.at;if(m||ue(),m.type==="REORDER"){const g=kN({isMovingForward:e,isInHomeList:n,location:m.destination,insideDestination:l});return g==null?null:Sa({draggable:o,insideDestination:l,destination:a,viewport:f,last:d.displaced,displacedBy:d.displacedBy,index:g})}const x=RN({isMovingForward:e,destination:a,displaced:d.displaced,draggables:s,combine:m.combine,afterCritical:p});return x==null?null:Sa({draggable:o,insideDestination:l,destination:a,viewport:f,last:d.displaced,displacedBy:d.displacedBy,index:x})},TN=({displaced:e,afterCritical:n,combineWith:o,displacedBy:s})=>{const a=!!(e.visible[o]||e.invisible[o]);return Ar(o,n)?a?mt:ko(s.point):a?s.point:mt},ON=({afterCritical:e,impact:n,draggables:o})=>{const s=La(n);s||ue();const a=s.draggableId,l=o[a].page.borderBox.center,d=TN({displaced:n.displaced,afterCritical:e,combineWith:a,displacedBy:n.displacedBy});return wt(l,d)};const Yg=(e,n)=>n.margin[e.start]+n.borderBox[e.size]/2,MN=(e,n)=>n.margin[e.end]+n.borderBox[e.size]/2,ld=(e,n,o)=>n[e.crossAxisStart]+o.margin[e.crossAxisStart]+o.borderBox[e.crossAxisSize]/2,Em=({axis:e,moveRelativeTo:n,isMoving:o})=>Qr(e.line,n.marginBox[e.end]+Yg(e,o),ld(e,n.marginBox,o)),Dm=({axis:e,moveRelativeTo:n,isMoving:o})=>Qr(e.line,n.marginBox[e.start]-MN(e,o),ld(e,n.marginBox,o)),_N=({axis:e,moveInto:n,isMoving:o})=>Qr(e.line,n.contentBox[e.start]+Yg(e,o),ld(e,n.contentBox,o));var LN=({impact:e,draggable:n,draggables:o,droppable:s,afterCritical:a})=>{const l=Io(s.descriptor.id,o),d=n.page,f=s.axis;if(!l.length)return _N({axis:f,moveInto:s.page,isMoving:d});const{displaced:p,displacedBy:m}=e,x=p.all[0];if(x){const y=o[x];if(Ar(x,a))return Dm({axis:f,moveRelativeTo:y.page,isMoving:d});const w=ya(y.page,m.point);return Dm({axis:f,moveRelativeTo:w,isMoving:d})}const g=l[l.length-1];if(g.descriptor.id===n.descriptor.id)return d.borderBox.center;if(Ar(g.descriptor.id,a)){const y=ya(g.page,ko(a.displacedBy.point));return Em({axis:f,moveRelativeTo:y,isMoving:d})}return Em({axis:f,moveRelativeTo:g.page,isMoving:d})},Pu=(e,n)=>{const o=e.frame;return o?wt(n,o.scroll.diff.displacement):n};const BN=({impact:e,draggable:n,droppable:o,draggables:s,afterCritical:a})=>{const l=n.page.borderBox.center,d=e.at;return!o||!d?l:d.type==="REORDER"?LN({impact:e,draggable:n,draggables:s,droppable:o,afterCritical:a}):ON({impact:e,draggables:s,afterCritical:a})};var Fa=e=>{const n=BN(e),o=e.droppable;return o?Pu(o,n):n},Qg=(e,n)=>{const o=Zt(n,e.scroll.initial),s=ko(o);return{frame:En({top:n.y,bottom:n.y+e.frame.height,left:n.x,right:n.x+e.frame.width}),scroll:{initial:e.scroll.initial,max:e.scroll.max,current:n,diff:{value:o,displacement:s}}}};function jm(e,n){return e.map(o=>n[o])}function FN(e,n){for(let o=0;o<n.length;o++){const s=n[o].visible[e];if(s)return s}return null}var $N=({impact:e,viewport:n,destination:o,draggables:s,maxScrollChange:a})=>{const l=Qg(n,wt(n.scroll.current,a)),d=o.frame?od(o,wt(o.frame.scroll.current,a)):o,f=e.displaced,p=_s({afterDragging:jm(f.all,s),destination:o,displacedBy:e.displacedBy,viewport:l.frame,last:f,forceShouldAnimate:!1}),m=_s({afterDragging:jm(f.all,s),destination:d,displacedBy:e.displacedBy,viewport:n.frame,last:f,forceShouldAnimate:!1}),x={},g={},y=[f,p,m];return f.all.forEach(C=>{const E=FN(C,y);if(E){g[C]=E;return}x[C]=!0}),{...e,displaced:{all:f.all,invisible:x,visible:g}}},zN=(e,n)=>wt(e.scroll.diff.displacement,n),cd=({pageBorderBoxCenter:e,draggable:n,viewport:o})=>{const s=zN(o,e),a=Zt(s,n.page.borderBox.center);return wt(n.client.borderBox.center,a)},Xg=({draggable:e,destination:n,newPageBorderBoxCenter:o,viewport:s,withDroppableDisplacement:a,onlyOnMainAxis:l=!1})=>{const d=Zt(o,e.page.borderBox.center),p={target:Ws(e.page.borderBox,d),destination:n,withDroppableDisplacement:a,viewport:s};return l?DN(p):Kg(p)},VN=({isMovingForward:e,draggable:n,destination:o,draggables:s,previousImpact:a,viewport:l,previousPageBorderBoxCenter:d,previousClientSelection:f,afterCritical:p})=>{if(!o.isEnabled)return null;const m=Io(o.descriptor.id,s),x=To(n,o),g=xN({isMovingForward:e,draggable:n,destination:o,insideDestination:m,previousImpact:a})||IN({isMovingForward:e,isInHomeList:x,draggable:n,draggables:s,destination:o,insideDestination:m,previousImpact:a,viewport:l,afterCritical:p});if(!g)return null;const y=Fa({impact:g,draggable:n,droppable:o,draggables:s,afterCritical:p});if(Xg({draggable:n,destination:o,newPageBorderBoxCenter:y,viewport:l.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0}))return{clientSelection:cd({pageBorderBoxCenter:y,draggable:n,viewport:l}),impact:g,scrollJumpRequest:null};const C=Zt(y,d),E=$N({impact:g,viewport:l,destination:o,draggables:s,maxScrollChange:C});return{clientSelection:f,impact:E,scrollJumpRequest:C}};const Tt=e=>{const n=e.subject.active;return n||ue(),n};var GN=({isMovingForward:e,pageBorderBoxCenter:n,source:o,droppables:s,viewport:a})=>{const l=o.subject.active;if(!l)return null;const d=o.axis,f=fn(l[d.start],l[d.end]),p=_a(s).filter(x=>x!==o).filter(x=>x.isEnabled).filter(x=>!!x.subject.active).filter(x=>Wg(a.frame)(Tt(x))).filter(x=>{const g=Tt(x);return e?l[d.crossAxisEnd]<g[d.crossAxisEnd]:g[d.crossAxisStart]<l[d.crossAxisStart]}).filter(x=>{const g=Tt(x),y=fn(g[d.start],g[d.end]);return f(g[d.start])||f(g[d.end])||y(l[d.start])||y(l[d.end])}).sort((x,g)=>{const y=Tt(x)[d.crossAxisStart],w=Tt(g)[d.crossAxisStart];return e?y-w:w-y}).filter((x,g,y)=>Tt(x)[d.crossAxisStart]===Tt(y[0])[d.crossAxisStart]);if(!p.length)return null;if(p.length===1)return p[0];const m=p.filter(x=>fn(Tt(x)[d.start],Tt(x)[d.end])(n[d.line]));return m.length===1?m[0]:m.length>1?m.sort((x,g)=>Tt(x)[d.start]-Tt(g)[d.start])[0]:p.sort((x,g)=>{const y=Nm(n,Cm(Tt(x))),w=Nm(n,Cm(Tt(g)));return y!==w?y-w:Tt(x)[d.start]-Tt(g)[d.start]})[0]};const Am=(e,n)=>{const o=e.page.borderBox.center;return Ar(e.descriptor.id,n)?Zt(o,n.displacedBy.point):o},UN=(e,n)=>{const o=e.page.borderBox;return Ar(e.descriptor.id,n)?Ws(o,ko(n.displacedBy.point)):o};var HN=({pageBorderBoxCenter:e,viewport:n,destination:o,insideDestination:s,afterCritical:a})=>s.filter(d=>Kg({target:UN(d,a),destination:o,viewport:n.frame,withDroppableDisplacement:!0})).sort((d,f)=>{const p=Os(e,Pu(o,Am(d,a))),m=Os(e,Pu(o,Am(f,a)));return p<m?-1:m<p?1:d.descriptor.index-f.descriptor.index})[0]||null,qs=ht(function(n,o){const s=o[n.line];return{value:s,point:Qr(n.line,s)}});const WN=(e,n,o)=>{const s=e.axis;if(e.descriptor.mode==="virtual")return Qr(s.line,n[s.line]);const a=e.subject.page.contentBox[s.size],p=Io(e.descriptor.id,o).reduce((m,x)=>m+x.client.marginBox[s.size],0)+n[s.line]-a;return p<=0?null:Qr(s.line,p)},Zg=(e,n)=>({...e,scroll:{...e.scroll,max:n}}),Jg=(e,n,o)=>{const s=e.frame;To(n,e)&&ue(),e.subject.withPlaceholder&&ue();const a=qs(e.axis,n.displaceBy).point,l=WN(e,a,o),d={placeholderSize:a,increasedBy:l,oldFrameMaxScroll:e.frame?e.frame.scroll.max:null};if(!s){const x=jo({page:e.subject.page,withPlaceholder:d,axis:e.axis,frame:e.frame});return{...e,subject:x}}const f=l?wt(s.scroll.max,l):s.scroll.max,p=Zg(s,f),m=jo({page:e.subject.page,withPlaceholder:d,axis:e.axis,frame:p});return{...e,subject:m,frame:p}},qN=e=>{const n=e.subject.withPlaceholder;n||ue();const o=e.frame;if(!o){const d=jo({page:e.subject.page,axis:e.axis,frame:null,withPlaceholder:null});return{...e,subject:d}}const s=n.oldFrameMaxScroll;s||ue();const a=Zg(o,s),l=jo({page:e.subject.page,axis:e.axis,frame:a,withPlaceholder:null});return{...e,subject:l,frame:a}};var KN=({previousPageBorderBoxCenter:e,moveRelativeTo:n,insideDestination:o,draggable:s,draggables:a,destination:l,viewport:d,afterCritical:f})=>{if(!n){if(o.length)return null;const g={displaced:Ms,displacedBy:Hg,at:{type:"REORDER",destination:{droppableId:l.descriptor.id,index:0}}},y=Fa({impact:g,draggable:s,droppable:l,draggables:a,afterCritical:f}),w=To(s,l)?l:Jg(l,s,a);return Xg({draggable:s,destination:w,newPageBorderBoxCenter:y,viewport:d.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0})?g:null}const p=e[l.axis.line]<=n.page.borderBox.center[l.axis.line],m=(()=>{const g=n.descriptor.index;return n.descriptor.id===s.descriptor.id||p?g:g+1})(),x=qs(l.axis,s.displaceBy);return Sa({draggable:s,insideDestination:o,destination:l,viewport:d,displacedBy:x,last:Ms,index:m})},YN=({isMovingForward:e,previousPageBorderBoxCenter:n,draggable:o,isOver:s,draggables:a,droppables:l,viewport:d,afterCritical:f})=>{const p=GN({isMovingForward:e,pageBorderBoxCenter:n,source:s,droppables:l,viewport:d});if(!p)return null;const m=Io(p.descriptor.id,a),x=HN({pageBorderBoxCenter:n,viewport:d,destination:p,insideDestination:m,afterCritical:f}),g=KN({previousPageBorderBoxCenter:n,destination:p,draggable:o,draggables:a,moveRelativeTo:x,insideDestination:m,viewport:d,afterCritical:f});if(!g)return null;const y=Fa({impact:g,draggable:o,droppable:p,draggables:a,afterCritical:f});return{clientSelection:cd({pageBorderBoxCenter:y,draggable:o,viewport:d}),impact:g,scrollJumpRequest:null}},Jt=e=>{const n=e.at;return n?n.type==="REORDER"?n.destination.droppableId:n.combine.droppableId:null};const QN=(e,n)=>{const o=Jt(e);return o?n[o]:null};var XN=({state:e,type:n})=>{const o=QN(e.impact,e.dimensions.droppables),s=!!o,a=e.dimensions.droppables[e.critical.droppable.id],l=o||a,d=l.axis.direction,f=d==="vertical"&&(n==="MOVE_UP"||n==="MOVE_DOWN")||d==="horizontal"&&(n==="MOVE_LEFT"||n==="MOVE_RIGHT");if(f&&!s)return null;const p=n==="MOVE_DOWN"||n==="MOVE_RIGHT",m=e.dimensions.draggables[e.critical.draggable.id],x=e.current.page.borderBoxCenter,{draggables:g,droppables:y}=e.dimensions;return f?VN({isMovingForward:p,previousPageBorderBoxCenter:x,draggable:m,destination:l,draggables:g,viewport:e.viewport,previousClientSelection:e.current.client.selection,previousImpact:e.impact,afterCritical:e.afterCritical}):YN({isMovingForward:p,previousPageBorderBoxCenter:x,draggable:m,isOver:l,draggables:g,droppables:y,viewport:e.viewport,afterCritical:e.afterCritical})};function Kr(e){return e.phase==="DRAGGING"||e.phase==="COLLECTING"}function e0(e){const n=fn(e.top,e.bottom),o=fn(e.left,e.right);return function(a){return n(a.y)&&o(a.x)}}function ZN(e,n){return e.left<n.right&&e.right>n.left&&e.top<n.bottom&&e.bottom>n.top}function JN({pageBorderBox:e,draggable:n,candidates:o}){const s=n.page.borderBox.center,a=o.map(l=>{const d=l.axis,f=Qr(l.axis.line,e.center[d.line],l.page.borderBox.center[d.crossAxisLine]);return{id:l.descriptor.id,distance:Os(s,f)}}).sort((l,d)=>d.distance-l.distance);return a[0]?a[0].id:null}function e2({pageBorderBox:e,draggable:n,droppables:o}){const s=_a(o).filter(a=>{if(!a.isEnabled)return!1;const l=a.subject.active;if(!l||!ZN(e,l))return!1;if(e0(l)(e.center))return!0;const d=a.axis,f=l.center[d.crossAxisLine],p=e[d.crossAxisStart],m=e[d.crossAxisEnd],x=fn(l[d.crossAxisStart],l[d.crossAxisEnd]),g=x(p),y=x(m);return!g&&!y?!0:g?p<f:m>f});return s.length?s.length===1?s[0].descriptor.id:JN({pageBorderBox:e,draggable:n,candidates:s}):null}const t0=(e,n)=>En(Ws(e,n));var t2=(e,n)=>{const o=e.frame;return o?t0(n,o.scroll.diff.value):n};function n0({displaced:e,id:n}){return!!(e.visible[n]||e.invisible[n])}function n2({draggable:e,closest:n,inHomeList:o}){return n?o&&n.descriptor.index>e.descriptor.index?n.descriptor.index-1:n.descriptor.index:null}var r2=({pageBorderBoxWithDroppableScroll:e,draggable:n,destination:o,insideDestination:s,last:a,viewport:l,afterCritical:d})=>{const f=o.axis,p=qs(o.axis,n.displaceBy),m=p.value,x=e[f.start],g=e[f.end],w=Ba(n,s).find(E=>{const S=E.descriptor.id,B=E.page.borderBox.center[f.line],$=Ar(S,d),P=n0({displaced:a,id:S});return $?P?g<=B:x<B-m:P?g<=B+m:x<B})||null,C=n2({draggable:n,closest:w,inHomeList:To(n,o)});return Sa({draggable:n,insideDestination:s,destination:o,viewport:l,last:a,displacedBy:p,index:C})};const o2=4;var s2=({draggable:e,pageBorderBoxWithDroppableScroll:n,previousImpact:o,destination:s,insideDestination:a,afterCritical:l})=>{if(!s.isCombineEnabled)return null;const d=s.axis,f=qs(s.axis,e.displaceBy),p=f.value,m=n[d.start],x=n[d.end],y=Ba(e,a).find(C=>{const E=C.descriptor.id,S=C.page.borderBox,$=S[d.size]/o2,P=Ar(E,l),T=n0({displaced:o.displaced,id:E});return P?T?x>S[d.start]+$&&x<S[d.end]-$:m>S[d.start]-p+$&&m<S[d.end]-p-$:T?x>S[d.start]+p+$&&x<S[d.end]+p-$:m>S[d.start]+$&&m<S[d.end]-$});return y?{displacedBy:f,displaced:o.displaced,at:{type:"COMBINE",combine:{draggableId:y.descriptor.id,droppableId:s.descriptor.id}}}:null},r0=({pageOffset:e,draggable:n,draggables:o,droppables:s,previousImpact:a,viewport:l,afterCritical:d})=>{const f=t0(n.page.borderBox,e),p=e2({pageBorderBox:f,draggable:n,droppables:s});if(!p)return yN;const m=s[p],x=Io(m.descriptor.id,o),g=t2(m,f);return s2({pageBorderBoxWithDroppableScroll:g,draggable:n,previousImpact:a,destination:m,insideDestination:x,afterCritical:d})||r2({pageBorderBoxWithDroppableScroll:g,draggable:n,destination:m,insideDestination:x,last:a.displaced,viewport:l,afterCritical:d})},ud=(e,n)=>({...e,[n.descriptor.id]:n});const i2=({previousImpact:e,impact:n,droppables:o})=>{const s=Jt(e),a=Jt(n);if(!s||s===a)return o;const l=o[s];if(!l.subject.withPlaceholder)return o;const d=qN(l);return ud(o,d)};var a2=({draggable:e,draggables:n,droppables:o,previousImpact:s,impact:a})=>{const l=i2({previousImpact:s,impact:a,droppables:o}),d=Jt(a);if(!d)return l;const f=o[d];if(To(e,f)||f.subject.withPlaceholder)return l;const p=Jg(f,e,n);return ud(l,p)},Es=({state:e,clientSelection:n,dimensions:o,viewport:s,impact:a,scrollJumpRequest:l})=>{const d=s||e.viewport,f=o||e.dimensions,p=n||e.current.client.selection,m=Zt(p,e.initial.client.selection),x={offset:m,selection:p,borderBoxCenter:wt(e.initial.client.borderBoxCenter,m)},g={selection:wt(x.selection,d.scroll.current),borderBoxCenter:wt(x.borderBoxCenter,d.scroll.current),offset:wt(x.offset,d.scroll.diff.value)},y={client:x,page:g};if(e.phase==="COLLECTING")return{...e,dimensions:f,viewport:d,current:y};const w=f.draggables[e.critical.draggable.id],C=a||r0({pageOffset:g.offset,draggable:w,draggables:f.draggables,droppables:f.droppables,previousImpact:e.impact,viewport:d,afterCritical:e.afterCritical}),E=a2({draggable:w,impact:C,previousImpact:e.impact,draggables:f.draggables,droppables:f.droppables});return{...e,current:y,dimensions:{draggables:f.draggables,droppables:E},impact:C,viewport:d,scrollJumpRequest:l||null,forceShouldAnimate:l?!1:null}};function l2(e,n){return e.map(o=>n[o])}var o0=({impact:e,viewport:n,draggables:o,destination:s,forceShouldAnimate:a})=>{const l=e.displaced,d=l2(l.all,o),f=_s({afterDragging:d,destination:s,displacedBy:e.displacedBy,viewport:n.frame,forceShouldAnimate:a,last:l});return{...e,displaced:f}},s0=({impact:e,draggable:n,droppable:o,draggables:s,viewport:a,afterCritical:l})=>{const d=Fa({impact:e,draggable:n,draggables:s,droppable:o,afterCritical:l});return cd({pageBorderBoxCenter:d,draggable:n,viewport:a})},i0=({state:e,dimensions:n,viewport:o})=>{e.movementMode!=="SNAP"&&ue();const s=e.impact,a=o||e.viewport,l=n||e.dimensions,{draggables:d,droppables:f}=l,p=d[e.critical.draggable.id],m=Jt(s);m||ue();const x=f[m],g=o0({impact:s,viewport:a,destination:x,draggables:d}),y=s0({impact:g,draggable:p,droppable:x,draggables:d,viewport:a,afterCritical:e.afterCritical});return Es({impact:g,clientSelection:y,state:e,dimensions:l,viewport:a})},c2=e=>({index:e.index,droppableId:e.droppableId}),a0=({draggable:e,home:n,draggables:o,viewport:s})=>{const a=qs(n.axis,e.displaceBy),l=Io(n.descriptor.id,o),d=l.indexOf(e);d===-1&&ue();const f=l.slice(d+1),p=f.reduce((y,w)=>(y[w.descriptor.id]=!0,y),{}),m={inVirtualList:n.descriptor.mode==="virtual",displacedBy:a,effected:p};return{impact:{displaced:_s({afterDragging:f,destination:n,displacedBy:a,last:null,viewport:s.frame,forceShouldAnimate:!1}),displacedBy:a,at:{type:"REORDER",destination:c2(e.descriptor)}},afterCritical:m}},u2=(e,n)=>({draggables:e.draggables,droppables:ud(e.droppables,n)}),d2=({draggable:e,offset:n,initialWindowScroll:o})=>{const s=ya(e.client,n),a=ba(s,o);return{...e,placeholder:{...e.placeholder,client:s},client:s,page:a}},f2=e=>{const n=e.frame;return n||ue(),n},p2=({additions:e,updatedDroppables:n,viewport:o})=>{const s=o.scroll.diff.value;return e.map(a=>{const l=a.descriptor.droppableId,d=n[l],p=f2(d).scroll.diff.value,m=wt(s,p);return d2({draggable:a,offset:m,initialWindowScroll:o.scroll.initial})})},h2=({state:e,published:n})=>{const o=n.modified.map(B=>{const $=e.dimensions.droppables[B.droppableId];return od($,B.scroll)}),s={...e.dimensions.droppables,...Gg(o)},a=Ug(p2({additions:n.additions,updatedDroppables:s,viewport:e.viewport})),l={...e.dimensions.draggables,...a};n.removals.forEach(B=>{delete l[B]});const d={droppables:s,draggables:l},f=Jt(e.impact),p=f?d.droppables[f]:null,m=d.draggables[e.critical.draggable.id],x=d.droppables[e.critical.droppable.id],{impact:g,afterCritical:y}=a0({draggable:m,home:x,draggables:l,viewport:e.viewport}),w=p&&p.isCombineEnabled?e.impact:g,C=r0({pageOffset:e.current.page.offset,draggable:d.draggables[e.critical.draggable.id],draggables:d.draggables,droppables:d.droppables,previousImpact:w,viewport:e.viewport,afterCritical:y}),E={...e,phase:"DRAGGING",impact:C,onLiftImpact:g,dimensions:d,afterCritical:y,forceShouldAnimate:!1};return e.phase==="COLLECTING"?E:{...E,phase:"DROP_PENDING",reason:e.reason,isWaiting:!1}};const Ru=e=>e.movementMode==="SNAP",su=(e,n,o)=>{const s=u2(e.dimensions,n);return!Ru(e)||o?Es({state:e,dimensions:s}):i0({state:e,dimensions:s})};function iu(e){return e.isDragging&&e.movementMode==="SNAP"?{...e,scrollJumpRequest:null}:e}const Pm={phase:"IDLE",completed:null,shouldFlush:!1};var m2=(e=Pm,n)=>{if(n.type==="FLUSH")return{...Pm,shouldFlush:!0};if(n.type==="INITIAL_PUBLISH"){e.phase!=="IDLE"&&ue();const{critical:o,clientSelection:s,viewport:a,dimensions:l,movementMode:d}=n.payload,f=l.draggables[o.draggable.id],p=l.droppables[o.droppable.id],m={selection:s,borderBoxCenter:f.client.borderBox.center,offset:mt},x={client:m,page:{selection:wt(m.selection,a.scroll.initial),borderBoxCenter:wt(m.selection,a.scroll.initial),offset:wt(m.selection,a.scroll.diff.value)}},g=_a(l.droppables).every(E=>!E.isFixedOnPage),{impact:y,afterCritical:w}=a0({draggable:f,home:p,draggables:l.draggables,viewport:a});return{phase:"DRAGGING",isDragging:!0,critical:o,movementMode:d,dimensions:l,initial:x,current:x,isWindowScrollAllowed:g,impact:y,afterCritical:w,onLiftImpact:y,viewport:a,scrollJumpRequest:null,forceShouldAnimate:null}}if(n.type==="COLLECTION_STARTING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"?e:(e.phase!=="DRAGGING"&&ue(),{...e,phase:"COLLECTING"});if(n.type==="PUBLISH_WHILE_DRAGGING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"||ue(),h2({state:e,published:n.payload});if(n.type==="MOVE"){if(e.phase==="DROP_PENDING")return e;Kr(e)||ue();const{client:o}=n.payload;return jr(o,e.current.client.selection)?e:Es({state:e,clientSelection:o,impact:Ru(e)?e.impact:null})}if(n.type==="UPDATE_DROPPABLE_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="COLLECTING")return iu(e);Kr(e)||ue();const{id:o,newScroll:s}=n.payload,a=e.dimensions.droppables[o];if(!a)return e;const l=od(a,s);return su(e,l,!1)}if(n.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(e.phase==="DROP_PENDING")return e;Kr(e)||ue();const{id:o,isEnabled:s}=n.payload,a=e.dimensions.droppables[o];a||ue(),a.isEnabled===s&&ue();const l={...a,isEnabled:s};return su(e,l,!0)}if(n.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(e.phase==="DROP_PENDING")return e;Kr(e)||ue();const{id:o,isCombineEnabled:s}=n.payload,a=e.dimensions.droppables[o];a||ue(),a.isCombineEnabled===s&&ue();const l={...a,isCombineEnabled:s};return su(e,l,!0)}if(n.type==="MOVE_BY_WINDOW_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="DROP_ANIMATING")return e;Kr(e)||ue(),e.isWindowScrollAllowed||ue();const o=n.payload.newScroll;if(jr(e.viewport.scroll.current,o))return iu(e);const s=Qg(e.viewport,o);return Ru(e)?i0({state:e,viewport:s}):Es({state:e,viewport:s})}if(n.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!Kr(e))return e;const o=n.payload.maxScroll;if(jr(o,e.viewport.scroll.max))return e;const s={...e.viewport,scroll:{...e.viewport.scroll,max:o}};return{...e,viewport:s}}if(n.type==="MOVE_UP"||n.type==="MOVE_DOWN"||n.type==="MOVE_LEFT"||n.type==="MOVE_RIGHT"){if(e.phase==="COLLECTING"||e.phase==="DROP_PENDING")return e;e.phase!=="DRAGGING"&&ue();const o=XN({state:e,type:n.type});return o?Es({state:e,impact:o.impact,clientSelection:o.clientSelection,scrollJumpRequest:o.scrollJumpRequest}):e}if(n.type==="DROP_PENDING"){const o=n.payload.reason;return e.phase!=="COLLECTING"&&ue(),{...e,phase:"DROP_PENDING",isWaiting:!0,reason:o}}if(n.type==="DROP_ANIMATE"){const{completed:o,dropDuration:s,newHomeClientOffset:a}=n.payload;return e.phase==="DRAGGING"||e.phase==="DROP_PENDING"||ue(),{phase:"DROP_ANIMATING",completed:o,dropDuration:s,newHomeClientOffset:a,dimensions:e.dimensions}}if(n.type==="DROP_COMPLETE"){const{completed:o}=n.payload;return{phase:"IDLE",completed:o,shouldFlush:!1}}return e};function ze(e,n){return e instanceof Object&&"type"in e&&e.type===n}const g2=e=>({type:"BEFORE_INITIAL_CAPTURE",payload:e}),v2=e=>({type:"LIFT",payload:e}),x2=e=>({type:"INITIAL_PUBLISH",payload:e}),y2=e=>({type:"PUBLISH_WHILE_DRAGGING",payload:e}),b2=()=>({type:"COLLECTION_STARTING",payload:null}),w2=e=>({type:"UPDATE_DROPPABLE_SCROLL",payload:e}),N2=e=>({type:"UPDATE_DROPPABLE_IS_ENABLED",payload:e}),C2=e=>({type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:e}),l0=e=>({type:"MOVE",payload:e}),S2=e=>({type:"MOVE_BY_WINDOW_SCROLL",payload:e}),E2=e=>({type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:e}),D2=()=>({type:"MOVE_UP",payload:null}),j2=()=>({type:"MOVE_DOWN",payload:null}),A2=()=>({type:"MOVE_RIGHT",payload:null}),P2=()=>({type:"MOVE_LEFT",payload:null}),dd=()=>({type:"FLUSH",payload:null}),R2=e=>({type:"DROP_ANIMATE",payload:e}),fd=e=>({type:"DROP_COMPLETE",payload:e}),c0=e=>({type:"DROP",payload:e}),k2=e=>({type:"DROP_PENDING",payload:e}),u0=()=>({type:"DROP_ANIMATION_FINISHED",payload:null});var I2=e=>({getState:n,dispatch:o})=>s=>a=>{if(!ze(a,"LIFT")){s(a);return}const{id:l,clientSelection:d,movementMode:f}=a.payload,p=n();p.phase==="DROP_ANIMATING"&&o(fd({completed:p.completed})),n().phase!=="IDLE"&&ue(),o(dd()),o(g2({draggableId:l,movementMode:f}));const x={draggableId:l,scrollOptions:{shouldPublishImmediately:f==="SNAP"}},{critical:g,dimensions:y,viewport:w}=e.startPublishing(x);o(x2({critical:g,dimensions:y,clientSelection:d,movementMode:f,viewport:w}))},T2=e=>()=>n=>o=>{ze(o,"INITIAL_PUBLISH")&&e.dragging(),ze(o,"DROP_ANIMATE")&&e.dropping(o.payload.completed.result.reason),(ze(o,"FLUSH")||ze(o,"DROP_COMPLETE"))&&e.resting(),n(o)};const pd={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},Ls={opacity:{drop:0,combining:.7},scale:{drop:.75}},d0={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},qr=`${d0.outOfTheWay}s ${pd.outOfTheWay}`,Ds={fluid:`opacity ${qr}`,snap:`transform ${qr}, opacity ${qr}`,drop:e=>{const n=`${e}s ${pd.drop}`;return`transform ${n}, opacity ${n}`},outOfTheWay:`transform ${qr}`,placeholder:`height ${qr}, width ${qr}, margin ${qr}`},Rm=e=>jr(e,mt)?void 0:`translate(${e.x}px, ${e.y}px)`,ku={moveTo:Rm,drop:(e,n)=>{const o=Rm(e);if(o)return n?`${o} scale(${Ls.scale.drop})`:o}},{minDropTime:Iu,maxDropTime:f0}=d0,O2=f0-Iu,km=1500,M2=.6;var _2=({current:e,destination:n,reason:o})=>{const s=Os(e,n);if(s<=0)return Iu;if(s>=km)return f0;const a=s/km,l=Iu+O2*a,d=o==="CANCEL"?l*M2:l;return Number(d.toFixed(2))},L2=({impact:e,draggable:n,dimensions:o,viewport:s,afterCritical:a})=>{const{draggables:l,droppables:d}=o,f=Jt(e),p=f?d[f]:null,m=d[n.descriptor.droppableId],x=s0({impact:e,draggable:n,draggables:l,afterCritical:a,droppable:p||m,viewport:s});return Zt(x,n.client.borderBox.center)},B2=({draggables:e,reason:n,lastImpact:o,home:s,viewport:a,onLiftImpact:l})=>!o.at||n!=="DROP"?{impact:o0({draggables:e,impact:l,destination:s,viewport:a,forceShouldAnimate:!0}),didDropInsideDroppable:!1}:o.at.type==="REORDER"?{impact:o,didDropInsideDroppable:!0}:{impact:{...o,displaced:Ms},didDropInsideDroppable:!0};const F2=({getState:e,dispatch:n})=>o=>s=>{if(!ze(s,"DROP")){o(s);return}const a=e(),l=s.payload.reason;if(a.phase==="COLLECTING"){n(k2({reason:l}));return}if(a.phase==="IDLE")return;a.phase==="DROP_PENDING"&&a.isWaiting&&ue(),a.phase==="DRAGGING"||a.phase==="DROP_PENDING"||ue();const f=a.critical,p=a.dimensions,m=p.draggables[a.critical.draggable.id],{impact:x,didDropInsideDroppable:g}=B2({reason:l,lastImpact:a.impact,afterCritical:a.afterCritical,onLiftImpact:a.onLiftImpact,home:a.dimensions.droppables[a.critical.droppable.id],viewport:a.viewport,draggables:a.dimensions.draggables}),y=g?sd(x):null,w=g?La(x):null,C={index:f.draggable.index,droppableId:f.droppable.id},E={draggableId:m.descriptor.id,type:m.descriptor.type,source:C,reason:l,mode:a.movementMode,destination:y,combine:w},S=L2({impact:x,draggable:m,dimensions:p,viewport:a.viewport,afterCritical:a.afterCritical}),B={critical:a.critical,afterCritical:a.afterCritical,result:E,impact:x};if(!(!jr(a.current.client.offset,S)||!!E.combine)){n(fd({completed:B}));return}const P=_2({current:a.current.client.offset,destination:S,reason:l});n(R2({newHomeClientOffset:S,dropDuration:P,completed:B}))};var p0=()=>({x:window.pageXOffset,y:window.pageYOffset});function $2(e){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:n=>{n.target!==window&&n.target!==window.document||e()}}}function z2({onWindowScroll:e}){function n(){e(p0())}const o=Ts(n),s=$2(o);let a=Dr;function l(){return a!==Dr}function d(){l()&&ue(),a=dn(window,[s])}function f(){l()||ue(),o.cancel(),a(),a=Dr}return{start:d,stop:f,isActive:l}}const V2=e=>ze(e,"DROP_COMPLETE")||ze(e,"DROP_ANIMATE")||ze(e,"FLUSH"),G2=e=>{const n=z2({onWindowScroll:o=>{e.dispatch(S2({newScroll:o}))}});return o=>s=>{!n.isActive()&&ze(s,"INITIAL_PUBLISH")&&n.start(),n.isActive()&&V2(s)&&n.stop(),o(s)}};var U2=e=>{let n=!1,o=!1;const s=setTimeout(()=>{o=!0}),a=l=>{n||o||(n=!0,e(l),clearTimeout(s))};return a.wasCalled=()=>n,a},H2=()=>{const e=[],n=a=>{const l=e.findIndex(f=>f.timerId===a);l===-1&&ue();const[d]=e.splice(l,1);d.callback()};return{add:a=>{const l=setTimeout(()=>n(l)),d={timerId:l,callback:a};e.push(d)},flush:()=>{if(!e.length)return;const a=[...e];e.length=0,a.forEach(l=>{clearTimeout(l.timerId),l.callback()})}}};const W2=(e,n)=>e==null&&n==null?!0:e==null||n==null?!1:e.droppableId===n.droppableId&&e.index===n.index,q2=(e,n)=>e==null&&n==null?!0:e==null||n==null?!1:e.draggableId===n.draggableId&&e.droppableId===n.droppableId,K2=(e,n)=>{if(e===n)return!0;const o=e.draggable.id===n.draggable.id&&e.draggable.droppableId===n.draggable.droppableId&&e.draggable.type===n.draggable.type&&e.draggable.index===n.draggable.index,s=e.droppable.id===n.droppable.id&&e.droppable.type===n.droppable.type;return o&&s},bs=(e,n)=>{n()},ia=(e,n)=>({draggableId:e.draggable.id,type:e.droppable.type,source:{droppableId:e.droppable.id,index:e.draggable.index},mode:n});function au(e,n,o,s){if(!e){o(s(n));return}const a=U2(o);e(n,{announce:a}),a.wasCalled()||o(s(n))}var Y2=(e,n)=>{const o=H2();let s=null;const a=(g,y)=>{s&&ue(),bs("onBeforeCapture",()=>{const w=e().onBeforeCapture;w&&w({draggableId:g,mode:y})})},l=(g,y)=>{s&&ue(),bs("onBeforeDragStart",()=>{const w=e().onBeforeDragStart;w&&w(ia(g,y))})},d=(g,y)=>{s&&ue();const w=ia(g,y);s={mode:y,lastCritical:g,lastLocation:w.source,lastCombine:null},o.add(()=>{bs("onDragStart",()=>au(e().onDragStart,w,n,ua.onDragStart))})},f=(g,y)=>{const w=sd(y),C=La(y);s||ue();const E=!K2(g,s.lastCritical);E&&(s.lastCritical=g);const S=!W2(s.lastLocation,w);S&&(s.lastLocation=w);const B=!q2(s.lastCombine,C);if(B&&(s.lastCombine=C),!E&&!S&&!B)return;const $={...ia(g,s.mode),combine:C,destination:w};o.add(()=>{bs("onDragUpdate",()=>au(e().onDragUpdate,$,n,ua.onDragUpdate))})},p=()=>{s||ue(),o.flush()},m=g=>{s||ue(),s=null,bs("onDragEnd",()=>au(e().onDragEnd,g,n,ua.onDragEnd))};return{beforeCapture:a,beforeStart:l,start:d,update:f,flush:p,drop:m,abort:()=>{if(!s)return;const g={...ia(s.lastCritical,s.mode),combine:null,destination:null,reason:"CANCEL"};m(g)}}},Q2=(e,n)=>{const o=Y2(e,n);return s=>a=>l=>{if(ze(l,"BEFORE_INITIAL_CAPTURE")){o.beforeCapture(l.payload.draggableId,l.payload.movementMode);return}if(ze(l,"INITIAL_PUBLISH")){const f=l.payload.critical;o.beforeStart(f,l.payload.movementMode),a(l),o.start(f,l.payload.movementMode);return}if(ze(l,"DROP_COMPLETE")){const f=l.payload.completed.result;o.flush(),a(l),o.drop(f);return}if(a(l),ze(l,"FLUSH")){o.abort();return}const d=s.getState();d.phase==="DRAGGING"&&o.update(d.critical,d.impact)}};const X2=e=>n=>o=>{if(!ze(o,"DROP_ANIMATION_FINISHED")){n(o);return}const s=e.getState();s.phase!=="DROP_ANIMATING"&&ue(),e.dispatch(fd({completed:s.completed}))},Z2=e=>{let n=null,o=null;function s(){o&&(cancelAnimationFrame(o),o=null),n&&(n(),n=null)}return a=>l=>{if((ze(l,"FLUSH")||ze(l,"DROP_COMPLETE")||ze(l,"DROP_ANIMATION_FINISHED"))&&s(),a(l),!ze(l,"DROP_ANIMATE"))return;const d={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){e.getState().phase==="DROP_ANIMATING"&&e.dispatch(u0())}};o=requestAnimationFrame(()=>{o=null,n=dn(window,[d])})}};var J2=e=>()=>n=>o=>{(ze(o,"DROP_COMPLETE")||ze(o,"FLUSH")||ze(o,"DROP_ANIMATE"))&&e.stopPublishing(),n(o)},eC=e=>{let n=!1;return()=>o=>s=>{if(ze(s,"INITIAL_PUBLISH")){n=!0,e.tryRecordFocus(s.payload.critical.draggable.id),o(s),e.tryRestoreFocusRecorded();return}if(o(s),!!n){if(ze(s,"FLUSH")){n=!1,e.tryRestoreFocusRecorded();return}if(ze(s,"DROP_COMPLETE")){n=!1;const a=s.payload.completed.result;a.combine&&e.tryShiftRecord(a.draggableId,a.combine.draggableId),e.tryRestoreFocusRecorded()}}}};const tC=e=>ze(e,"DROP_COMPLETE")||ze(e,"DROP_ANIMATE")||ze(e,"FLUSH");var nC=e=>n=>o=>s=>{if(tC(s)){e.stop(),o(s);return}if(ze(s,"INITIAL_PUBLISH")){o(s);const a=n.getState();a.phase!=="DRAGGING"&&ue(),e.start(a);return}o(s),e.scroll(n.getState())};const rC=e=>n=>o=>{if(n(o),!ze(o,"PUBLISH_WHILE_DRAGGING"))return;const s=e.getState();s.phase==="DROP_PENDING"&&(s.isWaiting||e.dispatch(c0({reason:s.reason})))},oC=Pg;var sC=({dimensionMarshal:e,focusMarshal:n,styleMarshal:o,getResponders:s,announce:a,autoScroller:l})=>Ag(m2,oC(nw(T2(o),J2(e),I2(e),F2,X2,Z2,rC,nC(l),G2,eC(n),Q2(s,a))));const lu=()=>({additions:{},removals:{},modified:{}});function iC({registry:e,callbacks:n}){let o=lu(),s=null;const a=()=>{s||(n.collectionStarting(),s=requestAnimationFrame(()=>{s=null;const{additions:p,removals:m,modified:x}=o,g=Object.keys(p).map(C=>e.draggable.getById(C).getDimension(mt)).sort((C,E)=>C.descriptor.index-E.descriptor.index),y=Object.keys(x).map(C=>{const S=e.droppable.getById(C).callbacks.getScrollWhileDragging();return{droppableId:C,scroll:S}}),w={additions:g,removals:Object.keys(m),modified:y};o=lu(),n.publish(w)}))};return{add:p=>{const m=p.descriptor.id;o.additions[m]=p,o.modified[p.descriptor.droppableId]=!0,o.removals[m]&&delete o.removals[m],a()},remove:p=>{const m=p.descriptor;o.removals[m.id]=!0,o.modified[m.droppableId]=!0,o.additions[m.id]&&delete o.additions[m.id],a()},stop:()=>{s&&(cancelAnimationFrame(s),s=null,o=lu())}}}var h0=({scrollHeight:e,scrollWidth:n,height:o,width:s})=>{const a=Zt({x:n,y:e},{x:s,y:o});return{x:Math.max(0,a.x),y:Math.max(0,a.y)}},m0=()=>{const e=document.documentElement;return e||ue(),e},g0=()=>{const e=m0();return h0({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,width:e.clientWidth,height:e.clientHeight})},aC=()=>{const e=p0(),n=g0(),o=e.y,s=e.x,a=m0(),l=a.clientWidth,d=a.clientHeight,f=s+l,p=o+d;return{frame:En({top:o,left:s,right:f,bottom:p}),scroll:{initial:e,current:e,max:n,diff:{value:mt,displacement:mt}}}},lC=({critical:e,scrollOptions:n,registry:o})=>{const s=aC(),a=s.scroll.current,l=e.droppable,d=o.droppable.getAllByType(l.type).map(x=>x.callbacks.getDimensionAndWatchScroll(a,n)),f=o.draggable.getAllByType(e.draggable.type).map(x=>x.getDimension(a));return{dimensions:{draggables:Ug(f),droppables:Gg(d)},critical:e,viewport:s}};function Im(e,n,o){return!(o.descriptor.id===n.id||o.descriptor.type!==n.type||e.droppable.getById(o.descriptor.droppableId).descriptor.mode!=="virtual")}var cC=(e,n)=>{let o=null;const s=iC({callbacks:{publish:n.publishWhileDragging,collectionStarting:n.collectionStarting},registry:e}),a=(y,w)=>{e.droppable.exists(y)||ue(),o&&n.updateDroppableIsEnabled({id:y,isEnabled:w})},l=(y,w)=>{o&&(e.droppable.exists(y)||ue(),n.updateDroppableIsCombineEnabled({id:y,isCombineEnabled:w}))},d=(y,w)=>{o&&(e.droppable.exists(y)||ue(),n.updateDroppableScroll({id:y,newScroll:w}))},f=(y,w)=>{o&&e.droppable.getById(y).callbacks.scroll(w)},p=()=>{if(!o)return;s.stop();const y=o.critical.droppable;e.droppable.getAllByType(y.type).forEach(w=>w.callbacks.dragStopped()),o.unsubscribe(),o=null},m=y=>{o||ue();const w=o.critical.draggable;y.type==="ADDITION"&&Im(e,w,y.value)&&s.add(y.value),y.type==="REMOVAL"&&Im(e,w,y.value)&&s.remove(y.value)};return{updateDroppableIsEnabled:a,updateDroppableIsCombineEnabled:l,scrollDroppable:f,updateDroppableScroll:d,startPublishing:y=>{o&&ue();const w=e.draggable.getById(y.draggableId),C=e.droppable.getById(w.descriptor.droppableId),E={draggable:w.descriptor,droppable:C.descriptor},S=e.subscribe(m);return o={critical:E,unsubscribe:S},lC({critical:E,registry:e,scrollOptions:y.scrollOptions})},stopPublishing:p}},v0=(e,n)=>e.phase==="IDLE"?!0:e.phase!=="DROP_ANIMATING"||e.completed.result.draggableId===n?!1:e.completed.result.reason==="DROP",uC=e=>{window.scrollBy(e.x,e.y)};const dC=ht(e=>_a(e).filter(n=>!(!n.isEnabled||!n.frame))),fC=(e,n)=>dC(n).find(s=>(s.frame||ue(),e0(s.frame.pageMarginBox)(e)))||null;var pC=({center:e,destination:n,droppables:o})=>{if(n){const a=o[n];return a.frame?a:null}return fC(e,o)};const Bs={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:e=>e**2,durationDampening:{stopDampeningAt:1200,accelerateAt:360},disabled:!1};var hC=(e,n,o=()=>Bs)=>{const s=o(),a=e[n.size]*s.startFromPercentage,l=e[n.size]*s.maxScrollAtPercentage;return{startScrollingFrom:a,maxScrollValueAt:l}},x0=({startOfRange:e,endOfRange:n,current:o})=>{const s=n-e;return s===0?0:(o-e)/s},hd=1,mC=(e,n,o=()=>Bs)=>{const s=o();if(e>n.startScrollingFrom)return 0;if(e<=n.maxScrollValueAt)return s.maxPixelScroll;if(e===n.startScrollingFrom)return hd;const l=1-x0({startOfRange:n.maxScrollValueAt,endOfRange:n.startScrollingFrom,current:e}),d=s.maxPixelScroll*s.ease(l);return Math.ceil(d)},gC=(e,n,o)=>{const s=o(),a=s.durationDampening.accelerateAt,l=s.durationDampening.stopDampeningAt,d=n,f=l,m=Date.now()-d;if(m>=l)return e;if(m<a)return hd;const x=x0({startOfRange:a,endOfRange:f,current:m}),g=e*s.ease(x);return Math.ceil(g)},Tm=({distanceToEdge:e,thresholds:n,dragStartTime:o,shouldUseTimeDampening:s,getAutoScrollerOptions:a})=>{const l=mC(e,n,a);return l===0?0:s?Math.max(gC(l,o,a),hd):l},Om=({container:e,distanceToEdges:n,dragStartTime:o,axis:s,shouldUseTimeDampening:a,getAutoScrollerOptions:l})=>{const d=hC(e,s,l);return n[s.end]<n[s.start]?Tm({distanceToEdge:n[s.end],thresholds:d,dragStartTime:o,shouldUseTimeDampening:a,getAutoScrollerOptions:l}):-1*Tm({distanceToEdge:n[s.start],thresholds:d,dragStartTime:o,shouldUseTimeDampening:a,getAutoScrollerOptions:l})},vC=({container:e,subject:n,proposedScroll:o})=>{const s=n.height>e.height,a=n.width>e.width;return!a&&!s?o:a&&s?null:{x:a?0:o.x,y:s?0:o.y}};const xC=Vg(e=>e===0?0:e);var y0=({dragStartTime:e,container:n,subject:o,center:s,shouldUseTimeDampening:a,getAutoScrollerOptions:l})=>{const d={top:s.y-n.top,right:n.right-s.x,bottom:n.bottom-s.y,left:s.x-n.left},f=Om({container:n,distanceToEdges:d,dragStartTime:e,axis:id,shouldUseTimeDampening:a,getAutoScrollerOptions:l}),p=Om({container:n,distanceToEdges:d,dragStartTime:e,axis:qg,shouldUseTimeDampening:a,getAutoScrollerOptions:l}),m=xC({x:p,y:f});if(jr(m,mt))return null;const x=vC({container:n,subject:o,proposedScroll:m});return x?jr(x,mt)?null:x:null};const yC=Vg(e=>e===0?0:e>0?1:-1),md=(()=>{const e=(n,o)=>n<0?n:n>o?n-o:0;return({current:n,max:o,change:s})=>{const a=wt(n,s),l={x:e(a.x,o.x),y:e(a.y,o.y)};return jr(l,mt)?null:l}})(),b0=({max:e,current:n,change:o})=>{const s={x:Math.max(n.x,e.x),y:Math.max(n.y,e.y)},a=yC(o),l=md({max:s,current:n,change:a});return!l||a.x!==0&&l.x===0||a.y!==0&&l.y===0},gd=(e,n)=>b0({current:e.scroll.current,max:e.scroll.max,change:n}),bC=(e,n)=>{if(!gd(e,n))return null;const o=e.scroll.max,s=e.scroll.current;return md({current:s,max:o,change:n})},vd=(e,n)=>{const o=e.frame;return o?b0({current:o.scroll.current,max:o.scroll.max,change:n}):!1},wC=(e,n)=>{const o=e.frame;return!o||!vd(e,n)?null:md({current:o.scroll.current,max:o.scroll.max,change:n})};var NC=({viewport:e,subject:n,center:o,dragStartTime:s,shouldUseTimeDampening:a,getAutoScrollerOptions:l})=>{const d=y0({dragStartTime:s,container:e.frame,subject:n,center:o,shouldUseTimeDampening:a,getAutoScrollerOptions:l});return d&&gd(e,d)?d:null},CC=({droppable:e,subject:n,center:o,dragStartTime:s,shouldUseTimeDampening:a,getAutoScrollerOptions:l})=>{const d=e.frame;if(!d)return null;const f=y0({dragStartTime:s,container:d.pageMarginBox,subject:n,center:o,shouldUseTimeDampening:a,getAutoScrollerOptions:l});return f&&vd(e,f)?f:null},Mm=({state:e,dragStartTime:n,shouldUseTimeDampening:o,scrollWindow:s,scrollDroppable:a,getAutoScrollerOptions:l})=>{const d=e.current.page.borderBoxCenter,p=e.dimensions.draggables[e.critical.draggable.id].page.marginBox;if(e.isWindowScrollAllowed){const g=e.viewport,y=NC({dragStartTime:n,viewport:g,subject:p,center:d,shouldUseTimeDampening:o,getAutoScrollerOptions:l});if(y){s(y);return}}const m=pC({center:d,destination:Jt(e.impact),droppables:e.dimensions.droppables});if(!m)return;const x=CC({dragStartTime:n,droppable:m,subject:p,center:d,shouldUseTimeDampening:o,getAutoScrollerOptions:l});x&&a(m.descriptor.id,x)},SC=({scrollWindow:e,scrollDroppable:n,getAutoScrollerOptions:o=()=>Bs})=>{const s=Ts(e),a=Ts(n);let l=null;const d=m=>{l||ue();const{shouldUseTimeDampening:x,dragStartTime:g}=l;Mm({state:m,scrollWindow:s,scrollDroppable:a,dragStartTime:g,shouldUseTimeDampening:x,getAutoScrollerOptions:o})};return{start:m=>{l&&ue();const x=Date.now();let g=!1;const y=()=>{g=!0};Mm({state:m,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:y,scrollDroppable:y,getAutoScrollerOptions:o}),l={dragStartTime:x,shouldUseTimeDampening:g},g&&d(m)},stop:()=>{l&&(s.cancel(),a.cancel(),l=null)},scroll:d}},EC=({move:e,scrollDroppable:n,scrollWindow:o})=>{const s=(f,p)=>{const m=wt(f.current.client.selection,p);e({client:m})},a=(f,p)=>{if(!vd(f,p))return p;const m=wC(f,p);if(!m)return n(f.descriptor.id,p),null;const x=Zt(p,m);return n(f.descriptor.id,x),Zt(p,x)},l=(f,p,m)=>{if(!f||!gd(p,m))return m;const x=bC(p,m);if(!x)return o(m),null;const g=Zt(m,x);return o(g),Zt(m,g)};return f=>{const p=f.scrollJumpRequest;if(!p)return;const m=Jt(f.impact);m||ue();const x=a(f.dimensions.droppables[m],p);if(!x)return;const g=f.viewport,y=l(f.isWindowScrollAllowed,g,x);y&&s(f,y)}},DC=({scrollDroppable:e,scrollWindow:n,move:o,getAutoScrollerOptions:s})=>{const a=SC({scrollWindow:n,scrollDroppable:e,getAutoScrollerOptions:s}),l=EC({move:o,scrollWindow:n,scrollDroppable:e});return{scroll:p=>{if(!(s().disabled||p.phase!=="DRAGGING")){if(p.movementMode==="FLUID"){a.scroll(p);return}p.scrollJumpRequest&&l(p)}},start:a.start,stop:a.stop}};const Ao="data-rfd",Po=(()=>{const e=`${Ao}-drag-handle`;return{base:e,draggableId:`${e}-draggable-id`,contextId:`${e}-context-id`}})(),Tu=(()=>{const e=`${Ao}-draggable`;return{base:e,contextId:`${e}-context-id`,id:`${e}-id`}})(),jC=(()=>{const e=`${Ao}-droppable`;return{base:e,contextId:`${e}-context-id`,id:`${e}-id`}})(),_m={contextId:`${Ao}-scroll-container-context-id`},AC=e=>n=>`[${n}="${e}"]`,ws=(e,n)=>e.map(o=>{const s=o.styles[n];return s?`${o.selector} { ${s} }`:""}).join(" "),PC="pointer-events: none;";var RC=e=>{const n=AC(e),o=(()=>{const f=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:n(Po.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:f,dragging:PC,dropAnimating:f}}})(),s=(()=>{const f=`
      transition: ${Ds.outOfTheWay};
    `;return{selector:n(Tu.contextId),styles:{dragging:f,dropAnimating:f,userCancel:f}}})(),a={selector:n(jC.contextId),styles:{always:"overflow-anchor: none;"}},d=[s,o,a,{selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}}];return{always:ws(d,"always"),resting:ws(d,"resting"),dragging:ws(d,"dragging"),dropAnimating:ws(d,"dropAnimating"),userCancel:ws(d,"userCancel")}};const en=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?b.useLayoutEffect:b.useEffect,cu=()=>{const e=document.querySelector("head");return e||ue(),e},Lm=e=>{const n=document.createElement("style");return e&&n.setAttribute("nonce",e),n.type="text/css",n};function kC(e,n){const o=Me(()=>RC(e),[e]),s=b.useRef(null),a=b.useRef(null),l=Ce(ht(g=>{const y=a.current;y||ue(),y.textContent=g}),[]),d=Ce(g=>{const y=s.current;y||ue(),y.textContent=g},[]);en(()=>{!s.current&&!a.current||ue();const g=Lm(n),y=Lm(n);return s.current=g,a.current=y,g.setAttribute(`${Ao}-always`,e),y.setAttribute(`${Ao}-dynamic`,e),cu().appendChild(g),cu().appendChild(y),d(o.always),l(o.resting),()=>{const w=C=>{const E=C.current;E||ue(),cu().removeChild(E),C.current=null};w(s),w(a)}},[n,d,l,o.always,o.resting,e]);const f=Ce(()=>l(o.dragging),[l,o.dragging]),p=Ce(g=>{if(g==="DROP"){l(o.dropAnimating);return}l(o.userCancel)},[l,o.dropAnimating,o.userCancel]),m=Ce(()=>{a.current&&l(o.resting)},[l,o.resting]);return Me(()=>({dragging:f,dropping:p,resting:m}),[f,p,m])}function w0(e,n){return Array.from(e.querySelectorAll(n))}var N0=e=>e&&e.ownerDocument&&e.ownerDocument.defaultView?e.ownerDocument.defaultView:window;function $a(e){return e instanceof N0(e).HTMLElement}function IC(e,n){const o=`[${Po.contextId}="${e}"]`,s=w0(document,o);if(!s.length)return null;const a=s.find(l=>l.getAttribute(Po.draggableId)===n);return!a||!$a(a)?null:a}function TC(e){const n=b.useRef({}),o=b.useRef(null),s=b.useRef(null),a=b.useRef(!1),l=Ce(function(y,w){const C={id:y,focus:w};return n.current[y]=C,function(){const S=n.current;S[y]!==C&&delete S[y]}},[]),d=Ce(function(y){const w=IC(e,y);w&&w!==document.activeElement&&w.focus()},[e]),f=Ce(function(y,w){o.current===y&&(o.current=w)},[]),p=Ce(function(){s.current||a.current&&(s.current=requestAnimationFrame(()=>{s.current=null;const y=o.current;y&&d(y)}))},[d]),m=Ce(function(y){o.current=null;const w=document.activeElement;w&&w.getAttribute(Po.draggableId)===y&&(o.current=y)},[]);return en(()=>(a.current=!0,function(){a.current=!1;const y=s.current;y&&cancelAnimationFrame(y)}),[]),Me(()=>({register:l,tryRecordFocus:m,tryRestoreFocusRecorded:p,tryShiftRecord:f}),[l,m,p,f])}function OC(){const e={draggables:{},droppables:{}},n=[];function o(g){return n.push(g),function(){const w=n.indexOf(g);w!==-1&&n.splice(w,1)}}function s(g){n.length&&n.forEach(y=>y(g))}function a(g){return e.draggables[g]||null}function l(g){const y=a(g);return y||ue(),y}const d={register:g=>{e.draggables[g.descriptor.id]=g,s({type:"ADDITION",value:g})},update:(g,y)=>{const w=e.draggables[y.descriptor.id];w&&w.uniqueId===g.uniqueId&&(delete e.draggables[y.descriptor.id],e.draggables[g.descriptor.id]=g)},unregister:g=>{const y=g.descriptor.id,w=a(y);w&&g.uniqueId===w.uniqueId&&(delete e.draggables[y],e.droppables[g.descriptor.droppableId]&&s({type:"REMOVAL",value:g}))},getById:l,findById:a,exists:g=>!!a(g),getAllByType:g=>Object.values(e.draggables).filter(y=>y.descriptor.type===g)};function f(g){return e.droppables[g]||null}function p(g){const y=f(g);return y||ue(),y}const m={register:g=>{e.droppables[g.descriptor.id]=g},unregister:g=>{const y=f(g.descriptor.id);y&&g.uniqueId===y.uniqueId&&delete e.droppables[g.descriptor.id]},getById:p,findById:f,exists:g=>!!f(g),getAllByType:g=>Object.values(e.droppables).filter(y=>y.descriptor.type===g)};function x(){e.draggables={},e.droppables={},n.length=0}return{draggable:d,droppable:m,subscribe:o,clean:x}}function MC(){const e=Me(OC,[]);return b.useEffect(()=>function(){e.clean()},[e]),e}var xd=we.createContext(null),Ea=()=>{const e=document.body;return e||ue(),e};const _C={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},LC=e=>`rfd-announcement-${e}`;function BC(e){const n=Me(()=>LC(e),[e]),o=b.useRef(null);return b.useEffect(function(){const l=document.createElement("div");return o.current=l,l.id=n,l.setAttribute("aria-live","assertive"),l.setAttribute("aria-atomic","true"),wa(l.style,_C),Ea().appendChild(l),function(){setTimeout(function(){const p=Ea();p.contains(l)&&p.removeChild(l),l===o.current&&(o.current=null)})}},[n]),Ce(a=>{const l=o.current;if(l){l.textContent=a;return}},[])}const FC={separator:"::"};function yd(e,n=FC){const o=we.useId();return Me(()=>`${e}${n.separator}${o}`,[n.separator,e,o])}function $C({contextId:e,uniqueId:n}){return`rfd-hidden-text-${e}-${n}`}function zC({contextId:e,text:n}){const o=yd("hidden-text",{separator:"-"}),s=Me(()=>$C({contextId:e,uniqueId:o}),[o,e]);return b.useEffect(function(){const l=document.createElement("div");return l.id=s,l.textContent=n,l.style.display="none",Ea().appendChild(l),function(){const f=Ea();f.contains(l)&&f.removeChild(l)}},[s,n]),s}var za=we.createContext(null);function C0(e){const n=b.useRef(e);return b.useEffect(()=>{n.current=e}),n}function VC(){let e=null;function n(){return!!e}function o(d){return d===e}function s(d){e&&ue();const f={abandon:d};return e=f,f}function a(){e||ue(),e=null}function l(){e&&(e.abandon(),a())}return{isClaimed:n,isActive:o,claim:s,release:a,tryAbandon:l}}function Fs(e){return e.phase==="IDLE"||e.phase==="DROP_ANIMATING"?!1:e.isDragging}const GC=9,UC=13,bd=27,S0=32,HC=33,WC=34,qC=35,KC=36,YC=37,QC=38,XC=39,ZC=40,JC={[UC]:!0,[GC]:!0};var E0=e=>{JC[e.keyCode]&&e.preventDefault()};const Va=(()=>{const e="visibilitychange";return typeof document>"u"?e:[e,`ms${e}`,`webkit${e}`,`moz${e}`,`o${e}`].find(s=>`on${s}`in document)||e})(),D0=0,Bm=5;function eS(e,n){return Math.abs(n.x-e.x)>=Bm||Math.abs(n.y-e.y)>=Bm}const Fm={type:"IDLE"};function tS({cancel:e,completed:n,getPhase:o,setPhase:s}){return[{eventName:"mousemove",fn:a=>{const{button:l,clientX:d,clientY:f}=a;if(l!==D0)return;const p={x:d,y:f},m=o();if(m.type==="DRAGGING"){a.preventDefault(),m.actions.move(p);return}m.type!=="PENDING"&&ue();const x=m.point;if(!eS(x,p))return;a.preventDefault();const g=m.actions.fluidLift(p);s({type:"DRAGGING",actions:g})}},{eventName:"mouseup",fn:a=>{const l=o();if(l.type!=="DRAGGING"){e();return}a.preventDefault(),l.actions.drop({shouldBlockNextClick:!0}),n()}},{eventName:"mousedown",fn:a=>{o().type==="DRAGGING"&&a.preventDefault(),e()}},{eventName:"keydown",fn:a=>{if(o().type==="PENDING"){e();return}if(a.keyCode===bd){a.preventDefault(),e();return}E0(a)}},{eventName:"resize",fn:e},{eventName:"scroll",options:{passive:!0,capture:!1},fn:()=>{o().type==="PENDING"&&e()}},{eventName:"webkitmouseforcedown",fn:a=>{const l=o();if(l.type==="IDLE"&&ue(),l.actions.shouldRespectForcePress()){e();return}a.preventDefault()}},{eventName:Va,fn:e}]}function nS(e){const n=b.useRef(Fm),o=b.useRef(Dr),s=Me(()=>({eventName:"mousedown",fn:function(g){if(g.defaultPrevented||g.button!==D0||g.ctrlKey||g.metaKey||g.shiftKey||g.altKey)return;const y=e.findClosestDraggableId(g);if(!y)return;const w=e.tryGetLock(y,d,{sourceEvent:g});if(!w)return;g.preventDefault();const C={x:g.clientX,y:g.clientY};o.current(),m(w,C)}}),[e]),a=Me(()=>({eventName:"webkitmouseforcewillbegin",fn:x=>{if(x.defaultPrevented)return;const g=e.findClosestDraggableId(x);if(!g)return;const y=e.findOptionsForDraggable(g);y&&(y.shouldRespectForcePress||e.canGetLock(g)&&x.preventDefault())}}),[e]),l=Ce(function(){const g={passive:!1,capture:!0};o.current=dn(window,[a,s],g)},[a,s]),d=Ce(()=>{n.current.type!=="IDLE"&&(n.current=Fm,o.current(),l())},[l]),f=Ce(()=>{const x=n.current;d(),x.type==="DRAGGING"&&x.actions.cancel({shouldBlockNextClick:!0}),x.type==="PENDING"&&x.actions.abort()},[d]),p=Ce(function(){const g={capture:!0,passive:!1},y=tS({cancel:f,completed:d,getPhase:()=>n.current,setPhase:w=>{n.current=w}});o.current=dn(window,y,g)},[f,d]),m=Ce(function(g,y){n.current.type!=="IDLE"&&ue(),n.current={type:"PENDING",point:y,actions:g},p()},[p]);en(function(){return l(),function(){o.current()}},[l])}function rS(){}const oS={[WC]:!0,[HC]:!0,[KC]:!0,[qC]:!0};function sS(e,n){function o(){n(),e.cancel()}function s(){n(),e.drop()}return[{eventName:"keydown",fn:a=>{if(a.keyCode===bd){a.preventDefault(),o();return}if(a.keyCode===S0){a.preventDefault(),s();return}if(a.keyCode===ZC){a.preventDefault(),e.moveDown();return}if(a.keyCode===QC){a.preventDefault(),e.moveUp();return}if(a.keyCode===XC){a.preventDefault(),e.moveRight();return}if(a.keyCode===YC){a.preventDefault(),e.moveLeft();return}if(oS[a.keyCode]){a.preventDefault();return}E0(a)}},{eventName:"mousedown",fn:o},{eventName:"mouseup",fn:o},{eventName:"click",fn:o},{eventName:"touchstart",fn:o},{eventName:"resize",fn:o},{eventName:"wheel",fn:o,options:{passive:!0}},{eventName:Va,fn:o}]}function iS(e){const n=b.useRef(rS),o=Me(()=>({eventName:"keydown",fn:function(l){if(l.defaultPrevented||l.keyCode!==S0)return;const d=e.findClosestDraggableId(l);if(!d)return;const f=e.tryGetLock(d,x,{sourceEvent:l});if(!f)return;l.preventDefault();let p=!0;const m=f.snapLift();n.current();function x(){p||ue(),p=!1,n.current(),s()}n.current=dn(window,sS(m,x),{capture:!0,passive:!1})}}),[e]),s=Ce(function(){const l={passive:!1,capture:!0};n.current=dn(window,[o],l)},[o]);en(function(){return s(),function(){n.current()}},[s])}const uu={type:"IDLE"},aS=120,lS=.15;function cS({cancel:e,getPhase:n}){return[{eventName:"orientationchange",fn:e},{eventName:"resize",fn:e},{eventName:"contextmenu",fn:o=>{o.preventDefault()}},{eventName:"keydown",fn:o=>{if(n().type!=="DRAGGING"){e();return}o.keyCode===bd&&o.preventDefault(),e()}},{eventName:Va,fn:e}]}function uS({cancel:e,completed:n,getPhase:o}){return[{eventName:"touchmove",options:{capture:!1},fn:s=>{const a=o();if(a.type!=="DRAGGING"){e();return}a.hasMoved=!0;const{clientX:l,clientY:d}=s.touches[0],f={x:l,y:d};s.preventDefault(),a.actions.move(f)}},{eventName:"touchend",fn:s=>{const a=o();if(a.type!=="DRAGGING"){e();return}s.preventDefault(),a.actions.drop({shouldBlockNextClick:!0}),n()}},{eventName:"touchcancel",fn:s=>{if(o().type!=="DRAGGING"){e();return}s.preventDefault(),e()}},{eventName:"touchforcechange",fn:s=>{const a=o();a.type==="IDLE"&&ue();const l=s.touches[0];if(!l||!(l.force>=lS))return;const f=a.actions.shouldRespectForcePress();if(a.type==="PENDING"){f&&e();return}if(f){if(a.hasMoved){s.preventDefault();return}e();return}s.preventDefault()}},{eventName:Va,fn:e}]}function dS(e){const n=b.useRef(uu),o=b.useRef(Dr),s=Ce(function(){return n.current},[]),a=Ce(function(w){n.current=w},[]),l=Me(()=>({eventName:"touchstart",fn:function(w){if(w.defaultPrevented)return;const C=e.findClosestDraggableId(w);if(!C)return;const E=e.tryGetLock(C,f,{sourceEvent:w});if(!E)return;const S=w.touches[0],{clientX:B,clientY:$}=S,P={x:B,y:$};o.current(),g(E,P)}}),[e]),d=Ce(function(){const w={capture:!0,passive:!1};o.current=dn(window,[l],w)},[l]),f=Ce(()=>{const y=n.current;y.type!=="IDLE"&&(y.type==="PENDING"&&clearTimeout(y.longPressTimerId),a(uu),o.current(),d())},[d,a]),p=Ce(()=>{const y=n.current;f(),y.type==="DRAGGING"&&y.actions.cancel({shouldBlockNextClick:!0}),y.type==="PENDING"&&y.actions.abort()},[f]),m=Ce(function(){const w={capture:!0,passive:!1},C={cancel:p,completed:f,getPhase:s},E=dn(window,uS(C),w),S=dn(window,cS(C),w);o.current=function(){E(),S()}},[p,s,f]),x=Ce(function(){const w=s();w.type!=="PENDING"&&ue();const C=w.actions.fluidLift(w.point);a({type:"DRAGGING",actions:C,hasMoved:!1})},[s,a]),g=Ce(function(w,C){s().type!=="IDLE"&&ue();const E=setTimeout(x,aS);a({type:"PENDING",point:C,actions:w,longPressTimerId:E}),m()},[m,s,a,x]);en(function(){return d(),function(){o.current();const C=s();C.type==="PENDING"&&(clearTimeout(C.longPressTimerId),a(uu))}},[s,d,a]),en(function(){return dn(window,[{eventName:"touchmove",fn:()=>{},options:{capture:!1,passive:!1}}])},[])}const fS=["input","button","textarea","select","option","optgroup","video","audio"];function j0(e,n){if(n==null)return!1;if(fS.includes(n.tagName.toLowerCase()))return!0;const s=n.getAttribute("contenteditable");return s==="true"||s===""?!0:n===e?!1:j0(e,n.parentElement)}function pS(e,n){const o=n.target;return $a(o)?j0(e,o):!1}var hS=e=>En(e.getBoundingClientRect()).center;function mS(e){return e instanceof N0(e).Element}const gS=(()=>{const e="matches";return typeof document>"u"?e:[e,"msMatchesSelector","webkitMatchesSelector"].find(s=>s in Element.prototype)||e})();function A0(e,n){return e==null?null:e[gS](n)?e:A0(e.parentElement,n)}function vS(e,n){return e.closest?e.closest(n):A0(e,n)}function xS(e){return`[${Po.contextId}="${e}"]`}function yS(e,n){const o=n.target;if(!mS(o))return null;const s=xS(e),a=vS(o,s);return!a||!$a(a)?null:a}function bS(e,n){const o=yS(e,n);return o?o.getAttribute(Po.draggableId):null}function wS(e,n){const o=`[${Tu.contextId}="${e}"]`,a=w0(document,o).find(l=>l.getAttribute(Tu.id)===n);return!a||!$a(a)?null:a}function NS(e){e.preventDefault()}function aa({expected:e,phase:n,isLockActive:o,shouldWarn:s}){return!(!o()||e!==n)}function P0({lockAPI:e,store:n,registry:o,draggableId:s}){if(e.isClaimed())return!1;const a=o.draggable.findById(s);return!(!a||!a.options.isEnabled||!v0(n.getState(),s))}function CS({lockAPI:e,contextId:n,store:o,registry:s,draggableId:a,forceSensorStop:l,sourceEvent:d}){if(!P0({lockAPI:e,store:o,registry:s,draggableId:a}))return null;const p=s.draggable.getById(a),m=wS(n,p.descriptor.id);if(!m||d&&!p.options.canDragInteractiveElements&&pS(m,d))return null;const x=e.claim(l||Dr);let g="PRE_DRAG";function y(){return p.options.shouldRespectForcePress}function w(){return e.isActive(x)}function C(A,I){aa({expected:A,phase:g,isLockActive:w,shouldWarn:!0})&&o.dispatch(I())}const E=C.bind(null,"DRAGGING");function S(A){function I(){e.release(),g="COMPLETED"}g!=="PRE_DRAG"&&(I(),ue()),o.dispatch(v2(A.liftActionArgs)),g="DRAGGING";function R(M,Y={shouldBlockNextClick:!1}){if(A.cleanup(),Y.shouldBlockNextClick){const ee=dn(window,[{eventName:"click",fn:NS,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(ee)}I(),o.dispatch(c0({reason:M}))}return{isActive:()=>aa({expected:"DRAGGING",phase:g,isLockActive:w,shouldWarn:!1}),shouldRespectForcePress:y,drop:M=>R("DROP",M),cancel:M=>R("CANCEL",M),...A.actions}}function B(A){const I=Ts(M=>{E(()=>l0({client:M}))});return{...S({liftActionArgs:{id:a,clientSelection:A,movementMode:"FLUID"},cleanup:()=>I.cancel(),actions:{move:I}}),move:I}}function $(){const A={moveUp:()=>E(D2),moveRight:()=>E(A2),moveDown:()=>E(j2),moveLeft:()=>E(P2)};return S({liftActionArgs:{id:a,clientSelection:hS(m),movementMode:"SNAP"},cleanup:Dr,actions:A})}function P(){aa({expected:"PRE_DRAG",phase:g,isLockActive:w,shouldWarn:!0})&&e.release()}return{isActive:()=>aa({expected:"PRE_DRAG",phase:g,isLockActive:w,shouldWarn:!1}),shouldRespectForcePress:y,fluidLift:B,snapLift:$,abort:P}}const SS=[nS,iS,dS];function ES({contextId:e,store:n,registry:o,customSensors:s,enableDefaultSensors:a}){const l=[...a?SS:[],...s||[]],d=b.useState(()=>VC())[0],f=Ce(function(S,B){Fs(S)&&!Fs(B)&&d.tryAbandon()},[d]);en(function(){let S=n.getState();return n.subscribe(()=>{const $=n.getState();f(S,$),S=$})},[d,n,f]),en(()=>d.tryAbandon,[d.tryAbandon]);const p=Ce(E=>P0({lockAPI:d,registry:o,store:n,draggableId:E}),[d,o,n]),m=Ce((E,S,B)=>CS({lockAPI:d,registry:o,contextId:e,store:n,draggableId:E,forceSensorStop:S||null,sourceEvent:B&&B.sourceEvent?B.sourceEvent:null}),[e,d,o,n]),x=Ce(E=>bS(e,E),[e]),g=Ce(E=>{const S=o.draggable.findById(E);return S?S.options:null},[o.draggable]),y=Ce(function(){d.isClaimed()&&(d.tryAbandon(),n.getState().phase!=="IDLE"&&n.dispatch(dd()))},[d,n]),w=Ce(()=>d.isClaimed(),[d]),C=Me(()=>({canGetLock:p,tryGetLock:m,findClosestDraggableId:x,findOptionsForDraggable:g,tryReleaseLock:y,isLockClaimed:w}),[p,m,x,g,y,w]);for(let E=0;E<l.length;E++)l[E](C)}const DS=e=>({onBeforeCapture:n=>{const o=()=>{e.onBeforeCapture&&e.onBeforeCapture(n)};er.flushSync(o)},onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragEnd:e.onDragEnd,onDragUpdate:e.onDragUpdate}),jS=e=>({...Bs,...e.autoScrollerOptions,durationDampening:{...Bs.durationDampening,...e.autoScrollerOptions}});function Ns(e){return e.current||ue(),e.current}function AS(e){const{contextId:n,setCallbacks:o,sensors:s,nonce:a,dragHandleUsageInstructions:l}=e,d=b.useRef(null),f=C0(e),p=Ce(()=>DS(f.current),[f]),m=Ce(()=>jS(f.current),[f]),x=BC(n),g=zC({contextId:n,text:l}),y=kC(n,a),w=Ce(ee=>{Ns(d).dispatch(ee)},[]),C=Me(()=>dm({publishWhileDragging:y2,updateDroppableScroll:w2,updateDroppableIsEnabled:N2,updateDroppableIsCombineEnabled:C2,collectionStarting:b2},w),[w]),E=MC(),S=Me(()=>cC(E,C),[E,C]),B=Me(()=>DC({scrollWindow:uC,scrollDroppable:S.scrollDroppable,getAutoScrollerOptions:m,...dm({move:l0},w)}),[S.scrollDroppable,w,m]),$=TC(n),P=Me(()=>sC({announce:x,autoScroller:B,dimensionMarshal:S,focusMarshal:$,getResponders:p,styleMarshal:y}),[x,B,S,$,p,y]);d.current=P;const T=Ce(()=>{const ee=Ns(d);ee.getState().phase!=="IDLE"&&ee.dispatch(dd())},[]),A=Ce(()=>{const ee=Ns(d).getState();return ee.phase==="DROP_ANIMATING"?!0:ee.phase==="IDLE"?!1:ee.isDragging},[]),I=Me(()=>({isDragging:A,tryAbort:T}),[A,T]);o(I);const R=Ce(ee=>v0(Ns(d).getState(),ee),[]),M=Ce(()=>Kr(Ns(d).getState()),[]),Y=Me(()=>({marshal:S,focus:$,contextId:n,canLift:R,isMovementAllowed:M,dragHandleUsageInstructionsId:g,registry:E}),[n,S,g,$,R,M,E]);return ES({contextId:n,store:P,registry:E,customSensors:s||null,enableDefaultSensors:e.enableDefaultSensors!==!1}),b.useEffect(()=>T,[T]),we.createElement(za.Provider,{value:Y},we.createElement(Jw,{context:xd,store:P},e.children))}function PS(){return we.useId()}function R0(e){const n=PS(),o=e.dragHandleUsageInstructions||ua.dragHandleUsageInstructions;return we.createElement(iN,null,s=>we.createElement(AS,{nonce:e.nonce,contextId:n,setCallbacks:s,dragHandleUsageInstructions:o,enableDefaultSensors:e.enableDefaultSensors,sensors:e.sensors,onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragUpdate:e.onDragUpdate,onDragEnd:e.onDragEnd,autoScrollerOptions:e.autoScrollerOptions},e.children))}const $m={dragging:5e3,dropAnimating:4500},RS=(e,n)=>n?Ds.drop(n.duration):e?Ds.snap:Ds.fluid,kS=(e,n)=>{if(e)return n?Ls.opacity.drop:Ls.opacity.combining},IS=e=>e.forceShouldAnimate!=null?e.forceShouldAnimate:e.mode==="SNAP";function TS(e){const o=e.dimension.client,{offset:s,combineWith:a,dropping:l}=e,d=!!a,f=IS(e),p=!!l,m=p?ku.drop(s,d):ku.moveTo(s);return{position:"fixed",top:o.marginBox.top,left:o.marginBox.left,boxSizing:"border-box",width:o.borderBox.width,height:o.borderBox.height,transition:RS(f,l),transform:m,opacity:kS(d,p),zIndex:p?$m.dropAnimating:$m.dragging,pointerEvents:"none"}}function OS(e){return{transform:ku.moveTo(e.offset),transition:e.shouldAnimateDisplacement?void 0:"none"}}function MS(e){return e.type==="DRAGGING"?TS(e):OS(e)}function _S(e,n,o=mt){const s=window.getComputedStyle(n),a=n.getBoundingClientRect(),l=_g(a,s),d=ba(l,o),f={client:l,tagName:n.tagName.toLowerCase(),display:s.display},p={x:l.marginBox.width,y:l.marginBox.height};return{descriptor:e,placeholder:f,displaceBy:p,client:l,page:d}}function LS(e){const n=yd("draggable"),{descriptor:o,registry:s,getDraggableRef:a,canDragInteractiveElements:l,shouldRespectForcePress:d,isEnabled:f}=e,p=Me(()=>({canDragInteractiveElements:l,shouldRespectForcePress:d,isEnabled:f}),[l,f,d]),m=Ce(w=>{const C=a();return C||ue(),_S(o,C,w)},[o,a]),x=Me(()=>({uniqueId:n,descriptor:o,options:p,getDimension:m}),[o,m,p,n]),g=b.useRef(x),y=b.useRef(!0);en(()=>(s.draggable.register(g.current),()=>s.draggable.unregister(g.current)),[s.draggable]),en(()=>{if(y.current){y.current=!1;return}const w=g.current;g.current=x,s.draggable.update(x,w)},[x,s.draggable])}var wd=we.createContext(null);function Da(e){const n=b.useContext(e);return n||ue(),n}function BS(e){e.preventDefault()}const FS=e=>{const n=b.useRef(null),o=Ce((I=null)=>{n.current=I},[]),s=Ce(()=>n.current,[]),{contextId:a,dragHandleUsageInstructionsId:l,registry:d}=Da(za),{type:f,droppableId:p}=Da(wd),m=Me(()=>({id:e.draggableId,index:e.index,type:f,droppableId:p}),[e.draggableId,e.index,f,p]),{children:x,draggableId:g,isEnabled:y,shouldRespectForcePress:w,canDragInteractiveElements:C,isClone:E,mapped:S,dropAnimationFinished:B}=e;if(!E){const I=Me(()=>({descriptor:m,registry:d,getDraggableRef:s,canDragInteractiveElements:C,shouldRespectForcePress:w,isEnabled:y}),[m,d,s,C,w,y]);LS(I)}const $=Me(()=>y?{tabIndex:0,role:"button","aria-describedby":l,"data-rfd-drag-handle-draggable-id":g,"data-rfd-drag-handle-context-id":a,draggable:!1,onDragStart:BS}:null,[a,l,g,y]),P=Ce(I=>{S.type==="DRAGGING"&&S.dropping&&I.propertyName==="transform"&&er.flushSync(B)},[B,S]),T=Me(()=>{const I=MS(S),R=S.type==="DRAGGING"&&S.dropping?P:void 0;return{innerRef:o,draggableProps:{"data-rfd-draggable-context-id":a,"data-rfd-draggable-id":g,style:I,onTransitionEnd:R},dragHandleProps:$}},[a,$,g,S,P,o]),A=Me(()=>({draggableId:m.id,type:m.type,source:{index:m.index,droppableId:m.droppableId}}),[m.droppableId,m.id,m.index,m.type]);return we.createElement(we.Fragment,null,x(T,S.snapshot,A))};var k0=(e,n)=>e===n,I0=e=>{const{combine:n,destination:o}=e;return o?o.droppableId:n?n.droppableId:null};const $S=e=>e.combine?e.combine.draggableId:null,zS=e=>e.at&&e.at.type==="COMBINE"?e.at.combine.draggableId:null;function VS(){const e=ht((a,l)=>({x:a,y:l})),n=ht((a,l,d=null,f=null,p=null)=>({isDragging:!0,isClone:l,isDropAnimating:!!p,dropAnimation:p,mode:a,draggingOver:d,combineWith:f,combineTargetFor:null})),o=ht((a,l,d,f,p=null,m=null,x=null)=>({mapped:{type:"DRAGGING",dropping:null,draggingOver:p,combineWith:m,mode:l,offset:a,dimension:d,forceShouldAnimate:x,snapshot:n(l,f,p,m,null)}}));return(a,l)=>{if(Fs(a)){if(a.critical.draggable.id!==l.draggableId)return null;const d=a.current.client.offset,f=a.dimensions.draggables[l.draggableId],p=Jt(a.impact),m=zS(a.impact),x=a.forceShouldAnimate;return o(e(d.x,d.y),a.movementMode,f,l.isClone,p,m,x)}if(a.phase==="DROP_ANIMATING"){const d=a.completed;if(d.result.draggableId!==l.draggableId)return null;const f=l.isClone,p=a.dimensions.draggables[l.draggableId],m=d.result,x=m.mode,g=I0(m),y=$S(m),C={duration:a.dropDuration,curve:pd.drop,moveTo:a.newHomeClientOffset,opacity:y?Ls.opacity.drop:null,scale:y?Ls.scale.drop:null};return{mapped:{type:"DRAGGING",offset:a.newHomeClientOffset,dimension:p,dropping:C,draggingOver:g,combineWith:y,mode:x,forceShouldAnimate:null,snapshot:n(x,f,g,y,C)}}}return null}}function T0(e=null){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:e,combineWith:null}}const GS={mapped:{type:"SECONDARY",offset:mt,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:T0(null)}};function US(){const e=ht((d,f)=>({x:d,y:f})),n=ht(T0),o=ht((d,f=null,p)=>({mapped:{type:"SECONDARY",offset:d,combineTargetFor:f,shouldAnimateDisplacement:p,snapshot:n(f)}})),s=d=>d?o(mt,d,!0):null,a=(d,f,p,m)=>{const x=p.displaced.visible[d],g=!!(m.inVirtualList&&m.effected[d]),y=La(p),w=y&&y.draggableId===d?f:null;if(!x){if(!g)return s(w);if(p.displaced.invisible[d])return null;const S=ko(m.displacedBy.point),B=e(S.x,S.y);return o(B,w,!0)}if(g)return s(w);const C=p.displacedBy.point,E=e(C.x,C.y);return o(E,w,x.shouldAnimate)};return(d,f)=>{if(Fs(d))return d.critical.draggable.id===f.draggableId?null:a(f.draggableId,d.critical.draggable.id,d.impact,d.afterCritical);if(d.phase==="DROP_ANIMATING"){const p=d.completed;return p.result.draggableId===f.draggableId?null:a(f.draggableId,p.result.draggableId,p.impact,p.afterCritical)}return null}}const HS=()=>{const e=VS(),n=US();return(s,a)=>e(s,a)||n(s,a)||GS},WS={dropAnimationFinished:u0},qS=Mg(HS,WS,null,{context:xd,areStatePropsEqual:k0})(FS);function O0(e){return Da(wd).isUsingCloneFor===e.draggableId&&!e.isClone?null:we.createElement(qS,e)}function M0(e){const n=typeof e.isDragDisabled=="boolean"?!e.isDragDisabled:!0,o=!!e.disableInteractiveElementBlocking,s=!!e.shouldRespectForcePress;return we.createElement(O0,wa({},e,{isClone:!1,isEnabled:n,canDragInteractiveElements:o,shouldRespectForcePress:s}))}const _0=e=>n=>e===n,KS=_0("scroll"),YS=_0("auto"),zm=(e,n)=>n(e.overflowX)||n(e.overflowY),QS=e=>{const n=window.getComputedStyle(e),o={overflowX:n.overflowX,overflowY:n.overflowY};return zm(o,KS)||zm(o,YS)},XS=()=>!1,L0=e=>e==null?null:e===document.body?XS()?e:null:e===document.documentElement?null:QS(e)?e:L0(e.parentElement);var Ou=e=>({x:e.scrollLeft,y:e.scrollTop});const B0=e=>e?window.getComputedStyle(e).position==="fixed"?!0:B0(e.parentElement):!1;var ZS=e=>{const n=L0(e),o=B0(e);return{closestScrollable:n,isFixedOnPage:o}},JS=({descriptor:e,isEnabled:n,isCombineEnabled:o,isFixedOnPage:s,direction:a,client:l,page:d,closest:f})=>{const p=(()=>{if(!f)return null;const{scrollSize:y,client:w}=f,C=h0({scrollHeight:y.scrollHeight,scrollWidth:y.scrollWidth,height:w.paddingBox.height,width:w.paddingBox.width});return{pageMarginBox:f.page.marginBox,frameClient:w,scrollSize:y,shouldClipSubject:f.shouldClipSubject,scroll:{initial:f.scroll,current:f.scroll,max:C,diff:{value:mt,displacement:mt}}}})(),m=a==="vertical"?id:qg,x=jo({page:d,withPlaceholder:null,axis:m,frame:p});return{descriptor:e,isCombineEnabled:o,isFixedOnPage:s,axis:m,isEnabled:n,client:l,page:d,frame:p,subject:x}};const e4=(e,n)=>{const o=Lg(e);if(!n||e!==n)return o;const s=o.paddingBox.top-n.scrollTop,a=o.paddingBox.left-n.scrollLeft,l=s+n.scrollHeight,d=a+n.scrollWidth,p=nd({top:s,right:d,bottom:l,left:a},o.border);return rd({borderBox:p,margin:o.margin,border:o.border,padding:o.padding})};var t4=({ref:e,descriptor:n,env:o,windowScroll:s,direction:a,isDropDisabled:l,isCombineEnabled:d,shouldClipSubject:f})=>{const p=o.closestScrollable,m=e4(e,p),x=ba(m,s),g=(()=>{if(!p)return null;const w=Lg(p),C={scrollHeight:p.scrollHeight,scrollWidth:p.scrollWidth};return{client:w,page:ba(w,s),scroll:Ou(p),scrollSize:C,shouldClipSubject:f}})();return JS({descriptor:n,isEnabled:!l,isCombineEnabled:d,isFixedOnPage:o.isFixedOnPage,direction:a,client:m,page:x,closest:g})};const n4={passive:!1},r4={passive:!0};var Vm=e=>e.shouldPublishImmediately?n4:r4;const la=e=>e&&e.env.closestScrollable||null;function o4(e){const n=b.useRef(null),o=Da(za),s=yd("droppable"),{registry:a,marshal:l}=o,d=C0(e),f=Me(()=>({id:e.droppableId,type:e.type,mode:e.mode}),[e.droppableId,e.mode,e.type]),p=b.useRef(f),m=Me(()=>ht((T,A)=>{n.current||ue();const I={x:T,y:A};l.updateDroppableScroll(f.id,I)}),[f.id,l]),x=Ce(()=>{const T=n.current;return!T||!T.env.closestScrollable?mt:Ou(T.env.closestScrollable)},[]),g=Ce(()=>{const T=x();m(T.x,T.y)},[x,m]),y=Me(()=>Ts(g),[g]),w=Ce(()=>{const T=n.current,A=la(T);if(T&&A||ue(),T.scrollOptions.shouldPublishImmediately){g();return}y()},[y,g]),C=Ce((T,A)=>{n.current&&ue();const I=d.current,R=I.getDroppableRef();R||ue();const M=ZS(R),Y={ref:R,descriptor:f,env:M,scrollOptions:A};n.current=Y;const ee=t4({ref:R,descriptor:f,env:M,windowScroll:T,direction:I.direction,isDropDisabled:I.isDropDisabled,isCombineEnabled:I.isCombineEnabled,shouldClipSubject:!I.ignoreContainerClipping}),oe=M.closestScrollable;return oe&&(oe.setAttribute(_m.contextId,o.contextId),oe.addEventListener("scroll",w,Vm(Y.scrollOptions))),ee},[o.contextId,f,w,d]),E=Ce(()=>{const T=n.current,A=la(T);return T&&A||ue(),Ou(A)},[]),S=Ce(()=>{const T=n.current;T||ue();const A=la(T);n.current=null,A&&(y.cancel(),A.removeAttribute(_m.contextId),A.removeEventListener("scroll",w,Vm(T.scrollOptions)))},[w,y]),B=Ce(T=>{const A=n.current;A||ue();const I=la(A);I||ue(),I.scrollTop+=T.y,I.scrollLeft+=T.x},[]),$=Me(()=>({getDimensionAndWatchScroll:C,getScrollWhileDragging:E,dragStopped:S,scroll:B}),[S,C,E,B]),P=Me(()=>({uniqueId:s,descriptor:f,callbacks:$}),[$,f,s]);en(()=>(p.current=P.descriptor,a.droppable.register(P),()=>{n.current&&S(),a.droppable.unregister(P)}),[$,f,S,P,l,a.droppable]),en(()=>{n.current&&l.updateDroppableIsEnabled(p.current.id,!e.isDropDisabled)},[e.isDropDisabled,l]),en(()=>{n.current&&l.updateDroppableIsCombineEnabled(p.current.id,e.isCombineEnabled)},[e.isCombineEnabled,l])}function du(){}const Gm={width:0,height:0,margin:pN},s4=({isAnimatingOpenOnMount:e,placeholder:n,animate:o})=>e||o==="close"?Gm:{height:n.client.borderBox.height,width:n.client.borderBox.width,margin:n.client.margin},i4=({isAnimatingOpenOnMount:e,placeholder:n,animate:o})=>{const s=s4({isAnimatingOpenOnMount:e,placeholder:n,animate:o});return{display:n.display,boxSizing:"border-box",width:s.width,height:s.height,marginTop:s.margin.top,marginRight:s.margin.right,marginBottom:s.margin.bottom,marginLeft:s.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:o!=="none"?Ds.placeholder:null}},a4=e=>{const n=b.useRef(null),o=Ce(()=>{n.current&&(clearTimeout(n.current),n.current=null)},[]),{animate:s,onTransitionEnd:a,onClose:l,contextId:d}=e,[f,p]=b.useState(e.animate==="open");b.useEffect(()=>f?s!=="open"?(o(),p(!1),du):n.current?du:(n.current=setTimeout(()=>{n.current=null,p(!1)}),o):du,[s,f,o]);const m=Ce(g=>{g.propertyName==="height"&&(a(),s==="close"&&l())},[s,l,a]),x=i4({isAnimatingOpenOnMount:f,animate:e.animate,placeholder:e.placeholder});return we.createElement(e.placeholder.tagName,{style:x,"data-rfd-placeholder-context-id":d,onTransitionEnd:m,ref:e.innerRef})};var l4=we.memo(a4);class c4 extends we.PureComponent{constructor(...n){super(...n),this.state={isVisible:!!this.props.on,data:this.props.on,animate:this.props.shouldAnimate&&this.props.on?"open":"none"},this.onClose=()=>{this.state.animate==="close"&&this.setState({isVisible:!1})}}static getDerivedStateFromProps(n,o){return n.shouldAnimate?n.on?{isVisible:!0,data:n.on,animate:"open"}:o.isVisible?{isVisible:!0,data:o.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!n.on,data:n.on,animate:"none"}}render(){if(!this.state.isVisible)return null;const n={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(n)}}const u4=e=>{const n=b.useContext(za);n||ue();const{contextId:o,isMovementAllowed:s}=n,a=b.useRef(null),l=b.useRef(null),{children:d,droppableId:f,type:p,mode:m,direction:x,ignoreContainerClipping:g,isDropDisabled:y,isCombineEnabled:w,snapshot:C,useClone:E,updateViewportMaxScroll:S,getContainerForClone:B}=e,$=Ce(()=>a.current,[]),P=Ce((oe=null)=>{a.current=oe},[]);Ce(()=>l.current,[]);const T=Ce((oe=null)=>{l.current=oe},[]),A=Ce(()=>{s()&&S({maxScroll:g0()})},[s,S]);o4({droppableId:f,type:p,mode:m,direction:x,isDropDisabled:y,isCombineEnabled:w,ignoreContainerClipping:g,getDroppableRef:$});const I=Me(()=>we.createElement(c4,{on:e.placeholder,shouldAnimate:e.shouldAnimatePlaceholder},({onClose:oe,data:O,animate:V})=>we.createElement(l4,{placeholder:O,onClose:oe,innerRef:T,animate:V,contextId:o,onTransitionEnd:A})),[o,A,e.placeholder,e.shouldAnimatePlaceholder,T]),R=Me(()=>({innerRef:P,placeholder:I,droppableProps:{"data-rfd-droppable-id":f,"data-rfd-droppable-context-id":o}}),[o,f,I,P]),M=E?E.dragging.draggableId:null,Y=Me(()=>({droppableId:f,type:p,isUsingCloneFor:M}),[f,M,p]);function ee(){if(!E)return null;const{dragging:oe,render:O}=E,V=we.createElement(O0,{draggableId:oe.draggableId,index:oe.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},(U,X)=>O(U,X,oe));return c1.createPortal(V,B())}return we.createElement(wd.Provider,{value:Y},d(R,C),ee())};function d4(){return document.body||ue(),document.body}const Um={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:d4},F0=e=>{let n={...e},o;for(o in Um)e[o]===void 0&&(n={...n,[o]:Um[o]});return n},fu=(e,n)=>e===n.droppable.type,Hm=(e,n)=>n.draggables[e.draggable.id],f4=()=>{const e={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},n={...e,shouldAnimatePlaceholder:!1},o=ht(l=>({draggableId:l.id,type:l.type,source:{index:l.index,droppableId:l.droppableId}})),s=ht((l,d,f,p,m,x)=>{const g=m.descriptor.id;if(m.descriptor.droppableId===l){const C=x?{render:x,dragging:o(m.descriptor)}:null,E={isDraggingOver:f,draggingOverWith:f?g:null,draggingFromThisWith:g,isUsingPlaceholder:!0};return{placeholder:m.placeholder,shouldAnimatePlaceholder:!1,snapshot:E,useClone:C}}if(!d)return n;if(!p)return e;const w={isDraggingOver:f,draggingOverWith:g,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:m.placeholder,shouldAnimatePlaceholder:!0,snapshot:w,useClone:null}});return(l,d)=>{const f=F0(d),p=f.droppableId,m=f.type,x=!f.isDropDisabled,g=f.renderClone;if(Fs(l)){const y=l.critical;if(!fu(m,y))return n;const w=Hm(y,l.dimensions),C=Jt(l.impact)===p;return s(p,x,C,C,w,g)}if(l.phase==="DROP_ANIMATING"){const y=l.completed;if(!fu(m,y.critical))return n;const w=Hm(y.critical,l.dimensions);return s(p,x,I0(y.result)===p,Jt(y.impact)===p,w,g)}if(l.phase==="IDLE"&&l.completed&&!l.shouldFlush){const y=l.completed;if(!fu(m,y.critical))return n;const w=Jt(y.impact)===p,C=!!(y.impact.at&&y.impact.at.type==="COMBINE"),E=y.critical.droppable.id===p;return w?C?e:n:E?e:n}return n}},p4={updateViewportMaxScroll:E2},$0=Mg(f4,p4,(e,n,o)=>({...F0(o),...e,...n}),{context:xd,areStatePropsEqual:k0})(u4),Xt=e=>e.split(",").map(n=>n.trim()),Zn=e=>e.join(", "),da=e=>e.trim()?/^[a-gA-G](##|#|bb|b)?(\d+)?$/.test(e.trim()):!0,Wm=e=>{if(!e.trim())return e;const n=e.trim();if(!da(n))return n;const o=n.match(/^([a-gA-G])(##|#|bb|b)?(\d*)$/);if(o){const[,s,a="",l]=o;return s.toUpperCase()+a.toLowerCase()+l}return n},h4=e=>{const n={C:0,"C#":1,Db:1,D:2,"D#":3,Eb:3,E:4,"E#":5,Fb:4,F:5,"F#":6,Gb:6,G:7,"G#":8,Ab:8,A:9,"A#":10,Bb:10,B:11,"B#":0,Cb:11},o=e.match(/^([A-Ga-g])(##|#|bb|b)?/);if(!o)return null;const[,s,a=""]=o,l=s.toUpperCase()+a.toLowerCase();return n[l]??null},qm=e=>Xt(e).map(o=>h4(o)).filter(o=>o!==null),m4=(e,n)=>{const o=new Set(e),s=new Set(n);let a=0;for(const l of o)s.has(l)&&a++;return a},g4=({chords:e,onUpdateChord:n,onFetchOriginalChord:o,onChordClick:s})=>{const[a,l]=b.useState(null),[d,f]=b.useState(null),[p,m]=b.useState(""),[x,g]=b.useState(""),[y,w]=b.useState(""),C=async O=>{const V=O.name.replace(/\/[A-G](##|#|bb|b)?\d*/,"");console.log("Looking for base chord:",V);const U=await Er.getAllDistinctChords();if(U){const X=U.filter(J=>J.chordName===V);if(X.length===0)console.log("No matches found in library for:",V);else{console.log(`Found ${X.length} chord(s) with name "${V}", comparing notes to find best match...`);const J=qm(O.originalNotes||O.notes);console.log("Current chord note numbers:",J,"from:",O.originalNotes||O.notes);let se=X[0],q=0;for(const Q of X)if(Q.chordNoteNames){const K=qm(Q.chordNoteNames),D=m4(J,K);console.log(`  - Candidate notes: ${Q.chordNoteNames} (note numbers: ${K}) - ${D} shared notes`),D>q&&(q=D,se=Q)}if(se?.chordNoteNames&&q>0)return console.log(`✓ Best match selected (${q} shared notes):`,se.chordNoteNames),se.chordNoteNames;console.warn(`✗ No good match found (max shared notes: ${q})`)}}if(O.originalKey&&O.originalMode&&o)try{console.log("Fetching base chord",V,"from API");const X=await o(V,O.originalKey,O.originalMode);if(X)return console.log("Fetched base chord from API:",X),X}catch(X){console.warn("Failed to fetch base chord from API:",X)}return console.warn("Could not find base chord definition for:",V),null},E=async()=>{if(m(""),w(""),!!d)try{const O=await C(d);if(O)if(Xt(O).every(J=>/^[A-Ga-g]/.test(J.trim())&&da(J.trim()))){console.log("Reverting to base chord notes:",O),f({...d,notes:O});return}else console.warn("Base chord notes are in invalid format:",O);const V=Xt(d.notes);if(V.length>1){const U=V[0],X=p.replace(/\d+/,"");if(U.replace(/\d+/,"")===X){const se=V.slice(1),q=Zn(se);console.log("Removing slash note manually, result:",q),f({...d,notes:q});return}}console.warn("Could not revert slash note - no base chord found and no obvious slash note to remove")}catch(O){console.error("Error removing slash note:",O)}},S=O=>{if(!p.trim()||!x)return!1;const V=O.replace(/\d+/,""),U=p.trim().replace(/\d+/,"");return V===U?!Xt(x).some(se=>se.replace(/\d+/,"")===U):!1},B=async(O,V)=>{l(O),f({...V});try{const X=await C(V);g(X||V.notes)}catch(X){console.warn("Failed to load original chord, using current notes:",X),g(V.originalNotes||V.notes)}const U=V.name.match(/\/([A-G](##|#|bb|b)?\d*)/);m(U?U[1]:"")},$=()=>{if(a!==null&&d&&n){if(y)return;let O=d.name.replace(/\/[A-G](##|#|bb|b)?\d*/,""),V=d.notes;if(p.trim()){O+=`/${p.trim()}`;const X=Xt(V),J=p.trim();if(X.some(q=>{const Q=q.replace(/\d+/,""),K=J.replace(/\d+/,"");return Q===K})){const q=X.filter(K=>{const D=K.replace(/\d+/,""),F=J.replace(/\d+/,"");return D!==F}),Q=[J,...q];V=Zn(Q)}else{const q=[J,...X];V=Zn(q)}}const U={...d,name:O,notes:V,originalNotes:d.originalNotes||x};n(a,U)}P()},P=()=>{l(null),f(null),m(""),g(""),w("")},T=async O=>{if(!d||O===0)return;const V=Xt(d.notes);O===1&&S(V[0])||([V[O],V[O-1]]=[V[O-1],V[O]],f({...d,notes:Zn(V)}),await R(V))},A=async O=>{if(!d)return;const V=Xt(d.notes);O!==V.length-1&&(O===0&&S(V[0])||([V[O],V[O+1]]=[V[O+1],V[O]],f({...d,notes:Zn(V)}),await R(V)))},I=async O=>{if(d)try{const U=await C(d)||d.originalNotes||x;if(!U)return;if(!O.trim()){f({...d,notes:U});return}const X=Xt(U),J=O.trim(),se=X.some(Q=>{const K=Q.replace(/\d+/,""),D=J.replace(/\d+/,"");return K===D});let q;if(se){const Q=X.filter(D=>{const F=D.replace(/\d+/,""),ae=J.replace(/\d+/,"");return F!==ae}),K=X.find(D=>{const F=D.replace(/\d+/,""),ae=J.replace(/\d+/,"");return F===ae});q=K?[K,...Q]:[J,...Q]}else q=[J,...X];f({...d,notes:Zn(q)})}catch(V){console.warn("Failed to update chord with slash note:",V);const U=d.originalNotes||x;if(!U)return;if(!O.trim()){f({...d,notes:U});return}const X=Xt(U),se=[O.trim(),...X];f({...d,notes:Zn(se)})}},R=async O=>{if(!(!d||O.length===0))try{const U=await C(d)||d.originalNotes||x;if(!U)return;const X=Xt(U),J=O[0],se=X[0];m(J!==se?J:"")}catch(V){console.warn("Failed to detect slash note from order:",V);const U=d.originalNotes||x;if(!U)return;const X=Xt(U),J=O[0],se=X[0];m(J!==se?J:"")}};return{editingChordIndex:a,editingChord:d,slashNote:p,originalChordNotes:x,slashNoteError:y,handleEditChord:B,handleSaveEdit:$,handleCancelEdit:P,moveNoteUp:T,moveNoteDown:A,removeSlashNote:E,handleSlashNoteChange:async O=>{const V=O.trim();if(!V){w(""),m(""),await I("");return}if(!da(V)){w("Invalid note. Use A-G with optional # or b (e.g., C, F#, Bb, D4)"),m(O);return}w("");const U=Wm(V);m(U),await I(U)},handleDragEnd:async O=>{if(!O.destination||!d||O.source.index===O.destination.index)return;const V=Xt(d.notes);if(O.source.index===0&&S(V[0])||O.destination.index===0&&S(V[0]))return;const[U]=V.splice(O.source.index,1);V.splice(O.destination.index,0,U),f({...d,notes:Zn(V)}),await R(V)},handlePreviewChord:()=>{d&&s(d.notes,-1)},isSlashNote:O=>{if(!p.trim())return!1;const V=O.replace(/\d+/,""),U=p.trim().replace(/\d+/,"");return V===U},isManualSlashNote:S,parseNotes:Xt,notesToString:Zn,formatNoteName:Wm,isValidNoteName:da}},v4=4,x4=8,y4=({activeMidiNotes:e})=>{const n=we.useRef(null),[o,s]=we.useState(400),a=we.useMemo(()=>o<400?Math.max(300,o-20):o<768?Math.min(500,o-40):Math.min(600,o-60),[o]);we.useEffect(()=>{const m=()=>{n.current&&s(n.current.offsetWidth)};m();const x=new ResizeObserver(()=>{m()});return n.current&&x.observe(n.current),()=>{x.disconnect()}},[]),we.useEffect(()=>{const m=document.createElement("style");return m.textContent=`
            /* Disable all pointer events on piano keys to prevent hover/click interference */
            .ReactPiano__Key {
                pointer-events: none !important;
            }
            
            /* Ultra-specific CSS to override react-piano styles */
            div[class*="ReactPiano"] .ReactPiano__Key--active,
            div[class*="ReactPiano"] .ReactPiano__Key--active.ReactPiano__Key--natural,
            div[class*="ReactPiano"] .ReactPiano__Key--active.ReactPiano__Key--accidental,
            .ReactPiano__Key--active[class*="ReactPiano__Key"],
            .ReactPiano__Key--active[class*="ReactPiano__Key"]:hover,
            .ReactPiano__Key--active[class*="ReactPiano__Key"]:active,
            .ReactPiano__Key--active[class*="ReactPiano__Key"]:focus {
                background: #3b82f6 !important;
                background-color: #3b82f6 !important;
                background-image: none !important;
                color: white !important;
                border-color: #2563eb !important;
                border-top-color: #2563eb !important;
                border-left-color: #2563eb !important;
                border-right-color: #2563eb !important;
                border-bottom-color: #2563eb !important;
                box-shadow: none !important;
                transition: none !important;
            }
            
            /* Force natural (white) keys to stay blue */
            div[class*="ReactPiano"] .ReactPiano__Key--active.ReactPiano__Key--natural,
            .ReactPiano__Key--active.ReactPiano__Key--natural[class*="ReactPiano__Key"],
            .ReactPiano__Key--active.ReactPiano__Key--natural[class*="ReactPiano__Key"]:hover,
            .ReactPiano__Key--active.ReactPiano__Key--natural[class*="ReactPiano__Key"]:active,
            .ReactPiano__Key--active.ReactPiano__Key--natural[class*="ReactPiano__Key"]:focus {
                background: linear-gradient(to bottom, #3b82f6 0%, #2563eb 100%) !important;
                background-color: #3b82f6 !important;
                color: white !important;
                border-top: 1px solid #2563eb !important;
                border-left: 1px solid #2563eb !important;
                border-right: 1px solid #2563eb !important;
                border-bottom: 1px solid #1e40af !important;
                box-shadow: 
                    inset 0 0 0 1px rgba(37, 99, 235, 0.3),
                    inset 0 -3px 6px rgba(0,0,0,0.1) !important;
            }
            
            /* Force accidental (black) keys to stay blue */
            div[class*="ReactPiano"] .ReactPiano__Key--active.ReactPiano__Key--accidental,
            .ReactPiano__Key--active.ReactPiano__Key--accidental[class*="ReactPiano__Key"],
            .ReactPiano__Key--active.ReactPiano__Key--accidental[class*="ReactPiano__Key"]:hover,
            .ReactPiano__Key--active.ReactPiano__Key--accidental[class*="ReactPiano__Key"]:active,
            .ReactPiano__Key--active.ReactPiano__Key--accidental[class*="ReactPiano__Key"]:focus {
                background: linear-gradient(to bottom, #1d4ed8 0%, #1e40af 100%) !important;
                background-color: #1d4ed8 !important;
                color: white !important;
                border: 1px solid #1e40af !important;
                box-shadow: 
                    inset 0 0 0 1px rgba(30, 64, 175, 0.4),
                    inset 0 -2px 4px rgba(0,0,0,0.2) !important;
            }
            
            /* Override any CSS animations or transitions */
            .ReactPiano__Key--active * {
                transition: none !important;
                animation: none !important;
            }
            
            /* Nuclear option - override any inline styles that might be applied */
            .ReactPiano__Key--active[style] {
                background: #3b82f6 !important;
                background-color: #3b82f6 !important;
            }
            
            .ReactPiano__Key--active.ReactPiano__Key--natural[style] {
                background: linear-gradient(to bottom, #3b82f6 0%, #2563eb 100%) !important;
            }
            
            .ReactPiano__Key--active.ReactPiano__Key--accidental[style] {
                background: linear-gradient(to bottom, #1d4ed8 0%, #1e40af 100%) !important;
            }
        `,document.head.appendChild(m),()=>{document.head.removeChild(m)}},[]);const l=4,d=7,f=Pt.fromNote(`c${l}`),p=Pt.fromNote(`c${d}`);return u.jsx("div",{ref:n,className:"w-full",children:u.jsx(qu,{noteRange:{first:f,last:p},playNote:()=>{},stopNote:()=>{},disabled:!1,width:a,activeNotes:e,className:"mx-auto"})})},b4=({editingChordIndex:e,editingChord:n,totalChords:o,chords:s,onUpdateChord:a,onFetchOriginalChord:l,onChordClick:d,onClose:f,onNavigateToChord:p})=>{const{editingChord:m,slashNote:x,slashNoteError:g,handleEditChord:y,handleSaveEdit:w,handleCancelEdit:C,moveNoteUp:E,moveNoteDown:S,removeSlashNote:B,handleSlashNoteChange:$,handleDragEnd:P,handlePreviewChord:T,isSlashNote:A,isManualSlashNote:I,parseNotes:R}=g4({chords:s,onUpdateChord:a,onFetchOriginalChord:l,onChordClick:d});we.useEffect(()=>{y(e,n)},[e,n]);const M=()=>{w(),f()},Y=()=>{C(),f()},ee=()=>{e>0&&p&&p(e-1)},oe=()=>{e<o-1&&p&&p(e+1)},O=we.useMemo(()=>{if(!m?.notes)return[];try{return ga(v4,x4,m.notes).map(({note:se,octave:q})=>{try{return Pt.fromNote(`${se}${q}`)}catch(Q){return console.warn(`Failed to parse note: ${se}${q}`,Q),null}}).filter(Boolean)}catch(J){return console.warn("Failed to parse chord notes:",J),[]}},[m?.notes]);if(!m)return null;const V=R(m.notes),U=e>0,X=e<o-1;return u.jsxs("div",{className:"fixed inset-0 bg-[#1a1e24] bg-opacity-95 backdrop-blur-sm z-50 flex flex-col",children:[u.jsxs("div",{className:"flex-shrink-0 max-w-4xl mx-auto px-4 py-4 w-full",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsxs("div",{className:"flex items-center space-x-2 flex-1 min-w-0",children:[u.jsxs("h2",{className:"text-lg sm:text-xl font-bold text-white truncate",children:["Edit: ",m.name.replace(/\/[A-G](##|#|bb|b)?\d*/,"")]}),u.jsxs("span",{className:"px-2 py-1 text-xs bg-slate-700 text-slate-300 rounded font-mono flex-shrink-0",children:[e+1," / ",o]})]}),u.jsxs("div",{className:"flex items-center space-x-2 flex-shrink-0",children:[u.jsxs(Sn,{onClick:M,variant:"primary",size:"sm",disabled:!!g,className:bt("bg-green-600 hover:bg-green-700",g&&"opacity-50 cursor-not-allowed"),title:g?"Fix slash note error before saving":"Save changes",children:[u.jsx(Eb,{className:"w-4 h-4 sm:mr-1"}),u.jsx("span",{className:"hidden sm:inline",children:"Save"})]}),u.jsxs(Sn,{onClick:Y,variant:"secondary",size:"sm",children:[u.jsx("span",{className:"hidden sm:inline",children:"Cancel"}),u.jsx("span",{className:"sm:hidden",children:"✕"})]})]})]}),u.jsx("div",{className:"flex items-center",children:p&&u.jsxs("div",{className:"flex items-center space-x-1",children:[u.jsx(Sn,{onClick:ee,variant:"secondary",size:"sm",disabled:!U,title:"Previous chord",className:"px-2",children:u.jsx(Ab,{className:"w-4 h-4"})}),u.jsx(Sn,{onClick:oe,variant:"secondary",size:"sm",disabled:!X,title:"Next chord",className:"px-2",children:u.jsx(vg,{className:"w-4 h-4"})})]})}),u.jsxs("div",{className:"p-3 bg-[#2a2f38] rounded-lg border border-gray-600 mb-4 mt-4",children:[u.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Slash Note (Bass Note)"}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("input",{type:"text",value:x,onChange:J=>$(J.target.value),onBlur:J=>$(J.target.value),onKeyDown:J=>{J.key==="Enter"&&$(J.currentTarget.value)},placeholder:"e.g., C4, F#, Bb3",className:bt("flex-1 px-3 py-2 bg-[#1a1e24] border rounded text-white placeholder-gray-400 focus:outline-none transition-colors text-sm",g?"border-red-500 focus:border-red-400":"border-gray-600 focus:border-blue-500")}),x.trim()&&!g&&u.jsx("button",{onClick:B,className:"p-2 text-red-400 hover:text-red-300 hover:bg-red-500/10 rounded transition-colors",title:"Remove slash note",children:u.jsx(Su,{className:"w-4 h-4"})})]}),g?u.jsxs("p",{className:"text-xs text-red-400 mt-1 flex items-center space-x-1",children:[u.jsx(Su,{className:"w-3 h-3 flex-shrink-0"}),u.jsx("span",{children:g})]}):u.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Add bass note (e.g., Cmaj7/E)"}),V.length>0&&I(V[0])&&!g&&u.jsx("div",{className:"mt-2 p-2 bg-amber-500/10 border border-amber-500/30 rounded text-xs text-amber-300",children:u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx($h,{className:"w-3 h-3"}),u.jsx("span",{children:"Slash note locked in first position"})]})})]}),u.jsx("div",{className:"bg-[#2a2f38] rounded-lg border border-gray-600 p-3 mb-4",children:u.jsx("div",{className:"bg-[#1a1e24] rounded p-2 flex justify-center overflow-x-auto",children:u.jsx(y4,{activeMidiNotes:O})})})]}),u.jsx("div",{className:"flex-1 max-w-4xl mx-auto px-4 w-full overflow-hidden flex flex-col -mt-4",children:u.jsxs("div",{className:"bg-[#2a2f38] rounded-lg border border-gray-600 p-4 flex-1 flex flex-col min-h-0",children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsxs(Sn,{onClick:T,variant:"secondary",size:"sm",className:"bg-blue-600 hover:bg-blue-700 text-white",title:"Preview chord",children:[u.jsx(xg,{className:"w-4 h-4 sm:mr-1"}),u.jsx("span",{className:"hidden sm:inline",children:"Preview"})]}),u.jsxs("div",{className:"flex-1 text-center mx-4",children:[u.jsx("h3",{className:"text-lg font-medium text-white leading-tight",children:"Chord Notes"}),u.jsx("p",{className:"text-xs text-gray-400 leading-tight",children:"Drag to reorder"})]}),u.jsx("div",{className:"w-16 sm:w-20"})," "]}),u.jsx("div",{className:"flex-1 min-h-0",children:u.jsx(R0,{onDragEnd:P,children:u.jsx($0,{droppableId:"notes-list",children:(J,se)=>u.jsxs("div",{...J.droppableProps,ref:J.innerRef,className:bt("space-y-3 transition-colors duration-200 overflow-y-auto h-full",{"bg-blue-500/5 rounded-lg p-2":se.isDraggingOver}),children:[V.map((q,Q)=>{const K=A(q),F=I(q)&&Q===0;return u.jsx(M0,{draggableId:`${q}-${Q}`,index:Q,isDragDisabled:F,children:(ae,de)=>u.jsxs("div",{ref:ae.innerRef,...ae.draggableProps,...ae.dragHandleProps,className:bt("flex items-center space-x-3 p-3 rounded border transition-all duration-200",{"shadow-lg shadow-blue-500/20 border-blue-500 transform scale-105":de.isDragging,"cursor-grab":!de.isDragging&&!F,"cursor-grabbing":de.isDragging,"cursor-not-allowed":F,"bg-amber-500/10 border-amber-500/50":K&&!de.isDragging,"hover:border-amber-400/70":K&&!de.isDragging,"bg-amber-600/15 border-amber-600/60":F&&!de.isDragging,"bg-[#1a1e24] border-gray-600":!K&&!F&&!de.isDragging,"hover:border-gray-500":!K&&!F&&!de.isDragging}),style:ae.draggableProps.style,children:[u.jsxs("div",{className:"flex-1 text-left",children:[u.jsxs("div",{className:"flex items-center justify-between mb-1",children:[u.jsx("span",{className:"text-white font-mono text-lg font-semibold",children:q}),u.jsxs("div",{className:"flex items-center space-x-2",children:[K&&u.jsx("span",{className:"px-2 py-1 text-xs bg-amber-500/20 text-amber-300 rounded border border-amber-500/30 font-medium",children:"SLASH"}),F&&u.jsxs("span",{className:"px-2 py-1 text-xs bg-amber-600/20 text-amber-200 rounded border border-amber-600/30 font-medium flex items-center space-x-1",children:[u.jsx($h,{className:"w-3 h-3"}),u.jsx("span",{children:"LOCKED"})]})]})]}),u.jsxs("div",{className:"text-xs text-slate-400 font-medium",children:["Note ",Q+1]})]}),u.jsxs("div",{className:"flex items-center space-x-1",children:[u.jsx("span",{className:"text-xs text-slate-400 mr-2",children:"Order:"}),u.jsx("button",{onClick:ne=>{ne.stopPropagation(),E(Q)},disabled:Q===0||F||Q===1&&I(V[0]),className:"p-1 text-slate-300 hover:text-white hover:bg-[#4a5262] rounded transition-colors disabled:opacity-30 disabled:cursor-not-allowed",title:F?"Cannot move locked slash note":Q===1&&I(V[0])?"Cannot move past locked slash note":"Move up",children:u.jsx(Rs,{className:"w-4 h-4"})}),u.jsx("button",{onClick:ne=>{ne.stopPropagation(),S(Q)},disabled:Q===V.length-1||F,className:"p-1 text-slate-300 hover:text-white hover:bg-[#4a5262] rounded transition-colors disabled:opacity-30 disabled:cursor-not-allowed",title:F?"Cannot move locked slash note":"Move down",children:u.jsx(Yr,{className:"w-4 h-4"})})]})]})},`${q}-${Q}`)}),J.placeholder]})})})})]})}),u.jsx("div",{className:"flex-shrink-0 h-4"})]})},w4=4,N4=7,C4=({musicStore:e,playbackStore:n,patternStore:o,uiStore:s,setEditingChordIndex:a})=>{const[l,d]=b.useState(!1),[f,p]=b.useState(!1),m=b.useRef(null);b.useEffect(()=>{const P=()=>{const T=window.innerHeight,A=parseFloat(getComputedStyle(document.documentElement).fontSize);p(T<35*A)};return P(),window.addEventListener("resize",P,{passive:!0}),window.addEventListener("orientationchange",P,{passive:!0}),()=>{window.removeEventListener("resize",P),window.removeEventListener("orientationchange",P)}},[]),b.useEffect(()=>{const{isLiveMode:P}=s;if(P){const T=document.body.style.overflow,A=document.body.style.overscrollBehavior,I=document.body.style.touchAction;document.body.style.overflow="hidden",document.body.style.overscrollBehavior="none",document.body.style.touchAction="none";const R=()=>{setTimeout(()=>{if(m.current&&P&&!l){const M=m.current;M.style.overflowY="hidden",M.style.touchAction="pan-y",M.offsetHeight,M.style.overflowY="auto",M.style.WebkitOverflowScrolling="touch"}},300)};return window.addEventListener("orientationchange",R),()=>{document.body.style.overflow=T,document.body.style.overscrollBehavior=A,document.body.style.touchAction=I,window.removeEventListener("orientationchange",R)}}},[s.isLiveMode,l]),b.useEffect(()=>{const P=()=>/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||"ontouchstart"in window||navigator.maxTouchPoints>0;if(m.current&&s.isLiveMode){const T=m.current;l?P()?(T.style.touchAction="pan-y",T.style.overflowY="auto",T.style.WebkitOverflowScrolling="auto"):(T.style.removeProperty("touchAction"),T.style.overflowY="auto",T.style.WebkitOverflowScrolling="touch"):(T.style.overflowY="auto",T.style.touchAction="pan-y",T.style.WebkitOverflowScrolling="touch")}},[l,s.isLiveMode]);const x=b.useCallback((P,T,A)=>{if(s.isDeleteMode&&T!==void 0){n.removeChord(T);return}const I=ga(w4,N4,P);T!==void 0?(n.setTemporaryChord(null),n.setActiveChordIndex(T),o.globalPatternState.isPlaying||n.playNotes(I),n.setHighlightedChordIndex(T),setTimeout(()=>n.setHighlightedChordIndex(null),150)):(A&&n.setTemporaryChord({name:A,notes:P}),o.globalPatternState.isPlaying||n.playNotes(I))},[s.isDeleteMode,o.globalPatternState.isPlaying,n]),g=b.useCallback(()=>{n.clearAllChords(),o.setGlobalPatternState({isPlaying:!1}),s.setIsLiveMode(!1)},[n,o,s]),y=b.useCallback(()=>{o.setGlobalPatternState({isPlaying:!o.globalPatternState.isPlaying})},[o]),w=b.useCallback(()=>{s.setIsDeleteMode(!s.isDeleteMode)},[s]),C=b.useCallback(()=>{s.setIsLiveMode(!s.isLiveMode)},[s]),E=b.useCallback((P,T)=>{const A={name:T.name,notes:T.notes,pattern:T.pattern||["1","2","3","4"],originalKey:T.originalKey||e.key,originalMode:T.originalMode||e.mode,originalNotes:T.originalNotes||T.notes};n.updateChord(P,A)},[e,n]),S=b.useCallback(P=>{a(P)},[a]),B=b.useCallback(()=>{a(null)},[a]),$=b.useCallback(P=>{P>=0&&P<n.addedChords.length&&a(P)},[n.addedChords.length,a]);return{isEditMode:l,setIsEditMode:d,isCompactHeight:f,scrollContainerRef:m,handleChordClick:x,handleUpdateChord:E,handleEditChord:S,handleCloseEditor:B,handleNavigateToChord:$,handleClearAll:g,handleTogglePlayback:y,handleToggleDeleteMode:w,handleToggleLiveMode:C}};function S4(){for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return b.useMemo(()=>s=>{n.forEach(a=>a(s))},n)}const Ga=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Oo(e){const n=Object.prototype.toString.call(e);return n==="[object Window]"||n==="[object global]"}function Nd(e){return"nodeType"in e}function Gt(e){var n,o;return e?Oo(e)?e:Nd(e)&&(n=(o=e.ownerDocument)==null?void 0:o.defaultView)!=null?n:window:window}function Cd(e){const{Document:n}=Gt(e);return e instanceof n}function Ks(e){return Oo(e)?!1:e instanceof Gt(e).HTMLElement}function z0(e){return e instanceof Gt(e).SVGElement}function Mo(e){return e?Oo(e)?e.document:Nd(e)?Cd(e)?e:Ks(e)||z0(e)?e.ownerDocument:document:document:document}const Fn=Ga?b.useLayoutEffect:b.useEffect;function Sd(e){const n=b.useRef(e);return Fn(()=>{n.current=e}),b.useCallback(function(){for(var o=arguments.length,s=new Array(o),a=0;a<o;a++)s[a]=arguments[a];return n.current==null?void 0:n.current(...s)},[])}function E4(){const e=b.useRef(null),n=b.useCallback((s,a)=>{e.current=setInterval(s,a)},[]),o=b.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[n,o]}function $s(e,n){n===void 0&&(n=[e]);const o=b.useRef(e);return Fn(()=>{o.current!==e&&(o.current=e)},n),o}function Ys(e,n){const o=b.useRef();return b.useMemo(()=>{const s=e(o.current);return o.current=s,s},[...n])}function ja(e){const n=Sd(e),o=b.useRef(null),s=b.useCallback(a=>{a!==o.current&&n?.(a,o.current),o.current=a},[]);return[o,s]}function Mu(e){const n=b.useRef();return b.useEffect(()=>{n.current=e},[e]),n.current}let pu={};function Qs(e,n){return b.useMemo(()=>{if(n)return n;const o=pu[e]==null?0:pu[e]+1;return pu[e]=o,e+"-"+o},[e,n])}function V0(e){return function(n){for(var o=arguments.length,s=new Array(o>1?o-1:0),a=1;a<o;a++)s[a-1]=arguments[a];return s.reduce((l,d)=>{const f=Object.entries(d);for(const[p,m]of f){const x=l[p];x!=null&&(l[p]=x+e*m)}return l},{...n})}}const So=V0(1),zs=V0(-1);function D4(e){return"clientX"in e&&"clientY"in e}function Ed(e){if(!e)return!1;const{KeyboardEvent:n}=Gt(e.target);return n&&e instanceof n}function j4(e){if(!e)return!1;const{TouchEvent:n}=Gt(e.target);return n&&e instanceof n}function _u(e){if(j4(e)){if(e.touches&&e.touches.length){const{clientX:n,clientY:o}=e.touches[0];return{x:n,y:o}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:n,clientY:o}=e.changedTouches[0];return{x:n,y:o}}}return D4(e)?{x:e.clientX,y:e.clientY}:null}const Vs=Object.freeze({Translate:{toString(e){if(!e)return;const{x:n,y:o}=e;return"translate3d("+(n?Math.round(n):0)+"px, "+(o?Math.round(o):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:n,scaleY:o}=e;return"scaleX("+n+") scaleY("+o+")"}},Transform:{toString(e){if(e)return[Vs.Translate.toString(e),Vs.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:n,duration:o,easing:s}=e;return n+" "+o+"ms "+s}}}),Km="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function A4(e){return e.matches(Km)?e:e.querySelector(Km)}const P4={display:"none"};function R4(e){let{id:n,value:o}=e;return we.createElement("div",{id:n,style:P4},o)}function k4(e){let{id:n,announcement:o,ariaLiveType:s="assertive"}=e;const a={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return we.createElement("div",{id:n,style:a,role:"status","aria-live":s,"aria-atomic":!0},o)}function I4(){const[e,n]=b.useState("");return{announce:b.useCallback(s=>{s!=null&&n(s)},[]),announcement:e}}const G0=b.createContext(null);function T4(e){const n=b.useContext(G0);b.useEffect(()=>{if(!n)throw new Error("useDndMonitor must be used within a children of <DndContext>");return n(e)},[e,n])}function O4(){const[e]=b.useState(()=>new Set),n=b.useCallback(s=>(e.add(s),()=>e.delete(s)),[e]);return[b.useCallback(s=>{let{type:a,event:l}=s;e.forEach(d=>{var f;return(f=d[a])==null?void 0:f.call(d,l)})},[e]),n]}const M4={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},_4={onDragStart(e){let{active:n}=e;return"Picked up draggable item "+n.id+"."},onDragOver(e){let{active:n,over:o}=e;return o?"Draggable item "+n.id+" was moved over droppable area "+o.id+".":"Draggable item "+n.id+" is no longer over a droppable area."},onDragEnd(e){let{active:n,over:o}=e;return o?"Draggable item "+n.id+" was dropped over droppable area "+o.id:"Draggable item "+n.id+" was dropped."},onDragCancel(e){let{active:n}=e;return"Dragging was cancelled. Draggable item "+n.id+" was dropped."}};function L4(e){let{announcements:n=_4,container:o,hiddenTextDescribedById:s,screenReaderInstructions:a=M4}=e;const{announce:l,announcement:d}=I4(),f=Qs("DndLiveRegion"),[p,m]=b.useState(!1);if(b.useEffect(()=>{m(!0)},[]),T4(b.useMemo(()=>({onDragStart(g){let{active:y}=g;l(n.onDragStart({active:y}))},onDragMove(g){let{active:y,over:w}=g;n.onDragMove&&l(n.onDragMove({active:y,over:w}))},onDragOver(g){let{active:y,over:w}=g;l(n.onDragOver({active:y,over:w}))},onDragEnd(g){let{active:y,over:w}=g;l(n.onDragEnd({active:y,over:w}))},onDragCancel(g){let{active:y,over:w}=g;l(n.onDragCancel({active:y,over:w}))}}),[l,n])),!p)return null;const x=we.createElement(we.Fragment,null,we.createElement(R4,{id:s,value:a.draggable}),we.createElement(k4,{id:f,announcement:d}));return o?er.createPortal(x,o):x}var at;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(at||(at={}));function Aa(){}function hu(e,n){return b.useMemo(()=>({sensor:e,options:n??{}}),[e,n])}function B4(){for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return b.useMemo(()=>[...n].filter(s=>s!=null),[...n])}const Dn=Object.freeze({x:0,y:0});function U0(e,n){return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}function H0(e,n){let{data:{value:o}}=e,{data:{value:s}}=n;return o-s}function F4(e,n){let{data:{value:o}}=e,{data:{value:s}}=n;return s-o}function Ym(e){let{left:n,top:o,height:s,width:a}=e;return[{x:n,y:o},{x:n+a,y:o},{x:n,y:o+s},{x:n+a,y:o+s}]}function W0(e,n){if(!e||e.length===0)return null;const[o]=e;return o[n]}function Qm(e,n,o){return n===void 0&&(n=e.left),o===void 0&&(o=e.top),{x:n+e.width*.5,y:o+e.height*.5}}const $4=e=>{let{collisionRect:n,droppableRects:o,droppableContainers:s}=e;const a=Qm(n,n.left,n.top),l=[];for(const d of s){const{id:f}=d,p=o.get(f);if(p){const m=U0(Qm(p),a);l.push({id:f,data:{droppableContainer:d,value:m}})}}return l.sort(H0)},z4=e=>{let{collisionRect:n,droppableRects:o,droppableContainers:s}=e;const a=Ym(n),l=[];for(const d of s){const{id:f}=d,p=o.get(f);if(p){const m=Ym(p),x=a.reduce((y,w,C)=>y+U0(m[C],w),0),g=Number((x/4).toFixed(4));l.push({id:f,data:{droppableContainer:d,value:g}})}}return l.sort(H0)};function V4(e,n){const o=Math.max(n.top,e.top),s=Math.max(n.left,e.left),a=Math.min(n.left+n.width,e.left+e.width),l=Math.min(n.top+n.height,e.top+e.height),d=a-s,f=l-o;if(s<a&&o<l){const p=n.width*n.height,m=e.width*e.height,x=d*f,g=x/(p+m-x);return Number(g.toFixed(4))}return 0}const G4=e=>{let{collisionRect:n,droppableRects:o,droppableContainers:s}=e;const a=[];for(const l of s){const{id:d}=l,f=o.get(d);if(f){const p=V4(f,n);p>0&&a.push({id:d,data:{droppableContainer:l,value:p}})}}return a.sort(F4)};function U4(e,n,o){return{...e,scaleX:n&&o?n.width/o.width:1,scaleY:n&&o?n.height/o.height:1}}function q0(e,n){return e&&n?{x:e.left-n.left,y:e.top-n.top}:Dn}function H4(e){return function(o){for(var s=arguments.length,a=new Array(s>1?s-1:0),l=1;l<s;l++)a[l-1]=arguments[l];return a.reduce((d,f)=>({...d,top:d.top+e*f.y,bottom:d.bottom+e*f.y,left:d.left+e*f.x,right:d.right+e*f.x}),{...o})}}const W4=H4(1);function q4(e){if(e.startsWith("matrix3d(")){const n=e.slice(9,-1).split(/, /);return{x:+n[12],y:+n[13],scaleX:+n[0],scaleY:+n[5]}}else if(e.startsWith("matrix(")){const n=e.slice(7,-1).split(/, /);return{x:+n[4],y:+n[5],scaleX:+n[0],scaleY:+n[3]}}return null}function K4(e,n,o){const s=q4(n);if(!s)return e;const{scaleX:a,scaleY:l,x:d,y:f}=s,p=e.left-d-(1-a)*parseFloat(o),m=e.top-f-(1-l)*parseFloat(o.slice(o.indexOf(" ")+1)),x=a?e.width/a:e.width,g=l?e.height/l:e.height;return{width:x,height:g,top:m,right:p+x,bottom:m+g,left:p}}const Y4={ignoreTransform:!1};function _o(e,n){n===void 0&&(n=Y4);let o=e.getBoundingClientRect();if(n.ignoreTransform){const{transform:m,transformOrigin:x}=Gt(e).getComputedStyle(e);m&&(o=K4(o,m,x))}const{top:s,left:a,width:l,height:d,bottom:f,right:p}=o;return{top:s,left:a,width:l,height:d,bottom:f,right:p}}function Xm(e){return _o(e,{ignoreTransform:!0})}function Q4(e){const n=e.innerWidth,o=e.innerHeight;return{top:0,left:0,right:n,bottom:o,width:n,height:o}}function X4(e,n){return n===void 0&&(n=Gt(e).getComputedStyle(e)),n.position==="fixed"}function Z4(e,n){n===void 0&&(n=Gt(e).getComputedStyle(e));const o=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(a=>{const l=n[a];return typeof l=="string"?o.test(l):!1})}function Ua(e,n){const o=[];function s(a){if(n!=null&&o.length>=n||!a)return o;if(Cd(a)&&a.scrollingElement!=null&&!o.includes(a.scrollingElement))return o.push(a.scrollingElement),o;if(!Ks(a)||z0(a)||o.includes(a))return o;const l=Gt(e).getComputedStyle(a);return a!==e&&Z4(a,l)&&o.push(a),X4(a,l)?o:s(a.parentNode)}return e?s(e):o}function K0(e){const[n]=Ua(e,1);return n??null}function mu(e){return!Ga||!e?null:Oo(e)?e:Nd(e)?Cd(e)||e===Mo(e).scrollingElement?window:Ks(e)?e:null:null}function Y0(e){return Oo(e)?e.scrollX:e.scrollLeft}function Q0(e){return Oo(e)?e.scrollY:e.scrollTop}function Lu(e){return{x:Y0(e),y:Q0(e)}}var pt;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(pt||(pt={}));function X0(e){return!Ga||!e?!1:e===document.scrollingElement}function Z0(e){const n={x:0,y:0},o=X0(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},s={x:e.scrollWidth-o.width,y:e.scrollHeight-o.height},a=e.scrollTop<=n.y,l=e.scrollLeft<=n.x,d=e.scrollTop>=s.y,f=e.scrollLeft>=s.x;return{isTop:a,isLeft:l,isBottom:d,isRight:f,maxScroll:s,minScroll:n}}const J4={x:.2,y:.2};function eE(e,n,o,s,a){let{top:l,left:d,right:f,bottom:p}=o;s===void 0&&(s=10),a===void 0&&(a=J4);const{isTop:m,isBottom:x,isLeft:g,isRight:y}=Z0(e),w={x:0,y:0},C={x:0,y:0},E={height:n.height*a.y,width:n.width*a.x};return!m&&l<=n.top+E.height?(w.y=pt.Backward,C.y=s*Math.abs((n.top+E.height-l)/E.height)):!x&&p>=n.bottom-E.height&&(w.y=pt.Forward,C.y=s*Math.abs((n.bottom-E.height-p)/E.height)),!y&&f>=n.right-E.width?(w.x=pt.Forward,C.x=s*Math.abs((n.right-E.width-f)/E.width)):!g&&d<=n.left+E.width&&(w.x=pt.Backward,C.x=s*Math.abs((n.left+E.width-d)/E.width)),{direction:w,speed:C}}function tE(e){if(e===document.scrollingElement){const{innerWidth:l,innerHeight:d}=window;return{top:0,left:0,right:l,bottom:d,width:l,height:d}}const{top:n,left:o,right:s,bottom:a}=e.getBoundingClientRect();return{top:n,left:o,right:s,bottom:a,width:e.clientWidth,height:e.clientHeight}}function J0(e){return e.reduce((n,o)=>So(n,Lu(o)),Dn)}function nE(e){return e.reduce((n,o)=>n+Y0(o),0)}function rE(e){return e.reduce((n,o)=>n+Q0(o),0)}function oE(e,n){if(n===void 0&&(n=_o),!e)return;const{top:o,left:s,bottom:a,right:l}=n(e);K0(e)&&(a<=0||l<=0||o>=window.innerHeight||s>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const sE=[["x",["left","right"],nE],["y",["top","bottom"],rE]];class Dd{constructor(n,o){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const s=Ua(o),a=J0(s);this.rect={...n},this.width=n.width,this.height=n.height;for(const[l,d,f]of sE)for(const p of d)Object.defineProperty(this,p,{get:()=>{const m=f(s),x=a[l]-m;return this.rect[p]+x},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class js{constructor(n){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(o=>{var s;return(s=this.target)==null?void 0:s.removeEventListener(...o)})},this.target=n}add(n,o,s){var a;(a=this.target)==null||a.addEventListener(n,o,s),this.listeners.push([n,o,s])}}function iE(e){const{EventTarget:n}=Gt(e);return e instanceof n?e:Mo(e)}function gu(e,n){const o=Math.abs(e.x),s=Math.abs(e.y);return typeof n=="number"?Math.sqrt(o**2+s**2)>n:"x"in n&&"y"in n?o>n.x&&s>n.y:"x"in n?o>n.x:"y"in n?s>n.y:!1}var un;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(un||(un={}));function Zm(e){e.preventDefault()}function aE(e){e.stopPropagation()}var Oe;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(Oe||(Oe={}));const ev={start:[Oe.Space,Oe.Enter],cancel:[Oe.Esc],end:[Oe.Space,Oe.Enter,Oe.Tab]},lE=(e,n)=>{let{currentCoordinates:o}=n;switch(e.code){case Oe.Right:return{...o,x:o.x+25};case Oe.Left:return{...o,x:o.x-25};case Oe.Down:return{...o,y:o.y+25};case Oe.Up:return{...o,y:o.y-25}}};class jd{constructor(n){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=n;const{event:{target:o}}=n;this.props=n,this.listeners=new js(Mo(o)),this.windowListeners=new js(Gt(o)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(un.Resize,this.handleCancel),this.windowListeners.add(un.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(un.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:n,onStart:o}=this.props,s=n.node.current;s&&oE(s),o(Dn)}handleKeyDown(n){if(Ed(n)){const{active:o,context:s,options:a}=this.props,{keyboardCodes:l=ev,coordinateGetter:d=lE,scrollBehavior:f="smooth"}=a,{code:p}=n;if(l.end.includes(p)){this.handleEnd(n);return}if(l.cancel.includes(p)){this.handleCancel(n);return}const{collisionRect:m}=s.current,x=m?{x:m.left,y:m.top}:Dn;this.referenceCoordinates||(this.referenceCoordinates=x);const g=d(n,{active:o,context:s.current,currentCoordinates:x});if(g){const y=zs(g,x),w={x:0,y:0},{scrollableAncestors:C}=s.current;for(const E of C){const S=n.code,{isTop:B,isRight:$,isLeft:P,isBottom:T,maxScroll:A,minScroll:I}=Z0(E),R=tE(E),M={x:Math.min(S===Oe.Right?R.right-R.width/2:R.right,Math.max(S===Oe.Right?R.left:R.left+R.width/2,g.x)),y:Math.min(S===Oe.Down?R.bottom-R.height/2:R.bottom,Math.max(S===Oe.Down?R.top:R.top+R.height/2,g.y))},Y=S===Oe.Right&&!$||S===Oe.Left&&!P,ee=S===Oe.Down&&!T||S===Oe.Up&&!B;if(Y&&M.x!==g.x){const oe=E.scrollLeft+y.x,O=S===Oe.Right&&oe<=A.x||S===Oe.Left&&oe>=I.x;if(O&&!y.y){E.scrollTo({left:oe,behavior:f});return}O?w.x=E.scrollLeft-oe:w.x=S===Oe.Right?E.scrollLeft-A.x:E.scrollLeft-I.x,w.x&&E.scrollBy({left:-w.x,behavior:f});break}else if(ee&&M.y!==g.y){const oe=E.scrollTop+y.y,O=S===Oe.Down&&oe<=A.y||S===Oe.Up&&oe>=I.y;if(O&&!y.x){E.scrollTo({top:oe,behavior:f});return}O?w.y=E.scrollTop-oe:w.y=S===Oe.Down?E.scrollTop-A.y:E.scrollTop-I.y,w.y&&E.scrollBy({top:-w.y,behavior:f});break}}this.handleMove(n,So(zs(g,this.referenceCoordinates),w))}}}handleMove(n,o){const{onMove:s}=this.props;n.preventDefault(),s(o)}handleEnd(n){const{onEnd:o}=this.props;n.preventDefault(),this.detach(),o()}handleCancel(n){const{onCancel:o}=this.props;n.preventDefault(),this.detach(),o()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}jd.activators=[{eventName:"onKeyDown",handler:(e,n,o)=>{let{keyboardCodes:s=ev,onActivation:a}=n,{active:l}=o;const{code:d}=e.nativeEvent;if(s.start.includes(d)){const f=l.activatorNode.current;return f&&e.target!==f?!1:(e.preventDefault(),a?.({event:e.nativeEvent}),!0)}return!1}}];function Jm(e){return!!(e&&"distance"in e)}function eg(e){return!!(e&&"delay"in e)}class Ad{constructor(n,o,s){var a;s===void 0&&(s=iE(n.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=n,this.events=o;const{event:l}=n,{target:d}=l;this.props=n,this.events=o,this.document=Mo(d),this.documentListeners=new js(this.document),this.listeners=new js(s),this.windowListeners=new js(Gt(d)),this.initialCoordinates=(a=_u(l))!=null?a:Dn,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:n,props:{options:{activationConstraint:o,bypassActivationConstraint:s}}}=this;if(this.listeners.add(n.move.name,this.handleMove,{passive:!1}),this.listeners.add(n.end.name,this.handleEnd),n.cancel&&this.listeners.add(n.cancel.name,this.handleCancel),this.windowListeners.add(un.Resize,this.handleCancel),this.windowListeners.add(un.DragStart,Zm),this.windowListeners.add(un.VisibilityChange,this.handleCancel),this.windowListeners.add(un.ContextMenu,Zm),this.documentListeners.add(un.Keydown,this.handleKeydown),o){if(s!=null&&s({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(eg(o)){this.timeoutId=setTimeout(this.handleStart,o.delay),this.handlePending(o);return}if(Jm(o)){this.handlePending(o);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(n,o){const{active:s,onPending:a}=this.props;a(s,n,this.initialCoordinates,o)}handleStart(){const{initialCoordinates:n}=this,{onStart:o}=this.props;n&&(this.activated=!0,this.documentListeners.add(un.Click,aE,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(un.SelectionChange,this.removeTextSelection),o(n))}handleMove(n){var o;const{activated:s,initialCoordinates:a,props:l}=this,{onMove:d,options:{activationConstraint:f}}=l;if(!a)return;const p=(o=_u(n))!=null?o:Dn,m=zs(a,p);if(!s&&f){if(Jm(f)){if(f.tolerance!=null&&gu(m,f.tolerance))return this.handleCancel();if(gu(m,f.distance))return this.handleStart()}if(eg(f)&&gu(m,f.tolerance))return this.handleCancel();this.handlePending(f,m);return}n.cancelable&&n.preventDefault(),d(p)}handleEnd(){const{onAbort:n,onEnd:o}=this.props;this.detach(),this.activated||n(this.props.active),o()}handleCancel(){const{onAbort:n,onCancel:o}=this.props;this.detach(),this.activated||n(this.props.active),o()}handleKeydown(n){n.code===Oe.Esc&&this.handleCancel()}removeTextSelection(){var n;(n=this.document.getSelection())==null||n.removeAllRanges()}}const cE={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Pd extends Ad{constructor(n){const{event:o}=n,s=Mo(o.target);super(n,cE,s)}}Pd.activators=[{eventName:"onPointerDown",handler:(e,n)=>{let{nativeEvent:o}=e,{onActivation:s}=n;return!o.isPrimary||o.button!==0?!1:(s?.({event:o}),!0)}}];const uE={move:{name:"mousemove"},end:{name:"mouseup"}};var Bu;(function(e){e[e.RightClick=2]="RightClick"})(Bu||(Bu={}));class dE extends Ad{constructor(n){super(n,uE,Mo(n.event.target))}}dE.activators=[{eventName:"onMouseDown",handler:(e,n)=>{let{nativeEvent:o}=e,{onActivation:s}=n;return o.button===Bu.RightClick?!1:(s?.({event:o}),!0)}}];const vu={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class tv extends Ad{constructor(n){super(n,vu)}static setup(){return window.addEventListener(vu.move.name,n,{capture:!1,passive:!1}),function(){window.removeEventListener(vu.move.name,n)};function n(){}}}tv.activators=[{eventName:"onTouchStart",handler:(e,n)=>{let{nativeEvent:o}=e,{onActivation:s}=n;const{touches:a}=o;return a.length>1?!1:(s?.({event:o}),!0)}}];var As;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(As||(As={}));var Pa;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(Pa||(Pa={}));function fE(e){let{acceleration:n,activator:o=As.Pointer,canScroll:s,draggingRect:a,enabled:l,interval:d=5,order:f=Pa.TreeOrder,pointerCoordinates:p,scrollableAncestors:m,scrollableAncestorRects:x,delta:g,threshold:y}=e;const w=hE({delta:g,disabled:!l}),[C,E]=E4(),S=b.useRef({x:0,y:0}),B=b.useRef({x:0,y:0}),$=b.useMemo(()=>{switch(o){case As.Pointer:return p?{top:p.y,bottom:p.y,left:p.x,right:p.x}:null;case As.DraggableRect:return a}},[o,a,p]),P=b.useRef(null),T=b.useCallback(()=>{const I=P.current;if(!I)return;const R=S.current.x*B.current.x,M=S.current.y*B.current.y;I.scrollBy(R,M)},[]),A=b.useMemo(()=>f===Pa.TreeOrder?[...m].reverse():m,[f,m]);b.useEffect(()=>{if(!l||!m.length||!$){E();return}for(const I of A){if(s?.(I)===!1)continue;const R=m.indexOf(I),M=x[R];if(!M)continue;const{direction:Y,speed:ee}=eE(I,M,$,n,y);for(const oe of["x","y"])w[oe][Y[oe]]||(ee[oe]=0,Y[oe]=0);if(ee.x>0||ee.y>0){E(),P.current=I,C(T,d),S.current=ee,B.current=Y;return}}S.current={x:0,y:0},B.current={x:0,y:0},E()},[n,T,s,E,l,d,JSON.stringify($),JSON.stringify(w),C,m,A,x,JSON.stringify(y)])}const pE={x:{[pt.Backward]:!1,[pt.Forward]:!1},y:{[pt.Backward]:!1,[pt.Forward]:!1}};function hE(e){let{delta:n,disabled:o}=e;const s=Mu(n);return Ys(a=>{if(o||!s||!a)return pE;const l={x:Math.sign(n.x-s.x),y:Math.sign(n.y-s.y)};return{x:{[pt.Backward]:a.x[pt.Backward]||l.x===-1,[pt.Forward]:a.x[pt.Forward]||l.x===1},y:{[pt.Backward]:a.y[pt.Backward]||l.y===-1,[pt.Forward]:a.y[pt.Forward]||l.y===1}}},[o,n,s])}function mE(e,n){const o=n!=null?e.get(n):void 0,s=o?o.node.current:null;return Ys(a=>{var l;return n==null?null:(l=s??a)!=null?l:null},[s,n])}function gE(e,n){return b.useMemo(()=>e.reduce((o,s)=>{const{sensor:a}=s,l=a.activators.map(d=>({eventName:d.eventName,handler:n(d.handler,s)}));return[...o,...l]},[]),[e,n])}var Gs;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(Gs||(Gs={}));var Fu;(function(e){e.Optimized="optimized"})(Fu||(Fu={}));const tg=new Map;function vE(e,n){let{dragging:o,dependencies:s,config:a}=n;const[l,d]=b.useState(null),{frequency:f,measure:p,strategy:m}=a,x=b.useRef(e),g=S(),y=$s(g),w=b.useCallback(function(B){B===void 0&&(B=[]),!y.current&&d($=>$===null?B:$.concat(B.filter(P=>!$.includes(P))))},[y]),C=b.useRef(null),E=Ys(B=>{if(g&&!o)return tg;if(!B||B===tg||x.current!==e||l!=null){const $=new Map;for(let P of e){if(!P)continue;if(l&&l.length>0&&!l.includes(P.id)&&P.rect.current){$.set(P.id,P.rect.current);continue}const T=P.node.current,A=T?new Dd(p(T),T):null;P.rect.current=A,A&&$.set(P.id,A)}return $}return B},[e,l,o,g,p]);return b.useEffect(()=>{x.current=e},[e]),b.useEffect(()=>{g||w()},[o,g]),b.useEffect(()=>{l&&l.length>0&&d(null)},[JSON.stringify(l)]),b.useEffect(()=>{g||typeof f!="number"||C.current!==null||(C.current=setTimeout(()=>{w(),C.current=null},f))},[f,g,w,...s]),{droppableRects:E,measureDroppableContainers:w,measuringScheduled:l!=null};function S(){switch(m){case Gs.Always:return!1;case Gs.BeforeDragging:return o;default:return!o}}}function nv(e,n){return Ys(o=>e?o||(typeof n=="function"?n(e):e):null,[n,e])}function xE(e,n){return nv(e,n)}function yE(e){let{callback:n,disabled:o}=e;const s=Sd(n),a=b.useMemo(()=>{if(o||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:l}=window;return new l(s)},[s,o]);return b.useEffect(()=>()=>a?.disconnect(),[a]),a}function Ha(e){let{callback:n,disabled:o}=e;const s=Sd(n),a=b.useMemo(()=>{if(o||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:l}=window;return new l(s)},[o]);return b.useEffect(()=>()=>a?.disconnect(),[a]),a}function bE(e){return new Dd(_o(e),e)}function ng(e,n,o){n===void 0&&(n=bE);const[s,a]=b.useState(null);function l(){a(p=>{if(!e)return null;if(e.isConnected===!1){var m;return(m=p??o)!=null?m:null}const x=n(e);return JSON.stringify(p)===JSON.stringify(x)?p:x})}const d=yE({callback(p){if(e)for(const m of p){const{type:x,target:g}=m;if(x==="childList"&&g instanceof HTMLElement&&g.contains(e)){l();break}}}}),f=Ha({callback:l});return Fn(()=>{l(),e?(f?.observe(e),d?.observe(document.body,{childList:!0,subtree:!0})):(f?.disconnect(),d?.disconnect())},[e]),s}function wE(e){const n=nv(e);return q0(e,n)}const rg=[];function NE(e){const n=b.useRef(e),o=Ys(s=>e?s&&s!==rg&&e&&n.current&&e.parentNode===n.current.parentNode?s:Ua(e):rg,[e]);return b.useEffect(()=>{n.current=e},[e]),o}function CE(e){const[n,o]=b.useState(null),s=b.useRef(e),a=b.useCallback(l=>{const d=mu(l.target);d&&o(f=>f?(f.set(d,Lu(d)),new Map(f)):null)},[]);return b.useEffect(()=>{const l=s.current;if(e!==l){d(l);const f=e.map(p=>{const m=mu(p);return m?(m.addEventListener("scroll",a,{passive:!0}),[m,Lu(m)]):null}).filter(p=>p!=null);o(f.length?new Map(f):null),s.current=e}return()=>{d(e),d(l)};function d(f){f.forEach(p=>{const m=mu(p);m?.removeEventListener("scroll",a)})}},[a,e]),b.useMemo(()=>e.length?n?Array.from(n.values()).reduce((l,d)=>So(l,d),Dn):J0(e):Dn,[e,n])}function og(e,n){n===void 0&&(n=[]);const o=b.useRef(null);return b.useEffect(()=>{o.current=null},n),b.useEffect(()=>{const s=e!==Dn;s&&!o.current&&(o.current=e),!s&&o.current&&(o.current=null)},[e]),o.current?zs(e,o.current):Dn}function SE(e){b.useEffect(()=>{if(!Ga)return;const n=e.map(o=>{let{sensor:s}=o;return s.setup==null?void 0:s.setup()});return()=>{for(const o of n)o?.()}},e.map(n=>{let{sensor:o}=n;return o}))}function EE(e,n){return b.useMemo(()=>e.reduce((o,s)=>{let{eventName:a,handler:l}=s;return o[a]=d=>{l(d,n)},o},{}),[e,n])}function rv(e){return b.useMemo(()=>e?Q4(e):null,[e])}const sg=[];function DE(e,n){n===void 0&&(n=_o);const[o]=e,s=rv(o?Gt(o):null),[a,l]=b.useState(sg);function d(){l(()=>e.length?e.map(p=>X0(p)?s:new Dd(n(p),p)):sg)}const f=Ha({callback:d});return Fn(()=>{f?.disconnect(),d(),e.forEach(p=>f?.observe(p))},[e]),a}function jE(e){if(!e)return null;if(e.children.length>1)return e;const n=e.children[0];return Ks(n)?n:e}function AE(e){let{measure:n}=e;const[o,s]=b.useState(null),a=b.useCallback(m=>{for(const{target:x}of m)if(Ks(x)){s(g=>{const y=n(x);return g?{...g,width:y.width,height:y.height}:y});break}},[n]),l=Ha({callback:a}),d=b.useCallback(m=>{const x=jE(m);l?.disconnect(),x&&l?.observe(x),s(x?n(x):null)},[n,l]),[f,p]=ja(d);return b.useMemo(()=>({nodeRef:f,rect:o,setRef:p}),[o,f,p])}const PE=[{sensor:Pd,options:{}},{sensor:jd,options:{}}],RE={current:{}},fa={draggable:{measure:Xm},droppable:{measure:Xm,strategy:Gs.WhileDragging,frequency:Fu.Optimized},dragOverlay:{measure:_o}};class Ps extends Map{get(n){var o;return n!=null&&(o=super.get(n))!=null?o:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(n=>{let{disabled:o}=n;return!o})}getNodeFor(n){var o,s;return(o=(s=this.get(n))==null?void 0:s.node.current)!=null?o:void 0}}const kE={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Ps,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Aa},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:fa,measureDroppableContainers:Aa,windowRect:null,measuringScheduled:!1},IE={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Aa,draggableNodes:new Map,over:null,measureDroppableContainers:Aa},Wa=b.createContext(IE),ov=b.createContext(kE);function TE(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Ps}}}function OE(e,n){switch(n.type){case at.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:n.initialCoordinates,active:n.active}};case at.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:n.coordinates.x-e.draggable.initialCoordinates.x,y:n.coordinates.y-e.draggable.initialCoordinates.y}}};case at.DragEnd:case at.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case at.RegisterDroppable:{const{element:o}=n,{id:s}=o,a=new Ps(e.droppable.containers);return a.set(s,o),{...e,droppable:{...e.droppable,containers:a}}}case at.SetDroppableDisabled:{const{id:o,key:s,disabled:a}=n,l=e.droppable.containers.get(o);if(!l||s!==l.key)return e;const d=new Ps(e.droppable.containers);return d.set(o,{...l,disabled:a}),{...e,droppable:{...e.droppable,containers:d}}}case at.UnregisterDroppable:{const{id:o,key:s}=n,a=e.droppable.containers.get(o);if(!a||s!==a.key)return e;const l=new Ps(e.droppable.containers);return l.delete(o),{...e,droppable:{...e.droppable,containers:l}}}default:return e}}function ME(e){let{disabled:n}=e;const{active:o,activatorEvent:s,draggableNodes:a}=b.useContext(Wa),l=Mu(s),d=Mu(o?.id);return b.useEffect(()=>{if(!n&&!s&&l&&d!=null){if(!Ed(l)||document.activeElement===l.target)return;const f=a.get(d);if(!f)return;const{activatorNode:p,node:m}=f;if(!p.current&&!m.current)return;requestAnimationFrame(()=>{for(const x of[p.current,m.current]){if(!x)continue;const g=A4(x);if(g){g.focus();break}}})}},[s,n,a,d,l]),null}function _E(e,n){let{transform:o,...s}=n;return e!=null&&e.length?e.reduce((a,l)=>l({transform:a,...s}),o):o}function LE(e){return b.useMemo(()=>({draggable:{...fa.draggable,...e?.draggable},droppable:{...fa.droppable,...e?.droppable},dragOverlay:{...fa.dragOverlay,...e?.dragOverlay}}),[e?.draggable,e?.droppable,e?.dragOverlay])}function BE(e){let{activeNode:n,measure:o,initialRect:s,config:a=!0}=e;const l=b.useRef(!1),{x:d,y:f}=typeof a=="boolean"?{x:a,y:a}:a;Fn(()=>{if(!d&&!f||!n){l.current=!1;return}if(l.current||!s)return;const m=n?.node.current;if(!m||m.isConnected===!1)return;const x=o(m),g=q0(x,s);if(d||(g.x=0),f||(g.y=0),l.current=!0,Math.abs(g.x)>0||Math.abs(g.y)>0){const y=K0(m);y&&y.scrollBy({top:g.y,left:g.x})}},[n,d,f,s,o])}const sv=b.createContext({...Dn,scaleX:1,scaleY:1});var Sr;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(Sr||(Sr={}));const FE=b.memo(function(n){var o,s,a,l;let{id:d,accessibility:f,autoScroll:p=!0,children:m,sensors:x=PE,collisionDetection:g=G4,measuring:y,modifiers:w,...C}=n;const E=b.useReducer(OE,void 0,TE),[S,B]=E,[$,P]=O4(),[T,A]=b.useState(Sr.Uninitialized),I=T===Sr.Initialized,{draggable:{active:R,nodes:M,translate:Y},droppable:{containers:ee}}=S,oe=R!=null?M.get(R):null,O=b.useRef({initial:null,translated:null}),V=b.useMemo(()=>{var z;return R!=null?{id:R,data:(z=oe?.data)!=null?z:RE,rect:O}:null},[R,oe]),U=b.useRef(null),[X,J]=b.useState(null),[se,q]=b.useState(null),Q=$s(C,Object.values(C)),K=Qs("DndDescribedBy",d),D=b.useMemo(()=>ee.getEnabled(),[ee]),F=LE(y),{droppableRects:ae,measureDroppableContainers:de,measuringScheduled:ne}=vE(D,{dragging:I,dependencies:[Y.x,Y.y],config:F.droppable}),pe=mE(M,R),Ae=b.useMemo(()=>se?_u(se):null,[se]),ve=Rn(),le=xE(pe,F.draggable.measure);BE({activeNode:R!=null?M.get(R):null,config:ve.layoutShiftCompensation,initialRect:le,measure:F.draggable.measure});const he=ng(pe,F.draggable.measure,le),Ie=ng(pe?pe.parentElement:null),Ee=b.useRef({activatorEvent:null,active:null,activeNode:pe,collisionRect:null,collisions:null,droppableRects:ae,draggableNodes:M,draggingNode:null,draggingNodeRect:null,droppableContainers:ee,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),xe=ee.getNodeFor((o=Ee.current.over)==null?void 0:o.id),ke=AE({measure:F.dragOverlay.measure}),_e=(s=ke.nodeRef.current)!=null?s:pe,rt=I?(a=ke.rect)!=null?a:he:null,tn=!!(ke.nodeRef.current&&ke.rect),Nt=wE(tn?null:he),pn=rv(_e?Gt(_e):null),ot=NE(I?xe??pe:null),lt=DE(ot),jn=_E(w,{transform:{x:Y.x-Nt.x,y:Y.y-Nt.y,scaleX:1,scaleY:1},activatorEvent:se,active:V,activeNodeRect:he,containerNodeRect:Ie,draggingNodeRect:rt,over:Ee.current.over,overlayNodeRect:ke.rect,scrollableAncestors:ot,scrollableAncestorRects:lt,windowRect:pn}),Rr=Ae?So(Ae,Y):null,kr=CE(ot),Xr=og(kr),$n=og(kr,[he]),Ut=So(jn,Xr),Ht=rt?W4(rt,jn):null,An=V&&Ht?g({active:V,collisionRect:Ht,droppableRects:ae,droppableContainers:D,pointerCoordinates:Rr}):null,Pn=W0(An,"id"),[Ct,Zr]=b.useState(null),Jr=tn?jn:So(jn,$n),eo=U4(Jr,(l=Ct?.rect)!=null?l:null,he),Ir=b.useRef(null),nr=b.useCallback((z,Z)=>{let{sensor:fe,options:Re}=Z;if(U.current==null)return;const Be=M.get(U.current);if(!Be)return;const $e=z.nativeEvent,Ye=new fe({active:U.current,activeNode:Be,event:$e,options:Re,context:Ee,onAbort(Ge){if(!M.get(Ge))return;const{onDragAbort:Qe}=Q.current,St={id:Ge};Qe?.(St),$({type:"onDragAbort",event:St})},onPending(Ge,Mt,Qe,St){if(!M.get(Ge))return;const{onDragPending:kn}=Q.current,Wt={id:Ge,constraint:Mt,initialCoordinates:Qe,offset:St};kn?.(Wt),$({type:"onDragPending",event:Wt})},onStart(Ge){const Mt=U.current;if(Mt==null)return;const Qe=M.get(Mt);if(!Qe)return;const{onDragStart:St}=Q.current,_t={activatorEvent:$e,active:{id:Mt,data:Qe.data,rect:O}};er.unstable_batchedUpdates(()=>{St?.(_t),A(Sr.Initializing),B({type:at.DragStart,initialCoordinates:Ge,active:Mt}),$({type:"onDragStart",event:_t}),J(Ir.current),q($e)})},onMove(Ge){B({type:at.DragMove,coordinates:Ge})},onEnd:Rt(at.DragEnd),onCancel:Rt(at.DragCancel)});Ir.current=Ye;function Rt(Ge){return async function(){const{active:Qe,collisions:St,over:_t,scrollAdjustedTranslate:kn}=Ee.current;let Wt=null;if(Qe&&kn){const{cancelDrop:Gn}=Q.current;Wt={activatorEvent:$e,active:Qe,collisions:St,delta:kn,over:_t},Ge===at.DragEnd&&typeof Gn=="function"&&await Promise.resolve(Gn(Wt))&&(Ge=at.DragCancel)}U.current=null,er.unstable_batchedUpdates(()=>{B({type:Ge}),A(Sr.Uninitialized),Zr(null),J(null),q(null),Ir.current=null;const Gn=Ge===at.DragEnd?"onDragEnd":"onDragCancel";if(Wt){const Lo=Q.current[Gn];Lo?.(Wt),$({type:Gn,event:Wt})}})}}},[M]),zn=b.useCallback((z,Z)=>(fe,Re)=>{const Be=fe.nativeEvent,$e=M.get(Re);if(U.current!==null||!$e||Be.dndKit||Be.defaultPrevented)return;const Ye={active:$e};z(fe,Z.options,Ye)===!0&&(Be.dndKit={capturedBy:Z.sensor},U.current=Re,nr(fe,Z))},[M,nr]),Vn=gE(x,zn);SE(x),Fn(()=>{he&&T===Sr.Initializing&&A(Sr.Initialized)},[he,T]),b.useEffect(()=>{const{onDragMove:z}=Q.current,{active:Z,activatorEvent:fe,collisions:Re,over:Be}=Ee.current;if(!Z||!fe)return;const $e={active:Z,activatorEvent:fe,collisions:Re,delta:{x:Ut.x,y:Ut.y},over:Be};er.unstable_batchedUpdates(()=>{z?.($e),$({type:"onDragMove",event:$e})})},[Ut.x,Ut.y]),b.useEffect(()=>{const{active:z,activatorEvent:Z,collisions:fe,droppableContainers:Re,scrollAdjustedTranslate:Be}=Ee.current;if(!z||U.current==null||!Z||!Be)return;const{onDragOver:$e}=Q.current,Ye=Re.get(Pn),Rt=Ye&&Ye.rect.current?{id:Ye.id,rect:Ye.rect.current,data:Ye.data,disabled:Ye.disabled}:null,Ge={active:z,activatorEvent:Z,collisions:fe,delta:{x:Be.x,y:Be.y},over:Rt};er.unstable_batchedUpdates(()=>{Zr(Rt),$e?.(Ge),$({type:"onDragOver",event:Ge})})},[Pn]),Fn(()=>{Ee.current={activatorEvent:se,active:V,activeNode:pe,collisionRect:Ht,collisions:An,droppableRects:ae,draggableNodes:M,draggingNode:_e,draggingNodeRect:rt,droppableContainers:ee,over:Ct,scrollableAncestors:ot,scrollAdjustedTranslate:Ut},O.current={initial:rt,translated:Ht}},[V,pe,An,Ht,M,_e,rt,ae,ee,Ct,ot,Ut]),fE({...ve,delta:Y,draggingRect:Ht,pointerCoordinates:Rr,scrollableAncestors:ot,scrollableAncestorRects:lt});const Tr=b.useMemo(()=>({active:V,activeNode:pe,activeNodeRect:he,activatorEvent:se,collisions:An,containerNodeRect:Ie,dragOverlay:ke,draggableNodes:M,droppableContainers:ee,droppableRects:ae,over:Ct,measureDroppableContainers:de,scrollableAncestors:ot,scrollableAncestorRects:lt,measuringConfiguration:F,measuringScheduled:ne,windowRect:pn}),[V,pe,he,se,An,Ie,ke,M,ee,ae,Ct,de,ot,lt,F,ne,pn]),rr=b.useMemo(()=>({activatorEvent:se,activators:Vn,active:V,activeNodeRect:he,ariaDescribedById:{draggable:K},dispatch:B,draggableNodes:M,over:Ct,measureDroppableContainers:de}),[se,Vn,V,he,B,K,M,Ct,de]);return we.createElement(G0.Provider,{value:P},we.createElement(Wa.Provider,{value:rr},we.createElement(ov.Provider,{value:Tr},we.createElement(sv.Provider,{value:eo},m)),we.createElement(ME,{disabled:f?.restoreFocus===!1})),we.createElement(L4,{...f,hiddenTextDescribedById:K}));function Rn(){const z=X?.autoScrollEnabled===!1,Z=typeof p=="object"?p.enabled===!1:p===!1,fe=I&&!z&&!Z;return typeof p=="object"?{...p,enabled:fe}:{enabled:fe}}}),$E=b.createContext(null),ig="button",zE="Draggable";function VE(e){let{id:n,data:o,disabled:s=!1,attributes:a}=e;const l=Qs(zE),{activators:d,activatorEvent:f,active:p,activeNodeRect:m,ariaDescribedById:x,draggableNodes:g,over:y}=b.useContext(Wa),{role:w=ig,roleDescription:C="draggable",tabIndex:E=0}=a??{},S=p?.id===n,B=b.useContext(S?sv:$E),[$,P]=ja(),[T,A]=ja(),I=EE(d,n),R=$s(o);Fn(()=>(g.set(n,{id:n,key:l,node:$,activatorNode:T,data:R}),()=>{const Y=g.get(n);Y&&Y.key===l&&g.delete(n)}),[g,n]);const M=b.useMemo(()=>({role:w,tabIndex:E,"aria-disabled":s,"aria-pressed":S&&w===ig?!0:void 0,"aria-roledescription":C,"aria-describedby":x.draggable}),[s,w,E,S,C,x.draggable]);return{active:p,activatorEvent:f,activeNodeRect:m,attributes:M,isDragging:S,listeners:s?void 0:I,node:$,over:y,setNodeRef:P,setActivatorNodeRef:A,transform:B}}function GE(){return b.useContext(ov)}const UE="Droppable",HE={timeout:25};function WE(e){let{data:n,disabled:o=!1,id:s,resizeObserverConfig:a}=e;const l=Qs(UE),{active:d,dispatch:f,over:p,measureDroppableContainers:m}=b.useContext(Wa),x=b.useRef({disabled:o}),g=b.useRef(!1),y=b.useRef(null),w=b.useRef(null),{disabled:C,updateMeasurementsFor:E,timeout:S}={...HE,...a},B=$s(E??s),$=b.useCallback(()=>{if(!g.current){g.current=!0;return}w.current!=null&&clearTimeout(w.current),w.current=setTimeout(()=>{m(Array.isArray(B.current)?B.current:[B.current]),w.current=null},S)},[S]),P=Ha({callback:$,disabled:C||!d}),T=b.useCallback((M,Y)=>{P&&(Y&&(P.unobserve(Y),g.current=!1),M&&P.observe(M))},[P]),[A,I]=ja(T),R=$s(n);return b.useEffect(()=>{!P||!A.current||(P.disconnect(),g.current=!1,P.observe(A.current))},[A,P]),b.useEffect(()=>(f({type:at.RegisterDroppable,element:{id:s,key:l,disabled:o,node:A,rect:y,data:R}}),()=>f({type:at.UnregisterDroppable,key:l,id:s})),[s]),b.useEffect(()=>{o!==x.current.disabled&&(f({type:at.SetDroppableDisabled,id:s,key:l,disabled:o}),x.current.disabled=o)},[s,l,o,f]),{active:d,rect:y,isOver:p?.id===s,node:A,over:p,setNodeRef:I}}function Rd(e,n,o){const s=e.slice();return s.splice(o<0?s.length+o:o,0,s.splice(n,1)[0]),s}function qE(e,n){return e.reduce((o,s,a)=>{const l=n.get(s);return l&&(o[a]=l),o},Array(e.length))}function ca(e){return e!==null&&e>=0}function KE(e,n){if(e===n)return!0;if(e.length!==n.length)return!1;for(let o=0;o<e.length;o++)if(e[o]!==n[o])return!1;return!0}function YE(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const kd=e=>{let{rects:n,activeIndex:o,overIndex:s,index:a}=e;const l=Rd(n,s,o),d=n[a],f=l[a];return!f||!d?null:{x:f.left-d.left,y:f.top-d.top,scaleX:f.width/d.width,scaleY:f.height/d.height}},iv="Sortable",av=we.createContext({activeIndex:-1,containerId:iv,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:kd,disabled:{draggable:!1,droppable:!1}});function QE(e){let{children:n,id:o,items:s,strategy:a=kd,disabled:l=!1}=e;const{active:d,dragOverlay:f,droppableRects:p,over:m,measureDroppableContainers:x}=GE(),g=Qs(iv,o),y=f.rect!==null,w=b.useMemo(()=>s.map(I=>typeof I=="object"&&"id"in I?I.id:I),[s]),C=d!=null,E=d?w.indexOf(d.id):-1,S=m?w.indexOf(m.id):-1,B=b.useRef(w),$=!KE(w,B.current),P=S!==-1&&E===-1||$,T=YE(l);Fn(()=>{$&&C&&x(w)},[$,w,C,x]),b.useEffect(()=>{B.current=w},[w]);const A=b.useMemo(()=>({activeIndex:E,containerId:g,disabled:T,disableTransforms:P,items:w,overIndex:S,useDragOverlay:y,sortedRects:qE(w,p),strategy:a}),[E,g,T.draggable,T.droppable,P,w,S,p,y,a]);return we.createElement(av.Provider,{value:A},n)}const XE=e=>{let{id:n,items:o,activeIndex:s,overIndex:a}=e;return Rd(o,s,a).indexOf(n)},ZE=e=>{let{containerId:n,isSorting:o,wasDragging:s,index:a,items:l,newIndex:d,previousItems:f,previousContainerId:p,transition:m}=e;return!m||!s||f!==l&&a===d?!1:o?!0:d!==a&&n===p},JE={duration:200,easing:"ease"},lv="transform",e5=Vs.Transition.toString({property:lv,duration:0,easing:"linear"}),t5={roleDescription:"sortable"};function n5(e){let{disabled:n,index:o,node:s,rect:a}=e;const[l,d]=b.useState(null),f=b.useRef(o);return Fn(()=>{if(!n&&o!==f.current&&s.current){const p=a.current;if(p){const m=_o(s.current,{ignoreTransform:!0}),x={x:p.left-m.left,y:p.top-m.top,scaleX:p.width/m.width,scaleY:p.height/m.height};(x.x||x.y)&&d(x)}}o!==f.current&&(f.current=o)},[n,o,s,a]),b.useEffect(()=>{l&&d(null)},[l]),l}function r5(e){let{animateLayoutChanges:n=ZE,attributes:o,disabled:s,data:a,getNewIndex:l=XE,id:d,strategy:f,resizeObserverConfig:p,transition:m=JE}=e;const{items:x,containerId:g,activeIndex:y,disabled:w,disableTransforms:C,sortedRects:E,overIndex:S,useDragOverlay:B,strategy:$}=b.useContext(av),P=o5(s,w),T=x.indexOf(d),A=b.useMemo(()=>({sortable:{containerId:g,index:T,items:x},...a}),[g,a,T,x]),I=b.useMemo(()=>x.slice(x.indexOf(d)),[x,d]),{rect:R,node:M,isOver:Y,setNodeRef:ee}=WE({id:d,data:A,disabled:P.droppable,resizeObserverConfig:{updateMeasurementsFor:I,...p}}),{active:oe,activatorEvent:O,activeNodeRect:V,attributes:U,setNodeRef:X,listeners:J,isDragging:se,over:q,setActivatorNodeRef:Q,transform:K}=VE({id:d,data:A,attributes:{...t5,...o},disabled:P.draggable}),D=S4(ee,X),F=!!oe,ae=F&&!C&&ca(y)&&ca(S),de=!B&&se,ne=de&&ae?K:null,Ae=ae?ne??(f??$)({rects:E,activeNodeRect:V,activeIndex:y,overIndex:S,index:T}):null,ve=ca(y)&&ca(S)?l({id:d,items:x,activeIndex:y,overIndex:S}):T,le=oe?.id,he=b.useRef({activeId:le,items:x,newIndex:ve,containerId:g}),Ie=x!==he.current.items,Ee=n({active:oe,containerId:g,isDragging:se,isSorting:F,id:d,index:T,items:x,newIndex:he.current.newIndex,previousItems:he.current.items,previousContainerId:he.current.containerId,transition:m,wasDragging:he.current.activeId!=null}),xe=n5({disabled:!Ee,index:T,node:M,rect:R});return b.useEffect(()=>{F&&he.current.newIndex!==ve&&(he.current.newIndex=ve),g!==he.current.containerId&&(he.current.containerId=g),x!==he.current.items&&(he.current.items=x)},[F,ve,g,x]),b.useEffect(()=>{if(le===he.current.activeId)return;if(le!=null&&he.current.activeId==null){he.current.activeId=le;return}const _e=setTimeout(()=>{he.current.activeId=le},50);return()=>clearTimeout(_e)},[le]),{active:oe,activeIndex:y,attributes:U,data:A,rect:R,index:T,newIndex:ve,items:x,isOver:Y,isSorting:F,isDragging:se,listeners:J,node:M,overIndex:S,over:q,setNodeRef:D,setActivatorNodeRef:Q,setDroppableNodeRef:ee,setDraggableNodeRef:X,transform:xe??Ae,transition:ke()};function ke(){if(xe||Ie&&he.current.newIndex===T)return e5;if(!(de&&!Ed(O)||!m)&&(F||Ee))return Vs.Transition.toString({...m,property:lv})}}function o5(e,n){var o,s;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(o=e?.draggable)!=null?o:n.draggable,droppable:(s=e?.droppable)!=null?s:n.droppable}}function Ra(e){if(!e)return!1;const n=e.data.current;return!!(n&&"sortable"in n&&typeof n.sortable=="object"&&"containerId"in n.sortable&&"items"in n.sortable&&"index"in n.sortable)}const s5=[Oe.Down,Oe.Right,Oe.Up,Oe.Left],i5=(e,n)=>{let{context:{active:o,collisionRect:s,droppableRects:a,droppableContainers:l,over:d,scrollableAncestors:f}}=n;if(s5.includes(e.code)){if(e.preventDefault(),!o||!s)return;const p=[];l.getEnabled().forEach(g=>{if(!g||g!=null&&g.disabled)return;const y=a.get(g.id);if(y)switch(e.code){case Oe.Down:s.top<y.top&&p.push(g);break;case Oe.Up:s.top>y.top&&p.push(g);break;case Oe.Left:s.left>y.left&&p.push(g);break;case Oe.Right:s.left<y.left&&p.push(g);break}});const m=z4({collisionRect:s,droppableRects:a,droppableContainers:p});let x=W0(m,"id");if(x===d?.id&&m.length>1&&(x=m[1].id),x!=null){const g=l.get(o.id),y=l.get(x),w=y?a.get(y.id):null,C=y?.node.current;if(C&&w&&g&&y){const S=Ua(C).some((I,R)=>f[R]!==I),B=cv(g,y),$=a5(g,y),P=S||!B?{x:0,y:0}:{x:$?s.width-w.width:0,y:$?s.height-w.height:0},T={x:w.left,y:w.top};return P.x&&P.y?T:zs(T,P)}}}};function cv(e,n){return!Ra(e)||!Ra(n)?!1:e.data.current.sortable.containerId===n.data.current.sortable.containerId}function a5(e,n){return!Ra(e)||!Ra(n)||!cv(e,n)?!1:e.data.current.sortable.index<n.data.current.sortable.index}const Cs=()=>/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||"ontouchstart"in window||navigator.maxTouchPoints>0,l5=({addedChords:e,activeChordIndex:n,playbackStore:o,isLiveMode:s})=>{const a=B4(hu(Pd,{activationConstraint:Cs()?{delay:300,tolerance:8}:{distance:8}}),hu(tv,{activationConstraint:{delay:400,tolerance:10}}),hu(jd,{coordinateGetter:i5})),l=b.useCallback(()=>{if(document.body.classList.add("dragging"),Cs()){document.body.style.overflow="hidden",document.body.style.overscrollBehavior="none",document.body.style.touchAction="none",document.body.style.userSelect="none",document.body.style.webkitUserSelect="none",document.documentElement.style.overscrollBehavior="none",document.documentElement.style.touchAction="none";const x=document.querySelector('meta[name="viewport"]');x&&(x.setAttribute("data-original-content",x.getAttribute("content")||""),x.setAttribute("content","width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"))}},[]),d=b.useCallback(()=>{if(document.body.classList.remove("dragging"),Cs()){document.body.style.overflow="",document.body.style.overscrollBehavior="",document.body.style.touchAction="",document.body.style.userSelect="",document.body.style.webkitUserSelect="",document.documentElement.style.overscrollBehavior="",document.documentElement.style.touchAction="";const x=document.querySelector('meta[name="viewport"]');if(x){const g=x.getAttribute("data-original-content");g&&(x.setAttribute("content",g),x.removeAttribute("data-original-content"))}}},[]),f=b.useCallback(x=>{const{active:g,over:y}=x;if(document.body.classList.remove("dragging"),Cs()){document.body.style.overflow="",document.body.style.overscrollBehavior="",document.body.style.touchAction="",document.body.style.userSelect="",document.body.style.webkitUserSelect="",document.documentElement.style.overscrollBehavior="",document.documentElement.style.touchAction="";const w=document.querySelector('meta[name="viewport"]');if(w){const C=w.getAttribute("data-original-content");C&&(w.setAttribute("content",C),w.removeAttribute("data-original-content"))}}if(y&&g.id!==y.id){const w=parseInt(g.id.toString().replace("chord-","")),C=parseInt(y.id.toString().replace("chord-",""));if(!isNaN(w)&&!isNaN(C)&&w>=0&&w<e.length&&C>=0&&C<e.length){const E=Rd(e,w,C);console.log("Reordered chords:",E.map(S=>S.name)),o.setAddedChords(E),n!==null&&(n===w?o.setActiveChordIndex(C):w<n&&C>=n?o.setActiveChordIndex(n-1):w>n&&C<=n&&o.setActiveChordIndex(n+1))}}},[e,n,o]),p=b.useCallback(x=>{if(!x.destination)return;const g=x.source.index,y=x.destination.index;if(g===y)return;const w=Array.from(e),[C]=w.splice(g,1);w.splice(y,0,C),o.setAddedChords(w),n!==null&&(n===g?o.setActiveChordIndex(y):g<n&&y>=n?o.setActiveChordIndex(n-1):g>n&&y<=n&&o.setActiveChordIndex(n+1))},[e,n,o]),m=b.useCallback(x=>{const{containerNodeRect:g,draggingNodeRect:y,transform:w}=x;if(!g||!y)return w;const C=Cs()?20:10,E=g.left+C,S=g.right-C,B=g.top+C,$=g.bottom-C,P=y.left+w.x,T=y.right+w.x,A=y.top+w.y,I=y.bottom+w.y;let R=w.x,M=w.y;return P<E?R=E-y.left:T>S&&(R=S-y.right),A<B?M=B-y.top:I>$&&(M=$-y.bottom),{...w,x:R,y:M}},[]);return{sensors:a,handleDragStart:l,handleDragCancel:d,handleDragEndDndKit:f,handleDragEnd:p,restrictToContainer:m}},c5=({isLiveMode:e,isEditMode:n,isDeleteMode:o,isCompactHeight:s,globalPatternState:a,addedChords:l,onTogglePlayback:d,onToggleLiveMode:f,onClearAll:p,onToggleDeleteMode:m})=>u.jsxs("div",{className:`${e?"flex-shrink-0":""} max-w-7xl mx-auto px-4 ${e?s?"pt-2 z-10":"pt-4 z-10":"pt-2"} w-full`,children:[u.jsxs("div",{className:`flex items-center justify-between ${e?s?"mb-1":"mb-3":"mb-2"}`,children:[u.jsxs("div",{className:"flex items-center space-x-4",children:[!e&&u.jsx(Sn,{onClick:d,variant:"icon",size:"icon",active:a.isPlaying,title:a.isPlaying?"Stop":"Play",children:a.isPlaying?u.jsx(ks,{className:"w-4 h-4"}):u.jsx(xg,{className:"w-4 h-4"})}),e&&u.jsx(Sn,{onClick:d,variant:"play-stop",size:"sm",active:a.isPlaying,className:"shadow-lg",children:a.isPlaying?u.jsxs(u.Fragment,{children:[u.jsx(ks,{className:"w-4 h-4"})," Stop"]}):u.jsxs(u.Fragment,{children:[u.jsx(Is,{className:"w-4 h-4"})," Play"]})})]}),u.jsxs("div",{className:"text-center sm:w-full sm:text-left sm:mx-4",children:[u.jsxs("div",{className:"hidden sm:block text-xs font-bold text-slate-300 uppercase tracking-wider",children:["chords ",n&&u.jsx("span",{className:"text-blue-400",children:"(drag to reorder)"})]}),u.jsxs("div",{className:"block sm:hidden text-xs text-slate-300 uppercase tracking-wider",children:["chords ",n&&u.jsx("span",{className:"text-blue-400",children:"(drag)"})]})]}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("button",{onClick:f,className:bt("w-[7em] h-8 flex items-center space-x-2 px-3 py-1.5 text-xs border rounded transition-all duration-200",e?"text-slate-200 bg-[#4a5262] border-gray-600 hover:bg-[#525a6b]":"text-slate-300 hover:text-slate-200 bg-[#4a5262] hover:bg-[#525a6b] border-gray-600"),children:e?u.jsxs(u.Fragment,{children:[u.jsx(wb,{className:"h-3 w-3"}),u.jsx("span",{children:"Collapse"})]}):u.jsxs(u.Fragment,{children:[u.jsx(Cb,{className:"h-3 w-3"}),u.jsx("span",{children:"Expand"})]})}),!e&&u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:()=>{e&&f(),p()},className:"w-[5em] h-8 flex items-center justify-center px-3 py-1.5 text-xs text-slate-300 hover:text-slate-200 bg-[#4a5262] hover:bg-[#525a6b] border border-gray-600 rounded transition-all duration-200",children:"Clear"}),u.jsxs("button",{onClick:m,className:bt("w-[7em] h-8 flex items-center space-x-2 px-3 py-1.5 text-xs border rounded transition-all duration-200",o?"text-white bg-red-600 border-red-500 hover:bg-red-700":"text-slate-300 hover:text-slate-200 bg-[#4a5262] hover:bg-[#525a6b] border-gray-600"),children:[u.jsx(bg,{className:"h-3 w-3"}),u.jsx("span",{children:o?"Done":"Delete"})]})]})]})]}),e&&!s&&u.jsxs("div",{className:"mb-4 text-sm text-center text-slate-400",children:[u.jsxs("div",{children:["Use 1-",Math.min(l.length,9)," or click chords"]}),u.jsxs("div",{className:"mt-2 text-xs",children:[u.jsx("span",{className:"inline-block w-3 h-3 mr-2 bg-blue-500 rounded-full"}),"Active Chord",n&&u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"mx-2",children:"•"}),u.jsx("span",{className:"text-blue-400",children:"Drag chords to reorder"})]})]})]})]});function u5(e,n,o){const s={...e};return n.top+e.y<=o.top?s.y=o.top-n.top:n.bottom+e.y>=o.top+o.height&&(s.y=o.top+o.height-n.bottom),n.left+e.x<=o.left?s.x=o.left-n.left:n.right+e.x>=o.left+o.width&&(s.x=o.left+o.width-n.right),s}const d5=e=>{let{containerNodeRect:n,draggingNodeRect:o,transform:s}=e;return!o||!n?s:u5(s,o,n)},f5=({id:e,index:n,chord:o,onEdit:s,renderChordButton:a})=>{const{attributes:l,listeners:d,setNodeRef:f,transform:p,transition:m,isDragging:x}=r5({id:e}),g={transform:Vs.Transform.toString(p),transition:x?"none":m},y={...l,style:{userSelect:"none",webkitUserSelect:"none",...g}};return u.jsx("div",{ref:f,...y,...d,className:"mobile-drag-item",style:{WebkitTouchCallout:"none",WebkitTapHighlightColor:"transparent",...y.style},children:a(o,n,x,s)})},Ln={DRAG_STYLES:`
        .dragging {
            overflow: hidden !important;
            touch-action: none !important;
            overscroll-behavior: none !important;
            -webkit-overflow-scrolling: auto !important;
        }
        
        .dragging * {
            pointer-events: none !important;
        }
        
        .dragging .mobile-drag-item,
        .dragging .mobile-drag-item * {
            pointer-events: auto !important;
        }
        
        @media (max-width: 768px) {
            .dragging {
                -webkit-user-select: none !important;
                user-select: none !important;
            }
        }
    `,GRID_CLASSES:{LIVE_MODE:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4 auto-rows-max pt-0",COLLAPSED_MODE:"flex space-x-2 overflow-x-auto pb-2 chord-sequence-scroll -mx-2 px-2"},BUTTON_SIZES:{LIVE_DESKTOP:{container:"py-8 px-6 text-lg min-h-[120px] flex flex-col items-center justify-center",number:"text-xl mb-2",name:"text-base text-center text-white",icon:"h-6 w-6"},LIVE_MOBILE:{container:"py-8 px-6 text-lg min-h-[140px] flex flex-col items-center justify-center",number:"text-xl mb-2",name:"text-base text-center text-white",icon:"h-6 w-6"},COLLAPSED:{container:"py-4 px-2 text-sm min-w-[85px] bottom-nav-button chord-button space-x-1 mt-1 min-h-[60px] !min-w-[70px] flex flex-col items-center justify-center",number:"text-xs mb-1",name:"text-xs",icon:"h-4 w-4"}},MOBILE_USER_AGENTS:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i},p5=()=>Ln.MOBILE_USER_AGENTS.test(navigator.userAgent)||"ontouchstart"in window||navigator.maxTouchPoints>0,h5=({isLiveMode:e,isEditMode:n,onClick:o})=>u.jsx("button",{onClick:o,className:bt("flex items-center justify-center rounded-lg border-2 border-dashed transition-all duration-200 hover:scale-105",e?"w-full h-full min-h-[120px] py-8 px-6":"w-12 h-12",n?"border-blue-500 text-blue-400 bg-blue-500/10 hover:bg-blue-500/20":"border-gray-500 text-gray-400 hover:border-gray-400 hover:text-gray-300 hover:bg-gray-500/10"),title:n?"Exit edit mode":"Edit chords",style:{minHeight:e&&p5()?"140px":void 0},children:u.jsx(Cu,{className:bt(e?"w-8 h-8":"w-6 h-6",{"animate-spin":n})})}),ag=()=>Ln.MOBILE_USER_AGENTS.test(navigator.userAgent)||"ontouchstart"in window||navigator.maxTouchPoints>0,m5=({children:e,onClick:n,onTouchStart:o,onTouchEnd:s,className:a="",variant:l="primary",size:d="md",disabled:f=!1,active:p=!1,"aria-label":m,"aria-expanded":x,type:g="button",title:y,style:w,chord:C,index:E,isLiveMode:S,isDeleteMode:B,isEditMode:$,isHighlighted:P,isDragging:T,sizeConfig:A})=>{const I=`
    font-medium transition-all duration-200 rounded-md border
    focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-[#2a2f38]
    disabled:opacity-50 disabled:cursor-not-allowed
    flex items-center justify-center gap-1
  `,R={sm:"py-1 px-3 text-xs",md:"py-2 px-4 text-sm",lg:"py-3 px-6 text-base"},M={primary:p?"bg-blue-600 border-blue-500 text-white focus:ring-blue-500":"bg-blue-700 border-blue-600 hover:bg-blue-600 hover:border-blue-500 text-white focus:ring-blue-500",secondary:p?"bg-[#525a6b] border-gray-500 text-white focus:ring-gray-500":"bg-[#4a5262] border-gray-600 hover:bg-[#525a6b] hover:border-gray-500 text-white focus:ring-gray-500",danger:p?"bg-red-600 border-red-500 text-white focus:ring-red-500":"bg-red-700 border-red-600 hover:bg-red-600 hover:border-red-500 text-white focus:ring-red-500",success:p?"bg-green-600 border-green-500 text-white focus:ring-green-500":"bg-green-700 border-green-600 hover:bg-green-600 hover:border-green-500 text-white focus:ring-green-500"},Y=C?bt(I,A?"":R[d],M[l],{transform:P,"shadow-xl":S,"border-blue-500 hover:border-blue-400":$,"cursor-grab active:cursor-grabbing":$&&!ag(),"opacity-80 shadow-2xl scale-105":T,"select-none":$},a):bt(I,R[d],M[l],a);return C&&typeof E=="number"?u.jsxs("button",{type:g,onClick:n,onTouchStart:o,onTouchEnd:s,disabled:f,"aria-label":m,"aria-expanded":x,title:y,style:w,className:Y,children:[B&&u.jsx(Su,{className:`absolute top-1 right-1 text-white bg-red-500 rounded-full shadow-sm ${S?"h-6 w-6":"h-4 w-4"}`}),$&&u.jsxs(u.Fragment,{children:[u.jsx(Cu,{className:`absolute top-1 right-1 text-white bg-blue-500 rounded-full shadow-sm p-0.5 ${S?"h-6 w-6":"h-4 w-4"}`}),u.jsx(Cu,{className:"absolute rounded-md  right-0 h-full w-full opacity-0"})]}),$&&ag()&&u.jsx("div",{className:"absolute inset-0 w-full bg-blue-500/5 border-2 border-blue-500/20 rounded-lg pointer-events-none"}),u.jsx("div",{className:`text-blue-200 font-bold ${A?.number||"text-xl mb-2"}`,children:E+1}),u.jsx("div",{className:`leading-tight ${A?.name||"text-base text-center text-white"}`,children:C.name}),S&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"mt-4 text-xs text-center text-slate-300",children:C.notes.replace(/,/g," • ")}),u.jsx("div",{className:"mt-1 font-mono text-xs text-center text-slate-300",children:C.pattern.join("-")})]})]}):u.jsx("button",{type:g,onClick:n,onTouchStart:o,onTouchEnd:s,disabled:f,"aria-label":m,"aria-expanded":x,title:y,style:w,className:Y,children:e})},xu=()=>Ln.MOBILE_USER_AGENTS.test(navigator.userAgent)||"ontouchstart"in window||navigator.maxTouchPoints>0,g5=b.forwardRef(({isLiveMode:e,isEditMode:n,isDeleteMode:o,isCompactHeight:s,addedChords:a,activeChordIndex:l,highlightedChordIndex:d,sensors:f,onChordClick:p,onEditChord:m,onSetEditMode:x,onDragStart:g,onDragEnd:y,onDragEndDndKit:w,onDragCancel:C},E)=>{const S=(A,I,R=!1,M)=>{const Y=I===l,ee=I===d,oe=X=>{console.log("Button clicked!",{isEditMode:n,hasOnEdit:!!M,index:I}),X.stopPropagation(),X.preventDefault(),n&&M?(console.log("Opening editor for chord",I),M(I)):n||(console.log("Playing chord",I),p(A.notes,I))},O=X=>{n||(X.currentTarget.style.transform="scale(0.95)")},V=X=>{n||(X.currentTarget.style.transform="")},U=e?xu()?Ln.BUTTON_SIZES.LIVE_MOBILE:Ln.BUTTON_SIZES.LIVE_DESKTOP:Ln.BUTTON_SIZES.COLLAPSED;return u.jsx(m5,{onClick:oe,onTouchStart:O,onTouchEnd:V,variant:o?"danger":n?"secondary":"primary",active:Y&&!o&&!n,"aria-label":`Pattern: ${A.pattern.join("-")}`,className:`relative w-full h-full mobile-drag-item ${U.container}`,style:{touchAction:n?void 0:"auto"},chord:A,index:I,isLiveMode:e,isDeleteMode:o,isEditMode:n,isHighlighted:ee,isDragging:R,sizeConfig:U},I)},B=u.jsx(h5,{isLiveMode:e,isEditMode:n,onClick:()=>x(!n)}),$=e?u.jsxs("div",{className:Ln.GRID_CLASSES.LIVE_MODE,children:[a.map((A,I)=>u.jsx("div",{children:S(A,I)},I)),u.jsx("div",{children:B})]}):u.jsxs("div",{className:Ln.GRID_CLASSES.COLLAPSED_MODE,children:[a.map((A,I)=>u.jsx("div",{className:"flex-shrink-0",children:S(A,I)},I)),u.jsx("div",{className:"flex-shrink-0 py-4 px-2 min-w-[85px] min-h-[60px] mt-1 flex items-center justify-center",children:B})]}),P=e?u.jsx(FE,{sensors:f,collisionDetection:$4,onDragStart:g,onDragEnd:w,onDragCancel:C,modifiers:[d5],children:u.jsx(QE,{items:a.map((A,I)=>`chord-${I}`),strategy:kd,children:u.jsxs("div",{className:Ln.GRID_CLASSES.LIVE_MODE,style:{gap:"1rem"},children:[a.map((A,I)=>u.jsx(f5,{id:`chord-${I}`,index:I,chord:A,onEdit:m,renderChordButton:S},`${A.name}-${A.notes}-${I}`)),u.jsx("div",{children:B})]})})}):u.jsx(R0,{onDragEnd:y,children:u.jsx($0,{droppableId:"chord-list",direction:"horizontal",children:A=>u.jsxs("div",{ref:A.innerRef,...A.droppableProps,className:"flex pb-2 -mx-2 overflow-x-auto space-x-2 px-2 chord-sequence-scroll",children:[a.map((I,R)=>u.jsx(M0,{draggableId:`chord-${R}`,index:R,children:(M,Y)=>u.jsx("div",{ref:M.innerRef,...M.draggableProps,...M.dragHandleProps,className:"flex-shrink-0",children:S(I,R,Y.isDragging,m)})},`chord-${R}`)),A.placeholder,u.jsx("div",{className:"flex-shrink-0 py-4 px-2 min-w-[85px] min-h-[60px] mt-1 flex items-center justify-center",children:B})]})})}),T=e&&!n?{WebkitOverflowScrolling:"touch",touchAction:"pan-y",overscrollBehavior:"contain",position:"relative",zIndex:1}:e&&n?{WebkitOverflowScrolling:xu()?"auto":"touch",touchAction:xu()?"pan-y":"auto",overscrollBehavior:"contain",position:"relative",zIndex:1}:void 0;return u.jsx("div",{ref:E,className:`flex-1 max-w-7xl mx-auto w-full ${e?`px-4 pb-8 ${s?"pt-1":"pt-2"} overflow-y-auto`:"px-2 pb-1"}`,style:T,children:n?P:$})}),v5=({isEditMode:e,isDeleteMode:n,addedChords:o,onClearAll:s,onToggleDeleteMode:a})=>u.jsx("div",{className:"flex-shrink-0 bg-[#2a2f38] border-t border-gray-600 px-4 py-3",children:u.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[u.jsxs("div",{className:"text-xs font-medium text-slate-400 mr-3",children:[o.length," chord",o.length!==1?"s":""," loaded",e&&u.jsx("span",{className:"ml-2 text-blue-400",children:"• Edit Mode: Click chords to edit"})]}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("button",{onClick:s,className:"w-[5em] h-8 flex items-center justify-center px-3 py-1.5 text-xs text-slate-300 hover:text-slate-200 bg-[#4a5262] hover:bg-[#525a6b] border border-gray-600 rounded transition-all duration-200",children:"Clear"}),u.jsxs("button",{onClick:a,className:bt("w-[7em] h-8 flex items-center space-x-2 px-3 py-1.5 text-xs border rounded transition-all duration-200",n?"text-white bg-red-600 border-red-500 hover:bg-red-700":"text-slate-300 hover:text-slate-200 bg-[#4a5262] hover:bg-[#525a6b] border-gray-600"),children:[u.jsx(bg,{className:"h-3 w-3"}),u.jsx("span",{children:n?"Done":"Delete"})]})]})]})}),x5=()=>{const e=Cn(),n=Bn(),o=Ro(),s=gg(),{addedChords:a,activeChordIndex:l,highlightedChordIndex:d}=n,{isDeleteMode:f,isLiveMode:p}=s,{globalPatternState:m}=o,{chords:x}=e,[g,y]=b.useState(null),{isEditMode:w,setIsEditMode:C,isCompactHeight:E,scrollContainerRef:S,handleChordClick:B,handleUpdateChord:$,handleEditChord:P,handleCloseEditor:T,handleNavigateToChord:A,handleClearAll:I,handleTogglePlayback:R,handleToggleDeleteMode:M,handleToggleLiveMode:Y}=C4({musicStore:e,playbackStore:n,patternStore:o,uiStore:s,setEditingChordIndex:y}),{sensors:ee,handleDragStart:oe,handleDragCancel:O,handleDragEndDndKit:V,handleDragEnd:U}=l5({addedChords:a,activeChordIndex:l,playbackStore:n,isLiveMode:p});if(a.length===0)return null;if(g!==null){const J=a[g];if(J)return u.jsx(b4,{editingChordIndex:g,editingChord:J,totalChords:a.length,chords:x,onUpdateChord:$,onFetchOriginalChord:n.handleFetchOriginalChord,onChordClick:B,onClose:T,onNavigateToChord:A})}const X=p?"fixed inset-0 bg-[#1a1e24] bg-opacity-95 backdrop-blur-sm z-50 flex flex-col":"fixed bottom-0 left-0 right-0 bg-[#2a2f38] bg-[#363c46] border-t border-gray-600 shadow-2xl z-50";return u.jsxs("div",{className:X,style:p?{touchAction:"none",overscrollBehavior:"none"}:void 0,children:[u.jsx("style",{children:Ln.DRAG_STYLES}),u.jsx(c5,{isLiveMode:p,isEditMode:w,isDeleteMode:f,isCompactHeight:E,globalPatternState:m,addedChords:a,onTogglePlayback:R,onToggleLiveMode:Y,onClearAll:I,onToggleDeleteMode:M}),u.jsx(g5,{ref:S,isLiveMode:p,isEditMode:w,isDeleteMode:f,isCompactHeight:E,addedChords:a,activeChordIndex:l,highlightedChordIndex:d,sensors:ee,onChordClick:B,onEditChord:P,onSetEditMode:C,onDragStart:oe,onDragEnd:U,onDragEndDndKit:V,onDragCancel:O}),p&&u.jsx(v5,{isEditMode:w,isDeleteMode:f,addedChords:a,onClearAll:I,onToggleDeleteMode:M})]})},$u=({size:e=48,className:n=""})=>u.jsxs("div",{className:`relative flex items-center ${n}`,children:[u.jsx("div",{className:"relative",style:{width:e,height:e},children:u.jsxs("svg",{viewBox:"0 0 48 48",style:{width:e,height:e},children:[u.jsx("polygon",{points:"24,2 38,12 38,28 24,38 10,28 10,12",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"text-slate-300"}),u.jsx("circle",{cx:"18",cy:"20",r:"2",fill:"currentColor",className:"text-slate-400"}),u.jsx("circle",{cx:"30",cy:"20",r:"2",fill:"currentColor",className:"text-slate-400"}),u.jsx("circle",{cx:"24",cy:"28",r:"2",fill:"currentColor",className:"text-slate-400"}),u.jsx("line",{x1:"18",y1:"20",x2:"24",y2:"28",stroke:"currentColor",strokeWidth:"1.5",className:"text-slate-400"}),u.jsx("line",{x1:"30",y1:"20",x2:"24",y2:"28",stroke:"currentColor",strokeWidth:"1.5",className:"text-slate-400"}),u.jsx("line",{x1:"18",y1:"20",x2:"30",y2:"20",stroke:"currentColor",strokeWidth:"1.5",className:"text-slate-400"})]})}),u.jsx("div",{className:"absolute -top-1 -right-0 w-2 h-2 border border-slate-400 transform rotate-45"})]}),y5=()=>({transposeChords:b.useCallback(async(n,o,s,a)=>{console.log("Transposing from",n,o,"to",s,a);const l=Bn.getState().addedChords;if(console.log("Current chords to transpose:",l.length),l.length===0)return;const d=n!==s?pg(n,s):0,[f,p]=await Promise.all([Er.getModeKeyChords(s,a),Er.getAllDistinctChords()]),m=l.map(x=>{const g=d!==0?mg(x.name,d):x.name;let y=f.find(w=>w.chordName===g)||p.find(w=>w.chordName===g);if(y||console.log(`Chord ${g} not in ${s} ${a}, found in all chords:`,!1),y?.chordNoteNames)return{...x,name:g,notes:y.chordNoteNames,originalKey:s,originalMode:a,originalNotes:y.chordNoteNames};{console.log(`Chord ${g} not found, manually transposing notes`);const w=d!==0?ma(x.notes,d):x.notes;return{...x,name:g,notes:w,originalNotes:x.originalNotes?d!==0?ma(x.originalNotes,d):x.originalNotes:w}}});Bn.getState().setAddedChords(m),console.log("Transpose complete")},[])}),lg=({currentKey:e,mode:n,modes:o,pianoSettings:s,availableInstruments:a,isPlayingScale:l,scaleNotes:d,transposeEnabled:f,isDesktop:p=!1,onKeyChange:m,onModeChange:x,onInstrumentChange:g,onToggleTranspose:y,onToggleScalePlayback:w})=>{const C={key:p?"w-[5rem]":"w-[6em]",mode:p?"w-[11rem]":"w-[14rem]",voice:"w-[14rem]"},E=p?"flex flex-col bg-[#3d434f]/30 border border-gray-600/30 rounded-lg px-6 py-4":"space-y-4",S=p?"w-px h-8 bg-gray-600/50 mx-8":"hidden",B=p?"text-sm text-slate-300 font-medium whitespace-nowrap":"text-sm text-slate-300 font-medium whitespace-nowrap w-16 flex items-center",$=["C","C#","Db","D","D#","Eb","E","F","F#","Gb","G","G#","Ab","A","A#","Bb","B"];return p?u.jsxs("div",{className:E,children:[u.jsxs("div",{className:"flex items-center",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("span",{className:B,children:"Key:"}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(Nn,{value:e,className:C.key,buttonClassName:"px-3 py-1.5 text-center font-medium text-xs h-10 flex items-center justify-center",menuClassName:`min-w-[${C.key}]`,onChange:m,showSearch:!1,options:$}),u.jsx(Sn,{onClick:w,variant:"play-stop",size:"icon",className:"!w-8 !h-8 flex items-center justify-center ml-1",active:l,title:l?"Stop scale":`Play ${e} ${n} scale`,disabled:!d||d.length===0,children:l?u.jsx(ks,{className:"w-6 h-6"}):u.jsx(Is,{className:"w-6 h-6"})})]})]}),u.jsx("div",{className:S}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("span",{className:B,children:"Mode:"}),o&&u.jsx(Nn,{value:n,className:C.mode,buttonClassName:"px-3 py-1.5 text-left font-medium text-xs h-10 flex items-center",menuClassName:`min-w-[${C.mode}]`,onChange:x,showSearch:!0,options:o})]}),u.jsx("div",{className:S}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("span",{className:B,children:"Voice:"}),u.jsx(Nn,{value:s.instrumentName.replaceAll("_"," "),className:C.voice,buttonClassName:"px-3 py-1.5 text-left font-medium text-xs h-10 flex items-center",menuClassName:"min-w-[11rem]",onChange:g,showSearch:!0,options:a.map(P=>P.replaceAll("_"," "))})]})]}),u.jsx("div",{className:"flex items-start mt-3",children:u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("span",{className:"text-sm text-slate-300 font-medium whitespace-nowrap invisible",children:"Key:"}),u.jsx("button",{onClick:y,className:`relative flex items-center justify-center px-4 py-2 rounded-lg text-xs font-medium uppercase tracking-wide transition-all duration-200 border ${f?"bg-gradient-to-r from-blue-600 to-blue-700 text-white border-blue-600 shadow-lg shadow-blue-600/25":"bg-[#3d434f] text-slate-400 border-gray-600 hover:bg-[#4a5262] hover:text-slate-300"}`,title:"When enabled, changing key or mode will transpose all added chords",children:u.jsxs("div",{className:`flex items-center gap-2 ${f?"text-white":""}`,children:[u.jsx("div",{className:`w-2 h-2 rounded-full transition-colors duration-200 ${f?"bg-white":"bg-slate-500"}`}),u.jsx("span",{children:"Transpose"})]})})]})})]}):u.jsxs("div",{className:E,children:[u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx("span",{className:`${B} mt-2`,children:"Key:"}),u.jsxs("div",{className:"flex flex-col gap-2",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(Nn,{value:e,className:C.key,buttonClassName:"px-3 py-1.5 text-center font-medium text-xs h-10 flex items-center justify-center",menuClassName:"min-w-[6rem]",onChange:m,showSearch:!1,options:$}),u.jsx(Sn,{onClick:w,variant:"play-stop",size:"icon",className:"!w-8 !h-8 flex items-center justify-center ml-1",active:l,title:l?"Stop scale":`Play ${e} ${n} scale`,disabled:!d||d.length===0,children:l?u.jsx(ks,{className:"w-6 h-6"}):u.jsx(Is,{className:"w-6 h-6"})})]}),u.jsx("button",{onClick:y,className:`relative flex items-center justify-center px-4 py-2 rounded-lg text-xs font-medium uppercase tracking-wide transition-all duration-200 border max-w-[13em] ${f?"bg-gradient-to-r from-blue-600 to-blue-700 text-white border-blue-600 shadow-lg shadow-blue-600/25":"bg-[#3d434f] text-slate-400 border-gray-600 hover:bg-[#4a5262] hover:text-slate-300"}`,title:"When enabled, changing key or mode will transpose all added chords",children:u.jsxs("div",{className:`flex items-center gap-2 ${f?"text-white":""}`,children:[u.jsx("div",{className:`w-2 h-2 rounded-full transition-colors duration-200 ${f?"bg-white":"bg-slate-500"}`}),u.jsx("span",{children:"Transpose"})]})})]})]}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("span",{className:B,children:"Mode:"}),o&&u.jsx(Nn,{value:n,className:C.mode,buttonClassName:"px-3 py-1.5 text-left font-medium text-xs h-10 flex items-center",menuClassName:`min-w-[${C.mode}]`,onChange:x,showSearch:!0,options:o})]}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("span",{className:B,children:"Voice:"}),u.jsx(Nn,{value:s.instrumentName.replaceAll("_"," "),className:C.voice,buttonClassName:"px-3 py-1.5 text-left font-medium text-xs h-10 flex items-center",menuClassName:"min-w-[11rem]",onChange:g,showSearch:!0,options:a.map(P=>P.replaceAll("_"," "))})]})]})},b5=(e,n=4)=>{const o={C:0,"C#":1,Db:1,D:2,"D#":3,Eb:3,E:4,F:5,"F#":6,Gb:6,G:7,"G#":8,Ab:8,A:9,"A#":10,Bb:10,B:11};return(n+1)*12+(o[e]??0)},w5=({className:e="",onKeyChange:n,onModeChange:o,onInstrumentChange:s})=>{const a=Cn(ne=>ne.key),l=Cn(ne=>ne.mode),d=Cn(ne=>ne.modes),f=Cn(ne=>ne.scaleNotes),p=Ss(ne=>ne.pianoSettings),m=Ss(ne=>ne.availableInstruments),x=Bn(ne=>ne.isPlayingScale),g=Ro(ne=>ne.globalPatternState),{setKey:y,setMode:w}=Cn(),{setPianoInstrument:C,setCutOffPreviousNotes:E,setEq:S,setOctaveOffset:B,setReverbLevel:$,setNoteDuration:P,setVolume:T,setChorusLevel:A,setDelayLevel:I}=Ss(),{setIsPlayingScale:R,clearScalePlaybackTimeouts:M,setActiveNotes:Y}=Bn(),[ee,oe]=b.useState(!1),[O,V]=b.useState(!1),{transposeChords:U}=y5(),X=b.useRef([]),J=b.useRef(!1),se=ne=>{const pe=ne.replaceAll(" ","_");s?s(pe):C(pe)},q=async ne=>{n?n(ne):(O&&await U(a,l,ne,l),y(ne))},Q=async ne=>{o?o(ne):(O&&await U(a,l,a,ne),w(ne))},K=b.useCallback(()=>{X.current.forEach(ne=>clearTimeout(ne)),X.current=[],J.current=!1},[]),D=b.useCallback(ne=>6e4/ne/2,[]),F=b.useCallback(()=>{if(!f||f.length===0){console.warn("No scale notes available to play");return}K();const ne=g?.bpm||120,pe=D(ne);J.current=!0,R(!0);const Ae=[...f];if(f.length>0){const xe=f[0];Ae.push({...xe,seqNote:xe.seqNote?xe.seqNote+12:void 0})}const ve=Ae.map(xe=>{const ke=Do(xe.noteName)||"C",_e=4,rt=xe.seqNote?xe.seqNote:b5(ke,_e);return{note:ke,octave:_e,sortValue:rt}}).sort((xe,ke)=>xe.sortValue-ke.sortValue),le=xe=>({C:0,"C#":1,Db:1,D:2,"D#":3,Eb:3,E:4,F:5,"F#":6,Gb:6,G:7,"G#":8,Ab:8,A:9,"A#":10,Bb:10,B:11})[xe]??0,he=[];let Ie=4,Ee=-1;for(let xe=0;xe<ve.length;xe++){const ke=ve[xe],_e=le(ke.note);(Ee!==-1&&Ee===11&&_e<=11&&_e<Ee||Ee!==-1&&_e<Ee&&!(Ee===11&&_e===0))&&Ie++,he.push({note:ke.note,octave:Ie}),Ee=_e}he.forEach((xe,ke)=>{const _e=setTimeout(()=>{if(!J.current)return;Y([xe]);const rt=setTimeout(()=>{J.current&&Y([])},pe*.8);if(X.current.push(rt),ke===he.length-1){const tn=setTimeout(()=>{J.current&&ae()},pe);X.current.push(tn)}},ke*pe);X.current.push(_e)})},[f,g,R,Y,K,D]),ae=b.useCallback(()=>{K(),Y([]),R(!1),M&&M()},[K,Y,R,M]),de=b.useCallback(()=>{x||J.current?ae():F()},[x,F,ae]);return we.useEffect(()=>()=>K(),[K]),u.jsx("div",{className:`w-full max-w-7xl mx-auto px-2 sm:mt-2 mt-0 mb-0 ${e}`,children:u.jsxs("div",{className:"bg-[#3d434f] border border-gray-600 rounded-lg overflow-hidden",children:[u.jsx("div",{className:"px-4 py-3 border-b border-gray-600",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("h2",{className:"text-sm font-bold text-slate-300 uppercase tracking-wider",children:"Controls"}),u.jsx("button",{onClick:()=>oe(!ee),className:"w-[7em] h-8 flex items-center space-x-2 px-3 py-1.5 text-xs text-slate-300 hover:text-slate-200 bg-[#4a5262] hover:bg-[#525a6b] border border-gray-600 rounded transition-all duration-200",children:ee?u.jsxs(u.Fragment,{children:[u.jsx(Rs,{className:"w-3 h-3"}),u.jsx("span",{children:"Settings"})]}):u.jsxs(u.Fragment,{children:[u.jsx(Yr,{className:"w-3 h-3"}),u.jsx("span",{children:"Settings"})]})})]})}),u.jsx("div",{className:"p-6 py-4 bg-[#444b59]",children:u.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-start lg:justify-center gap-6",children:[u.jsxs("div",{className:"hidden lg:flex items-center justify-between w-full",children:[u.jsx("div",{className:"flex-shrink-0 opacity-30",children:u.jsx($u,{size:80})}),u.jsx("div",{className:"flex-shrink-0",children:u.jsx(lg,{currentKey:a,mode:l,modes:d,pianoSettings:p,availableInstruments:m,isPlayingScale:x,scaleNotes:f,transposeEnabled:O,isDesktop:!0,onKeyChange:q,onModeChange:Q,onInstrumentChange:se,onToggleTranspose:()=>V(!O),onToggleScalePlayback:de})}),u.jsx("div",{className:"hidden [@media(min-width:72em)]:flex flex-shrink-0 opacity-30",children:u.jsx($u,{size:80})})]}),u.jsx("div",{className:"lg:hidden",children:u.jsx(lg,{currentKey:a,mode:l,modes:d,pianoSettings:p,availableInstruments:m,isPlayingScale:x,scaleNotes:f,transposeEnabled:O,isDesktop:!1,onKeyChange:q,onModeChange:Q,onInstrumentChange:se,onToggleTranspose:()=>V(!O),onToggleScalePlayback:de})})]})}),u.jsx("div",{className:`transition-all duration-300 ease-in-out overflow-hidden ${ee?" opacity-100":"max-h-0 opacity-0"}`,children:u.jsxs("div",{className:"border-t border-gray-600 bg-[#3d434f]",children:[u.jsx("div",{className:"px-4 py-3 border-b border-gray-600",children:u.jsx("h3",{className:"text-left text-sm font-medium text-slate-200 uppercase tracking-wider",children:"Piano Settings"})}),u.jsx("div",{className:"p-6 bg-[#444b59]",children:u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-x-8",children:[u.jsxs("div",{className:"space-y-6",children:[u.jsx(Cr,{label:"Volume",value:p.volume,min:0,max:1,step:.05,onChange:T,showPercentage:!0}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-medium text-slate-200 mb-2 uppercase tracking-wide",children:"Octave Shift"}),u.jsxs("div",{className:"flex items-center justify-between bg-[#3d434f] border border-gray-600 rounded-md p-1.5",children:[u.jsx("button",{onClick:()=>B(Math.max(-3,p.octaveOffset-1)),className:"w-6 h-6 flex items-center justify-center text-slate-300 hover:text-slate-200 hover:bg-[#4a5262] rounded transition-colors",disabled:p.octaveOffset<=-3,children:"−"}),u.jsx("span",{className:"font-mono text-xs text-slate-200 px-2",children:p.octaveOffset===0?"Normal":`${p.octaveOffset>0?"+":""}${p.octaveOffset} octave${Math.abs(p.octaveOffset)>1?"s":""}`}),u.jsx("button",{onClick:()=>B(Math.min(3,p.octaveOffset+1)),className:"w-6 h-6 flex items-center justify-center text-slate-300 hover:text-slate-200 hover:bg-[#4a5262] rounded transition-colors",disabled:p.octaveOffset>=3,children:"+"})]})]}),u.jsx(Cr,{label:"Reverb",value:p.reverbLevel,min:0,max:1,step:.05,onChange:$,showPercentage:!0}),u.jsx(Cr,{label:"Note Duration",value:p.noteDuration,min:.1,max:1,step:.05,onChange:P,showPercentage:!0}),u.jsx("div",{children:u.jsxs("label",{className:"flex items-center cursor-pointer",children:[u.jsx("input",{type:"checkbox",className:"w-3.5 h-3.5 text-blue-600 bg-[#3d434f] border-gray-600 rounded focus:ring-blue-500 focus:ring-1",checked:p.cutOffPreviousNotes,onChange:ne=>E(ne.target.checked)}),u.jsx("span",{className:"ml-2 text-xs text-slate-300 uppercase tracking-wide",children:"Cut off previous notes"})]})})]}),u.jsxs("div",{className:"space-y-4 mt-6 lg:mt-0",children:[u.jsxs("div",{children:[u.jsx("div",{className:"text-xs font-medium text-slate-200 mb-4 uppercase tracking-wide",children:"Equalizer"}),u.jsx("div",{className:"space-y-3",children:[{label:"Bass",key:"bass"},{label:"Mid",key:"mid"},{label:"Treble",key:"treble"}].map(({label:ne,key:pe})=>u.jsx(Cr,{label:ne,value:p.eq[pe],min:-24,max:24,step:.5,variant:"split",onChange:Ae=>{const ve={...p.eq,[pe]:Ae};S(ve)},formatValue:Ae=>`${Ae>0?"+":""}${Ae.toFixed(1)}dB`},pe))})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsx(Cr,{label:"Chorus",value:p.chorusLevel,min:0,max:1,step:.05,onChange:A,showPercentage:!0}),u.jsx(Cr,{label:"Delay",value:p.delayLevel,min:0,max:1,step:.05,onChange:I,showPercentage:!0})]})]})]})})]})})]})})},N5=({isOpen:e,onClose:n,onOpenHelp:o})=>{const s=()=>{n(),o()};return u.jsx(Ju,{isOpen:e,onClose:n,title:"About",className:"max-w-2xl max-h-[85vh]",fixedHeader:!0,children:u.jsxs("div",{className:"p-6 space-y-6",children:[u.jsx("div",{className:"bg-[#2a2f38] rounded-lg border border-gray-600 overflow-hidden",children:u.jsxs("div",{className:"p-4 text-sm leading-relaxed space-y-3 text-slate-300 text-left",children:[u.jsx("p",{children:"Modal Chord Buildr is a music learning, composition, and performance tool built with React. The app provides an intuitive interface for exploring musical scales and building chord progressions, while also offering basic synth and sequencer functionality."}),u.jsxs("p",{children:["For more details on how to use this app, please refer to the"," ",u.jsx("button",{onClick:s,className:"font-semibold text-blue-400 hover:text-blue-300 underline underline-offset-2 transition-colors cursor-pointer",children:"Help & Guide"})," ","documentation."]})]})}),u.jsxs("div",{className:"bg-[#2a2f38] rounded-lg border border-gray-600 overflow-hidden",children:[u.jsx("div",{className:"bg-[#444b59] px-4 py-3 border-b border-gray-600",children:u.jsx("h4",{className:"text-sm font-semibold text-white uppercase tracking-wide",children:"Key Features"})}),u.jsx("div",{className:"p-4",children:u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{className:"flex items-start space-x-3 p-2 rounded-md hover:bg-[#3d434f]/50 transition-colors",children:[u.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-400 mt-2 flex-shrink-0"}),u.jsx("span",{className:"text-sm text-slate-300 text-left",children:"Interactive piano with multiple instruments and audio effects"})]}),u.jsxs("div",{className:"flex items-start space-x-3 p-2 rounded-md hover:bg-[#3d434f]/50 transition-colors",children:[u.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-400 mt-2 flex-shrink-0"}),u.jsx("span",{className:"text-sm text-slate-300 text-left",children:"Pattern sequencer with customizable rhythmic patterns"})]}),u.jsxs("div",{className:"flex items-start space-x-3 p-2 rounded-md hover:bg-[#3d434f]/50 transition-colors",children:[u.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-400 mt-2 flex-shrink-0"}),u.jsx("span",{className:"text-sm text-slate-300 text-left",children:"Extensive chord explorer with mode-based chord generation"})]}),u.jsxs("div",{className:"flex items-start space-x-3 p-2 rounded-md hover:bg-[#3d434f]/50 transition-colors",children:[u.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-400 mt-2 flex-shrink-0"}),u.jsx("span",{className:"text-sm text-slate-300 text-left",children:"Real-time visualization of scale notes and chord relationships"})]}),u.jsxs("div",{className:"flex items-start space-x-3 p-2 rounded-md hover:bg-[#3d434f]/50 transition-colors",children:[u.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-400 mt-2 flex-shrink-0"}),u.jsx("span",{className:"text-sm text-slate-300 text-left",children:"Live mode for performance and improvisation"})]})]})})]}),u.jsxs("div",{className:"bg-[#2a2f38] rounded-lg border border-gray-600 overflow-hidden",children:[u.jsx("div",{className:"bg-[#444b59] px-4 py-3 border-b border-gray-600",children:u.jsx("h4",{className:"text-sm font-semibold text-white uppercase tracking-wide",children:"Links"})}),u.jsxs("div",{className:"p-4 space-y-3",children:[u.jsxs("a",{href:"https://github.com/jekrch/chord-analyzr",target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-3 p-3 rounded-lg bg-[#3d434f]/50 hover:bg-[#4a5262]/70 transition-all duration-200 group",children:[u.jsx("div",{className:"w-8 h-8 flex items-center justify-center rounded-full bg-gray-700 group-hover:bg-gray-600 transition-colors",children:u.jsx("svg",{className:"w-5 h-5 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:u.jsx("path",{fillRule:"evenodd",d:"M10 0C4.477 0 0 4.484 0 10.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0110 4.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.203 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.942.359.31.678.921.678 1.856 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0020 10.017C20 4.484 15.522 0 10 0z",clipRule:"evenodd"})})}),u.jsxs("div",{className:"flex-1 text-left",children:[u.jsx("div",{className:"text-sm font-medium text-white group-hover:text-blue-200 transition-colors",children:"GitHub Repository"}),u.jsx("div",{className:"text-xs text-slate-400",children:"View source code and documentation"})]})]}),u.jsxs("a",{href:"https://jacobkrch.com",target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-3 p-3 rounded-lg bg-[#3d434f]/50 hover:bg-[#4a5262]/70 transition-all duration-200 group",children:[u.jsx("div",{className:"w-8 h-8 flex items-center justify-center rounded-full bg-blue-600 group-hover:bg-blue-500 transition-colors",children:u.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})}),u.jsx("div",{className:"flex-1 text-left",children:u.jsx("div",{className:"text-sm font-medium text-white group-hover:text-blue-200 transition-colors",children:"jacobkrch.com"})})]})]})]}),u.jsx("div",{className:"pt-4 border-t border-gray-600/50",children:u.jsx("p",{className:"text-xs text-slate-400 text-left",children:"© 2025 Jacob Krch. All rights reserved."})})]})})},Jn=({title:e,children:n,defaultOpen:o=!1})=>{const[s,a]=b.useState(o);return u.jsxs("div",{className:"bg-[#2a2f38] rounded-lg border border-gray-600 overflow-hidden mb-4",children:[u.jsxs("button",{onClick:()=>a(!s),className:"w-full flex items-center justify-between p-4 text-left bg-[#444b59] border-b border-gray-600 hover:bg-[#4a5262] transition-all duration-200",children:[u.jsx("h4",{className:"text-sm font-semibold text-white uppercase tracking-wide",children:e}),s?u.jsx(Yr,{className:"w-4 h-4 text-slate-300 flex-shrink-0"}):u.jsx(vg,{className:"w-4 h-4 text-slate-300 flex-shrink-0"})]}),s&&u.jsx("div",{className:"p-4 text-slate-300",children:n})]})},C5=({isOpen:e,onClose:n})=>u.jsx(Ju,{isOpen:e,onClose:n,title:"Help & Guide",className:"max-w-4xl max-h-[85vh]",fixedHeader:!0,children:u.jsxs("div",{className:"p-6 space-y-4",children:[u.jsx(Jn,{title:"Quick Start",defaultOpen:!0,children:u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex items-start space-x-4 p-3 rounded-lg bg-[#3d434f]/30 hover:bg-[#3d434f]/50 transition-colors",children:[u.jsx("div",{className:"w-8 h-8 flex items-center justify-center rounded-full bg-blue-600 text-white text-sm font-bold flex-shrink-0",children:"1"}),u.jsxs("div",{className:"text-left",children:[u.jsx("div",{className:"text-sm font-semibold text-white mb-1",children:"Choose a Key & Mode"}),u.jsx("div",{className:"text-sm text-slate-300",children:"Use the Controls section to select your musical key and mode (like C Ionian, D# Lydian, etc.)"})]})]}),u.jsxs("div",{className:"flex items-start space-x-4 p-3 rounded-lg bg-[#3d434f]/30 hover:bg-[#3d434f]/50 transition-colors",children:[u.jsx("div",{className:"w-8 h-8 flex items-center justify-center rounded-full bg-blue-600 text-white text-sm font-bold flex-shrink-0",children:"2"}),u.jsxs("div",{className:"text-left",children:[u.jsx("div",{className:"text-sm font-semibold text-white mb-1",children:"Explore Chords"}),u.jsx("div",{className:"text-sm text-slate-300",children:"Browse the Chord Explorer below to discover chords that fit your chosen key/mode"})]})]}),u.jsxs("div",{className:"flex items-start space-x-4 p-3 rounded-lg bg-[#3d434f]/30 hover:bg-[#3d434f]/50 transition-colors",children:[u.jsx("div",{className:"w-8 h-8 flex items-center justify-center rounded-full bg-blue-600 text-white text-sm font-bold flex-shrink-0",children:"3"}),u.jsxs("div",{className:"text-left",children:[u.jsx("div",{className:"text-sm font-semibold text-white mb-1",children:"Build Sequences"}),u.jsx("div",{className:"text-sm text-slate-300",children:"Click the + button on chords to add them to your sequence"})]})]}),u.jsxs("div",{className:"flex items-start space-x-4 p-3 rounded-lg bg-[#3d434f]/30 hover:bg-[#3d434f]/50 transition-colors",children:[u.jsx("div",{className:"w-8 h-8 flex items-center justify-center rounded-full bg-blue-600 text-white text-sm font-bold flex-shrink-0",children:"4"}),u.jsxs("div",{className:"text-left",children:[u.jsx("div",{className:"text-sm font-semibold text-white mb-1",children:"Create Patterns"}),u.jsx("div",{className:"text-sm text-slate-300",children:"Use the Sequencer to create rhythmic patterns for your chords"})]})]}),u.jsxs("div",{className:"flex items-start space-x-4 p-3 rounded-lg bg-[#3d434f]/30 hover:bg-[#3d434f]/50 transition-colors",children:[u.jsx("div",{className:"w-8 h-8 flex items-center justify-center rounded-full bg-blue-600 text-white text-sm font-bold flex-shrink-0",children:"5"}),u.jsxs("div",{className:"text-left",children:[u.jsx("div",{className:"text-sm font-semibold text-white mb-1",children:"Play & Perform"}),u.jsx("div",{className:"text-sm text-slate-300",children:"Hit Play to hear your creation, or use Live Mode for real-time performance"})]})]})]})}),u.jsx(Jn,{title:"Keyboard Shortcuts",children:u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[u.jsxs("div",{className:"space-y-3",children:[u.jsx("h5",{className:"text-white font-semibold text-sm border-b border-gray-600 pb-2 text-left",children:"Playback Control"}),u.jsxs("div",{className:"flex items-center justify-between p-2 rounded-md bg-[#3d434f]/30",children:[u.jsx("span",{className:"text-sm text-left",children:"Play/Pause sequencer"}),u.jsx("kbd",{className:"px-2 py-1 bg-gray-700 rounded text-xs font-mono",children:"Space"})]})]}),u.jsxs("div",{className:"space-y-3",children:[u.jsx("h5",{className:"text-white font-semibold text-sm border-b border-gray-600 pb-2 text-left",children:"Navigation"}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"flex items-center justify-between p-2 rounded-md bg-[#3d434f]/30",children:[u.jsx("span",{className:"text-sm text-left",children:"Expand chord buttons"}),u.jsx("kbd",{className:"px-2 py-1 bg-gray-700 rounded text-xs font-mono",children:"L"})]}),u.jsxs("div",{className:"flex items-center justify-between p-2 rounded-md bg-[#3d434f]/30",children:[u.jsx("span",{className:"text-sm text-left",children:"Select chord from sequence"}),u.jsx("kbd",{className:"px-2 py-1 bg-gray-700 rounded text-xs font-mono",children:"1-9"})]})]})]})]})}),u.jsx(Jn,{title:"Piano & Audio Controls",children:u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"p-4 rounded-lg bg-[#3d434f]/30",children:[u.jsx("h5",{className:"text-white font-semibold mb-3 text-sm text-left",children:"Piano Interaction"}),u.jsx("p",{className:"text-sm text-left",children:"Click piano keys to play individual notes. The piano highlights scale notes and chord tones based on your current selection."})]}),u.jsxs("div",{className:"p-4 rounded-lg bg-[#3d434f]/30",children:[u.jsx("h5",{className:"text-white font-semibold mb-3 text-sm text-left",children:"Audio Settings"}),u.jsx("p",{className:"text-sm mb-3 text-left",children:"Access comprehensive audio controls through the Settings panel in the Controls section:"}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"flex items-start space-x-2 text-sm",children:[u.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-400 mt-2 flex-shrink-0"}),u.jsxs("div",{className:"text-left",children:[u.jsx("strong",{className:"text-white",children:"Voice:"})," ",u.jsx("span",{className:"text-slate-300",children:"Choose from multiple instrument sounds"})]})]}),u.jsxs("div",{className:"flex items-start space-x-2 text-sm",children:[u.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-400 mt-2 flex-shrink-0"}),u.jsxs("div",{className:"text-left",children:[u.jsx("strong",{className:"text-white",children:"Volume & Octave:"})," ",u.jsx("span",{className:"text-slate-300",children:"Adjust overall volume and pitch range"})]})]}),u.jsxs("div",{className:"flex items-start space-x-2 text-sm",children:[u.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-400 mt-2 flex-shrink-0"}),u.jsxs("div",{className:"text-left",children:[u.jsx("strong",{className:"text-white",children:"Effects:"})," ",u.jsx("span",{className:"text-slate-300",children:"Add reverb, chorus, and delay"})]})]}),u.jsxs("div",{className:"flex items-start space-x-2 text-sm",children:[u.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-400 mt-2 flex-shrink-0"}),u.jsxs("div",{className:"text-left",children:[u.jsx("strong",{className:"text-white",children:"Equalizer:"})," ",u.jsx("span",{className:"text-slate-300",children:"Shape the sound with bass, mid, and treble controls"})]})]}),u.jsxs("div",{className:"flex items-start space-x-2 text-sm",children:[u.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-400 mt-2 flex-shrink-0"}),u.jsxs("div",{className:"text-left",children:[u.jsx("strong",{className:"text-white",children:"Note Duration:"})," ",u.jsx("span",{className:"text-slate-300",children:"Control how long notes ring out"})]})]})]})]})]})}),u.jsx(Jn,{title:"Pattern Sequencer",children:u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"p-4 rounded-lg bg-[#3d434f]/30",children:[u.jsx("h5",{className:"text-white font-semibold mb-3 text-sm text-left",children:"Understanding Patterns"}),u.jsx("p",{className:"text-sm mb-3 text-left",children:"Patterns control which chord tones play at different time steps. Each step can be:"}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"flex items-center space-x-3 p-2 rounded-md bg-[#2a2f38]",children:[u.jsx("code",{className:"px-2 py-1 bg-gray-700 rounded text-xs font-mono text-white min-w-[4rem] text-center",children:"—"}),u.jsx("span",{className:"text-sm text-slate-300 text-left",children:"Rest/silence"})]}),u.jsxs("div",{className:"flex items-center space-x-3 p-2 rounded-md bg-[#2a2f38]",children:[u.jsx("code",{className:"px-2 py-1 bg-gray-700 rounded text-xs font-mono text-white min-w-[4rem] text-center",children:"1, 2, 3..."}),u.jsx("span",{className:"text-sm text-slate-300 text-left",children:"Play the 1st, 2nd, 3rd... note of the chord"})]}),u.jsxs("div",{className:"flex items-center space-x-3 p-2 rounded-md bg-[#2a2f38]",children:[u.jsx("code",{className:"px-2 py-1 bg-gray-700 rounded text-xs font-mono text-white min-w-[4rem] text-center",children:"1↑, 2↑..."}),u.jsx("span",{className:"text-sm text-slate-300 text-left",children:"Play the note one octave higher"})]})]})]}),u.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:u.jsxs("div",{className:"p-4 rounded-lg bg-[#3d434f]/30",children:[u.jsx("h5",{className:"text-white font-semibold mb-3 text-sm text-left",children:"Pattern Controls"}),u.jsxs("div",{className:"space-y-2 text-sm text-left",children:[u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Add/Remove Steps:"})," Use the +/- buttons to change pattern length"]}),u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Pattern Presets:"})," Choose from pre-built patterns or create your own"]}),u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Timing:"})," Adjust BPM, subdivision, and swing feel"]})]})]})})]})}),u.jsx(Jn,{title:"Chord Explorer & Sequences",children:u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[u.jsxs("div",{className:"p-4 rounded-lg bg-[#3d434f]/30",children:[u.jsx("h5",{className:"text-white font-semibold mb-3 text-sm text-left",children:"Finding Chords"}),u.jsx("p",{className:"text-sm mb-3 text-left",children:"The Chord Explorer shows all chords that fit your selected key and mode. You can:"}),u.jsxs("div",{className:"space-y-2 text-sm text-left",children:[u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Filter by root note"})," to find specific chord types"]}),u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Search"})," for chord names or note combinations"]}),u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Click to preview"})," any chord"]}),u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Click ↓"})," to see the individual notes in a chord"]})]})]}),u.jsxs("div",{className:"p-4 rounded-lg bg-[#3d434f]/30",children:[u.jsx("h5",{className:"text-white font-semibold mb-3 text-sm text-left",children:"Building Sequences"}),u.jsxs("p",{className:"text-sm mb-3 text-left",children:["Add chords to your sequence using the ",u.jsx("span",{className:"text-green-400 font-bold",children:"+"})," button. Your chord sequence appears at the bottom where you can:"]}),u.jsxs("div",{className:"space-y-2 text-sm text-left",children:[u.jsx("div",{children:"Click any chord to play it immediately"}),u.jsx("div",{children:"Use numbers 1-9 to jump between chords"}),u.jsx("div",{children:"Toggle Delete mode to remove unwanted chords"}),u.jsx("div",{children:"Clear all chords to start fresh"}),u.jsxs("div",{children:[u.jsx("strong",{className:"text-blue-400",children:"Click the gear icon"})," to enter Edit mode and modify chords"]})]})]})]})}),u.jsx(Jn,{title:"Chord Editing",children:u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"p-4 rounded-lg bg-[#3d434f]/30",children:[u.jsx("h5",{className:"text-white font-semibold mb-3 text-sm text-left",children:"Edit Mode"}),u.jsxs("p",{className:"text-sm mb-3 text-left",children:["Click the ",u.jsx("span",{className:"text-blue-400 font-bold",children:"gear icon"})," next to your chord sequence to enter Edit Mode. In this mode, you can:"]}),u.jsxs("div",{className:"space-y-2 text-sm text-left",children:[u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Click any chord"})," to open the chord editor"]}),u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Modify chord voicings"})," by reordering notes"]}),u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Add slash chords"})," to change the bass note"]}),u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Preview changes"})," before saving them"]})]})]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[u.jsxs("div",{className:"p-4 rounded-lg bg-[#3d434f]/30",children:[u.jsx("h5",{className:"text-white font-semibold mb-3 text-sm text-left",children:"Slash Chords"}),u.jsx("p",{className:"text-sm mb-3 text-left",children:"Create slash chords (like C/E) by specifying a bass note:"}),u.jsxs("div",{className:"space-y-2 text-sm text-left",children:[u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Bass Note Field:"})," Enter a note name (e.g., E, Gb, C)"]}),u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Automatic Voicing:"})," The bass note moves to the lowest position"]}),u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Chord Name:"})," Updates to show the slash notation (C/E)"]}),u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Remove Bass:"})," Clear the field to return to original chord"]})]})]}),u.jsxs("div",{className:"p-4 rounded-lg bg-[#3d434f]/30",children:[u.jsx("h5",{className:"text-white font-semibold mb-3 text-sm text-left",children:"Note Reordering"}),u.jsx("p",{className:"text-sm mb-3 text-left",children:"Change the order of chord notes for different voicings:"}),u.jsxs("div",{className:"space-y-2 text-sm text-left",children:[u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Drag & Drop:"})," Drag notes to reorder them"]}),u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Arrow Buttons:"})," Use up/down arrows to move notes"]}),u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Auto-Detection:"})," Slash note updates automatically when you change the bass"]}),u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Visual Feedback:"})," Slash notes are highlighted in amber"]})]})]})]}),u.jsxs("div",{className:"p-4 rounded-lg bg-[#3d434f]/30",children:[u.jsx("h5",{className:"text-white font-semibold mb-3 text-sm text-left",children:"Editor Controls"}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[u.jsxs("div",{className:"space-y-2 text-sm text-left",children:[u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Preview:"})," Click the play button to hear your changes"]}),u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Save:"})," Green checkmark to confirm edits"]}),u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Cancel:"})," Discard changes and close editor"]})]}),u.jsxs("div",{className:"space-y-2 text-sm text-left",children:[u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Original Notes:"})," Editor preserves original chord voicing"]}),u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Real-time Updates:"})," Changes reflect immediately in the editor"]}),u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Full-screen:"})," Editor takes over the entire interface for focused editing"]})]})]})]})]})}),u.jsx(Jn,{title:"Live Mode",children:u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"p-4 rounded-lg bg-[#3d434f]/30",children:[u.jsx("h5",{className:"text-white font-semibold mb-3 text-sm text-left",children:"Performance Mode"}),u.jsx("p",{className:"text-sm mb-3 text-left",children:"Live Mode expands your chord sequence into a full-screen performance interface perfect for:"}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"flex items-start space-x-3 p-2 rounded-md bg-[#2a2f38]",children:[u.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-400 mt-2 flex-shrink-0"}),u.jsxs("div",{className:"text-sm text-left",children:[u.jsx("strong",{className:"text-white",children:"Live performance:"})," ",u.jsx("span",{className:"text-slate-300",children:"Large, touch-friendly chord buttons"})]})]}),u.jsxs("div",{className:"flex items-start space-x-3 p-2 rounded-md bg-[#2a2f38]",children:[u.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-400 mt-2 flex-shrink-0"}),u.jsxs("div",{className:"text-sm text-left",children:[u.jsx("strong",{className:"text-white",children:"Practice sessions:"})," ",u.jsx("span",{className:"text-slate-300",children:"Easy chord switching with visual feedback"})]})]}),u.jsxs("div",{className:"flex items-start space-x-3 p-2 rounded-md bg-[#2a2f38]",children:[u.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-400 mt-2 flex-shrink-0"}),u.jsxs("div",{className:"text-sm text-left",children:[u.jsx("strong",{className:"text-white",children:"Composition:"})," ",u.jsx("span",{className:"text-slate-300",children:"Hear chord progressions in real-time"})]})]})]})]}),u.jsxs("div",{className:"p-4 rounded-lg bg-[#3d434f]/30",children:[u.jsx("h5",{className:"text-white font-semibold mb-3 text-sm text-left",children:"Using Live Mode"}),u.jsxs("div",{className:"space-y-2 text-sm text-left",children:[u.jsx("div",{children:'Click "Expand" in the chord sequence to enter Live Mode'}),u.jsx("div",{children:"Use keyboard numbers 1-9 or click/tap chord buttons"}),u.jsx("div",{children:"The sequencer continues playing your patterns"}),u.jsx("div",{children:"Active chord is highlighted in blue"})]})]})]})}),u.jsxs(Jn,{title:"Interface Tips",children:[u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[u.jsx("div",{className:"space-y-4",children:u.jsxs("div",{className:"p-4 rounded-lg bg-[#3d434f]/30",children:[u.jsx("h5",{className:"text-white font-semibold mb-3 text-sm text-left",children:"Navigation"}),u.jsxs("div",{className:"space-y-2 text-sm text-left",children:[u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Sequencer Header:"})," Click to show/hide the pattern editor"]}),u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Settings Panels:"})," Most sections have expandable settings"]}),u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Status Indicators:"})," Top bar shows current key, mode, and playback status"]})]})]})}),u.jsx("div",{className:"space-y-4",children:u.jsxs("div",{className:"p-4 rounded-lg bg-[#3d434f]/30",children:[u.jsx("h5",{className:"text-white font-semibold mb-3 text-sm text-left",children:"Visual Feedback"}),u.jsxs("div",{className:"space-y-2 text-sm text-left",children:[u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Piano Keys:"})," Scale notes are highlighted in blue"]}),u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Chord Tones:"})," Active chord notes show in brighter colors"]}),u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Step Indicator:"})," Shows current position in the pattern"]}),u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Animations:"})," Visual feedback for chord changes and playback"]})]})]})})]}),u.jsxs("div",{className:"p-4 rounded-lg bg-[#3d434f]/30 mt-4",children:[u.jsx("h5",{className:"text-white font-semibold mb-3 text-sm text-left",children:"Responsive Design"}),u.jsx("p",{className:"text-sm text-left",children:"The interface adapts to different screen sizes. On mobile devices, some controls are simplified and touch-optimized for better usability."})]})]}),u.jsx(Jn,{title:"Troubleshooting",children:u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[u.jsxs("div",{className:"p-4 rounded-lg bg-[#3d434f]/30",children:[u.jsx("h5",{className:"text-white font-semibold mb-3 text-sm text-left",children:"Audio Issues"}),u.jsxs("div",{className:"space-y-2 text-sm text-left",children:[u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"No sound:"})," Check device volume and ensure audio isn't muted"]}),u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"iOS devices:"})," Tap any button first to initialize audio"]}),u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Distorted audio:"})," Lower the volume setting in piano controls"]})]})]}),u.jsxs("div",{className:"p-4 rounded-lg bg-[#3d434f]/30",children:[u.jsx("h5",{className:"text-white font-semibold mb-3 text-sm text-left",children:"Performance"}),u.jsxs("div",{className:"space-y-2 text-sm text-left",children:[u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Lag or glitches:"})," Close other browser tabs using audio"]}),u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Mobile performance:"})," Use lower reverb/effect settings for better performance"]})]})]})]})}),u.jsx("div",{className:"mt-8 pt-6 border-t border-gray-600/50",children:u.jsx("p",{className:"text-xs text-slate-400 text-left",children:"Need more help? Check the GitHub repository for detailed documentation and examples."})})]})}),cg=()=>{const[e,n]=b.useState(!1),[o,s]=b.useState(!1),[a,l]=b.useState(!1),d=b.useRef(null),f=b.useRef(null),p=Cn(),{key:m,mode:x}=p;b.useEffect(()=>{const w=C=>{d.current&&f.current&&!d.current.contains(C.target)&&!f.current.contains(C.target)&&l(!1)};return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]);const g=w=>{w(),l(!1)},y=()=>{s(!0)};return u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"bg-[#3d434f] border-b border-gray-600",children:u.jsx("div",{className:"relative",children:u.jsxs("div",{className:"flex items-center justify-between px-6 py-4",children:[u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsx($u,{className:"mt-2"}),u.jsx("div",{className:"flex items-center space-x-3",children:u.jsxs("div",{className:"flex flex-col items-start",children:[u.jsx("h1",{className:"text-xl font-bold text-blue-500 tracking-tight leading-none",children:"modal"}),u.jsxs("div",{className:"flex items-center space-x-0.5",children:[u.jsx("span",{className:"text-xs text-slate-400 font-medium uppercase tracking-widest",children:"chord"}),u.jsx("div",{className:"w-1 h-1 mr-[0.2em] bg-slate-400"}),u.jsx("span",{className:"text-xs text-slate-400 font-medium uppercase tracking-widest",children:"buildr"})]})]})})]}),u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsxs("div",{className:"hidden sm:flex items-center space-x-2 text-sm",children:[u.jsx("div",{className:"px-2 py-0.5 bg-[#444b59] border border-gray-600 rounded text-slate-300 font-mono",children:m}),u.jsx("div",{className:"w-px h-4 bg-slate-600"}),u.jsx("div",{className:"px-2 py-1 bg-[#444b59] border border-gray-600 rounded text-slate-300 text-xs font-mono",children:x})]}),u.jsxs("div",{className:"relative",children:[u.jsx("button",{ref:f,onClick:()=>l(!a),className:"w-9 h-9 flex items-center justify-center text-slate-400 hover:text-slate-200 hover:bg-[#4a5262] rounded-lg transition-all duration-200 border border-transparent hover:border-gray-600",title:"Menu",children:u.jsx(Tb,{className:"w-5 h-5"})}),a&&u.jsx("div",{ref:d,className:"absolute right-0 mt-2 w-64 bg-[#3d434f] border border-gray-600 rounded-lg shadow-xl z-50 overflow-hidden",children:u.jsxs("div",{className:"py-2",children:[u.jsxs("button",{onClick:()=>g(()=>n(!0)),className:"w-full px-4 py-2.5 text-left flex items-center space-x-3 text-slate-400 hover:text-slate-200 hover:bg-[#4a5262] transition-all duration-150",children:[u.jsx(Mb,{className:"w-4 h-4 flex-shrink-0"}),u.jsx("span",{className:"text-sm font-medium",children:"About"})]}),u.jsxs("button",{onClick:()=>g(()=>s(!0)),className:"w-full px-4 py-2.5 text-left flex items-center space-x-3 text-slate-400 hover:text-slate-200 hover:bg-[#4a5262] transition-all duration-150",children:[u.jsx(yg,{className:"w-4 h-4 flex-shrink-0"}),u.jsx("span",{className:"text-sm font-medium",children:"Help"})]})]})})]})]})]})})}),u.jsx(N5,{isOpen:e,onClose:()=>n(!1),onOpenHelp:y}),u.jsx(C5,{isOpen:o,onClose:()=>s(!1)})]})},S5=(e,n,o,s)=>e?s:n!==null&&o[n]?.pattern?o[n].pattern:s,E5=()=>{const{globalPatternState:e,currentlyActivePattern:n}=Ro(),{temporaryChord:o,activeChordIndex:s,addedChords:a}=Bn(),{isPlaying:l,bpm:d,currentStep:f}=e,p=b.useMemo(()=>S5(o,s,a,n),[o,s,a,n]);if(!l)return null;const m=p.length>0?p.length:1,x=f%m+1;return u.jsx("div",{className:"w-full px-2 mx-auto items-center",children:u.jsx("div",{className:"px-6 py-3 bg-green-900 bg-opacity-50 rounded-lg border border-green-700 w-full max-w-7xl mx-auto",children:u.jsxs("div",{className:"text-sm text-green-300 flex items-center justify-center space-x-4",children:[u.jsxs("div",{className:"flex items-center",children:[u.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse mr-2"}),u.jsx("span",{className:"font-medium",children:"Sequencer Active"})]}),u.jsxs("div",{className:"text-xs opacity-80",children:["Pattern: ",p.join("-")," |",` ${d}`," BPM | Step ",x,"/",m,o&&u.jsxs("span",{className:"ml-2 text-yellow-300",children:["• ",o.name]}),!o&&s!==null&&u.jsxs("span",{className:"ml-2 text-purple-300",children:["• ",a[s]?.name]}),!o&&s===null&&u.jsx("span",{className:"ml-2 text-cyan-300",children:"• Global pattern"})]})]})})})};function D5(){const{isLiveMode:e,handleChordClick:n,addChordClick:o}=yb(),s=b.useRef(null),a=b.useRef(!1),[l,d]=b.useState(!1),f=b.useRef(!1),p=b.useRef(null),m=b.useCallback(()=>{const g=window.innerHeight,y=parseFloat(getComputedStyle(document.documentElement).fontSize),w=g<35*y;w!==f.current&&(f.current=w,d(w),setTimeout(()=>{p.current&&(p.current.style.overflow="hidden",p.current.offsetHeight,p.current.style.overflow="auto")},50))},[]);b.useEffect(()=>{let g;const y=()=>{clearTimeout(g),g=setTimeout(m,100)},w=()=>{setTimeout(()=>{if(m(),p.current&&/Mobi|Android/i.test(navigator.userAgent)){const C=p.current;C.style.overflowY="hidden",C.style.touchAction="pan-y",C.offsetHeight,C.style.overflowY="auto",C.style.WebkitOverflowScrolling="touch"}},250)};return m(),window.addEventListener("resize",y,{passive:!0}),window.addEventListener("orientationchange",w,{passive:!0}),()=>{clearTimeout(g),window.removeEventListener("resize",y),window.removeEventListener("orientationchange",w)}},[m]),b.useEffect(()=>{if(p.current){const g=p.current;g.style.WebkitOverflowScrolling="touch",g.style.touchAction="pan-y",g.style.overscrollBehavior="contain"}},[l]);const x=async()=>{if(!a.current)try{await s.current?.play(),a.current=!0,document.removeEventListener("touchstart",x),document.removeEventListener("mousedown",x),document.removeEventListener("click",x)}catch(g){console.error("failed to initialize audio:",g)}};return b.useEffect(()=>(document.addEventListener("touchstart",x),document.addEventListener("mousedown",x),document.addEventListener("click",x),()=>{document.removeEventListener("touchstart",x),document.removeEventListener("mousedown",x),document.removeEventListener("click",x)}),[]),u.jsxs("div",{className:"select-none text-center bg-[#282c34] min-h-screen h-screen w-screen overflow-hidden flex flex-col",children:[u.jsx("audio",{ref:s,preload:"auto",children:u.jsx("source",{src:"/silence.mp3",type:"audio/mp3"})}),!l&&u.jsx("div",{className:"flex-shrink-0",children:u.jsx(cg,{})}),u.jsxs("div",{ref:p,className:"flex-1 overflow-y-auto flex flex-col",style:{WebkitOverflowScrolling:"touch",touchAction:"pan-y",overscrollBehavior:"contain"},children:[l&&u.jsx("div",{className:"flex-shrink-0",children:u.jsx(cg,{})}),u.jsxs("div",{className:`flex flex-col items-center justify-start text-[calc(10px+2vmin)] text-white p-4 space-y-4x pb-32 ${l?"":"mt-2"} ${e?"pointer-events-none opacity-30":""}`,children:[u.jsx("div",{className:"w-full max-w-7xl mb-6",children:u.jsx(K1,{hideConfigControls:!0})}),u.jsx(w5,{}),u.jsx(Z1,{}),u.jsx(E5,{}),u.jsx("div",{className:"w-full max-w-7xl mb-20 mt-4",children:u.jsx(Xb,{onChordClick:n,addChordClick:o})})]})]}),u.jsx("div",{className:"flex-shrink-0",children:u.jsx(x5,{})})]})}dy.createRoot(document.getElementById("root")).render(u.jsx(we.StrictMode,{children:u.jsx(D5,{})}));
