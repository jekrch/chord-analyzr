(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function r(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(i){if(i.ep)return;i.ep=!0;const a=r(i);fetch(i.href,a)}})();var Ur=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function br(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function kv(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var n=e.default;if(typeof n=="function"){var r=function s(){var i=!1;try{i=this instanceof s}catch{}return i?Reflect.construct(n,arguments,this.constructor):n.apply(this,arguments)};r.prototype=n.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(s){var i=Object.getOwnPropertyDescriptor(e,s);Object.defineProperty(r,s,i.get?i:{enumerable:!0,get:function(){return e[s]}})}),r}var zc={exports:{}},ks={},Wc={exports:{}},Me={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zm;function P0(){if(Zm)return Me;Zm=1;var e=Symbol.for("react.element"),n=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),g=Symbol.iterator;function y(I){return I===null||typeof I!="object"?null:(I=g&&I[g]||I["@@iterator"],typeof I=="function"?I:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,E={};function C(I,L,G){this.props=I,this.context=L,this.refs=E,this.updater=G||b}C.prototype.isReactComponent={},C.prototype.setState=function(I,L){if(typeof I!="object"&&typeof I!="function"&&I!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,I,L,"setState")},C.prototype.forceUpdate=function(I){this.updater.enqueueForceUpdate(this,I,"forceUpdate")};function j(){}j.prototype=C.prototype;function P(I,L,G){this.props=I,this.context=L,this.refs=E,this.updater=G||b}var A=P.prototype=new j;A.constructor=P,w(A,C.prototype),A.isPureReactComponent=!0;var D=Array.isArray,k=Object.prototype.hasOwnProperty,R={current:null},O={key:!0,ref:!0,__self:!0,__source:!0};function M(I,L,G){var ee,ue={},fe=null,Ee=null;if(L!=null)for(ee in L.ref!==void 0&&(Ee=L.ref),L.key!==void 0&&(fe=""+L.key),L)k.call(L,ee)&&!O.hasOwnProperty(ee)&&(ue[ee]=L[ee]);var pe=arguments.length-2;if(pe===1)ue.children=G;else if(1<pe){for(var Ne=Array(pe),be=0;be<pe;be++)Ne[be]=arguments[be+2];ue.children=Ne}if(I&&I.defaultProps)for(ee in pe=I.defaultProps,pe)ue[ee]===void 0&&(ue[ee]=pe[ee]);return{$$typeof:e,type:I,key:fe,ref:Ee,props:ue,_owner:R.current}}function q(I,L){return{$$typeof:e,type:I.type,key:L,ref:I.ref,props:I.props,_owner:I._owner}}function te(I){return typeof I=="object"&&I!==null&&I.$$typeof===e}function oe(I){var L={"=":"=0",":":"=2"};return"$"+I.replace(/[=:]/g,function(G){return L[G]})}var Z=/\/+/g;function Q(I,L){return typeof I=="object"&&I!==null&&I.key!=null?oe(""+I.key):L.toString(36)}function se(I,L,G,ee,ue){var fe=typeof I;(fe==="undefined"||fe==="boolean")&&(I=null);var Ee=!1;if(I===null)Ee=!0;else switch(fe){case"string":case"number":Ee=!0;break;case"object":switch(I.$$typeof){case e:case n:Ee=!0}}if(Ee)return Ee=I,ue=ue(Ee),I=ee===""?"."+Q(Ee,0):ee,D(ue)?(G="",I!=null&&(G=I.replace(Z,"$&/")+"/"),se(ue,L,G,"",function(be){return be})):ue!=null&&(te(ue)&&(ue=q(ue,G+(!ue.key||Ee&&Ee.key===ue.key?"":(""+ue.key).replace(Z,"$&/")+"/")+I)),L.push(ue)),1;if(Ee=0,ee=ee===""?".":ee+":",D(I))for(var pe=0;pe<I.length;pe++){fe=I[pe];var Ne=ee+Q(fe,pe);Ee+=se(fe,L,G,Ne,ue)}else if(Ne=y(I),typeof Ne=="function")for(I=Ne.call(I),pe=0;!(fe=I.next()).done;)fe=fe.value,Ne=ee+Q(fe,pe++),Ee+=se(fe,L,G,Ne,ue);else if(fe==="object")throw L=String(I),Error("Objects are not valid as a React child (found: "+(L==="[object Object]"?"object with keys {"+Object.keys(I).join(", ")+"}":L)+"). If you meant to render a collection of children, use an array instead.");return Ee}function K(I,L,G){if(I==null)return I;var ee=[],ue=0;return se(I,ee,"","",function(fe){return L.call(G,fe,ue++)}),ee}function J(I){if(I._status===-1){var L=I._result;L=L(),L.then(function(G){(I._status===0||I._status===-1)&&(I._status=1,I._result=G)},function(G){(I._status===0||I._status===-1)&&(I._status=2,I._result=G)}),I._status===-1&&(I._status=0,I._result=L)}if(I._status===1)return I._result.default;throw I._result}var re={current:null},W={transition:null},$={ReactCurrentDispatcher:re,ReactCurrentBatchConfig:W,ReactCurrentOwner:R};function _(){throw Error("act(...) is not supported in production builds of React.")}return Me.Children={map:K,forEach:function(I,L,G){K(I,function(){L.apply(this,arguments)},G)},count:function(I){var L=0;return K(I,function(){L++}),L},toArray:function(I){return K(I,function(L){return L})||[]},only:function(I){if(!te(I))throw Error("React.Children.only expected to receive a single React element child.");return I}},Me.Component=C,Me.Fragment=r,Me.Profiler=i,Me.PureComponent=P,Me.StrictMode=s,Me.Suspense=h,Me.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$,Me.act=_,Me.cloneElement=function(I,L,G){if(I==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+I+".");var ee=w({},I.props),ue=I.key,fe=I.ref,Ee=I._owner;if(L!=null){if(L.ref!==void 0&&(fe=L.ref,Ee=R.current),L.key!==void 0&&(ue=""+L.key),I.type&&I.type.defaultProps)var pe=I.type.defaultProps;for(Ne in L)k.call(L,Ne)&&!O.hasOwnProperty(Ne)&&(ee[Ne]=L[Ne]===void 0&&pe!==void 0?pe[Ne]:L[Ne])}var Ne=arguments.length-2;if(Ne===1)ee.children=G;else if(1<Ne){pe=Array(Ne);for(var be=0;be<Ne;be++)pe[be]=arguments[be+2];ee.children=pe}return{$$typeof:e,type:I.type,key:ue,ref:fe,props:ee,_owner:Ee}},Me.createContext=function(I){return I={$$typeof:c,_currentValue:I,_currentValue2:I,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},I.Provider={$$typeof:a,_context:I},I.Consumer=I},Me.createElement=M,Me.createFactory=function(I){var L=M.bind(null,I);return L.type=I,L},Me.createRef=function(){return{current:null}},Me.forwardRef=function(I){return{$$typeof:d,render:I}},Me.isValidElement=te,Me.lazy=function(I){return{$$typeof:p,_payload:{_status:-1,_result:I},_init:J}},Me.memo=function(I,L){return{$$typeof:m,type:I,compare:L===void 0?null:L}},Me.startTransition=function(I){var L=W.transition;W.transition={};try{I()}finally{W.transition=L}},Me.unstable_act=_,Me.useCallback=function(I,L){return re.current.useCallback(I,L)},Me.useContext=function(I){return re.current.useContext(I)},Me.useDebugValue=function(){},Me.useDeferredValue=function(I){return re.current.useDeferredValue(I)},Me.useEffect=function(I,L){return re.current.useEffect(I,L)},Me.useId=function(){return re.current.useId()},Me.useImperativeHandle=function(I,L,G){return re.current.useImperativeHandle(I,L,G)},Me.useInsertionEffect=function(I,L){return re.current.useInsertionEffect(I,L)},Me.useLayoutEffect=function(I,L){return re.current.useLayoutEffect(I,L)},Me.useMemo=function(I,L){return re.current.useMemo(I,L)},Me.useReducer=function(I,L,G){return re.current.useReducer(I,L,G)},Me.useRef=function(I){return re.current.useRef(I)},Me.useState=function(I){return re.current.useState(I)},Me.useSyncExternalStore=function(I,L,G){return re.current.useSyncExternalStore(I,L,G)},Me.useTransition=function(){return re.current.useTransition()},Me.version="18.3.1",Me}var ep;function qa(){return ep||(ep=1,Wc.exports=P0()),Wc.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tp;function T0(){if(tp)return ks;tp=1;var e=qa(),n=Symbol.for("react.element"),r=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,i=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function c(d,h,m){var p,g={},y=null,b=null;m!==void 0&&(y=""+m),h.key!==void 0&&(y=""+h.key),h.ref!==void 0&&(b=h.ref);for(p in h)s.call(h,p)&&!a.hasOwnProperty(p)&&(g[p]=h[p]);if(d&&d.defaultProps)for(p in h=d.defaultProps,h)g[p]===void 0&&(g[p]=h[p]);return{$$typeof:n,type:d,key:y,ref:b,props:g,_owner:i.current}}return ks.Fragment=r,ks.jsx=c,ks.jsxs=c,ks}var np;function R0(){return np||(np=1,zc.exports=T0()),zc.exports}var u=R0(),N=qa();const ve=br(N);var xa={},Hc={exports:{}},un={},qc={exports:{}},Kc={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rp;function M0(){return rp||(rp=1,function(e){function n(W,$){var _=W.length;W.push($);e:for(;0<_;){var I=_-1>>>1,L=W[I];if(0<i(L,$))W[I]=$,W[_]=L,_=I;else break e}}function r(W){return W.length===0?null:W[0]}function s(W){if(W.length===0)return null;var $=W[0],_=W.pop();if(_!==$){W[0]=_;e:for(var I=0,L=W.length,G=L>>>1;I<G;){var ee=2*(I+1)-1,ue=W[ee],fe=ee+1,Ee=W[fe];if(0>i(ue,_))fe<L&&0>i(Ee,ue)?(W[I]=Ee,W[fe]=_,I=fe):(W[I]=ue,W[ee]=_,I=ee);else if(fe<L&&0>i(Ee,_))W[I]=Ee,W[fe]=_,I=fe;else break e}}return $}function i(W,$){var _=W.sortIndex-$.sortIndex;return _!==0?_:W.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var c=Date,d=c.now();e.unstable_now=function(){return c.now()-d}}var h=[],m=[],p=1,g=null,y=3,b=!1,w=!1,E=!1,C=typeof setTimeout=="function"?setTimeout:null,j=typeof clearTimeout=="function"?clearTimeout:null,P=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function A(W){for(var $=r(m);$!==null;){if($.callback===null)s(m);else if($.startTime<=W)s(m),$.sortIndex=$.expirationTime,n(h,$);else break;$=r(m)}}function D(W){if(E=!1,A(W),!w)if(r(h)!==null)w=!0,J(k);else{var $=r(m);$!==null&&re(D,$.startTime-W)}}function k(W,$){w=!1,E&&(E=!1,j(M),M=-1),b=!0;var _=y;try{for(A($),g=r(h);g!==null&&(!(g.expirationTime>$)||W&&!oe());){var I=g.callback;if(typeof I=="function"){g.callback=null,y=g.priorityLevel;var L=I(g.expirationTime<=$);$=e.unstable_now(),typeof L=="function"?g.callback=L:g===r(h)&&s(h),A($)}else s(h);g=r(h)}if(g!==null)var G=!0;else{var ee=r(m);ee!==null&&re(D,ee.startTime-$),G=!1}return G}finally{g=null,y=_,b=!1}}var R=!1,O=null,M=-1,q=5,te=-1;function oe(){return!(e.unstable_now()-te<q)}function Z(){if(O!==null){var W=e.unstable_now();te=W;var $=!0;try{$=O(!0,W)}finally{$?Q():(R=!1,O=null)}}else R=!1}var Q;if(typeof P=="function")Q=function(){P(Z)};else if(typeof MessageChannel<"u"){var se=new MessageChannel,K=se.port2;se.port1.onmessage=Z,Q=function(){K.postMessage(null)}}else Q=function(){C(Z,0)};function J(W){O=W,R||(R=!0,Q())}function re(W,$){M=C(function(){W(e.unstable_now())},$)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(W){W.callback=null},e.unstable_continueExecution=function(){w||b||(w=!0,J(k))},e.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):q=0<W?Math.floor(1e3/W):5},e.unstable_getCurrentPriorityLevel=function(){return y},e.unstable_getFirstCallbackNode=function(){return r(h)},e.unstable_next=function(W){switch(y){case 1:case 2:case 3:var $=3;break;default:$=y}var _=y;y=$;try{return W()}finally{y=_}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(W,$){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var _=y;y=W;try{return $()}finally{y=_}},e.unstable_scheduleCallback=function(W,$,_){var I=e.unstable_now();switch(typeof _=="object"&&_!==null?(_=_.delay,_=typeof _=="number"&&0<_?I+_:I):_=I,W){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=_+L,W={id:p++,callback:$,priorityLevel:W,startTime:_,expirationTime:L,sortIndex:-1},_>I?(W.sortIndex=_,n(m,W),r(h)===null&&W===r(m)&&(E?(j(M),M=-1):E=!0,re(D,_-I))):(W.sortIndex=L,n(h,W),w||b||(w=!0,J(k))),W},e.unstable_shouldYield=oe,e.unstable_wrapCallback=function(W){var $=y;return function(){var _=y;y=$;try{return W.apply(this,arguments)}finally{y=_}}}}(Kc)),Kc}var op;function O0(){return op||(op=1,qc.exports=M0()),qc.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sp;function _0(){if(sp)return un;sp=1;var e=qa(),n=O0();function r(t){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+t,l=1;l<arguments.length;l++)o+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+t+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,i={};function a(t,o){c(t,o),c(t+"Capture",o)}function c(t,o){for(i[t]=o,t=0;t<o.length;t++)s.add(o[t])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},g={};function y(t){return h.call(g,t)?!0:h.call(p,t)?!1:m.test(t)?g[t]=!0:(p[t]=!0,!1)}function b(t,o,l,f){if(l!==null&&l.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return f?!1:l!==null?!l.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function w(t,o,l,f){if(o===null||typeof o>"u"||b(t,o,l,f))return!0;if(f)return!1;if(l!==null)switch(l.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function E(t,o,l,f,v,x,S){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=f,this.attributeNamespace=v,this.mustUseProperty=l,this.propertyName=t,this.type=o,this.sanitizeURL=x,this.removeEmptyString=S}var C={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){C[t]=new E(t,0,!1,t,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var o=t[0];C[o]=new E(o,1,!1,t[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){C[t]=new E(t,2,!1,t.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){C[t]=new E(t,2,!1,t,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){C[t]=new E(t,3,!1,t.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(t){C[t]=new E(t,3,!0,t,null,!1,!1)}),["capture","download"].forEach(function(t){C[t]=new E(t,4,!1,t,null,!1,!1)}),["cols","rows","size","span"].forEach(function(t){C[t]=new E(t,6,!1,t,null,!1,!1)}),["rowSpan","start"].forEach(function(t){C[t]=new E(t,5,!1,t.toLowerCase(),null,!1,!1)});var j=/[\-:]([a-z])/g;function P(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var o=t.replace(j,P);C[o]=new E(o,1,!1,t,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var o=t.replace(j,P);C[o]=new E(o,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(t){var o=t.replace(j,P);C[o]=new E(o,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(t){C[t]=new E(t,1,!1,t.toLowerCase(),null,!1,!1)}),C.xlinkHref=new E("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(t){C[t]=new E(t,1,!1,t.toLowerCase(),null,!0,!0)});function A(t,o,l,f){var v=C.hasOwnProperty(o)?C[o]:null;(v!==null?v.type!==0:f||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(w(o,l,v,f)&&(l=null),f||v===null?y(o)&&(l===null?t.removeAttribute(o):t.setAttribute(o,""+l)):v.mustUseProperty?t[v.propertyName]=l===null?v.type===3?!1:"":l:(o=v.attributeName,f=v.attributeNamespace,l===null?t.removeAttribute(o):(v=v.type,l=v===3||v===4&&l===!0?"":""+l,f?t.setAttributeNS(f,o,l):t.setAttribute(o,l))))}var D=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,k=Symbol.for("react.element"),R=Symbol.for("react.portal"),O=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),q=Symbol.for("react.profiler"),te=Symbol.for("react.provider"),oe=Symbol.for("react.context"),Z=Symbol.for("react.forward_ref"),Q=Symbol.for("react.suspense"),se=Symbol.for("react.suspense_list"),K=Symbol.for("react.memo"),J=Symbol.for("react.lazy"),re=Symbol.for("react.offscreen"),W=Symbol.iterator;function $(t){return t===null||typeof t!="object"?null:(t=W&&t[W]||t["@@iterator"],typeof t=="function"?t:null)}var _=Object.assign,I;function L(t){if(I===void 0)try{throw Error()}catch(l){var o=l.stack.trim().match(/\n( *(at )?)/);I=o&&o[1]||""}return`
`+I+t}var G=!1;function ee(t,o){if(!t||G)return"";G=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(X){var f=X}Reflect.construct(t,[],o)}else{try{o.call()}catch(X){f=X}t.call(o.prototype)}else{try{throw Error()}catch(X){f=X}t()}}catch(X){if(X&&f&&typeof X.stack=="string"){for(var v=X.stack.split(`
`),x=f.stack.split(`
`),S=v.length-1,T=x.length-1;1<=S&&0<=T&&v[S]!==x[T];)T--;for(;1<=S&&0<=T;S--,T--)if(v[S]!==x[T]){if(S!==1||T!==1)do if(S--,T--,0>T||v[S]!==x[T]){var F=`
`+v[S].replace(" at new "," at ");return t.displayName&&F.includes("<anonymous>")&&(F=F.replace("<anonymous>",t.displayName)),F}while(1<=S&&0<=T);break}}}finally{G=!1,Error.prepareStackTrace=l}return(t=t?t.displayName||t.name:"")?L(t):""}function ue(t){switch(t.tag){case 5:return L(t.type);case 16:return L("Lazy");case 13:return L("Suspense");case 19:return L("SuspenseList");case 0:case 2:case 15:return t=ee(t.type,!1),t;case 11:return t=ee(t.type.render,!1),t;case 1:return t=ee(t.type,!0),t;default:return""}}function fe(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case O:return"Fragment";case R:return"Portal";case q:return"Profiler";case M:return"StrictMode";case Q:return"Suspense";case se:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case oe:return(t.displayName||"Context")+".Consumer";case te:return(t._context.displayName||"Context")+".Provider";case Z:var o=t.render;return t=t.displayName,t||(t=o.displayName||o.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case K:return o=t.displayName||null,o!==null?o:fe(t.type)||"Memo";case J:o=t._payload,t=t._init;try{return fe(t(o))}catch{}}return null}function Ee(t){var o=t.type;switch(t.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=o.render,t=t.displayName||t.name||"",o.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return fe(o);case 8:return o===M?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function pe(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Ne(t){var o=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function be(t){var o=Ne(t)?"checked":"value",l=Object.getOwnPropertyDescriptor(t.constructor.prototype,o),f=""+t[o];if(!t.hasOwnProperty(o)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var v=l.get,x=l.set;return Object.defineProperty(t,o,{configurable:!0,get:function(){return v.call(this)},set:function(S){f=""+S,x.call(this,S)}}),Object.defineProperty(t,o,{enumerable:l.enumerable}),{getValue:function(){return f},setValue:function(S){f=""+S},stopTracking:function(){t._valueTracker=null,delete t[o]}}}}function nt(t){t._valueTracker||(t._valueTracker=be(t))}function Ie(t){if(!t)return!1;var o=t._valueTracker;if(!o)return!0;var l=o.getValue(),f="";return t&&(f=Ne(t)?t.checked?"true":"false":t.value),t=f,t!==l?(o.setValue(t),!0):!1}function Xe(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Ce(t,o){var l=o.checked;return _({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l??t._wrapperState.initialChecked})}function ze(t,o){var l=o.defaultValue==null?"":o.defaultValue,f=o.checked!=null?o.checked:o.defaultChecked;l=pe(o.value!=null?o.value:l),t._wrapperState={initialChecked:f,initialValue:l,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function Je(t,o){o=o.checked,o!=null&&A(t,"checked",o,!1)}function Ct(t,o){Je(t,o);var l=pe(o.value),f=o.type;if(l!=null)f==="number"?(l===0&&t.value===""||t.value!=l)&&(t.value=""+l):t.value!==""+l&&(t.value=""+l);else if(f==="submit"||f==="reset"){t.removeAttribute("value");return}o.hasOwnProperty("value")?Tt(t,o.type,l):o.hasOwnProperty("defaultValue")&&Tt(t,o.type,pe(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(t.defaultChecked=!!o.defaultChecked)}function Wt(t,o,l){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var f=o.type;if(!(f!=="submit"&&f!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+t._wrapperState.initialValue,l||o===t.value||(t.value=o),t.defaultValue=o}l=t.name,l!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,l!==""&&(t.name=l)}function Tt(t,o,l){(o!=="number"||Xe(t.ownerDocument)!==t)&&(l==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+l&&(t.defaultValue=""+l))}var st=Array.isArray;function et(t,o,l,f){if(t=t.options,o){o={};for(var v=0;v<l.length;v++)o["$"+l[v]]=!0;for(l=0;l<t.length;l++)v=o.hasOwnProperty("$"+t[l].value),t[l].selected!==v&&(t[l].selected=v),v&&f&&(t[l].defaultSelected=!0)}else{for(l=""+pe(l),o=null,v=0;v<t.length;v++){if(t[v].value===l){t[v].selected=!0,f&&(t[v].defaultSelected=!0);return}o!==null||t[v].disabled||(o=t[v])}o!==null&&(o.selected=!0)}}function We(t,o){if(o.dangerouslySetInnerHTML!=null)throw Error(r(91));return _({},o,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function ut(t,o){var l=o.value;if(l==null){if(l=o.children,o=o.defaultValue,l!=null){if(o!=null)throw Error(r(92));if(st(l)){if(1<l.length)throw Error(r(93));l=l[0]}o=l}o==null&&(o=""),l=o}t._wrapperState={initialValue:pe(l)}}function yt(t,o){var l=pe(o.value),f=pe(o.defaultValue);l!=null&&(l=""+l,l!==t.value&&(t.value=l),o.defaultValue==null&&t.defaultValue!==l&&(t.defaultValue=l)),f!=null&&(t.defaultValue=""+f)}function gn(t){var o=t.textContent;o===t._wrapperState.initialValue&&o!==""&&o!==null&&(t.value=o)}function Ht(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Y(t,o){return t==null||t==="http://www.w3.org/1999/xhtml"?Ht(o):t==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Te,Ge=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,l,f,v){MSApp.execUnsafeLocalFunction(function(){return t(o,l,f,v)})}:t}(function(t,o){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=o;else{for(Te=Te||document.createElement("div"),Te.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=Te.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;o.firstChild;)t.appendChild(o.firstChild)}});function Le(t,o){if(o){var l=t.firstChild;if(l&&l===t.lastChild&&l.nodeType===3){l.nodeValue=o;return}}t.textContent=o}var He={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},jn=["Webkit","ms","Moz","O"];Object.keys(He).forEach(function(t){jn.forEach(function(o){o=o+t.charAt(0).toUpperCase()+t.substring(1),He[o]=He[t]})});function Zt(t,o,l){return o==null||typeof o=="boolean"||o===""?"":l||typeof o!="number"||o===0||He.hasOwnProperty(t)&&He[t]?(""+o).trim():o+"px"}function en(t,o){t=t.style;for(var l in o)if(o.hasOwnProperty(l)){var f=l.indexOf("--")===0,v=Zt(l,o[l],f);l==="float"&&(l="cssFloat"),f?t.setProperty(l,v):t[l]=v}}var qt=_({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function An(t,o){if(o){if(qt[t]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(r(137,t));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(r(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(r(61))}if(o.style!=null&&typeof o.style!="object")throw Error(r(62))}}function Lt(t,o){if(t.indexOf("-")===-1)return typeof o.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var St=null;function vn(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var kn=null,tn=null,V=null;function ne(t){if(t=ms(t)){if(typeof kn!="function")throw Error(r(280));var o=t.stateNode;o&&(o=Mi(o),kn(t.stateNode,t.type,o))}}function he(t){tn?V?V.push(t):V=[t]:tn=t}function Pe(){if(tn){var t=tn,o=V;if(V=tn=null,ne(t),o)for(t=0;t<o.length;t++)ne(o[t])}}function Ue(t,o){return t(o)}function qe(){}var dt=!1;function Kt(t,o,l){if(dt)return t(o,l);dt=!0;try{return Ue(t,o,l)}finally{dt=!1,(tn!==null||V!==null)&&(qe(),Pe())}}function Ze(t,o){var l=t.stateNode;if(l===null)return null;var f=Mi(l);if(f===null)return null;l=f[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(t=t.type,f=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!f;break e;default:t=!1}if(t)return null;if(l&&typeof l!="function")throw Error(r(231,o,typeof l));return l}var nn=!1;if(d)try{var ft={};Object.defineProperty(ft,"passive",{get:function(){nn=!0}}),window.addEventListener("test",ft,ft),window.removeEventListener("test",ft,ft)}catch{nn=!1}function Ft(t,o,l,f,v,x,S,T,F){var X=Array.prototype.slice.call(arguments,3);try{o.apply(l,X)}catch(ae){this.onError(ae)}}var rn=!1,Qn=null,yn=!1,cr=null,Yo={onError:function(t){rn=!0,Qn=t}};function Bx(t,o,l,f,v,x,S,T,F){rn=!1,Qn=null,Ft.apply(Yo,arguments)}function $x(t,o,l,f,v,x,S,T,F){if(Bx.apply(this,arguments),rn){if(rn){var X=Qn;rn=!1,Qn=null}else throw Error(r(198));yn||(yn=!0,cr=X)}}function Kr(t){var o=t,l=t;if(t.alternate)for(;o.return;)o=o.return;else{t=o;do o=t,(o.flags&4098)!==0&&(l=o.return),t=o.return;while(t)}return o.tag===3?l:null}function wf(t){if(t.tag===13){var o=t.memoizedState;if(o===null&&(t=t.alternate,t!==null&&(o=t.memoizedState)),o!==null)return o.dehydrated}return null}function Cf(t){if(Kr(t)!==t)throw Error(r(188))}function Gx(t){var o=t.alternate;if(!o){if(o=Kr(t),o===null)throw Error(r(188));return o!==t?null:t}for(var l=t,f=o;;){var v=l.return;if(v===null)break;var x=v.alternate;if(x===null){if(f=v.return,f!==null){l=f;continue}break}if(v.child===x.child){for(x=v.child;x;){if(x===l)return Cf(v),t;if(x===f)return Cf(v),o;x=x.sibling}throw Error(r(188))}if(l.return!==f.return)l=v,f=x;else{for(var S=!1,T=v.child;T;){if(T===l){S=!0,l=v,f=x;break}if(T===f){S=!0,f=v,l=x;break}T=T.sibling}if(!S){for(T=x.child;T;){if(T===l){S=!0,l=x,f=v;break}if(T===f){S=!0,f=x,l=v;break}T=T.sibling}if(!S)throw Error(r(189))}}if(l.alternate!==f)throw Error(r(190))}if(l.tag!==3)throw Error(r(188));return l.stateNode.current===l?t:o}function Sf(t){return t=Gx(t),t!==null?Ef(t):null}function Ef(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var o=Ef(t);if(o!==null)return o;t=t.sibling}return null}var Df=n.unstable_scheduleCallback,jf=n.unstable_cancelCallback,Ux=n.unstable_shouldYield,Vx=n.unstable_requestPaint,gt=n.unstable_now,zx=n.unstable_getCurrentPriorityLevel,ul=n.unstable_ImmediatePriority,Af=n.unstable_UserBlockingPriority,mi=n.unstable_NormalPriority,Wx=n.unstable_LowPriority,kf=n.unstable_IdlePriority,pi=null,Xn=null;function Hx(t){if(Xn&&typeof Xn.onCommitFiberRoot=="function")try{Xn.onCommitFiberRoot(pi,t,void 0,(t.current.flags&128)===128)}catch{}}var Gn=Math.clz32?Math.clz32:Yx,qx=Math.log,Kx=Math.LN2;function Yx(t){return t>>>=0,t===0?32:31-(qx(t)/Kx|0)|0}var gi=64,vi=4194304;function Qo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function yi(t,o){var l=t.pendingLanes;if(l===0)return 0;var f=0,v=t.suspendedLanes,x=t.pingedLanes,S=l&268435455;if(S!==0){var T=S&~v;T!==0?f=Qo(T):(x&=S,x!==0&&(f=Qo(x)))}else S=l&~v,S!==0?f=Qo(S):x!==0&&(f=Qo(x));if(f===0)return 0;if(o!==0&&o!==f&&(o&v)===0&&(v=f&-f,x=o&-o,v>=x||v===16&&(x&4194240)!==0))return o;if((f&4)!==0&&(f|=l&16),o=t.entangledLanes,o!==0)for(t=t.entanglements,o&=f;0<o;)l=31-Gn(o),v=1<<l,f|=t[l],o&=~v;return f}function Qx(t,o){switch(t){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Xx(t,o){for(var l=t.suspendedLanes,f=t.pingedLanes,v=t.expirationTimes,x=t.pendingLanes;0<x;){var S=31-Gn(x),T=1<<S,F=v[S];F===-1?((T&l)===0||(T&f)!==0)&&(v[S]=Qx(T,o)):F<=o&&(t.expiredLanes|=T),x&=~T}}function dl(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function If(){var t=gi;return gi<<=1,(gi&4194240)===0&&(gi=64),t}function fl(t){for(var o=[],l=0;31>l;l++)o.push(t);return o}function Xo(t,o,l){t.pendingLanes|=o,o!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,o=31-Gn(o),t[o]=l}function Jx(t,o){var l=t.pendingLanes&~o;t.pendingLanes=o,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=o,t.mutableReadLanes&=o,t.entangledLanes&=o,o=t.entanglements;var f=t.eventTimes;for(t=t.expirationTimes;0<l;){var v=31-Gn(l),x=1<<v;o[v]=0,f[v]=-1,t[v]=-1,l&=~x}}function hl(t,o){var l=t.entangledLanes|=o;for(t=t.entanglements;l;){var f=31-Gn(l),v=1<<f;v&o|t[f]&o&&(t[f]|=o),l&=~v}}var Ye=0;function Pf(t){return t&=-t,1<t?4<t?(t&268435455)!==0?16:536870912:4:1}var Tf,ml,Rf,Mf,Of,pl=!1,xi=[],wr=null,Cr=null,Sr=null,Jo=new Map,Zo=new Map,Er=[],Zx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function _f(t,o){switch(t){case"focusin":case"focusout":wr=null;break;case"dragenter":case"dragleave":Cr=null;break;case"mouseover":case"mouseout":Sr=null;break;case"pointerover":case"pointerout":Jo.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Zo.delete(o.pointerId)}}function es(t,o,l,f,v,x){return t===null||t.nativeEvent!==x?(t={blockedOn:o,domEventName:l,eventSystemFlags:f,nativeEvent:x,targetContainers:[v]},o!==null&&(o=ms(o),o!==null&&ml(o)),t):(t.eventSystemFlags|=f,o=t.targetContainers,v!==null&&o.indexOf(v)===-1&&o.push(v),t)}function eb(t,o,l,f,v){switch(o){case"focusin":return wr=es(wr,t,o,l,f,v),!0;case"dragenter":return Cr=es(Cr,t,o,l,f,v),!0;case"mouseover":return Sr=es(Sr,t,o,l,f,v),!0;case"pointerover":var x=v.pointerId;return Jo.set(x,es(Jo.get(x)||null,t,o,l,f,v)),!0;case"gotpointercapture":return x=v.pointerId,Zo.set(x,es(Zo.get(x)||null,t,o,l,f,v)),!0}return!1}function Lf(t){var o=Yr(t.target);if(o!==null){var l=Kr(o);if(l!==null){if(o=l.tag,o===13){if(o=wf(l),o!==null){t.blockedOn=o,Of(t.priority,function(){Rf(l)});return}}else if(o===3&&l.stateNode.current.memoizedState.isDehydrated){t.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}t.blockedOn=null}function bi(t){if(t.blockedOn!==null)return!1;for(var o=t.targetContainers;0<o.length;){var l=vl(t.domEventName,t.eventSystemFlags,o[0],t.nativeEvent);if(l===null){l=t.nativeEvent;var f=new l.constructor(l.type,l);St=f,l.target.dispatchEvent(f),St=null}else return o=ms(l),o!==null&&ml(o),t.blockedOn=l,!1;o.shift()}return!0}function Ff(t,o,l){bi(t)&&l.delete(o)}function tb(){pl=!1,wr!==null&&bi(wr)&&(wr=null),Cr!==null&&bi(Cr)&&(Cr=null),Sr!==null&&bi(Sr)&&(Sr=null),Jo.forEach(Ff),Zo.forEach(Ff)}function ts(t,o){t.blockedOn===o&&(t.blockedOn=null,pl||(pl=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,tb)))}function ns(t){function o(v){return ts(v,t)}if(0<xi.length){ts(xi[0],t);for(var l=1;l<xi.length;l++){var f=xi[l];f.blockedOn===t&&(f.blockedOn=null)}}for(wr!==null&&ts(wr,t),Cr!==null&&ts(Cr,t),Sr!==null&&ts(Sr,t),Jo.forEach(o),Zo.forEach(o),l=0;l<Er.length;l++)f=Er[l],f.blockedOn===t&&(f.blockedOn=null);for(;0<Er.length&&(l=Er[0],l.blockedOn===null);)Lf(l),l.blockedOn===null&&Er.shift()}var po=D.ReactCurrentBatchConfig,Ni=!0;function nb(t,o,l,f){var v=Ye,x=po.transition;po.transition=null;try{Ye=1,gl(t,o,l,f)}finally{Ye=v,po.transition=x}}function rb(t,o,l,f){var v=Ye,x=po.transition;po.transition=null;try{Ye=4,gl(t,o,l,f)}finally{Ye=v,po.transition=x}}function gl(t,o,l,f){if(Ni){var v=vl(t,o,l,f);if(v===null)Ml(t,o,f,wi,l),_f(t,f);else if(eb(v,t,o,l,f))f.stopPropagation();else if(_f(t,f),o&4&&-1<Zx.indexOf(t)){for(;v!==null;){var x=ms(v);if(x!==null&&Tf(x),x=vl(t,o,l,f),x===null&&Ml(t,o,f,wi,l),x===v)break;v=x}v!==null&&f.stopPropagation()}else Ml(t,o,f,null,l)}}var wi=null;function vl(t,o,l,f){if(wi=null,t=vn(f),t=Yr(t),t!==null)if(o=Kr(t),o===null)t=null;else if(l=o.tag,l===13){if(t=wf(o),t!==null)return t;t=null}else if(l===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;t=null}else o!==t&&(t=null);return wi=t,null}function Bf(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(zx()){case ul:return 1;case Af:return 4;case mi:case Wx:return 16;case kf:return 536870912;default:return 16}default:return 16}}var Dr=null,yl=null,Ci=null;function $f(){if(Ci)return Ci;var t,o=yl,l=o.length,f,v="value"in Dr?Dr.value:Dr.textContent,x=v.length;for(t=0;t<l&&o[t]===v[t];t++);var S=l-t;for(f=1;f<=S&&o[l-f]===v[x-f];f++);return Ci=v.slice(t,1<f?1-f:void 0)}function Si(t){var o=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&o===13&&(t=13)):t=o,t===10&&(t=13),32<=t||t===13?t:0}function Ei(){return!0}function Gf(){return!1}function xn(t){function o(l,f,v,x,S){this._reactName=l,this._targetInst=v,this.type=f,this.nativeEvent=x,this.target=S,this.currentTarget=null;for(var T in t)t.hasOwnProperty(T)&&(l=t[T],this[T]=l?l(x):x[T]);return this.isDefaultPrevented=(x.defaultPrevented!=null?x.defaultPrevented:x.returnValue===!1)?Ei:Gf,this.isPropagationStopped=Gf,this}return _(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Ei)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Ei)},persist:function(){},isPersistent:Ei}),o}var go={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xl=xn(go),rs=_({},go,{view:0,detail:0}),ob=xn(rs),bl,Nl,os,Di=_({},rs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cl,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==os&&(os&&t.type==="mousemove"?(bl=t.screenX-os.screenX,Nl=t.screenY-os.screenY):Nl=bl=0,os=t),bl)},movementY:function(t){return"movementY"in t?t.movementY:Nl}}),Uf=xn(Di),sb=_({},Di,{dataTransfer:0}),ib=xn(sb),ab=_({},rs,{relatedTarget:0}),wl=xn(ab),lb=_({},go,{animationName:0,elapsedTime:0,pseudoElement:0}),cb=xn(lb),ub=_({},go,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),db=xn(ub),fb=_({},go,{data:0}),Vf=xn(fb),hb={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},mb={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},pb={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gb(t){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(t):(t=pb[t])?!!o[t]:!1}function Cl(){return gb}var vb=_({},rs,{key:function(t){if(t.key){var o=hb[t.key]||t.key;if(o!=="Unidentified")return o}return t.type==="keypress"?(t=Si(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?mb[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cl,charCode:function(t){return t.type==="keypress"?Si(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Si(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),yb=xn(vb),xb=_({},Di,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),zf=xn(xb),bb=_({},rs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cl}),Nb=xn(bb),wb=_({},go,{propertyName:0,elapsedTime:0,pseudoElement:0}),Cb=xn(wb),Sb=_({},Di,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Eb=xn(Sb),Db=[9,13,27,32],Sl=d&&"CompositionEvent"in window,ss=null;d&&"documentMode"in document&&(ss=document.documentMode);var jb=d&&"TextEvent"in window&&!ss,Wf=d&&(!Sl||ss&&8<ss&&11>=ss),Hf=" ",qf=!1;function Kf(t,o){switch(t){case"keyup":return Db.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Yf(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var vo=!1;function Ab(t,o){switch(t){case"compositionend":return Yf(o);case"keypress":return o.which!==32?null:(qf=!0,Hf);case"textInput":return t=o.data,t===Hf&&qf?null:t;default:return null}}function kb(t,o){if(vo)return t==="compositionend"||!Sl&&Kf(t,o)?(t=$f(),Ci=yl=Dr=null,vo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return Wf&&o.locale!=="ko"?null:o.data;default:return null}}var Ib={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Qf(t){var o=t&&t.nodeName&&t.nodeName.toLowerCase();return o==="input"?!!Ib[t.type]:o==="textarea"}function Xf(t,o,l,f){he(f),o=Pi(o,"onChange"),0<o.length&&(l=new xl("onChange","change",null,l,f),t.push({event:l,listeners:o}))}var is=null,as=null;function Pb(t){ph(t,0)}function ji(t){var o=wo(t);if(Ie(o))return t}function Tb(t,o){if(t==="change")return o}var Jf=!1;if(d){var El;if(d){var Dl="oninput"in document;if(!Dl){var Zf=document.createElement("div");Zf.setAttribute("oninput","return;"),Dl=typeof Zf.oninput=="function"}El=Dl}else El=!1;Jf=El&&(!document.documentMode||9<document.documentMode)}function eh(){is&&(is.detachEvent("onpropertychange",th),as=is=null)}function th(t){if(t.propertyName==="value"&&ji(as)){var o=[];Xf(o,as,t,vn(t)),Kt(Pb,o)}}function Rb(t,o,l){t==="focusin"?(eh(),is=o,as=l,is.attachEvent("onpropertychange",th)):t==="focusout"&&eh()}function Mb(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ji(as)}function Ob(t,o){if(t==="click")return ji(o)}function _b(t,o){if(t==="input"||t==="change")return ji(o)}function Lb(t,o){return t===o&&(t!==0||1/t===1/o)||t!==t&&o!==o}var Un=typeof Object.is=="function"?Object.is:Lb;function ls(t,o){if(Un(t,o))return!0;if(typeof t!="object"||t===null||typeof o!="object"||o===null)return!1;var l=Object.keys(t),f=Object.keys(o);if(l.length!==f.length)return!1;for(f=0;f<l.length;f++){var v=l[f];if(!h.call(o,v)||!Un(t[v],o[v]))return!1}return!0}function nh(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function rh(t,o){var l=nh(t);t=0;for(var f;l;){if(l.nodeType===3){if(f=t+l.textContent.length,t<=o&&f>=o)return{node:l,offset:o-t};t=f}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=nh(l)}}function oh(t,o){return t&&o?t===o?!0:t&&t.nodeType===3?!1:o&&o.nodeType===3?oh(t,o.parentNode):"contains"in t?t.contains(o):t.compareDocumentPosition?!!(t.compareDocumentPosition(o)&16):!1:!1}function sh(){for(var t=window,o=Xe();o instanceof t.HTMLIFrameElement;){try{var l=typeof o.contentWindow.location.href=="string"}catch{l=!1}if(l)t=o.contentWindow;else break;o=Xe(t.document)}return o}function jl(t){var o=t&&t.nodeName&&t.nodeName.toLowerCase();return o&&(o==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||o==="textarea"||t.contentEditable==="true")}function Fb(t){var o=sh(),l=t.focusedElem,f=t.selectionRange;if(o!==l&&l&&l.ownerDocument&&oh(l.ownerDocument.documentElement,l)){if(f!==null&&jl(l)){if(o=f.start,t=f.end,t===void 0&&(t=o),"selectionStart"in l)l.selectionStart=o,l.selectionEnd=Math.min(t,l.value.length);else if(t=(o=l.ownerDocument||document)&&o.defaultView||window,t.getSelection){t=t.getSelection();var v=l.textContent.length,x=Math.min(f.start,v);f=f.end===void 0?x:Math.min(f.end,v),!t.extend&&x>f&&(v=f,f=x,x=v),v=rh(l,x);var S=rh(l,f);v&&S&&(t.rangeCount!==1||t.anchorNode!==v.node||t.anchorOffset!==v.offset||t.focusNode!==S.node||t.focusOffset!==S.offset)&&(o=o.createRange(),o.setStart(v.node,v.offset),t.removeAllRanges(),x>f?(t.addRange(o),t.extend(S.node,S.offset)):(o.setEnd(S.node,S.offset),t.addRange(o)))}}for(o=[],t=l;t=t.parentNode;)t.nodeType===1&&o.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<o.length;l++)t=o[l],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Bb=d&&"documentMode"in document&&11>=document.documentMode,yo=null,Al=null,cs=null,kl=!1;function ih(t,o,l){var f=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;kl||yo==null||yo!==Xe(f)||(f=yo,"selectionStart"in f&&jl(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),cs&&ls(cs,f)||(cs=f,f=Pi(Al,"onSelect"),0<f.length&&(o=new xl("onSelect","select",null,o,l),t.push({event:o,listeners:f}),o.target=yo)))}function Ai(t,o){var l={};return l[t.toLowerCase()]=o.toLowerCase(),l["Webkit"+t]="webkit"+o,l["Moz"+t]="moz"+o,l}var xo={animationend:Ai("Animation","AnimationEnd"),animationiteration:Ai("Animation","AnimationIteration"),animationstart:Ai("Animation","AnimationStart"),transitionend:Ai("Transition","TransitionEnd")},Il={},ah={};d&&(ah=document.createElement("div").style,"AnimationEvent"in window||(delete xo.animationend.animation,delete xo.animationiteration.animation,delete xo.animationstart.animation),"TransitionEvent"in window||delete xo.transitionend.transition);function ki(t){if(Il[t])return Il[t];if(!xo[t])return t;var o=xo[t],l;for(l in o)if(o.hasOwnProperty(l)&&l in ah)return Il[t]=o[l];return t}var lh=ki("animationend"),ch=ki("animationiteration"),uh=ki("animationstart"),dh=ki("transitionend"),fh=new Map,hh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function jr(t,o){fh.set(t,o),a(o,[t])}for(var Pl=0;Pl<hh.length;Pl++){var Tl=hh[Pl],$b=Tl.toLowerCase(),Gb=Tl[0].toUpperCase()+Tl.slice(1);jr($b,"on"+Gb)}jr(lh,"onAnimationEnd"),jr(ch,"onAnimationIteration"),jr(uh,"onAnimationStart"),jr("dblclick","onDoubleClick"),jr("focusin","onFocus"),jr("focusout","onBlur"),jr(dh,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var us="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ub=new Set("cancel close invalid load scroll toggle".split(" ").concat(us));function mh(t,o,l){var f=t.type||"unknown-event";t.currentTarget=l,$x(f,o,void 0,t),t.currentTarget=null}function ph(t,o){o=(o&4)!==0;for(var l=0;l<t.length;l++){var f=t[l],v=f.event;f=f.listeners;e:{var x=void 0;if(o)for(var S=f.length-1;0<=S;S--){var T=f[S],F=T.instance,X=T.currentTarget;if(T=T.listener,F!==x&&v.isPropagationStopped())break e;mh(v,T,X),x=F}else for(S=0;S<f.length;S++){if(T=f[S],F=T.instance,X=T.currentTarget,T=T.listener,F!==x&&v.isPropagationStopped())break e;mh(v,T,X),x=F}}}if(yn)throw t=cr,yn=!1,cr=null,t}function rt(t,o){var l=o[$l];l===void 0&&(l=o[$l]=new Set);var f=t+"__bubble";l.has(f)||(gh(o,t,2,!1),l.add(f))}function Rl(t,o,l){var f=0;o&&(f|=4),gh(l,t,f,o)}var Ii="_reactListening"+Math.random().toString(36).slice(2);function ds(t){if(!t[Ii]){t[Ii]=!0,s.forEach(function(l){l!=="selectionchange"&&(Ub.has(l)||Rl(l,!1,t),Rl(l,!0,t))});var o=t.nodeType===9?t:t.ownerDocument;o===null||o[Ii]||(o[Ii]=!0,Rl("selectionchange",!1,o))}}function gh(t,o,l,f){switch(Bf(o)){case 1:var v=nb;break;case 4:v=rb;break;default:v=gl}l=v.bind(null,o,l,t),v=void 0,!nn||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(v=!0),f?v!==void 0?t.addEventListener(o,l,{capture:!0,passive:v}):t.addEventListener(o,l,!0):v!==void 0?t.addEventListener(o,l,{passive:v}):t.addEventListener(o,l,!1)}function Ml(t,o,l,f,v){var x=f;if((o&1)===0&&(o&2)===0&&f!==null)e:for(;;){if(f===null)return;var S=f.tag;if(S===3||S===4){var T=f.stateNode.containerInfo;if(T===v||T.nodeType===8&&T.parentNode===v)break;if(S===4)for(S=f.return;S!==null;){var F=S.tag;if((F===3||F===4)&&(F=S.stateNode.containerInfo,F===v||F.nodeType===8&&F.parentNode===v))return;S=S.return}for(;T!==null;){if(S=Yr(T),S===null)return;if(F=S.tag,F===5||F===6){f=x=S;continue e}T=T.parentNode}}f=f.return}Kt(function(){var X=x,ae=vn(l),le=[];e:{var ie=fh.get(t);if(ie!==void 0){var me=xl,ye=t;switch(t){case"keypress":if(Si(l)===0)break e;case"keydown":case"keyup":me=yb;break;case"focusin":ye="focus",me=wl;break;case"focusout":ye="blur",me=wl;break;case"beforeblur":case"afterblur":me=wl;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":me=Uf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":me=ib;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":me=Nb;break;case lh:case ch:case uh:me=cb;break;case dh:me=Cb;break;case"scroll":me=ob;break;case"wheel":me=Eb;break;case"copy":case"cut":case"paste":me=db;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":me=zf}var xe=(o&4)!==0,vt=!xe&&t==="scroll",z=xe?ie!==null?ie+"Capture":null:ie;xe=[];for(var B=X,H;B!==null;){H=B;var ce=H.stateNode;if(H.tag===5&&ce!==null&&(H=ce,z!==null&&(ce=Ze(B,z),ce!=null&&xe.push(fs(B,ce,H)))),vt)break;B=B.return}0<xe.length&&(ie=new me(ie,ye,null,l,ae),le.push({event:ie,listeners:xe}))}}if((o&7)===0){e:{if(ie=t==="mouseover"||t==="pointerover",me=t==="mouseout"||t==="pointerout",ie&&l!==St&&(ye=l.relatedTarget||l.fromElement)&&(Yr(ye)||ye[ur]))break e;if((me||ie)&&(ie=ae.window===ae?ae:(ie=ae.ownerDocument)?ie.defaultView||ie.parentWindow:window,me?(ye=l.relatedTarget||l.toElement,me=X,ye=ye?Yr(ye):null,ye!==null&&(vt=Kr(ye),ye!==vt||ye.tag!==5&&ye.tag!==6)&&(ye=null)):(me=null,ye=X),me!==ye)){if(xe=Uf,ce="onMouseLeave",z="onMouseEnter",B="mouse",(t==="pointerout"||t==="pointerover")&&(xe=zf,ce="onPointerLeave",z="onPointerEnter",B="pointer"),vt=me==null?ie:wo(me),H=ye==null?ie:wo(ye),ie=new xe(ce,B+"leave",me,l,ae),ie.target=vt,ie.relatedTarget=H,ce=null,Yr(ae)===X&&(xe=new xe(z,B+"enter",ye,l,ae),xe.target=H,xe.relatedTarget=vt,ce=xe),vt=ce,me&&ye)t:{for(xe=me,z=ye,B=0,H=xe;H;H=bo(H))B++;for(H=0,ce=z;ce;ce=bo(ce))H++;for(;0<B-H;)xe=bo(xe),B--;for(;0<H-B;)z=bo(z),H--;for(;B--;){if(xe===z||z!==null&&xe===z.alternate)break t;xe=bo(xe),z=bo(z)}xe=null}else xe=null;me!==null&&vh(le,ie,me,xe,!1),ye!==null&&vt!==null&&vh(le,vt,ye,xe,!0)}}e:{if(ie=X?wo(X):window,me=ie.nodeName&&ie.nodeName.toLowerCase(),me==="select"||me==="input"&&ie.type==="file")var we=Tb;else if(Qf(ie))if(Jf)we=_b;else{we=Mb;var je=Rb}else(me=ie.nodeName)&&me.toLowerCase()==="input"&&(ie.type==="checkbox"||ie.type==="radio")&&(we=Ob);if(we&&(we=we(t,X))){Xf(le,we,l,ae);break e}je&&je(t,ie,X),t==="focusout"&&(je=ie._wrapperState)&&je.controlled&&ie.type==="number"&&Tt(ie,"number",ie.value)}switch(je=X?wo(X):window,t){case"focusin":(Qf(je)||je.contentEditable==="true")&&(yo=je,Al=X,cs=null);break;case"focusout":cs=Al=yo=null;break;case"mousedown":kl=!0;break;case"contextmenu":case"mouseup":case"dragend":kl=!1,ih(le,l,ae);break;case"selectionchange":if(Bb)break;case"keydown":case"keyup":ih(le,l,ae)}var Ae;if(Sl)e:{switch(t){case"compositionstart":var ke="onCompositionStart";break e;case"compositionend":ke="onCompositionEnd";break e;case"compositionupdate":ke="onCompositionUpdate";break e}ke=void 0}else vo?Kf(t,l)&&(ke="onCompositionEnd"):t==="keydown"&&l.keyCode===229&&(ke="onCompositionStart");ke&&(Wf&&l.locale!=="ko"&&(vo||ke!=="onCompositionStart"?ke==="onCompositionEnd"&&vo&&(Ae=$f()):(Dr=ae,yl="value"in Dr?Dr.value:Dr.textContent,vo=!0)),je=Pi(X,ke),0<je.length&&(ke=new Vf(ke,t,null,l,ae),le.push({event:ke,listeners:je}),Ae?ke.data=Ae:(Ae=Yf(l),Ae!==null&&(ke.data=Ae)))),(Ae=jb?Ab(t,l):kb(t,l))&&(X=Pi(X,"onBeforeInput"),0<X.length&&(ae=new Vf("onBeforeInput","beforeinput",null,l,ae),le.push({event:ae,listeners:X}),ae.data=Ae))}ph(le,o)})}function fs(t,o,l){return{instance:t,listener:o,currentTarget:l}}function Pi(t,o){for(var l=o+"Capture",f=[];t!==null;){var v=t,x=v.stateNode;v.tag===5&&x!==null&&(v=x,x=Ze(t,l),x!=null&&f.unshift(fs(t,x,v)),x=Ze(t,o),x!=null&&f.push(fs(t,x,v))),t=t.return}return f}function bo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function vh(t,o,l,f,v){for(var x=o._reactName,S=[];l!==null&&l!==f;){var T=l,F=T.alternate,X=T.stateNode;if(F!==null&&F===f)break;T.tag===5&&X!==null&&(T=X,v?(F=Ze(l,x),F!=null&&S.unshift(fs(l,F,T))):v||(F=Ze(l,x),F!=null&&S.push(fs(l,F,T)))),l=l.return}S.length!==0&&t.push({event:o,listeners:S})}var Vb=/\r\n?/g,zb=/\u0000|\uFFFD/g;function yh(t){return(typeof t=="string"?t:""+t).replace(Vb,`
`).replace(zb,"")}function Ti(t,o,l){if(o=yh(o),yh(t)!==o&&l)throw Error(r(425))}function Ri(){}var Ol=null,_l=null;function Ll(t,o){return t==="textarea"||t==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Fl=typeof setTimeout=="function"?setTimeout:void 0,Wb=typeof clearTimeout=="function"?clearTimeout:void 0,xh=typeof Promise=="function"?Promise:void 0,Hb=typeof queueMicrotask=="function"?queueMicrotask:typeof xh<"u"?function(t){return xh.resolve(null).then(t).catch(qb)}:Fl;function qb(t){setTimeout(function(){throw t})}function Bl(t,o){var l=o,f=0;do{var v=l.nextSibling;if(t.removeChild(l),v&&v.nodeType===8)if(l=v.data,l==="/$"){if(f===0){t.removeChild(v),ns(o);return}f--}else l!=="$"&&l!=="$?"&&l!=="$!"||f++;l=v}while(l);ns(o)}function Ar(t){for(;t!=null;t=t.nextSibling){var o=t.nodeType;if(o===1||o===3)break;if(o===8){if(o=t.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return t}function bh(t){t=t.previousSibling;for(var o=0;t;){if(t.nodeType===8){var l=t.data;if(l==="$"||l==="$!"||l==="$?"){if(o===0)return t;o--}else l==="/$"&&o++}t=t.previousSibling}return null}var No=Math.random().toString(36).slice(2),Jn="__reactFiber$"+No,hs="__reactProps$"+No,ur="__reactContainer$"+No,$l="__reactEvents$"+No,Kb="__reactListeners$"+No,Yb="__reactHandles$"+No;function Yr(t){var o=t[Jn];if(o)return o;for(var l=t.parentNode;l;){if(o=l[ur]||l[Jn]){if(l=o.alternate,o.child!==null||l!==null&&l.child!==null)for(t=bh(t);t!==null;){if(l=t[Jn])return l;t=bh(t)}return o}t=l,l=t.parentNode}return null}function ms(t){return t=t[Jn]||t[ur],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function wo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(r(33))}function Mi(t){return t[hs]||null}var Gl=[],Co=-1;function kr(t){return{current:t}}function ot(t){0>Co||(t.current=Gl[Co],Gl[Co]=null,Co--)}function tt(t,o){Co++,Gl[Co]=t.current,t.current=o}var Ir={},Bt=kr(Ir),on=kr(!1),Qr=Ir;function So(t,o){var l=t.type.contextTypes;if(!l)return Ir;var f=t.stateNode;if(f&&f.__reactInternalMemoizedUnmaskedChildContext===o)return f.__reactInternalMemoizedMaskedChildContext;var v={},x;for(x in l)v[x]=o[x];return f&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=o,t.__reactInternalMemoizedMaskedChildContext=v),v}function sn(t){return t=t.childContextTypes,t!=null}function Oi(){ot(on),ot(Bt)}function Nh(t,o,l){if(Bt.current!==Ir)throw Error(r(168));tt(Bt,o),tt(on,l)}function wh(t,o,l){var f=t.stateNode;if(o=o.childContextTypes,typeof f.getChildContext!="function")return l;f=f.getChildContext();for(var v in f)if(!(v in o))throw Error(r(108,Ee(t)||"Unknown",v));return _({},l,f)}function _i(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ir,Qr=Bt.current,tt(Bt,t),tt(on,on.current),!0}function Ch(t,o,l){var f=t.stateNode;if(!f)throw Error(r(169));l?(t=wh(t,o,Qr),f.__reactInternalMemoizedMergedChildContext=t,ot(on),ot(Bt),tt(Bt,t)):ot(on),tt(on,l)}var dr=null,Li=!1,Ul=!1;function Sh(t){dr===null?dr=[t]:dr.push(t)}function Qb(t){Li=!0,Sh(t)}function Pr(){if(!Ul&&dr!==null){Ul=!0;var t=0,o=Ye;try{var l=dr;for(Ye=1;t<l.length;t++){var f=l[t];do f=f(!0);while(f!==null)}dr=null,Li=!1}catch(v){throw dr!==null&&(dr=dr.slice(t+1)),Df(ul,Pr),v}finally{Ye=o,Ul=!1}}return null}var Eo=[],Do=0,Fi=null,Bi=0,In=[],Pn=0,Xr=null,fr=1,hr="";function Jr(t,o){Eo[Do++]=Bi,Eo[Do++]=Fi,Fi=t,Bi=o}function Eh(t,o,l){In[Pn++]=fr,In[Pn++]=hr,In[Pn++]=Xr,Xr=t;var f=fr;t=hr;var v=32-Gn(f)-1;f&=~(1<<v),l+=1;var x=32-Gn(o)+v;if(30<x){var S=v-v%5;x=(f&(1<<S)-1).toString(32),f>>=S,v-=S,fr=1<<32-Gn(o)+v|l<<v|f,hr=x+t}else fr=1<<x|l<<v|f,hr=t}function Vl(t){t.return!==null&&(Jr(t,1),Eh(t,1,0))}function zl(t){for(;t===Fi;)Fi=Eo[--Do],Eo[Do]=null,Bi=Eo[--Do],Eo[Do]=null;for(;t===Xr;)Xr=In[--Pn],In[Pn]=null,hr=In[--Pn],In[Pn]=null,fr=In[--Pn],In[Pn]=null}var bn=null,Nn=null,it=!1,Vn=null;function Dh(t,o){var l=On(5,null,null,0);l.elementType="DELETED",l.stateNode=o,l.return=t,o=t.deletions,o===null?(t.deletions=[l],t.flags|=16):o.push(l)}function jh(t,o){switch(t.tag){case 5:var l=t.type;return o=o.nodeType!==1||l.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(t.stateNode=o,bn=t,Nn=Ar(o.firstChild),!0):!1;case 6:return o=t.pendingProps===""||o.nodeType!==3?null:o,o!==null?(t.stateNode=o,bn=t,Nn=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(l=Xr!==null?{id:fr,overflow:hr}:null,t.memoizedState={dehydrated:o,treeContext:l,retryLane:1073741824},l=On(18,null,null,0),l.stateNode=o,l.return=t,t.child=l,bn=t,Nn=null,!0):!1;default:return!1}}function Wl(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Hl(t){if(it){var o=Nn;if(o){var l=o;if(!jh(t,o)){if(Wl(t))throw Error(r(418));o=Ar(l.nextSibling);var f=bn;o&&jh(t,o)?Dh(f,l):(t.flags=t.flags&-4097|2,it=!1,bn=t)}}else{if(Wl(t))throw Error(r(418));t.flags=t.flags&-4097|2,it=!1,bn=t}}}function Ah(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;bn=t}function $i(t){if(t!==bn)return!1;if(!it)return Ah(t),it=!0,!1;var o;if((o=t.tag!==3)&&!(o=t.tag!==5)&&(o=t.type,o=o!=="head"&&o!=="body"&&!Ll(t.type,t.memoizedProps)),o&&(o=Nn)){if(Wl(t))throw kh(),Error(r(418));for(;o;)Dh(t,o),o=Ar(o.nextSibling)}if(Ah(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));e:{for(t=t.nextSibling,o=0;t;){if(t.nodeType===8){var l=t.data;if(l==="/$"){if(o===0){Nn=Ar(t.nextSibling);break e}o--}else l!=="$"&&l!=="$!"&&l!=="$?"||o++}t=t.nextSibling}Nn=null}}else Nn=bn?Ar(t.stateNode.nextSibling):null;return!0}function kh(){for(var t=Nn;t;)t=Ar(t.nextSibling)}function jo(){Nn=bn=null,it=!1}function ql(t){Vn===null?Vn=[t]:Vn.push(t)}var Xb=D.ReactCurrentBatchConfig;function ps(t,o,l){if(t=l.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(r(309));var f=l.stateNode}if(!f)throw Error(r(147,t));var v=f,x=""+t;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===x?o.ref:(o=function(S){var T=v.refs;S===null?delete T[x]:T[x]=S},o._stringRef=x,o)}if(typeof t!="string")throw Error(r(284));if(!l._owner)throw Error(r(290,t))}return t}function Gi(t,o){throw t=Object.prototype.toString.call(o),Error(r(31,t==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":t))}function Ih(t){var o=t._init;return o(t._payload)}function Ph(t){function o(z,B){if(t){var H=z.deletions;H===null?(z.deletions=[B],z.flags|=16):H.push(B)}}function l(z,B){if(!t)return null;for(;B!==null;)o(z,B),B=B.sibling;return null}function f(z,B){for(z=new Map;B!==null;)B.key!==null?z.set(B.key,B):z.set(B.index,B),B=B.sibling;return z}function v(z,B){return z=Br(z,B),z.index=0,z.sibling=null,z}function x(z,B,H){return z.index=H,t?(H=z.alternate,H!==null?(H=H.index,H<B?(z.flags|=2,B):H):(z.flags|=2,B)):(z.flags|=1048576,B)}function S(z){return t&&z.alternate===null&&(z.flags|=2),z}function T(z,B,H,ce){return B===null||B.tag!==6?(B=Fc(H,z.mode,ce),B.return=z,B):(B=v(B,H),B.return=z,B)}function F(z,B,H,ce){var we=H.type;return we===O?ae(z,B,H.props.children,ce,H.key):B!==null&&(B.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===J&&Ih(we)===B.type)?(ce=v(B,H.props),ce.ref=ps(z,B,H),ce.return=z,ce):(ce=da(H.type,H.key,H.props,null,z.mode,ce),ce.ref=ps(z,B,H),ce.return=z,ce)}function X(z,B,H,ce){return B===null||B.tag!==4||B.stateNode.containerInfo!==H.containerInfo||B.stateNode.implementation!==H.implementation?(B=Bc(H,z.mode,ce),B.return=z,B):(B=v(B,H.children||[]),B.return=z,B)}function ae(z,B,H,ce,we){return B===null||B.tag!==7?(B=io(H,z.mode,ce,we),B.return=z,B):(B=v(B,H),B.return=z,B)}function le(z,B,H){if(typeof B=="string"&&B!==""||typeof B=="number")return B=Fc(""+B,z.mode,H),B.return=z,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case k:return H=da(B.type,B.key,B.props,null,z.mode,H),H.ref=ps(z,null,B),H.return=z,H;case R:return B=Bc(B,z.mode,H),B.return=z,B;case J:var ce=B._init;return le(z,ce(B._payload),H)}if(st(B)||$(B))return B=io(B,z.mode,H,null),B.return=z,B;Gi(z,B)}return null}function ie(z,B,H,ce){var we=B!==null?B.key:null;if(typeof H=="string"&&H!==""||typeof H=="number")return we!==null?null:T(z,B,""+H,ce);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case k:return H.key===we?F(z,B,H,ce):null;case R:return H.key===we?X(z,B,H,ce):null;case J:return we=H._init,ie(z,B,we(H._payload),ce)}if(st(H)||$(H))return we!==null?null:ae(z,B,H,ce,null);Gi(z,H)}return null}function me(z,B,H,ce,we){if(typeof ce=="string"&&ce!==""||typeof ce=="number")return z=z.get(H)||null,T(B,z,""+ce,we);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case k:return z=z.get(ce.key===null?H:ce.key)||null,F(B,z,ce,we);case R:return z=z.get(ce.key===null?H:ce.key)||null,X(B,z,ce,we);case J:var je=ce._init;return me(z,B,H,je(ce._payload),we)}if(st(ce)||$(ce))return z=z.get(H)||null,ae(B,z,ce,we,null);Gi(B,ce)}return null}function ye(z,B,H,ce){for(var we=null,je=null,Ae=B,ke=B=0,jt=null;Ae!==null&&ke<H.length;ke++){Ae.index>ke?(jt=Ae,Ae=null):jt=Ae.sibling;var Ve=ie(z,Ae,H[ke],ce);if(Ve===null){Ae===null&&(Ae=jt);break}t&&Ae&&Ve.alternate===null&&o(z,Ae),B=x(Ve,B,ke),je===null?we=Ve:je.sibling=Ve,je=Ve,Ae=jt}if(ke===H.length)return l(z,Ae),it&&Jr(z,ke),we;if(Ae===null){for(;ke<H.length;ke++)Ae=le(z,H[ke],ce),Ae!==null&&(B=x(Ae,B,ke),je===null?we=Ae:je.sibling=Ae,je=Ae);return it&&Jr(z,ke),we}for(Ae=f(z,Ae);ke<H.length;ke++)jt=me(Ae,z,ke,H[ke],ce),jt!==null&&(t&&jt.alternate!==null&&Ae.delete(jt.key===null?ke:jt.key),B=x(jt,B,ke),je===null?we=jt:je.sibling=jt,je=jt);return t&&Ae.forEach(function($r){return o(z,$r)}),it&&Jr(z,ke),we}function xe(z,B,H,ce){var we=$(H);if(typeof we!="function")throw Error(r(150));if(H=we.call(H),H==null)throw Error(r(151));for(var je=we=null,Ae=B,ke=B=0,jt=null,Ve=H.next();Ae!==null&&!Ve.done;ke++,Ve=H.next()){Ae.index>ke?(jt=Ae,Ae=null):jt=Ae.sibling;var $r=ie(z,Ae,Ve.value,ce);if($r===null){Ae===null&&(Ae=jt);break}t&&Ae&&$r.alternate===null&&o(z,Ae),B=x($r,B,ke),je===null?we=$r:je.sibling=$r,je=$r,Ae=jt}if(Ve.done)return l(z,Ae),it&&Jr(z,ke),we;if(Ae===null){for(;!Ve.done;ke++,Ve=H.next())Ve=le(z,Ve.value,ce),Ve!==null&&(B=x(Ve,B,ke),je===null?we=Ve:je.sibling=Ve,je=Ve);return it&&Jr(z,ke),we}for(Ae=f(z,Ae);!Ve.done;ke++,Ve=H.next())Ve=me(Ae,z,ke,Ve.value,ce),Ve!==null&&(t&&Ve.alternate!==null&&Ae.delete(Ve.key===null?ke:Ve.key),B=x(Ve,B,ke),je===null?we=Ve:je.sibling=Ve,je=Ve);return t&&Ae.forEach(function(I0){return o(z,I0)}),it&&Jr(z,ke),we}function vt(z,B,H,ce){if(typeof H=="object"&&H!==null&&H.type===O&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case k:e:{for(var we=H.key,je=B;je!==null;){if(je.key===we){if(we=H.type,we===O){if(je.tag===7){l(z,je.sibling),B=v(je,H.props.children),B.return=z,z=B;break e}}else if(je.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===J&&Ih(we)===je.type){l(z,je.sibling),B=v(je,H.props),B.ref=ps(z,je,H),B.return=z,z=B;break e}l(z,je);break}else o(z,je);je=je.sibling}H.type===O?(B=io(H.props.children,z.mode,ce,H.key),B.return=z,z=B):(ce=da(H.type,H.key,H.props,null,z.mode,ce),ce.ref=ps(z,B,H),ce.return=z,z=ce)}return S(z);case R:e:{for(je=H.key;B!==null;){if(B.key===je)if(B.tag===4&&B.stateNode.containerInfo===H.containerInfo&&B.stateNode.implementation===H.implementation){l(z,B.sibling),B=v(B,H.children||[]),B.return=z,z=B;break e}else{l(z,B);break}else o(z,B);B=B.sibling}B=Bc(H,z.mode,ce),B.return=z,z=B}return S(z);case J:return je=H._init,vt(z,B,je(H._payload),ce)}if(st(H))return ye(z,B,H,ce);if($(H))return xe(z,B,H,ce);Gi(z,H)}return typeof H=="string"&&H!==""||typeof H=="number"?(H=""+H,B!==null&&B.tag===6?(l(z,B.sibling),B=v(B,H),B.return=z,z=B):(l(z,B),B=Fc(H,z.mode,ce),B.return=z,z=B),S(z)):l(z,B)}return vt}var Ao=Ph(!0),Th=Ph(!1),Ui=kr(null),Vi=null,ko=null,Kl=null;function Yl(){Kl=ko=Vi=null}function Ql(t){var o=Ui.current;ot(Ui),t._currentValue=o}function Xl(t,o,l){for(;t!==null;){var f=t.alternate;if((t.childLanes&o)!==o?(t.childLanes|=o,f!==null&&(f.childLanes|=o)):f!==null&&(f.childLanes&o)!==o&&(f.childLanes|=o),t===l)break;t=t.return}}function Io(t,o){Vi=t,Kl=ko=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&o)!==0&&(an=!0),t.firstContext=null)}function Tn(t){var o=t._currentValue;if(Kl!==t)if(t={context:t,memoizedValue:o,next:null},ko===null){if(Vi===null)throw Error(r(308));ko=t,Vi.dependencies={lanes:0,firstContext:t}}else ko=ko.next=t;return o}var Zr=null;function Jl(t){Zr===null?Zr=[t]:Zr.push(t)}function Rh(t,o,l,f){var v=o.interleaved;return v===null?(l.next=l,Jl(o)):(l.next=v.next,v.next=l),o.interleaved=l,mr(t,f)}function mr(t,o){t.lanes|=o;var l=t.alternate;for(l!==null&&(l.lanes|=o),l=t,t=t.return;t!==null;)t.childLanes|=o,l=t.alternate,l!==null&&(l.childLanes|=o),l=t,t=t.return;return l.tag===3?l.stateNode:null}var Tr=!1;function Zl(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Mh(t,o){t=t.updateQueue,o.updateQueue===t&&(o.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function pr(t,o){return{eventTime:t,lane:o,tag:0,payload:null,callback:null,next:null}}function Rr(t,o,l){var f=t.updateQueue;if(f===null)return null;if(f=f.shared,($e&2)!==0){var v=f.pending;return v===null?o.next=o:(o.next=v.next,v.next=o),f.pending=o,mr(t,l)}return v=f.interleaved,v===null?(o.next=o,Jl(f)):(o.next=v.next,v.next=o),f.interleaved=o,mr(t,l)}function zi(t,o,l){if(o=o.updateQueue,o!==null&&(o=o.shared,(l&4194240)!==0)){var f=o.lanes;f&=t.pendingLanes,l|=f,o.lanes=l,hl(t,l)}}function Oh(t,o){var l=t.updateQueue,f=t.alternate;if(f!==null&&(f=f.updateQueue,l===f)){var v=null,x=null;if(l=l.firstBaseUpdate,l!==null){do{var S={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};x===null?v=x=S:x=x.next=S,l=l.next}while(l!==null);x===null?v=x=o:x=x.next=o}else v=x=o;l={baseState:f.baseState,firstBaseUpdate:v,lastBaseUpdate:x,shared:f.shared,effects:f.effects},t.updateQueue=l;return}t=l.lastBaseUpdate,t===null?l.firstBaseUpdate=o:t.next=o,l.lastBaseUpdate=o}function Wi(t,o,l,f){var v=t.updateQueue;Tr=!1;var x=v.firstBaseUpdate,S=v.lastBaseUpdate,T=v.shared.pending;if(T!==null){v.shared.pending=null;var F=T,X=F.next;F.next=null,S===null?x=X:S.next=X,S=F;var ae=t.alternate;ae!==null&&(ae=ae.updateQueue,T=ae.lastBaseUpdate,T!==S&&(T===null?ae.firstBaseUpdate=X:T.next=X,ae.lastBaseUpdate=F))}if(x!==null){var le=v.baseState;S=0,ae=X=F=null,T=x;do{var ie=T.lane,me=T.eventTime;if((f&ie)===ie){ae!==null&&(ae=ae.next={eventTime:me,lane:0,tag:T.tag,payload:T.payload,callback:T.callback,next:null});e:{var ye=t,xe=T;switch(ie=o,me=l,xe.tag){case 1:if(ye=xe.payload,typeof ye=="function"){le=ye.call(me,le,ie);break e}le=ye;break e;case 3:ye.flags=ye.flags&-65537|128;case 0:if(ye=xe.payload,ie=typeof ye=="function"?ye.call(me,le,ie):ye,ie==null)break e;le=_({},le,ie);break e;case 2:Tr=!0}}T.callback!==null&&T.lane!==0&&(t.flags|=64,ie=v.effects,ie===null?v.effects=[T]:ie.push(T))}else me={eventTime:me,lane:ie,tag:T.tag,payload:T.payload,callback:T.callback,next:null},ae===null?(X=ae=me,F=le):ae=ae.next=me,S|=ie;if(T=T.next,T===null){if(T=v.shared.pending,T===null)break;ie=T,T=ie.next,ie.next=null,v.lastBaseUpdate=ie,v.shared.pending=null}}while(!0);if(ae===null&&(F=le),v.baseState=F,v.firstBaseUpdate=X,v.lastBaseUpdate=ae,o=v.shared.interleaved,o!==null){v=o;do S|=v.lane,v=v.next;while(v!==o)}else x===null&&(v.shared.lanes=0);no|=S,t.lanes=S,t.memoizedState=le}}function _h(t,o,l){if(t=o.effects,o.effects=null,t!==null)for(o=0;o<t.length;o++){var f=t[o],v=f.callback;if(v!==null){if(f.callback=null,f=l,typeof v!="function")throw Error(r(191,v));v.call(f)}}}var gs={},Zn=kr(gs),vs=kr(gs),ys=kr(gs);function eo(t){if(t===gs)throw Error(r(174));return t}function ec(t,o){switch(tt(ys,o),tt(vs,t),tt(Zn,gs),t=o.nodeType,t){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:Y(null,"");break;default:t=t===8?o.parentNode:o,o=t.namespaceURI||null,t=t.tagName,o=Y(o,t)}ot(Zn),tt(Zn,o)}function Po(){ot(Zn),ot(vs),ot(ys)}function Lh(t){eo(ys.current);var o=eo(Zn.current),l=Y(o,t.type);o!==l&&(tt(vs,t),tt(Zn,l))}function tc(t){vs.current===t&&(ot(Zn),ot(vs))}var ht=kr(0);function Hi(t){for(var o=t;o!==null;){if(o.tag===13){var l=o.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===t)break;for(;o.sibling===null;){if(o.return===null||o.return===t)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var nc=[];function rc(){for(var t=0;t<nc.length;t++)nc[t]._workInProgressVersionPrimary=null;nc.length=0}var qi=D.ReactCurrentDispatcher,oc=D.ReactCurrentBatchConfig,to=0,mt=null,bt=null,Et=null,Ki=!1,xs=!1,bs=0,Jb=0;function $t(){throw Error(r(321))}function sc(t,o){if(o===null)return!1;for(var l=0;l<o.length&&l<t.length;l++)if(!Un(t[l],o[l]))return!1;return!0}function ic(t,o,l,f,v,x){if(to=x,mt=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,qi.current=t===null||t.memoizedState===null?n0:r0,t=l(f,v),xs){x=0;do{if(xs=!1,bs=0,25<=x)throw Error(r(301));x+=1,Et=bt=null,o.updateQueue=null,qi.current=o0,t=l(f,v)}while(xs)}if(qi.current=Xi,o=bt!==null&&bt.next!==null,to=0,Et=bt=mt=null,Ki=!1,o)throw Error(r(300));return t}function ac(){var t=bs!==0;return bs=0,t}function er(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Et===null?mt.memoizedState=Et=t:Et=Et.next=t,Et}function Rn(){if(bt===null){var t=mt.alternate;t=t!==null?t.memoizedState:null}else t=bt.next;var o=Et===null?mt.memoizedState:Et.next;if(o!==null)Et=o,bt=t;else{if(t===null)throw Error(r(310));bt=t,t={memoizedState:bt.memoizedState,baseState:bt.baseState,baseQueue:bt.baseQueue,queue:bt.queue,next:null},Et===null?mt.memoizedState=Et=t:Et=Et.next=t}return Et}function Ns(t,o){return typeof o=="function"?o(t):o}function lc(t){var o=Rn(),l=o.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=t;var f=bt,v=f.baseQueue,x=l.pending;if(x!==null){if(v!==null){var S=v.next;v.next=x.next,x.next=S}f.baseQueue=v=x,l.pending=null}if(v!==null){x=v.next,f=f.baseState;var T=S=null,F=null,X=x;do{var ae=X.lane;if((to&ae)===ae)F!==null&&(F=F.next={lane:0,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null}),f=X.hasEagerState?X.eagerState:t(f,X.action);else{var le={lane:ae,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null};F===null?(T=F=le,S=f):F=F.next=le,mt.lanes|=ae,no|=ae}X=X.next}while(X!==null&&X!==x);F===null?S=f:F.next=T,Un(f,o.memoizedState)||(an=!0),o.memoizedState=f,o.baseState=S,o.baseQueue=F,l.lastRenderedState=f}if(t=l.interleaved,t!==null){v=t;do x=v.lane,mt.lanes|=x,no|=x,v=v.next;while(v!==t)}else v===null&&(l.lanes=0);return[o.memoizedState,l.dispatch]}function cc(t){var o=Rn(),l=o.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=t;var f=l.dispatch,v=l.pending,x=o.memoizedState;if(v!==null){l.pending=null;var S=v=v.next;do x=t(x,S.action),S=S.next;while(S!==v);Un(x,o.memoizedState)||(an=!0),o.memoizedState=x,o.baseQueue===null&&(o.baseState=x),l.lastRenderedState=x}return[x,f]}function Fh(){}function Bh(t,o){var l=mt,f=Rn(),v=o(),x=!Un(f.memoizedState,v);if(x&&(f.memoizedState=v,an=!0),f=f.queue,uc(Uh.bind(null,l,f,t),[t]),f.getSnapshot!==o||x||Et!==null&&Et.memoizedState.tag&1){if(l.flags|=2048,ws(9,Gh.bind(null,l,f,v,o),void 0,null),Dt===null)throw Error(r(349));(to&30)!==0||$h(l,o,v)}return v}function $h(t,o,l){t.flags|=16384,t={getSnapshot:o,value:l},o=mt.updateQueue,o===null?(o={lastEffect:null,stores:null},mt.updateQueue=o,o.stores=[t]):(l=o.stores,l===null?o.stores=[t]:l.push(t))}function Gh(t,o,l,f){o.value=l,o.getSnapshot=f,Vh(o)&&zh(t)}function Uh(t,o,l){return l(function(){Vh(o)&&zh(t)})}function Vh(t){var o=t.getSnapshot;t=t.value;try{var l=o();return!Un(t,l)}catch{return!0}}function zh(t){var o=mr(t,1);o!==null&&qn(o,t,1,-1)}function Wh(t){var o=er();return typeof t=="function"&&(t=t()),o.memoizedState=o.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ns,lastRenderedState:t},o.queue=t,t=t.dispatch=t0.bind(null,mt,t),[o.memoizedState,t]}function ws(t,o,l,f){return t={tag:t,create:o,destroy:l,deps:f,next:null},o=mt.updateQueue,o===null?(o={lastEffect:null,stores:null},mt.updateQueue=o,o.lastEffect=t.next=t):(l=o.lastEffect,l===null?o.lastEffect=t.next=t:(f=l.next,l.next=t,t.next=f,o.lastEffect=t)),t}function Hh(){return Rn().memoizedState}function Yi(t,o,l,f){var v=er();mt.flags|=t,v.memoizedState=ws(1|o,l,void 0,f===void 0?null:f)}function Qi(t,o,l,f){var v=Rn();f=f===void 0?null:f;var x=void 0;if(bt!==null){var S=bt.memoizedState;if(x=S.destroy,f!==null&&sc(f,S.deps)){v.memoizedState=ws(o,l,x,f);return}}mt.flags|=t,v.memoizedState=ws(1|o,l,x,f)}function qh(t,o){return Yi(8390656,8,t,o)}function uc(t,o){return Qi(2048,8,t,o)}function Kh(t,o){return Qi(4,2,t,o)}function Yh(t,o){return Qi(4,4,t,o)}function Qh(t,o){if(typeof o=="function")return t=t(),o(t),function(){o(null)};if(o!=null)return t=t(),o.current=t,function(){o.current=null}}function Xh(t,o,l){return l=l!=null?l.concat([t]):null,Qi(4,4,Qh.bind(null,o,t),l)}function dc(){}function Jh(t,o){var l=Rn();o=o===void 0?null:o;var f=l.memoizedState;return f!==null&&o!==null&&sc(o,f[1])?f[0]:(l.memoizedState=[t,o],t)}function Zh(t,o){var l=Rn();o=o===void 0?null:o;var f=l.memoizedState;return f!==null&&o!==null&&sc(o,f[1])?f[0]:(t=t(),l.memoizedState=[t,o],t)}function em(t,o,l){return(to&21)===0?(t.baseState&&(t.baseState=!1,an=!0),t.memoizedState=l):(Un(l,o)||(l=If(),mt.lanes|=l,no|=l,t.baseState=!0),o)}function Zb(t,o){var l=Ye;Ye=l!==0&&4>l?l:4,t(!0);var f=oc.transition;oc.transition={};try{t(!1),o()}finally{Ye=l,oc.transition=f}}function tm(){return Rn().memoizedState}function e0(t,o,l){var f=Lr(t);if(l={lane:f,action:l,hasEagerState:!1,eagerState:null,next:null},nm(t))rm(o,l);else if(l=Rh(t,o,l,f),l!==null){var v=Qt();qn(l,t,f,v),om(l,o,f)}}function t0(t,o,l){var f=Lr(t),v={lane:f,action:l,hasEagerState:!1,eagerState:null,next:null};if(nm(t))rm(o,v);else{var x=t.alternate;if(t.lanes===0&&(x===null||x.lanes===0)&&(x=o.lastRenderedReducer,x!==null))try{var S=o.lastRenderedState,T=x(S,l);if(v.hasEagerState=!0,v.eagerState=T,Un(T,S)){var F=o.interleaved;F===null?(v.next=v,Jl(o)):(v.next=F.next,F.next=v),o.interleaved=v;return}}catch{}finally{}l=Rh(t,o,v,f),l!==null&&(v=Qt(),qn(l,t,f,v),om(l,o,f))}}function nm(t){var o=t.alternate;return t===mt||o!==null&&o===mt}function rm(t,o){xs=Ki=!0;var l=t.pending;l===null?o.next=o:(o.next=l.next,l.next=o),t.pending=o}function om(t,o,l){if((l&4194240)!==0){var f=o.lanes;f&=t.pendingLanes,l|=f,o.lanes=l,hl(t,l)}}var Xi={readContext:Tn,useCallback:$t,useContext:$t,useEffect:$t,useImperativeHandle:$t,useInsertionEffect:$t,useLayoutEffect:$t,useMemo:$t,useReducer:$t,useRef:$t,useState:$t,useDebugValue:$t,useDeferredValue:$t,useTransition:$t,useMutableSource:$t,useSyncExternalStore:$t,useId:$t,unstable_isNewReconciler:!1},n0={readContext:Tn,useCallback:function(t,o){return er().memoizedState=[t,o===void 0?null:o],t},useContext:Tn,useEffect:qh,useImperativeHandle:function(t,o,l){return l=l!=null?l.concat([t]):null,Yi(4194308,4,Qh.bind(null,o,t),l)},useLayoutEffect:function(t,o){return Yi(4194308,4,t,o)},useInsertionEffect:function(t,o){return Yi(4,2,t,o)},useMemo:function(t,o){var l=er();return o=o===void 0?null:o,t=t(),l.memoizedState=[t,o],t},useReducer:function(t,o,l){var f=er();return o=l!==void 0?l(o):o,f.memoizedState=f.baseState=o,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:o},f.queue=t,t=t.dispatch=e0.bind(null,mt,t),[f.memoizedState,t]},useRef:function(t){var o=er();return t={current:t},o.memoizedState=t},useState:Wh,useDebugValue:dc,useDeferredValue:function(t){return er().memoizedState=t},useTransition:function(){var t=Wh(!1),o=t[0];return t=Zb.bind(null,t[1]),er().memoizedState=t,[o,t]},useMutableSource:function(){},useSyncExternalStore:function(t,o,l){var f=mt,v=er();if(it){if(l===void 0)throw Error(r(407));l=l()}else{if(l=o(),Dt===null)throw Error(r(349));(to&30)!==0||$h(f,o,l)}v.memoizedState=l;var x={value:l,getSnapshot:o};return v.queue=x,qh(Uh.bind(null,f,x,t),[t]),f.flags|=2048,ws(9,Gh.bind(null,f,x,l,o),void 0,null),l},useId:function(){var t=er(),o=Dt.identifierPrefix;if(it){var l=hr,f=fr;l=(f&~(1<<32-Gn(f)-1)).toString(32)+l,o=":"+o+"R"+l,l=bs++,0<l&&(o+="H"+l.toString(32)),o+=":"}else l=Jb++,o=":"+o+"r"+l.toString(32)+":";return t.memoizedState=o},unstable_isNewReconciler:!1},r0={readContext:Tn,useCallback:Jh,useContext:Tn,useEffect:uc,useImperativeHandle:Xh,useInsertionEffect:Kh,useLayoutEffect:Yh,useMemo:Zh,useReducer:lc,useRef:Hh,useState:function(){return lc(Ns)},useDebugValue:dc,useDeferredValue:function(t){var o=Rn();return em(o,bt.memoizedState,t)},useTransition:function(){var t=lc(Ns)[0],o=Rn().memoizedState;return[t,o]},useMutableSource:Fh,useSyncExternalStore:Bh,useId:tm,unstable_isNewReconciler:!1},o0={readContext:Tn,useCallback:Jh,useContext:Tn,useEffect:uc,useImperativeHandle:Xh,useInsertionEffect:Kh,useLayoutEffect:Yh,useMemo:Zh,useReducer:cc,useRef:Hh,useState:function(){return cc(Ns)},useDebugValue:dc,useDeferredValue:function(t){var o=Rn();return bt===null?o.memoizedState=t:em(o,bt.memoizedState,t)},useTransition:function(){var t=cc(Ns)[0],o=Rn().memoizedState;return[t,o]},useMutableSource:Fh,useSyncExternalStore:Bh,useId:tm,unstable_isNewReconciler:!1};function zn(t,o){if(t&&t.defaultProps){o=_({},o),t=t.defaultProps;for(var l in t)o[l]===void 0&&(o[l]=t[l]);return o}return o}function fc(t,o,l,f){o=t.memoizedState,l=l(f,o),l=l==null?o:_({},o,l),t.memoizedState=l,t.lanes===0&&(t.updateQueue.baseState=l)}var Ji={isMounted:function(t){return(t=t._reactInternals)?Kr(t)===t:!1},enqueueSetState:function(t,o,l){t=t._reactInternals;var f=Qt(),v=Lr(t),x=pr(f,v);x.payload=o,l!=null&&(x.callback=l),o=Rr(t,x,v),o!==null&&(qn(o,t,v,f),zi(o,t,v))},enqueueReplaceState:function(t,o,l){t=t._reactInternals;var f=Qt(),v=Lr(t),x=pr(f,v);x.tag=1,x.payload=o,l!=null&&(x.callback=l),o=Rr(t,x,v),o!==null&&(qn(o,t,v,f),zi(o,t,v))},enqueueForceUpdate:function(t,o){t=t._reactInternals;var l=Qt(),f=Lr(t),v=pr(l,f);v.tag=2,o!=null&&(v.callback=o),o=Rr(t,v,f),o!==null&&(qn(o,t,f,l),zi(o,t,f))}};function sm(t,o,l,f,v,x,S){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(f,x,S):o.prototype&&o.prototype.isPureReactComponent?!ls(l,f)||!ls(v,x):!0}function im(t,o,l){var f=!1,v=Ir,x=o.contextType;return typeof x=="object"&&x!==null?x=Tn(x):(v=sn(o)?Qr:Bt.current,f=o.contextTypes,x=(f=f!=null)?So(t,v):Ir),o=new o(l,x),t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=Ji,t.stateNode=o,o._reactInternals=t,f&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=v,t.__reactInternalMemoizedMaskedChildContext=x),o}function am(t,o,l,f){t=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(l,f),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(l,f),o.state!==t&&Ji.enqueueReplaceState(o,o.state,null)}function hc(t,o,l,f){var v=t.stateNode;v.props=l,v.state=t.memoizedState,v.refs={},Zl(t);var x=o.contextType;typeof x=="object"&&x!==null?v.context=Tn(x):(x=sn(o)?Qr:Bt.current,v.context=So(t,x)),v.state=t.memoizedState,x=o.getDerivedStateFromProps,typeof x=="function"&&(fc(t,o,x,l),v.state=t.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(o=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),o!==v.state&&Ji.enqueueReplaceState(v,v.state,null),Wi(t,l,v,f),v.state=t.memoizedState),typeof v.componentDidMount=="function"&&(t.flags|=4194308)}function To(t,o){try{var l="",f=o;do l+=ue(f),f=f.return;while(f);var v=l}catch(x){v=`
Error generating stack: `+x.message+`
`+x.stack}return{value:t,source:o,stack:v,digest:null}}function mc(t,o,l){return{value:t,source:null,stack:l??null,digest:o??null}}function pc(t,o){try{console.error(o.value)}catch(l){setTimeout(function(){throw l})}}var s0=typeof WeakMap=="function"?WeakMap:Map;function lm(t,o,l){l=pr(-1,l),l.tag=3,l.payload={element:null};var f=o.value;return l.callback=function(){sa||(sa=!0,Ic=f),pc(t,o)},l}function cm(t,o,l){l=pr(-1,l),l.tag=3;var f=t.type.getDerivedStateFromError;if(typeof f=="function"){var v=o.value;l.payload=function(){return f(v)},l.callback=function(){pc(t,o)}}var x=t.stateNode;return x!==null&&typeof x.componentDidCatch=="function"&&(l.callback=function(){pc(t,o),typeof f!="function"&&(Or===null?Or=new Set([this]):Or.add(this));var S=o.stack;this.componentDidCatch(o.value,{componentStack:S!==null?S:""})}),l}function um(t,o,l){var f=t.pingCache;if(f===null){f=t.pingCache=new s0;var v=new Set;f.set(o,v)}else v=f.get(o),v===void 0&&(v=new Set,f.set(o,v));v.has(l)||(v.add(l),t=x0.bind(null,t,o,l),o.then(t,t))}function dm(t){do{var o;if((o=t.tag===13)&&(o=t.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return t;t=t.return}while(t!==null);return null}function fm(t,o,l,f,v){return(t.mode&1)===0?(t===o?t.flags|=65536:(t.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(o=pr(-1,1),o.tag=2,Rr(l,o,1))),l.lanes|=1),t):(t.flags|=65536,t.lanes=v,t)}var i0=D.ReactCurrentOwner,an=!1;function Yt(t,o,l,f){o.child=t===null?Th(o,null,l,f):Ao(o,t.child,l,f)}function hm(t,o,l,f,v){l=l.render;var x=o.ref;return Io(o,v),f=ic(t,o,l,f,x,v),l=ac(),t!==null&&!an?(o.updateQueue=t.updateQueue,o.flags&=-2053,t.lanes&=~v,gr(t,o,v)):(it&&l&&Vl(o),o.flags|=1,Yt(t,o,f,v),o.child)}function mm(t,o,l,f,v){if(t===null){var x=l.type;return typeof x=="function"&&!Lc(x)&&x.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(o.tag=15,o.type=x,pm(t,o,x,f,v)):(t=da(l.type,null,f,o,o.mode,v),t.ref=o.ref,t.return=o,o.child=t)}if(x=t.child,(t.lanes&v)===0){var S=x.memoizedProps;if(l=l.compare,l=l!==null?l:ls,l(S,f)&&t.ref===o.ref)return gr(t,o,v)}return o.flags|=1,t=Br(x,f),t.ref=o.ref,t.return=o,o.child=t}function pm(t,o,l,f,v){if(t!==null){var x=t.memoizedProps;if(ls(x,f)&&t.ref===o.ref)if(an=!1,o.pendingProps=f=x,(t.lanes&v)!==0)(t.flags&131072)!==0&&(an=!0);else return o.lanes=t.lanes,gr(t,o,v)}return gc(t,o,l,f,v)}function gm(t,o,l){var f=o.pendingProps,v=f.children,x=t!==null?t.memoizedState:null;if(f.mode==="hidden")if((o.mode&1)===0)o.memoizedState={baseLanes:0,cachePool:null,transitions:null},tt(Mo,wn),wn|=l;else{if((l&1073741824)===0)return t=x!==null?x.baseLanes|l:l,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:t,cachePool:null,transitions:null},o.updateQueue=null,tt(Mo,wn),wn|=t,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},f=x!==null?x.baseLanes:l,tt(Mo,wn),wn|=f}else x!==null?(f=x.baseLanes|l,o.memoizedState=null):f=l,tt(Mo,wn),wn|=f;return Yt(t,o,v,l),o.child}function vm(t,o){var l=o.ref;(t===null&&l!==null||t!==null&&t.ref!==l)&&(o.flags|=512,o.flags|=2097152)}function gc(t,o,l,f,v){var x=sn(l)?Qr:Bt.current;return x=So(o,x),Io(o,v),l=ic(t,o,l,f,x,v),f=ac(),t!==null&&!an?(o.updateQueue=t.updateQueue,o.flags&=-2053,t.lanes&=~v,gr(t,o,v)):(it&&f&&Vl(o),o.flags|=1,Yt(t,o,l,v),o.child)}function ym(t,o,l,f,v){if(sn(l)){var x=!0;_i(o)}else x=!1;if(Io(o,v),o.stateNode===null)ea(t,o),im(o,l,f),hc(o,l,f,v),f=!0;else if(t===null){var S=o.stateNode,T=o.memoizedProps;S.props=T;var F=S.context,X=l.contextType;typeof X=="object"&&X!==null?X=Tn(X):(X=sn(l)?Qr:Bt.current,X=So(o,X));var ae=l.getDerivedStateFromProps,le=typeof ae=="function"||typeof S.getSnapshotBeforeUpdate=="function";le||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(T!==f||F!==X)&&am(o,S,f,X),Tr=!1;var ie=o.memoizedState;S.state=ie,Wi(o,f,S,v),F=o.memoizedState,T!==f||ie!==F||on.current||Tr?(typeof ae=="function"&&(fc(o,l,ae,f),F=o.memoizedState),(T=Tr||sm(o,l,T,f,ie,F,X))?(le||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(o.flags|=4194308)):(typeof S.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=f,o.memoizedState=F),S.props=f,S.state=F,S.context=X,f=T):(typeof S.componentDidMount=="function"&&(o.flags|=4194308),f=!1)}else{S=o.stateNode,Mh(t,o),T=o.memoizedProps,X=o.type===o.elementType?T:zn(o.type,T),S.props=X,le=o.pendingProps,ie=S.context,F=l.contextType,typeof F=="object"&&F!==null?F=Tn(F):(F=sn(l)?Qr:Bt.current,F=So(o,F));var me=l.getDerivedStateFromProps;(ae=typeof me=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(T!==le||ie!==F)&&am(o,S,f,F),Tr=!1,ie=o.memoizedState,S.state=ie,Wi(o,f,S,v);var ye=o.memoizedState;T!==le||ie!==ye||on.current||Tr?(typeof me=="function"&&(fc(o,l,me,f),ye=o.memoizedState),(X=Tr||sm(o,l,X,f,ie,ye,F)||!1)?(ae||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(f,ye,F),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(f,ye,F)),typeof S.componentDidUpdate=="function"&&(o.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof S.componentDidUpdate!="function"||T===t.memoizedProps&&ie===t.memoizedState||(o.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||T===t.memoizedProps&&ie===t.memoizedState||(o.flags|=1024),o.memoizedProps=f,o.memoizedState=ye),S.props=f,S.state=ye,S.context=F,f=X):(typeof S.componentDidUpdate!="function"||T===t.memoizedProps&&ie===t.memoizedState||(o.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||T===t.memoizedProps&&ie===t.memoizedState||(o.flags|=1024),f=!1)}return vc(t,o,l,f,x,v)}function vc(t,o,l,f,v,x){vm(t,o);var S=(o.flags&128)!==0;if(!f&&!S)return v&&Ch(o,l,!1),gr(t,o,x);f=o.stateNode,i0.current=o;var T=S&&typeof l.getDerivedStateFromError!="function"?null:f.render();return o.flags|=1,t!==null&&S?(o.child=Ao(o,t.child,null,x),o.child=Ao(o,null,T,x)):Yt(t,o,T,x),o.memoizedState=f.state,v&&Ch(o,l,!0),o.child}function xm(t){var o=t.stateNode;o.pendingContext?Nh(t,o.pendingContext,o.pendingContext!==o.context):o.context&&Nh(t,o.context,!1),ec(t,o.containerInfo)}function bm(t,o,l,f,v){return jo(),ql(v),o.flags|=256,Yt(t,o,l,f),o.child}var yc={dehydrated:null,treeContext:null,retryLane:0};function xc(t){return{baseLanes:t,cachePool:null,transitions:null}}function Nm(t,o,l){var f=o.pendingProps,v=ht.current,x=!1,S=(o.flags&128)!==0,T;if((T=S)||(T=t!==null&&t.memoizedState===null?!1:(v&2)!==0),T?(x=!0,o.flags&=-129):(t===null||t.memoizedState!==null)&&(v|=1),tt(ht,v&1),t===null)return Hl(o),t=o.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?((o.mode&1)===0?o.lanes=1:t.data==="$!"?o.lanes=8:o.lanes=1073741824,null):(S=f.children,t=f.fallback,x?(f=o.mode,x=o.child,S={mode:"hidden",children:S},(f&1)===0&&x!==null?(x.childLanes=0,x.pendingProps=S):x=fa(S,f,0,null),t=io(t,f,l,null),x.return=o,t.return=o,x.sibling=t,o.child=x,o.child.memoizedState=xc(l),o.memoizedState=yc,t):bc(o,S));if(v=t.memoizedState,v!==null&&(T=v.dehydrated,T!==null))return a0(t,o,S,f,T,v,l);if(x){x=f.fallback,S=o.mode,v=t.child,T=v.sibling;var F={mode:"hidden",children:f.children};return(S&1)===0&&o.child!==v?(f=o.child,f.childLanes=0,f.pendingProps=F,o.deletions=null):(f=Br(v,F),f.subtreeFlags=v.subtreeFlags&14680064),T!==null?x=Br(T,x):(x=io(x,S,l,null),x.flags|=2),x.return=o,f.return=o,f.sibling=x,o.child=f,f=x,x=o.child,S=t.child.memoizedState,S=S===null?xc(l):{baseLanes:S.baseLanes|l,cachePool:null,transitions:S.transitions},x.memoizedState=S,x.childLanes=t.childLanes&~l,o.memoizedState=yc,f}return x=t.child,t=x.sibling,f=Br(x,{mode:"visible",children:f.children}),(o.mode&1)===0&&(f.lanes=l),f.return=o,f.sibling=null,t!==null&&(l=o.deletions,l===null?(o.deletions=[t],o.flags|=16):l.push(t)),o.child=f,o.memoizedState=null,f}function bc(t,o){return o=fa({mode:"visible",children:o},t.mode,0,null),o.return=t,t.child=o}function Zi(t,o,l,f){return f!==null&&ql(f),Ao(o,t.child,null,l),t=bc(o,o.pendingProps.children),t.flags|=2,o.memoizedState=null,t}function a0(t,o,l,f,v,x,S){if(l)return o.flags&256?(o.flags&=-257,f=mc(Error(r(422))),Zi(t,o,S,f)):o.memoizedState!==null?(o.child=t.child,o.flags|=128,null):(x=f.fallback,v=o.mode,f=fa({mode:"visible",children:f.children},v,0,null),x=io(x,v,S,null),x.flags|=2,f.return=o,x.return=o,f.sibling=x,o.child=f,(o.mode&1)!==0&&Ao(o,t.child,null,S),o.child.memoizedState=xc(S),o.memoizedState=yc,x);if((o.mode&1)===0)return Zi(t,o,S,null);if(v.data==="$!"){if(f=v.nextSibling&&v.nextSibling.dataset,f)var T=f.dgst;return f=T,x=Error(r(419)),f=mc(x,f,void 0),Zi(t,o,S,f)}if(T=(S&t.childLanes)!==0,an||T){if(f=Dt,f!==null){switch(S&-S){case 4:v=2;break;case 16:v=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:v=32;break;case 536870912:v=268435456;break;default:v=0}v=(v&(f.suspendedLanes|S))!==0?0:v,v!==0&&v!==x.retryLane&&(x.retryLane=v,mr(t,v),qn(f,t,v,-1))}return _c(),f=mc(Error(r(421))),Zi(t,o,S,f)}return v.data==="$?"?(o.flags|=128,o.child=t.child,o=b0.bind(null,t),v._reactRetry=o,null):(t=x.treeContext,Nn=Ar(v.nextSibling),bn=o,it=!0,Vn=null,t!==null&&(In[Pn++]=fr,In[Pn++]=hr,In[Pn++]=Xr,fr=t.id,hr=t.overflow,Xr=o),o=bc(o,f.children),o.flags|=4096,o)}function wm(t,o,l){t.lanes|=o;var f=t.alternate;f!==null&&(f.lanes|=o),Xl(t.return,o,l)}function Nc(t,o,l,f,v){var x=t.memoizedState;x===null?t.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:f,tail:l,tailMode:v}:(x.isBackwards=o,x.rendering=null,x.renderingStartTime=0,x.last=f,x.tail=l,x.tailMode=v)}function Cm(t,o,l){var f=o.pendingProps,v=f.revealOrder,x=f.tail;if(Yt(t,o,f.children,l),f=ht.current,(f&2)!==0)f=f&1|2,o.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=o.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&wm(t,l,o);else if(t.tag===19)wm(t,l,o);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===o)break e;for(;t.sibling===null;){if(t.return===null||t.return===o)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}f&=1}if(tt(ht,f),(o.mode&1)===0)o.memoizedState=null;else switch(v){case"forwards":for(l=o.child,v=null;l!==null;)t=l.alternate,t!==null&&Hi(t)===null&&(v=l),l=l.sibling;l=v,l===null?(v=o.child,o.child=null):(v=l.sibling,l.sibling=null),Nc(o,!1,v,l,x);break;case"backwards":for(l=null,v=o.child,o.child=null;v!==null;){if(t=v.alternate,t!==null&&Hi(t)===null){o.child=v;break}t=v.sibling,v.sibling=l,l=v,v=t}Nc(o,!0,l,null,x);break;case"together":Nc(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function ea(t,o){(o.mode&1)===0&&t!==null&&(t.alternate=null,o.alternate=null,o.flags|=2)}function gr(t,o,l){if(t!==null&&(o.dependencies=t.dependencies),no|=o.lanes,(l&o.childLanes)===0)return null;if(t!==null&&o.child!==t.child)throw Error(r(153));if(o.child!==null){for(t=o.child,l=Br(t,t.pendingProps),o.child=l,l.return=o;t.sibling!==null;)t=t.sibling,l=l.sibling=Br(t,t.pendingProps),l.return=o;l.sibling=null}return o.child}function l0(t,o,l){switch(o.tag){case 3:xm(o),jo();break;case 5:Lh(o);break;case 1:sn(o.type)&&_i(o);break;case 4:ec(o,o.stateNode.containerInfo);break;case 10:var f=o.type._context,v=o.memoizedProps.value;tt(Ui,f._currentValue),f._currentValue=v;break;case 13:if(f=o.memoizedState,f!==null)return f.dehydrated!==null?(tt(ht,ht.current&1),o.flags|=128,null):(l&o.child.childLanes)!==0?Nm(t,o,l):(tt(ht,ht.current&1),t=gr(t,o,l),t!==null?t.sibling:null);tt(ht,ht.current&1);break;case 19:if(f=(l&o.childLanes)!==0,(t.flags&128)!==0){if(f)return Cm(t,o,l);o.flags|=128}if(v=o.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),tt(ht,ht.current),f)break;return null;case 22:case 23:return o.lanes=0,gm(t,o,l)}return gr(t,o,l)}var Sm,wc,Em,Dm;Sm=function(t,o){for(var l=o.child;l!==null;){if(l.tag===5||l.tag===6)t.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return;l=l.return}l.sibling.return=l.return,l=l.sibling}},wc=function(){},Em=function(t,o,l,f){var v=t.memoizedProps;if(v!==f){t=o.stateNode,eo(Zn.current);var x=null;switch(l){case"input":v=Ce(t,v),f=Ce(t,f),x=[];break;case"select":v=_({},v,{value:void 0}),f=_({},f,{value:void 0}),x=[];break;case"textarea":v=We(t,v),f=We(t,f),x=[];break;default:typeof v.onClick!="function"&&typeof f.onClick=="function"&&(t.onclick=Ri)}An(l,f);var S;l=null;for(X in v)if(!f.hasOwnProperty(X)&&v.hasOwnProperty(X)&&v[X]!=null)if(X==="style"){var T=v[X];for(S in T)T.hasOwnProperty(S)&&(l||(l={}),l[S]="")}else X!=="dangerouslySetInnerHTML"&&X!=="children"&&X!=="suppressContentEditableWarning"&&X!=="suppressHydrationWarning"&&X!=="autoFocus"&&(i.hasOwnProperty(X)?x||(x=[]):(x=x||[]).push(X,null));for(X in f){var F=f[X];if(T=v?.[X],f.hasOwnProperty(X)&&F!==T&&(F!=null||T!=null))if(X==="style")if(T){for(S in T)!T.hasOwnProperty(S)||F&&F.hasOwnProperty(S)||(l||(l={}),l[S]="");for(S in F)F.hasOwnProperty(S)&&T[S]!==F[S]&&(l||(l={}),l[S]=F[S])}else l||(x||(x=[]),x.push(X,l)),l=F;else X==="dangerouslySetInnerHTML"?(F=F?F.__html:void 0,T=T?T.__html:void 0,F!=null&&T!==F&&(x=x||[]).push(X,F)):X==="children"?typeof F!="string"&&typeof F!="number"||(x=x||[]).push(X,""+F):X!=="suppressContentEditableWarning"&&X!=="suppressHydrationWarning"&&(i.hasOwnProperty(X)?(F!=null&&X==="onScroll"&&rt("scroll",t),x||T===F||(x=[])):(x=x||[]).push(X,F))}l&&(x=x||[]).push("style",l);var X=x;(o.updateQueue=X)&&(o.flags|=4)}},Dm=function(t,o,l,f){l!==f&&(o.flags|=4)};function Cs(t,o){if(!it)switch(t.tailMode){case"hidden":o=t.tail;for(var l=null;o!==null;)o.alternate!==null&&(l=o),o=o.sibling;l===null?t.tail=null:l.sibling=null;break;case"collapsed":l=t.tail;for(var f=null;l!==null;)l.alternate!==null&&(f=l),l=l.sibling;f===null?o||t.tail===null?t.tail=null:t.tail.sibling=null:f.sibling=null}}function Gt(t){var o=t.alternate!==null&&t.alternate.child===t.child,l=0,f=0;if(o)for(var v=t.child;v!==null;)l|=v.lanes|v.childLanes,f|=v.subtreeFlags&14680064,f|=v.flags&14680064,v.return=t,v=v.sibling;else for(v=t.child;v!==null;)l|=v.lanes|v.childLanes,f|=v.subtreeFlags,f|=v.flags,v.return=t,v=v.sibling;return t.subtreeFlags|=f,t.childLanes=l,o}function c0(t,o,l){var f=o.pendingProps;switch(zl(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gt(o),null;case 1:return sn(o.type)&&Oi(),Gt(o),null;case 3:return f=o.stateNode,Po(),ot(on),ot(Bt),rc(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(t===null||t.child===null)&&($i(o)?o.flags|=4:t===null||t.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,Vn!==null&&(Rc(Vn),Vn=null))),wc(t,o),Gt(o),null;case 5:tc(o);var v=eo(ys.current);if(l=o.type,t!==null&&o.stateNode!=null)Em(t,o,l,f,v),t.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!f){if(o.stateNode===null)throw Error(r(166));return Gt(o),null}if(t=eo(Zn.current),$i(o)){f=o.stateNode,l=o.type;var x=o.memoizedProps;switch(f[Jn]=o,f[hs]=x,t=(o.mode&1)!==0,l){case"dialog":rt("cancel",f),rt("close",f);break;case"iframe":case"object":case"embed":rt("load",f);break;case"video":case"audio":for(v=0;v<us.length;v++)rt(us[v],f);break;case"source":rt("error",f);break;case"img":case"image":case"link":rt("error",f),rt("load",f);break;case"details":rt("toggle",f);break;case"input":ze(f,x),rt("invalid",f);break;case"select":f._wrapperState={wasMultiple:!!x.multiple},rt("invalid",f);break;case"textarea":ut(f,x),rt("invalid",f)}An(l,x),v=null;for(var S in x)if(x.hasOwnProperty(S)){var T=x[S];S==="children"?typeof T=="string"?f.textContent!==T&&(x.suppressHydrationWarning!==!0&&Ti(f.textContent,T,t),v=["children",T]):typeof T=="number"&&f.textContent!==""+T&&(x.suppressHydrationWarning!==!0&&Ti(f.textContent,T,t),v=["children",""+T]):i.hasOwnProperty(S)&&T!=null&&S==="onScroll"&&rt("scroll",f)}switch(l){case"input":nt(f),Wt(f,x,!0);break;case"textarea":nt(f),gn(f);break;case"select":case"option":break;default:typeof x.onClick=="function"&&(f.onclick=Ri)}f=v,o.updateQueue=f,f!==null&&(o.flags|=4)}else{S=v.nodeType===9?v:v.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Ht(l)),t==="http://www.w3.org/1999/xhtml"?l==="script"?(t=S.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof f.is=="string"?t=S.createElement(l,{is:f.is}):(t=S.createElement(l),l==="select"&&(S=t,f.multiple?S.multiple=!0:f.size&&(S.size=f.size))):t=S.createElementNS(t,l),t[Jn]=o,t[hs]=f,Sm(t,o,!1,!1),o.stateNode=t;e:{switch(S=Lt(l,f),l){case"dialog":rt("cancel",t),rt("close",t),v=f;break;case"iframe":case"object":case"embed":rt("load",t),v=f;break;case"video":case"audio":for(v=0;v<us.length;v++)rt(us[v],t);v=f;break;case"source":rt("error",t),v=f;break;case"img":case"image":case"link":rt("error",t),rt("load",t),v=f;break;case"details":rt("toggle",t),v=f;break;case"input":ze(t,f),v=Ce(t,f),rt("invalid",t);break;case"option":v=f;break;case"select":t._wrapperState={wasMultiple:!!f.multiple},v=_({},f,{value:void 0}),rt("invalid",t);break;case"textarea":ut(t,f),v=We(t,f),rt("invalid",t);break;default:v=f}An(l,v),T=v;for(x in T)if(T.hasOwnProperty(x)){var F=T[x];x==="style"?en(t,F):x==="dangerouslySetInnerHTML"?(F=F?F.__html:void 0,F!=null&&Ge(t,F)):x==="children"?typeof F=="string"?(l!=="textarea"||F!=="")&&Le(t,F):typeof F=="number"&&Le(t,""+F):x!=="suppressContentEditableWarning"&&x!=="suppressHydrationWarning"&&x!=="autoFocus"&&(i.hasOwnProperty(x)?F!=null&&x==="onScroll"&&rt("scroll",t):F!=null&&A(t,x,F,S))}switch(l){case"input":nt(t),Wt(t,f,!1);break;case"textarea":nt(t),gn(t);break;case"option":f.value!=null&&t.setAttribute("value",""+pe(f.value));break;case"select":t.multiple=!!f.multiple,x=f.value,x!=null?et(t,!!f.multiple,x,!1):f.defaultValue!=null&&et(t,!!f.multiple,f.defaultValue,!0);break;default:typeof v.onClick=="function"&&(t.onclick=Ri)}switch(l){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}}f&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return Gt(o),null;case 6:if(t&&o.stateNode!=null)Dm(t,o,t.memoizedProps,f);else{if(typeof f!="string"&&o.stateNode===null)throw Error(r(166));if(l=eo(ys.current),eo(Zn.current),$i(o)){if(f=o.stateNode,l=o.memoizedProps,f[Jn]=o,(x=f.nodeValue!==l)&&(t=bn,t!==null))switch(t.tag){case 3:Ti(f.nodeValue,l,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ti(f.nodeValue,l,(t.mode&1)!==0)}x&&(o.flags|=4)}else f=(l.nodeType===9?l:l.ownerDocument).createTextNode(f),f[Jn]=o,o.stateNode=f}return Gt(o),null;case 13:if(ot(ht),f=o.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(it&&Nn!==null&&(o.mode&1)!==0&&(o.flags&128)===0)kh(),jo(),o.flags|=98560,x=!1;else if(x=$i(o),f!==null&&f.dehydrated!==null){if(t===null){if(!x)throw Error(r(318));if(x=o.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(r(317));x[Jn]=o}else jo(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Gt(o),x=!1}else Vn!==null&&(Rc(Vn),Vn=null),x=!0;if(!x)return o.flags&65536?o:null}return(o.flags&128)!==0?(o.lanes=l,o):(f=f!==null,f!==(t!==null&&t.memoizedState!==null)&&f&&(o.child.flags|=8192,(o.mode&1)!==0&&(t===null||(ht.current&1)!==0?Nt===0&&(Nt=3):_c())),o.updateQueue!==null&&(o.flags|=4),Gt(o),null);case 4:return Po(),wc(t,o),t===null&&ds(o.stateNode.containerInfo),Gt(o),null;case 10:return Ql(o.type._context),Gt(o),null;case 17:return sn(o.type)&&Oi(),Gt(o),null;case 19:if(ot(ht),x=o.memoizedState,x===null)return Gt(o),null;if(f=(o.flags&128)!==0,S=x.rendering,S===null)if(f)Cs(x,!1);else{if(Nt!==0||t!==null&&(t.flags&128)!==0)for(t=o.child;t!==null;){if(S=Hi(t),S!==null){for(o.flags|=128,Cs(x,!1),f=S.updateQueue,f!==null&&(o.updateQueue=f,o.flags|=4),o.subtreeFlags=0,f=l,l=o.child;l!==null;)x=l,t=f,x.flags&=14680066,S=x.alternate,S===null?(x.childLanes=0,x.lanes=t,x.child=null,x.subtreeFlags=0,x.memoizedProps=null,x.memoizedState=null,x.updateQueue=null,x.dependencies=null,x.stateNode=null):(x.childLanes=S.childLanes,x.lanes=S.lanes,x.child=S.child,x.subtreeFlags=0,x.deletions=null,x.memoizedProps=S.memoizedProps,x.memoizedState=S.memoizedState,x.updateQueue=S.updateQueue,x.type=S.type,t=S.dependencies,x.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),l=l.sibling;return tt(ht,ht.current&1|2),o.child}t=t.sibling}x.tail!==null&&gt()>Oo&&(o.flags|=128,f=!0,Cs(x,!1),o.lanes=4194304)}else{if(!f)if(t=Hi(S),t!==null){if(o.flags|=128,f=!0,l=t.updateQueue,l!==null&&(o.updateQueue=l,o.flags|=4),Cs(x,!0),x.tail===null&&x.tailMode==="hidden"&&!S.alternate&&!it)return Gt(o),null}else 2*gt()-x.renderingStartTime>Oo&&l!==1073741824&&(o.flags|=128,f=!0,Cs(x,!1),o.lanes=4194304);x.isBackwards?(S.sibling=o.child,o.child=S):(l=x.last,l!==null?l.sibling=S:o.child=S,x.last=S)}return x.tail!==null?(o=x.tail,x.rendering=o,x.tail=o.sibling,x.renderingStartTime=gt(),o.sibling=null,l=ht.current,tt(ht,f?l&1|2:l&1),o):(Gt(o),null);case 22:case 23:return Oc(),f=o.memoizedState!==null,t!==null&&t.memoizedState!==null!==f&&(o.flags|=8192),f&&(o.mode&1)!==0?(wn&1073741824)!==0&&(Gt(o),o.subtreeFlags&6&&(o.flags|=8192)):Gt(o),null;case 24:return null;case 25:return null}throw Error(r(156,o.tag))}function u0(t,o){switch(zl(o),o.tag){case 1:return sn(o.type)&&Oi(),t=o.flags,t&65536?(o.flags=t&-65537|128,o):null;case 3:return Po(),ot(on),ot(Bt),rc(),t=o.flags,(t&65536)!==0&&(t&128)===0?(o.flags=t&-65537|128,o):null;case 5:return tc(o),null;case 13:if(ot(ht),t=o.memoizedState,t!==null&&t.dehydrated!==null){if(o.alternate===null)throw Error(r(340));jo()}return t=o.flags,t&65536?(o.flags=t&-65537|128,o):null;case 19:return ot(ht),null;case 4:return Po(),null;case 10:return Ql(o.type._context),null;case 22:case 23:return Oc(),null;case 24:return null;default:return null}}var ta=!1,Ut=!1,d0=typeof WeakSet=="function"?WeakSet:Set,ge=null;function Ro(t,o){var l=t.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(f){pt(t,o,f)}else l.current=null}function Cc(t,o,l){try{l()}catch(f){pt(t,o,f)}}var jm=!1;function f0(t,o){if(Ol=Ni,t=sh(),jl(t)){if("selectionStart"in t)var l={start:t.selectionStart,end:t.selectionEnd};else e:{l=(l=t.ownerDocument)&&l.defaultView||window;var f=l.getSelection&&l.getSelection();if(f&&f.rangeCount!==0){l=f.anchorNode;var v=f.anchorOffset,x=f.focusNode;f=f.focusOffset;try{l.nodeType,x.nodeType}catch{l=null;break e}var S=0,T=-1,F=-1,X=0,ae=0,le=t,ie=null;t:for(;;){for(var me;le!==l||v!==0&&le.nodeType!==3||(T=S+v),le!==x||f!==0&&le.nodeType!==3||(F=S+f),le.nodeType===3&&(S+=le.nodeValue.length),(me=le.firstChild)!==null;)ie=le,le=me;for(;;){if(le===t)break t;if(ie===l&&++X===v&&(T=S),ie===x&&++ae===f&&(F=S),(me=le.nextSibling)!==null)break;le=ie,ie=le.parentNode}le=me}l=T===-1||F===-1?null:{start:T,end:F}}else l=null}l=l||{start:0,end:0}}else l=null;for(_l={focusedElem:t,selectionRange:l},Ni=!1,ge=o;ge!==null;)if(o=ge,t=o.child,(o.subtreeFlags&1028)!==0&&t!==null)t.return=o,ge=t;else for(;ge!==null;){o=ge;try{var ye=o.alternate;if((o.flags&1024)!==0)switch(o.tag){case 0:case 11:case 15:break;case 1:if(ye!==null){var xe=ye.memoizedProps,vt=ye.memoizedState,z=o.stateNode,B=z.getSnapshotBeforeUpdate(o.elementType===o.type?xe:zn(o.type,xe),vt);z.__reactInternalSnapshotBeforeUpdate=B}break;case 3:var H=o.stateNode.containerInfo;H.nodeType===1?H.textContent="":H.nodeType===9&&H.documentElement&&H.removeChild(H.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(ce){pt(o,o.return,ce)}if(t=o.sibling,t!==null){t.return=o.return,ge=t;break}ge=o.return}return ye=jm,jm=!1,ye}function Ss(t,o,l){var f=o.updateQueue;if(f=f!==null?f.lastEffect:null,f!==null){var v=f=f.next;do{if((v.tag&t)===t){var x=v.destroy;v.destroy=void 0,x!==void 0&&Cc(o,l,x)}v=v.next}while(v!==f)}}function na(t,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var l=o=o.next;do{if((l.tag&t)===t){var f=l.create;l.destroy=f()}l=l.next}while(l!==o)}}function Sc(t){var o=t.ref;if(o!==null){var l=t.stateNode;switch(t.tag){case 5:t=l;break;default:t=l}typeof o=="function"?o(t):o.current=t}}function Am(t){var o=t.alternate;o!==null&&(t.alternate=null,Am(o)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(o=t.stateNode,o!==null&&(delete o[Jn],delete o[hs],delete o[$l],delete o[Kb],delete o[Yb])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function km(t){return t.tag===5||t.tag===3||t.tag===4}function Im(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||km(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ec(t,o,l){var f=t.tag;if(f===5||f===6)t=t.stateNode,o?l.nodeType===8?l.parentNode.insertBefore(t,o):l.insertBefore(t,o):(l.nodeType===8?(o=l.parentNode,o.insertBefore(t,l)):(o=l,o.appendChild(t)),l=l._reactRootContainer,l!=null||o.onclick!==null||(o.onclick=Ri));else if(f!==4&&(t=t.child,t!==null))for(Ec(t,o,l),t=t.sibling;t!==null;)Ec(t,o,l),t=t.sibling}function Dc(t,o,l){var f=t.tag;if(f===5||f===6)t=t.stateNode,o?l.insertBefore(t,o):l.appendChild(t);else if(f!==4&&(t=t.child,t!==null))for(Dc(t,o,l),t=t.sibling;t!==null;)Dc(t,o,l),t=t.sibling}var Rt=null,Wn=!1;function Mr(t,o,l){for(l=l.child;l!==null;)Pm(t,o,l),l=l.sibling}function Pm(t,o,l){if(Xn&&typeof Xn.onCommitFiberUnmount=="function")try{Xn.onCommitFiberUnmount(pi,l)}catch{}switch(l.tag){case 5:Ut||Ro(l,o);case 6:var f=Rt,v=Wn;Rt=null,Mr(t,o,l),Rt=f,Wn=v,Rt!==null&&(Wn?(t=Rt,l=l.stateNode,t.nodeType===8?t.parentNode.removeChild(l):t.removeChild(l)):Rt.removeChild(l.stateNode));break;case 18:Rt!==null&&(Wn?(t=Rt,l=l.stateNode,t.nodeType===8?Bl(t.parentNode,l):t.nodeType===1&&Bl(t,l),ns(t)):Bl(Rt,l.stateNode));break;case 4:f=Rt,v=Wn,Rt=l.stateNode.containerInfo,Wn=!0,Mr(t,o,l),Rt=f,Wn=v;break;case 0:case 11:case 14:case 15:if(!Ut&&(f=l.updateQueue,f!==null&&(f=f.lastEffect,f!==null))){v=f=f.next;do{var x=v,S=x.destroy;x=x.tag,S!==void 0&&((x&2)!==0||(x&4)!==0)&&Cc(l,o,S),v=v.next}while(v!==f)}Mr(t,o,l);break;case 1:if(!Ut&&(Ro(l,o),f=l.stateNode,typeof f.componentWillUnmount=="function"))try{f.props=l.memoizedProps,f.state=l.memoizedState,f.componentWillUnmount()}catch(T){pt(l,o,T)}Mr(t,o,l);break;case 21:Mr(t,o,l);break;case 22:l.mode&1?(Ut=(f=Ut)||l.memoizedState!==null,Mr(t,o,l),Ut=f):Mr(t,o,l);break;default:Mr(t,o,l)}}function Tm(t){var o=t.updateQueue;if(o!==null){t.updateQueue=null;var l=t.stateNode;l===null&&(l=t.stateNode=new d0),o.forEach(function(f){var v=N0.bind(null,t,f);l.has(f)||(l.add(f),f.then(v,v))})}}function Hn(t,o){var l=o.deletions;if(l!==null)for(var f=0;f<l.length;f++){var v=l[f];try{var x=t,S=o,T=S;e:for(;T!==null;){switch(T.tag){case 5:Rt=T.stateNode,Wn=!1;break e;case 3:Rt=T.stateNode.containerInfo,Wn=!0;break e;case 4:Rt=T.stateNode.containerInfo,Wn=!0;break e}T=T.return}if(Rt===null)throw Error(r(160));Pm(x,S,v),Rt=null,Wn=!1;var F=v.alternate;F!==null&&(F.return=null),v.return=null}catch(X){pt(v,o,X)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)Rm(o,t),o=o.sibling}function Rm(t,o){var l=t.alternate,f=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Hn(o,t),tr(t),f&4){try{Ss(3,t,t.return),na(3,t)}catch(xe){pt(t,t.return,xe)}try{Ss(5,t,t.return)}catch(xe){pt(t,t.return,xe)}}break;case 1:Hn(o,t),tr(t),f&512&&l!==null&&Ro(l,l.return);break;case 5:if(Hn(o,t),tr(t),f&512&&l!==null&&Ro(l,l.return),t.flags&32){var v=t.stateNode;try{Le(v,"")}catch(xe){pt(t,t.return,xe)}}if(f&4&&(v=t.stateNode,v!=null)){var x=t.memoizedProps,S=l!==null?l.memoizedProps:x,T=t.type,F=t.updateQueue;if(t.updateQueue=null,F!==null)try{T==="input"&&x.type==="radio"&&x.name!=null&&Je(v,x),Lt(T,S);var X=Lt(T,x);for(S=0;S<F.length;S+=2){var ae=F[S],le=F[S+1];ae==="style"?en(v,le):ae==="dangerouslySetInnerHTML"?Ge(v,le):ae==="children"?Le(v,le):A(v,ae,le,X)}switch(T){case"input":Ct(v,x);break;case"textarea":yt(v,x);break;case"select":var ie=v._wrapperState.wasMultiple;v._wrapperState.wasMultiple=!!x.multiple;var me=x.value;me!=null?et(v,!!x.multiple,me,!1):ie!==!!x.multiple&&(x.defaultValue!=null?et(v,!!x.multiple,x.defaultValue,!0):et(v,!!x.multiple,x.multiple?[]:"",!1))}v[hs]=x}catch(xe){pt(t,t.return,xe)}}break;case 6:if(Hn(o,t),tr(t),f&4){if(t.stateNode===null)throw Error(r(162));v=t.stateNode,x=t.memoizedProps;try{v.nodeValue=x}catch(xe){pt(t,t.return,xe)}}break;case 3:if(Hn(o,t),tr(t),f&4&&l!==null&&l.memoizedState.isDehydrated)try{ns(o.containerInfo)}catch(xe){pt(t,t.return,xe)}break;case 4:Hn(o,t),tr(t);break;case 13:Hn(o,t),tr(t),v=t.child,v.flags&8192&&(x=v.memoizedState!==null,v.stateNode.isHidden=x,!x||v.alternate!==null&&v.alternate.memoizedState!==null||(kc=gt())),f&4&&Tm(t);break;case 22:if(ae=l!==null&&l.memoizedState!==null,t.mode&1?(Ut=(X=Ut)||ae,Hn(o,t),Ut=X):Hn(o,t),tr(t),f&8192){if(X=t.memoizedState!==null,(t.stateNode.isHidden=X)&&!ae&&(t.mode&1)!==0)for(ge=t,ae=t.child;ae!==null;){for(le=ge=ae;ge!==null;){switch(ie=ge,me=ie.child,ie.tag){case 0:case 11:case 14:case 15:Ss(4,ie,ie.return);break;case 1:Ro(ie,ie.return);var ye=ie.stateNode;if(typeof ye.componentWillUnmount=="function"){f=ie,l=ie.return;try{o=f,ye.props=o.memoizedProps,ye.state=o.memoizedState,ye.componentWillUnmount()}catch(xe){pt(f,l,xe)}}break;case 5:Ro(ie,ie.return);break;case 22:if(ie.memoizedState!==null){_m(le);continue}}me!==null?(me.return=ie,ge=me):_m(le)}ae=ae.sibling}e:for(ae=null,le=t;;){if(le.tag===5){if(ae===null){ae=le;try{v=le.stateNode,X?(x=v.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none"):(T=le.stateNode,F=le.memoizedProps.style,S=F!=null&&F.hasOwnProperty("display")?F.display:null,T.style.display=Zt("display",S))}catch(xe){pt(t,t.return,xe)}}}else if(le.tag===6){if(ae===null)try{le.stateNode.nodeValue=X?"":le.memoizedProps}catch(xe){pt(t,t.return,xe)}}else if((le.tag!==22&&le.tag!==23||le.memoizedState===null||le===t)&&le.child!==null){le.child.return=le,le=le.child;continue}if(le===t)break e;for(;le.sibling===null;){if(le.return===null||le.return===t)break e;ae===le&&(ae=null),le=le.return}ae===le&&(ae=null),le.sibling.return=le.return,le=le.sibling}}break;case 19:Hn(o,t),tr(t),f&4&&Tm(t);break;case 21:break;default:Hn(o,t),tr(t)}}function tr(t){var o=t.flags;if(o&2){try{e:{for(var l=t.return;l!==null;){if(km(l)){var f=l;break e}l=l.return}throw Error(r(160))}switch(f.tag){case 5:var v=f.stateNode;f.flags&32&&(Le(v,""),f.flags&=-33);var x=Im(t);Dc(t,x,v);break;case 3:case 4:var S=f.stateNode.containerInfo,T=Im(t);Ec(t,T,S);break;default:throw Error(r(161))}}catch(F){pt(t,t.return,F)}t.flags&=-3}o&4096&&(t.flags&=-4097)}function h0(t,o,l){ge=t,Mm(t)}function Mm(t,o,l){for(var f=(t.mode&1)!==0;ge!==null;){var v=ge,x=v.child;if(v.tag===22&&f){var S=v.memoizedState!==null||ta;if(!S){var T=v.alternate,F=T!==null&&T.memoizedState!==null||Ut;T=ta;var X=Ut;if(ta=S,(Ut=F)&&!X)for(ge=v;ge!==null;)S=ge,F=S.child,S.tag===22&&S.memoizedState!==null?Lm(v):F!==null?(F.return=S,ge=F):Lm(v);for(;x!==null;)ge=x,Mm(x),x=x.sibling;ge=v,ta=T,Ut=X}Om(t)}else(v.subtreeFlags&8772)!==0&&x!==null?(x.return=v,ge=x):Om(t)}}function Om(t){for(;ge!==null;){var o=ge;if((o.flags&8772)!==0){var l=o.alternate;try{if((o.flags&8772)!==0)switch(o.tag){case 0:case 11:case 15:Ut||na(5,o);break;case 1:var f=o.stateNode;if(o.flags&4&&!Ut)if(l===null)f.componentDidMount();else{var v=o.elementType===o.type?l.memoizedProps:zn(o.type,l.memoizedProps);f.componentDidUpdate(v,l.memoizedState,f.__reactInternalSnapshotBeforeUpdate)}var x=o.updateQueue;x!==null&&_h(o,x,f);break;case 3:var S=o.updateQueue;if(S!==null){if(l=null,o.child!==null)switch(o.child.tag){case 5:l=o.child.stateNode;break;case 1:l=o.child.stateNode}_h(o,S,l)}break;case 5:var T=o.stateNode;if(l===null&&o.flags&4){l=T;var F=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":F.autoFocus&&l.focus();break;case"img":F.src&&(l.src=F.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var X=o.alternate;if(X!==null){var ae=X.memoizedState;if(ae!==null){var le=ae.dehydrated;le!==null&&ns(le)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}Ut||o.flags&512&&Sc(o)}catch(ie){pt(o,o.return,ie)}}if(o===t){ge=null;break}if(l=o.sibling,l!==null){l.return=o.return,ge=l;break}ge=o.return}}function _m(t){for(;ge!==null;){var o=ge;if(o===t){ge=null;break}var l=o.sibling;if(l!==null){l.return=o.return,ge=l;break}ge=o.return}}function Lm(t){for(;ge!==null;){var o=ge;try{switch(o.tag){case 0:case 11:case 15:var l=o.return;try{na(4,o)}catch(F){pt(o,l,F)}break;case 1:var f=o.stateNode;if(typeof f.componentDidMount=="function"){var v=o.return;try{f.componentDidMount()}catch(F){pt(o,v,F)}}var x=o.return;try{Sc(o)}catch(F){pt(o,x,F)}break;case 5:var S=o.return;try{Sc(o)}catch(F){pt(o,S,F)}}}catch(F){pt(o,o.return,F)}if(o===t){ge=null;break}var T=o.sibling;if(T!==null){T.return=o.return,ge=T;break}ge=o.return}}var m0=Math.ceil,ra=D.ReactCurrentDispatcher,jc=D.ReactCurrentOwner,Mn=D.ReactCurrentBatchConfig,$e=0,Dt=null,xt=null,Mt=0,wn=0,Mo=kr(0),Nt=0,Es=null,no=0,oa=0,Ac=0,Ds=null,ln=null,kc=0,Oo=1/0,vr=null,sa=!1,Ic=null,Or=null,ia=!1,_r=null,aa=0,js=0,Pc=null,la=-1,ca=0;function Qt(){return($e&6)!==0?gt():la!==-1?la:la=gt()}function Lr(t){return(t.mode&1)===0?1:($e&2)!==0&&Mt!==0?Mt&-Mt:Xb.transition!==null?(ca===0&&(ca=If()),ca):(t=Ye,t!==0||(t=window.event,t=t===void 0?16:Bf(t.type)),t)}function qn(t,o,l,f){if(50<js)throw js=0,Pc=null,Error(r(185));Xo(t,l,f),(($e&2)===0||t!==Dt)&&(t===Dt&&(($e&2)===0&&(oa|=l),Nt===4&&Fr(t,Mt)),cn(t,f),l===1&&$e===0&&(o.mode&1)===0&&(Oo=gt()+500,Li&&Pr()))}function cn(t,o){var l=t.callbackNode;Xx(t,o);var f=yi(t,t===Dt?Mt:0);if(f===0)l!==null&&jf(l),t.callbackNode=null,t.callbackPriority=0;else if(o=f&-f,t.callbackPriority!==o){if(l!=null&&jf(l),o===1)t.tag===0?Qb(Bm.bind(null,t)):Sh(Bm.bind(null,t)),Hb(function(){($e&6)===0&&Pr()}),l=null;else{switch(Pf(f)){case 1:l=ul;break;case 4:l=Af;break;case 16:l=mi;break;case 536870912:l=kf;break;default:l=mi}l=qm(l,Fm.bind(null,t))}t.callbackPriority=o,t.callbackNode=l}}function Fm(t,o){if(la=-1,ca=0,($e&6)!==0)throw Error(r(327));var l=t.callbackNode;if(_o()&&t.callbackNode!==l)return null;var f=yi(t,t===Dt?Mt:0);if(f===0)return null;if((f&30)!==0||(f&t.expiredLanes)!==0||o)o=ua(t,f);else{o=f;var v=$e;$e|=2;var x=Gm();(Dt!==t||Mt!==o)&&(vr=null,Oo=gt()+500,oo(t,o));do try{v0();break}catch(T){$m(t,T)}while(!0);Yl(),ra.current=x,$e=v,xt!==null?o=0:(Dt=null,Mt=0,o=Nt)}if(o!==0){if(o===2&&(v=dl(t),v!==0&&(f=v,o=Tc(t,v))),o===1)throw l=Es,oo(t,0),Fr(t,f),cn(t,gt()),l;if(o===6)Fr(t,f);else{if(v=t.current.alternate,(f&30)===0&&!p0(v)&&(o=ua(t,f),o===2&&(x=dl(t),x!==0&&(f=x,o=Tc(t,x))),o===1))throw l=Es,oo(t,0),Fr(t,f),cn(t,gt()),l;switch(t.finishedWork=v,t.finishedLanes=f,o){case 0:case 1:throw Error(r(345));case 2:so(t,ln,vr);break;case 3:if(Fr(t,f),(f&130023424)===f&&(o=kc+500-gt(),10<o)){if(yi(t,0)!==0)break;if(v=t.suspendedLanes,(v&f)!==f){Qt(),t.pingedLanes|=t.suspendedLanes&v;break}t.timeoutHandle=Fl(so.bind(null,t,ln,vr),o);break}so(t,ln,vr);break;case 4:if(Fr(t,f),(f&4194240)===f)break;for(o=t.eventTimes,v=-1;0<f;){var S=31-Gn(f);x=1<<S,S=o[S],S>v&&(v=S),f&=~x}if(f=v,f=gt()-f,f=(120>f?120:480>f?480:1080>f?1080:1920>f?1920:3e3>f?3e3:4320>f?4320:1960*m0(f/1960))-f,10<f){t.timeoutHandle=Fl(so.bind(null,t,ln,vr),f);break}so(t,ln,vr);break;case 5:so(t,ln,vr);break;default:throw Error(r(329))}}}return cn(t,gt()),t.callbackNode===l?Fm.bind(null,t):null}function Tc(t,o){var l=Ds;return t.current.memoizedState.isDehydrated&&(oo(t,o).flags|=256),t=ua(t,o),t!==2&&(o=ln,ln=l,o!==null&&Rc(o)),t}function Rc(t){ln===null?ln=t:ln.push.apply(ln,t)}function p0(t){for(var o=t;;){if(o.flags&16384){var l=o.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var f=0;f<l.length;f++){var v=l[f],x=v.getSnapshot;v=v.value;try{if(!Un(x(),v))return!1}catch{return!1}}}if(l=o.child,o.subtreeFlags&16384&&l!==null)l.return=o,o=l;else{if(o===t)break;for(;o.sibling===null;){if(o.return===null||o.return===t)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Fr(t,o){for(o&=~Ac,o&=~oa,t.suspendedLanes|=o,t.pingedLanes&=~o,t=t.expirationTimes;0<o;){var l=31-Gn(o),f=1<<l;t[l]=-1,o&=~f}}function Bm(t){if(($e&6)!==0)throw Error(r(327));_o();var o=yi(t,0);if((o&1)===0)return cn(t,gt()),null;var l=ua(t,o);if(t.tag!==0&&l===2){var f=dl(t);f!==0&&(o=f,l=Tc(t,f))}if(l===1)throw l=Es,oo(t,0),Fr(t,o),cn(t,gt()),l;if(l===6)throw Error(r(345));return t.finishedWork=t.current.alternate,t.finishedLanes=o,so(t,ln,vr),cn(t,gt()),null}function Mc(t,o){var l=$e;$e|=1;try{return t(o)}finally{$e=l,$e===0&&(Oo=gt()+500,Li&&Pr())}}function ro(t){_r!==null&&_r.tag===0&&($e&6)===0&&_o();var o=$e;$e|=1;var l=Mn.transition,f=Ye;try{if(Mn.transition=null,Ye=1,t)return t()}finally{Ye=f,Mn.transition=l,$e=o,($e&6)===0&&Pr()}}function Oc(){wn=Mo.current,ot(Mo)}function oo(t,o){t.finishedWork=null,t.finishedLanes=0;var l=t.timeoutHandle;if(l!==-1&&(t.timeoutHandle=-1,Wb(l)),xt!==null)for(l=xt.return;l!==null;){var f=l;switch(zl(f),f.tag){case 1:f=f.type.childContextTypes,f!=null&&Oi();break;case 3:Po(),ot(on),ot(Bt),rc();break;case 5:tc(f);break;case 4:Po();break;case 13:ot(ht);break;case 19:ot(ht);break;case 10:Ql(f.type._context);break;case 22:case 23:Oc()}l=l.return}if(Dt=t,xt=t=Br(t.current,null),Mt=wn=o,Nt=0,Es=null,Ac=oa=no=0,ln=Ds=null,Zr!==null){for(o=0;o<Zr.length;o++)if(l=Zr[o],f=l.interleaved,f!==null){l.interleaved=null;var v=f.next,x=l.pending;if(x!==null){var S=x.next;x.next=v,f.next=S}l.pending=f}Zr=null}return t}function $m(t,o){do{var l=xt;try{if(Yl(),qi.current=Xi,Ki){for(var f=mt.memoizedState;f!==null;){var v=f.queue;v!==null&&(v.pending=null),f=f.next}Ki=!1}if(to=0,Et=bt=mt=null,xs=!1,bs=0,jc.current=null,l===null||l.return===null){Nt=1,Es=o,xt=null;break}e:{var x=t,S=l.return,T=l,F=o;if(o=Mt,T.flags|=32768,F!==null&&typeof F=="object"&&typeof F.then=="function"){var X=F,ae=T,le=ae.tag;if((ae.mode&1)===0&&(le===0||le===11||le===15)){var ie=ae.alternate;ie?(ae.updateQueue=ie.updateQueue,ae.memoizedState=ie.memoizedState,ae.lanes=ie.lanes):(ae.updateQueue=null,ae.memoizedState=null)}var me=dm(S);if(me!==null){me.flags&=-257,fm(me,S,T,x,o),me.mode&1&&um(x,X,o),o=me,F=X;var ye=o.updateQueue;if(ye===null){var xe=new Set;xe.add(F),o.updateQueue=xe}else ye.add(F);break e}else{if((o&1)===0){um(x,X,o),_c();break e}F=Error(r(426))}}else if(it&&T.mode&1){var vt=dm(S);if(vt!==null){(vt.flags&65536)===0&&(vt.flags|=256),fm(vt,S,T,x,o),ql(To(F,T));break e}}x=F=To(F,T),Nt!==4&&(Nt=2),Ds===null?Ds=[x]:Ds.push(x),x=S;do{switch(x.tag){case 3:x.flags|=65536,o&=-o,x.lanes|=o;var z=lm(x,F,o);Oh(x,z);break e;case 1:T=F;var B=x.type,H=x.stateNode;if((x.flags&128)===0&&(typeof B.getDerivedStateFromError=="function"||H!==null&&typeof H.componentDidCatch=="function"&&(Or===null||!Or.has(H)))){x.flags|=65536,o&=-o,x.lanes|=o;var ce=cm(x,T,o);Oh(x,ce);break e}}x=x.return}while(x!==null)}Vm(l)}catch(we){o=we,xt===l&&l!==null&&(xt=l=l.return);continue}break}while(!0)}function Gm(){var t=ra.current;return ra.current=Xi,t===null?Xi:t}function _c(){(Nt===0||Nt===3||Nt===2)&&(Nt=4),Dt===null||(no&268435455)===0&&(oa&268435455)===0||Fr(Dt,Mt)}function ua(t,o){var l=$e;$e|=2;var f=Gm();(Dt!==t||Mt!==o)&&(vr=null,oo(t,o));do try{g0();break}catch(v){$m(t,v)}while(!0);if(Yl(),$e=l,ra.current=f,xt!==null)throw Error(r(261));return Dt=null,Mt=0,Nt}function g0(){for(;xt!==null;)Um(xt)}function v0(){for(;xt!==null&&!Ux();)Um(xt)}function Um(t){var o=Hm(t.alternate,t,wn);t.memoizedProps=t.pendingProps,o===null?Vm(t):xt=o,jc.current=null}function Vm(t){var o=t;do{var l=o.alternate;if(t=o.return,(o.flags&32768)===0){if(l=c0(l,o,wn),l!==null){xt=l;return}}else{if(l=u0(l,o),l!==null){l.flags&=32767,xt=l;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Nt=6,xt=null;return}}if(o=o.sibling,o!==null){xt=o;return}xt=o=t}while(o!==null);Nt===0&&(Nt=5)}function so(t,o,l){var f=Ye,v=Mn.transition;try{Mn.transition=null,Ye=1,y0(t,o,l,f)}finally{Mn.transition=v,Ye=f}return null}function y0(t,o,l,f){do _o();while(_r!==null);if(($e&6)!==0)throw Error(r(327));l=t.finishedWork;var v=t.finishedLanes;if(l===null)return null;if(t.finishedWork=null,t.finishedLanes=0,l===t.current)throw Error(r(177));t.callbackNode=null,t.callbackPriority=0;var x=l.lanes|l.childLanes;if(Jx(t,x),t===Dt&&(xt=Dt=null,Mt=0),(l.subtreeFlags&2064)===0&&(l.flags&2064)===0||ia||(ia=!0,qm(mi,function(){return _o(),null})),x=(l.flags&15990)!==0,(l.subtreeFlags&15990)!==0||x){x=Mn.transition,Mn.transition=null;var S=Ye;Ye=1;var T=$e;$e|=4,jc.current=null,f0(t,l),Rm(l,t),Fb(_l),Ni=!!Ol,_l=Ol=null,t.current=l,h0(l),Vx(),$e=T,Ye=S,Mn.transition=x}else t.current=l;if(ia&&(ia=!1,_r=t,aa=v),x=t.pendingLanes,x===0&&(Or=null),Hx(l.stateNode),cn(t,gt()),o!==null)for(f=t.onRecoverableError,l=0;l<o.length;l++)v=o[l],f(v.value,{componentStack:v.stack,digest:v.digest});if(sa)throw sa=!1,t=Ic,Ic=null,t;return(aa&1)!==0&&t.tag!==0&&_o(),x=t.pendingLanes,(x&1)!==0?t===Pc?js++:(js=0,Pc=t):js=0,Pr(),null}function _o(){if(_r!==null){var t=Pf(aa),o=Mn.transition,l=Ye;try{if(Mn.transition=null,Ye=16>t?16:t,_r===null)var f=!1;else{if(t=_r,_r=null,aa=0,($e&6)!==0)throw Error(r(331));var v=$e;for($e|=4,ge=t.current;ge!==null;){var x=ge,S=x.child;if((ge.flags&16)!==0){var T=x.deletions;if(T!==null){for(var F=0;F<T.length;F++){var X=T[F];for(ge=X;ge!==null;){var ae=ge;switch(ae.tag){case 0:case 11:case 15:Ss(8,ae,x)}var le=ae.child;if(le!==null)le.return=ae,ge=le;else for(;ge!==null;){ae=ge;var ie=ae.sibling,me=ae.return;if(Am(ae),ae===X){ge=null;break}if(ie!==null){ie.return=me,ge=ie;break}ge=me}}}var ye=x.alternate;if(ye!==null){var xe=ye.child;if(xe!==null){ye.child=null;do{var vt=xe.sibling;xe.sibling=null,xe=vt}while(xe!==null)}}ge=x}}if((x.subtreeFlags&2064)!==0&&S!==null)S.return=x,ge=S;else e:for(;ge!==null;){if(x=ge,(x.flags&2048)!==0)switch(x.tag){case 0:case 11:case 15:Ss(9,x,x.return)}var z=x.sibling;if(z!==null){z.return=x.return,ge=z;break e}ge=x.return}}var B=t.current;for(ge=B;ge!==null;){S=ge;var H=S.child;if((S.subtreeFlags&2064)!==0&&H!==null)H.return=S,ge=H;else e:for(S=B;ge!==null;){if(T=ge,(T.flags&2048)!==0)try{switch(T.tag){case 0:case 11:case 15:na(9,T)}}catch(we){pt(T,T.return,we)}if(T===S){ge=null;break e}var ce=T.sibling;if(ce!==null){ce.return=T.return,ge=ce;break e}ge=T.return}}if($e=v,Pr(),Xn&&typeof Xn.onPostCommitFiberRoot=="function")try{Xn.onPostCommitFiberRoot(pi,t)}catch{}f=!0}return f}finally{Ye=l,Mn.transition=o}}return!1}function zm(t,o,l){o=To(l,o),o=lm(t,o,1),t=Rr(t,o,1),o=Qt(),t!==null&&(Xo(t,1,o),cn(t,o))}function pt(t,o,l){if(t.tag===3)zm(t,t,l);else for(;o!==null;){if(o.tag===3){zm(o,t,l);break}else if(o.tag===1){var f=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(Or===null||!Or.has(f))){t=To(l,t),t=cm(o,t,1),o=Rr(o,t,1),t=Qt(),o!==null&&(Xo(o,1,t),cn(o,t));break}}o=o.return}}function x0(t,o,l){var f=t.pingCache;f!==null&&f.delete(o),o=Qt(),t.pingedLanes|=t.suspendedLanes&l,Dt===t&&(Mt&l)===l&&(Nt===4||Nt===3&&(Mt&130023424)===Mt&&500>gt()-kc?oo(t,0):Ac|=l),cn(t,o)}function Wm(t,o){o===0&&((t.mode&1)===0?o=1:(o=vi,vi<<=1,(vi&130023424)===0&&(vi=4194304)));var l=Qt();t=mr(t,o),t!==null&&(Xo(t,o,l),cn(t,l))}function b0(t){var o=t.memoizedState,l=0;o!==null&&(l=o.retryLane),Wm(t,l)}function N0(t,o){var l=0;switch(t.tag){case 13:var f=t.stateNode,v=t.memoizedState;v!==null&&(l=v.retryLane);break;case 19:f=t.stateNode;break;default:throw Error(r(314))}f!==null&&f.delete(o),Wm(t,l)}var Hm;Hm=function(t,o,l){if(t!==null)if(t.memoizedProps!==o.pendingProps||on.current)an=!0;else{if((t.lanes&l)===0&&(o.flags&128)===0)return an=!1,l0(t,o,l);an=(t.flags&131072)!==0}else an=!1,it&&(o.flags&1048576)!==0&&Eh(o,Bi,o.index);switch(o.lanes=0,o.tag){case 2:var f=o.type;ea(t,o),t=o.pendingProps;var v=So(o,Bt.current);Io(o,l),v=ic(null,o,f,t,v,l);var x=ac();return o.flags|=1,typeof v=="object"&&v!==null&&typeof v.render=="function"&&v.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,sn(f)?(x=!0,_i(o)):x=!1,o.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,Zl(o),v.updater=Ji,o.stateNode=v,v._reactInternals=o,hc(o,f,t,l),o=vc(null,o,f,!0,x,l)):(o.tag=0,it&&x&&Vl(o),Yt(null,o,v,l),o=o.child),o;case 16:f=o.elementType;e:{switch(ea(t,o),t=o.pendingProps,v=f._init,f=v(f._payload),o.type=f,v=o.tag=C0(f),t=zn(f,t),v){case 0:o=gc(null,o,f,t,l);break e;case 1:o=ym(null,o,f,t,l);break e;case 11:o=hm(null,o,f,t,l);break e;case 14:o=mm(null,o,f,zn(f.type,t),l);break e}throw Error(r(306,f,""))}return o;case 0:return f=o.type,v=o.pendingProps,v=o.elementType===f?v:zn(f,v),gc(t,o,f,v,l);case 1:return f=o.type,v=o.pendingProps,v=o.elementType===f?v:zn(f,v),ym(t,o,f,v,l);case 3:e:{if(xm(o),t===null)throw Error(r(387));f=o.pendingProps,x=o.memoizedState,v=x.element,Mh(t,o),Wi(o,f,null,l);var S=o.memoizedState;if(f=S.element,x.isDehydrated)if(x={element:f,isDehydrated:!1,cache:S.cache,pendingSuspenseBoundaries:S.pendingSuspenseBoundaries,transitions:S.transitions},o.updateQueue.baseState=x,o.memoizedState=x,o.flags&256){v=To(Error(r(423)),o),o=bm(t,o,f,l,v);break e}else if(f!==v){v=To(Error(r(424)),o),o=bm(t,o,f,l,v);break e}else for(Nn=Ar(o.stateNode.containerInfo.firstChild),bn=o,it=!0,Vn=null,l=Th(o,null,f,l),o.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(jo(),f===v){o=gr(t,o,l);break e}Yt(t,o,f,l)}o=o.child}return o;case 5:return Lh(o),t===null&&Hl(o),f=o.type,v=o.pendingProps,x=t!==null?t.memoizedProps:null,S=v.children,Ll(f,v)?S=null:x!==null&&Ll(f,x)&&(o.flags|=32),vm(t,o),Yt(t,o,S,l),o.child;case 6:return t===null&&Hl(o),null;case 13:return Nm(t,o,l);case 4:return ec(o,o.stateNode.containerInfo),f=o.pendingProps,t===null?o.child=Ao(o,null,f,l):Yt(t,o,f,l),o.child;case 11:return f=o.type,v=o.pendingProps,v=o.elementType===f?v:zn(f,v),hm(t,o,f,v,l);case 7:return Yt(t,o,o.pendingProps,l),o.child;case 8:return Yt(t,o,o.pendingProps.children,l),o.child;case 12:return Yt(t,o,o.pendingProps.children,l),o.child;case 10:e:{if(f=o.type._context,v=o.pendingProps,x=o.memoizedProps,S=v.value,tt(Ui,f._currentValue),f._currentValue=S,x!==null)if(Un(x.value,S)){if(x.children===v.children&&!on.current){o=gr(t,o,l);break e}}else for(x=o.child,x!==null&&(x.return=o);x!==null;){var T=x.dependencies;if(T!==null){S=x.child;for(var F=T.firstContext;F!==null;){if(F.context===f){if(x.tag===1){F=pr(-1,l&-l),F.tag=2;var X=x.updateQueue;if(X!==null){X=X.shared;var ae=X.pending;ae===null?F.next=F:(F.next=ae.next,ae.next=F),X.pending=F}}x.lanes|=l,F=x.alternate,F!==null&&(F.lanes|=l),Xl(x.return,l,o),T.lanes|=l;break}F=F.next}}else if(x.tag===10)S=x.type===o.type?null:x.child;else if(x.tag===18){if(S=x.return,S===null)throw Error(r(341));S.lanes|=l,T=S.alternate,T!==null&&(T.lanes|=l),Xl(S,l,o),S=x.sibling}else S=x.child;if(S!==null)S.return=x;else for(S=x;S!==null;){if(S===o){S=null;break}if(x=S.sibling,x!==null){x.return=S.return,S=x;break}S=S.return}x=S}Yt(t,o,v.children,l),o=o.child}return o;case 9:return v=o.type,f=o.pendingProps.children,Io(o,l),v=Tn(v),f=f(v),o.flags|=1,Yt(t,o,f,l),o.child;case 14:return f=o.type,v=zn(f,o.pendingProps),v=zn(f.type,v),mm(t,o,f,v,l);case 15:return pm(t,o,o.type,o.pendingProps,l);case 17:return f=o.type,v=o.pendingProps,v=o.elementType===f?v:zn(f,v),ea(t,o),o.tag=1,sn(f)?(t=!0,_i(o)):t=!1,Io(o,l),im(o,f,v),hc(o,f,v,l),vc(null,o,f,!0,t,l);case 19:return Cm(t,o,l);case 22:return gm(t,o,l)}throw Error(r(156,o.tag))};function qm(t,o){return Df(t,o)}function w0(t,o,l,f){this.tag=t,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function On(t,o,l,f){return new w0(t,o,l,f)}function Lc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function C0(t){if(typeof t=="function")return Lc(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Z)return 11;if(t===K)return 14}return 2}function Br(t,o){var l=t.alternate;return l===null?(l=On(t.tag,o,t.key,t.mode),l.elementType=t.elementType,l.type=t.type,l.stateNode=t.stateNode,l.alternate=t,t.alternate=l):(l.pendingProps=o,l.type=t.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=t.flags&14680064,l.childLanes=t.childLanes,l.lanes=t.lanes,l.child=t.child,l.memoizedProps=t.memoizedProps,l.memoizedState=t.memoizedState,l.updateQueue=t.updateQueue,o=t.dependencies,l.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},l.sibling=t.sibling,l.index=t.index,l.ref=t.ref,l}function da(t,o,l,f,v,x){var S=2;if(f=t,typeof t=="function")Lc(t)&&(S=1);else if(typeof t=="string")S=5;else e:switch(t){case O:return io(l.children,v,x,o);case M:S=8,v|=8;break;case q:return t=On(12,l,o,v|2),t.elementType=q,t.lanes=x,t;case Q:return t=On(13,l,o,v),t.elementType=Q,t.lanes=x,t;case se:return t=On(19,l,o,v),t.elementType=se,t.lanes=x,t;case re:return fa(l,v,x,o);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case te:S=10;break e;case oe:S=9;break e;case Z:S=11;break e;case K:S=14;break e;case J:S=16,f=null;break e}throw Error(r(130,t==null?t:typeof t,""))}return o=On(S,l,o,v),o.elementType=t,o.type=f,o.lanes=x,o}function io(t,o,l,f){return t=On(7,t,f,o),t.lanes=l,t}function fa(t,o,l,f){return t=On(22,t,f,o),t.elementType=re,t.lanes=l,t.stateNode={isHidden:!1},t}function Fc(t,o,l){return t=On(6,t,null,o),t.lanes=l,t}function Bc(t,o,l){return o=On(4,t.children!==null?t.children:[],t.key,o),o.lanes=l,o.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},o}function S0(t,o,l,f,v){this.tag=o,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=fl(0),this.expirationTimes=fl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fl(0),this.identifierPrefix=f,this.onRecoverableError=v,this.mutableSourceEagerHydrationData=null}function $c(t,o,l,f,v,x,S,T,F){return t=new S0(t,o,l,T,F),o===1?(o=1,x===!0&&(o|=8)):o=0,x=On(3,null,null,o),t.current=x,x.stateNode=t,x.memoizedState={element:f,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},Zl(x),t}function E0(t,o,l){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:R,key:f==null?null:""+f,children:t,containerInfo:o,implementation:l}}function Km(t){if(!t)return Ir;t=t._reactInternals;e:{if(Kr(t)!==t||t.tag!==1)throw Error(r(170));var o=t;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(sn(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(r(171))}if(t.tag===1){var l=t.type;if(sn(l))return wh(t,l,o)}return o}function Ym(t,o,l,f,v,x,S,T,F){return t=$c(l,f,!0,t,v,x,S,T,F),t.context=Km(null),l=t.current,f=Qt(),v=Lr(l),x=pr(f,v),x.callback=o??null,Rr(l,x,v),t.current.lanes=v,Xo(t,v,f),cn(t,f),t}function ha(t,o,l,f){var v=o.current,x=Qt(),S=Lr(v);return l=Km(l),o.context===null?o.context=l:o.pendingContext=l,o=pr(x,S),o.payload={element:t},f=f===void 0?null:f,f!==null&&(o.callback=f),t=Rr(v,o,S),t!==null&&(qn(t,v,S,x),zi(t,v,S)),S}function ma(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Qm(t,o){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var l=t.retryLane;t.retryLane=l!==0&&l<o?l:o}}function Gc(t,o){Qm(t,o),(t=t.alternate)&&Qm(t,o)}function D0(){return null}var Xm=typeof reportError=="function"?reportError:function(t){console.error(t)};function Uc(t){this._internalRoot=t}pa.prototype.render=Uc.prototype.render=function(t){var o=this._internalRoot;if(o===null)throw Error(r(409));ha(t,o,null,null)},pa.prototype.unmount=Uc.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var o=t.containerInfo;ro(function(){ha(null,t,null,null)}),o[ur]=null}};function pa(t){this._internalRoot=t}pa.prototype.unstable_scheduleHydration=function(t){if(t){var o=Mf();t={blockedOn:null,target:t,priority:o};for(var l=0;l<Er.length&&o!==0&&o<Er[l].priority;l++);Er.splice(l,0,t),l===0&&Lf(t)}};function Vc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ga(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Jm(){}function j0(t,o,l,f,v){if(v){if(typeof f=="function"){var x=f;f=function(){var X=ma(S);x.call(X)}}var S=Ym(o,f,t,0,null,!1,!1,"",Jm);return t._reactRootContainer=S,t[ur]=S.current,ds(t.nodeType===8?t.parentNode:t),ro(),S}for(;v=t.lastChild;)t.removeChild(v);if(typeof f=="function"){var T=f;f=function(){var X=ma(F);T.call(X)}}var F=$c(t,0,!1,null,null,!1,!1,"",Jm);return t._reactRootContainer=F,t[ur]=F.current,ds(t.nodeType===8?t.parentNode:t),ro(function(){ha(o,F,l,f)}),F}function va(t,o,l,f,v){var x=l._reactRootContainer;if(x){var S=x;if(typeof v=="function"){var T=v;v=function(){var F=ma(S);T.call(F)}}ha(o,S,t,v)}else S=j0(l,o,t,v,f);return ma(S)}Tf=function(t){switch(t.tag){case 3:var o=t.stateNode;if(o.current.memoizedState.isDehydrated){var l=Qo(o.pendingLanes);l!==0&&(hl(o,l|1),cn(o,gt()),($e&6)===0&&(Oo=gt()+500,Pr()))}break;case 13:ro(function(){var f=mr(t,1);if(f!==null){var v=Qt();qn(f,t,1,v)}}),Gc(t,1)}},ml=function(t){if(t.tag===13){var o=mr(t,134217728);if(o!==null){var l=Qt();qn(o,t,134217728,l)}Gc(t,134217728)}},Rf=function(t){if(t.tag===13){var o=Lr(t),l=mr(t,o);if(l!==null){var f=Qt();qn(l,t,o,f)}Gc(t,o)}},Mf=function(){return Ye},Of=function(t,o){var l=Ye;try{return Ye=t,o()}finally{Ye=l}},kn=function(t,o,l){switch(o){case"input":if(Ct(t,l),o=l.name,l.type==="radio"&&o!=null){for(l=t;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<l.length;o++){var f=l[o];if(f!==t&&f.form===t.form){var v=Mi(f);if(!v)throw Error(r(90));Ie(f),Ct(f,v)}}}break;case"textarea":yt(t,l);break;case"select":o=l.value,o!=null&&et(t,!!l.multiple,o,!1)}},Ue=Mc,qe=ro;var A0={usingClientEntryPoint:!1,Events:[ms,wo,Mi,he,Pe,Mc]},As={findFiberByHostInstance:Yr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},k0={bundleType:As.bundleType,version:As.version,rendererPackageName:As.rendererPackageName,rendererConfig:As.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:D.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Sf(t),t===null?null:t.stateNode},findFiberByHostInstance:As.findFiberByHostInstance||D0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ya=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ya.isDisabled&&ya.supportsFiber)try{pi=ya.inject(k0),Xn=ya}catch{}}return un.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=A0,un.createPortal=function(t,o){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Vc(o))throw Error(r(200));return E0(t,o,null,l)},un.createRoot=function(t,o){if(!Vc(t))throw Error(r(299));var l=!1,f="",v=Xm;return o!=null&&(o.unstable_strictMode===!0&&(l=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onRecoverableError!==void 0&&(v=o.onRecoverableError)),o=$c(t,1,!1,null,null,l,!1,f,v),t[ur]=o.current,ds(t.nodeType===8?t.parentNode:t),new Uc(o)},un.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var o=t._reactInternals;if(o===void 0)throw typeof t.render=="function"?Error(r(188)):(t=Object.keys(t).join(","),Error(r(268,t)));return t=Sf(o),t=t===null?null:t.stateNode,t},un.flushSync=function(t){return ro(t)},un.hydrate=function(t,o,l){if(!ga(o))throw Error(r(200));return va(null,t,o,!0,l)},un.hydrateRoot=function(t,o,l){if(!Vc(t))throw Error(r(405));var f=l!=null&&l.hydratedSources||null,v=!1,x="",S=Xm;if(l!=null&&(l.unstable_strictMode===!0&&(v=!0),l.identifierPrefix!==void 0&&(x=l.identifierPrefix),l.onRecoverableError!==void 0&&(S=l.onRecoverableError)),o=Ym(o,null,t,1,l??null,v,!1,x,S),t[ur]=o.current,ds(t),f)for(t=0;t<f.length;t++)l=f[t],v=l._getVersion,v=v(l._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[l,v]:o.mutableSourceEagerHydrationData.push(l,v);return new pa(o)},un.render=function(t,o,l){if(!ga(o))throw Error(r(200));return va(null,t,o,!1,l)},un.unmountComponentAtNode=function(t){if(!ga(t))throw Error(r(40));return t._reactRootContainer?(ro(function(){va(null,null,t,!1,function(){t._reactRootContainer=null,t[ur]=null})}),!0):!1},un.unstable_batchedUpdates=Mc,un.unstable_renderSubtreeIntoContainer=function(t,o,l,f){if(!ga(l))throw Error(r(200));if(t==null||t._reactInternals===void 0)throw Error(r(38));return va(t,o,l,!1,f)},un.version="18.3.1-next-f1338f8080-20240426",un}var ip;function Iv(){if(ip)return Hc.exports;ip=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(n){console.error(n)}}return e(),Hc.exports=_0(),Hc.exports}var ap;function L0(){if(ap)return xa;ap=1;var e=Iv();return xa.createRoot=e.createRoot,xa.hydrateRoot=e.hydrateRoot,xa}var F0=L0();const B0=br(F0);var Yc,lp;function $0(){if(lp)return Yc;lp=1,Yc=e;function e(n,r,s){if(n!=null&&typeof n!="number")throw new Error("start must be a number or null");if(r!=null&&typeof r!="number")throw new Error("stop must be a number or null");if(s!=null&&typeof s!="number")throw new Error("step must be a number or null");r==null&&(r=n||0,n=0),s==null&&(s=r>n?1:-1);for(var i=[],a=n<r;a?n<r:n>r;n+=s)i.push(n);return i}return Yc}var G0=$0();const Ad=br(G0);var Qc={exports:{}},Xc,cp;function U0(){if(cp)return Xc;cp=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Xc=e,Xc}var Jc,up;function V0(){if(up)return Jc;up=1;var e=U0();function n(){}function r(){}return r.resetWarningCache=n,Jc=function(){function s(c,d,h,m,p,g){if(g!==e){var y=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw y.name="Invariant Violation",y}}s.isRequired=s;function i(){return s}var a={array:s,bigint:s,bool:s,func:s,number:s,object:s,string:s,symbol:s,any:s,arrayOf:i,element:s,elementType:s,instanceOf:i,node:s,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:r,resetWarningCache:n};return a.PropTypes=a,a},Jc}var dp;function z0(){return dp||(dp=1,Qc.exports=V0()()),Qc.exports}var W0=z0();const De=br(W0);var Zc={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var fp;function H0(){return fp||(fp=1,function(e){(function(){var n={}.hasOwnProperty;function r(){for(var a="",c=0;c<arguments.length;c++){var d=arguments[c];d&&(a=i(a,s(d)))}return a}function s(a){if(typeof a=="string"||typeof a=="number")return a;if(typeof a!="object")return"";if(Array.isArray(a))return r.apply(null,a);if(a.toString!==Object.prototype.toString&&!a.toString.toString().includes("[native code]"))return a.toString();var c="";for(var d in a)n.call(a,d)&&a[d]&&(c=i(c,d));return c}function i(a,c){return c?a?a+" "+c:a+c:a}e.exports?(r.default=r,e.exports=r):window.classNames=r})()}(Zc)),Zc.exports}var q0=H0();const ct=br(q0);var eu,hp;function K0(){if(hp)return eu;hp=1;var e=200,n="__lodash_hash_undefined__",r=9007199254740991,s="[object Arguments]",i="[object Function]",a="[object GeneratorFunction]",c=/[\\^$.*+?()[\]{}|]/g,d=/^\[object .+?Constructor\]$/,h=typeof Ur=="object"&&Ur&&Ur.Object===Object&&Ur,m=typeof self=="object"&&self&&self.Object===Object&&self,p=h||m||Function("return this")();function g(V,ne,he){switch(he.length){case 0:return V.call(ne);case 1:return V.call(ne,he[0]);case 2:return V.call(ne,he[0],he[1]);case 3:return V.call(ne,he[0],he[1],he[2])}return V.apply(ne,he)}function y(V,ne){var he=V?V.length:0;return!!he&&E(V,ne,0)>-1}function b(V,ne){for(var he=-1,Pe=ne.length,Ue=V.length;++he<Pe;)V[Ue+he]=ne[he];return V}function w(V,ne,he,Pe){for(var Ue=V.length,qe=he+-1;++qe<Ue;)if(ne(V[qe],qe,V))return qe;return-1}function E(V,ne,he){if(ne!==ne)return w(V,C,he);for(var Pe=he-1,Ue=V.length;++Pe<Ue;)if(V[Pe]===ne)return Pe;return-1}function C(V){return V!==V}function j(V,ne){return V.has(ne)}function P(V,ne){return V?.[ne]}function A(V){var ne=!1;if(V!=null&&typeof V.toString!="function")try{ne=!!(V+"")}catch{}return ne}var D=Array.prototype,k=Function.prototype,R=Object.prototype,O=p["__core-js_shared__"],M=function(){var V=/[^.]+$/.exec(O&&O.keys&&O.keys.IE_PROTO||"");return V?"Symbol(src)_1."+V:""}(),q=k.toString,te=R.hasOwnProperty,oe=R.toString,Z=RegExp("^"+q.call(te).replace(c,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Q=p.Symbol,se=R.propertyIsEnumerable,K=D.splice,J=Q?Q.isConcatSpreadable:void 0,re=Math.max,W=Y(p,"Map"),$=Y(Object,"create");function _(V){var ne=-1,he=V?V.length:0;for(this.clear();++ne<he;){var Pe=V[ne];this.set(Pe[0],Pe[1])}}function I(){this.__data__=$?$(null):{}}function L(V){return this.has(V)&&delete this.__data__[V]}function G(V){var ne=this.__data__;if($){var he=ne[V];return he===n?void 0:he}return te.call(ne,V)?ne[V]:void 0}function ee(V){var ne=this.__data__;return $?ne[V]!==void 0:te.call(ne,V)}function ue(V,ne){var he=this.__data__;return he[V]=$&&ne===void 0?n:ne,this}_.prototype.clear=I,_.prototype.delete=L,_.prototype.get=G,_.prototype.has=ee,_.prototype.set=ue;function fe(V){var ne=-1,he=V?V.length:0;for(this.clear();++ne<he;){var Pe=V[ne];this.set(Pe[0],Pe[1])}}function Ee(){this.__data__=[]}function pe(V){var ne=this.__data__,he=et(ne,V);if(he<0)return!1;var Pe=ne.length-1;return he==Pe?ne.pop():K.call(ne,he,1),!0}function Ne(V){var ne=this.__data__,he=et(ne,V);return he<0?void 0:ne[he][1]}function be(V){return et(this.__data__,V)>-1}function nt(V,ne){var he=this.__data__,Pe=et(he,V);return Pe<0?he.push([V,ne]):he[Pe][1]=ne,this}fe.prototype.clear=Ee,fe.prototype.delete=pe,fe.prototype.get=Ne,fe.prototype.has=be,fe.prototype.set=nt;function Ie(V){var ne=-1,he=V?V.length:0;for(this.clear();++ne<he;){var Pe=V[ne];this.set(Pe[0],Pe[1])}}function Xe(){this.__data__={hash:new _,map:new(W||fe),string:new _}}function Ce(V){return Ht(this,V).delete(V)}function ze(V){return Ht(this,V).get(V)}function Je(V){return Ht(this,V).has(V)}function Ct(V,ne){return Ht(this,V).set(V,ne),this}Ie.prototype.clear=Xe,Ie.prototype.delete=Ce,Ie.prototype.get=ze,Ie.prototype.has=Je,Ie.prototype.set=Ct;function Wt(V){var ne=-1,he=V?V.length:0;for(this.__data__=new Ie;++ne<he;)this.add(V[ne])}function Tt(V){return this.__data__.set(V,n),this}function st(V){return this.__data__.has(V)}Wt.prototype.add=Wt.prototype.push=Tt,Wt.prototype.has=st;function et(V,ne){for(var he=V.length;he--;)if(Zt(V[he][0],ne))return he;return-1}function We(V,ne,he,Pe){var Ue=-1,qe=y,dt=!0,Kt=V.length,Ze=[],nn=ne.length;if(!Kt)return Ze;ne.length>=e&&(qe=j,dt=!1,ne=new Wt(ne));e:for(;++Ue<Kt;){var ft=V[Ue],Ft=ft;if(ft=ft!==0?ft:0,dt&&Ft===Ft){for(var rn=nn;rn--;)if(ne[rn]===Ft)continue e;Ze.push(ft)}else qe(ne,Ft,Pe)||Ze.push(ft)}return Ze}function ut(V,ne,he,Pe,Ue){var qe=-1,dt=V.length;for(he||(he=Te),Ue||(Ue=[]);++qe<dt;){var Kt=V[qe];he(Kt)&&b(Ue,Kt)}return Ue}function yt(V){if(!kn(V)||Le(V))return!1;var ne=St(V)||A(V)?Z:d;return ne.test(He(V))}function gn(V,ne){return ne=re(ne===void 0?V.length-1:ne,0),function(){for(var he=arguments,Pe=-1,Ue=re(he.length-ne,0),qe=Array(Ue);++Pe<Ue;)qe[Pe]=he[ne+Pe];Pe=-1;for(var dt=Array(ne+1);++Pe<ne;)dt[Pe]=he[Pe];return dt[ne]=qe,g(V,this,dt)}}function Ht(V,ne){var he=V.__data__;return Ge(ne)?he[typeof ne=="string"?"string":"hash"]:he.map}function Y(V,ne){var he=P(V,ne);return yt(he)?he:void 0}function Te(V){return qt(V)||en(V)||!!(J&&V&&V[J])}function Ge(V){var ne=typeof V;return ne=="string"||ne=="number"||ne=="symbol"||ne=="boolean"?V!=="__proto__":V===null}function Le(V){return!!M&&M in V}function He(V){if(V!=null){try{return q.call(V)}catch{}try{return V+""}catch{}}return""}var jn=gn(function(V,ne){return Lt(V)?We(V,ut(ne,1,Lt)):[]});function Zt(V,ne){return V===ne||V!==V&&ne!==ne}function en(V){return Lt(V)&&te.call(V,"callee")&&(!se.call(V,"callee")||oe.call(V)==s)}var qt=Array.isArray;function An(V){return V!=null&&vn(V.length)&&!St(V)}function Lt(V){return tn(V)&&An(V)}function St(V){var ne=kn(V)?oe.call(V):"";return ne==i||ne==a}function vn(V){return typeof V=="number"&&V>-1&&V%1==0&&V<=r}function kn(V){var ne=typeof V;return!!V&&(ne=="object"||ne=="function")}function tn(V){return!!V&&typeof V=="object"}return eu=jn,eu}var Y0=K0();const mp=br(Y0);function Ka(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function Q0(e,n){for(var r=0;r<n.length;r++){var s=n[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function Ya(e,n,r){return n&&Q0(e.prototype,n),e}function at(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function td(){return td=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},td.apply(this,arguments)}function Qa(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&nd(e,n)}function Fo(e){return Fo=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},Fo(e)}function nd(e,n){return nd=Object.setPrototypeOf||function(s,i){return s.__proto__=i,s},nd(e,n)}function X0(e,n){if(e==null)return{};var r={},s=Object.keys(e),i,a;for(a=0;a<s.length;a++)i=s[a],!(n.indexOf(i)>=0)&&(r[i]=e[i]);return r}function J0(e,n){if(e==null)return{};var r=X0(e,n),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)s=a[i],!(n.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function At(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Xa(e,n){return n&&(typeof n=="object"||typeof n=="function")?n:At(e)}function Z0(e,n){return e1(e)||t1(e,n)||n1()}function e1(e){if(Array.isArray(e))return e}function t1(e,n){var r=[],s=!0,i=!1,a=void 0;try{for(var c=e[Symbol.iterator](),d;!(s=(d=c.next()).done)&&(r.push(d.value),!(n&&r.length===n));s=!0);}catch(h){i=!0,a=h}finally{try{!s&&c.return!=null&&c.return()}finally{if(i)throw a}}return r}function n1(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}var r1=["C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B"],o1=["Db","Eb","Gb","Ab","Bb"],s1={C:0,"C#":1,Db:1,D:2,"D#":3,Eb:3,E:4,F:5,"F#":6,Gb:6,G:7,"G#":8,Ab:8,A:9,"A#":10,Bb:10,B:11},Pa=12,kd=Pa,Id=127,i1=/([a-g])([#b]?)(\d+)/,rd=12;function a1(e){if(!e)throw Error("Invalid note argument");var n=i1.exec(e.toLowerCase());if(!n)throw Error("Invalid note argument");var r=Z0(n,4),s=r[1],i=r[2],a=r[3],c="".concat(s.toUpperCase()).concat(i),d=s1[c];if(d==null)throw Error("Invalid note argument");return Pa+d+rd*parseInt(a,10)}function l1(e){var n=(e-Pa)%rd,r=Math.floor((e-Pa)/rd),s=r1[n];return{note:"".concat(s).concat(r),pitchName:s,octave:r,midiNumber:e,isAccidental:o1.includes(s)}}function c1(){return Ad(kd,Id+1).reduce(function(e,n){return e[n]=l1(n),e},{})}var u1=c1();function Pv(e){var n=u1[e];if(!n)throw Error("Invalid MIDI number");return n}var d1=Ad(kd,Id+1).filter(function(e){return!Pv(e).isAccidental}),mn={fromNote:a1,getAttributes:Pv,MIN_MIDI_NUMBER:kd,MAX_MIDI_NUMBER:Id,NATURAL_MIDI_NUMBERS:d1},Pd=function(e){Qa(n,e);function n(){var r,s;Ka(this,n);for(var i=arguments.length,a=new Array(i),c=0;c<i;c++)a[c]=arguments[c];return s=Xa(this,(r=Fo(n)).call.apply(r,[this].concat(a))),at(At(s),"onPlayNoteInput",function(){s.props.onPlayNoteInput(s.props.midiNumber)}),at(At(s),"onStopNoteInput",function(){s.props.onStopNoteInput(s.props.midiNumber)}),s}return Ya(n,[{key:"getAbsoluteKeyPosition",value:function(s){var i=7,a=mn.getAttributes(s),c=a.octave,d=a.pitchName,h=this.props.pitchPositions[d],m=i*c;return h+m}},{key:"getRelativeKeyPosition",value:function(s){return this.getAbsoluteKeyPosition(s)-this.getAbsoluteKeyPosition(this.props.noteRange.first)}},{key:"render",value:function(){var s=this.props,i=s.naturalKeyWidth,a=s.accidentalWidthRatio,c=s.midiNumber,d=s.gliss,h=s.useTouchEvents,m=s.accidental,p=s.active,g=s.disabled,y=s.children;return ve.createElement("div",{className:ct("ReactPiano__Key",{"ReactPiano__Key--accidental":m,"ReactPiano__Key--natural":!m,"ReactPiano__Key--disabled":g,"ReactPiano__Key--active":p}),style:{left:pp(this.getRelativeKeyPosition(c)*i),width:pp(m?a*i:i)},onMouseDown:h?null:this.onPlayNoteInput,onMouseUp:h?null:this.onStopNoteInput,onMouseEnter:d?this.onPlayNoteInput:null,onMouseLeave:this.onStopNoteInput,onTouchStart:h?this.onPlayNoteInput:null,onTouchCancel:h?this.onStopNoteInput:null,onTouchEnd:h?this.onStopNoteInput:null},ve.createElement("div",{className:"ReactPiano__NoteLabelContainer"},y))}}]),n}(ve.Component);at(Pd,"propTypes",{midiNumber:De.number.isRequired,naturalKeyWidth:De.number.isRequired,gliss:De.bool.isRequired,useTouchEvents:De.bool.isRequired,accidental:De.bool.isRequired,active:De.bool.isRequired,disabled:De.bool.isRequired,onPlayNoteInput:De.func.isRequired,onStopNoteInput:De.func.isRequired,accidentalWidthRatio:De.number.isRequired,pitchPositions:De.object.isRequired,children:De.node});at(Pd,"defaultProps",{accidentalWidthRatio:.65,pitchPositions:{C:0,Db:.55,D:1,Eb:1.8,E:2,F:3,Gb:3.5,G:4,Ab:4.7,A:5,Bb:5.85,B:6}});function pp(e){return"".concat(e*100,"%")}var Td=function(e){Qa(n,e);function n(){return Ka(this,n),Xa(this,Fo(n).apply(this,arguments))}return Ya(n,[{key:"getMidiNumbers",value:function(){return Ad(this.props.noteRange.first,this.props.noteRange.last+1)}},{key:"getNaturalKeyCount",value:function(){return this.getMidiNumbers().filter(function(s){var i=mn.getAttributes(s),a=i.isAccidental;return!a}).length}},{key:"getNaturalKeyWidth",value:function(){return 1/this.getNaturalKeyCount()}},{key:"getWidth",value:function(){return this.props.width?this.props.width:"100%"}},{key:"getHeight",value:function(){if(!this.props.width)return"100%";var s=this.props.width*this.getNaturalKeyWidth();return"".concat(s/this.props.keyWidthToHeight,"px")}},{key:"render",value:function(){var s=this,i=this.getNaturalKeyWidth();return ve.createElement("div",{className:ct("ReactPiano__Keyboard",this.props.className),style:{width:this.getWidth(),height:this.getHeight()}},this.getMidiNumbers().map(function(a){var c=mn.getAttributes(a);c.note;var d=c.isAccidental,h=!s.props.disabled&&s.props.activeNotes.includes(a);return ve.createElement(Pd,{naturalKeyWidth:i,midiNumber:a,noteRange:s.props.noteRange,active:h,accidental:d,disabled:s.props.disabled,onPlayNoteInput:s.props.onPlayNoteInput,onStopNoteInput:s.props.onStopNoteInput,gliss:s.props.gliss,useTouchEvents:s.props.useTouchEvents,key:a},s.props.disabled?null:s.props.renderNoteLabel({isActive:h,isAccidental:d,midiNumber:a}))}))}}]),n}(ve.Component);at(Td,"propTypes",{noteRange:f1,activeNotes:De.arrayOf(De.number),onPlayNoteInput:De.func.isRequired,onStopNoteInput:De.func.isRequired,renderNoteLabel:De.func.isRequired,keyWidthToHeight:De.number.isRequired,className:De.string,disabled:De.bool,gliss:De.bool,useTouchEvents:De.bool,width:De.number});at(Td,"defaultProps",{disabled:!1,gliss:!1,useTouchEvents:!1,keyWidthToHeight:.33,renderNoteLabel:function(){}});function gp(e){return typeof e!="number"?!1:mn.NATURAL_MIDI_NUMBERS.includes(e)}function f1(e,n,r){var s=e[n],i=s.first,a=s.last;if(!i||!a)return new Error("Invalid prop ".concat(n," supplied to ").concat(r,". ").concat(n," must be an object with .first and .last values."));if(!gp(i)||!gp(a))return new Error("Invalid prop ".concat(n," supplied to ").concat(r,". ").concat(n," values must be valid MIDI numbers, and should not be accidentals (sharp or flat notes)."));if(i>=a)return new Error("Invalid prop ".concat(n," supplied to ").concat(r,". ").concat(n,".first must be smaller than ").concat(n,".last."))}var Rd=function(e){Qa(n,e);function n(){var r,s;Ka(this,n);for(var i=arguments.length,a=new Array(i),c=0;c<i;c++)a[c]=arguments[c];return s=Xa(this,(r=Fo(n)).call.apply(r,[this].concat(a))),at(At(s),"state",{isMouseDown:!1,useTouchEvents:!1}),at(At(s),"handleNoteChanges",function(d){var h=d.prevActiveNotes,m=d.nextActiveNotes;if(!s.props.disabled){var p=mp(h,m),g=mp(m,h);g.forEach(function(y){s.props.playNote(y)}),p.forEach(function(y){s.props.stopNote(y)})}}),at(At(s),"getMidiNumberForKey",function(d){if(!s.props.keyboardShortcuts)return null;var h=s.props.keyboardShortcuts.find(function(m){return m.key===d});return h&&h.midiNumber}),at(At(s),"getKeyForMidiNumber",function(d){if(!s.props.keyboardShortcuts)return null;var h=s.props.keyboardShortcuts.find(function(m){return m.midiNumber===d});return h&&h.key}),at(At(s),"onKeyDown",function(d){if(!(d.ctrlKey||d.metaKey||d.shiftKey)){var h=s.getMidiNumberForKey(d.key);h&&s.onPlayNoteInput(h)}}),at(At(s),"onKeyUp",function(d){var h=s.getMidiNumberForKey(d.key);h&&s.onStopNoteInput(h)}),at(At(s),"onPlayNoteInput",function(d){s.props.disabled||s.props.onPlayNoteInput(d,s.props.activeNotes)}),at(At(s),"onStopNoteInput",function(d){s.props.disabled||s.props.onStopNoteInput(d,s.props.activeNotes)}),at(At(s),"onMouseDown",function(){s.setState({isMouseDown:!0})}),at(At(s),"onMouseUp",function(){s.setState({isMouseDown:!1})}),at(At(s),"onTouchStart",function(){s.setState({useTouchEvents:!0})}),at(At(s),"renderNoteLabel",function(d){var h=d.midiNumber,m=d.isActive,p=d.isAccidental,g=s.getKeyForMidiNumber(h);return s.props.renderNoteLabel({keyboardShortcut:g,midiNumber:h,isActive:m,isAccidental:p})}),s}return Ya(n,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.onKeyDown),window.addEventListener("keyup",this.onKeyUp)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.onKeyDown),window.removeEventListener("keyup",this.onKeyUp)}},{key:"componentDidUpdate",value:function(s,i){this.props.activeNotes!==s.activeNotes&&this.handleNoteChanges({prevActiveNotes:s.activeNotes||[],nextActiveNotes:this.props.activeNotes||[]})}},{key:"render",value:function(){return ve.createElement("div",{style:{width:"100%",height:"100%"},onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchStart:this.onTouchStart,"data-testid":"container"},ve.createElement(Td,{noteRange:this.props.noteRange,onPlayNoteInput:this.onPlayNoteInput,onStopNoteInput:this.onStopNoteInput,activeNotes:this.props.activeNotes,className:this.props.className,disabled:this.props.disabled,width:this.props.width,keyWidthToHeight:this.props.keyWidthToHeight,gliss:this.state.isMouseDown,useTouchEvents:this.state.useTouchEvents,renderNoteLabel:this.renderNoteLabel}))}}]),n}(ve.Component);at(Rd,"propTypes",{noteRange:De.object.isRequired,activeNotes:De.arrayOf(De.number.isRequired).isRequired,playNote:De.func.isRequired,stopNote:De.func.isRequired,onPlayNoteInput:De.func.isRequired,onStopNoteInput:De.func.isRequired,renderNoteLabel:De.func.isRequired,className:De.string,disabled:De.bool,width:De.number,keyWidthToHeight:De.number,keyboardShortcuts:De.arrayOf(De.shape({key:De.string.isRequired,midiNumber:De.number.isRequired}))});at(Rd,"defaultProps",{renderNoteLabel:function(n){var r=n.keyboardShortcut;n.midiNumber;var s=n.isActive,i=n.isAccidental;return r?ve.createElement("div",{className:ct("ReactPiano__NoteLabel",{"ReactPiano__NoteLabel--active":s,"ReactPiano__NoteLabel--accidental":i,"ReactPiano__NoteLabel--natural":!i})},r):null}});var Md=function(e){Qa(n,e);function n(){var r,s;Ka(this,n);for(var i=arguments.length,a=new Array(i),c=0;c<i;c++)a[c]=arguments[c];return s=Xa(this,(r=Fo(n)).call.apply(r,[this].concat(a))),at(At(s),"state",{activeNotes:s.props.activeNotes||[]}),at(At(s),"handlePlayNoteInput",function(d){s.setState(function(h){return s.props.onPlayNoteInput&&s.props.onPlayNoteInput(d,{prevActiveNotes:h.activeNotes}),h.activeNotes.includes(d)?null:{activeNotes:h.activeNotes.concat(d)}})}),at(At(s),"handleStopNoteInput",function(d){s.setState(function(h){return s.props.onStopNoteInput&&s.props.onStopNoteInput(d,{prevActiveNotes:s.state.activeNotes}),{activeNotes:h.activeNotes.filter(function(m){return d!==m})}})}),s}return Ya(n,[{key:"componentDidUpdate",value:function(s){s.activeNotes!==this.props.activeNotes&&this.state.activeNotes!==this.props.activeNotes&&this.setState({activeNotes:this.props.activeNotes||[]})}},{key:"render",value:function(){var s=this.props;s.activeNotes,s.onPlayNoteInput,s.onStopNoteInput;var i=J0(s,["activeNotes","onPlayNoteInput","onStopNoteInput"]);return ve.createElement(Rd,td({activeNotes:this.state.activeNotes,onPlayNoteInput:this.handlePlayNoteInput,onStopNoteInput:this.handleStopNoteInput},i))}}]),n}(ve.Component);at(Md,"propTypes",{noteRange:De.object.isRequired,activeNotes:De.arrayOf(De.number.isRequired),playNote:De.func.isRequired,stopNote:De.func.isRequired,onPlayNoteInput:De.func,onStopNoteInput:De.func,renderNoteLabel:De.func,className:De.string,disabled:De.bool,width:De.number,keyWidthToHeight:De.number,keyboardShortcuts:De.arrayOf(De.shape({key:De.string.isRequired,midiNumber:De.number.isRequired}))});function h1(e){for(var n=e.firstNote,r=e.lastNote,s=e.keyboardConfig,i=n,a=0,c=[];a<s.length&&i<=r;){var d=s[a],h=mn.getAttributes(i),m=h.isAccidental;m?c.push({key:d.flat,midiNumber:i}):(c.push({key:d.natural,midiNumber:i}),a+=1),i+=1}return c}var vp={create:h1,BOTTOM_ROW:[{natural:"z",flat:"a",sharp:"s"},{natural:"x",flat:"s",sharp:"d"},{natural:"c",flat:"d",sharp:"f"},{natural:"v",flat:"f",sharp:"g"},{natural:"b",flat:"g",sharp:"h"},{natural:"n",flat:"h",sharp:"j"},{natural:"m",flat:"j",sharp:"k"},{natural:",",flat:"k",sharp:"l"},{natural:".",flat:"l",sharp:";"},{natural:"/",flat:";",sharp:"'"}],HOME_ROW:[{natural:"a",flat:"q",sharp:"w"},{natural:"s",flat:"w",sharp:"e"},{natural:"d",flat:"e",sharp:"r"},{natural:"f",flat:"r",sharp:"t"},{natural:"g",flat:"t",sharp:"y"},{natural:"h",flat:"y",sharp:"u"},{natural:"j",flat:"u",sharp:"i"},{natural:"k",flat:"i",sharp:"o"},{natural:"l",flat:"o",sharp:"p"},{natural:";",flat:"p",sharp:"["},{natural:"'",flat:"[",sharp:"]"}],QWERTY_ROW:[{natural:"q",flat:"1",sharp:"2"},{natural:"w",flat:"2",sharp:"3"},{natural:"e",flat:"3",sharp:"4"},{natural:"r",flat:"4",sharp:"5"},{natural:"t",flat:"5",sharp:"6"},{natural:"y",flat:"6",sharp:"7"},{natural:"u",flat:"7",sharp:"8"},{natural:"i",flat:"8",sharp:"9"},{natural:"o",flat:"9",sharp:"0"},{natural:"p",flat:"0",sharp:"-"},{natural:"[",flat:"-",sharp:"="}]};const yp=e=>{let n;const r=new Set,s=(m,p)=>{const g=typeof m=="function"?m(n):m;if(!Object.is(g,n)){const y=n;n=p??(typeof g!="object"||g===null)?g:Object.assign({},n,g),r.forEach(b=>b(n,y))}},i=()=>n,d={setState:s,getState:i,getInitialState:()=>h,subscribe:m=>(r.add(m),()=>r.delete(m))},h=n=e(s,i,d);return d},m1=e=>e?yp(e):yp,p1=e=>e;function g1(e,n=p1){const r=ve.useSyncExternalStore(e.subscribe,ve.useCallback(()=>n(e.getState()),[e,n]),ve.useCallback(()=>n(e.getInitialState()),[e,n]));return ve.useDebugValue(r),r}const xp=e=>{const n=m1(e),r=s=>g1(n,s);return Object.assign(r,n),r},ai=e=>e?xp(e):xp;class bp extends Error{constructor(n,r,s){super(s),this.name="ApiError",this.url=r.url,this.status=r.status,this.statusText=r.statusText,this.body=r.body,this.request=n}}class v1 extends Error{constructor(n){super(n),this.name="CancelError"}get isCancelled(){return!0}}class y1{#t;#n;#e;#r;#s;#i;#o;constructor(n){this.#t=!1,this.#n=!1,this.#e=!1,this.#r=[],this.#s=new Promise((r,s)=>{this.#i=r,this.#o=s;const i=d=>{this.#t||this.#n||this.#e||(this.#t=!0,this.#i&&this.#i(d))},a=d=>{this.#t||this.#n||this.#e||(this.#n=!0,this.#o&&this.#o(d))},c=d=>{this.#t||this.#n||this.#e||this.#r.push(d)};return Object.defineProperty(c,"isResolved",{get:()=>this.#t}),Object.defineProperty(c,"isRejected",{get:()=>this.#n}),Object.defineProperty(c,"isCancelled",{get:()=>this.#e}),n(i,a,c)})}get[Symbol.toStringTag](){return"Cancellable Promise"}then(n,r){return this.#s.then(n,r)}catch(n){return this.#s.catch(n)}finally(n){return this.#s.finally(n)}cancel(){if(!(this.#t||this.#n||this.#e)){if(this.#e=!0,this.#r.length)try{for(const n of this.#r)n()}catch(n){console.warn("Cancellation threw an error",n);return}this.#r.length=0,this.#o&&this.#o(new v1("Request aborted"))}}get isCancelled(){return this.#e}}const Od={BASE:"http://localhost:8080",VERSION:"0",WITH_CREDENTIALS:!1,CREDENTIALS:"include",TOKEN:void 0,USERNAME:void 0,PASSWORD:void 0,HEADERS:void 0,ENCODE_PATH:void 0},_d=e=>e!=null,li=e=>typeof e=="string",tu=e=>li(e)&&e!=="",Ld=e=>typeof e=="object"&&typeof e.type=="string"&&typeof e.stream=="function"&&typeof e.arrayBuffer=="function"&&typeof e.constructor=="function"&&typeof e.constructor.name=="string"&&/^(Blob|File)$/.test(e.constructor.name)&&/^(Blob|File)$/.test(e[Symbol.toStringTag]),Tv=e=>e instanceof FormData,x1=e=>{try{return btoa(e)}catch{return Buffer.from(e).toString("base64")}},b1=e=>{const n=[],r=(i,a)=>{n.push(`${encodeURIComponent(i)}=${encodeURIComponent(String(a))}`)},s=(i,a)=>{_d(a)&&(Array.isArray(a)?a.forEach(c=>{s(i,c)}):typeof a=="object"?Object.entries(a).forEach(([c,d])=>{s(`${i}[${c}]`,d)}):r(i,a))};return Object.entries(e).forEach(([i,a])=>{s(i,a)}),n.length>0?`?${n.join("&")}`:""},N1=(e,n)=>{const r=encodeURI,s=n.url.replace("{api-version}",e.VERSION).replace(/{(.*?)}/g,(a,c)=>n.path?.hasOwnProperty(c)?r(String(n.path[c])):a),i=`${e.BASE}${s}`;return n.query?`${i}${b1(n.query)}`:i},w1=e=>{if(e.formData){const n=new FormData,r=(s,i)=>{li(i)||Ld(i)?n.append(s,i):n.append(s,JSON.stringify(i))};return Object.entries(e.formData).filter(([s,i])=>_d(i)).forEach(([s,i])=>{Array.isArray(i)?i.forEach(a=>r(s,a)):r(s,i)}),n}},ba=async(e,n)=>n,C1=async(e,n)=>{const[r,s,i,a]=await Promise.all([ba(n,e.TOKEN),ba(n,e.USERNAME),ba(n,e.PASSWORD),ba(n,e.HEADERS)]),c=Object.entries({Accept:"application/json",...a,...n.headers}).filter(([d,h])=>_d(h)).reduce((d,[h,m])=>({...d,[h]:String(m)}),{});if(tu(r)&&(c.Authorization=`Bearer ${r}`),tu(s)&&tu(i)){const d=x1(`${s}:${i}`);c.Authorization=`Basic ${d}`}return n.body&&(n.mediaType?c["Content-Type"]=n.mediaType:Ld(n.body)?c["Content-Type"]=n.body.type||"application/octet-stream":li(n.body)?c["Content-Type"]="text/plain":Tv(n.body)||(c["Content-Type"]="application/json")),new Headers(c)},S1=e=>{if(e.body!==void 0)return e.mediaType?.includes("/json")?JSON.stringify(e.body):li(e.body)||Ld(e.body)||Tv(e.body)?e.body:JSON.stringify(e.body)},E1=async(e,n,r,s,i,a,c)=>{const d=new AbortController,h={headers:a,body:s??i,method:n.method,signal:d.signal};return c(()=>d.abort()),await fetch(r,h)},D1=(e,n)=>{if(n){const r=e.headers.get(n);if(li(r))return r}},j1=async e=>{if(e.status!==204)try{const n=e.headers.get("Content-Type");if(n)return["application/json","application/problem+json"].some(i=>n.toLowerCase().startsWith(i))?await e.json():await e.text()}catch(n){console.error(n)}},A1=(e,n)=>{const s={400:"Bad Request",401:"Unauthorized",403:"Forbidden",404:"Not Found",500:"Internal Server Error",502:"Bad Gateway",503:"Service Unavailable",...e.errors}[n.status];if(s)throw new bp(e,n,s);if(!n.ok){const i=n.status??"unknown",a=n.statusText??"unknown",c=(()=>{try{return JSON.stringify(n.body,null,2)}catch{return}})();throw new bp(e,n,`Generic Error: status: ${i}; status text: ${a}; body: ${c}`)}},Fd=(e,n)=>new y1(async(r,s,i)=>{try{const a=N1(e,n),c=w1(n),d=S1(n),h=await C1(e,n);if(!i.isCancelled){const m=await E1(e,n,a,d,c,h,i),p=await j1(m),g=D1(m,n.responseHeader),y={url:a,ok:m.ok,status:m.status,statusText:m.statusText,body:g??p};A1(n,y),r(y.body)}}catch(a){s(a)}});class Np{static getModeKeyChords(n,r){return Fd(Od,{method:"GET",url:"/api/chords",query:{key:n,mode:r}})}}class nu{static getModes(){return Fd(Od,{method:"GET",url:"/api/modes"})}}class k1{static getScaleNotes(n,r){return Fd(Od,{method:"GET",url:"/api/scales",query:{key:n,mode:r}})}}const I1={"C##":"D","D##":"E","E#":"F","F##":"G","G##":"A","A##":"B","B#":"C",Cb:"B",Db:"C#",Eb:"D#",Fb:"E",Gb:"F#",Ab:"G#",Bb:"A#",Dbb:"C",Ebb:"D",Fbb:"E",Gbb:"F",Abb:"G",Bbb:"A",Cbb:"B"},Vr=e=>{if(e)return I1[e]||e},P1=e=>{if(!e||e.length===0)return"C";const n=e.charAt(0).toUpperCase(),r=e.slice(1);let i={C:0,D:2,E:4,F:5,G:7,A:9,B:11}[n];if(i===void 0)return"C";const a=(r.match(/#/g)||[]).length,c=(r.match(/b/g)||[]).length;return i+=a-c,i=(i%12+12)%12,["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"][i]},ru=new Map,Na=(e,n)=>{const r=`${e}-${n}`;if(ru.has(r))return ru.get(r);const s=mn.fromNote(`${P1(e)}${n}`);return ru.set(r,s),s};function Cn(e){if(!e||e.length===0)return 0;const n=e.charAt(0).toUpperCase(),r=e.slice(1).replace(/\d+/g,"");let i={C:0,D:2,E:4,F:5,G:7,A:9,B:11}[n];if(i===void 0)return 0;const a=(r.match(/#/g)||[]).length,c=(r.match(/b/g)||[]).length;return i+=a,i-=c,(i%12+12)%12}class T1{constructor(){this.chordTypes={"":[0,4,7],m:[0,3,7],aug:[0,4,8],dim:[0,3,6],5:[0,7],b5:[0,4,6],6:[0,4,7,9],m6:[0,3,7,9],7:[0,4,7,10],m7:[0,3,7,10],maj7:[0,4,7,11],dim7:[0,3,6,9],aug7:[0,4,8,10],m7b5:[0,3,6,10],"maj7#5":[0,4,8,11],maj7b5:[0,4,6,11],"m7#5":[0,3,8,10],m7b9:[0,3,7,10,13],9:[0,4,7,10,14],m9:[0,3,7,10,14],maj9:[0,4,7,11,14],"maj9#11":[0,4,7,11,14,18],"7b9":[0,4,7,10,13],"7#9":[0,4,7,10,15],"9#5":[0,4,8,10,14],"9b5":[0,4,6,10,14],11:[0,4,7,10,14,17],m11:[0,3,7,10,14,17],maj11:[0,4,7,11,14,17],"7#11":[0,4,7,10,18],"maj7#11":[0,4,7,11,18],"m7#11":[0,3,7,10,18],"11b9":[0,4,7,10,13,14,17],13:[0,4,7,10,14,17,21],m13:[0,3,7,10,14,17,21],maj13:[0,4,7,11,14,17,21],"13#11":[0,4,7,10,14,18,21],"maj13#11":[0,4,7,11,14,18,21],sus2:[0,2,7],sus4:[0,5,7],sus2sus4:[0,2,5,7],"7sus2":[0,2,7,10],"7sus4":[0,5,7,10],"9sus4":[0,5,7,10,14],"add(2)":[0,2,4,7],"add(4)":[0,4,5,7],"add(9)":[0,4,7,14],"add(2) add(4)":[0,2,4,5,7],"m add(2)":[0,2,3,7],"m add(4)":[0,3,5,7],"m add(9)":[0,3,7,14],"m add(2) add(4)":[0,2,3,5,7],"7 add(4)":[0,4,5,7,10],"m7 add(4)":[0,3,5,7,10],"6/9":[0,4,7,9,14],"m6/9":[0,3,7,9,14],"maj6/7":[0,4,7,9,11],"7/6":[0,4,7,9,10],"m7/6":[0,3,7,9,10],"m/Maj7":[0,3,7,11],"m/Maj9":[0,3,7,11,14],"m/Maj11":[0,3,7,11,14,17],"m/Maj13":[0,3,7,11,14,17,21],"7b5":[0,4,6,10],"7#5":[0,4,8,10],"7b5b9":[0,4,6,10,13],"7b5#9":[0,4,6,10,15],"7#5b9":[0,4,8,10,13],"7#5#9":[0,4,8,10,15],"7aug5":[0,4,8,10],maj7sus2:[0,2,7,11],maj7sus4:[0,5,7,11],"6sus2":[0,2,7,9],"6sus4":[0,5,7,9],"9sus2":[0,2,7,10,14],"13sus4":[0,5,7,10,14,21],"7b13":[0,4,7,10,20],"7#9#11":[0,4,7,10,15,18],"7b9#11":[0,4,7,10,13,18],"7b9b13":[0,4,7,10,13,20],"7#9b13":[0,4,7,10,15,20],"7alt":[0,4,6,8,10,13,15],madd9:[0,3,7,14],"6add9":[0,4,7,9,14],"7no5":[0,4,10],"9no5":[0,4,10,14],maj7no5:[0,4,11],m7no5:[0,3,10],m9no5:[0,3,10,14],dim9:[0,3,6,9,14],dim11:[0,3,6,9,14,17],dimMaj7:[0,3,6,11],augMaj7:[0,4,8,11],aug9:[0,4,8,10,14],sus4add9:[0,5,7,14],"4th":[0,5,10],"4ths":[0,5,10,15],maj9no5:[0,4,11,14],"11no5":[0,4,10,14,17],maj6add4:[0,4,5,7,9],"7b9#5":[0,4,8,10,13]},this.chromaticNotes=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],this.chromaticNotesFlat=["C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B"]}scaleUsesFlats(n,r){const s=n.some(a=>a.noteName&&a.noteName.includes("b")),i=r.includes("b");return s||i}getChromaticNoteName(n,r,s){const i=(n%12+12)%12;return this.scaleUsesFlats(r,s)?this.chromaticNotesFlat[i]:this.chromaticNotes[i]}findBestNoteName(n,r,s,i,a){const c=(n%12+12)%12,d=r.find(h=>(Cn(h.noteName)%12+12)%12===c);return d?d.noteName:this.getChromaticNoteName(c,r,s)}async generateChordsForScale(n,r,s=!1){try{const i=await Ln.getScaleNotes(n,r),c=(await Ln.getModes()).find(m=>m.name===r);if(!c)throw new Error(`Mode "${r}" not found`);const d=i.map(m=>(Cn(m.noteName)%12+12)%12),h=[];return i.forEach(m=>{const p=Cn(m.noteName);Object.entries(this.chordTypes).forEach(([g,y])=>{const b=[],w=[];let E=!0;y.forEach(C=>{const j=p+C,P=(j%12+12)%12;d.includes(P)||(E=!1);const A=this.findBestNoteName(j,i,n,m.noteName,C);b.push(j),w.push(A)}),(E||s)&&h.push({keyName:n,modeId:c.id,chordNote:p,chordNoteName:m.noteName,chordName:`${m.noteName}${g}`,chordNotes:b.join(", "),chordNoteNames:w.join(", ")})})}),h}catch(i){throw console.error("Error generating chords for scale:",i),i}}async generateChord(n,r,s,i){try{const a=this.chordTypes[r];if(!a)throw new Error(`Unknown chord type: ${r}`);const c=await Ln.getScaleNotes(s,i),h=(await Ln.getModes()).find(y=>y.name===i);if(!h)throw new Error(`Mode "${i}" not found`);const m=Cn(n),p=[],g=[];return a.forEach(y=>{const b=m+y,w=this.findBestNoteName(b,c,s,n,y);p.push(b),g.push(w)}),{keyName:s,modeId:h.id,chordNote:m,chordNoteName:n,chordName:`${n}${r}`,chordNotes:p.join(", "),chordNoteNames:g.join(", ")}}catch(a){return console.error("Error generating chord:",a),null}}async getCompatibleChords(n,r){return this.generateChordsForScale(n,r,!1)}async getAllPossibleChords(n,r){return this.generateChordsForScale(n,r,!0)}getChordTypes(){return Object.keys(this.chordTypes)}addChordType(n,r){this.chordTypes[n]=r}}const fn=new T1;class R1{constructor(){this.baseUrl="/data",this.indexCache=null,this.modesCache=null,this.scalesCache=new Map,this.distinctChordsCache=new Map,this.useDynamicChords=!0}normalizeKey(n){const r=n.trim();return r.length===0?"":r.charAt(0).toUpperCase()+r.slice(1).toLowerCase()}setUseDynamicChords(n){this.useDynamicChords=n,this.distinctChordsCache.clear()}async loadIndex(){if(this.indexCache)return this.indexCache;try{const n=await fetch(`${this.baseUrl}/index.json`);if(!n.ok)throw new Error(`Failed to load index: ${n.statusText}`);return this.indexCache=await n.json(),this.indexCache}catch(n){throw console.error("Error loading static data index:",n),new Error("Failed to load static data. Please ensure the data generation completed successfully.")}}async getModes(){if(this.modesCache)return this.modesCache;try{const n=await fetch(`${this.baseUrl}/modes.json`);if(!n.ok)throw new Error(`Failed to load modes: ${n.statusText}`);return this.modesCache=await n.json(),this.modesCache}catch(n){throw n}}async getModeKeyChords(n,r,s=!1){const i=this.normalizeKey(n);if(this.useDynamicChords)try{return(await fn.generateChordsForScale(i,r,s)).map(c=>({keyName:c.keyName,modeId:c.modeId,chordNote:c.chordNote,chordNoteName:c.chordNoteName,chordName:c.chordName,chordNotes:c.chordNotes,chordNoteNames:c.chordNoteNames}))}catch(a){console.warn("Dynamic chord generation failed, falling back to static data:",a)}try{const c=(await this.loadIndex()).modes.find(g=>g.name===r);if(!c||!c.id)throw new Error(`Mode "${r}" not found`);const d=c.id.toString(),h=await fetch(`${this.baseUrl}/chords-mode-${d}.json`);if(!h.ok)throw new Error(`Failed to load chords for mode ${r}: ${h.statusText}`);return(await h.json()).filter(g=>g.keyName===i)}catch(a){throw console.error("Error loading chords from static data:",a),a}}async getCompatibleChords(n,r){if(this.useDynamicChords)try{const c=this.normalizeKey(n);return(await fn.getCompatibleChords(c,r)).map(h=>({keyName:h.keyName,modeId:h.modeId,chordNote:h.chordNote,chordNoteName:h.chordNoteName,chordName:h.chordName,chordNotes:h.chordNotes,chordNoteNames:h.chordNoteNames}))}catch(c){console.warn("Dynamic compatible chord generation failed:",c)}const s=await this.getModeKeyChords(n,r),a=(await this.getScaleNotes(n,r)).map(c=>(({C:0,"C#":1,Db:1,D:2,"D#":3,Eb:3,E:4,"E#":5,Fb:4,F:5,"F#":6,Gb:6,G:7,"G#":8,Ab:8,A:9,"A#":10,Bb:10,B:11,"B#":0,Cb:11}[c.noteName]??0)%12+12)%12);return s.filter(c=>c.chordNotes?c.chordNotes.split(", ").map(h=>(parseInt(h.trim())%12+12)%12).every(h=>a.includes(h)):!1)}async generateSpecificChord(n,r,s,i){if(!this.useDynamicChords)throw new Error("Dynamic chord generation is disabled");try{const a=this.normalizeKey(s),c=await fn.generateChord(n,r,a,i);return c?{keyName:c.keyName,modeId:c.modeId,chordNote:c.chordNote,chordNoteName:c.chordNoteName,chordName:c.chordName,chordNotes:c.chordNotes,chordNoteNames:c.chordNoteNames}:null}catch(a){return console.error("Error generating specific chord:",a),null}}getAvailableChordTypes(){return fn.getChordTypes()}async getScaleNotes(n,r){try{const s=this.normalizeKey(n),a=(await this.loadIndex()).modes.find(m=>m.name===r);if(!a||!a.id)throw new Error(`Mode "${r}" not found`);const c=a.id.toString();if(this.scalesCache.has(c))return this.scalesCache.get(c)[s]||[];const d=await fetch(`${this.baseUrl}/scales-mode-${c}.json`);if(!d.ok)throw new Error(`Failed to load scales for mode ${r}: ${d.statusText}`);const h=await d.json();return this.scalesCache.set(c,h),h[s]||[]}catch(s){throw console.error("Error loading scale notes from static data:",s),s}}async getBestRootNoteName(n,r,s){const i=(n%12+12)%12,a=r.find(p=>Cn(p.noteName)===i);if(a?.noteName)return a.noteName;const c=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],d=["C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B"],h=r.some(p=>p.noteName&&p.noteName.includes("b")),m=s.includes("b");return h||m?d[i]:c[i]}async getAllDistinctChords(n,r){const s=this.normalizeKey(n),i=`${s}-${r}`;if(this.distinctChordsCache.has(i))return this.distinctChordsCache.get(i);if(this.useDynamicChords)try{const a=await this.getScaleNotes(s,r);if(!(await this.getModes()).find(g=>g.name===r)?.id)throw new Error(`Mode "${r}" not found`);const h=[],m=fn.getChordTypes();for(let g=0;g<12;g++){const y=await this.getBestRootNoteName(g,a,s);for(const b of m)try{const w=await fn.generateChord(y,b,s,r);w&&h.push({keyName:w.keyName,modeId:w.modeId,chordNote:w.chordNote,chordNoteName:w.chordNoteName,chordName:w.chordName,chordNotes:w.chordNotes,chordNoteNames:w.chordNoteNames})}catch(w){console.warn(`Error generating ${y}${b}:`,w)}}const p=this.deduplicateChordsByNoteContent(h,a,s);return this.distinctChordsCache.set(i,p),p}catch(a){console.warn("Dynamic distinct chord generation failed, falling back to static data:",a)}try{const a=await this.loadIndex(),c=[];for(const m of a.modes){if(!m.id)continue;const p=m.id.toString();try{const g=await fetch(`${this.baseUrl}/chords-mode-${p}.json`);if(!g.ok){console.warn(`Failed to load chords for mode ${m.name} (ID: ${p}): ${g.statusText}`);continue}const y=await g.json();c.push(...y)}catch(g){console.warn(`Error loading chords for mode ${m.name}:`,g)}}const d=await this.getScaleNotes(s,r),h=this.deduplicateChordsByNoteContent(c,d,s);return this.distinctChordsCache.set(i,h),h}catch(a){throw console.error("Error loading all distinct chords from static data:",a),a}}deduplicateChordsByNoteContent(n,r,s){const i=new Map;for(const p of n){if(!p.chordName)continue;const g=p.chordName;i.has(g)||i.set(g,[]),i.get(g).push(p)}const a=new Set(r.map(p=>Cn(p.noteName))),c=r.some(p=>p.noteName&&p.noteName.includes("b")),d=s.includes("b"),h=c||d,m=[];for(const[p,g]of i){if(g.length===1){m.push(g[0]);continue}let y=g[0],b=this.scoreChordNaming(g[0],a,h);for(let w=1;w<g.length;w++){const E=this.scoreChordNaming(g[w],a,h);E>b&&(b=E,y=g[w])}m.push(y)}return m}scoreChordNaming(n,r,s){if(!n.chordNoteNames)return 0;let i=0;const a=n.chordNoteNames.split(",").map(c=>c.trim());for(const c of a){const d=Cn(c);r.has(d)&&(i+=10),(s&&c.includes("b")||!s&&c.includes("#"))&&(i+=5),!c.includes("#")&&!c.includes("b")&&(i+=3),(c.includes("##")||c.includes("bb"))&&(i-=5)}if(n.chordNoteName){const c=Cn(n.chordNoteName);r.has(c)&&(i+=15)}return i}async getMetadata(){if(this.useDynamicChords){const r=await this.getModes();return{generatedAt:new Date().toISOString(),modesCount:r.length,usingDynamicChords:!0}}const n=await this.loadIndex();return{generatedAt:n.generated_at,modesCount:n.modes.length,usingDynamicChords:!1}}clearCache(){this.indexCache=null,this.modesCache=null,this.scalesCache.clear(),this.distinctChordsCache.clear()}}const Ln=new R1,M1={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_BASE_URL:"http://localhost:8080",VITE_USE_STATIC_DATA:"true"};function O1(){try{return M1||{}}catch{return console.warn("Failed to access import.meta.env, using fallbacks"),{}}}const _1=O1();function wp(e,n=""){const r=_1[e];return typeof r=="string"?r:n}class L1{constructor(){const n=wp("VITE_USE_STATIC_DATA","true");console.log("Initializing DataService with environment:",{useStaticData:n}),this.config={useStaticData:n.toLowerCase()!=="false",apiBaseUrl:wp("VITE_API_BASE_URL","http://localhost:8080")},console.log("DataService initialized with config:",this.config)}async getModes(){return this.config.useStaticData?Ln.getModes():nu.getModes()}async getModeKeyChords(n,r){return this.config.useStaticData?Ln.getModeKeyChords(n,r):Np.getModeKeyChords(n,r)}async getScaleNotes(n,r){return this.config.useStaticData?Ln.getScaleNotes(n,r):k1.getScaleNotes(n,r)}async getAllDistinctChords(n,r){if(this.config.useStaticData)return console.log("Loading all distinct chords from static data"),Ln.getAllDistinctChords(n,r);{console.log("Loading all distinct chords from API");const s=await nu.getModes(),i=Hs,a=[];for(const c of s)for(const d of i)try{const h=await Np.getModeKeyChords(d,c.name);a.push(...h)}catch(h){console.warn(`Failed to load chords for ${c.name} in ${d}:`,h)}return this.deduplicateChords(a)}}deduplicateChords(n){const r=new Map;for(const s of n){let i;if(s.chordName&&s.chordName.trim()!=="")i=s.chordName.trim();else if(s.chordNoteNames&&s.chordNoteNames.trim()!=="")i=s.chordNoteNames.trim();else if(s.chordTypeId!==void 0&&s.chordNoteName)i=`${s.chordNoteName}_type_${s.chordTypeId}`;else if(s.chordNotes&&s.chordNotes.trim()!=="")i=s.chordNotes.trim();else{const a=[];s.chordNote!==void 0&&a.push(`note_${s.chordNote}`),s.chordTypeId!==void 0&&a.push(`type_${s.chordTypeId}`),s.chordNoteName&&a.push(s.chordNoteName),i=a.length>0?a.join("_"):JSON.stringify(s)}r.has(i)||r.set(i,s)}return Array.from(r.values())}getConfig(){return{...this.config}}updateConfig(n){this.config={...this.config,...n},console.log("DataService configuration updated:",this.config),n.useStaticData!==void 0&&Ln.clearCache()}async getDataSourceInfo(){if(this.config.useStaticData)try{return{source:"static",metadata:await Ln.getMetadata()}}catch{return{source:"static",metadata:{error:"Failed to load metadata"}}}else return{source:"api",metadata:{baseUrl:this.config.apiBaseUrl}}}async testConnection(){const n=Date.now();try{return this.config.useStaticData?await Ln.getModes():await nu.getModes(),{success:!0,responseTime:Date.now()-n}}catch(r){return{success:!1,error:r instanceof Error?r.message:"Unknown error",responseTime:Date.now()-n}}}}const zr=new L1,Qe=ai((e,n)=>({chords:void 0,scaleNotes:[],key:"C",mode:"Ionian",modes:[],loadingChords:!1,normalizedScaleNotes:[],allDistinctChords:void 0,allDistinctChordsKey:null,allDistinctChordsMode:null,loadingAllChords:!1,showAllChords:!1,setKey:r=>{e({key:r,allDistinctChords:void 0,allDistinctChordsKey:null,allDistinctChordsMode:null}),n().fetchMusicData(r,n().mode),n().showAllChords&&n().fetchAllDistinctChords()},setMode:r=>{e({mode:r,allDistinctChords:void 0,allDistinctChordsKey:null,allDistinctChordsMode:null}),n().fetchMusicData(n().key,r),n().showAllChords&&n().fetchAllDistinctChords()},setModes:r=>{e({modes:r});const{key:s,mode:i,chords:a}=n();!a&&s&&i&&n().fetchMusicData(s,i)},setKeyAndMode:(r,s)=>{e({key:r,mode:s,allDistinctChords:void 0,allDistinctChordsKey:null,allDistinctChordsMode:null}),n().fetchMusicData(r,s),n().showAllChords&&n().fetchAllDistinctChords()},fetchMusicData:async(r,s)=>{if(!(!r||!s)){e({loadingChords:!0});try{const[i,a]=await Promise.all([zr.getModeKeyChords(r,s),zr.getScaleNotes(r,s)]),c=a.map(d=>d.noteName?Vr(d.noteName):null).filter(Boolean);e({chords:i,scaleNotes:a,normalizedScaleNotes:c,loadingChords:!1})}catch(i){console.error("Error fetching music data:",i),e({loadingChords:!1})}}},initialize:async()=>{const{key:r,mode:s}=n();await n().fetchMusicData(r,s)},fetchAllDistinctChords:async()=>{const{allDistinctChords:r,allDistinctChordsKey:s,allDistinctChordsMode:i,key:a,mode:c}=n();if(!(r&&s===a&&i===c)){e({loadingAllChords:!0});try{const d=await zr.getAllDistinctChords(a,c);e({allDistinctChords:d,allDistinctChordsKey:a,allDistinctChordsMode:c,loadingAllChords:!1})}catch(d){console.error("Error fetching all distinct chords:",d),e({loadingAllChords:!1})}}},toggleShowAllChords:()=>{const{showAllChords:r,allDistinctChords:s,allDistinctChordsKey:i,allDistinctChordsMode:a,key:c,mode:d}=n(),h=!r;e({showAllChords:h}),h&&(!s||i!==c||a!==d)&&n().fetchAllDistinctChords()},setShowAllChords:r=>{const{allDistinctChords:s,allDistinctChordsKey:i,allDistinctChordsMode:a,key:c,mode:d}=n();e({showAllChords:r}),r&&(!s||i!==c||a!==d)&&n().fetchAllDistinctChords()}})),F1=["electric_piano_1","acoustic_grand_piano","bright_acoustic_piano","electric_grand_piano","honkytonk_piano","electric_piano_2","harpsichord","clavinet"],B1=()=>({instrumentName:"electric_piano_1",cutOffPreviousNotes:!0,eq:{bass:0,mid:0,treble:0},octaveOffset:0,reverbLevel:0,noteDuration:.8,volume:.8,chorusLevel:0,delayLevel:0,distortionLevel:0,bitcrusherLevel:0,phaserLevel:0,flangerLevel:0,ringModLevel:0,autoFilterLevel:0,tremoloLevel:0,stereoWidthLevel:0,compressorLevel:0}),ar=ai((e,n)=>({pianoSettings:B1(),availableInstruments:F1,updatePianoSettings:r=>e(s=>({pianoSettings:{...s.pianoSettings,...r}})),setPianoInstrument:r=>n().updatePianoSettings({instrumentName:r}),setCutOffPreviousNotes:r=>n().updatePianoSettings({cutOffPreviousNotes:r}),setEq:r=>n().updatePianoSettings({eq:r}),setOctaveOffset:r=>n().updatePianoSettings({octaveOffset:r}),setReverbLevel:r=>n().updatePianoSettings({reverbLevel:r}),setNoteDuration:r=>n().updatePianoSettings({noteDuration:r}),setVolume:r=>n().updatePianoSettings({volume:r}),setChorusLevel:r=>n().updatePianoSettings({chorusLevel:r}),setDelayLevel:r=>n().updatePianoSettings({delayLevel:r}),setDistortionLevel:r=>n().updatePianoSettings({distortionLevel:r}),setBitcrusherLevel:r=>n().updatePianoSettings({bitcrusherLevel:r}),setPhaserLevel:r=>n().updatePianoSettings({phaserLevel:r}),setFlangerLevel:r=>n().updatePianoSettings({flangerLevel:r}),setRingModLevel:r=>n().updatePianoSettings({ringModLevel:r}),setAutoFilterLevel:r=>n().updatePianoSettings({autoFilterLevel:r}),setTremoloLevel:r=>n().updatePianoSettings({tremoloLevel:r}),setStereoWidthLevel:r=>n().updatePianoSettings({stereoWidthLevel:r}),setCompressorLevel:r=>n().updatePianoSettings({compressorLevel:r}),setAvailableInstruments:r=>e({availableInstruments:r})})),$1=()=>{const e=s=>{const i=s.match(/\/([A-G](##|#|bb|b)?)/);return i?i[1]:null},n=s=>s.replace(/\/[A-G](##|#|bb|b)?/,"");return{transposeChords:N.useCallback(async(s,i,a,c)=>{const d=Re.getState().addedChords;if(d.length===0)return;const h=s!==a?Rv(s,a):0,[m,p]=await Promise.all([zr.getModeKeyChords(a,c),zr.getAllDistinctChords(a,c)]),g=d.map(y=>{const b=e(y.name),w=n(y.name),E=h!==0?sd(w,h):w,C=b&&h!==0?sd(b,h):b,j=C?`${E}/${C}`:E;let P;h!==0?P=Ta(y.notes,h):P=y.notes;const D=(m.find(k=>k.chordName===E)||p.find(k=>k.chordName===E))?.chordNoteNames||(y.originalNotes&&h!==0?Ta(y.originalNotes,h):y.originalNotes||P);return{...y,name:j,notes:P,originalKey:a,originalMode:c,originalNotes:D}});Re.getState().setAddedChords(g)},[])}},od=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],Rv=(e,n)=>{const r={Db:"C#",Eb:"D#",Gb:"F#",Ab:"G#",Bb:"A#"},s=r[e]||e,i=r[n]||n,a=od.indexOf(s),c=od.indexOf(i);if(a===-1||c===-1)return 0;let d=c-a;return d>6&&(d-=12),d<-5&&(d+=12),d},Mv=(e,n)=>{if(!e||e.length===0)return e;const r=e[0].toUpperCase(),s=e.slice(1),a={C:0,D:2,E:4,F:5,G:7,A:9,B:11}[r];if(a===void 0)return e;let c=0;s==="#"?c=1:s==="b"?c=-1:s==="##"?c=2:s==="bb"&&(c=-2);const h=((a+c+12)%12+n+12)%12;return od[h]},sd=(e,n)=>{if(!e||e.length===0)return e;let r="",s="";return e.length>=3&&(e.substring(1,3)==="##"||e.substring(1,3)==="bb")?(r=e.substring(0,3),s=e.substring(3)):e.length>=2&&(e[1]==="#"||e[1]==="b")?(r=e.substring(0,2),s=e.substring(2)):e.length>=1&&(r=e[0],s=e.substring(1)),Mv(r,n)+s},Ta=(e,n)=>{const r=e.includes(",")?",":" ";return e.split(r).map(s=>s.trim()).filter(s=>s.length>0).map(s=>Mv(s,n)).join(", ")},Re=ai((e,n)=>({activeNotes:[],activeChordIndex:null,highlightedChordIndex:null,addedChords:[],temporaryChord:null,isPlayingScale:!1,scalePlaybackTimeouts:[],setActiveNotes:r=>e({activeNotes:r}),setAddedChords:r=>e({addedChords:r}),setActiveChordIndex:r=>e({activeChordIndex:r}),setHighlightedChordIndex:r=>e({highlightedChordIndex:r}),setTemporaryChord:r=>e({temporaryChord:r}),setIsPlayingScale:r=>e({isPlayingScale:r}),addChord:(r,s,i,a,c)=>e(d=>({addedChords:[...d.addedChords,{name:r,notes:s,pattern:[...i],originalKey:a,originalMode:c,originalNotes:s}]})),updateChord:(r,s)=>e(i=>{const a=[...i.addedChords];return a[r]={...s},{addedChords:a}}),removeChord:r=>e(s=>{const i=s.addedChords.filter((c,d)=>d!==r);let a=s.activeChordIndex;return s.activeChordIndex===r?a=null:s.activeChordIndex!==null&&s.activeChordIndex>r&&(a=s.activeChordIndex-1),{addedChords:i,activeChordIndex:a}}),clearAllChords:()=>e({addedChords:[],activeChordIndex:null,temporaryChord:null}),updateChordPattern:(r,s)=>e(i=>{const a=[...i.addedChords];return a[r]={...a[r],pattern:[...s]},{addedChords:a}}),playNotes:r=>{e({activeNotes:[]}),setTimeout(()=>e({activeNotes:r}),10)},handleFetchOriginalChord:async(r,s,i)=>{try{return(await zr.getModeKeyChords(s,i)).find(d=>d.chordName===r)?.chordNoteNames||null}catch(a){return console.error("Failed to fetch original chord:",a),null}},addScalePlaybackTimeout:r=>e(s=>({scalePlaybackTimeouts:[...s.scalePlaybackTimeouts,r]})),clearScalePlaybackTimeouts:()=>{const{scalePlaybackTimeouts:r}=n();r.forEach(clearTimeout),e({scalePlaybackTimeouts:[]})},transposeAddedChords:async(r,s,i)=>{const{addedChords:a,handleFetchOriginalChord:c}=n();console.log(`Transposing added chords from ${r} to ${s} (${i})`),console.log(a);const d=Rv(r,s),h=await Promise.all(a.map(async m=>{const p=sd(m.name,d);console.log(`Transposing chord ${m.name} (${m.notes}) from ${r} to ${s}: ${p}`);const g=await c(p,s,i);if(g)return{...m,name:p,notes:g,originalKey:s,originalMode:i,originalNotes:g};{const y=Ta(m.notes,d),b=m.originalNotes?Ta(m.originalNotes,d):y;return{...m,name:p,notes:y,originalNotes:b}}}));e({addedChords:h})}})),lt=ai((e,n)=>({globalPatternState:{currentPattern:["1","2","3","4"],isPlaying:!1,bpm:120,subdivision:.25,swing:0,currentStep:0,repeat:!0,lastChordChangeTime:0,globalClockStartTime:0},currentlyActivePattern:["1","2","3","4"],setGlobalPatternState:r=>e(s=>({globalPatternState:{...s.globalPatternState,...r}})),setCurrentlyActivePattern:r=>e({currentlyActivePattern:r}),togglePlayback:()=>{const{globalPatternState:r}=n(),s=!r.isPlaying;e(i=>({globalPatternState:{...i.globalPatternState,isPlaying:s}}))},updatePattern:r=>{e(s=>({globalPatternState:{...s.globalPatternState,...r}}))}})),or=ai(e=>({isDeleteMode:!1,isLiveMode:!1,showPatternSystem:!1,setIsDeleteMode:n=>e({isDeleteMode:n}),setIsLiveMode:n=>e({isLiveMode:n}),setShowPatternSystem:n=>e({showPatternSystem:n}),toggleDeleteMode:()=>e(n=>({isDeleteMode:!n.isDeleteMode})),toggleLiveMode:()=>e(n=>({isLiveMode:!n.isLiveMode})),togglePatternSystem:()=>e(n=>({showPatternSystem:!n.showPatternSystem}))}));function G1(){const[e,n]=N.useState(),[r,s]=N.useState(null);return N.useEffect(()=>{(async()=>{try{const a=await zr.getModes();n(a.map(c=>c.name))}catch(a){s(a),console.error("Error fetching modes:",a)}})()},[]),{modes:e,error:r}}const Cp=["C","D","E","F","G","A","B"],Ws=(e,n,r)=>{const s=r.split(", ");let i=Cp.indexOf(Vr(s[0])[0]),a=e;return s.map((c,d)=>{const h=Vr(c),m=Cp.indexOf(h[0]);return m<i&&d>0&&a++,a>n&&(a=n),i=m,{note:h,octave:a}})},Ja="v9",Oe={BPM_MIN:60,BPM_MAX:200,SWING_MAX:50,EQ_OFFSET:24,OCTAVE_OFFSET:3,PATTERN_MAX_LENGTH:16,EFFECT_SCALE:35},hn={INSTRUMENT_INDEX:0,CUT_OFF:!0,EQ:{bass:0,mid:0,treble:0},OCTAVE_OFFSET:0,NOTE_DURATION:.8,VOLUME:.8,BPM:120,SUBDIVISION:.25,SWING:0},Ov=[{key:"reverbLevel",default:0},{key:"chorusLevel",default:0},{key:"delayLevel",default:0},{key:"distortionLevel",default:0},{key:"bitcrusherLevel",default:0},{key:"phaserLevel",default:0},{key:"flangerLevel",default:0},{key:"ringModLevel",default:0},{key:"autoFilterLevel",default:0},{key:"tremoloLevel",default:0},{key:"stereoWidthLevel",default:0},{key:"compressorLevel",default:0}],U1={.125:"0",.25:"1",.5:"2",1:"3",2:"4"},V1={0:.125,1:.25,2:.5,3:1,4:2},Sp={C:"0",D:"1",E:"2",F:"3",G:"4",A:"5",B:"6"},z1={0:"C",1:"D",2:"E",3:"F",4:"G",5:"A",6:"B"},W1={C:0,"C#":1,Db:1,D:2,"D#":3,Eb:3,E:4,Fb:4,"E#":5,F:5,"F#":6,Gb:6,G:7,"G#":8,Ab:8,A:9,"A#":10,Bb:10,B:11,Cb:11,"B#":0,"C##":2,Cbb:10,"D##":4,Dbb:0,"E##":6,Ebb:2,"F##":7,Fbb:3,"G##":9,Gbb:5,"A##":11,Abb:7,"B##":1,Bbb:9},H1=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],Vt=e=>Math.max(0,Math.round(e)).toString(36),Fe=e=>parseInt(e,36)||0,_v=e=>{const n=Object.keys(e).sort((a,c)=>a===""?-1:c===""?1:a.length!==c.length?a.length-c.length:a.localeCompare(c)),r={},s={},i=a=>{const c="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";if(a<62)return c[a];{const d=Math.floor((a-62)/36),h=(a-62)%36;return(d+1).toString()+c[h]}};return n.forEach((a,c)=>{const d=i(c);r[a]=d,s[d]=a}),{typeToCode:r,codeToType:s}},Ep=e=>{let n=0;const r=e[n++];if(!Sp[r])return console.warn("Unknown root note:",r,"in chord:",e),null;let s=Sp[r],i=0,a="";for(;n<e.length&&(e[n]==="#"||e[n]==="b");){if(!a)a=e[n];else if(e[n]!==a)return console.warn("Mixed accidentals in chord name:",e),null;i++,n++}return i===2&&a==="#"?s+="S":i===2&&a==="b"?s+="F":i===1&&a==="#"?s+="s":i===1&&a==="b"&&(s+="f"),{encodedNote:s,remaining:e.substring(n)}},Dp=e=>{let n=0;const r=e[n++],s=z1[r];if(!s)return console.warn("Unknown pitch code:",r),"";let i=s;if(n<e.length){const a=e[n];a==="S"?(i+="##",n++):a==="F"?(i+="bb",n++):a==="s"?(i+="#",n++):a==="f"&&(i+="b",n++)}return n!==e.length&&console.warn("Extra characters in encoded note:",e),i},q1=e=>{console.log("encoding notes:",e);const n=e.split(/[,\s]+/).map(s=>s.trim()).filter(Boolean),r=[];for(const s of n){const i=W1[s];if(i!==void 0)r.push(i.toString(36));else return console.warn("Unknown note name:",s),""}return r.join("-")},K1=e=>{if(!e)return"";const n=e.split("-"),r=[];for(const s of n){if(!s)continue;const i=parseInt(s,36);i>=0&&i<12?r.push(H1[i]):console.warn("Invalid note index:",s,"parsed as:",i)}return console.log("noteNames:",r),r.join(", ")},Y1=(e,n)=>{let r,s=e;const i=e.lastIndexOf("/");if(i>0&&i<e.length-1){const p=e.substring(i+1);/^[A-G](?:##|#|bb|b)?$/.test(p)&&(s=e.substring(0,i),r=p)}const a=Ep(s);if(!a)return"";const{encodedNote:c,remaining:d}=a,h=n[d];if(h===void 0)return console.warn("Unknown chord type:",d,"from chord:",s),"";let m=`${c}.${h}`;if(r){const p=Ep(r);if(!p||p.remaining.length>0)return console.warn("Invalid bass note:",r),"";m+=`/${p.encodedNote}`}return m},Q1=(e,n)=>{let r,s=e;const i=e.lastIndexOf("/");if(i>0&&i<e.length-1){const g=e.substring(i+1);g.length>=1&&g.length<=2&&(g.length===1||["S","F","s","f"].includes(g[1]))&&(s=e.substring(0,i),r=g)}const a=s.indexOf(".");if(a===-1)return console.warn("Invalid encoded chord (no delimiter):",s),"";const c=s.substring(0,a),d=s.substring(a+1),h=Dp(c),m=n[d];if(!h)return console.warn("Failed to decode main note:",c),"";if(m===void 0)return console.warn("Unknown chord code:",d,"from encoded:",s),h;let p=h+m;if(r){const g=Dp(r);g?p+=`/${g}`:console.warn("Failed to decode bass note:",r)}return p},X1=(e,n,r,s,i)=>{const a=Math.max(Oe.BPM_MIN,Math.min(Oe.BPM_MAX,e)),c=Vt(a-Oe.BPM_MIN),d=U1[n]||"1",h=Math.max(0,Math.min(Oe.SWING_MAX,r)),m=Vt(h),p=(s?2:0)+(i?1:0),g=Vt(p);return`${c}-${d}-${m}-${g}`},J1=e=>{const n=e.split(/[-|]/),r=n[0]?Fe(n[0])+Oe.BPM_MIN:hn.BPM,s=n[1]&&V1[n[1]]||hn.SUBDIVISION,i=n[2]?Fe(n[2]):hn.SWING,a=n[3]?Fe(n[3]):0;return{bpm:r,subdivision:s,swing:i,showPattern:(a&2)!==0,liveMode:(a&1)!==0}},Z1=(e,n)=>{const r=[],s=n.indexOf(e.instrumentName);r.push(Vt(Math.max(0,s)));const i=e.cutOffPreviousNotes!==hn.CUT_OFF?e.cutOffPreviousNotes?"1":"0":"";r.push(i);const c=e.eq.bass!==0||e.eq.mid!==0||e.eq.treble!==0?Vt(e.eq.bass+Oe.EQ_OFFSET)+Vt(e.eq.mid+Oe.EQ_OFFSET)+Vt(e.eq.treble+Oe.EQ_OFFSET):"";r.push(c);const d=e.octaveOffset!==hn.OCTAVE_OFFSET?Vt(e.octaveOffset+Oe.OCTAVE_OFFSET):"";r.push(d);const h=Math.abs(e.noteDuration-hn.NOTE_DURATION)>.01?Vt(Math.max(0,Math.round(e.noteDuration*10)-1)):"";r.push(h);const m=Math.abs(e.volume-hn.VOLUME)>.01?Vt(Math.round(e.volume*Oe.EFFECT_SCALE)):"";r.push(m);let p=0;const g=[];for(Ov.forEach((y,b)=>{const w=e[y.key];w>.01&&(p|=1<<b,g.push(Vt(Math.round(w*Oe.EFFECT_SCALE))))}),p>0?(r.push(Vt(p)),r.push(g.join(""))):(r.push(""),r.push(""));r.length>0&&r[r.length-1]==="";)r.pop();return r.join("-")},eN=(e,n,r)=>{const s={instrumentName:n[hn.INSTRUMENT_INDEX]||"electric_piano_1",cutOffPreviousNotes:hn.CUT_OFF,eq:{...hn.EQ},octaveOffset:hn.OCTAVE_OFFSET,reverbLevel:0,noteDuration:hn.NOTE_DURATION,volume:hn.VOLUME,chorusLevel:0,delayLevel:0,distortionLevel:0,bitcrusherLevel:0,phaserLevel:0,flangerLevel:0,ringModLevel:0,autoFilterLevel:0,tremoloLevel:0,stereoWidthLevel:0,compressorLevel:0},i=e.split(/[-|]/);if(i[0]&&(s.instrumentName=n[Fe(i[0])]||n[0]||"electric_piano_1"),r===Ja){if(i[1]&&(s.cutOffPreviousNotes=i[1]==="1"),i[2]&&i[2].length>=3&&(s.eq.bass=Fe(i[2][0])-Oe.EQ_OFFSET,s.eq.mid=Fe(i[2][1])-Oe.EQ_OFFSET,s.eq.treble=Fe(i[2][2])-Oe.EQ_OFFSET),i[3]&&(s.octaveOffset=Fe(i[3])-Oe.OCTAVE_OFFSET),i[4]&&(s.noteDuration=(Fe(i[4])+1)/10),i[5]&&(s.volume=Fe(i[5])/Oe.EFFECT_SCALE),i[6]){const a=Fe(i[6]),c=i[7]||"";let d=0;Ov.forEach((h,m)=>{if(a&1<<m&&d<c.length){const p=Fe(c[d])/Oe.EFFECT_SCALE;s[h.key]=p,d++}})}}else s.cutOffPreviousNotes=(i[1]||"1")==="1",s.eq.bass=Fe(i[2]||"o")-Oe.EQ_OFFSET,s.eq.mid=Fe(i[3]||"o")-Oe.EQ_OFFSET,s.eq.treble=Fe(i[4]||"o")-Oe.EQ_OFFSET,s.octaveOffset=Fe(i[5]||"3")-Oe.OCTAVE_OFFSET,s.reverbLevel=Fe(i[6]||"0")/Oe.EFFECT_SCALE,s.noteDuration=(Fe(i[7]||"7")+1)/10,s.volume=Fe(i[8]||"p")/Oe.EFFECT_SCALE,s.chorusLevel=Fe(i[9]||"0")/Oe.EFFECT_SCALE,s.delayLevel=Fe(i[10]||"0")/Oe.EFFECT_SCALE,r==="v8"&&(s.distortionLevel=Fe(i[11]||"0")/Oe.EFFECT_SCALE,s.bitcrusherLevel=Fe(i[12]||"0")/Oe.EFFECT_SCALE,s.phaserLevel=Fe(i[13]||"0")/Oe.EFFECT_SCALE,s.flangerLevel=Fe(i[14]||"0")/Oe.EFFECT_SCALE,s.ringModLevel=Fe(i[15]||"0")/Oe.EFFECT_SCALE,s.autoFilterLevel=Fe(i[16]||"0")/Oe.EFFECT_SCALE,s.tremoloLevel=Fe(i[17]||"0")/Oe.EFFECT_SCALE,s.stereoWidthLevel=Fe(i[18]||"0")/Oe.EFFECT_SCALE,s.compressorLevel=Fe(i[19]||"0")/Oe.EFFECT_SCALE);return s},jp=e=>e.map(n=>n.replace(/[xX]/gi,"0")).join(".");function tN(e){let n=e;const r=e.lastIndexOf("/");if(r>0){const i=e.substring(r+1);/^[A-G](?:##|#|bb|b)?$/.test(i)&&(n=e.substring(0,r))}const s=n.match(/^([A-G](?:##|bb|#|b)?)(.*)$/);if(!s)throw new Error(`Cannot parse chord name: ${e}`);return{rootNote:s[1],chordType:s[2]}}const nN=(e,n,r,s,i,a,c,d,h,m,p,g,y,b,w)=>{if(!b?.length||!p.length||!g.length)return"";try{const{typeToCode:E}=_v(w),C=Ja,j=p.indexOf(e),P=Vt(Math.max(0,j)),A=g.indexOf(n),D=Vt(Math.max(0,A)),k=s.slice(0,Oe.PATTERN_MAX_LENGTH).map(q=>q.replace(/[xX]/gi,"0")).join("."),R=X1(i,a,c,d,h),O=Z1(m,y),M=oN(r,s,p,g,E);return`${C}_${P}_${D}_${k}_${R}_${O}_${M}`}catch(E){return console.error("Failed to encode state:",E),""}},rN=async(e,n,r,s,i,a)=>{if(console.log("Decoding state:",e),!e||!i?.length||!n.length||!r.length)return console.log("Cannot decode - missing data"),null;try{const c=e.split("_"),d=c[0];if(!["v7","v8","v9"].includes(d)||c.length<6)return console.log("Invalid state format - only v7/v8/v9 supported"),null;const{codeToType:h}=_v(a),m=Fe(c[1]||"0"),p=n[m]||n[0],g=Fe(c[2]||"0"),y=r[g]||r[0],w=(c[3]||"1.2.3.4").split(".").map(P=>P==="0"?"x":P),E=J1(c[4]||""),C=eN(c[5]||"",s,d),j=await sN(c[6]||"",w,p,y,n,r,d,h);return{key:p,mode:y,pattern:w,...E,addedChords:j,pianoSettings:C}}catch(c){return console.error("Failed to decode state:",c),null}};function oN(e,n,r,s,i){const a=jp(n);return e.map(d=>{const h=Y1(d.name,i);if(!h)return console.warn("Failed to encode chord name:",d.name),"";const m=q1(d.notes);if(!m)return console.warn("Failed to encode notes:",d.notes),"";let p=`${h}n${m}`;if(d.originalKey&&d.originalMode){const y=r.indexOf(d.originalKey),b=s.indexOf(d.originalMode);y>=0&&b>=0&&(p+=`k${Vt(y)}${Vt(b)}`)}if(jp(d.pattern)!==a){const y=d.pattern.slice(0,Oe.PATTERN_MAX_LENGTH).map(b=>b.replace(/[xX]/gi,"0")).join(".");return`${p}p${y}`}return p}).filter(Boolean).join(",")}async function sN(e,n,r,s,i,a,c,d){if(!e)return[];const h=[],m=e.split(/[,|]/).filter(Boolean);for(const p of m){const g=await iN(p,n,r,s,i,a,c,d);g&&h.push(g)}return h}async function iN(e,n,r,s,i,a,c,d){let h,m;if(e.includes("p")){const M=e.lastIndexOf("p"),q=e.indexOf("n");M>q&&q>=0?(h=e.substring(0,M),m=e.substring(M+1)):h=e}else e.includes(":")?[h,m]=e.split(":"):h=e;let p=h,g,y;const b=h.indexOf("k"),w=h.indexOf("@"),E=b>=0?b:w;if(E>=0){p=h.substring(0,E);const M=h.substring(E+1);if(M.length>=2){const q=Fe(M[0]),te=Fe(M[1]);g=i[q],y=a[te]}}let C,j;const P=p.indexOf("n"),A=p.indexOf("~");if(P>=0&&(A===-1||P<A))C=p.substring(0,P),j=p.substring(P+1);else if(A>=0)[C,j]=p.split("~");else return console.warn("Invalid chord format - no separator:",e),null;let D;c===Ja&&C.includes(".")?D=Q1(C,d):D=decodeURIComponent(C);const k=m?m.split(".").map(M=>M==="0"?"x":M):[...n],R=await lN(D,r,s,j,c);return R?{name:aN(D,R),notes:R,pattern:k,originalKey:g||r,originalMode:y||s,originalNotes:R}:(console.warn("Failed to decode notes for chord:",D),null)}function aN(e,n){const r=e.lastIndexOf("/");let s,i=null;if(r>=0){s=e.substring(0,r);const b=e.substring(r+1);/^[A-G](?:##|#|bb|b)?$/.test(b)?i=b:s=e}else s=e;const a=n.split(",").map(b=>b.trim()),c=i?1:0;if(c>=a.length)return e;const h=a[c].replace(/\d+/g,""),m=s.match(/^([A-G](?:##|#|bb|b)?)/);if(!m)return e;const p=m[1];if(!Ap(p,h))return console.warn(`Root note mismatch: ${p}  ${h} are not enharmonic. Keeping original.`),e;const g=s.substring(p.length);let y=h+g;if(i){const w=a[0].replace(/\d+/g,"");Ap(i,w)?y+="/"+w:(console.warn(`Slash note mismatch: ${i}  ${w} are not enharmonic. Keeping original.`),y+="/"+i)}return y}function Ap(e,n){const r=s=>{const i={C:0,D:2,E:4,F:5,G:7,A:9,B:11},a=s.charAt(0).toUpperCase();let c=i[a];if(c===void 0)return-1;const d=(s.match(/#/g)||[]).length,h=(s.match(/b/g)||[]).length;return c+=d,c-=h,(c%12+12)%12};return r(e)===r(n)}function Bo(e){const n={C:0,D:2,E:4,F:5,G:7,A:9,B:11},r=e.replace(/\d+/g,"");if(r.length===0)return-1;const s=r.charAt(0).toUpperCase();let i=n[s];if(i===void 0)return-1;const a=r.substring(1),c=(a.match(/#/g)||[]).length,d=(a.match(/b/g)||[]).length;return i+=c,i-=d,(i%12+12)%12}function Lv(e,n){const r=e.split(",").map(c=>c.trim()),s=n.split(",").map(c=>c.trim()),i=new Map;for(const c of s){const d=Bo(c);d!==-1&&i.set(d,c)}return r.map(c=>{const d=Bo(c);return d!==-1&&i.has(d)?i.get(d):c}).join(", ")}async function lN(e,n,r,s,i){let a;i===Ja&&s.includes("-")&&!s.includes("%")?a=K1(s):a=decodeURIComponent(s);try{const c=e.match(/\/([A-G](##|#|bb|b)?)/),d=c?c[1]:null,{rootNote:h,chordType:m}=tN(e);if(h&&m!==void 0){const p=await fn.generateChord(h,m,n,r);if(p){let g=Lv(a,p.chordNoteNames);if(d){const y=await fn.generateChord(d,"",n,r);if(y){const b=y.chordNoteNames.split(",")[0].trim(),w=g.split(",").map(j=>j.trim()),E=Bo(d);g=w.map(j=>Bo(j)===E?b:j).join(", ")}}return g}}}catch(c){console.warn("Failed to respell chord notes for:",e,c)}return a}const cN=(e,n="s")=>{if(e){const r=new URL(window.location.href);r.searchParams.set(n,e),window.history.replaceState({},"",r.toString())}},uN=(e="s")=>new URL(window.location.href).searchParams.get(e),dN=(e,n,r,s,i,a,c,d,h,m,p,g,y,b,w,E="s")=>{const C=nN(e,n,r,s,i,a,c,d,h,m,p,g,y,b,w);cN(C,E)},fN=async(e,n,r,s,i,a="s")=>{const c=uN(a);return c?await rN(c,e,n,r,s,i):null},id=4,ad=7,Hs=["C","C#","Db","D","D#","Eb","E","F","F#","Gb","G","G#","Ab","A","A#","Bb","B"],hN=(e,n)=>{if(!e||e.length===0)return!0;const r=e[n%e.length];return r!=="x"&&r!=="X"},mN=(e,n,r,s)=>e?s:n!==null&&r[n]?r[n].pattern:s;function pN(e,n){const r=e.lastIndexOf("/");let s,i=null;if(r>=0){s=e.substring(0,r);const b=e.substring(r+1);/^[A-G](?:##|#|bb|b)?$/.test(b)?i=b:s=e}else s=e;const a=n.split(",").map(b=>b.trim()),c=i?1:0;if(c>=a.length)return e;const h=a[c].replace(/\d+/g,""),m=s.match(/^([A-G](?:##|#|bb|b)?)/);if(!m)return e;const p=m[1],g=s.substring(p.length);let y=h+g;if(i){const w=a[0].replace(/\d+/g,"");y+="/"+w}return y}function gN(e){const n=e.lastIndexOf("/");let r=e,s=null;if(n!==-1){const a=e.substring(n+1);/^[A-G](?:##|#|bb|b)?$/.test(a)&&(r=e.substring(0,n),s=a)}const i=r.match(/^([A-G](?:##|bb|#|b)?)(.*)$/);if(!i)throw new Error(`Cannot parse chord name: ${e}`);return{rootNote:i[1],chordType:i[2],slashNote:s}}const vN=()=>{const e=Qe(Y=>Y.chords),n=Qe(Y=>Y.key),r=Qe(Y=>Y.mode),s=Qe(Y=>Y.modes),i=Qe(Y=>Y.scaleNotes),a=Qe(Y=>Y.setKeyAndMode),c=Qe(Y=>Y.setModes),d=Qe(Y=>Y.initialize);Re(Y=>Y.activeNotes);const h=Re(Y=>Y.activeChordIndex),m=Re(Y=>Y.addedChords),p=Re(Y=>Y.temporaryChord),g=Re(Y=>Y.isPlayingScale),y=Re(Y=>Y.setActiveNotes),b=Re(Y=>Y.setActiveChordIndex),w=Re(Y=>Y.setHighlightedChordIndex),E=Re(Y=>Y.setTemporaryChord),C=Re(Y=>Y.setIsPlayingScale),j=Re(Y=>Y.addChord),P=Re(Y=>Y.removeChord),A=Re(Y=>Y.setAddedChords),D=Re(Y=>Y.clearAllChords),k=Re(Y=>Y.playNotes),R=Re(Y=>Y.clearScalePlaybackTimeouts),O=Re(Y=>Y.addScalePlaybackTimeout),M=lt(Y=>Y.globalPatternState.subdivision),q=lt(Y=>Y.globalPatternState.currentStep),te=lt(Y=>Y.globalPatternState.swing),oe=lt(Y=>Y.globalPatternState.isPlaying),Z=lt(Y=>Y.globalPatternState.bpm),Q=lt(Y=>Y.globalPatternState.currentPattern),se=lt(Y=>Y.currentlyActivePattern),K=lt(Y=>Y.setGlobalPatternState),J=lt(Y=>Y.setCurrentlyActivePattern);lt(Y=>Y.updatePattern);const re=or(Y=>Y.isDeleteMode),W=or(Y=>Y.isLiveMode),$=or(Y=>Y.showPatternSystem),_=or(Y=>Y.setIsLiveMode),I=or(Y=>Y.setShowPatternSystem),L=or(Y=>Y.togglePatternSystem),G=or(Y=>Y.toggleLiveMode),ee=ar(Y=>Y.pianoSettings),ue=ar(Y=>Y.availableInstruments),fe=ar(Y=>Y.updatePianoSettings),{modes:Ee}=G1(),pe=N.useRef(null),Ne=N.useRef(0),be=N.useRef(0),nt=N.useRef(!1),Ie=N.useRef(null),Xe=N.useRef(!0),Ce=N.useRef(!1),ze=N.useRef(!0);N.useEffect(()=>{if(Xe.current||!ze.current)return;const Y=Re.getState().addedChords;if(Y.length===0)return;(async()=>{const Ge=[];for(const Le of Y)try{const{rootNote:He,chordType:jn,slashNote:Zt}=gN(Le.name);console.log("Regenerating chord:",Le.name," root:",He,"type:",jn,"slash:",Zt);const en=await fn.generateChord(He,jn,n,r);if(en){console.log("Generated notes:",en.chordNoteNames);let qt=Lv(Le.notes,en.chordNoteNames),An=en.chordName;if(Zt){const St=await fn.generateChord(Zt,"",n,r);if(St){const vn=St.chordNoteNames.split(",")[0].trim();An=`${en.chordName}/${vn}`;const kn=qt.split(",").map(ne=>ne.trim()),tn=Bo(Zt);qt=kn.map(ne=>Bo(ne)===tn?vn:ne).join(", ")}}const Lt=pN(Le.name,qt);console.log("Final chord name:",Le.name,"",Lt),Ge.push({...Le,name:Lt,notes:qt})}else console.warn(`Could not regenerate chord: ${Le.name} (generation returned null)`),Ge.push(Le)}catch(He){console.error("Error regenerating chord:",Le.name,He),Ge.push(Le)}ze.current=!1,A(Ge),setTimeout(()=>{ze.current=!0},100)})()},[n,r,A]),N.useEffect(()=>{if(Ee&&!Ce.current){Ce.current=!0,c(Ee);const Te=new URLSearchParams(window.location.search).has("s");!e&&!Te&&d()}},[Ee,e]);const Je=N.useMemo(()=>6e4/Z*M,[Z,M]),Ct=N.useCallback(Y=>{if(te===0)return Je;const Te=Y%2===1,Ge=1+te/100;return Te?Je*Ge:Je/Ge},[Je,te]),Wt=N.useCallback(()=>mN(p,h,m,se),[p,h,m,se]),Tt=N.useMemo(()=>p||(h!==null&&m[h]?m[h]:null),[p,h,m]),st=N.useMemo(()=>Wt(),[Wt]),et=N.useCallback(()=>{e?.length&&s?.length&&!Xe.current&&dN(n,r,m,Q,Z,M,te,$,W,ee,Hs,s,ue,e,fn.chordTypes)},[n,r,e,m,Q,Z,M,te,$,W,ee,ue,s]),We=N.useCallback(async()=>{if(e?.length){const Y=await fN(Hs,s||[],ue,e,fn.chordTypes);Y&&(a(Y.key,Y.mode),D(),Y.addedChords.forEach(Te=>{j(Te.name,Te.notes,Te.pattern||["1","2","3","4"],Te.originalKey||Y.key,Te.originalMode||Y.mode)}),K({currentPattern:Y.pattern,bpm:Y.bpm,subdivision:Y.subdivision,swing:Y.swing}),I(Y.showPattern),_(Y.liveMode),fe(Y.pianoSettings))}},[e,s,ue]),ut=N.useCallback((Y,Te,Ge)=>{if(re&&Te!==void 0){P(Te);return}const Le=Ws(id,ad,Y);Te!==void 0?(E(null),b(Te),oe||k(Le),w(Te),setTimeout(()=>w(null),150)):(Ge&&E({name:Ge,notes:Y}),oe||k(Le))},[re,oe]),yt=N.useCallback((Y,Te,Ge,Le)=>{j(Y,Te,se,Ge,Le)},[se]),gn=N.useCallback(()=>{const Y=!oe;K({isPlaying:Y}),Y&&(Ne.current=0,be.current=performance.now())},[oe]);N.useCallback(()=>{if(g){R(),y([]),C(!1);return}if(!i?.length)return;C(!0);const Y=oe;Y&&K({isPlaying:!1}),y([]);const Ge=6e4/Z*.8;let Le=100,He=4,jn=0;const Zt=[...i];i[0]?.noteName&&Zt.push({noteName:i[0].noteName}),Zt.forEach(qt=>{if(!qt.noteName)return;const An=setTimeout(()=>{const Lt=Vr(qt.noteName);if(!Lt)return;let St=mn.fromNote(Lt+He);St<=jn&&(He++,St=mn.fromNote(Lt+He)),jn=St;const vn=mn.getAttributes(St),kn=vn.note.slice(0,-1),tn=parseInt(vn.note.slice(-1),10);y([{midiNote:St,note:kn,octave:tn}])},Le);O(An),Le+=Ge});const en=setTimeout(()=>{y([]),C(!1),R(),Y&&K({isPlaying:!0})},Le+Ge);O(en)},[i,g,Z,oe]);const Ht=N.useCallback(Y=>{if(Y.target instanceof HTMLInputElement)return;if(Y.key.toLowerCase()==="p"){L();return}if(Y.key.toLowerCase()==="l"){G();return}if(Y.key===" "){Y.preventDefault(),gn();return}const Te=Y.key==="0"?9:parseInt(Y.key,10)-1;if(!isNaN(Te)&&Te>=0&&Te<m.length){const Ge=m[Te];Ge&&(E(null),ut(Ge.notes,Te))}},[m,ut,gn,L,G,E]);return N.useEffect(()=>{h!==null&&m[h]?J([...m[h].pattern]):J([...Q])},[h,m,Q,J]),N.useEffect(()=>{if(oe){if(!pe.current){be.current=performance.now(),Ne.current=0,K({currentStep:0});const Y=()=>{const Ge=performance.now()-be.current;let Le=0,He=0;for(;Le<Ge;)Le+=Ct(He),Le<=Ge&&He++;He!==Ne.current&&(Ne.current=He,K({currentStep:He})),pe.current=requestAnimationFrame(Y)};pe.current=requestAnimationFrame(Y)}}else pe.current&&(cancelAnimationFrame(pe.current),pe.current=null);return()=>{pe.current&&(cancelAnimationFrame(pe.current),pe.current=null)}},[oe,Ct]),N.useEffect(()=>{if(!oe||!Tt)return;const Y=q%st.length;if(hN(st,Y)){const Te=Ws(id,ad,Tt.notes);y(Te)}else y([])},[oe,q,Tt,st]),N.useEffect(()=>{e?.length&&!nt.current&&(nt.current=!0,Xe.current=!0,We().then(()=>{setTimeout(()=>{Xe.current=!1},100)}))},[e,We]),N.useEffect(()=>(e?.length&&s?.length&&!Xe.current&&(Ie.current&&clearTimeout(Ie.current),Ie.current=setTimeout(()=>{et()},100)),()=>{Ie.current&&clearTimeout(Ie.current)}),[n,r,m,Q,Z,M,te,$,W,ee,e?.length,s?.length,et]),N.useEffect(()=>(document.addEventListener("keydown",Ht),()=>document.removeEventListener("keydown",Ht)),[Ht]),{isLiveMode:W,handleChordClick:ut,addChordClick:yt}},yN=()=>{const e=or(m=>m.isLiveMode),n=Re(m=>m.removeChord),r=Re(m=>m.setTemporaryChord),s=Re(m=>m.setActiveChordIndex),i=Re(m=>m.playNotes),a=Re(m=>m.setHighlightedChordIndex),c=Re(m=>m.addChord),d=N.useCallback((m,p,g)=>{const y=or.getState().isDeleteMode,b=lt.getState().globalPatternState.isPlaying;if(y&&p!==void 0){n(p);return}const w=Ws(id,ad,m);p!==void 0?(r(null),s(p),b||i(w),a(p),setTimeout(()=>a(null),150)):(g&&r({name:g,notes:m}),b||i(w))},[n,r,s,i,a]),h=N.useCallback((m,p,g,y)=>{const b=lt.getState().currentlyActivePattern;c(m,p,b,g,y)},[c]);return{isLiveMode:e,handleChordClick:d,addChordClick:h}},xN=()=>(vN(),null);function bN({title:e,titleId:n,...r},s){return N.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":n},r),e?N.createElement("title",{id:n},e):null,N.createElement("path",{d:"M10.75 2.75a.75.75 0 0 0-1.5 0v8.614L6.295 8.235a.75.75 0 1 0-1.09 1.03l4.25 4.5a.75.75 0 0 0 1.09 0l4.25-4.5a.75.75 0 0 0-1.09-1.03l-2.955 3.129V2.75Z"}),N.createElement("path",{d:"M3.5 12.75a.75.75 0 0 0-1.5 0v2.5A2.75 2.75 0 0 0 4.75 18h10.5A2.75 2.75 0 0 0 18 15.25v-2.5a.75.75 0 0 0-1.5 0v2.5c0 .69-.56 1.25-1.25 1.25H4.75c-.69 0-1.25-.56-1.25-1.25v-2.5Z"}))}const NN=N.forwardRef(bN);function wN({title:e,titleId:n,...r},s){return N.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":n},r),e?N.createElement("title",{id:n},e):null,N.createElement("path",{d:"M3.28 2.22a.75.75 0 0 0-1.06 1.06L5.44 6.5H2.75a.75.75 0 0 0 0 1.5h4.5A.75.75 0 0 0 8 7.25v-4.5a.75.75 0 0 0-1.5 0v2.69L3.28 2.22ZM13.5 2.75a.75.75 0 0 0-1.5 0v4.5c0 .414.336.75.75.75h4.5a.75.75 0 0 0 0-1.5h-2.69l3.22-3.22a.75.75 0 0 0-1.06-1.06L13.5 5.44V2.75ZM3.28 17.78l3.22-3.22v2.69a.75.75 0 0 0 1.5 0v-4.5a.75.75 0 0 0-.75-.75h-4.5a.75.75 0 0 0 0 1.5h2.69l-3.22 3.22a.75.75 0 1 0 1.06 1.06ZM13.5 14.56l3.22 3.22a.75.75 0 1 0 1.06-1.06l-3.22-3.22h2.69a.75.75 0 0 0 0-1.5h-4.5a.75.75 0 0 0-.75.75v4.5a.75.75 0 0 0 1.5 0v-2.69Z"}))}const CN=N.forwardRef(wN);function SN({title:e,titleId:n,...r},s){return N.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":n},r),e?N.createElement("title",{id:n},e):null,N.createElement("path",{d:"m13.28 7.78 3.22-3.22v2.69a.75.75 0 0 0 1.5 0v-4.5a.75.75 0 0 0-.75-.75h-4.5a.75.75 0 0 0 0 1.5h2.69l-3.22 3.22a.75.75 0 0 0 1.06 1.06ZM2 17.25v-4.5a.75.75 0 0 1 1.5 0v2.69l3.22-3.22a.75.75 0 0 1 1.06 1.06L4.56 16.5h2.69a.75.75 0 0 1 0 1.5h-4.5a.747.747 0 0 1-.75-.75ZM12.22 13.28l3.22 3.22h-2.69a.75.75 0 0 0 0 1.5h4.5a.747.747 0 0 0 .75-.75v-4.5a.75.75 0 0 0-1.5 0v2.69l-3.22-3.22a.75.75 0 1 0-1.06 1.06ZM3.5 4.56l3.22 3.22a.75.75 0 0 0 1.06-1.06L4.56 3.5h2.69a.75.75 0 0 0 0-1.5h-4.5a.75.75 0 0 0-.75.75v4.5a.75.75 0 0 0 1.5 0V4.56Z"}))}const EN=N.forwardRef(SN);function DN({title:e,titleId:n,...r},s){return N.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":n},r),e?N.createElement("title",{id:n},e):null,N.createElement("path",{fillRule:"evenodd",d:"M16.704 4.153a.75.75 0 0 1 .143 1.052l-8 10.5a.75.75 0 0 1-1.127.075l-4.5-4.5a.75.75 0 0 1 1.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 0 1 1.05-.143Z",clipRule:"evenodd"}))}const jN=N.forwardRef(DN);function AN({title:e,titleId:n,...r},s){return N.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":n},r),e?N.createElement("title",{id:n},e):null,N.createElement("path",{fillRule:"evenodd",d:"M5.22 8.22a.75.75 0 0 1 1.06 0L10 11.94l3.72-3.72a.75.75 0 1 1 1.06 1.06l-4.25 4.25a.75.75 0 0 1-1.06 0L5.22 9.28a.75.75 0 0 1 0-1.06Z",clipRule:"evenodd"}))}const ho=N.forwardRef(AN);function kN({title:e,titleId:n,...r},s){return N.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":n},r),e?N.createElement("title",{id:n},e):null,N.createElement("path",{fillRule:"evenodd",d:"M11.78 5.22a.75.75 0 0 1 0 1.06L8.06 10l3.72 3.72a.75.75 0 1 1-1.06 1.06l-4.25-4.25a.75.75 0 0 1 0-1.06l4.25-4.25a.75.75 0 0 1 1.06 0Z",clipRule:"evenodd"}))}const IN=N.forwardRef(kN);function PN({title:e,titleId:n,...r},s){return N.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":n},r),e?N.createElement("title",{id:n},e):null,N.createElement("path",{fillRule:"evenodd",d:"M8.22 5.22a.75.75 0 0 1 1.06 0l4.25 4.25a.75.75 0 0 1 0 1.06l-4.25 4.25a.75.75 0 0 1-1.06-1.06L11.94 10 8.22 6.28a.75.75 0 0 1 0-1.06Z",clipRule:"evenodd"}))}const Fv=N.forwardRef(PN);function TN({title:e,titleId:n,...r},s){return N.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":n},r),e?N.createElement("title",{id:n},e):null,N.createElement("path",{fillRule:"evenodd",d:"M9.47 6.47a.75.75 0 0 1 1.06 0l4.25 4.25a.75.75 0 1 1-1.06 1.06L10 8.06l-3.72 3.72a.75.75 0 0 1-1.06-1.06l4.25-4.25Z",clipRule:"evenodd"}))}const qs=N.forwardRef(TN);function RN({title:e,titleId:n,...r},s){return N.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":n},r),e?N.createElement("title",{id:n},e):null,N.createElement("path",{d:"M13.024 9.25c.47 0 .827-.433.637-.863a4 4 0 0 0-4.094-2.364c-.468.05-.665.576-.43.984l1.08 1.868a.75.75 0 0 0 .649.375h2.158ZM7.84 7.758c-.236-.408-.79-.5-1.068-.12A3.982 3.982 0 0 0 6 10c0 .884.287 1.7.772 2.363.278.38.832.287 1.068-.12l1.078-1.868a.75.75 0 0 0 0-.75L7.839 7.758ZM9.138 12.993c-.235.408-.039.934.43.984a4 4 0 0 0 4.094-2.364c.19-.43-.168-.863-.638-.863h-2.158a.75.75 0 0 0-.65.375l-1.078 1.868Z"}),N.createElement("path",{fillRule:"evenodd",d:"m14.13 4.347.644-1.117a.75.75 0 0 0-1.299-.75l-.644 1.116a6.954 6.954 0 0 0-2.081-.556V1.75a.75.75 0 0 0-1.5 0v1.29a6.954 6.954 0 0 0-2.081.556L6.525 2.48a.75.75 0 1 0-1.3.75l.645 1.117A7.04 7.04 0 0 0 4.347 5.87L3.23 5.225a.75.75 0 1 0-.75 1.3l1.116.644A6.954 6.954 0 0 0 3.04 9.25H1.75a.75.75 0 0 0 0 1.5h1.29c.078.733.27 1.433.556 2.081l-1.116.645a.75.75 0 1 0 .75 1.298l1.117-.644a7.04 7.04 0 0 0 1.523 1.523l-.645 1.117a.75.75 0 1 0 1.3.75l.644-1.116a6.954 6.954 0 0 0 2.081.556v1.29a.75.75 0 0 0 1.5 0v-1.29a6.954 6.954 0 0 0 2.081-.556l.645 1.116a.75.75 0 0 0 1.299-.75l-.645-1.117a7.042 7.042 0 0 0 1.523-1.523l1.117.644a.75.75 0 0 0 .75-1.298l-1.116-.645a6.954 6.954 0 0 0 .556-2.081h1.29a.75.75 0 0 0 0-1.5h-1.29a6.954 6.954 0 0 0-.556-2.081l1.116-.644a.75.75 0 0 0-.75-1.3l-1.117.645a7.04 7.04 0 0 0-1.524-1.523ZM10 4.5a5.475 5.475 0 0 0-2.781.754A5.527 5.527 0 0 0 5.22 7.277 5.475 5.475 0 0 0 4.5 10a5.475 5.475 0 0 0 .752 2.777 5.527 5.527 0 0 0 2.028 2.004c.802.458 1.73.719 2.72.719a5.474 5.474 0 0 0 2.78-.753 5.527 5.527 0 0 0 2.001-2.027c.458-.802.719-1.73.719-2.72a5.475 5.475 0 0 0-.753-2.78 5.528 5.528 0 0 0-2.028-2.002A5.475 5.475 0 0 0 10 4.5Z",clipRule:"evenodd"}))}const ld=N.forwardRef(RN);function MN({title:e,titleId:n,...r},s){return N.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":n},r),e?N.createElement("title",{id:n},e):null,N.createElement("path",{d:"M10 3a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM10 8.5a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM11.5 15.5a1.5 1.5 0 1 0-3 0 1.5 1.5 0 0 0 3 0Z"}))}const ON=N.forwardRef(MN);function _N({title:e,titleId:n,...r},s){return N.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":n},r),e?N.createElement("title",{id:n},e):null,N.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 1 1-16 0 8 8 0 0 1 16 0Zm-7-4a1 1 0 1 1-2 0 1 1 0 0 1 2 0ZM9 9a.75.75 0 0 0 0 1.5h.253a.25.25 0 0 1 .244.304l-.459 2.066A1.75 1.75 0 0 0 10.747 15H11a.75.75 0 0 0 0-1.5h-.253a.25.25 0 0 1-.244-.304l.459-2.066A1.75 1.75 0 0 0 9.253 9H9Z",clipRule:"evenodd"}))}const LN=N.forwardRef(_N);function FN({title:e,titleId:n,...r},s){return N.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":n},r),e?N.createElement("title",{id:n},e):null,N.createElement("path",{fillRule:"evenodd",d:"M10 1a4.5 4.5 0 0 0-4.5 4.5V9H5a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2v-6a2 2 0 0 0-2-2h-.5V5.5A4.5 4.5 0 0 0 10 1Zm3 8V5.5a3 3 0 1 0-6 0V9h6Z",clipRule:"evenodd"}))}const kp=N.forwardRef(FN);function BN({title:e,titleId:n,...r},s){return N.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":n},r),e?N.createElement("title",{id:n},e):null,N.createElement("path",{fillRule:"evenodd",d:"M9 3.5a5.5 5.5 0 1 0 0 11 5.5 5.5 0 0 0 0-11ZM2 9a7 7 0 1 1 12.452 4.391l3.328 3.329a.75.75 0 1 1-1.06 1.06l-3.329-3.328A7 7 0 0 1 2 9Z",clipRule:"evenodd"}))}const $N=N.forwardRef(BN);function GN({title:e,titleId:n,...r},s){return N.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":n},r),e?N.createElement("title",{id:n},e):null,N.createElement("path",{fillRule:"evenodd",d:"M4 10a.75.75 0 0 1 .75-.75h10.5a.75.75 0 0 1 0 1.5H4.75A.75.75 0 0 1 4 10Z",clipRule:"evenodd"}))}const Ip=N.forwardRef(GN);function UN({title:e,titleId:n,...r},s){return N.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":n},r),e?N.createElement("title",{id:n},e):null,N.createElement("path",{fillRule:"evenodd",d:"M17.721 1.599a.75.75 0 0 1 .279.583v11.29a2.25 2.25 0 0 1-1.774 2.2l-2.041.44a2.216 2.216 0 0 1-.938-4.332l2.662-.577a.75.75 0 0 0 .591-.733V6.112l-8 1.73v7.684a2.25 2.25 0 0 1-1.774 2.2l-2.042.44a2.216 2.216 0 1 1-.935-4.331l2.659-.573A.75.75 0 0 0 7 12.529V4.236a.75.75 0 0 1 .591-.733l9.5-2.054a.75.75 0 0 1 .63.15Z",clipRule:"evenodd"}))}const Bv=N.forwardRef(UN);function VN({title:e,titleId:n,...r},s){return N.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":n},r),e?N.createElement("title",{id:n},e):null,N.createElement("path",{d:"M5.75 3a.75.75 0 0 0-.75.75v12.5c0 .414.336.75.75.75h1.5a.75.75 0 0 0 .75-.75V3.75A.75.75 0 0 0 7.25 3h-1.5ZM12.75 3a.75.75 0 0 0-.75.75v12.5c0 .414.336.75.75.75h1.5a.75.75 0 0 0 .75-.75V3.75a.75.75 0 0 0-.75-.75h-1.5Z"}))}const Ks=N.forwardRef(VN);function zN({title:e,titleId:n,...r},s){return N.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":n},r),e?N.createElement("title",{id:n},e):null,N.createElement("path",{fillRule:"evenodd",d:"M2 10a8 8 0 1 1 16 0 8 8 0 0 1-16 0Zm6.39-2.908a.75.75 0 0 1 .766.027l3.5 2.25a.75.75 0 0 1 0 1.262l-3.5 2.25A.75.75 0 0 1 8 12.25v-4.5a.75.75 0 0 1 .39-.658Z",clipRule:"evenodd"}))}const Ys=N.forwardRef(zN);function WN({title:e,titleId:n,...r},s){return N.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":n},r),e?N.createElement("title",{id:n},e):null,N.createElement("path",{d:"M6.3 2.84A1.5 1.5 0 0 0 4 4.11v11.78a1.5 1.5 0 0 0 2.3 1.27l9.344-5.891a1.5 1.5 0 0 0 0-2.538L6.3 2.841Z"}))}const Ra=N.forwardRef(WN);function HN({title:e,titleId:n,...r},s){return N.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":n},r),e?N.createElement("title",{id:n},e):null,N.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 1 0 0-16 8 8 0 0 0 0 16Zm.75-11.25a.75.75 0 0 0-1.5 0v2.5h-2.5a.75.75 0 0 0 0 1.5h2.5v2.5a.75.75 0 0 0 1.5 0v-2.5h2.5a.75.75 0 0 0 0-1.5h-2.5v-2.5Z",clipRule:"evenodd"}))}const $v=N.forwardRef(HN);function qN({title:e,titleId:n,...r},s){return N.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":n},r),e?N.createElement("title",{id:n},e):null,N.createElement("path",{d:"M10.75 4.75a.75.75 0 0 0-1.5 0v4.5h-4.5a.75.75 0 0 0 0 1.5h4.5v4.5a.75.75 0 0 0 1.5 0v-4.5h4.5a.75.75 0 0 0 0-1.5h-4.5v-4.5Z"}))}const Pp=N.forwardRef(qN);function KN({title:e,titleId:n,...r},s){return N.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":n},r),e?N.createElement("title",{id:n},e):null,N.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 1 1-16 0 8 8 0 0 1 16 0ZM8.94 6.94a.75.75 0 1 1-1.061-1.061 3 3 0 1 1 2.871 5.026v.345a.75.75 0 0 1-1.5 0v-.5c0-.72.57-1.172 1.081-1.287A1.5 1.5 0 1 0 8.94 6.94ZM10 15a1 1 0 1 0 0-2 1 1 0 0 0 0 2Z",clipRule:"evenodd"}))}const YN=N.forwardRef(KN);function QN({title:e,titleId:n,...r},s){return N.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":n},r),e?N.createElement("title",{id:n},e):null,N.createElement("path",{d:"M15.98 1.804a1 1 0 0 0-1.96 0l-.24 1.192a1 1 0 0 1-.784.785l-1.192.238a1 1 0 0 0 0 1.962l1.192.238a1 1 0 0 1 .785.785l.238 1.192a1 1 0 0 0 1.962 0l.238-1.192a1 1 0 0 1 .785-.785l1.192-.238a1 1 0 0 0 0-1.962l-1.192-.238a1 1 0 0 1-.785-.785l-.238-1.192ZM6.949 5.684a1 1 0 0 0-1.898 0l-.683 2.051a1 1 0 0 1-.633.633l-2.051.683a1 1 0 0 0 0 1.898l2.051.684a1 1 0 0 1 .633.632l.683 2.051a1 1 0 0 0 1.898 0l.683-2.051a1 1 0 0 1 .633-.633l2.051-.683a1 1 0 0 0 0-1.898l-2.051-.683a1 1 0 0 1-.633-.633L6.95 5.684ZM13.949 13.684a1 1 0 0 0-1.898 0l-.184.551a1 1 0 0 1-.632.633l-.551.183a1 1 0 0 0 0 1.898l.551.183a1 1 0 0 1 .633.633l.183.551a1 1 0 0 0 1.898 0l.184-.551a1 1 0 0 1 .632-.633l.551-.183a1 1 0 0 0 0-1.898l-.551-.184a1 1 0 0 1-.633-.632l-.183-.551Z"}))}const XN=N.forwardRef(QN);function JN({title:e,titleId:n,...r},s){return N.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":n},r),e?N.createElement("title",{id:n},e):null,N.createElement("path",{fillRule:"evenodd",d:"M3.5 2A1.5 1.5 0 0 0 2 3.5V15a3 3 0 1 0 6 0V3.5A1.5 1.5 0 0 0 6.5 2h-3Zm11.753 6.99L9.5 14.743V6.257l1.51-1.51a1.5 1.5 0 0 1 2.122 0l2.121 2.121a1.5 1.5 0 0 1 0 2.122ZM8.364 18H16.5a1.5 1.5 0 0 0 1.5-1.5v-3a1.5 1.5 0 0 0-1.5-1.5h-2.136l-6 6ZM5 16a1 1 0 1 0 0-2 1 1 0 0 0 0 2Z",clipRule:"evenodd"}))}const ZN=N.forwardRef(JN);function ew({title:e,titleId:n,...r},s){return N.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":n},r),e?N.createElement("title",{id:n},e):null,N.createElement("path",{fillRule:"evenodd",d:"M8.75 1A2.75 2.75 0 0 0 6 3.75v.443c-.795.077-1.584.176-2.365.298a.75.75 0 1 0 .23 1.482l.149-.022.841 10.518A2.75 2.75 0 0 0 7.596 19h4.807a2.75 2.75 0 0 0 2.742-2.53l.841-10.52.149.023a.75.75 0 0 0 .23-1.482A41.03 41.03 0 0 0 14 4.193V3.75A2.75 2.75 0 0 0 11.25 1h-2.5ZM10 4c.84 0 1.673.025 2.5.075V3.75c0-.69-.56-1.25-1.25-1.25h-2.5c-.69 0-1.25.56-1.25 1.25v.325C8.327 4.025 9.16 4 10 4ZM8.58 7.72a.75.75 0 0 0-1.5.06l.3 7.5a.75.75 0 1 0 1.5-.06l-.3-7.5Zm4.34.06a.75.75 0 1 0-1.5-.06l-.3 7.5a.75.75 0 1 0 1.5.06l.3-7.5Z",clipRule:"evenodd"}))}const Gv=N.forwardRef(ew);function tw({title:e,titleId:n,...r},s){return N.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":n},r),e?N.createElement("title",{id:n},e):null,N.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 1 0 0-16 8 8 0 0 0 0 16ZM8.28 7.22a.75.75 0 0 0-1.06 1.06L8.94 10l-1.72 1.72a.75.75 0 1 0 1.06 1.06L10 11.06l1.72 1.72a.75.75 0 1 0 1.06-1.06L11.06 10l1.72-1.72a.75.75 0 0 0-1.06-1.06L10 8.94 8.28 7.22Z",clipRule:"evenodd"}))}const cd=N.forwardRef(tw);function nw({title:e,titleId:n,...r},s){return N.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":n},r),e?N.createElement("title",{id:n},e):null,N.createElement("path",{d:"M6.28 5.22a.75.75 0 0 0-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 1 0 1.06 1.06L10 11.06l3.72 3.72a.75.75 0 1 0 1.06-1.06L11.06 10l3.72-3.72a.75.75 0 0 0-1.06-1.06L10 8.94 6.28 5.22Z"}))}const Uv=N.forwardRef(nw),zt=({children:e,onClick:n,className:r="",variant:s="primary",size:i="md",disabled:a=!1,active:c=!1,"aria-label":d,"aria-expanded":h,type:m="button",title:p})=>{const g=`
    inline-flex justify-center items-center gap-x-2 rounded-sm
    font-medium border
    focus:outline-none
    transition-all duration-200 ease-out
    disabled:opacity-50 disabled:cursor-not-allowed
    relative overflow-hidden
  `,y=`
    focus:ring-2 focus:ring-offset-2 focus:ring-offset-[#2a2f38]
  `,b={sm:"px-3 py-1.5 text-xs h-8",md:"px-4 py-2.5 text-sm h-10",lg:"px-6 py-3 text-base h-12",icon:"w-8 h-8 flex items-center justify-center p-0"},w={primary:`
      ${c?"bg-mcb-active border-mcb-secondary text-[var(--mcb-text-primary)]":"bg-mcb-secondary border-mcb-primary text-mcb-primary hover:bg-mcb-hover hover:border-mcb-secondary"}
      focus:ring-[var(--mcb-accent-primary)]/50
    `,secondary:`
      ${c?"bg-mcb-active border-mcb-secondary text-[var(--mcb-text-primary)]":"bg-mcb-hover border-mcb-secondary text-mcb-primary hover:bg-mcb-active hover:border-gray-400"}
      focus:ring-gray-400/50
    `,success:`
      ${c?"bg-[var(--mcb-success-primary)] border-green-500 text-[var(--mcb-success-text)]":"bg-[var(--mcb-success-secondary)] border-green-600 text-[var(--mcb-success-text)] hover:bg-[var(--mcb-success-primary)] hover:border-green-500"}
      focus:ring-green-500/50
    `,danger:`
      ${c?"bg-[var(--mcb-danger-primary)] border-[var(--mcb-danger-border)] text-red-100":"bg-[var(--mcb-danger-secondary)] border-red-600 text-red-100 hover:bg-[var(--mcb-danger-primary)] hover:border-[var(--mcb-danger-border)]"}
      focus:ring-red-500/50
    `,icon:`
      ${c?"bg-mcb-active border-mcb-secondary text-mcb-primary":"bg-mcb-secondary border-mcb-primary text-mcb-tertiary hover:bg-mcb-hover hover:border-mcb-secondary hover:text-mcb-primary"}
      focus:ring-gray-500/50
    `,"play-stop":`
      ${c?"bg-[var(--mcb-danger-secondary)] hover:bg-[var(--mcb-danger-primary)] border-red-600 text-white":"bg-[var(--mcb-success-primary)] hover:bg-green-500 border-green-500 text-white"}
      font-medium uppercase tracking-wide text-sm w-[7em] px-4 py-2
      focus:ring-green-500/50
    `};return u.jsx("button",{type:m,onClick:n,disabled:a,"aria-label":d,"aria-expanded":h,title:p,className:ct(g,y,b[i],w[s],r),children:u.jsx("span",{className:ct("flex items-center gap-x-2 tracking-wide","relative"),children:e})})},rw=["C","C","D","D","E","F","F","G","G","A","A","B"],ow=["C","D","D","E","E","F","G","G","A","A","B","B"],sw=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],iw=["C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B"],aw=({highlightedNotes:e,className:n})=>{const r=[0,2,4,5,7,9,11],s=[{pc:1,leftPercent:11.5},{pc:3,leftPercent:25},{pc:6,leftPercent:53.5},{pc:8,leftPercent:67.5},{pc:10,leftPercent:81.5}],i=Array.from(e),a=i.length>0?Math.max(...i):11,c=Math.max(1,Math.floor(a/12)+1),d=100/c,h=d*.085,m=c*60;return u.jsxs("div",{className:ct("relative h-8 flex-shrink-0",n),style:{width:`${m}px`},children:[u.jsx("div",{className:"absolute inset-0 flex",children:Array.from({length:c}).map((p,g)=>u.jsx("div",{className:"flex flex-1",children:r.map(y=>{const b=g*12+y;return u.jsx("div",{className:ct("flex-1 border-r last:border-r-0 border-gray-400 rounded-b-sm",e.has(b)?"bg-[var(--mcb-accent-primary)]":"bg-gray-100")},`${g}-${y}`)})},g))}),Array.from({length:c}).map((p,g)=>u.jsx(ve.Fragment,{children:s.map(({pc:y,leftPercent:b})=>{const w=g*12+y,E=g*d+b*d/100;return u.jsx("div",{style:{left:`${E}%`,width:`${h}%`},className:ct("absolute top-0 h-[58%] rounded-b-sm",e.has(w)?"bg-[var(--mcb-accent-tertiary)]":"bg-gray-800")},`${g}-${y}`)})},`black-${g}`))]})},lw=({selectedNotes:e,onToggleNote:n,octaves:r=3})=>{const s=[0,2,4,5,7,9,11],i=[{pc:1,leftPercent:11.5},{pc:3,leftPercent:25},{pc:6,leftPercent:53.5},{pc:8,leftPercent:67.5},{pc:10,leftPercent:81.5}],a=100/r,c=a*.1,d=r*280;return u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("div",{className:"relative h-36 sm:h-44 select-none",style:{minWidth:`${d}px`},children:[u.jsx("div",{className:"absolute inset-0 flex",children:Array.from({length:r}).map((h,m)=>u.jsx("div",{className:"flex flex-1 gap-[1px]",children:s.map(p=>{const g=m*12+p,y=e.has(g);return u.jsx("button",{onClick:()=>n(g),className:ct("flex-1 h-full rounded-b-md transition-all duration-100","border-x border-b focus:outline-none",y?"bg-gradient-to-b from-[var(--mcb-accent-primary)] to-[var(--mcb-accent-secondary)] border-[var(--mcb-accent-secondary)] shadow-md":"bg-gradient-to-b from-white to-gray-100 border-gray-300 hover:from-gray-50 hover:to-gray-200")},g)})},m))}),Array.from({length:r}).map((h,m)=>u.jsx(ve.Fragment,{children:i.map(({pc:p,leftPercent:g})=>{const y=m*12+p,b=e.has(y),w=m*a+g*a/100;return u.jsx("button",{onClick:E=>{E.stopPropagation(),n(y)},style:{left:`${w}%`,width:`${c}%`},className:ct("absolute top-0 h-[58%] rounded-b-md transition-all duration-100 z-10","border border-gray-900 focus:outline-none",b?"bg-gradient-to-b from-[var(--mcb-accent-tertiary)] to-[var(--mcb-accent-subtle)] shadow-md":"bg-gradient-to-b from-gray-700 to-gray-900 hover:from-gray-600 hover:to-gray-800")},y)})},`black-${m}`))]})})},cw=({isOpen:e,onClose:n,onSelectChord:r,onPlayNotes:s,currentKey:i,currentMode:a})=>{const[c,d]=N.useState(new Set),[h,m]=N.useState([]),[p,g]=N.useState([]),[y,b]=N.useState(!1),w=N.useMemo(()=>Array.from(c).sort((Z,Q)=>Z-Q),[c]),E=N.useMemo(()=>{const Z=p.some(se=>se.noteName&&se.noteName.includes("b")),Q=i.includes("b");return Z||Q},[p,i]),C=N.useCallback((Z,Q=!1)=>{const se=(Z%12+12)%12,K=p.find(J=>J.noteName?Cn(J.noteName)===se:!1);return K?.noteName?Q?K.noteName.replace("","#").replace("","b"):K.noteName.replace("#","").replace("b",""):Q?E?iw[se]:sw[se]:E?ow[se]:rw[se]},[p,E]),j=N.useMemo(()=>w.map(Z=>{const Q=(Z%12+12)%12,se=Math.floor(Z/12)+4;return`${C(Q,!0)}${se}`}).join(", "),[w,C]);N.useEffect(()=>{e&&i&&a&&Ln.getScaleNotes(i,a).then(Z=>g(Z)).catch(Z=>console.error("Failed to load scale notes:",Z))},[e,i,a]),N.useEffect(()=>{e&&i&&a&&(b(!0),(async()=>{const Q=[],se=fn.getChordTypes(),K=["C","C#","Db","D","D#","Eb","E","F","F#","Gb","G","G#","Ab","A","A#","Bb","B"];for(const J of K)for(const re of se)try{const W=await fn.generateChord(J,re,i,a);W&&Q.push({keyName:W.keyName,modeId:W.modeId,chordNote:W.chordNote,chordNoteName:W.chordNoteName,chordName:W.chordName,chordNotes:W.chordNotes,chordNoteNames:W.chordNoteNames})}catch{}return Q})().then(Q=>{m(Q),b(!1)}).catch(Q=>{console.error("Failed to generate chords:",Q),b(!1)}))},[e,i,a]),N.useEffect(()=>{e||d(new Set)},[e]);const P=N.useCallback(Z=>{if(!Z.chordNoteNames)return new Set;const Q=Z.chordNoteNames.split(",").map(K=>K.trim()),se=new Set;for(const K of Q)try{const J=Cn(K);se.add(J)}catch{console.warn(`Could not parse note: ${K}`)}return se},[]),A=N.useMemo(()=>w.map(Z=>(Z%12+12)%12),[w]),D=N.useMemo(()=>new Set(A),[A]),k=N.useMemo(()=>{if(D.size===0)return[];const Z=[],Q=Array.from(D).sort((J,re)=>J-re),se=A[0],K=new Set;for(const J of h){const re=P(J);if(re.size===0)continue;const W=Array.from(re).sort((I,L)=>I-L),$=J.chordName?.replace(/^[A-G][#bx]*/,"")||"",_=`${W.join(",")}-${$}`;if(re.size===D.size&&Q.every(L=>re.has(L))){if(K.has(_))continue;K.add(_);const L=J.chordNoteNames?.split(",").map(ue=>ue.trim())||[],ee=(L[0]?Cn(L[0]):-1)===se;Z.push({chord:J,matchType:ee?"exact":"reordered",score:ee?100:90,pitchClasses:re})}if(D.size===re.size+1){const I=Q.filter(L=>!re.has(L));if(I.length===1&&I[0]===se){const L=`${_}-/${I[0]}`;if(K.has(L))continue;K.add(L);const G=C(I[0],!1),ee=new Set(re);ee.add(I[0]),Z.push({chord:J,matchType:"with-slash",slashNote:G,slashPitchClass:I[0],score:70,pitchClasses:ee})}}}return Z.sort((J,re)=>re.score-J.score)},[D,A,h,P,C]),R=N.useCallback(Z=>{d(Q=>{const se=new Set(Q);return se.has(Z)?se.delete(Z):se.add(Z),se})},[]),O=()=>d(new Set),M=(Z,Q)=>{if(Z.stopPropagation(),r){const se=Q.slashNote?.replace("","#").replace("","b");let K=Q.chord.chordNoteNames||"";Q.slashNote&&Q.slashPitchClass!==void 0&&(K=`${`${C(Q.slashPitchClass,!0)}3`}, ${K}`),r(Q.chord,se,K)}n()},q=(Z,Q)=>{if(Z.stopPropagation(),s&&Q.chord.chordNoteNames)if(Q.slashNote&&Q.slashPitchClass!==void 0){const K=`${C(Q.slashPitchClass,!0)}3`;s(`${K}, ${Q.chord.chordNoteNames}`)}else s(Q.chord.chordNoteNames)},te=N.useCallback(Z=>{const Q=(Z%12+12)%12,se=Math.floor(Z/12)+4;return`${C(Q,!1)}${se}`},[C]),oe=N.useCallback((Z,Q)=>{if(!Z.chordNoteNames)return new Set;const se=Z.chordNoteNames.split(",").map(_=>_.trim());if(se.length===0)return new Set;const K=[];let J=48;for(const _ of se)try{const I=Cn(_);let G=Math.floor(J/12)*12+I;G<J&&(G+=12),K.push(G),J=G}catch{}if(K.length===0)return new Set;if(Q!==void 0){const _=K[0];let L=(Math.floor(_/12)-1)*12+Q;L>=_&&(L-=12),K.unshift(L)}const re=Math.min(...K),W=re-re%12,$=K.map(_=>_-W);return new Set($)},[]);return e?u.jsxs("div",{className:"fixed inset-0 bg-mcb-input bg-opacity-95 backdrop-blur-sm !z-[1000] flex flex-col",children:[u.jsxs("div",{className:"flex-shrink-0 max-h-[50vh] flex flex-col",children:[u.jsxs("div",{className:"max-w-3xl mx-auto px-4 pt-4 pb-2 w-full flex-shrink-0",children:[u.jsxs("div",{className:"flex items-center justify-between mb-0",children:[u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx(Bv,{className:"w-5 h-5 text-[var(--mcb-accent-primary)]"}),u.jsx("h2",{className:"text-base sm:text-lg font-bold text-white",children:"Chord Finder"}),u.jsxs("span",{className:"text-xs text-mcb-tertiary",children:["(",i," ",a,")"]})]}),u.jsx(zt,{onClick:n,variant:"secondary",size:"sm",children:u.jsx(Uv,{className:"w-5 h-5"})})]}),u.jsx("p",{className:"text-xs text-mcb-tertiary mb-0",children:"Click keys to select notes."})]}),u.jsx("div",{className:"max-w-3xl mx-auto px-4 w-full flex-1 min-h-0 overflow-y-auto",children:u.jsx("div",{className:"bg-mcb-primary rounded-lg border border-mcb-primary p-2 sm:p-3",children:u.jsx(lw,{selectedNotes:c,onToggleNote:R,octaves:3})})}),u.jsx("div",{className:"max-w-3xl mx-auto px-4 py-2 w-full flex-shrink-0 bg-mcb-input",children:u.jsxs("div",{className:"flex items-start justify-between gap-2",children:[u.jsxs("div",{className:"flex items-center flex-wrap gap-1.5 flex-1 min-w-0",children:[u.jsx("span",{className:"text-xs text-mcb-secondary font-medium",children:"Selected:"}),w.length===0?u.jsx("span",{className:"text-xs text-mcb-tertiary italic",children:"None"}):w.map((Z,Q)=>u.jsxs("button",{onClick:()=>R(Z),className:ct("px-1.5 py-0.5 text-xs text-white rounded font-mono transition-colors",Q===0?"bg-amber-600 hover:bg-amber-500":"bg-[var(--mcb-accent-primary)] hover:bg-[var(--mcb-accent-secondary)]"),title:Q===0?"Root note (click to remove)":"Click to remove",children:[te(Z),Q===0&&u.jsx("span",{className:"ml-0.5 opacity-75",children:""})]},Z))]}),u.jsxs("div",{className:"flex items-center gap-1.5 flex-shrink-0",children:[w.length>0&&s&&u.jsx(zt,{onClick:()=>s(j),variant:"secondary",size:"sm",className:"bg-[var(--mcb-accent-secondary)] hover:bg-[var(--mcb-accent-tertiary)] text-white !px-2 !py-1",title:"Preview selected notes",children:u.jsx(Ra,{className:"w-3.5 h-3.5"})}),w.length>0&&u.jsx(zt,{onClick:O,variant:"secondary",size:"sm",className:"!px-2 !py-1 text-xs",children:"Clear"})]})]})})]}),u.jsx("div",{className:"flex-1 max-w-3xl mx-auto px-4 w-full overflow-hidden flex flex-col min-h-0",children:u.jsxs("div",{className:"bg-mcb-primary rounded-lg border border-mcb-primary p-4 flex-1 flex flex-col min-h-0",children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsxs("h3",{className:"text-lg font-medium text-white",children:["Matching Chords",k.length>0&&u.jsxs("span",{className:"ml-2 text-sm text-mcb-tertiary",children:["(",k.length,")"]})]}),y&&u.jsx("span",{className:"text-xs text-mcb-tertiary",children:"Loading..."})]}),u.jsx("div",{className:"flex-1 overflow-y-auto space-y-2",children:y?u.jsx("div",{className:"text-center py-8 text-mcb-tertiary",children:"Generating all chord combinations..."}):w.length===0?u.jsx("div",{className:"text-center py-8 text-mcb-tertiary text-lg",children:"Select notes on the piano to find matching chords"}):k.length===0?u.jsx("div",{className:"text-center py-8 text-mcb-tertiary text-lg",children:"No matching chords found"}):k.map((Z,Q)=>u.jsx("div",{className:ct("relative w-full text-left p-3 rounded border transition-all","hover:border-[var(--mcb-accent-primary)] hover:bg-mcb-hover",Z.matchType==="exact"?"bg-[var(--mcb-accent-primary)]/10 border-[var(--mcb-accent-primary)]/50":"bg-mcb-input border-mcb-primary"),children:u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-3",children:[u.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[s&&u.jsx("button",{onClick:se=>q(se,Z),className:"p-1.5 rounded bg-[var(--mcb-accent-secondary)] hover:bg-[var(--mcb-accent-tertiary)] text-white transition-colors",title:"Preview chord",children:u.jsx(Ra,{className:"w-4 h-4"})}),u.jsx(aw,{highlightedNotes:oe(Z.chord,Z.slashPitchClass)})]}),u.jsxs("div",{className:"min-w-0 flex-1 pr-8 sm:pr-0",children:[u.jsxs("div",{className:"flex items-center space-x-2 flex-wrap",children:[u.jsxs("span",{className:"text-white font-semibold text-lg",children:[Z.chord.chordName,Z.slashNote&&u.jsxs("span",{className:"text-amber-400",children:["/",Z.slashNote]})]}),Z.matchType==="exact"&&u.jsxs("span",{className:"flex items-center space-x-1 px-2 py-0.5 text-xs bg-[var(--mcb-accent-primary)] text-white rounded",children:[u.jsx(XN,{className:"w-3 h-3"}),u.jsx("span",{children:"Root"})]}),Z.matchType==="with-slash"&&u.jsx("span",{className:"px-2 py-0.5 text-xs bg-amber-500/20 text-amber-300 rounded border border-amber-500/30",children:"Slash"})]}),u.jsx("span",{className:"text-xs text-mcb-tertiary font-mono truncate block",children:Z.chord.chordNoteNames})]}),u.jsx("div",{className:"absolute top-3 right-3 sm:static sm:ml-auto",children:u.jsx("button",{onClick:se=>M(se,Z),className:"p-1.5 rounded bg-[var(--mcb-success-primary)] hover:bg-[var(--mcb-success-secondary)] text-white transition-colors",title:"Add chord to progression",children:u.jsx($v,{className:"w-4 h-4"})})})]})},`${Z.chord.chordName}-${Z.slashNote||""}-${Q}`))})]})}),u.jsx("div",{className:"flex-shrink-0 h-4"})]}):null},Vv=N.memo(({chord:e,index:n,isExpanded:r,isPlaying:s,isAdding:i,onChordPlay:a,onChordAdd:c,onToggleExpansion:d})=>{const h=N.useCallback(()=>{a(e.chordNoteNames,n,e.chordName)},[a,e.chordNoteNames,e.chordName,n]),m=N.useCallback(g=>{g.stopPropagation(),c(n,e.chordName,e.chordNoteNames,e.keyName,e.modeId)},[c,n,e.chordName,e.chordNoteNames,e.keyName,e.modeId]),p=N.useCallback(g=>{g.stopPropagation(),d(n)},[d,n]);return u.jsxs("div",{className:`bg-mcb-secondary rounded-lg border border-mcb-primary hover:border-[var(--mcb-accent-primary)] hover:bg-mcb-tertiary transition-all duration-200 overflow-hidden cursor-pointer group relative ${s?"chord-playing z-50":""} ${i?"chord-adding z-40":""}`,onClick:h,children:[u.jsx("div",{className:"p-3 sm:p-4",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3 flex-1 min-w-0",children:[u.jsx(Ys,{className:`h-5 w-5 sm:h-6 sm:w-6 transition-colors flex-shrink-0 ${s?"text-[var(--mcb-accent-text-primary)]":"text-[var(--mcb-text-tertiary)] group-hover:text-[var(--mcb-accent-text-secondary)]"}`}),u.jsx("h3",{className:`text-base sm:text-lg font-bold transition-colors truncate ${s?"text-[var(--mcb-accent-text-light)]":"text-white group-hover:text-[var(--mcb-accent-text-light)]"}`,children:e.chordName})]}),u.jsxs("div",{className:"flex items-center space-x-1 flex-shrink-0 ml-2",children:[u.jsx("button",{onClick:m,className:`p-1 sm:p-2 rounded-md transition-colors ${i?"bg-[var(--mcb-success-primary)] text-white":"hover:bg-[var(--mcb-success-primary)] text-[var(--mcb-text-tertiary)] hover:text-white"}`,title:"Add to sequence",children:u.jsx($v,{className:"h-5 w-5 sm:h-4 sm:w-4"})}),u.jsx("button",{onClick:p,className:"p-1.5 sm:p-2 rounded-md hover:bg-[#565b6f] text-[var(--mcb-text-tertiary)] hover:text-white transition-colors",title:r?"Hide notes":"Show notes",children:r?u.jsx(qs,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"}):u.jsx(ho,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"})})]})]})}),r&&u.jsx("div",{className:"px-3 pb-3 pt-0 sm:px-4 sm:pb-4",children:u.jsxs("div",{className:"bg-gray-800x bg-mcb-elevated  rounded-md p-2 sm:p-3 border-1 border-mcb-primary",children:[u.jsx("div",{className:"text-xs font-medium text-[var(--mcb-text-tertiary)] uppercase tracking-wide mb-1",children:"Notes"}),u.jsx("div",{className:"text-sm text-mcb-primary font-mono",children:e.chordNoteNames})]})})]})});Vv.displayName="ChordCard";const uw=({onChordClick:e,addChordClick:n})=>{const[r,s]=N.useState("All"),[i,a]=N.useState(""),[c,d]=N.useState(new Set),[h,m]=N.useState(new Set),[p,g]=N.useState(new Set),[y,b]=N.useState(1),[w,E]=N.useState(!1),C=Qe(G=>G.chords),j=Qe(G=>G.loadingChords),P=Qe(G=>G.allDistinctChords),A=Qe(G=>G.loadingAllChords),D=Qe(G=>G.showAllChords),k=Qe(G=>G.toggleShowAllChords),R=Qe(G=>G.key),O=Qe(G=>G.mode),M=D?P:C,q=D?A:j;N.useEffect(()=>{const G=()=>{const ee=window.innerWidth;ee>=1280?b(3):ee>=640?b(2):b(1)};return G(),window.addEventListener("resize",G),()=>window.removeEventListener("resize",G)},[]);const te=N.useCallback(G=>Math.floor(G/y),[y]),oe=N.useMemo(()=>M?M.filter(G=>G.chordName&&G.chordNoteNames&&G.chordNoteName&&G.chordName.trim()!==""&&G.chordNoteNames.trim()!==""&&G.chordNoteName.trim()!==""):[],[M]),Z=N.useMemo(()=>{const G=new Set;return oe.forEach(ee=>{ee.chordNoteName&&G.add(ee.chordNoteName)}),Array.from(G).sort()},[oe]),Q=N.useMemo(()=>{const G={};return oe.forEach(ee=>{ee.chordNoteName&&(G[ee.chordNoteName]=(G[ee.chordNoteName]||0)+1)}),G},[oe]),se=N.useMemo(()=>{let G=oe;if(r!=="All"&&(G=G.filter(ee=>ee.chordNoteName===r)),i.trim()){const ee=i.toLowerCase().trim();G=G.filter(ue=>ue.chordName?.toLowerCase().includes(ee)||ue.chordNoteNames?.toLowerCase().includes(ee))}return G.sort((ee,ue)=>{const fe=ee.chordName?.toLowerCase()||"",Ee=ue.chordName?.toLowerCase()||"";return fe.localeCompare(Ee)})},[oe,r,i]);N.useEffect(()=>{d(new Set)},[y,se]);const K=N.useCallback((G,ee,ue)=>{m(Ee=>new Set(Ee).add(ee)),e(G,void 0,ue);const fe=setTimeout(()=>{m(Ee=>{const pe=new Set(Ee);return pe.delete(ee),pe})},800);return()=>clearTimeout(fe)},[e]),J=N.useCallback((G,ee,ue,fe,Ee)=>{g(nt=>new Set(nt).add(G));const Ne=Qe.getState().modes[Ee-1];n?.(ee,ue,fe,Ne);const be=setTimeout(()=>{g(nt=>{const Ie=new Set(nt);return Ie.delete(G),Ie})},600);return()=>clearTimeout(be)},[n]),re=N.useCallback((G,ee,ue)=>{if(n){const fe=ee?`${G.chordName}/${ee}`:G.chordName,Ee=ue||G.chordNoteNames,pe=G.keyName||R;let Ne=O;G.modeId&&(Ne=Qe.getState().modes[G.modeId-1]||O),n(fe,Ee,pe,Ne)}},[n,R,O]),W=N.useCallback(G=>{const ee=te(G);d(ue=>{const fe=new Set(ue);return fe.has(ee)?fe.delete(ee):fe.add(ee),fe})},[te]),$=N.useCallback(()=>{k(),s("All"),a(""),d(new Set)},[k]),_=N.useCallback(()=>{a(""),s("All")},[]),I=N.useCallback(G=>{a(G.target.value)},[]),L=N.useMemo(()=>u.jsxs("div",{className:"flex space-x-2 overflow-x-auto pb-2 scrollbar-thin scrollbar-thumb-[var(--mcb-border-primary)] scrollbar-track-transparent px-1",children:[u.jsxs("button",{onClick:()=>s("All"),className:`flex-shrink-0 px-3 py-2 rounded-full text-sm font-medium transition-colors ${r==="All"?"bg-[var(--mcb-accent-secondary)] text-white":"bg-mcb-tertiary text-mcb-secondary hover:bg-mcb-active hover:text-white"}`,children:["All (",oe.length,")"]}),Z.map(G=>u.jsxs("button",{onClick:()=>s(G),className:`flex-shrink-0 px-3 py-2 rounded-full text-sm font-medium transition-colors ${r===G?"bg-[var(--mcb-accent-secondary)] text-white":"bg-mcb-tertiary text-mcb-secondary hover:bg-mcb-active hover:text-white"}`,children:[G," (",Q[G]||0,")"]},G))]}),[r,oe.length,Z,Q]);return u.jsxs("div",{className:"w-full max-w-7xl mx-auto px-2",children:[u.jsx("div",{className:"bg-mcb-secondary  border border-mcb-primary rounded-lg overflow-hidden mb-4",children:u.jsxs("div",{className:"px-4 py-4",children:[u.jsx("div",{className:"flex items-center justify-between mb-4",children:u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("h2",{className:"text-sm font-bold text-mcb-secondary uppercase tracking-wider",children:"Chord Explorer"}),u.jsxs("button",{onClick:()=>E(!0),className:"flex items-center gap-1.5 px-2.5 py-1 rounded bg-[var(--mcb-accent-primary)]/10 hover:bg-[var(--mcb-accent-primary)]/20 border border-[var(--mcb-accent-primary)]/20 hover:border-[var(--mcb-accent-primary)]/50 transition-all group",children:[u.jsx(Bv,{className:"w-3.5 h-3.5 text-[var(--mcb-accent-primary)]"}),u.jsx("span",{className:"text-xs font-medium text-[var(--mcb-accent-text-primary)]",children:"Find by Notes"})]})]})}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex items-center justify-between p-3 bg-mcb-tertiaryx bg-mcb-elevated  rounded-lg border border-mcb-primary",children:[u.jsxs("div",{className:"flex flex-col text-left",children:[u.jsx("span",{className:"text-xs uppercase font-medium text-[var(--mcb-text-tertiary)] text-left",children:"Show All Chords"}),u.jsx("span",{className:"text-xs text-[var(--mcb-text-tertiary)]",children:D?P?`${P?.length} chords`:"Loading...":`Showing chords in ${R} ${O}`})]}),u.jsx("button",{onClick:$,disabled:q,className:`relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-[var(--mcb-accent-primary)] focus:ring-offset-2 focus:ring-offset-gray-800 ${D?"bg-[var(--mcb-accent-secondary)]":"bg-[var(--mcb-border-secondary)]"} ${q?"opacity-50 cursor-not-allowed":""}`,role:"switch","aria-checked":D,"aria-label":"Toggle between current mode chords and all distinct chords",children:u.jsx("span",{"aria-hidden":"true",className:`pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ${D?"translate-x-5":"translate-x-0"}`})})]}),u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"absolute left-3 inset-y-0 flex items-center pointer-events-none",children:u.jsx($N,{className:"w-4 h-4 text-[var(--mcb-text-tertiary)]"})}),u.jsx("input",{type:"text",placeholder:"Search chords...",value:i,onChange:I,className:"w-full pl-10 pr-4 py-2 bg-mcb-tertiary border border-mcb-primary rounded-lg text-white placeholder-[var(--mcb-text-tertiary)] focus:border-[var(--mcb-accent-primary)] focus:outline-none transition-colors !text-sm"})]})]}),u.jsx("div",{className:"lg:hidden mt-4",children:L})]})}),u.jsxs("div",{className:"flex flex-col lg:flex-row gap-3 lg:gap-4",children:[u.jsx("div",{className:"hidden lg:block lg:w-48 flex-shrink-0",children:u.jsxs("div",{className:"bg-mcb-secondary rounded-lg h-fit",children:[u.jsx("div",{className:"px-4 py-3 border-b border-mcb-primary",children:u.jsx("h3",{className:"text-sm font-medium text-mcb-primary uppercase tracking-wide",children:"Filter by Root"})}),u.jsxs("div",{className:"p-2",children:[u.jsx("button",{onClick:()=>s("All"),className:`w-full px-3 py-2 text-left transition-colors rounded-md border-l-4 ${r==="All"?"bg-mcb-hover border-l-[var(--mcb-accent-primary)] text-white":"hover:bg-mcb-tertiary border-l-transparent text-mcb-secondary hover:text-white"}`,children:u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("span",{className:"text-sm font-medium",children:"All Notes"}),u.jsx("span",{className:"text-xs text-[var(--mcb-text-tertiary)] bg-[var(--mcb-border-primary)] px-2 py-1 rounded",children:oe.length})]})}),Z.map(G=>u.jsx("button",{onClick:()=>s(G),className:`w-full px-3 py-2 text-left transition-colors rounded-md border-l-4 mt-1 ${r===G?"bg-mcb-hover border-l-[var(--mcb-accent-primary)] text-white":"hover:bg-mcb-tertiary border-l-transparent text-mcb-secondary hover:text-white"}`,children:u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("span",{className:"text-sm font-medium",children:G}),u.jsx("span",{className:"text-xs text-[var(--mcb-text-tertiary)] bg-[var(--mcb-border-primary)] px-2 py-1 rounded",children:Q[G]||0})]})},G))]})]})}),u.jsxs("div",{className:"flex-1",children:[q?u.jsx("div",{className:"flex justify-center items-center h-64",children:u.jsxs("div",{className:"flex flex-col items-center space-y-3",children:[u.jsx("div",{className:"inline-block h-8 w-8 animate-spin rounded-full border-4 border-solid border-current border-r-transparent text-[var(--mcb-accent-primary)]"}),u.jsx("span",{className:"text-sm text-[var(--mcb-text-tertiary)]",children:D?"Loading all distinct chords...":"Loading chords..."})]})}):se.length?u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 gap-2 sm:gap-3",children:se.map((G,ee)=>u.jsx(Vv,{chord:G,index:ee,isExpanded:c.has(te(ee)),isPlaying:h.has(ee),isAdding:p.has(ee),onChordPlay:K,onChordAdd:J,onToggleExpansion:W},`chord-${G.chordName}-${ee}`))}):u.jsx("div",{className:"flex justify-center items-center h-64 bg-mcb-secondary rounded-lg",children:u.jsxs("div",{className:"text-center space-y-3",children:[u.jsx("div",{className:"text-mcb-disabled text-4xl",children:""}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("div",{className:"text-sm text-[var(--mcb-text-tertiary)]",children:i.trim()?`No chords found matching "${i}"`:r==="All"?D?"No distinct chords available":"No chords available":`No chords found for root note "${r}"`}),(i.trim()||r!=="All")&&u.jsx("button",{onClick:_,className:"text-sm text-[var(--mcb-accent-text-primary)] hover:text-[var(--mcb-accent-text-secondary)] underline transition-colors",children:"Clear filters"})]})]})}),se.length>0&&u.jsx("div",{className:"mt-4 text-center",children:u.jsxs("div",{className:"text-xs text-[var(--mcb-text-tertiary)]",children:["Tap any chord to play ",u.jsx("span",{className:"text-mcb-secondary mx-1",children:"+"})," to add to sequence ",u.jsx(ho,{className:"inline h-3 w-3 mx-1"})," to show notes for entire row",D&&u.jsx("span",{className:"block mt-1 text-[var(--mcb-accent-text-primary)]",children:"Currently showing all distinct chords across all modes and keys (sorted alphabetically)"})]})})]})]}),u.jsx(cw,{isOpen:w,onClose:()=>E(!1),currentKey:R,currentMode:O,onPlayNotes:G=>e(G),onSelectChord:re})]})},dw=N.memo(uw),bf=class bf extends N.Component{constructor(){super(...arguments),this.state={instrumentList:null,isLoading:!0,error:null},this.loadInstrumentList=async()=>{try{const n=await fetch(`${this.props.hostname}/${this.props.soundfont}/names.json`);if(!n.ok)throw new Error(`Failed to load instruments: ${n.status}`);const r=await n.json();this.setState({instrumentList:r,isLoading:!1,error:null})}catch(n){console.error("Error loading instrument list:",n),this.setState({isLoading:!1,error:n})}}}componentDidMount(){this.loadInstrumentList()}componentDidUpdate(n,r){r.isLoading&&!this.state.isLoading&&this.state.instrumentList&&this.state.instrumentList!==r.instrumentList&&this.props.render(this.state.instrumentList,this.state.isLoading)}render(){return null}};bf.defaultProps={soundfont:"MusyngKite"};let ud=bf;var ou={exports:{}},su={exports:{}},iu,Tp;function fw(){if(Tp)return iu;Tp=1;function e(r){return r>64&&r<91?r-65:r>96&&r<123?r-71:r>47&&r<58?r+4:r===43?62:r===47?63:0}function n(r,s){for(var i=r.replace(/[^A-Za-z0-9\+\/]/g,""),a=i.length,c=s?Math.ceil((a*3+1>>2)/s)*s:a*3+1>>2,d=new Uint8Array(c),h,m,p=0,g=0,y=0;y<a;y++)if(m=y&3,p|=e(i.charCodeAt(y))<<18-6*m,m===3||a-y===1){for(h=0;h<3&&g<c;h++,g++)d[g]=p>>>(16>>>h&24)&255;p=0}return d}return iu={decode:n},iu}var au,Rp;function hw(){return Rp||(Rp=1,au=function(e,n){return new Promise(function(r,s){var i=new XMLHttpRequest;n&&(i.responseType=n),i.open("GET",e),i.onload=function(){i.status===200?r(i.response):s(Error(i.statusText))},i.onerror=function(){s(Error("Network Error"))},i.send()})}),au}var Mp;function mw(){return Mp||(Mp=1,function(e){var n=fw(),r=hw();function s(O){return function(M){return typeof M=="string"&&O.test(M)}}function i(O,M){return typeof O=="string"?O+M:typeof O=="function"?O(M):M}function a(O,M,q,te){var oe=c(M)?d:h(M)?m:p(M)?g:y(M)?b:w(M)?E:C(M)?j:P(M)?A:D(M)?k:null,Z=q||{};return oe?oe(O,M,Z):te?Promise.resolve(te):Promise.reject("Source not valid ("+M+")")}a.fetch=r;function c(O){return O instanceof ArrayBuffer}function d(O,M,q){return new Promise(function(te,oe){O.decodeAudioData(M,function(Z){te(Z)},function(){oe("Can't decode audio data ("+M.slice(0,30)+"...)")})})}var h=s(/\.(mp3|wav|ogg)(\?.*)?$/i);function m(O,M,q){var te=i(q.from,M);return a(O,a.fetch(te,"arraybuffer"),q)}function p(O){return O&&typeof O.then=="function"}function g(O,M,q){return M.then(function(te){return a(O,te,q)})}var y=Array.isArray;function b(O,M,q){return Promise.all(M.map(function(te){return a(O,te,q,te)}))}function w(O){return O&&typeof O=="object"}function E(O,M,q){var te={},oe=Object.keys(M).map(function(Z){if(q.only&&q.only.indexOf(Z)===-1)return null;var Q=M[Z];return a(O,Q,q,Q).then(function(se){te[Z]=se})});return Promise.all(oe).then(function(){return te})}var C=s(/\.json(\?.*)?$/i);function j(O,M,q){var te=i(q.from,M);return a(O,a.fetch(te,"text").then(JSON.parse),q)}var P=s(/^data:audio/);function A(O,M,q){var te=M.indexOf(",");return a(O,n.decode(M.slice(te+1)).buffer,q)}var D=s(/\.js(\?.*)?$/i);function k(O,M,q){var te=i(q.from,M);return a(O,a.fetch(te,"text").then(R),q)}function R(O){var M=O.indexOf("MIDI.Soundfont.");if(M<0)throw Error("Invalid MIDI.js Soundfont format");M=O.indexOf("=",M)+2;var q=O.lastIndexOf(",");return JSON.parse(O.slice(M,q)+"}")}e.exports&&(e.exports=a),typeof window<"u"&&(window.loadAudio=a)}(su)),su.exports}var lu={exports:{}},cu,Op;function pw(){if(Op)return cu;Op=1,cu=e;function e(d){var h=d.createGain(),m=h._voltage=s(d),p=i(m),g=i(m),y=i(m);return h._startAmount=i(g),h._endAmount=i(y),h._multiplier=i(p),h._multiplier.connect(h),h._startAmount.connect(h),h._endAmount.connect(h),h.value=p.gain,h.startValue=g.gain,h.endValue=y.gain,h.startValue.value=0,h.endValue.value=0,Object.defineProperties(h,n),h}var n={attack:{value:0,writable:!0},decay:{value:0,writable:!0},sustain:{value:1,writable:!0},release:{value:0,writable:!0},getReleaseDuration:{value:function(){return this.release}},start:{value:function(d){var h=this._multiplier.gain,m=this._startAmount.gain,p=this._endAmount.gain;this._voltage.start(d),this._decayFrom=this._decayFrom=d+this.attack,this._startedAt=d;var g=this.sustain;h.cancelScheduledValues(d),m.cancelScheduledValues(d),p.cancelScheduledValues(d),p.setValueAtTime(0,d),this.attack?(h.setValueAtTime(0,d),h.linearRampToValueAtTime(1,d+this.attack),m.setValueAtTime(1,d),m.linearRampToValueAtTime(0,d+this.attack)):(h.setValueAtTime(1,d),m.setValueAtTime(0,d)),this.decay&&h.setTargetAtTime(g,this._decayFrom,a(this.decay))}},stop:{value:function(d,h){h&&(d=d-this.release);var m=d+this.release;if(this.release){var p=this._multiplier.gain,g=this._startAmount.gain,y=this._endAmount.gain;p.cancelScheduledValues(d),g.cancelScheduledValues(d),y.cancelScheduledValues(d);var b=a(this.release);if(this.attack&&d<this._decayFrom){var w=c(0,1,this._startedAt,this._decayFrom,d);p.linearRampToValueAtTime(w,d),g.linearRampToValueAtTime(1-w,d),g.setTargetAtTime(0,d,b)}y.setTargetAtTime(1,d,b),p.setTargetAtTime(0,d,b)}return this._voltage.stop(m),m}},onended:{get:function(){return this._voltage.onended},set:function(d){this._voltage.onended=d}}},r=new Float32Array([1,1]);function s(d){var h=d.createBufferSource(),m=d.createBuffer(1,2,d.sampleRate);return m.getChannelData(0).set(r),h.buffer=m,h.loop=!0,h}function i(d){var h=d.context.createGain();return d.connect(h),h}function a(d){return Math.log(d+1)/Math.log(100)}function c(d,h,m,p,g){var y=h-d,b=p-m,w=g-m,E=w/b,C=d+E*y;return C<=d&&(C=d),C>=h&&(C=h),C}return cu}var uu,_p;function gw(){if(_p)return uu;_p=1;var e=pw(),n={},r={gain:1,attack:.01,decay:.1,sustain:.9,release:.3,loop:!1,cents:0,loopStart:0,loopEnd:0};function s(h,m,p){var g=!1,y=0,b={},w=h.createGain();w.gain.value=1;var E=Object.assign({},r,p),C={context:h,out:w,opts:E};return m instanceof AudioBuffer?C.buffer=m:C.buffers=m,C.start=function(A,D,k){if(C.buffer&&A!==null)return C.start(null,A,D);var R=A?C.buffers[A]:C.buffer;if(R){if(!g){console.warn("SamplePlayer not connected to any node.");return}}else{console.warn("Buffer "+A+" not found.");return}var O=k||n;D=Math.max(h.currentTime,D||0),C.emit("start",D,A,O);var M=P(A,R,O);return M.id=j(A,M),M.env.start(D),M.source.start(D),C.emit("started",D,M.id,M),O.duration&&M.stop(D+O.duration),M},C.play=function(A,D,k){return C.start(A,D,k)},C.stop=function(A,D){var k;return D=D||Object.keys(b),D.map(function(R){return k=b[R],k?(k.stop(A),k.id):null})},C.connect=function(A){return g=!0,w.connect(A),C},C.emit=function(A,D,k,R){C.onevent&&C.onevent(A,D,k,R);var O=C["on"+A];O&&O(D,k,R)},C;function j(A,D){return D.id=y++,b[D.id]=D,D.source.onended=function(){var k=h.currentTime;D.source.disconnect(),D.env.disconnect(),D.disconnect(),C.emit("ended",k,D.id,D)},D.id}function P(A,D,k){var R=h.createGain();return R.gain.value=0,R.connect(w),R.env=c(h,k,E),R.env.connect(R.gain),R.source=h.createBufferSource(),R.source.buffer=D,R.source.connect(R),R.source.loop=k.loop||E.loop,R.source.playbackRate.value=d(k.cents||E.cents),R.source.loopStart=k.loopStart||E.loopStart,R.source.loopEnd=k.loopEnd||E.loopEnd,R.stop=function(O){var M=O||h.currentTime;C.emit("stop",M,A);var q=R.env.stop(M);R.source.stop(q)},R}}function i(h){return typeof h=="number"}var a=["attack","decay","sustain","release"];function c(h,m,p){var g=e(h),y=m.adsr||p.adsr;return a.forEach(function(b,w){y?g[b]=y[w]:g[b]=m[b]||p[b]}),g.value.value=i(m.gain)?m.gain:i(p.gain)?p.gain:1,g}function d(h){return h?Math.pow(2,h/1200):1}return uu=s,uu}var du,Lp;function vw(){if(Lp)return du;Lp=1,du=function(n){return n.on=function(r,s){if(arguments.length===1&&typeof r=="function")return n.on("event",r);var i="on"+r,a=n[i];return n[i]=a?e(a,s):s,n},n};function e(n,r){return function(s,i,a,c){n(s,i,a,c),r(s,i,a,c)}}return du}var fu,Fp;function yw(){if(Fp)return fu;Fp=1;var e=/^([a-gA-G])(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)\s*$/;function n(){return e}var r=[0,2,4,5,7,9,11];function s(d,h,m){if(typeof d!="string")return null;var p=e.exec(d);if(!p||!h&&p[4])return null;var g={letter:p[1].toUpperCase(),acc:p[2].replace(/x/g,"##")};return g.pc=g.letter+g.acc,g.step=(g.letter.charCodeAt(0)+3)%7,g.alt=g.acc[0]==="b"?-g.acc.length:g.acc.length,g.chroma=r[g.step]+g.alt,p[3]&&(g.oct=+p[3],g.midi=g.chroma+12*(g.oct+1),g.freq=i(g.midi,m)),h&&(g.tonicOf=p[4]),g}function i(d,h){return Math.pow(2,(d-69)/12)*(h||440)}var a={parse:s,regex:n,midiToFreq:i},c=["letter","acc","pc","step","alt","chroma","oct","midi","freq"];return c.forEach(function(d){a[d]=function(h){var m=s(h);return m&&typeof m[d]<"u"?m[d]:null}}),fu=a,fu}var hu,Bp;function xw(){if(Bp)return hu;Bp=1;var e=yw(),n=function(i){return i!==null&&i!==[]&&i>=0&&i<129},r=function(i){return n(i)?+i:e.midi(i)};hu=function(i){if(i.buffers){var a=i.opts.map,c=typeof a=="function"?a:r,d=function(m){return m?c(m)||m:null};i.buffers=s(i.buffers,d);var h=i.start;i.start=function(m,p,g){var y=d(m),b=y%1;return b&&(y=Math.floor(y),g=Object.assign(g||{},{cents:Math.floor(b*100)})),h(y,p,g)}}return i};function s(i,a){return Object.keys(i).reduce(function(c,d){return c[a(d)]=i[d],c},{})}return hu}var mu,$p;function bw(){if($p)return mu;$p=1;var e=Array.isArray,n=function(s){return s&&typeof s=="object"},r={};return mu=function(s){return s.schedule=function(i,a){var c=s.context.currentTime,d=i<c?c:i;s.emit("schedule",d,a);var h,m,p,g;return a.map(function(y){if(y)e(y)?(h=y[0],m=y[1]):(h=y.time,m=y);else return null;return n(m)?(p=m.name||m.key||m.note||m.midi||null,g=m):(p=m,g=r),s.start(p,d+(h||0),g)})},s},mu}function wa(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pu={exports:{}},Gp;function Nw(){return Gp||(Gp=1,function(e,n){(function(r){e.exports=r()})(function(){return function r(s,i,a){function c(m,p){if(!i[m]){if(!s[m]){var g=typeof wa=="function"&&wa;if(!p&&g)return g(m,!0);if(d)return d(m,!0);var y=new Error("Cannot find module '"+m+"'");throw y.code="MODULE_NOT_FOUND",y}var b=i[m]={exports:{}};s[m][0].call(b.exports,function(w){var E=s[m][1][w];return c(E||w)},b,b.exports,r,s,i,a)}return i[m].exports}for(var d=typeof wa=="function"&&wa,h=0;h<a.length;h++)c(a[h]);return c}({1:[function(r,s,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(a){function c(d){if(this._event=d,this._data=d.data,this.receivedTime=d.receivedTime,this._data&&this._data.length<2){console.warn("Illegal MIDI message of length",this._data.length);return}switch(this._messageCode=d.data[0]&240,this.channel=d.data[0]&15,this._messageCode){case 128:this.messageType="noteoff",this.key=d.data[1]&127,this.velocity=d.data[2]&127;break;case 144:this.messageType="noteon",this.key=d.data[1]&127,this.velocity=d.data[2]&127;break;case 160:this.messageType="keypressure",this.key=d.data[1]&127,this.pressure=d.data[2]&127;break;case 176:this.messageType="controlchange",this.controllerNumber=d.data[1]&127,this.controllerValue=d.data[2]&127,this.controllerNumber===120&&this.controllerValue===0?this.channelModeMessage="allsoundoff":this.controllerNumber===121?this.channelModeMessage="resetallcontrollers":this.controllerNumber===122?this.controllerValue===0?this.channelModeMessage="localcontroloff":this.channelModeMessage="localcontrolon":this.controllerNumber===123&&this.controllerValue===0?this.channelModeMessage="allnotesoff":this.controllerNumber===124&&this.controllerValue===0?this.channelModeMessage="omnimodeoff":this.controllerNumber===125&&this.controllerValue===0?this.channelModeMessage="omnimodeon":this.controllerNumber===126?this.channelModeMessage="monomodeon":this.controllerNumber===127&&(this.channelModeMessage="polymodeon");break;case 192:this.messageType="programchange",this.program=d.data[1];break;case 208:this.messageType="channelpressure",this.pressure=d.data[1]&127;break;case 224:this.messageType="pitchbendchange";var h=d.data[2]&127,m=d.data[1]&127;this.pitchBend=(h<<8)+m;break}}return new c(a)},s.exports=i.default},{}]},{},[1])(1)})}(pu)),pu.exports}var gu,Up;function ww(){if(Up)return gu;Up=1;var e=Nw();return gu=function(n){return n.listenToMidi=function(r,s){var i={},a=s||{},c=a.gain||function(d){return d/127};return r.onmidimessage=function(d){var h=d.messageType?d:e(d);if(h.messageType==="noteon"&&h.velocity===0&&(h.messageType="noteoff"),!(a.channel&&h.channel!==a.channel))switch(h.messageType){case"noteon":i[h.key]=n.play(h.key,0,{gain:c(h.velocity)});break;case"noteoff":i[h.key]&&(i[h.key].stop(),delete i[h.key]);break}},n},n},gu}var Vp;function Cw(){return Vp||(Vp=1,function(e){var n=gw(),r=vw(),s=xw(),i=bw(),a=ww();function c(d,h,m){return a(i(s(r(n(d,h,m)))))}e.exports&&(e.exports=c),typeof window<"u"&&(window.SamplePlayer=c)}(lu)),lu.exports}function zp(e,n){return Array(n+1).join(e)}function Bd(e){return typeof e=="number"}function Sw(e){return typeof e=="string"}function Ew(e){return typeof e<"u"}function zv(e,n){return Math.pow(2,(e-69)/12)*(n||440)}var Wv=/^([a-gA-G])(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)\s*$/;function Dw(){return Wv}var jw=[0,2,4,5,7,9,11];function Nr(e,n,r){if(typeof e!="string")return null;var s=Wv.exec(e);if(!s||!n&&s[4])return null;var i={letter:s[1].toUpperCase(),acc:s[2].replace(/x/g,"##")};i.pc=i.letter+i.acc,i.step=(i.letter.charCodeAt(0)+3)%7,i.alt=i.acc[0]==="b"?-i.acc.length:i.acc.length;var a=jw[i.step]+i.alt;return i.chroma=a<0?12+a:a%12,s[3]&&(i.oct=+s[3],i.midi=a+12*(i.oct+1),i.freq=zv(i.midi,r)),n&&(i.tonicOf=s[4]),i}var Aw="CDEFGAB";function kw(e){return Bd(e)?e<0?zp("b",-e):zp("#",e):""}function Iw(e){return Bd(e)?""+e:""}function Hv(e,n,r){return e===null||typeof e>"u"?null:e.step?Hv(e.step,e.alt,e.oct):e<0||e>6?null:Aw.charAt(e)+kw(n)+Iw(r)}function qv(e){if((Bd(e)||Sw(e))&&e>=0&&e<128)return+e;var n=Nr(e);return n&&Ew(n.midi)?n.midi:null}function Pw(e,n){var r=qv(e);return r===null?null:zv(r,n)}function Tw(e){return(Nr(e)||{}).letter}function Rw(e){return(Nr(e)||{}).acc}function Mw(e){return(Nr(e)||{}).pc}function Ow(e){return(Nr(e)||{}).step}function _w(e){return(Nr(e)||{}).alt}function Lw(e){return(Nr(e)||{}).chroma}function Fw(e){return(Nr(e)||{}).oct}const Bw=Object.freeze(Object.defineProperty({__proto__:null,acc:Rw,alt:_w,build:Hv,chroma:Lw,freq:Pw,letter:Tw,midi:qv,oct:Fw,parse:Nr,pc:Mw,regex:Dw,step:Ow},Symbol.toStringTag,{value:"Module"})),$w=kv(Bw);var vu,Wp;function Gw(){if(Wp)return vu;Wp=1;var e=$w;function n(i,a){if(console.warn("new Soundfont() is deprected"),console.log("Please use Soundfont.instrument() instead of new Soundfont().instrument()"),!(this instanceof n))return new n(i);this.nameToUrl=a||n.nameToUrl,this.ctx=i,this.instruments={},this.promises=[]}n.prototype.onready=function(i){console.warn("deprecated API"),console.log("Please use Promise.all(Soundfont.instrument(), Soundfont.instrument()).then() instead of new Soundfont().onready()"),Promise.all(this.promises).then(i)},n.prototype.instrument=function(i,a){console.warn("new Soundfont().instrument() is deprecated."),console.log("Please use Soundfont.instrument() instead.");var c=this.ctx;if(i=i||"default",i in this.instruments)return this.instruments[i];var d={name:i,play:s(c,a)};if(this.instruments[i]=d,i!=="default"){var h=n.instrument(c,i,a).then(function(m){return d.play=m.play,d});this.promises.push(h),d.onready=function(m){console.warn("onready is deprecated. Use Soundfont.instrument().then()"),h.then(m)}}else d.onready=function(m){console.warn("onready is deprecated. Use Soundfont.instrument().then()"),m()};return d};function r(i,a,c){return console.warn("Soundfont.loadBuffers is deprecate."),console.log("Use Soundfont.instrument(..) and get buffers properties from the result."),n.instrument(i,a,c).then(function(d){return d.buffers})}n.loadBuffers=r;function s(i,a){return a=a||{},function(c,d,h,m){console.warn("The oscillator player is deprecated."),console.log("Starting with version 0.9.0 you will have to wait until the soundfont is loaded to play sounds.");var p=c>0&&c<129?+c:e.midi(c),g=p?e.midiToFreq(p,440):null;if(g){h=h||.2,m=m||{};var y=m.destination||a.destination||i.destination,b=m.vcoType||a.vcoType||"sine",w=m.gain||a.gain||.4,E=i.createOscillator();E.type=b,E.frequency.value=g;var C=i.createGain();return C.gain.value=w,E.connect(C),C.connect(y),E.start(d),h>0&&E.stop(d+h),E}}}return n.noteToMidi=e.midi,vu=n,vu}var Hp;function Uw(){return Hp||(Hp=1,function(e){var n=mw(),r=Cw();function s(d,h,m){if(arguments.length===1)return function(w,E){return s(d,w,E)};var p=m||{},g=p.isSoundfontURL||i,y=p.nameToUrl||a,b=g(h)?h:y(h,p.soundfont,p.format);return n(d,b,{only:p.only||p.notes}).then(function(w){var E=r(d,w,p).connect(p.destination?p.destination:d.destination);return E.url=b,E.name=h,E})}function i(d){return/\.js(\?.*)?$/i.test(d)}function a(d,h,m){return m=m==="ogg"?m:"mp3",h=h==="FluidR3_GM"?h:"MusyngKite","https://gleitz.github.io/midi-js-soundfonts/"+h+"/"+d+"-"+m+".js"}var c=Gw();c.instrument=s,c.nameToUrl=a,e.exports&&(e.exports=c),typeof window<"u"&&(window.Soundfont=c)}(ou)),ou.exports}var Vw=Uw();const zw=br(Vw),Nf=class Nf extends ve.Component{constructor(n){super(n),this.setupAudioChain=()=>{const{audioContext:r,eq:s,reverbLevel:i,volume:a,chorusLevel:c,delayLevel:d,distortionLevel:h,bitcrusherLevel:m,phaserLevel:p,flangerLevel:g,ringModLevel:y,autoFilterLevel:b,tremoloLevel:w,stereoWidthLevel:E,compressorLevel:C}=this.props;this.effectsChain=r.createGain(),this.masterVolumeNode=r.createGain(),this.masterVolumeNode.gain.value=a,this.bassNode=r.createBiquadFilter(),this.midNode=r.createBiquadFilter(),this.trebleNode=r.createBiquadFilter(),this.bassNode.type="lowshelf",this.bassNode.frequency.value=320,this.bassNode.gain.value=s.bass,this.midNode.type="peaking",this.midNode.frequency.value=1e3,this.midNode.Q.value=1,this.midNode.gain.value=s.mid,this.trebleNode.type="highshelf",this.trebleNode.frequency.value=3200,this.trebleNode.gain.value=s.treble,this.distortionNode=r.createWaveShaper(),this.distortionNode.curve=this.makeDistortionCurve(0),this.distortionNode.oversample="4x",this.distortionDryGain=r.createGain(),this.distortionWetGain=r.createGain(),this.distortionMixNode=r.createGain(),this.bitcrusherNode=r.createWaveShaper(),this.bitcrusherNode.curve=this.makeBitcrusherCurve(16),this.bitcrusherDryGain=r.createGain(),this.bitcrusherWetGain=r.createGain(),this.bitcrusherMixNode=r.createGain(),this.phaserAllPass1=r.createBiquadFilter(),this.phaserAllPass2=r.createBiquadFilter(),this.phaserAllPass3=r.createBiquadFilter(),this.phaserAllPass4=r.createBiquadFilter(),[this.phaserAllPass1,this.phaserAllPass2,this.phaserAllPass3,this.phaserAllPass4].forEach(j=>{j.type="allpass",j.frequency.value=1e3}),this.phaserLFO=r.createOscillator(),this.phaserLFO.frequency.value=.5,this.phaserLFO.type="sine",this.phaserLFOGain=r.createGain(),this.phaserLFOGain.gain.value=800,this.phaserDryGain=r.createGain(),this.phaserWetGain=r.createGain(),this.phaserMixNode=r.createGain(),this.phaserLFO.connect(this.phaserLFOGain),this.phaserLFOGain.connect(this.phaserAllPass1.frequency),this.phaserLFOGain.connect(this.phaserAllPass2.frequency),this.phaserLFOGain.connect(this.phaserAllPass3.frequency),this.phaserLFOGain.connect(this.phaserAllPass4.frequency),this.phaserLFO.start(),this.flangerDelayNode=r.createDelay(.02),this.flangerDelayNode.delayTime.value=.005,this.flangerLFO=r.createOscillator(),this.flangerLFO.frequency.value=.5,this.flangerLFO.type="sine",this.flangerLFOGain=r.createGain(),this.flangerLFOGain.gain.value=.003,this.flangerFeedbackGain=r.createGain(),this.flangerFeedbackGain.gain.value=.5,this.flangerDryGain=r.createGain(),this.flangerWetGain=r.createGain(),this.flangerMixNode=r.createGain(),this.flangerLFO.connect(this.flangerLFOGain),this.flangerLFOGain.connect(this.flangerDelayNode.delayTime),this.flangerDelayNode.connect(this.flangerFeedbackGain),this.flangerFeedbackGain.connect(this.flangerDelayNode),this.flangerLFO.start(),this.ringModGain=r.createGain(),this.ringModGain.gain.value=0,this.ringModOscillator=r.createOscillator(),this.ringModOscillator.frequency.value=100,this.ringModOscillator.type="sine",this.ringModDryGain=r.createGain(),this.ringModWetGain=r.createGain(),this.ringModMixNode=r.createGain(),this.ringModOscillator.connect(this.ringModGain.gain),this.ringModOscillator.start(),this.autoFilterNode=r.createBiquadFilter(),this.autoFilterNode.type="lowpass",this.autoFilterNode.frequency.value=2e3,this.autoFilterNode.Q.value=5,this.autoFilterLFO=r.createOscillator(),this.autoFilterLFO.frequency.value=2,this.autoFilterLFO.type="sine",this.autoFilterLFOGain=r.createGain(),this.autoFilterLFOGain.gain.value=1500,this.autoFilterDryGain=r.createGain(),this.autoFilterWetGain=r.createGain(),this.autoFilterMixNode=r.createGain(),this.autoFilterLFO.connect(this.autoFilterLFOGain),this.autoFilterLFOGain.connect(this.autoFilterNode.frequency),this.autoFilterLFO.start(),this.tremoloGain=r.createGain(),this.tremoloGain.gain.value=1,this.tremoloLFO=r.createOscillator(),this.tremoloLFO.frequency.value=5,this.tremoloLFO.type="sine",this.tremoloLFOGain=r.createGain(),this.tremoloLFOGain.gain.value=0,this.tremoloDryGain=r.createGain(),this.tremoloWetGain=r.createGain(),this.tremoloMixNode=r.createGain(),this.tremoloLFO.connect(this.tremoloLFOGain),this.tremoloLFOGain.connect(this.tremoloGain.gain),this.tremoloLFO.start(),this.stereoWidthSplitter=r.createChannelSplitter(2),this.stereoWidthMerger=r.createChannelMerger(2),this.stereoWidthDelayL=r.createDelay(.03),this.stereoWidthDelayR=r.createDelay(.03),this.stereoWidthDelayL.delayTime.value=0,this.stereoWidthDelayR.delayTime.value=.02,this.stereoWidthDryGain=r.createGain(),this.stereoWidthWetGain=r.createGain(),this.stereoWidthMixNode=r.createGain(),this.compressorNode=r.createDynamicsCompressor(),this.compressorNode.threshold.value=-24,this.compressorNode.knee.value=30,this.compressorNode.ratio.value=12,this.compressorNode.attack.value=.003,this.compressorNode.release.value=.25,this.compressorDryGain=r.createGain(),this.compressorWetGain=r.createGain(),this.compressorMixNode=r.createGain(),this.chorusDelayNode=r.createDelay(.05),this.chorusDelayNode.delayTime.value=.015,this.chorusLFO=r.createOscillator(),this.chorusLFO.frequency.value=1.5,this.chorusLFO.type="sine",this.chorusLFOGain=r.createGain(),this.chorusLFOGain.gain.value=.005,this.chorusDryGain=r.createGain(),this.chorusWetGain=r.createGain(),this.chorusMixNode=r.createGain(),this.chorusLFO.connect(this.chorusLFOGain),this.chorusLFOGain.connect(this.chorusDelayNode.delayTime),this.chorusLFO.start(),this.delayNode=r.createDelay(1),this.delayNode.delayTime.value=.3,this.delayFeedbackGain=r.createGain(),this.delayFeedbackGain.gain.value=.4,this.delayDryGain=r.createGain(),this.delayWetGain=r.createGain(),this.delayMixNode=r.createGain(),this.delayNode.connect(this.delayFeedbackGain),this.delayFeedbackGain.connect(this.delayNode),this.convolverNode=r.createConvolver(),this.wetGainNode=r.createGain(),this.dryGainNode=r.createGain(),this.convolverNode.buffer=this.generateImpulseResponse(r),this.effectsChain.connect(this.masterVolumeNode),this.masterVolumeNode.connect(this.bassNode),this.bassNode.connect(this.midNode),this.midNode.connect(this.trebleNode),this.trebleNode.connect(this.distortionDryGain),this.trebleNode.connect(this.distortionNode),this.distortionNode.connect(this.distortionWetGain),this.distortionDryGain.connect(this.distortionMixNode),this.distortionWetGain.connect(this.distortionMixNode),this.distortionMixNode.connect(this.bitcrusherDryGain),this.distortionMixNode.connect(this.bitcrusherNode),this.bitcrusherNode.connect(this.bitcrusherWetGain),this.bitcrusherDryGain.connect(this.bitcrusherMixNode),this.bitcrusherWetGain.connect(this.bitcrusherMixNode),this.bitcrusherMixNode.connect(this.phaserDryGain),this.bitcrusherMixNode.connect(this.phaserAllPass1),this.phaserAllPass1.connect(this.phaserAllPass2),this.phaserAllPass2.connect(this.phaserAllPass3),this.phaserAllPass3.connect(this.phaserAllPass4),this.phaserAllPass4.connect(this.phaserWetGain),this.phaserDryGain.connect(this.phaserMixNode),this.phaserWetGain.connect(this.phaserMixNode),this.phaserMixNode.connect(this.flangerDryGain),this.phaserMixNode.connect(this.flangerDelayNode),this.flangerDelayNode.connect(this.flangerWetGain),this.flangerDryGain.connect(this.flangerMixNode),this.flangerWetGain.connect(this.flangerMixNode),this.flangerMixNode.connect(this.ringModDryGain),this.flangerMixNode.connect(this.ringModGain),this.ringModGain.connect(this.ringModWetGain),this.ringModDryGain.connect(this.ringModMixNode),this.ringModWetGain.connect(this.ringModMixNode),this.ringModMixNode.connect(this.autoFilterDryGain),this.ringModMixNode.connect(this.autoFilterNode),this.autoFilterNode.connect(this.autoFilterWetGain),this.autoFilterDryGain.connect(this.autoFilterMixNode),this.autoFilterWetGain.connect(this.autoFilterMixNode),this.autoFilterMixNode.connect(this.tremoloDryGain),this.autoFilterMixNode.connect(this.tremoloGain),this.tremoloGain.connect(this.tremoloWetGain),this.tremoloDryGain.connect(this.tremoloMixNode),this.tremoloWetGain.connect(this.tremoloMixNode),this.tremoloMixNode.connect(this.chorusDryGain),this.tremoloMixNode.connect(this.chorusDelayNode),this.chorusDelayNode.connect(this.chorusWetGain),this.chorusDryGain.connect(this.chorusMixNode),this.chorusWetGain.connect(this.chorusMixNode),this.chorusMixNode.connect(this.delayDryGain),this.chorusMixNode.connect(this.delayNode),this.delayNode.connect(this.delayWetGain),this.delayDryGain.connect(this.delayMixNode),this.delayWetGain.connect(this.delayMixNode),this.delayMixNode.connect(this.stereoWidthDryGain),this.delayMixNode.connect(this.stereoWidthSplitter),this.stereoWidthSplitter.connect(this.stereoWidthDelayL,0),this.stereoWidthSplitter.connect(this.stereoWidthDelayR,1),this.stereoWidthDelayL.connect(this.stereoWidthMerger,0,0),this.stereoWidthDelayR.connect(this.stereoWidthMerger,0,1),this.stereoWidthMerger.connect(this.stereoWidthWetGain),this.stereoWidthDryGain.connect(this.stereoWidthMixNode),this.stereoWidthWetGain.connect(this.stereoWidthMixNode),this.stereoWidthMixNode.connect(this.compressorDryGain),this.stereoWidthMixNode.connect(this.compressorNode),this.compressorNode.connect(this.compressorWetGain),this.compressorDryGain.connect(this.compressorMixNode),this.compressorWetGain.connect(this.compressorMixNode),this.compressorMixNode.connect(this.dryGainNode),this.compressorMixNode.connect(this.convolverNode),this.convolverNode.connect(this.wetGainNode),this.dryGainNode.connect(r.destination),this.wetGainNode.connect(r.destination),this.updateReverbMix(i),this.updateChorusMix(c),this.updateDelayMix(d),this.updateDistortionMix(h),this.updateBitcrusherMix(m),this.updatePhaserMix(p),this.updateFlangerMix(g),this.updateRingModMix(y),this.updateAutoFilterMix(b),this.updateTremoloMix(w),this.updateStereoWidthMix(E),this.updateCompressorMix(C)},this.makeDistortionCurve=r=>{const i=new Float32Array(44100),a=Math.PI/180,c=r*100;for(let d=0;d<44100;d++){const h=d*2/44100-1;i[d]=(3+c)*h*20*a/(Math.PI+c*Math.abs(h))}return i},this.makeBitcrusherCurve=r=>{const i=new Float32Array(65536),a=Math.pow(.5,r);for(let c=0;c<65536;c++){const d=c*2/65536-1;i[c]=a*Math.floor(d/a+.5)}return i},this.generateImpulseResponse=r=>{const s=r.sampleRate,i=3,a=1.5,c=r.createBuffer(2,i*s,s);for(let d=0;d<2;d++){const h=c.getChannelData(d);for(let m=0;m<c.length;m++){const p=m/c.length,g=Math.sin(p*Math.PI*20)*Math.exp(-p*3),y=(Math.random()*2-1)*Math.pow(1-p,a),b=Math.sin(p*Math.PI*100)*.1*Math.exp(-p*8);h[m]=(g*.3+y*.6+b*.1)*1.5,d===1&&(h[m]*=1+Math.sin(p*Math.PI*7)*.2)}}return c},this.updateReverbMix=r=>{const s=this.props.audioContext.currentTime,i=Math.pow(r,.7)*1.2,a=1-r*.6;this.dryGainNode.gain.setValueAtTime(a,s),this.wetGainNode.gain.setValueAtTime(i,s)},this.updateChorusMix=r=>{const s=this.props.audioContext.currentTime,i=r*.8,a=1-r*.3;this.chorusDryGain.gain.setValueAtTime(a,s),this.chorusWetGain.gain.setValueAtTime(i,s)},this.updateDelayMix=r=>{const s=this.props.audioContext.currentTime,i=r*.6,a=1-r*.2;this.delayDryGain.gain.setValueAtTime(a,s),this.delayWetGain.gain.setValueAtTime(i,s)},this.updateDistortionMix=r=>{const s=this.props.audioContext.currentTime;this.distortionNode.curve=this.makeDistortionCurve(r);const i=r,a=1-r*.7;this.distortionDryGain.gain.setValueAtTime(a,s),this.distortionWetGain.gain.setValueAtTime(i,s)},this.updateBitcrusherMix=r=>{const s=this.props.audioContext.currentTime,i=Math.floor(16-r*12);this.bitcrusherNode.curve=this.makeBitcrusherCurve(i);const a=r,c=1-r*.8;this.bitcrusherDryGain.gain.setValueAtTime(c,s),this.bitcrusherWetGain.gain.setValueAtTime(a,s)},this.updatePhaserMix=r=>{const s=this.props.audioContext.currentTime,i=r*.7,a=1-r*.3;this.phaserDryGain.gain.setValueAtTime(a,s),this.phaserWetGain.gain.setValueAtTime(i,s)},this.updateFlangerMix=r=>{const s=this.props.audioContext.currentTime,i=r*.8,a=1-r*.4;this.flangerDryGain.gain.setValueAtTime(a,s),this.flangerWetGain.gain.setValueAtTime(i,s)},this.updateRingModMix=r=>{const s=this.props.audioContext.currentTime,i=50+r*300;this.ringModOscillator.frequency.setValueAtTime(i,s);const a=r,c=1-r*.6;this.ringModDryGain.gain.setValueAtTime(c,s),this.ringModWetGain.gain.setValueAtTime(a,s)},this.updateAutoFilterMix=r=>{const s=this.props.audioContext.currentTime,i=r,a=1-r*.5;this.autoFilterDryGain.gain.setValueAtTime(a,s),this.autoFilterWetGain.gain.setValueAtTime(i,s)},this.updateTremoloMix=r=>{const s=this.props.audioContext.currentTime;this.tremoloLFOGain.gain.setValueAtTime(r*.5,s);const i=r,a=1-r*.3;this.tremoloDryGain.gain.setValueAtTime(a,s),this.tremoloWetGain.gain.setValueAtTime(i,s)},this.updateStereoWidthMix=r=>{const s=this.props.audioContext.currentTime,i=r*.015;this.stereoWidthDelayR.delayTime.setValueAtTime(i,s);const a=r,c=1-r*.5;this.stereoWidthDryGain.gain.setValueAtTime(c,s),this.stereoWidthWetGain.gain.setValueAtTime(a,s)},this.updateCompressorMix=r=>{const s=this.props.audioContext.currentTime,i=-50+r*26,a=1+r*11;this.compressorNode.threshold.setValueAtTime(i,s),this.compressorNode.ratio.setValueAtTime(a,s);const c=r,d=1-r*.4;this.compressorDryGain.gain.setValueAtTime(d,s),this.compressorWetGain.gain.setValueAtTime(c,s)},this.updateVolume=r=>{const s=this.props.audioContext.currentTime;this.masterVolumeNode.gain.setValueAtTime(r,s)},this.loadInstrument=r=>{this.setState({instrument:null}),zw.instrument(this.props.audioContext,r,{format:this.props.format,soundfont:this.props.soundfont,nameToUrl:(s,i,a)=>`${this.props.hostname}/${i}/${s}-${a}.js`,destination:this.effectsChain}).then(s=>{this.setState({instrument:s}),this.props.onLoad&&this.props.onLoad({playNote:this.playNote,stopNote:this.stopNote,stopAllNotes:this.stopAllNotes})})},this.playNote=r=>{this.resumeAudio().then(()=>{if(!this.state.instrument)return;const s=this.state.instrument.play(r.toString());this.setState(i=>({activeAudioNodes:{...i.activeAudioNodes,[r]:s}}))})},this.stopNote=r=>{this.resumeAudio().then(()=>{const s=this.state.activeAudioNodes[r];s&&(s.stop(),this.setState(i=>{const a={...i.activeAudioNodes};return delete a[r],{activeAudioNodes:a}}))})},this.resumeAudio=()=>this.props.audioContext.state==="suspended"?this.props.audioContext.resume():Promise.resolve(),this.stopAllNotes=()=>{this.resumeAudio().then(()=>{Object.values(this.state.activeAudioNodes).forEach(r=>{r&&r.stop()}),this.setState({activeAudioNodes:{}})})},this.state={activeAudioNodes:{},instrument:null},this.setupAudioChain()}componentDidMount(){this.loadInstrument(this.props.instrumentName)}componentDidUpdate(n){if(n.instrumentName!==this.props.instrumentName&&this.loadInstrument(this.props.instrumentName),JSON.stringify(n.eq)!==JSON.stringify(this.props.eq)){const r=this.props.audioContext.currentTime;this.bassNode.gain.setValueAtTime(this.props.eq.bass,r),this.midNode.gain.setValueAtTime(this.props.eq.mid,r),this.trebleNode.gain.setValueAtTime(this.props.eq.treble,r)}n.reverbLevel!==this.props.reverbLevel&&this.updateReverbMix(this.props.reverbLevel),n.volume!==this.props.volume&&this.updateVolume(this.props.volume),n.chorusLevel!==this.props.chorusLevel&&this.updateChorusMix(this.props.chorusLevel),n.delayLevel!==this.props.delayLevel&&this.updateDelayMix(this.props.delayLevel),n.distortionLevel!==this.props.distortionLevel&&this.updateDistortionMix(this.props.distortionLevel),n.bitcrusherLevel!==this.props.bitcrusherLevel&&this.updateBitcrusherMix(this.props.bitcrusherLevel),n.phaserLevel!==this.props.phaserLevel&&this.updatePhaserMix(this.props.phaserLevel),n.flangerLevel!==this.props.flangerLevel&&this.updateFlangerMix(this.props.flangerLevel),n.ringModLevel!==this.props.ringModLevel&&this.updateRingModMix(this.props.ringModLevel),n.autoFilterLevel!==this.props.autoFilterLevel&&this.updateAutoFilterMix(this.props.autoFilterLevel),n.tremoloLevel!==this.props.tremoloLevel&&this.updateTremoloMix(this.props.tremoloLevel),n.stereoWidthLevel!==this.props.stereoWidthLevel&&this.updateStereoWidthMix(this.props.stereoWidthLevel),n.compressorLevel!==this.props.compressorLevel&&this.updateCompressorMix(this.props.compressorLevel)}render(){return this.props.render?this.props.render({isLoading:!this.state.instrument,playNote:this.playNote,stopNote:this.stopNote,stopAllNotes:this.stopAllNotes}):null}};Nf.defaultProps={format:"mp3",soundfont:"MusyngKite",instrumentName:"acoustic_grand_piano",eq:{bass:0,mid:0,treble:0},reverbLevel:0,volume:.8,chorusLevel:0,delayLevel:0,distortionLevel:0,bitcrusherLevel:0,phaserLevel:0,flangerLevel:0,ringModLevel:0,autoFilterLevel:0,tremoloLevel:0,stereoWidthLevel:0,compressorLevel:0};let dd=Nf;const qp=typeof window<"u"?new(window.AudioContext||window.webkitAudioContext):null,Ww=4,Hw=7,qw=({hideConfigControls:e=!1})=>{const n=Qe($=>$.normalizedScaleNotes),r=ar($=>$.pianoSettings),s=ar($=>$.availableInstruments),i=ar($=>$.setAvailableInstruments),a=Re($=>$.activeNotes),c=Re($=>$.activeChordIndex),d=Re($=>$.addedChords),h=lt($=>$.currentlyActivePattern),m=lt($=>$.globalPatternState),p="https://d1pzp51pvbm36p.cloudfront.net",g=N.useRef(null),[y,b]=N.useState([]),w=N.useRef(-1),E=N.useRef(null),C=N.useRef(null),[j,P]=N.useState(500),A=N.useMemo(()=>{const $=j;return $<400?Math.max(320,$-40):$<768?Math.min(600,$-60):$<1200?Math.min(800,$-80):Math.min(1e3,$-100)},[j]),D=N.useMemo(()=>{let $;return()=>{clearTimeout($),$=window.setTimeout(()=>{C.current&&P(C.current.offsetWidth)},100)}},[]);N.useEffect(()=>{C.current&&P(C.current.offsetWidth);const $=new ResizeObserver(()=>{D()});return C.current&&$.observe(C.current),window.addEventListener("resize",D),()=>{$.disconnect(),window.removeEventListener("resize",D)}},[D]);const{firstNote:k,lastNote:R,keyboardShortcuts:O,midiOffset:M}=N.useMemo(()=>{const $="c",_=Na($,Ww),I=Na($,Hw),L=r.octaveOffset*12;return{firstNote:_,lastNote:I,midiOffset:L,keyboardShortcuts:vp.create({firstNote:_,lastNote:I,keyboardConfig:vp.HOME_ROW})}},[r.octaveOffset]),[q,te]=N.useState({instrumentName:r.instrumentName});N.useEffect(()=>{te($=>({...$,instrumentName:r.instrumentName}))},[r.instrumentName]),N.useEffect(()=>{if(E.current&&(clearTimeout(E.current),E.current=null),!m.isPlaying&&a.length>0){const $=a.map(({note:_,octave:I=4})=>Na(_,I));b($),E.current=setTimeout(()=>{m.isPlaying||b([])},2e3)}else!m.isPlaying&&a.length===0&&b([]);return()=>{E.current&&(clearTimeout(E.current),E.current=null)}},[a,m.isPlaying]);const oe=N.useCallback(()=>c!==null&&d[c]?d[c].pattern:h,[c,d,h]),Z=N.useCallback(($,_)=>{if($==="x"||$==="X")return null;const I=$.includes("+"),L=$.includes("-"),G=parseInt($.replace(/[+-]/g,""))-1;return G>=0&&G<_?{noteIndex:G,octaveUp:I,octaveDown:L}:null},[]),Q=N.useCallback(()=>6e4/m.bpm*m.subdivision,[m.bpm,m.subdivision]);N.useEffect(()=>{const $=oe();if(m.isPlaying&&a.length>0&&$?.length>0&&m.currentStep!==w.current){w.current=m.currentStep;const _=m.currentStep%$.length,I=$[_],L=Z(I,a.length);if(L){const{noteIndex:G,octaveUp:ee,octaveDown:ue}=L,{note:fe,octave:Ee=4}=a[G];let pe=Ee;ee&&(pe+=1),ue&&(pe-=1),pe=Math.max(1,Math.min(8,pe));const Ne=Na(fe,pe);!r.cutOffPreviousNotes&&g.current&&g.current(),b([Ne]);const be=Q(),nt=Math.min(be*r.noteDuration,be-50);setTimeout(()=>{b([])},nt)}else b([])}else m.isPlaying||w.current!==-1&&(b([]),w.current=-1)},[m.currentStep,m.isPlaying,a,r.cutOffPreviousNotes,r.noteDuration,Q,oe,Z]);const se=N.useCallback($=>_=>{!r.cutOffPreviousNotes&&g.current&&g.current(),$(_+M)},[r.cutOffPreviousNotes,M]),K=N.useCallback($=>_=>{$(_+M)},[M]),J=N.useCallback(({midiNumber:$,isAccidental:_})=>{const I=mn.getAttributes($).note.slice(0,-1);return n.includes(Vr(I))?u.jsx("div",{className:`mx-auto mb-2 w-2 h-2 rounded-full ${_?"bg-[var(--mcb-accent-text-secondary)]":"bg-[var(--mcb-accent-text-primary)]"}`}):null},[n]),re=N.useMemo(()=>({instrumentName:r.instrumentName,audioContext:qp,hostname:p,eq:r.eq,reverbLevel:r.reverbLevel,volume:r.volume,chorusLevel:r.chorusLevel,delayLevel:r.delayLevel,distortionLevel:r.distortionLevel,bitcrusherLevel:r.bitcrusherLevel,phaserLevel:r.phaserLevel,flangerLevel:r.flangerLevel,ringModLevel:r.ringModLevel,autoFilterLevel:r.autoFilterLevel,tremoloLevel:r.tremoloLevel,stereoWidthLevel:r.stereoWidthLevel,compressorLevel:r.compressorLevel}),[r]),W=N.useCallback($=>{$&&$.length>0&&$!==s&&(console.log("Loading instruments:",$.length),i($))},[s,i]);return qp?u.jsxs(u.Fragment,{children:[u.jsx(ud,{hostname:p,render:W}),u.jsx(dd,{...re,render:({isLoading:$,playNote:_,stopNote:I,stopAllNotes:L})=>(g.current=L,u.jsx("div",{ref:C,className:"relative w-full",children:u.jsx("div",{className:"w-full flex justify-center overflow-x-auto",children:u.jsx(Md,{noteRange:{first:k,last:R},playNote:se(_),stopNote:K(I),disabled:$,width:A,className:"mx-auto w-full",activeNotes:y,renderNoteLabel:J})})}))})]}):u.jsx("div",{children:"Audio context is not available."})},Kw="modulepreload",Yw=function(e){return"/"+e},Kp={},Qw=function(n,r,s){let i=Promise.resolve();if(r&&r.length>0){let h=function(m){return Promise.all(m.map(p=>Promise.resolve(p).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),d=c?.nonce||c?.getAttribute("nonce");i=h(r.map(m=>{if(m=Yw(m),m in Kp)return;Kp[m]=!0;const p=m.endsWith(".css"),g=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${g}`))return;const y=document.createElement("link");if(y.rel=p?"stylesheet":Kw,p||(y.as="script"),y.crossOrigin="",y.href=m,d&&y.setAttribute("nonce",d),document.head.appendChild(y),p)return new Promise((b,w)=>{y.addEventListener("load",b),y.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${m}`)))})}))}function a(c){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=c,window.dispatchEvent(d),!d.defaultPrevented)throw c}return i.then(c=>{for(const d of c||[])d.status==="rejected"&&a(d.reason);return n().catch(a)})};var yu,Yp;function Kv(){if(Yp)return yu;Yp=1;function e(n){var r=typeof n;return n!=null&&(r=="object"||r=="function")}return yu=e,yu}var xu,Qp;function Xw(){if(Qp)return xu;Qp=1;var e=typeof Ur=="object"&&Ur&&Ur.Object===Object&&Ur;return xu=e,xu}var bu,Xp;function Yv(){if(Xp)return bu;Xp=1;var e=Xw(),n=typeof self=="object"&&self&&self.Object===Object&&self,r=e||n||Function("return this")();return bu=r,bu}var Nu,Jp;function Jw(){if(Jp)return Nu;Jp=1;var e=Yv(),n=function(){return e.Date.now()};return Nu=n,Nu}var wu,Zp;function Zw(){if(Zp)return wu;Zp=1;var e=/\s/;function n(r){for(var s=r.length;s--&&e.test(r.charAt(s)););return s}return wu=n,wu}var Cu,eg;function eC(){if(eg)return Cu;eg=1;var e=Zw(),n=/^\s+/;function r(s){return s&&s.slice(0,e(s)+1).replace(n,"")}return Cu=r,Cu}var Su,tg;function Qv(){if(tg)return Su;tg=1;var e=Yv(),n=e.Symbol;return Su=n,Su}var Eu,ng;function tC(){if(ng)return Eu;ng=1;var e=Qv(),n=Object.prototype,r=n.hasOwnProperty,s=n.toString,i=e?e.toStringTag:void 0;function a(c){var d=r.call(c,i),h=c[i];try{c[i]=void 0;var m=!0}catch{}var p=s.call(c);return m&&(d?c[i]=h:delete c[i]),p}return Eu=a,Eu}var Du,rg;function nC(){if(rg)return Du;rg=1;var e=Object.prototype,n=e.toString;function r(s){return n.call(s)}return Du=r,Du}var ju,og;function rC(){if(og)return ju;og=1;var e=Qv(),n=tC(),r=nC(),s="[object Null]",i="[object Undefined]",a=e?e.toStringTag:void 0;function c(d){return d==null?d===void 0?i:s:a&&a in Object(d)?n(d):r(d)}return ju=c,ju}var Au,sg;function oC(){if(sg)return Au;sg=1;function e(n){return n!=null&&typeof n=="object"}return Au=e,Au}var ku,ig;function sC(){if(ig)return ku;ig=1;var e=rC(),n=oC(),r="[object Symbol]";function s(i){return typeof i=="symbol"||n(i)&&e(i)==r}return ku=s,ku}var Iu,ag;function iC(){if(ag)return Iu;ag=1;var e=eC(),n=Kv(),r=sC(),s=NaN,i=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,c=/^0o[0-7]+$/i,d=parseInt;function h(m){if(typeof m=="number")return m;if(r(m))return s;if(n(m)){var p=typeof m.valueOf=="function"?m.valueOf():m;m=n(p)?p+"":p}if(typeof m!="string")return m===0?m:+m;m=e(m);var g=a.test(m);return g||c.test(m)?d(m.slice(2),g?2:8):i.test(m)?s:+m}return Iu=h,Iu}var Pu,lg;function aC(){if(lg)return Pu;lg=1;var e=Kv(),n=Jw(),r=iC(),s="Expected a function",i=Math.max,a=Math.min;function c(d,h,m){var p,g,y,b,w,E,C=0,j=!1,P=!1,A=!0;if(typeof d!="function")throw new TypeError(s);h=r(h)||0,e(m)&&(j=!!m.leading,P="maxWait"in m,y=P?i(r(m.maxWait)||0,h):y,A="trailing"in m?!!m.trailing:A);function D(Q){var se=p,K=g;return p=g=void 0,C=Q,b=d.apply(K,se),b}function k(Q){return C=Q,w=setTimeout(M,h),j?D(Q):b}function R(Q){var se=Q-E,K=Q-C,J=h-se;return P?a(J,y-K):J}function O(Q){var se=Q-E,K=Q-C;return E===void 0||se>=h||se<0||P&&K>=y}function M(){var Q=n();if(O(Q))return q(Q);w=setTimeout(M,R(Q))}function q(Q){return w=void 0,A&&p?D(Q):(p=g=void 0,b)}function te(){w!==void 0&&clearTimeout(w),C=0,p=E=g=w=void 0}function oe(){return w===void 0?b:q(n())}function Z(){var Q=n(),se=O(Q);if(p=arguments,g=this,E=Q,se){if(w===void 0)return k(E);if(P)return clearTimeout(w),w=setTimeout(M,h),D(E)}return w===void 0&&(w=setTimeout(M,h)),b}return Z.cancel=te,Z.flush=oe,Z}return Pu=c,Pu}var lC=aC();const cC=br(lC);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uC=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),dC=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(n,r,s)=>s?s.toUpperCase():r.toLowerCase()),cg=e=>{const n=dC(e);return n.charAt(0).toUpperCase()+n.slice(1)},Xv=(...e)=>e.filter((n,r,s)=>!!n&&n.trim()!==""&&s.indexOf(n)===r).join(" ").trim(),fC=e=>{for(const n in e)if(n.startsWith("aria-")||n==="role"||n==="title")return!0};/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var hC={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mC=N.forwardRef(({color:e="currentColor",size:n=24,strokeWidth:r=2,absoluteStrokeWidth:s,className:i="",children:a,iconNode:c,...d},h)=>N.createElement("svg",{ref:h,...hC,width:n,height:n,stroke:e,strokeWidth:s?Number(r)*24/Number(n):r,className:Xv("lucide",i),...!a&&!fC(d)&&{"aria-hidden":"true"},...d},[...c.map(([m,p])=>N.createElement(m,p)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jv=(e,n)=>{const r=N.forwardRef(({className:s,...i},a)=>N.createElement(mC,{ref:a,iconNode:n,className:Xv(`lucide-${uC(cg(e))}`,`lucide-${e}`,s),...i}));return r.displayName=cg(e),r};/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pC=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],gC=Jv("chevron-down",pC);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vC=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],yC=Jv("search",vC);var xr=Iv();const xC=br(xr),sr=({value:e,onChange:n,options:r,className:s="",menuClassName:i="",showSearch:a=!1,buttonClassName:c=""})=>{const[d,h]=N.useState(!1),[m,p]=N.useState(!1),[g,y]=N.useState(""),b=N.useRef(null),w=N.useRef(null),E=N.useRef(null),C=N.useRef(null),[j,P]=N.useState({top:0,left:0,width:0,maxHeight:320}),A=r.filter(O=>g?.length?O.toLowerCase().includes(g.toLowerCase()):!0),D=()=>{if(b.current){const O=b.current.getBoundingClientRect(),M=window.innerHeight-O.bottom,q=Math.min(M-10,320);P({top:O.bottom+window.scrollY,left:O.left+window.scrollX,width:O.width,maxHeight:q}),p(!0)}};N.useEffect(()=>{const O=q=>{b.current&&!b.current.contains(q.target)&&w.current&&!w.current.contains(q.target)&&(h(!1),y(""),p(!1))},M=q=>{q.key==="Escape"&&(h(!1),y(""),p(!1))};return d&&(document.addEventListener("mousedown",O),document.addEventListener("keydown",M)),()=>{document.removeEventListener("mousedown",O),document.removeEventListener("keydown",M)}},[d]),N.useEffect(()=>{d&&m&&C.current&&E.current&&C.current.scrollIntoView({block:"nearest",behavior:"instant"})},[d,m]);const k=()=>{d?(h(!1),p(!1)):(D(),requestAnimationFrame(()=>{h(!0)}))},R=O=>{n(O),h(!1),y(""),p(!1)};return u.jsxs("div",{className:`relative inline-block text-left text-lg ${s}`,children:[u.jsxs("button",{ref:b,onClick:k,className:`
          inline-flex w-full justify-between items-center gap-x-2 rounded-lg
          bg-mcb-secondary border
          px-4 py-2.5 text-sm font-medium
          text-mcb-primary 
          ${d?"border-[var(--mcb-accent-primary)] bg-mcb-hover":"border-mcb-primary hover:bg-mcb-hover hover:border-mcb-secondary"}
          focus:outline-none focus:ring-2 focus:ring-[var(--mcb-accent-primary)]/50 focus:ring-offset-2 focus:ring-offset-[#2a2f38]
          transition-all duration-200 ease-out
          ${c.includes("h-")?"":"h-10"}
          ${c}
        `,children:[u.jsx("span",{className:"truncate text-left flex-1 font-medium tracking-wide",children:e}),u.jsx(gC,{className:`
            h-4 w-4 text-mcb-tertiary flex-shrink-0
            transition-all duration-200
            ${d?"rotate-180 text-mcb-primary":"group-hover:text-mcb-primary"}
          `,"aria-hidden":"true"})]}),d&&m&&xr.createPortal(u.jsx("div",{ref:w,style:{position:"absolute",top:`${j.top+4}px`,left:`${j.left}px`,minWidth:`${j.width}px`,maxWidth:`${j.width}px`,zIndex:9999},className:"origin-top dropdown-enter",children:u.jsx("div",{style:{maxHeight:`${j.maxHeight}px`,minWidth:`${j.width}px`},className:"dropdown-menu rounded-lg shadow-2xl ring-1 ring-black/30 overflow-hidden",children:u.jsxs("div",{className:"bg-mcb-secondary border border-mcb-primary rounded-lg overflow-hidden shadow-2xl",children:[a&&u.jsx("div",{className:"p-3 border-b border-mcb-primary bg-mcb-tertiary",children:u.jsxs("div",{className:"relative",children:[u.jsx(yC,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-mcb-tertiary"}),u.jsx("input",{type:"text",className:`w-full text-mcb-primary pl-9 pr-3 py-2 text-sm font-normal 
                        bg-mcb-primary border border-mcb-primary rounded-md 
                        focus:outline-none focus:ring-2 focus:ring-[var(--mcb-accent-primary)]/50 focus:border-[var(--mcb-accent-primary)] 
                        placeholder-[var(--mcb-text-disabled)] 
                        transition-all duration-200
                        hover:bg-[#333844] hover:border-mcb-secondary`,placeholder:"Search options...",value:g,onChange:O=>y(O.target.value),autoFocus:!0})]})}),u.jsx("div",{ref:E,className:`py-1.5 overflow-y-auto ${i}`,style:{maxHeight:a?`${j.maxHeight-60}px`:`${j.maxHeight}px`},children:A.length>0?A.map((O,M)=>u.jsxs("button",{ref:e===O?C:null,onClick:()=>R(O),className:`
                        relative block w-full px-4 py-2.5 text-left text-sm font-medium 
                        transition-all duration-200
                        text-mcb-secondary hover:text-[var(--mcb-text-primary)]
                        hover:bg-mcb-hover
                        border-l-2 border-l-transparent hover:border-l-[var(--mcb-accent-text-primary)]
                      `,children:[u.jsx("span",{className:"relative truncate block tracking-wide",children:O}),e===O&&u.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-1.5 h-1.5 bg-[var(--mcb-accent-text-primary)] rounded-full"})]},M)):u.jsx("div",{className:"px-4 py-3 text-sm text-mcb-disabled italic text-center",children:"No options found"})})]})})}),document.body)]})},U={BASIC:"basic",RHYTHMIC:"rhythmic",ADVANCED:"advanced",GENRE:"genre",CUSTOM:"custom"},ug=[{name:"Up Down",pattern:["1","2","3","4","3","2"],desc:"Classic ascending and descending",icon:"",category:U.BASIC},{name:"Broken Chord",pattern:["1","3","2","4"],desc:"Mixed chord tones",icon:"",category:U.BASIC},{name:"Octave Jump",pattern:["1","1+","1","1+"],desc:"Root note with octave jumps",icon:"",category:U.BASIC},{name:"Waltz",pattern:["1","2","3"],desc:"Three-beat waltz pattern",icon:"",category:U.BASIC},{name:"Alberti Bass",pattern:["1","3","2","3","1","3","2","3"],desc:"Classical broken chord accompaniment",icon:"",category:U.BASIC},{name:"Syncopated",pattern:["x","1","x","2","x","3","1","x"],desc:"Off-beat emphasis",icon:"",category:U.RHYTHMIC},{name:"Staccato",pattern:["1","x","2","x","3","x","4","x"],desc:"Short, detached notes",icon:"",category:U.RHYTHMIC},{name:"Legato Flow",pattern:["1","2","3","4","4","3","2","1"],desc:"Smooth, connected motion",icon:"",category:U.ADVANCED},{name:"Fifth Wheel",pattern:["1","2","3","4","5"],desc:"Simple ascent through 5-note chord",icon:"5",category:U.BASIC},{name:"Pentagon",pattern:["1","3","5","2","4","1"],desc:"Geometric pattern through 5 notes",icon:"",category:U.BASIC},{name:"Five Alive",pattern:["1","5","2","4","3","5","1","x"],desc:"Dynamic 5-note exploration",icon:"",category:U.ADVANCED},{name:"Jazz Walk",pattern:["1","2","3","4","5","4","3","2"],desc:"Walking bass with 5th extension",icon:"",category:U.ADVANCED},{name:"Quintet Roll",pattern:["1","4","2","3","2+","4","5","3"],desc:"Rolled chord with gaps",icon:"",category:U.RHYTHMIC},{name:"High Five",pattern:["1","2+","3","4+","5","1+"],desc:"Mix of regular and high octave notes",icon:"",category:U.ADVANCED},{name:"Hexagon",pattern:["1","2","3","4","5","6"],desc:"Complete 6-note ascent",icon:"",category:U.BASIC},{name:"Six Pack",pattern:["1","6","2","5","3","4"],desc:"Outside-in pattern",icon:"",category:U.ADVANCED},{name:"Jazz Cascade",pattern:["1","3","5","6","4","2","1","x"],desc:"Complex jazz voicing pattern",icon:"",category:U.ADVANCED},{name:"Spiral Six",pattern:["1","4","2","5","3","6","1"],desc:"Spiraling through 6 notes",icon:"",category:U.ADVANCED},{name:"Double Triple",pattern:["1","2","3","4","5","6","6","5","4","3","2","1"],desc:"Up and down through all 6 notes",icon:"",category:U.ADVANCED},{name:"Sixth Sense",pattern:["1","x","3","x","5","x","6","x"],desc:"Selective 6-note chord tones",icon:"",category:U.RHYTHMIC},{name:"Polyrhythm",pattern:["1","x","x","2","x","3","x","x","1","x","3","x"],desc:"Complex rhythmic displacement",icon:"",category:U.RHYTHMIC},{name:"Bounce",pattern:["1","4","1","4","2","3","2","3"],desc:"Bouncing between chord tones",icon:"",category:U.ADVANCED},{name:"Cascade",pattern:["4+","3+","2+","1+","4","3","2","1"],desc:"Waterfall effect across octaves",icon:"",category:U.ADVANCED},{name:"Morse Code",pattern:["1","x","1","1","x","x","1","x","1","1","x"],desc:"Dot-dash rhythm pattern",icon:"",category:U.RHYTHMIC},{name:"Fibonacci",pattern:["1","1","2","3","2","1","3","4"],desc:"Based on Fibonacci sequence",icon:"",category:U.ADVANCED},{name:"Pendulum",pattern:["1","3","2","4","3","1","2","4","3","2"],desc:"Swinging motion through chord",icon:"",category:U.ADVANCED},{name:"Stutter Step",pattern:["1","1","x","2","2","x","3","3","x"],desc:"Repeated notes with rests",icon:"",category:U.RHYTHMIC},{name:"Call Response",pattern:["1","x","x","3","2","x","x","4"],desc:"Question and answer phrases",icon:"",category:U.RHYTHMIC},{name:"Spiral",pattern:["1","2","4","3","1","4","2","3"],desc:"Spiraling chord progression",icon:"",category:U.ADVANCED},{name:"Latin Clave",pattern:["1","x","x","1","x","1","x","x"],desc:"Based on Latin clave rhythm",icon:"",category:U.RHYTHMIC},{name:"Long Journey",pattern:["1","2","x","3","4","x","3","2","1","x","2","3","4","x","x","1"],desc:"Extended 16-step pattern",icon:"",category:U.ADVANCED},{name:"Minimalist",pattern:["1","x","x","x","x","x","x","x"],desc:"Sparse, contemplative",icon:"",category:U.BASIC},{name:"Maximalist",pattern:["1","2","3","4","1+","2+","3+","4+"],desc:"Dense, energetic pattern",icon:"",category:U.ADVANCED},{name:"Ghost Notes",pattern:["1","x","2","x","x","3","x","4","x","x"],desc:"Implied rhythm with spaces",icon:"",category:U.RHYTHMIC},{name:"Power Chord",pattern:["1","1","1+","1+"],desc:"Rock-style power chord emphasis",icon:"",category:U.BASIC},{name:"Bossa Nova",pattern:["1","x","2","x","3","x","4","2"],desc:"Brazilian bossa nova feel",icon:"",category:U.GENRE},{name:"Reggae Skank",pattern:["x","2","x","4","x","2","x","4"],desc:"Reggae upstroke pattern",icon:"",category:U.GENRE},{name:"Tango",pattern:["1","x","2","3","x","x","4","x"],desc:"Dramatic tango rhythm",icon:"",category:U.GENRE},{name:"Swing Feel",pattern:["1","x","3","x","2","x","4","x"],desc:"Jazz swing pattern",icon:"",category:U.GENRE},{name:"Folk Strum",pattern:["1","2","3","2","1","2","3","2"],desc:"Folk guitar strumming pattern",icon:"",category:U.GENRE},{name:"Extended Jazz",pattern:["1","3","5","6","5","3","1","x"],desc:"Jazz chord extensions",icon:"",category:U.ADVANCED},{name:"Full House",pattern:["1","2","3","4","5","6","x","x"],desc:"All chord tones, then rest",icon:"",category:U.BASIC},{name:"Polyrhythmic 6",pattern:["1","x","3","x","5","x","2","x","4","x","6","x"],desc:"Complex 6-note polyrhythm",icon:"",category:U.RHYTHMIC},{name:"Wave Function",pattern:["1","3","5","6","4","2","1","3","5","4","2","x"],desc:"Wave-like motion through extended chord",icon:"",category:U.ADVANCED},{name:"Grand Scale",pattern:["1","2","3","4","5","6","5","4","3","2","1"],desc:"Full scale ascent and descent",icon:"",category:U.BASIC},{name:"Step by Step",pattern:["1","2","1","3","2","4","3","5","4","6","5"],desc:"Gradual stepping pattern",icon:"",category:U.BASIC},{name:"Simple Sixes",pattern:["1","3","5","1","3","5","6","4","2","6","4","2"],desc:"Two three-note groups with extensions",icon:"",category:U.BASIC},{name:"Double Root",pattern:["1","1","2","3","4","1","1"],desc:"Root emphasis with ascent",icon:"",category:U.BASIC},{name:"Neighbor Tones",pattern:["1","2","1","3","2","3","4","3"],desc:"Step-wise neighboring motion",icon:"",category:U.BASIC},{name:"Triad Plus",pattern:["1","3","5","6","1","3","5","4"],desc:"Basic triad with extensions",icon:"",category:U.BASIC},{name:"Full Circle",pattern:["1","2","3","4","5","6","6","5","4","3","2","1","x","x"],desc:"Complete journey up and down",icon:"",category:U.BASIC},{name:"Building Blocks",pattern:["1","1","2","1","2","3","1","2","3","4"],desc:"Gradually building up the chord",icon:"",category:U.BASIC},{name:"Polymetric 5",pattern:["1","x","x","2","x","3","x","x","4","x","5","x","x","1","x"],desc:"Five-note pattern in complex meter",icon:"",category:U.RHYTHMIC},{name:"Shuffle Step",pattern:["1","x","2","3","x","x","4","x","5","6","x","x"],desc:"Shuffle rhythm through extended chord",icon:"",category:U.RHYTHMIC},{name:"Heartbeat",pattern:["1","1","x","x","2","2","x","x","3","3","x","x"],desc:"Pulse-like doubled pattern",icon:"",category:U.RHYTHMIC},{name:"Cross Rhythm",pattern:["1","x","x","2","x","x","3","x","4","x","x","5","x","x","6"],desc:"Pattern crossing metric boundaries",icon:"",category:U.RHYTHMIC},{name:"Breath Mark",pattern:["1","2","3","x","x","4","5","6","x","x","1","2","x","x"],desc:"Groups of notes with breathing spaces",icon:"",category:U.RHYTHMIC},{name:"Displacement",pattern:["x","1","x","2","x","3","1","x","2","x","3","x","4","x"],desc:"Rhythmically displaced chord tones",icon:"",category:U.RHYTHMIC},{name:"Echo Chamber",pattern:["1","x","1","x","x","2","x","2","x","x","3","x","3","x","x"],desc:"Each note echoes with delays",icon:"",category:U.RHYTHMIC},{name:"Odd Meter",pattern:["1","x","2","x","3","x","x","4","x","5","x","6","x","x"],desc:"Seven-beat groupings",icon:"7",category:U.RHYTHMIC},{name:"Metric Modulation",pattern:["1","2","x","3","4","x","x","5","6","x","1","x","x","2","x"],desc:"Changing rhythmic emphasis",icon:"",category:U.RHYTHMIC},{name:"Chromatic Walk",pattern:["1","2","3","4","5","6","5","4","3","2","1","2","3","4","5","6"],desc:"Extended chromatic voice leading",icon:"",category:U.ADVANCED},{name:"Voice Exchange",pattern:["1","6","2","5","3","4","4","3","5","2","6","1"],desc:"Voices trading positions",icon:"",category:U.ADVANCED},{name:"Nested Loops",pattern:["1","3","5","3","1","4","6","4","2","5","6","5","2","1"],desc:"Loops within loops structure",icon:"",category:U.ADVANCED},{name:"Golden Ratio",pattern:["1","2","3","5","6","4","1","3","5","6","2","4","1"],desc:"Based on mathematical proportions",icon:"",category:U.ADVANCED},{name:"Fractal Pattern",pattern:["1","3","2","1","4","6","5","4","1","3","2","1"],desc:"Self-similar pattern at different scales",icon:"",category:U.ADVANCED},{name:"Intervallic Series",pattern:["1","4","2","5","3","6","1","5","2","6","3","4"],desc:"Systematic interval exploration",icon:"",category:U.ADVANCED},{name:"Orbit",pattern:["1","3","5","2","4","6","3","5","1","4","6","2","5","1","6"],desc:"Circular motion through chord space",icon:"",category:U.ADVANCED},{name:"Double Helix",pattern:["1","6","2","5","3","4","3+","4+","2+","5+","1+","6+","1+"],desc:"Intertwining ascending and descending lines",icon:"",category:U.ADVANCED},{name:"Metamorphosis",pattern:["1","2","1","3","2","4","3","5","4","6","5","6","1+","2+"],desc:"Gradually transforming pattern",icon:"",category:U.ADVANCED},{name:"Tessellation",pattern:["1","3","6","4","2","5","1","4","6","3","2","5"],desc:"Interlocking geometric pattern",icon:"",category:U.ADVANCED},{name:"Prime Number",pattern:["1","x","2","x","x","3","x","x","x","x","5","x","x","x","x","x","x"],desc:"Based on prime number sequence",icon:"",category:U.ADVANCED},{name:"Matrix",pattern:["1","2","3","4+","5+","6+","6","5","4","3+","2+","1+"],desc:"Systematic octave displacement matrix",icon:"",category:U.ADVANCED},{name:"Mandala",pattern:["1","x","3","x","5","x","6","x","4","x","2","x","1","x"],desc:"Symmetric spiritual geometry",icon:"",category:U.ADVANCED},{name:"Infinity Loop",pattern:["1","2","3","4","5","6","5","4","3","2","1","6","5","4","3","2","1"],desc:"Never-ending loop pattern",icon:"",category:U.ADVANCED},{name:"Quantum Jump",pattern:["1","4+","2","5+","x","3","6+","x","1+","4","x","2+","5"],desc:"Unpredictable quantum-like leaps",icon:"",category:U.ADVANCED},{name:"Epic Journey",pattern:["1","2","3","4","5","6","6+","5+","4+","3+","2+","1+","6","5","4","3","2","1","x","x"],desc:"20-step odyssey through all chord tones",icon:"",category:U.ADVANCED},{name:"Full Spectrum",pattern:["1","x","2","x","3","x","4","x","5","x","6","x","1+","x","2+","x","3+","x"],desc:"Complete chord exploration with rests",icon:"",category:U.BASIC},{name:"Polyrhythmic Marathon",pattern:["1","x","x","2","x","3","x","x","4","x","5","x","x","6","x","1+","x","x","2+","x"],desc:"Extended polyrhythmic exploration",icon:"",category:U.RHYTHMIC},{name:"Dimensional Shift",pattern:["1","3","5","1+","3+","5+","6+","4+","2+","6","4","2","1","2","3","4","5","6"],desc:"Moving between octave dimensions",icon:"",category:U.ADVANCED},{name:"Quick Five",pattern:["1","2","3","4","5","1"],desc:"Efficient 5-note exploration",icon:"",category:U.BASIC},{name:"Hex Core",pattern:["1","3","5","2","4","6"],desc:"All 6 notes in compact form",icon:"",category:U.BASIC},{name:"Jazz Snap",pattern:["1","3","6","4","2","5"],desc:"Quick jazz chord exploration",icon:"",category:U.ADVANCED},{name:"Prism",pattern:["1","4","6","3","5","2"],desc:"Light refraction pattern",icon:"",category:U.ADVANCED},{name:"Star Map",pattern:["1","5","2","6","3","4"],desc:"Navigating chord constellation",icon:"",category:U.ADVANCED},{name:"Speed Dial",pattern:["1","2","4","5","6","3"],desc:"Quick access to extended tones",icon:"",category:U.BASIC},{name:"Kaleidoscope",pattern:["1","6","4","2","5","3"],desc:"Shifting colorful pattern",icon:"",category:U.ADVANCED},{name:"Magnetic",pattern:["1","3","5","6","4","2"],desc:"Attraction between chord tones",icon:"",category:U.ADVANCED},{name:"Quantum Six",pattern:["6","1","4","2","5","3"],desc:"Non-linear quantum exploration",icon:"",category:U.ADVANCED},{name:"Crystal",pattern:["1","4","2","5","3","6"],desc:"Crystalline structure pattern",icon:"",category:U.ADVANCED},{name:"Octagon",pattern:["1","2","3","4","5","6","5","4"],desc:"8-sided geometric exploration",icon:"",category:U.BASIC},{name:"Double Helix 6",pattern:["1","6","2","5","3","4","3+","1+"],desc:"DNA-like interweaving pattern",icon:"",category:U.ADVANCED},{name:"Infinity 5",pattern:["1","3","5","4","2","4","5","1"],desc:"Figure-8 through 5 chord tones",icon:"",category:U.ADVANCED},{name:"Compass Rose",pattern:["1","4","6","3","2","5","1","6"],desc:"Navigate all directions",icon:"",category:U.ADVANCED},{name:"Quick March",pattern:["1","2","3","4","5","6","1+","x"],desc:"Military precision through chord",icon:"",category:U.BASIC},{name:"Ripple Effect",pattern:["1","3","5","2","4","6","4","2"],desc:"Waves expanding outward",icon:"",category:U.ADVANCED},{name:"Spider Web",pattern:["1","4","2","6","3","5","1+","4"],desc:"Intricate connecting pattern",icon:"",category:U.ADVANCED},{name:"Gear Shift",pattern:["1","2","4","3","5","6","5","2"],desc:"Mechanical shifting motion",icon:"",category:U.ADVANCED},{name:"Phoenix Rise",pattern:["1","3","5","6","4","2","5+","1+"],desc:"Rising from ashes pattern",icon:"",category:U.ADVANCED},{name:"Molecule",pattern:["1","6","3","2","5","4","6+","1+"],desc:"Chemical bond structure",icon:"",category:U.ADVANCED},{name:"Time Warp",pattern:["1","5","2","4","6","3","1+","5"],desc:"Bending through chord space-time",icon:"",category:U.ADVANCED},{name:"Magic Square",pattern:["1","4","6","2","3","5","4+","1+"],desc:"Mathematical magic pattern",icon:"",category:U.ADVANCED},{name:"Synth Wave",pattern:["1","2","4","6","5","3","2+","1+"],desc:"Electronic wave synthesis",icon:"",category:U.ADVANCED},{name:"Butterfly",pattern:["1","3","6","4","2","5","3+","1+"],desc:"Graceful wing-like motion",icon:"",category:U.ADVANCED},{name:"Binary Code",pattern:["1","x","2","3","4","5","6","x"],desc:"Digital pattern with gaps",icon:"",category:U.RHYTHMIC},{name:"Vortex",pattern:["1","6","4","2","5","3","6+","1+"],desc:"Spiraling energy pattern",icon:"",category:U.ADVANCED},{name:"Lightning",pattern:["1","4","6","2","5","3","1+","x"],desc:"Zigzag electrical pattern",icon:"",category:U.ADVANCED},{name:"Honeycomb",pattern:["1","3","5","2","6","4","5+","1+"],desc:"Hexagonal bee pattern",icon:"",category:U.ADVANCED},{name:"Tidal Wave",pattern:["1","2","4","5","6","3","2+","1+"],desc:"Ocean wave crescendo",icon:"",category:U.ADVANCED},{name:"Satellite",pattern:["1","5","3","6","2","4","1+","5+"],desc:"Orbital motion pattern",icon:"",category:U.ADVANCED},{name:"Quad Core",pattern:["1","2","3","4","3","2"],desc:"4-note mountain shape",icon:"",category:U.BASIC},{name:"Square Dance",pattern:["1","3","2","4","1","3"],desc:"4-note folk pattern",icon:"",category:U.BASIC},{name:"Tetris Block",pattern:["1","4","2","3","4","1","2","3"],desc:"Interlocking 4-note pattern",icon:"",category:U.ADVANCED},{name:"Compass",pattern:["1","2","4","3","1","4"],desc:"4-direction navigation",icon:"",category:U.BASIC},{name:"Engine Cycle",pattern:["1","3","4","2","1","3","4","2"],desc:"Repeating 4-stroke pattern",icon:"",category:U.ADVANCED},{name:"Diamond",pattern:["1","2","4","3","2","1"],desc:"Diamond-shaped 4-note gem",icon:"",category:U.BASIC},{name:"Pentagon Path",pattern:["1","2","3","4","5","1"],desc:"5-sided geometric progression",icon:"",category:U.BASIC},{name:"Star Jump",pattern:["1","3","5","2","4","1"],desc:"5-pointed star navigation",icon:"",category:U.ADVANCED},{name:"High Five",pattern:["1","2","3","4","5","1+"],desc:"5-note celebration with octave",icon:"",category:U.BASIC},{name:"Flower Power",pattern:["1","3","2","5","4","1","3","5"],desc:"5-petal blooming pattern",icon:"",category:U.ADVANCED},{name:"Olympic Rings",pattern:["1","4","2","5","3","4"],desc:"Interlocking 5-note circles",icon:"",category:U.ADVANCED},{name:"Jazz Hand",pattern:["1","2","4","3","5","2","1","4"],desc:"5-finger jazz expression",icon:"",category:U.ADVANCED},{name:"Spiral Five",pattern:["1","3","5","4","2","3"],desc:"Spiraling 5-note motion",icon:"",category:U.ADVANCED},{name:"Power Plant",pattern:["1","5","3","2","4","1+"],desc:"Energy-generating 5-note pattern",icon:"",category:U.ADVANCED},{name:"Full House",pattern:["1","2","3","4","5","6"],desc:"Complete 6-note ascent",icon:"",category:U.BASIC},{name:"Hexagon Spin",pattern:["1","3","5","2","4","6"],desc:"6-sided rotating pattern",icon:"",category:U.BASIC},{name:"Rainbow Arc",pattern:["1","6","2","5","3","4"],desc:"6-color spectrum bridge",icon:"",category:U.ADVANCED},{name:"Dice Roll",pattern:["1","4","6","2","5","3"],desc:"Random 6-sided exploration",icon:"",category:U.ADVANCED},{name:"Spider Legs",pattern:["1","2","4","6","3","5","1","4"],desc:"8-legged 6-note crawl",icon:"",category:U.ADVANCED},{name:"Snowflake",pattern:["1","6","3","4","2","5"],desc:"6-sided crystalline beauty",icon:"",category:U.ADVANCED},{name:"Benzene Ring",pattern:["1","2","4","5","3","6","1","4"],desc:"Chemical 6-carbon structure",icon:"",category:U.ADVANCED},{name:"Clock Face",pattern:["1","3","6","4","2","5"],desc:"12-hour time navigation",icon:"",category:U.ADVANCED},{name:"Mandala Six",pattern:["1","4","2","6","3","5","1","6"],desc:"Sacred 6-fold geometry",icon:"",category:U.ADVANCED},{name:"Puzzle Piece",pattern:["1","5","2","4","6","3"],desc:"Interlocking 6-note solution",icon:"",category:U.ADVANCED},{name:"Rainbow Bridge",pattern:["1","2","3","4","5","6","1+"],desc:"Complete 7-tone spectrum",icon:"",category:U.BASIC},{name:"Lucky Seven",pattern:["1","3","5","6","4","2","1+","3+"],desc:"7-note fortune pattern",icon:"",category:U.ADVANCED},{name:"Chakra Flow",pattern:["1","2","3","4","5","6","1+"],desc:"7-energy center alignment",icon:"",category:U.ADVANCED},{name:"Week Days",pattern:["1","4","2","6","3","5","1+","4+"],desc:"7-day cycle pattern",icon:"",category:U.ADVANCED},{name:"Heptagon",pattern:["1","3","6","2","5","4","1+"],desc:"7-sided geometric form",icon:"",category:U.ADVANCED},{name:"Scale Heaven",pattern:["1","2","3","4","5","6","2+","1+"],desc:"7-note stairway to heaven",icon:"",category:U.ADVANCED},{name:"Prism Split",pattern:["1","6","4","2","5","3","1+"],desc:"Light splitting into 7 colors",icon:"",category:U.ADVANCED},{name:"Musical Bowl",pattern:["1","2","4","6","3","5","1+","4+"],desc:"7-tone singing bowl",icon:"",category:U.ADVANCED},{name:"Fusion Dance",pattern:["1","3","6","4","2","5"],desc:"6-note fusion choreography",icon:"",category:U.ADVANCED},{name:"Crystal Grid",pattern:["1","4","3","6","2","5","1+","4+"],desc:"6-point energy crystal matrix",icon:"",category:U.ADVANCED},{name:"Gear Train",pattern:["1","2","4","3","6","5"],desc:"Mechanical 6-gear system",icon:"",category:U.ADVANCED},{name:"DNA Strand",pattern:["1","5","2","6","3","4","1+","5+"],desc:"Double helix genetic code",icon:"",category:U.ADVANCED},{name:"Meteor Shower",pattern:["1","6","3","5","2","4"],desc:"6-streak cosmic display",icon:"",category:U.ADVANCED},{name:"Magic Circle",pattern:["1","3","2","6","4","5","1+"],desc:"7-point mystical protection",icon:"",category:U.ADVANCED},{name:"Tornado Spin",pattern:["1","4","6","3","2","5","1+","4+"],desc:"Spiraling 7-note vortex",icon:"",category:U.ADVANCED},{name:"Phoenix Wings",pattern:["1","2","5","6","3","4"],desc:"6-feather wing spread",icon:"",category:U.ADVANCED},{name:"Quad Echo",pattern:["1","2","1","3","2","4","3","4"],desc:"4-note echo chamber",icon:"",category:U.RHYTHMIC},{name:"Four Corners",pattern:["1","3","4","2","1","3","4","2"],desc:"Repeating 4-corner square",icon:"",category:U.BASIC},{name:"Heartbeat Quad",pattern:["1","1","2","3","3","4","2","4"],desc:"Pulsing 4-note rhythm",icon:"",category:U.RHYTHMIC},{name:"Compass Spin",pattern:["1","2","4","3","2","1","4","3"],desc:"4-direction circular motion",icon:"",category:U.ADVANCED},{name:"Engine Rev",pattern:["1","4","2","3","4","1","3","2"],desc:"4-cylinder engine pattern",icon:"",category:U.ADVANCED},{name:"Square Wave",pattern:["1","1","3","3","2","2","4","4"],desc:"Digital square wave form",icon:"",category:U.RHYTHMIC},{name:"Four Seasons",pattern:["1","2","3","4","2+","1","4","3"],desc:"Seasonal cycle pattern",icon:"",category:U.ADVANCED},{name:"Card Suit",pattern:["1","3","2","4","3+","1+","2","4"],desc:"Playing card 4-suit pattern",icon:"",category:U.ADVANCED},{name:"Quad Pulse",pattern:["1","2","2","3","3+","4+","4","1"],desc:"Doubled pulse pattern",icon:"",category:U.RHYTHMIC},{name:"Element Mix",pattern:["1","4","3","2","1","2","3","4"],desc:"4-element combination",icon:"",category:U.ADVANCED},{name:"Pentagon Echo",pattern:["1","2","3","4","5","1","3","5"],desc:"5-note with strategic repeats",icon:"",category:U.BASIC},{name:"Five Alive",pattern:["1","3","5","2","4","1","5","3"],desc:"Dynamic 5-note exploration",icon:"",category:U.ADVANCED},{name:"Star Circuit",pattern:["1","2","4","5","3","2","4","1"],desc:"5-pointed star electrical circuit",icon:"",category:U.ADVANCED},{name:"Olympic Flow",pattern:["1","3","2","5","4","3","1","5"],desc:"5-ring Olympic movement",icon:"",category:U.ADVANCED},{name:"Hand Jive",pattern:["1","2","3","4","5","2","4","3"],desc:"5-finger dance pattern",icon:"",category:U.RHYTHMIC},{name:"Jazz Fifth",pattern:["1","3","5","4","2","5","1","3"],desc:"Jazz 5-note improvisation",icon:"",category:U.ADVANCED},{name:"Flower Bloom",pattern:["1","2","4","3","5","4","2","1"],desc:"5-petal opening flower",icon:"",category:U.ADVANCED},{name:"Spiral Five",pattern:["1","5","3","2","4","5","3","1"],desc:"Spiraling 5-note motion",icon:"",category:U.ADVANCED},{name:"Pentagon March",pattern:["1","2","3","4","5","4","3","2"],desc:"Military 5-count march",icon:"",category:U.BASIC},{name:"Five Elements",pattern:["1","4","2","5","3","4","1+","5+"],desc:"Ancient 5-element cycle",icon:"",category:U.ADVANCED},{name:"Quintet Jam",pattern:["1","3","4","2","5","3","4","1"],desc:"5-piece band improvisation",icon:"",category:U.ADVANCED},{name:"Five Fold",pattern:["1","5","2","4","3","2","5","4"],desc:"5-fold symmetrical pattern",icon:"",category:U.ADVANCED},{name:"Hex Repeat",pattern:["1","2","3","4","5","6","1","4"],desc:"6-note with strategic repeats",icon:"",category:U.BASIC},{name:"Rainbow Fade",pattern:["1","6","2","5","3","4","6","1"],desc:"6-color spectrum fade",icon:"",category:U.ADVANCED},{name:"Snowflake Dance",pattern:["1","3","6","4","2","5","3","1"],desc:"6-sided crystal dance",icon:"",category:U.ADVANCED},{name:"Benzene Loop",pattern:["1","2","4","5","3","6","2","4"],desc:"Chemical 6-carbon ring",icon:"",category:U.ADVANCED},{name:"Dice Double",pattern:["1","4","6","2","5","3","4","6"],desc:"6-sided die double roll",icon:"",category:U.ADVANCED},{name:"Hexagon Twist",pattern:["1","3","5","2","4","6","3","5"],desc:"6-sided geometric twist",icon:"",category:U.ADVANCED},{name:"Clock Tick",pattern:["1","2","4","6","3","5","2","6"],desc:"6-hour time progression",icon:"",category:U.RHYTHMIC},{name:"Mandala Six",pattern:["1","4","2","6","3","5","4","2"],desc:"Sacred 6-fold pattern",icon:"",category:U.ADVANCED},{name:"Flower Power",pattern:["1","6","3","2","5","4","6","3"],desc:"6-petal power flower",icon:"",category:U.ADVANCED},{name:"Insect Walk",pattern:["1","2","4","3","6","5","2","4"],desc:"6-legged insect movement",icon:"",category:U.ADVANCED},{name:"Crystal Matrix",pattern:["1","5","3","6","2","4","5","3"],desc:"6-point crystal energy grid",icon:"",category:U.ADVANCED},{name:"Spinner Six",pattern:["1","3","6","2","4","5","3","6"],desc:"6-blade spinner pattern",icon:"",category:U.ADVANCED},{name:"Web Weave",pattern:["1","4","6","3","2","5","4","1"],desc:"6-strand web weaving",icon:"",category:U.ADVANCED},{name:"Honeycomb Flow",pattern:["1","2","5","6","3","4","2","5"],desc:"6-sided honeycomb flow",icon:"",category:U.ADVANCED},{name:"Gear Mesh",pattern:["1","6","4","2","5","3","6","4"],desc:"6-tooth gear meshing",icon:"",category:U.ADVANCED},{name:"Jazz Hexagon",pattern:["1","3+","5","6+","4","2+","3","5+"],desc:"6-note jazz with octave sophistication",icon:"",category:U.ADVANCED}],Tu=e=>new Set(e.filter(r=>r!=="x").map(r=>{const s=parseInt(r.replace("+",""));return isNaN(s)?null:s}).filter(r=>r!==null)).size,bC=(e,n)=>e.length!==n.length?!1:e.every((r,s)=>r===n[s]),NC=({chordNoteCount:e,maxAvailableNotes:n,hideFewerNotePatterns:r,currentPattern:s,onHideFewerNotePatternsChange:i,onApplyPreset:a,className:c=""})=>{const d=Re(k=>k.addedChords),[h,m]=N.useState("all"),[p,g]=N.useState("all"),y=N.useRef(null),b=N.useRef({}),w=N.useMemo(()=>{const k=[],R=new Set;return ug.forEach(O=>{R.add(O.pattern.join("|"))}),d.forEach((O,M)=>{const q=O.pattern.join("|");!R.has(q)&&q.trim()!==""&&(R.add(q),Tu(O.pattern),k.push({name:`Custom ${k.length+1}`,pattern:[...O.pattern],desc:`Custom pattern from "${O.name}"`,icon:"",category:U.CUSTOM}))}),k},[d]),E=N.useMemo(()=>[...ug,...w],[w]),C=N.useMemo(()=>{const k=new Set(E.map(R=>R.pattern.length));return Array.from(k).sort((R,O)=>R-O)},[E]),j=N.useMemo(()=>E.filter(k=>{const R=Tu(k.pattern);return!(R>e||r&&R<e||Math.max(...k.pattern.filter(M=>M!=="x").map(M=>{const q=parseInt(M.replace("+",""));return isNaN(q)?0:q}))>n||h!=="all"&&k.pattern.length!==parseInt(h)||p!=="all"&&k.category!==p)}),[E,e,r,n,h,p]),P=N.useMemo(()=>s?j.findIndex(k=>bC(k.pattern,s)):-1,[s,j]);N.useEffect(()=>{if(P>=0&&y.current){const k=y.current,R=b.current[P];if(R){const O=k.getBoundingClientRect(),M=R.getBoundingClientRect(),q=M.top-O.top+k.scrollTop,te=q+M.height,oe=k.clientHeight,Z=k.scrollTop,Q=Z+oe;if(q<Z||te>Q){const se=q-oe/2+M.height/2;k.scrollTo({top:Math.max(0,se),behavior:"instant"})}}}},[P,j]);const A=["All Steps",...C.map(k=>`${k} Steps`)],D=["All Categories","Basic","Rhythmic","Advanced","Genre","Custom"];return u.jsxs("div",{className:`space-y-4 ${c}`,children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-medium text-mcb-primary mb-2 uppercase tracking-wide",children:"Pattern Presets"}),u.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[u.jsx("input",{type:"checkbox",checked:r,onChange:k=>i(k.target.checked),className:"w-3 h-3 rounded border-mcb-primary bg-mcb-secondary text-[var(--mcb-accent-secondary)] focus:ring-[var(--mcb-accent-primary)] focus:ring-1"}),u.jsx("span",{className:"text-xs text-mcb-primary",children:"Hide patterns with fewer notes"})]})]}),u.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[u.jsx(sr,{value:A[h==="all"?0:A.findIndex(k=>k===`${h} Steps`)],onChange:k=>{if(k==="All Steps")m("all");else{const R=k.replace(" Steps","");m(R)}},options:A,className:"flex-1",buttonClassName:"w-full p-2 bg-mcb-secondary border border-mcb-primary rounded text-mcb-primary text-xs transition-colors hover:bg-mcb-hover"}),u.jsx(sr,{value:D[p==="all"?0:D.findIndex(k=>k.toLowerCase()===p)],onChange:k=>{g(k==="All Categories"?"all":k.toLowerCase())},options:D,className:"flex-1",buttonClassName:"w-full p-2 bg-mcb-secondary border border-mcb-primary rounded text-mcb-primary text-xs transition-colors hover:bg-mcb-hover"})]}),u.jsx("div",{ref:y,className:"grid grid-cols-1 gap-2 max-h-80 overflow-y-auto pr-2 custom-scrollbar",children:j.length>0?j.map((k,R)=>{const O=Tu(k.pattern),M=R===P;return u.jsxs("button",{ref:q=>{b.current[R]=q},onClick:()=>a(k),className:`p-2 rounded text-xs transition-colors text-left border ${M?"bg-[var(--mcb-accent-secondary)]/20 text-[var(--mcb-text-primary)] border-[var(--mcb-accent-primary)] ring-1 ring-[var(--mcb-accent-primary)]/50":"bg-mcb-secondary text-mcb-secondary hover:bg-mcb-hover hover:text-mcb-primary border-mcb-primary hover:border-mcb-secondary"}`,children:[u.jsxs("div",{className:"flex items-center justify-between mb-1",children:[u.jsx("span",{className:"font-medium uppercase tracking-wide",children:k.name}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsxs("span",{className:`text-xs ${M?"text-mcb-secondary":"text-mcb-disabled"}`,children:[O,"n  ",k.pattern.length,"s"]}),u.jsx("span",{children:k.icon})]})]}),u.jsx("div",{className:`text-xs opacity-60 ${M?"text-mcb-tertiary":"text-mcb-disabled"}`,children:k.pattern.join("-")})]},R)}):u.jsx("div",{className:"p-3 text-xs text-mcb-tertiary text-center",children:"No patterns found matching current filters"})})]})},Ot=({label:e,value:n,min:r,max:s,step:i=.05,onChange:a,suffix:c,showPercentage:d=!1,formatValue:h,showMinMax:m=!1,minLabel:p,maxLabel:g,variant:y="default",showBypass:b=!1,className:w="",labelClassName:E=""})=>{const[C,j]=N.useState(!0),[P,A]=N.useState(n);N.useEffect(()=>{C&&A(n)},[n,C]);const D=()=>{const q=C?n:P;return h?h(q):d?`${Math.round(q*100)}%`:`${q}${c||""}`},k=q=>{const te=parseFloat(q.target.value);A(te),C&&a(te)},R=()=>{!C?(j(!0),a(P)):(A(n),j(!1),a(0))},O=q=>{if(q.key==="ArrowLeft"||q.key==="ArrowRight"||q.key==="ArrowUp"||q.key==="ArrowDown"){q.stopPropagation();return}q.preventDefault(),q.currentTarget.blur();const te=new KeyboardEvent("keydown",{key:q.key,code:q.code,keyCode:q.keyCode,bubbles:!0,cancelable:!0});document.dispatchEvent(te)},M=C?n:P;return y==="split"?u.jsxs("div",{className:w,children:[u.jsxs("div",{className:"flex justify-between items-center mb-1",children:[u.jsx("span",{className:`text-xs text-mcb-tertiary uppercase tracking-wide ${E}`,children:e}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:`text-xs font-mono transition-colors ${C?"text-mcb-tertiary":"text-mcb-subtle"}`,children:D()}),b&&u.jsx("button",{onClick:R,className:`w-5 h-5 rounded flex items-center justify-center transition-all ${C?"bg-emerald-600/20 text-emerald-400 hover:bg-emerald-600/30":"bg-[var(--mcb-text-subtle)]/50 text-mcb-disabled hover:bg-[var(--mcb-text-subtle)]/70"}`,title:C?"Bypass effect":"Enable effect",children:u.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M18.36 6.64a9 9 0 1 1-12.73 0"}),u.jsx("line",{x1:"12",y1:"2",x2:"12",y2:"12"})]})})]})]}),u.jsx("input",{type:"range",min:r,max:s,step:i,value:M,onChange:k,onKeyDown:O,className:`w-full h-1.5 bg-mcb-secondary rounded appearance-none cursor-pointer slider-thumb transition-opacity ${C?"opacity-100":"opacity-40"}`}),m&&u.jsxs("div",{className:"flex justify-between text-xs text-mcb-disabled mt-1",children:[u.jsx("span",{children:p||r}),u.jsx("span",{children:g||s})]})]}):u.jsxs("div",{className:w,children:[u.jsxs("div",{className:"flex justify-between items-center mb-2",children:[u.jsxs("label",{className:`block text-xs font-medium text-mcb-primary uppercase tracking-wide ${E}`,children:[e,u.jsxs("span",{className:`text-xs ml-2 normal-case font-mono transition-colors ${C?"text-mcb-tertiary":"text-mcb-subtle"}`,children:["(",D(),")"]})]}),b&&u.jsx("button",{onClick:R,className:`w-5 h-5 rounded flex items-center justify-center transition-all flex-shrink-0 ${C?"bg-emerald-600/20 text-emerald-400 hover:bg-emerald-600/30":"bg-[var(--mcb-text-subtle)]/50 text-mcb-disabled hover:bg-[var(--mcb-text-subtle)]/70"}`,title:C?"Bypass effect":"Enable effect",children:u.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M18.36 6.64a9 9 0 1 1-12.73 0"}),u.jsx("line",{x1:"12",y1:"2",x2:"12",y2:"12"})]})})]}),u.jsx("div",{className:"relative",children:u.jsx("input",{type:"range",min:r,max:s,step:i,value:M,onChange:k,onKeyDown:O,className:`slider-mobile w-full h-1.5 bg-mcb-secondary rounded appearance-none cursor-pointer slider-thumb transition-opacity ${C?"opacity-100":"opacity-40"}`})}),m&&u.jsxs("div",{className:"flex justify-between text-xs text-mcb-disabled mt-1",children:[u.jsx("span",{children:p||r}),u.jsx("span",{children:g||s})]})]})};var ao={},Ca={},Ru,dg;function wC(){if(dg)return Ru;dg=1;function e(i){var a=new s(i),c=a.readChunk();if(c.id!="MThd")throw"Bad MIDI file.  Expected 'MHdr', got: '"+c.id+"'";for(var d=n(c.data),h=[],m=0;!a.eof()&&m<d.numTracks;m++){var p=a.readChunk();if(p.id!="MTrk")throw"Bad MIDI file.  Expected 'MTrk', got: '"+p.id+"'";var g=r(p.data);h.push(g)}return{header:d,tracks:h}}function n(i){var a=new s(i),c=a.readUInt16(),d=a.readUInt16(),h={format:c,numTracks:d},m=a.readUInt16();return m&32768?(h.framesPerSecond=256-(m>>8),h.ticksPerFrame=m&255):h.ticksPerBeat=m,h}function r(i){for(var a=new s(i),c=[];!a.eof();){var d=m();c.push(d)}return c;var h;function m(){var p={};p.deltaTime=a.readVarInt();var g=a.readUInt8();if((g&240)===240)if(g===255){p.meta=!0;var y=a.readUInt8(),b=a.readVarInt();switch(y){case 0:if(p.type="sequenceNumber",b!==2)throw"Expected length for sequenceNumber event is 2, got "+b;return p.number=a.readUInt16(),p;case 1:return p.type="text",p.text=a.readString(b),p;case 2:return p.type="copyrightNotice",p.text=a.readString(b),p;case 3:return p.type="trackName",p.text=a.readString(b),p;case 4:return p.type="instrumentName",p.text=a.readString(b),p;case 5:return p.type="lyrics",p.text=a.readString(b),p;case 6:return p.type="marker",p.text=a.readString(b),p;case 7:return p.type="cuePoint",p.text=a.readString(b),p;case 32:if(p.type="channelPrefix",b!=1)throw"Expected length for channelPrefix event is 1, got "+b;return p.channel=a.readUInt8(),p;case 33:if(p.type="portPrefix",b!=1)throw"Expected length for portPrefix event is 1, got "+b;return p.port=a.readUInt8(),p;case 47:if(p.type="endOfTrack",b!=0)throw"Expected length for endOfTrack event is 0, got "+b;return p;case 81:if(p.type="setTempo",b!=3)throw"Expected length for setTempo event is 3, got "+b;return p.microsecondsPerBeat=a.readUInt24(),p;case 84:if(p.type="smpteOffset",b!=5)throw"Expected length for smpteOffset event is 5, got "+b;var w=a.readUInt8(),E={0:24,32:25,64:29,96:30};return p.frameRate=E[w&96],p.hour=w&31,p.min=a.readUInt8(),p.sec=a.readUInt8(),p.frame=a.readUInt8(),p.subFrame=a.readUInt8(),p;case 88:if(p.type="timeSignature",b!=2&&b!=4)throw"Expected length for timeSignature event is 4 or 2, got "+b;return p.numerator=a.readUInt8(),p.denominator=1<<a.readUInt8(),b===4?(p.metronome=a.readUInt8(),p.thirtyseconds=a.readUInt8()):(p.metronome=36,p.thirtyseconds=8),p;case 89:if(p.type="keySignature",b!=2)throw"Expected length for keySignature event is 2, got "+b;return p.key=a.readInt8(),p.scale=a.readUInt8(),p;case 127:return p.type="sequencerSpecific",p.data=a.readBytes(b),p;default:return p.type="unknownMeta",p.data=a.readBytes(b),p.metatypeByte=y,p}}else if(g==240){p.type="sysEx";var b=a.readVarInt();return p.data=a.readBytes(b),p}else if(g==247){p.type="endSysEx";var b=a.readVarInt();return p.data=a.readBytes(b),p}else throw"Unrecognised MIDI event type byte: "+g;else{var C;if((g&128)===0){if(h===null)throw"Running status byte encountered before status byte";C=g,g=h,p.running=!0}else C=a.readUInt8(),h=g;var j=g>>4;switch(p.channel=g&15,j){case 8:return p.type="noteOff",p.noteNumber=C,p.velocity=a.readUInt8(),p;case 9:var P=a.readUInt8();return p.type=P===0?"noteOff":"noteOn",p.noteNumber=C,p.velocity=P,P===0&&(p.byte9=!0),p;case 10:return p.type="noteAftertouch",p.noteNumber=C,p.amount=a.readUInt8(),p;case 11:return p.type="controller",p.controllerType=C,p.value=a.readUInt8(),p;case 12:return p.type="programChange",p.programNumber=C,p;case 13:return p.type="channelAftertouch",p.amount=C,p;case 14:return p.type="pitchBend",p.value=C+(a.readUInt8()<<7)-8192,p;default:throw"Unrecognised MIDI event type: "+j}}}}function s(i){this.buffer=i,this.bufferLen=this.buffer.length,this.pos=0}return s.prototype.eof=function(){return this.pos>=this.bufferLen},s.prototype.readUInt8=function(){var i=this.buffer[this.pos];return this.pos+=1,i},s.prototype.readInt8=function(){var i=this.readUInt8();return i&128?i-256:i},s.prototype.readUInt16=function(){var i=this.readUInt8(),a=this.readUInt8();return(i<<8)+a},s.prototype.readInt16=function(){var i=this.readUInt16();return i&32768?i-65536:i},s.prototype.readUInt24=function(){var i=this.readUInt8(),a=this.readUInt8(),c=this.readUInt8();return(i<<16)+(a<<8)+c},s.prototype.readInt24=function(){var i=this.readUInt24();return i&8388608?i-16777216:i},s.prototype.readUInt32=function(){var i=this.readUInt8(),a=this.readUInt8(),c=this.readUInt8(),d=this.readUInt8();return(i<<24)+(a<<16)+(c<<8)+d},s.prototype.readBytes=function(i){var a=this.buffer.slice(this.pos,this.pos+i);return this.pos+=i,a},s.prototype.readString=function(i){var a=this.readBytes(i);return String.fromCharCode.apply(null,a)},s.prototype.readVarInt=function(){for(var i=0;!this.eof();){var a=this.readUInt8();if(a&128)i+=a&127,i<<=7;else return i+a}return i},s.prototype.readChunk=function(){var i=this.readString(4),a=this.readUInt32(),c=this.readBytes(a);return{id:i,length:a,data:c}},Ru=e,Ru}var Mu,fg;function CC(){if(fg)return Mu;fg=1;function e(a,c){if(typeof a!="object")throw"Invalid MIDI data";c=c||{};var d=a.header||{},h=a.tracks||[],m,p=h.length,g=new i;for(n(g,d,p),m=0;m<p;m++)r(g,h[m],c);return g.buffer}function n(a,c,d){var h=c.format==null?1:c.format,m=128;c.timeDivision?m=c.timeDivision:c.ticksPerFrame&&c.framesPerSecond?m=-(c.framesPerSecond&255)<<8|c.ticksPerFrame&255:c.ticksPerBeat&&(m=c.ticksPerBeat&32767);var p=new i;p.writeUInt16(h),p.writeUInt16(d),p.writeUInt16(m),a.writeChunk("MThd",p.buffer)}function r(a,c,d){var h=new i,m,p=c.length,g=null;for(m=0;m<p;m++)(d.running===!1||!d.running&&!c[m].running)&&(g=null),g=s(h,c[m],g,d.useByte9ForNoteOff);a.writeChunk("MTrk",h.buffer)}function s(a,c,d,h){var m=c.type,p=c.deltaTime,g=c.text||"",y=c.data||[],b=null;switch(a.writeVarInt(p),m){case"sequenceNumber":a.writeUInt8(255),a.writeUInt8(0),a.writeVarInt(2),a.writeUInt16(c.number);break;case"text":a.writeUInt8(255),a.writeUInt8(1),a.writeVarInt(g.length),a.writeString(g);break;case"copyrightNotice":a.writeUInt8(255),a.writeUInt8(2),a.writeVarInt(g.length),a.writeString(g);break;case"trackName":a.writeUInt8(255),a.writeUInt8(3),a.writeVarInt(g.length),a.writeString(g);break;case"instrumentName":a.writeUInt8(255),a.writeUInt8(4),a.writeVarInt(g.length),a.writeString(g);break;case"lyrics":a.writeUInt8(255),a.writeUInt8(5),a.writeVarInt(g.length),a.writeString(g);break;case"marker":a.writeUInt8(255),a.writeUInt8(6),a.writeVarInt(g.length),a.writeString(g);break;case"cuePoint":a.writeUInt8(255),a.writeUInt8(7),a.writeVarInt(g.length),a.writeString(g);break;case"channelPrefix":a.writeUInt8(255),a.writeUInt8(32),a.writeVarInt(1),a.writeUInt8(c.channel);break;case"portPrefix":a.writeUInt8(255),a.writeUInt8(33),a.writeVarInt(1),a.writeUInt8(c.port);break;case"endOfTrack":a.writeUInt8(255),a.writeUInt8(47),a.writeVarInt(0);break;case"setTempo":a.writeUInt8(255),a.writeUInt8(81),a.writeVarInt(3),a.writeUInt24(c.microsecondsPerBeat);break;case"smpteOffset":a.writeUInt8(255),a.writeUInt8(84),a.writeVarInt(5);var w={24:0,25:32,29:64,30:96},E=c.hour&31|w[c.frameRate];a.writeUInt8(E),a.writeUInt8(c.min),a.writeUInt8(c.sec),a.writeUInt8(c.frame),a.writeUInt8(c.subFrame);break;case"timeSignature":a.writeUInt8(255),a.writeUInt8(88),a.writeVarInt(4),a.writeUInt8(c.numerator);var C=Math.floor(Math.log(c.denominator)/Math.LN2)&255;a.writeUInt8(C),a.writeUInt8(c.metronome),a.writeUInt8(c.thirtyseconds||8);break;case"keySignature":a.writeUInt8(255),a.writeUInt8(89),a.writeVarInt(2),a.writeInt8(c.key),a.writeUInt8(c.scale);break;case"sequencerSpecific":a.writeUInt8(255),a.writeUInt8(127),a.writeVarInt(y.length),a.writeBytes(y);break;case"unknownMeta":c.metatypeByte!=null&&(a.writeUInt8(255),a.writeUInt8(c.metatypeByte),a.writeVarInt(y.length),a.writeBytes(y));break;case"sysEx":a.writeUInt8(240),a.writeVarInt(y.length),a.writeBytes(y);break;case"endSysEx":a.writeUInt8(247),a.writeVarInt(y.length),a.writeBytes(y);break;case"noteOff":var j=h!==!1&&c.byte9||h&&c.velocity==0?144:128;b=j|c.channel,b!==d&&a.writeUInt8(b),a.writeUInt8(c.noteNumber),a.writeUInt8(c.velocity);break;case"noteOn":b=144|c.channel,b!==d&&a.writeUInt8(b),a.writeUInt8(c.noteNumber),a.writeUInt8(c.velocity);break;case"noteAftertouch":b=160|c.channel,b!==d&&a.writeUInt8(b),a.writeUInt8(c.noteNumber),a.writeUInt8(c.amount);break;case"controller":b=176|c.channel,b!==d&&a.writeUInt8(b),a.writeUInt8(c.controllerType),a.writeUInt8(c.value);break;case"programChange":b=192|c.channel,b!==d&&a.writeUInt8(b),a.writeUInt8(c.programNumber);break;case"channelAftertouch":b=208|c.channel,b!==d&&a.writeUInt8(b),a.writeUInt8(c.amount);break;case"pitchBend":b=224|c.channel,b!==d&&a.writeUInt8(b);var P=8192+c.value,A=P&127,D=P>>7&127;a.writeUInt8(A),a.writeUInt8(D);break;default:throw"Unrecognized event type: "+m}return b}function i(){this.buffer=[]}return i.prototype.writeUInt8=function(a){this.buffer.push(a&255)},i.prototype.writeInt8=i.prototype.writeUInt8,i.prototype.writeUInt16=function(a){var c=a>>8&255,d=a&255;this.writeUInt8(c),this.writeUInt8(d)},i.prototype.writeInt16=i.prototype.writeUInt16,i.prototype.writeUInt24=function(a){var c=a>>16&255,d=a>>8&255,h=a&255;this.writeUInt8(c),this.writeUInt8(d),this.writeUInt8(h)},i.prototype.writeInt24=i.prototype.writeUInt24,i.prototype.writeUInt32=function(a){var c=a>>24&255,d=a>>16&255,h=a>>8&255,m=a&255;this.writeUInt8(c),this.writeUInt8(d),this.writeUInt8(h),this.writeUInt8(m)},i.prototype.writeInt32=i.prototype.writeUInt32,i.prototype.writeBytes=function(a){this.buffer=this.buffer.concat(Array.prototype.slice.call(a,0))},i.prototype.writeString=function(a){var c,d=a.length,h=[];for(c=0;c<d;c++)h.push(a.codePointAt(c));this.writeBytes(h)},i.prototype.writeVarInt=function(a){if(a<0)throw"Cannot write negative variable-length integer";if(a<=127)this.writeUInt8(a);else{var c=a,d=[];for(d.push(c&127),c>>=7;c;){var h=c&127|128;d.push(h),c>>=7}this.writeBytes(d.reverse())}},i.prototype.writeChunk=function(a,c){this.writeString(a),this.writeUInt32(c.length),this.writeBytes(c)},Mu=e,Mu}var hg;function Zv(){return hg||(hg=1,Ca.parseMidi=wC(),Ca.writeMidi=CC()),Ca}var Ou={},lo={},mg;function ey(){if(mg)return lo;mg=1,Object.defineProperty(lo,"__esModule",{value:!0}),lo.insert=lo.search=void 0;function e(r,s,i){i===void 0&&(i="ticks");var a=0,c=r.length,d=c;if(c>0&&r[c-1][i]<=s)return c-1;for(;a<d;){var h=Math.floor(a+(d-a)/2),m=r[h],p=r[h+1];if(m[i]===s){for(var g=h;g<r.length;g++){var y=r[g];y[i]===s&&(h=g)}return h}else{if(m[i]<s&&p[i]>s)return h;m[i]>s?d=h:m[i]<s&&(a=h+1)}}return-1}lo.search=e;function n(r,s,i){if(i===void 0&&(i="ticks"),r.length){var a=e(r,s[i],i);r.splice(a+1,0,s)}else r.push(s)}return lo.insert=n,lo}var pg;function fd(){return pg||(pg=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Header=e.keySignatureKeys=void 0;var n=ey(),r=new WeakMap;e.keySignatureKeys=["Cb","Gb","Db","Ab","Eb","Bb","F","C","G","D","A","E","B","F#","C#"];var s=function(){function i(a){var c=this;if(this.tempos=[],this.timeSignatures=[],this.keySignatures=[],this.meta=[],this.name="",r.set(this,480),a){r.set(this,a.header.ticksPerBeat),a.tracks.forEach(function(h){h.forEach(function(m){m.meta&&(m.type==="timeSignature"?c.timeSignatures.push({ticks:m.absoluteTime,timeSignature:[m.numerator,m.denominator]}):m.type==="setTempo"?c.tempos.push({bpm:6e7/m.microsecondsPerBeat,ticks:m.absoluteTime}):m.type==="keySignature"&&c.keySignatures.push({key:e.keySignatureKeys[m.key+7],scale:m.scale===0?"major":"minor",ticks:m.absoluteTime}))})});var d=0;a.tracks[0].forEach(function(h){d+=h.deltaTime,h.meta&&(h.type==="trackName"?c.name=h.text:(h.type==="text"||h.type==="cuePoint"||h.type==="marker"||h.type==="lyrics")&&c.meta.push({text:h.text,ticks:d,type:h.type}))}),this.update()}}return i.prototype.update=function(){var a=this,c=0,d=0;this.tempos.sort(function(h,m){return h.ticks-m.ticks}),this.tempos.forEach(function(h,m){var p=m>0?a.tempos[m-1].bpm:a.tempos[0].bpm,g=h.ticks/a.ppq-d,y=60/p*g;h.time=y+c,c=h.time,d+=g}),this.timeSignatures.sort(function(h,m){return h.ticks-m.ticks}),this.timeSignatures.forEach(function(h,m){var p=m>0?a.timeSignatures[m-1]:a.timeSignatures[0],g=(h.ticks-p.ticks)/a.ppq,y=g/p.timeSignature[0]/(p.timeSignature[1]/4);p.measures=p.measures||0,h.measures=y+p.measures})},i.prototype.ticksToSeconds=function(a){var c=(0,n.search)(this.tempos,a);if(c!==-1){var d=this.tempos[c],h=d.time,m=(a-d.ticks)/this.ppq;return h+60/d.bpm*m}else{var p=a/this.ppq;return 60/120*p}},i.prototype.ticksToMeasures=function(a){var c=(0,n.search)(this.timeSignatures,a);if(c!==-1){var d=this.timeSignatures[c],h=(a-d.ticks)/this.ppq;return d.measures+h/(d.timeSignature[0]/d.timeSignature[1])/4}else return a/this.ppq/4},Object.defineProperty(i.prototype,"ppq",{get:function(){return r.get(this)},enumerable:!1,configurable:!0}),i.prototype.secondsToTicks=function(a){var c=(0,n.search)(this.tempos,a,"time");if(c!==-1){var d=this.tempos[c],h=d.time,m=a-h,p=m/(60/d.bpm);return Math.round(d.ticks+p*this.ppq)}else{var g=a/.5;return Math.round(g*this.ppq)}},i.prototype.toJSON=function(){return{keySignatures:this.keySignatures,meta:this.meta,name:this.name,ppq:this.ppq,tempos:this.tempos.map(function(a){return{bpm:a.bpm,ticks:a.ticks}}),timeSignatures:this.timeSignatures}},i.prototype.fromJSON=function(a){this.name=a.name,this.tempos=a.tempos.map(function(c){return Object.assign({},c)}),this.timeSignatures=a.timeSignatures.map(function(c){return Object.assign({},c)}),this.keySignatures=a.keySignatures.map(function(c){return Object.assign({},c)}),this.meta=a.meta.map(function(c){return Object.assign({},c)}),r.set(this,a.ppq),this.update()},i.prototype.setTempo=function(a){this.tempos=[{bpm:a,ticks:0}],this.update()},i}();e.Header=s}(Ou)),Ou}var Is={},_u={},gg;function ty(){return gg||(gg=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ControlChange=e.controlChangeIds=e.controlChangeNames=void 0,e.controlChangeNames={1:"modulationWheel",2:"breath",4:"footController",5:"portamentoTime",7:"volume",8:"balance",10:"pan",64:"sustain",65:"portamentoTime",66:"sostenuto",67:"softPedal",68:"legatoFootswitch",84:"portamentoControl"},e.controlChangeIds=Object.keys(e.controlChangeNames).reduce(function(i,a){return i[e.controlChangeNames[a]]=a,i},{});var n=new WeakMap,r=new WeakMap,s=function(){function i(a,c){n.set(this,c),r.set(this,a.controllerType),this.ticks=a.absoluteTime,this.value=a.value}return Object.defineProperty(i.prototype,"number",{get:function(){return r.get(this)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"name",{get:function(){return e.controlChangeNames[this.number]?e.controlChangeNames[this.number]:null},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"time",{get:function(){var a=n.get(this);return a.ticksToSeconds(this.ticks)},set:function(a){var c=n.get(this);this.ticks=c.secondsToTicks(a)},enumerable:!1,configurable:!0}),i.prototype.toJSON=function(){return{number:this.number,ticks:this.ticks,time:this.time,value:this.value}},i}();e.ControlChange=s}(_u)),_u}var Ps={},vg;function SC(){if(vg)return Ps;vg=1,Object.defineProperty(Ps,"__esModule",{value:!0}),Ps.createControlChanges=void 0;var e=ty();function n(){return new Proxy({},{get:function(r,s){if(r[s])return r[s];if(e.controlChangeIds.hasOwnProperty(s))return r[e.controlChangeIds[s]]},set:function(r,s,i){return e.controlChangeIds.hasOwnProperty(s)?r[e.controlChangeIds[s]]=i:r[s]=i,!0}})}return Ps.createControlChanges=n,Ps}var Ts={},yg;function EC(){if(yg)return Ts;yg=1,Object.defineProperty(Ts,"__esModule",{value:!0}),Ts.PitchBend=void 0;var e=new WeakMap,n=function(){function r(s,i){e.set(this,i),this.ticks=s.absoluteTime,this.value=s.value}return Object.defineProperty(r.prototype,"time",{get:function(){var s=e.get(this);return s.ticksToSeconds(this.ticks)},set:function(s){var i=e.get(this);this.ticks=i.secondsToTicks(s)},enumerable:!1,configurable:!0}),r.prototype.toJSON=function(){return{ticks:this.ticks,time:this.time,value:this.value}},r}();return Ts.PitchBend=n,Ts}var Rs={},yr={},xg;function DC(){return xg||(xg=1,Object.defineProperty(yr,"__esModule",{value:!0}),yr.DrumKitByPatchID=yr.InstrumentFamilyByID=yr.instrumentByPatchID=void 0,yr.instrumentByPatchID=["acoustic grand piano","bright acoustic piano","electric grand piano","honky-tonk piano","electric piano 1","electric piano 2","harpsichord","clavi","celesta","glockenspiel","music box","vibraphone","marimba","xylophone","tubular bells","dulcimer","drawbar organ","percussive organ","rock organ","church organ","reed organ","accordion","harmonica","tango accordion","acoustic guitar (nylon)","acoustic guitar (steel)","electric guitar (jazz)","electric guitar (clean)","electric guitar (muted)","overdriven guitar","distortion guitar","guitar harmonics","acoustic bass","electric bass (finger)","electric bass (pick)","fretless bass","slap bass 1","slap bass 2","synth bass 1","synth bass 2","violin","viola","cello","contrabass","tremolo strings","pizzicato strings","orchestral harp","timpani","string ensemble 1","string ensemble 2","synthstrings 1","synthstrings 2","choir aahs","voice oohs","synth voice","orchestra hit","trumpet","trombone","tuba","muted trumpet","french horn","brass section","synthbrass 1","synthbrass 2","soprano sax","alto sax","tenor sax","baritone sax","oboe","english horn","bassoon","clarinet","piccolo","flute","recorder","pan flute","blown bottle","shakuhachi","whistle","ocarina","lead 1 (square)","lead 2 (sawtooth)","lead 3 (calliope)","lead 4 (chiff)","lead 5 (charang)","lead 6 (voice)","lead 7 (fifths)","lead 8 (bass + lead)","pad 1 (new age)","pad 2 (warm)","pad 3 (polysynth)","pad 4 (choir)","pad 5 (bowed)","pad 6 (metallic)","pad 7 (halo)","pad 8 (sweep)","fx 1 (rain)","fx 2 (soundtrack)","fx 3 (crystal)","fx 4 (atmosphere)","fx 5 (brightness)","fx 6 (goblins)","fx 7 (echoes)","fx 8 (sci-fi)","sitar","banjo","shamisen","koto","kalimba","bag pipe","fiddle","shanai","tinkle bell","agogo","steel drums","woodblock","taiko drum","melodic tom","synth drum","reverse cymbal","guitar fret noise","breath noise","seashore","bird tweet","telephone ring","helicopter","applause","gunshot"],yr.InstrumentFamilyByID=["piano","chromatic percussion","organ","guitar","bass","strings","ensemble","brass","reed","pipe","synth lead","synth pad","synth effects","world","percussive","sound effects"],yr.DrumKitByPatchID={0:"standard kit",8:"room kit",16:"power kit",24:"electronic kit",25:"tr-808 kit",32:"jazz kit",40:"brush kit",48:"orchestra kit",56:"sound fx kit"}),yr}var bg;function jC(){if(bg)return Rs;bg=1,Object.defineProperty(Rs,"__esModule",{value:!0}),Rs.Instrument=void 0;var e=DC(),n=new WeakMap,r=function(){function s(i,a){if(this.number=0,n.set(this,a),this.number=0,i){var c=i.find(function(d){return d.type==="programChange"});c&&(this.number=c.programNumber)}}return Object.defineProperty(s.prototype,"name",{get:function(){return this.percussion?e.DrumKitByPatchID[this.number]:e.instrumentByPatchID[this.number]},set:function(i){var a=e.instrumentByPatchID.indexOf(i);a!==-1&&(this.number=a)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"family",{get:function(){return this.percussion?"drums":e.InstrumentFamilyByID[Math.floor(this.number/8)]},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"percussion",{get:function(){var i=n.get(this);return i.channel===9},enumerable:!1,configurable:!0}),s.prototype.toJSON=function(){return{family:this.family,number:this.number,name:this.name}},s.prototype.fromJSON=function(i){this.number=i.number},s}();return Rs.Instrument=r,Rs}var Ms={},Ng;function AC(){if(Ng)return Ms;Ng=1,Object.defineProperty(Ms,"__esModule",{value:!0}),Ms.Note=void 0;function e(c){var d=Math.floor(c/12)-1;return n(c)+d.toString()}function n(c){var d=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],h=c%12;return d[h]}function r(c){var d=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];return d.indexOf(c)}var s=function(){var c=/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i,d={cbb:-2,cb:-1,c:0,"c#":1,cx:2,dbb:0,db:1,d:2,"d#":3,dx:4,ebb:2,eb:3,e:4,"e#":5,ex:6,fbb:3,fb:4,f:5,"f#":6,fx:7,gbb:5,gb:6,g:7,"g#":8,gx:9,abb:7,ab:8,a:9,"a#":10,ax:11,bbb:9,bb:10,b:11,"b#":12,bx:13};return function(h){var m=c.exec(h),p=m[1],g=m[2],y=d[p.toLowerCase()];return y+(parseInt(g,10)+1)*12}}(),i=new WeakMap,a=function(){function c(d,h,m){i.set(this,m),this.midi=d.midi,this.velocity=d.velocity,this.noteOffVelocity=h.velocity,this.ticks=d.ticks,this.durationTicks=h.ticks-d.ticks}return Object.defineProperty(c.prototype,"name",{get:function(){return e(this.midi)},set:function(d){this.midi=s(d)},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"octave",{get:function(){return Math.floor(this.midi/12)-1},set:function(d){var h=d-this.octave;this.midi+=h*12},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"pitch",{get:function(){return n(this.midi)},set:function(d){this.midi=12*(this.octave+1)+r(d)},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"duration",{get:function(){var d=i.get(this);return d.ticksToSeconds(this.ticks+this.durationTicks)-d.ticksToSeconds(this.ticks)},set:function(d){var h=i.get(this),m=h.secondsToTicks(this.time+d);this.durationTicks=m-this.ticks},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"time",{get:function(){var d=i.get(this);return d.ticksToSeconds(this.ticks)},set:function(d){var h=i.get(this);this.ticks=h.secondsToTicks(d)},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"bars",{get:function(){var d=i.get(this);return d.ticksToMeasures(this.ticks)},enumerable:!1,configurable:!0}),c.prototype.toJSON=function(){return{duration:this.duration,durationTicks:this.durationTicks,midi:this.midi,name:this.name,ticks:this.ticks,time:this.time,velocity:this.velocity}},c}();return Ms.Note=a,Ms}var wg;function Cg(){if(wg)return Is;wg=1,Object.defineProperty(Is,"__esModule",{value:!0}),Is.Track=void 0;var e=ey(),n=ty(),r=SC(),s=EC(),i=jC(),a=AC(),c=new WeakMap,d=function(){function h(m,p){var g=this;if(this.name="",this.notes=[],this.controlChanges=(0,r.createControlChanges)(),this.pitchBends=[],c.set(this,p),m){var y=m.find(function(D){return D.type==="trackName"});this.name=y?y.text:""}if(this.instrument=new i.Instrument(m,this),this.channel=0,m){for(var b=m.filter(function(D){return D.type==="noteOn"}),w=m.filter(function(D){return D.type==="noteOff"}),E=function(){var D=b.shift();C.channel=D.channel;var k=w.findIndex(function(O){return O.noteNumber===D.noteNumber&&O.absoluteTime>=D.absoluteTime});if(k!==-1){var R=w.splice(k,1)[0];C.addNote({durationTicks:R.absoluteTime-D.absoluteTime,midi:D.noteNumber,noteOffVelocity:R.velocity/127,ticks:D.absoluteTime,velocity:D.velocity/127})}},C=this;b.length;)E();var j=m.filter(function(D){return D.type==="controller"});j.forEach(function(D){g.addCC({number:D.controllerType,ticks:D.absoluteTime,value:D.value/127})});var P=m.filter(function(D){return D.type==="pitchBend"});P.forEach(function(D){g.addPitchBend({ticks:D.absoluteTime,value:D.value/Math.pow(2,13)})});var A=m.find(function(D){return D.type==="endOfTrack"});this.endOfTrackTicks=A!==void 0?A.absoluteTime:void 0}}return h.prototype.addNote=function(m){var p=c.get(this),g=new a.Note({midi:0,ticks:0,velocity:1},{ticks:0,velocity:0},p);return Object.assign(g,m),(0,e.insert)(this.notes,g,"ticks"),this},h.prototype.addCC=function(m){var p=c.get(this),g=new n.ControlChange({controllerType:m.number},p);return delete m.number,Object.assign(g,m),Array.isArray(this.controlChanges[g.number])||(this.controlChanges[g.number]=[]),(0,e.insert)(this.controlChanges[g.number],g,"ticks"),this},h.prototype.addPitchBend=function(m){var p=c.get(this),g=new s.PitchBend({},p);return Object.assign(g,m),(0,e.insert)(this.pitchBends,g,"ticks"),this},Object.defineProperty(h.prototype,"duration",{get:function(){if(!this.notes.length)return 0;for(var m=this.notes[this.notes.length-1].time+this.notes[this.notes.length-1].duration,p=0;p<this.notes.length-1;p++){var g=this.notes[p].time+this.notes[p].duration;m<g&&(m=g)}return m},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"durationTicks",{get:function(){if(!this.notes.length)return 0;for(var m=this.notes[this.notes.length-1].ticks+this.notes[this.notes.length-1].durationTicks,p=0;p<this.notes.length-1;p++){var g=this.notes[p].ticks+this.notes[p].durationTicks;m<g&&(m=g)}return m},enumerable:!1,configurable:!0}),h.prototype.fromJSON=function(m){var p=this;this.name=m.name,this.channel=m.channel,this.instrument=new i.Instrument(void 0,this),this.instrument.fromJSON(m.instrument),m.endOfTrackTicks!==void 0&&(this.endOfTrackTicks=m.endOfTrackTicks);for(var g in m.controlChanges)m.controlChanges[g]&&m.controlChanges[g].forEach(function(y){p.addCC({number:y.number,ticks:y.ticks,value:y.value})});m.notes.forEach(function(y){p.addNote({durationTicks:y.durationTicks,midi:y.midi,ticks:y.ticks,velocity:y.velocity})})},h.prototype.toJSON=function(){for(var m={},p=0;p<127;p++)this.controlChanges.hasOwnProperty(p)&&(m[p]=this.controlChanges[p].map(function(y){return y.toJSON()}));var g={channel:this.channel,controlChanges:m,pitchBends:this.pitchBends.map(function(y){return y.toJSON()}),instrument:this.instrument.toJSON(),name:this.name,notes:this.notes.map(function(y){return y.toJSON()})};return this.endOfTrackTicks!==void 0&&(g.endOfTrackTicks=this.endOfTrackTicks),g},h}();return Is.Track=d,Is}var co={};function kC(e){var n=[];return ny(e,n),n}function ny(e,n){for(var r=0;r<e.length;r++){var s=e[r];Array.isArray(s)?ny(s,n):n.push(s)}}const IC=Object.freeze(Object.defineProperty({__proto__:null,flatten:kC},Symbol.toStringTag,{value:"Module"})),PC=kv(IC);var Sg;function TC(){if(Sg)return co;Sg=1;var e=co&&co.__spreadArray||function(j,P,A){if(A||arguments.length===2)for(var D=0,k=P.length,R;D<k;D++)(R||!(D in P))&&(R||(R=Array.prototype.slice.call(P,0,D)),R[D]=P[D]);return j.concat(R||Array.prototype.slice.call(P))};Object.defineProperty(co,"__esModule",{value:!0}),co.encode=void 0;var n=Zv(),r=fd(),s=PC;function i(j,P){return[{absoluteTime:j.ticks,channel:P,deltaTime:0,noteNumber:j.midi,type:"noteOn",velocity:Math.floor(j.velocity*127)},{absoluteTime:j.ticks+j.durationTicks,channel:P,deltaTime:0,noteNumber:j.midi,type:"noteOff",velocity:Math.floor(j.noteOffVelocity*127)}]}function a(j){return(0,s.flatten)(j.notes.map(function(P){return i(P,j.channel)}))}function c(j,P){return{absoluteTime:j.ticks,channel:P,controllerType:j.number,deltaTime:0,type:"controller",value:Math.floor(j.value*127)}}function d(j){for(var P=[],A=0;A<127;A++)j.controlChanges.hasOwnProperty(A)&&j.controlChanges[A].forEach(function(D){P.push(c(D,j.channel))});return P}function h(j,P){return{absoluteTime:j.ticks,channel:P,deltaTime:0,type:"pitchBend",value:j.value}}function m(j){var P=[];return j.pitchBends.forEach(function(A){P.push(h(A,j.channel))}),P}function p(j){return{absoluteTime:0,channel:j.channel,deltaTime:0,programNumber:j.instrument.number,type:"programChange"}}function g(j){return{absoluteTime:0,deltaTime:0,meta:!0,text:j,type:"trackName"}}function y(j){return{absoluteTime:j.ticks,deltaTime:0,meta:!0,microsecondsPerBeat:Math.floor(6e7/j.bpm),type:"setTempo"}}function b(j){return{absoluteTime:j.ticks,deltaTime:0,denominator:j.timeSignature[1],meta:!0,metronome:24,numerator:j.timeSignature[0],thirtyseconds:8,type:"timeSignature"}}function w(j){var P=r.keySignatureKeys.indexOf(j.key);return{absoluteTime:j.ticks,deltaTime:0,key:P+7,meta:!0,scale:j.scale==="major"?0:1,type:"keySignature"}}function E(j){return{absoluteTime:j.ticks,deltaTime:0,meta:!0,text:j.text,type:j.type}}function C(j){var P={header:{format:1,numTracks:j.tracks.length+1,ticksPerBeat:j.header.ppq},tracks:e([e(e(e(e([{absoluteTime:0,deltaTime:0,meta:!0,text:j.header.name,type:"trackName"}],j.header.keySignatures.map(function(A){return w(A)}),!0),j.header.meta.map(function(A){return E(A)}),!0),j.header.tempos.map(function(A){return y(A)}),!0),j.header.timeSignatures.map(function(A){return b(A)}),!0)],j.tracks.map(function(A){return e(e(e([g(A.name),p(A)],a(A),!0),d(A),!0),m(A),!0)}),!0)};return P.tracks=P.tracks.map(function(A){A=A.sort(function(k,R){return k.absoluteTime-R.absoluteTime});var D=0;return A.forEach(function(k){k.deltaTime=k.absoluteTime-D,D=k.absoluteTime,delete k.absoluteTime}),A.push({deltaTime:0,meta:!0,type:"endOfTrack"}),A}),new Uint8Array((0,n.writeMidi)(P))}return co.encode=C,co}var Eg;function RC(){return Eg||(Eg=1,function(e){var n=ao&&ao.__awaiter||function(g,y,b,w){function E(C){return C instanceof b?C:new b(function(j){j(C)})}return new(b||(b=Promise))(function(C,j){function P(k){try{D(w.next(k))}catch(R){j(R)}}function A(k){try{D(w.throw(k))}catch(R){j(R)}}function D(k){k.done?C(k.value):E(k.value).then(P,A)}D((w=w.apply(g,y||[])).next())})},r=ao&&ao.__generator||function(g,y){var b={label:0,sent:function(){if(C[0]&1)throw C[1];return C[1]},trys:[],ops:[]},w,E,C,j;return j={next:P(0),throw:P(1),return:P(2)},typeof Symbol=="function"&&(j[Symbol.iterator]=function(){return this}),j;function P(D){return function(k){return A([D,k])}}function A(D){if(w)throw new TypeError("Generator is already executing.");for(;b;)try{if(w=1,E&&(C=D[0]&2?E.return:D[0]?E.throw||((C=E.return)&&C.call(E),0):E.next)&&!(C=C.call(E,D[1])).done)return C;switch(E=0,C&&(D=[D[0]&2,C.value]),D[0]){case 0:case 1:C=D;break;case 4:return b.label++,{value:D[1],done:!1};case 5:b.label++,E=D[1],D=[0];continue;case 7:D=b.ops.pop(),b.trys.pop();continue;default:if(C=b.trys,!(C=C.length>0&&C[C.length-1])&&(D[0]===6||D[0]===2)){b=0;continue}if(D[0]===3&&(!C||D[1]>C[0]&&D[1]<C[3])){b.label=D[1];break}if(D[0]===6&&b.label<C[1]){b.label=C[1],C=D;break}if(C&&b.label<C[2]){b.label=C[2],b.ops.push(D);break}C[2]&&b.ops.pop(),b.trys.pop();continue}D=y.call(g,b)}catch(k){D=[6,k],E=0}finally{w=C=0}if(D[0]&5)throw D[1];return{value:D[0]?D[1]:void 0,done:!0}}};Object.defineProperty(e,"__esModule",{value:!0}),e.Header=e.Track=e.Midi=void 0;var s=Zv(),i=fd(),a=Cg(),c=TC(),d=function(){function g(y){var b=this,w=null;if(y){var E=y instanceof ArrayBuffer?new Uint8Array(y):y;w=(0,s.parseMidi)(E),w.tracks.forEach(function(C){var j=0;C.forEach(function(P){j+=P.deltaTime,P.absoluteTime=j})}),w.tracks=p(w.tracks)}this.header=new i.Header(w),this.tracks=[],y&&(this.tracks=w.tracks.map(function(C){return new a.Track(C,b.header)}),w.header.format===1&&this.tracks[0].duration===0&&this.tracks.shift())}return g.fromUrl=function(y){return n(this,void 0,void 0,function(){var b,w;return r(this,function(E){switch(E.label){case 0:return[4,fetch(y)];case 1:return b=E.sent(),b.ok?[4,b.arrayBuffer()]:[3,3];case 2:return w=E.sent(),[2,new g(w)];case 3:throw new Error("Could not load '".concat(y,"'"))}})})},Object.defineProperty(g.prototype,"name",{get:function(){return this.header.name},set:function(y){this.header.name=y},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"duration",{get:function(){var y=this.tracks.map(function(b){return b.duration});return Math.max.apply(Math,y)},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"durationTicks",{get:function(){var y=this.tracks.map(function(b){return b.durationTicks});return Math.max.apply(Math,y)},enumerable:!1,configurable:!0}),g.prototype.addTrack=function(){var y=new a.Track(void 0,this.header);return this.tracks.push(y),y},g.prototype.toArray=function(){return(0,c.encode)(this)},g.prototype.toJSON=function(){return{header:this.header.toJSON(),tracks:this.tracks.map(function(y){return y.toJSON()})}},g.prototype.fromJSON=function(y){var b=this;this.header=new i.Header,this.header.fromJSON(y.header),this.tracks=y.tracks.map(function(w){var E=new a.Track(void 0,b.header);return E.fromJSON(w),E})},g.prototype.clone=function(){var y=new g;return y.fromJSON(this.toJSON()),y},g}();e.Midi=d;var h=Cg();Object.defineProperty(e,"Track",{enumerable:!0,get:function(){return h.Track}});var m=fd();Object.defineProperty(e,"Header",{enumerable:!0,get:function(){return m.Header}});function p(g){for(var y=[],b=0;b<g.length;b++)for(var w=y.length,E=new Map,C=Array(16).fill(0),j=0,P=g[b];j<P.length;j++){var A=P[j],D=w,k=A.channel;if(k!==void 0){A.type==="programChange"&&(C[k]=A.programNumber);var R=C[k],O="".concat(R," ").concat(k);E.has(O)?D=E.get(O):(D=w+E.size,E.set(O,D))}y[D]||y.push([]),y[D].push(A)}return y}}(ao)),ao}var MC=RC();const OC=()=>{const[e,n]=N.useState(!1),r=N.useRef(null),s=N.useRef(new Map),i=N.useCallback((p,g)=>{r.current={notes:[],bpm:p,subdivision:g},s.current.clear(),n(!0),console.log("MIDI Recording started at BPM:",p,"Subdivision:",g)},[]),a=N.useCallback((p,g)=>{!r.current||!e||s.current.set(p,g)},[e]),c=N.useCallback((p,g,y)=>{if(!r.current||!e)return;const b=s.current.get(p);if(b===void 0)return;const w=y;r.current.notes.push({note:p,step:b,duration:w}),s.current.delete(p)},[e]),d=N.useCallback(()=>{if(!r.current)return null;s.current.forEach((g,y)=>{r.current.notes.push({note:y,step:g,duration:.9})}),s.current.clear(),n(!1);const p=r.current;return r.current=null,console.log("MIDI Recording stopped. Recorded notes:",p.notes.length),p},[]),h=N.useCallback(p=>{const g=new MC.Midi;g.header.setTempo(p.bpm);const y=g.addTrack(),E=60/p.bpm*p.subdivision;p.notes.forEach(P=>{const A=P.step*E,D=P.duration*E;y.addNote({midi:P.note,time:A,duration:D,velocity:.8})});const j=g.toArray().buffer.slice(0);return new Blob([j],{type:"audio/midi"})},[]),m=N.useCallback((p,g="recording.mid")=>{const y=h(p),b=URL.createObjectURL(y),w=document.createElement("a");w.href=b,w.download=g,document.body.appendChild(w),w.click(),document.body.removeChild(w),URL.revokeObjectURL(b)},[h]);return{isRecording:e,startRecording:i,stopRecording:d,recordNoteOn:a,recordNoteOff:c,downloadMidi:m}},_C=e=>{if(!e||e.length===0)return"C";const n=e.charAt(0).toUpperCase(),r=e.slice(1);let i={C:0,D:2,E:4,F:5,G:7,A:9,B:11}[n];if(i===void 0)return"C";const a=(r.match(/#/g)||[]).length,c=(r.match(/b/g)||[]).length;return i+=a-c,i=(i%12+12)%12,["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"][i]},LC=({className:e=""})=>{const[n,r]=N.useState(!1),{isRecording:s,startRecording:i,stopRecording:a,recordNoteOn:c,recordNoteOff:d,downloadMidi:h}=OC(),{globalPatternState:m}=lt(),{activeNotes:p,activeChordIndex:g,addedChords:y}=Re(),{pianoSettings:b}=ar(),w=N.useRef(null),E=N.useRef(-1),C=N.useRef(null);N.useEffect(()=>{if(m.isPlaying&&!s&&n)i(m.bpm,m.subdivision),C.current=null,E.current=-1;else if((!m.isPlaying||!n)&&s){const A=a();A&&A.notes.length>0&&(C.current=A),E.current=-1}},[m.isPlaying,m.bpm,m.subdivision,s,i,a,n]),N.useEffect(()=>{if(!s||!m.isPlaying||m.currentStep===E.current)return;const A=g!==null&&y[g]?y[g].pattern:m.currentPattern;if(!A||A.length===0)return;const D=m.currentStep%A.length,k=A[D],O=((M,q)=>{if(M==="x"||M==="X")return null;const te=M.includes("+"),oe=M.includes("-"),Z=parseInt(M.replace(/[+-]/g,""))-1;return Z>=0&&Z<q?{noteIndex:Z,octaveUp:te,octaveDown:oe}:null})(k,p.length);if(w.current!==null&&(d(w.current,m.currentStep,b.noteDuration),w.current=null),O&&p.length>0){const{noteIndex:M,octaveUp:q,octaveDown:te}=O,{note:oe,octave:Z=4}=p[M];let Q=Z;q&&(Q+=1),te&&(Q-=1),Q=Math.max(1,Math.min(8,Q));const se=mn.fromNote(`${_C(oe)}${Q}`);c(se,m.currentStep),w.current=se}E.current=m.currentStep},[m.currentStep,m.isPlaying,s,p,g,y,m.currentPattern,b.noteDuration,c,d]),N.useEffect(()=>()=>{w.current!==null&&s&&d(w.current,m.currentStep,b.noteDuration)},[d,s,m.currentStep,b.noteDuration]);const j=()=>{if(C.current){const A=new Date().toISOString().replace(/[:.]/g,"-").slice(0,-5);h(C.current,`modal-chordbuildr-${A}.mid`)}},P=()=>{if(r(!n),n&&s){const A=a();A&&A.notes.length>0&&(C.current=A)}};return u.jsxs("div",{className:`space-t-4 ${e}`,children:[u.jsxs("div",{className:"flex items-center justify-between p-3 bg-mcb-elevated rounded-lg border border-mcb-primary",children:[u.jsxs("div",{className:"flex flex-col text-left",children:[u.jsx("span",{className:"text-xs uppercase font-medium text-[var(--mcb-text-tertiary)] text-left mr-6",children:"MIDI Recording"}),u.jsxs("div",{className:"flex items-center space-x-2",children:[s&&u.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse mt-[0.1em] mr-[0.25em]"}),u.jsx("span",{className:`text-xs ${s?"text-red-300 font-medium":"text-[var(--mcb-text-tertiary)]"}`,children:n?s?"Recording MIDI":(C.current,"Ready to record"):"Disabled"})]})]}),u.jsx("button",{onClick:P,className:`relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-[var(--mcb-accent-primary)] focus:ring-offset-2 focus:ring-offset-gray-800 ${n?"bg-[var(--mcb-accent-secondary)]":"bg-[var(--mcb-border-secondary)]"}`,role:"switch","aria-checked":n,"aria-label":"Toggle MIDI recording",children:u.jsx("span",{"aria-hidden":"true",className:`pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ${n?"translate-x-5":"translate-x-0"}`})})]}),!s&&C.current&&u.jsx("div",{className:"mt-3",children:u.jsxs("button",{onClick:j,className:"flex items-center space-x-2 px-3 py-1.5 h-8 bg-[var(--mcb-success-primary)] hover:bg-[var(--mcb-success-secondary)] text-white rounded transition-colors text-xs font-medium uppercase tracking-wide",children:[u.jsx(NN,{className:"w-4 h-4"}),u.jsx("span",{children:"Save"})]})})]})},FC=N.lazy(()=>Qw(()=>import("./PatternNotationHelpModal-D3Bfwudx.js"),[])),Os=[{value:.125,symbol:"",name:"32nd notes"},{value:.25,symbol:"",name:"16th notes"},{value:.5,symbol:"",name:"8th notes"},{value:1,symbol:"",name:"Quarter notes"},{value:2,symbol:"",name:"Half notes"}],hd=N.memo(({stepIndex:e,stepValue:n,maxNotes:r,onStepChange:s})=>{const i=N.useMemo(()=>{const m=[""];for(let p=1;p<=r;p++)m.push(String(p)),m.push(`${p}`);return m},[r]),c=(()=>{if(n==="x")return"";const m=parseInt(n.replace("+",""));return!isNaN(m)&&m>r?"":n.replace("+","")})(),d=n!=="x"&&c==="",h=m=>{let p=m;m===""?p="x":m.includes("")&&(p=m.replace("","+")),s(e,p)};return u.jsx("div",{className:"relative",children:u.jsx(sr,{value:c,onChange:h,options:i,className:"w-full",buttonClassName:`w-full h-10 text-xs pl-2.5 ${n==="x"?"bg-mcb-secondary border-gray-700 text-mcb-tertiary":d?"bg-mcb-secondary border-gray-700 text-orange-400":"bg-mcb-secondary border-mcb-primary text-mcb-primary hover:bg-mcb-hover"} border rounded transition-all duration-200`})})});hd.displayName="StepEditor";const BC=()=>{const e=Re(_=>_.addedChords),n=Re(_=>_.activeChordIndex),r=Re(_=>_.updateChordPattern),s=lt(_=>_.currentlyActivePattern),i=lt(_=>_.globalPatternState),a=lt(_=>_.setGlobalPatternState),c=lt(_=>_.updatePattern),[d,h]=N.useState(!1),[m,p]=N.useState(!0),[g,y]=N.useState("1,2,3,4"),[b,w]=N.useState(!1),E=N.useRef(n),C=N.useRef(r),j=N.useRef(a);N.useEffect(()=>{E.current=n},[n]),N.useEffect(()=>{C.current=r},[r]),N.useEffect(()=>{j.current=a},[a]);const P=N.useMemo(()=>n!==null?e[n]:null,[n,e]),A=P?.pattern??i.currentPattern,D=N.useMemo(()=>P?{type:"chord",title:`Pattern for "${P.name}"`,description:"Editing pattern for this specific chord",chordName:P.name}:{type:"current",title:"Global Pattern",description:"Base pattern - becomes active when no chord is selected",chordName:null},[P]),k=N.useMemo(()=>{if(P){const _=P.notes.split(",").map(L=>L.trim()).filter(L=>L);return new Set(_.map(L=>L.replace(/\d+$/,""))).size}return 4},[P]),R=N.useMemo(()=>{const _=Math.min(4,k);return Math.max(_,k)},[k]);N.useEffect(()=>{A&&y(A.join(","))},[A]);const O=N.useCallback(()=>{const _=!i.isPlaying;j.current({isPlaying:_})},[i.isPlaying]);N.useCallback(()=>{j.current({isPlaying:!1,currentStep:0})},[]);const M=N.useCallback(_=>{const I=E.current;I!==null?C.current(I,_):j.current({currentPattern:_})},[]),q=N.useCallback((_,I)=>{const L=[...A];L[_]=I,M(L)},[A,M]),te=N.useCallback(()=>{if(A.length<16){const _=[...A,"x"];M(_)}},[A,M]),oe=N.useCallback(()=>{if(A.length>1){const _=A.slice(0,-1);M(_)}},[A,M]),Z=N.useCallback(()=>{try{const _=g.split(",").map(I=>I.trim()).filter(I=>I);_.length>0&&M(_)}catch{console.error("Invalid pattern format")}},[g,M]),Q=N.useCallback(_=>{M(_.pattern)},[M]),se=N.useMemo(()=>cC(_=>{c(_)},50),[c]),K=N.useMemo(()=>i.isPlaying?i.currentStep%A.length:-1,[i.isPlaying,i.currentStep,A.length]),J=Os.map(_=>`${_.symbol} ${_.name}`),re=Os.find(_=>_.value===i.subdivision),W=re?`${re.symbol} ${re.name}`:`${Os[1].symbol} ${Os[1].name}`,$=N.useMemo(()=>{const _=window.innerWidth>=768?8:4,I=Array.from({length:Math.ceil(A.length/_)},(L,G)=>{const ee=G*_,ue=Math.min(ee+_,A.length);return{startIndex:ee,endIndex:ue,steps:A.slice(ee,ue)}});return{cols:_,rows:I}},[A]);return u.jsx("div",{className:"w-full max-w-7xl mx-auto px-2 mt-4",children:u.jsxs("div",{className:"bg-mcb-secondary border border-mcb-primary rounded-lg overflow-hidden",children:[u.jsxs("div",{className:"px-4 py-3",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("h2",{className:"text-sm font-bold text-mcb-secondary uppercase tracking-wider",children:"Sequencer"}),u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx("button",{onClick:()=>h(!d),className:"w-[7em] h-8 flex items-center space-x-2 px-3 py-1.5 text-xs text-mcb-secondary hover:text-mcb-primary bg-mcb-hover hover:bg-mcb-active border border-mcb-primary rounded transition-all duration-200",children:d?u.jsxs(u.Fragment,{children:[u.jsx(qs,{className:"w-3 h-3"}),u.jsx("span",{children:"Hide"})]}):u.jsxs(u.Fragment,{children:[u.jsx(ho,{className:"w-3 h-3"}),u.jsx("span",{children:"Show"})]})}),u.jsx(zt,{onClick:O,variant:"play-stop",size:"sm",active:i.isPlaying,className:"shadow-lg",children:i.isPlaying?u.jsxs(u.Fragment,{children:[u.jsx(Ks,{className:"w-6 h-6"}),u.jsx("span",{className:"hidden sm:inline",children:"Stop"})]}):u.jsxs(u.Fragment,{children:[u.jsx(Ys,{className:"w-6 h-6"}),u.jsx("span",{className:"hidden sm:inline",children:"Play"})]})})]})]}),u.jsx("div",{className:"mt-3 pt-3 border-t border-mcb-primary",children:u.jsx(LC,{})})]}),u.jsxs("div",{className:`transition-all duration-300 ease-in-out overflow-hidden ${d?" opacity-100":"max-h-0 opacity-0"}`,children:[u.jsxs("div",{className:"border-t border-mcb-primary bg-mcb-tertiary",children:[u.jsxs("div",{className:"px-4 py-3 border-b border-mcb-primary bg-mcb-secondary",children:[u.jsxs("div",{className:"flex items-center justify-between sm:hidden",children:[u.jsxs("div",{className:"flex items-center space-x-1",children:[u.jsx("button",{onClick:oe,disabled:A.length<=1,className:"flex items-center justify-center w-7 h-7 bg-mcb-hover hover:bg-[var(--mcb-danger-primary)] disabled:opacity-50 disabled:cursor-not-allowed text-xs rounded transition-all duration-200 text-mcb-primary hover:text-white disabled:hover:bg-mcb-hover disabled:hover:text-mcb-primary",title:"Remove step",children:u.jsx(Ip,{className:"w-3 h-3"})}),u.jsx("div",{className:"text-xs text-mcb-secondary font-mono w-8 text-center",children:A.length}),u.jsx("button",{onClick:te,disabled:A.length>=16,className:"flex items-center justify-center w-7 h-7 bg-mcb-hover hover:bg-[var(--mcb-accent-secondary)] disabled:opacity-50 disabled:cursor-not-allowed text-xs rounded transition-all duration-200 text-mcb-primary hover:text-white disabled:hover:bg-mcb-hover disabled:hover:text-mcb-primary",title:"Add step",children:u.jsx(Pp,{className:"w-3 h-3"})})]}),u.jsx("div",{children:D.chordName?u.jsx("div",{className:"text-xs font-medium text-[var(--mcb-purple-text)] bg-[var(--mcb-purple-bg)] px-2 py-1 rounded border border-[var(--mcb-purple-border)]",children:D.chordName}):u.jsx("div",{className:"text-xs text-[var(--mcb-cyan-text)] bg-[var(--mcb-cyan-bg)] px-2 py-1 rounded border border-[var(--mcb-cyan-border)]",children:"Global Pattern"})})]}),u.jsxs("div",{className:"hidden sm:flex sm:items-center sm:justify-between",children:[u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx("span",{className:"text-xs text-mcb-tertiary font-medium",children:"Pattern:"}),u.jsxs("div",{className:"text-xs text-mcb-secondary font-mono bg-mcb-hover px-2 py-1 rounded",children:[A.length," steps"]})]}),D.chordName&&u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("span",{className:"text-xs text-mcb-tertiary",children:"for"}),u.jsx("div",{className:"text-xs font-medium text-[var(--mcb-purple-text)] bg-[var(--mcb-purple-bg)] px-2 py-1 rounded border border-[var(--mcb-purple-border)]",children:D.chordName})]}),!D.chordName&&u.jsx("div",{className:"text-xs text-[var(--mcb-cyan-text)] bg-[var(--mcb-cyan-bg)] px-2 py-1 rounded border border-[var(--mcb-cyan-border)]",children:"Global Pattern"})]}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("span",{className:"text-xs text-mcb-tertiary",children:"Steps:"}),u.jsxs("div",{className:"flex items-center space-x-1",children:[u.jsx("button",{onClick:oe,disabled:A.length<=1,className:"flex items-center justify-center w-7 h-7 bg-mcb-hover hover:bg-[var(--mcb-danger-primary)] disabled:opacity-50 disabled:cursor-not-allowed text-xs rounded transition-all duration-200 text-mcb-primary hover:text-white disabled:hover:bg-mcb-hover disabled:hover:text-mcb-primary",title:"Remove step",children:u.jsx(Ip,{className:"w-3 h-3"})}),u.jsx("div",{className:"text-xs text-mcb-secondary font-mono w-8 text-center",children:A.length}),u.jsx("button",{onClick:te,disabled:A.length>=16,className:"flex items-center justify-center w-7 h-7 bg-mcb-hover hover:bg-[var(--mcb-accent-secondary)] disabled:opacity-50 disabled:cursor-not-allowed text-xs rounded transition-all duration-200 text-mcb-primary hover:text-white disabled:hover:bg-mcb-hover disabled:hover:text-mcb-primary",title:"Add step",children:u.jsx(Pp,{className:"w-3 h-3"})})]})]})]})]}),u.jsxs("div",{className:"p-6 px-3 sm:px-4",children:[u.jsx("div",{className:"block md:hidden",children:$.rows.map((_,I)=>u.jsxs("div",{className:"mb-4 last:mb-0",children:[u.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[_.steps.map((L,G)=>{const ee=_.startIndex+G;return u.jsx(hd,{stepIndex:ee,stepValue:L,maxNotes:R,onStepChange:q},ee)}),Array.from({length:4-_.steps.length},(L,G)=>u.jsx("div",{},`empty-${G}`))]}),u.jsxs("div",{className:"grid grid-cols-4 gap-2 mt-2",children:[_.steps.map((L,G)=>{const ee=_.startIndex+G;return u.jsx("div",{className:"flex justify-center",children:u.jsx("div",{className:`transition-all duration-200 ${K===ee?"w-full h-1 bg-[var(--mcb-accent-text-primary)] rounded-full":"w-full h-1 bg-[var(--mcb-border-primary)] rounded-full"}`})},`indicator-${ee}`)}),Array.from({length:4-_.steps.length},(L,G)=>u.jsx("div",{},`empty-indicator-${G}`))]})]},`mobile-row-${I}`))}),u.jsx("div",{className:"hidden md:block",children:$.rows.map((_,I)=>u.jsxs("div",{className:"mb-4 last:mb-0",children:[u.jsxs("div",{className:"grid grid-cols-8 gap-2",children:[_.steps.map((L,G)=>{const ee=_.startIndex+G;return u.jsx(hd,{stepIndex:ee,stepValue:L,maxNotes:R,onStepChange:q},ee)}),Array.from({length:8-_.steps.length},(L,G)=>u.jsx("div",{},`empty-${G}`))]}),u.jsxs("div",{className:"grid grid-cols-8 gap-2 mt-2",children:[_.steps.map((L,G)=>{const ee=_.startIndex+G;return u.jsx("div",{className:"flex justify-center",children:u.jsx("div",{className:`transition-all duration-200 ${K===ee?"w-full h-1 bg-[var(--mcb-accent-text-primary)] rounded-full shadow-lg shadow-[var(--mcb-accent-text-primary)]/50":"w-full h-1 bg-[var(--mcb-border-primary)] rounded-full"}`})},`indicator-${ee}`)}),Array.from({length:8-_.steps.length},(L,G)=>u.jsx("div",{},`empty-indicator-${G}`))]})]},`desktop-row-${I}`))})]})]}),u.jsxs("div",{className:"bg-mcb-secondary border-t border-mcb-primary",children:[u.jsx("div",{className:"px-4 py-3 border-b border-mcb-primary",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("h3",{className:"text-sm font-medium text-mcb-primary uppercase tracking-wider",children:"Settings"}),u.jsx("button",{onClick:()=>p(!m),className:"w-[7em] h-8 flex items-center space-x-2 px-3 py-1.5 text-xs text-mcb-secondary hover:text-mcb-primary bg-mcb-hover hover:bg-mcb-active border border-mcb-primary rounded transition-all duration-200",children:m?u.jsxs(u.Fragment,{children:[u.jsx(qs,{className:"w-3 h-3"}),u.jsx("span",{children:"Hide"})]}):u.jsxs(u.Fragment,{children:[u.jsx(ho,{className:"w-3 h-3"}),u.jsx("span",{children:"Show"})]})})]})}),u.jsx("div",{className:`transition-all duration-300 ease-in-out overflow-hidden ${m?" opacity-100":"max-h-0 opacity-0"}`,children:u.jsx("div",{className:"p-6 bg-mcb-tertiary",children:u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-x-8 gap-y-6",children:[u.jsxs("div",{className:"space-y-6",children:[u.jsx("div",{children:u.jsx("label",{className:"block text-xs font-medium text-mcb-primary mb-2 uppercase tracking-wide",children:"Timing"})}),u.jsx(Ot,{label:"BPM",value:i.bpm,min:60,max:200,step:1,onChange:_=>se({bpm:Math.round(_)}),showMinMax:!0,minLabel:"60",maxLabel:"200"}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-medium text-mcb-primary mb-2 uppercase tracking-wide",children:"Subdivision"}),u.jsx(sr,{value:W,onChange:_=>{const I=Os.find(L=>`${L.symbol} ${L.name}`===_);I&&se({subdivision:I.value})},options:J,className:"w-full",buttonClassName:"w-full p-3 bg-mcb-secondary border border-mcb-primary rounded text-mcb-primary text-xs focus:border-[var(--mcb-accent-primary)] transition-colors hover:bg-mcb-hover"})]}),u.jsx(Ot,{label:"Swing",value:i.swing,min:0,max:50,step:1,suffix:"%",onChange:_=>se({swing:Math.round(_)}),showMinMax:!0,minLabel:"0%",maxLabel:"50%"})]}),u.jsx(NC,{chordNoteCount:k,maxAvailableNotes:R,hideFewerNotePatterns:b,onHideFewerNotePatternsChange:w,onApplyPreset:Q,currentPattern:s}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("label",{className:"block text-xs font-medium text-mcb-primary uppercase tracking-wide",children:"Custom"}),u.jsx(ve.Suspense,{fallback:u.jsx("div",{className:"w-4 h-4"}),children:u.jsx(FC,{})})]}),u.jsxs("div",{className:"space-y-3",children:[u.jsx("input",{type:"text",value:g,onChange:_=>y(_.target.value),onKeyPress:_=>_.key==="Enter"&&Z(),placeholder:"1,x,3,2+",className:"w-full p-2 bg-mcb-secondary border border-mcb-primary rounded text-mcb-primary text-xs focus:border-[var(--mcb-accent-primary)] transition-colors placeholder-[var(--mcb-text-disabled)]"}),u.jsx("button",{onClick:Z,className:"w-full px-3 py-2 bg-[var(--mcb-accent-secondary)] hover:bg-[var(--mcb-accent-tertiary)] text-white rounded text-xs font-medium transition-colors uppercase tracking-wide",children:"Apply Pattern"})]})]})]})})})]})]})]})})};function Jt(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var $C=typeof Symbol=="function"&&Symbol.observable||"@@observable",Dg=$C,jg=()=>Math.random().toString(36).substring(7).split("").join("."),GC={INIT:`@@redux/INIT${jg()}`,REPLACE:`@@redux/REPLACE${jg()}`},Ag=GC;function UC(e){if(typeof e!="object"||e===null)return!1;let n=e;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(e)===n||Object.getPrototypeOf(e)===null}function ry(e,n,r){if(typeof e!="function")throw new Error(Jt(2));if(typeof n=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Jt(0));if(typeof n=="function"&&typeof r>"u"&&(r=n,n=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Jt(1));return r(ry)(e,n)}let s=e,i=n,a=new Map,c=a,d=0,h=!1;function m(){c===a&&(c=new Map,a.forEach((C,j)=>{c.set(j,C)}))}function p(){if(h)throw new Error(Jt(3));return i}function g(C){if(typeof C!="function")throw new Error(Jt(4));if(h)throw new Error(Jt(5));let j=!0;m();const P=d++;return c.set(P,C),function(){if(j){if(h)throw new Error(Jt(6));j=!1,m(),c.delete(P),a=null}}}function y(C){if(!UC(C))throw new Error(Jt(7));if(typeof C.type>"u")throw new Error(Jt(8));if(typeof C.type!="string")throw new Error(Jt(17));if(h)throw new Error(Jt(9));try{h=!0,i=s(i,C)}finally{h=!1}return(a=c).forEach(P=>{P()}),C}function b(C){if(typeof C!="function")throw new Error(Jt(10));s=C,y({type:Ag.REPLACE})}function w(){const C=g;return{subscribe(j){if(typeof j!="object"||j===null)throw new Error(Jt(11));function P(){const D=j;D.next&&D.next(p())}return P(),{unsubscribe:C(P)}},[Dg](){return this}}}return y({type:Ag.INIT}),{dispatch:y,subscribe:g,getState:p,replaceReducer:b,[Dg]:w}}function kg(e,n){return function(...r){return n(e.apply(this,r))}}function Ig(e,n){if(typeof e=="function")return kg(e,n);if(typeof e!="object"||e===null)throw new Error(Jt(16));const r={};for(const s in e){const i=e[s];typeof i=="function"&&(r[s]=kg(i,n))}return r}function oy(...e){return e.length===0?n=>n:e.length===1?e[0]:e.reduce((n,r)=>(...s)=>n(r(...s)))}function VC(...e){return n=>(r,s)=>{const i=n(r,s);let a=()=>{throw new Error(Jt(15))};const c={getState:i.getState,dispatch:(h,...m)=>a(h,...m)},d=e.map(h=>h(c));return a=oy(...d)(i.dispatch),{...i,dispatch:a}}}var Lu={exports:{}},Fu={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pg;function zC(){if(Pg)return Fu;Pg=1;var e=qa();function n(h,m){return h===m&&(h!==0||1/h===1/m)||h!==h&&m!==m}var r=typeof Object.is=="function"?Object.is:n,s=e.useSyncExternalStore,i=e.useRef,a=e.useEffect,c=e.useMemo,d=e.useDebugValue;return Fu.useSyncExternalStoreWithSelector=function(h,m,p,g,y){var b=i(null);if(b.current===null){var w={hasValue:!1,value:null};b.current=w}else w=b.current;b=c(function(){function C(k){if(!j){if(j=!0,P=k,k=g(k),y!==void 0&&w.hasValue){var R=w.value;if(y(R,k))return A=R}return A=k}if(R=A,r(P,k))return R;var O=g(k);return y!==void 0&&y(R,O)?(P=k,R):(P=k,A=O)}var j=!1,P,A,D=p===void 0?null:p;return[function(){return C(m())},D===null?void 0:function(){return C(D())}]},[m,p,g,y]);var E=s(h,b[0],b[1]);return a(function(){w.hasValue=!0,w.value=E},[E]),d(E),E},Fu}var Tg;function WC(){return Tg||(Tg=1,Lu.exports=zC()),Lu.exports}WC();var HC=N.version.startsWith("19"),qC=Symbol.for(HC?"react.transitional.element":"react.element"),KC=Symbol.for("react.portal"),YC=Symbol.for("react.fragment"),QC=Symbol.for("react.strict_mode"),XC=Symbol.for("react.profiler"),JC=Symbol.for("react.consumer"),ZC=Symbol.for("react.context"),sy=Symbol.for("react.forward_ref"),eS=Symbol.for("react.suspense"),tS=Symbol.for("react.suspense_list"),$d=Symbol.for("react.memo"),nS=Symbol.for("react.lazy"),rS=sy,oS=$d;function sS(e){if(typeof e=="object"&&e!==null){const{$$typeof:n}=e;switch(n){case qC:switch(e=e.type,e){case YC:case XC:case QC:case eS:case tS:return e;default:switch(e=e&&e.$$typeof,e){case ZC:case sy:case nS:case $d:return e;case JC:return e;default:return n}}case KC:return n}}}function iS(e){return sS(e)===$d}function aS(e,n,r,s,{areStatesEqual:i,areOwnPropsEqual:a,areStatePropsEqual:c}){let d=!1,h,m,p,g,y;function b(P,A){return h=P,m=A,p=e(h,m),g=n(s,m),y=r(p,g,m),d=!0,y}function w(){return p=e(h,m),n.dependsOnOwnProps&&(g=n(s,m)),y=r(p,g,m),y}function E(){return e.dependsOnOwnProps&&(p=e(h,m)),n.dependsOnOwnProps&&(g=n(s,m)),y=r(p,g,m),y}function C(){const P=e(h,m),A=!c(P,p);return p=P,A&&(y=r(p,g,m)),y}function j(P,A){const D=!a(A,m),k=!i(P,h,A,m);return h=P,m=A,D&&k?w():D?E():k?C():y}return function(A,D){return d?j(A,D):b(A,D)}}function lS(e,{initMapStateToProps:n,initMapDispatchToProps:r,initMergeProps:s,...i}){const a=n(e,i),c=r(e,i),d=s(e,i);return aS(a,c,d,e,i)}function cS(e,n){const r={};for(const s in e){const i=e[s];typeof i=="function"&&(r[s]=(...a)=>n(i(...a)))}return r}function md(e){return function(r){const s=e(r);function i(){return s}return i.dependsOnOwnProps=!1,i}}function Rg(e){return e.dependsOnOwnProps?!!e.dependsOnOwnProps:e.length!==1}function iy(e,n){return function(s,{displayName:i}){const a=function(d,h){return a.dependsOnOwnProps?a.mapToProps(d,h):a.mapToProps(d,void 0)};return a.dependsOnOwnProps=!0,a.mapToProps=function(d,h){a.mapToProps=e,a.dependsOnOwnProps=Rg(e);let m=a(d,h);return typeof m=="function"&&(a.mapToProps=m,a.dependsOnOwnProps=Rg(m),m=a(d,h)),m},a}}function Gd(e,n){return(r,s)=>{throw new Error(`Invalid value of type ${typeof e} for ${n} argument when connecting component ${s.wrappedComponentName}.`)}}function uS(e){return e&&typeof e=="object"?md(n=>cS(e,n)):e?typeof e=="function"?iy(e):Gd(e,"mapDispatchToProps"):md(n=>({dispatch:n}))}function dS(e){return e?typeof e=="function"?iy(e):Gd(e,"mapStateToProps"):md(()=>({}))}function fS(e,n,r){return{...r,...e,...n}}function hS(e){return function(r,{displayName:s,areMergedPropsEqual:i}){let a=!1,c;return function(h,m,p){const g=e(h,m,p);return a?i(g,c)||(c=g):(a=!0,c=g),c}}}function mS(e){return e?typeof e=="function"?hS(e):Gd(e,"mergeProps"):()=>fS}function pS(e){e()}function gS(){let e=null,n=null;return{clear(){e=null,n=null},notify(){pS(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let s=e;for(;s;)r.push(s),s=s.next;return r},subscribe(r){let s=!0;const i=n={callback:r,next:null,prev:n};return i.prev?i.prev.next=i:e=i,function(){!s||e===null||(s=!1,i.next?i.next.prev=i.prev:n=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}var Mg={notify(){},get:()=>[]};function ay(e,n){let r,s=Mg,i=0,a=!1;function c(E){p();const C=s.subscribe(E);let j=!1;return()=>{j||(j=!0,C(),g())}}function d(){s.notify()}function h(){w.onStateChange&&w.onStateChange()}function m(){return a}function p(){i++,r||(r=n?n.addNestedSub(h):e.subscribe(h),s=gS())}function g(){i--,r&&i===0&&(r(),r=void 0,s.clear(),s=Mg)}function y(){a||(a=!0,p())}function b(){a&&(a=!1,g())}const w={addNestedSub:c,notifyNestedSubs:d,handleChangeWrapper:h,isSubscribed:m,trySubscribe:y,tryUnsubscribe:b,getListeners:()=>s};return w}var vS=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",yS=vS(),xS=()=>typeof navigator<"u"&&navigator.product==="ReactNative",bS=xS(),NS=()=>yS||bS?N.useLayoutEffect:N.useEffect,Ma=NS();function Og(e,n){return e===n?e!==0||n!==0||1/e===1/n:e!==e&&n!==n}function Bu(e,n){if(Og(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;const r=Object.keys(e),s=Object.keys(n);if(r.length!==s.length)return!1;for(let i=0;i<r.length;i++)if(!Object.prototype.hasOwnProperty.call(n,r[i])||!Og(e[r[i]],n[r[i]]))return!1;return!0}var wS={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},CS={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},SS={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},ly={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},ES={[rS]:SS,[oS]:ly};function _g(e){return iS(e)?ly:ES[e.$$typeof]||wS}var DS=Object.defineProperty,jS=Object.getOwnPropertyNames,Lg=Object.getOwnPropertySymbols,AS=Object.getOwnPropertyDescriptor,kS=Object.getPrototypeOf,Fg=Object.prototype;function pd(e,n){if(typeof n!="string"){if(Fg){const a=kS(n);a&&a!==Fg&&pd(e,a)}let r=jS(n);Lg&&(r=r.concat(Lg(n)));const s=_g(e),i=_g(n);for(let a=0;a<r.length;++a){const c=r[a];if(!CS[c]&&!(i&&i[c])&&!(s&&s[c])){const d=AS(n,c);try{DS(e,c,d)}catch{}}}}return e}var IS=Symbol.for("react-redux-context"),PS=typeof globalThis<"u"?globalThis:{};function TS(){if(!N.createContext)return{};const e=PS[IS]??=new Map;let n=e.get(N.createContext);return n||(n=N.createContext(null),e.set(N.createContext,n)),n}var cy=TS(),RS=[null,null];function MS(e,n,r){Ma(()=>e(...n),r)}function OS(e,n,r,s,i,a){e.current=s,r.current=!1,i.current&&(i.current=null,a())}function _S(e,n,r,s,i,a,c,d,h,m,p){if(!e)return()=>{};let g=!1,y=null;const b=()=>{if(g||!d.current)return;const E=n.getState();let C,j;try{C=s(E,i.current)}catch(P){j=P,y=P}j||(y=null),C===a.current?c.current||m():(a.current=C,h.current=C,c.current=!0,p())};return r.onStateChange=b,r.trySubscribe(),b(),()=>{if(g=!0,r.tryUnsubscribe(),r.onStateChange=null,y)throw y}}function LS(e,n){return e===n}function FS(e,n,r,{pure:s,areStatesEqual:i=LS,areOwnPropsEqual:a=Bu,areStatePropsEqual:c=Bu,areMergedPropsEqual:d=Bu,forwardRef:h=!1,context:m=cy}={}){const p=m,g=dS(e),y=uS(n),b=mS(r),w=!!e;return C=>{const j=C.displayName||C.name||"Component",P=`Connect(${j})`,A={shouldHandleStateChanges:w,displayName:P,wrappedComponentName:j,WrappedComponent:C,initMapStateToProps:g,initMapDispatchToProps:y,initMergeProps:b,areStatesEqual:i,areStatePropsEqual:c,areOwnPropsEqual:a,areMergedPropsEqual:d};function D(O){const[M,q,te]=N.useMemo(()=>{const{reactReduxForwardedRef:Ie,...Xe}=O;return[O.context,Ie,Xe]},[O]),oe=N.useMemo(()=>{let Ie=p;return M?.Consumer,Ie},[M,p]),Z=N.useContext(oe),Q=!!O.store&&!!O.store.getState&&!!O.store.dispatch,se=!!Z&&!!Z.store,K=Q?O.store:Z.store,J=se?Z.getServerState:K.getState,re=N.useMemo(()=>lS(K.dispatch,A),[K]),[W,$]=N.useMemo(()=>{if(!w)return RS;const Ie=ay(K,Q?void 0:Z.subscription),Xe=Ie.notifyNestedSubs.bind(Ie);return[Ie,Xe]},[K,Q,Z]),_=N.useMemo(()=>Q?Z:{...Z,subscription:W},[Q,Z,W]),I=N.useRef(void 0),L=N.useRef(te),G=N.useRef(void 0),ee=N.useRef(!1),ue=N.useRef(!1),fe=N.useRef(void 0);Ma(()=>(ue.current=!0,()=>{ue.current=!1}),[]);const Ee=N.useMemo(()=>()=>G.current&&te===L.current?G.current:re(K.getState(),te),[K,te]),pe=N.useMemo(()=>Xe=>W?_S(w,K,W,re,L,I,ee,ue,G,$,Xe):()=>{},[W]);MS(OS,[L,I,ee,te,G,$]);let Ne;try{Ne=N.useSyncExternalStore(pe,Ee,J?()=>re(J(),te):Ee)}catch(Ie){throw fe.current&&(Ie.message+=`
The error may be correlated with this previous error:
${fe.current.stack}

`),Ie}Ma(()=>{fe.current=void 0,G.current=void 0,I.current=Ne});const be=N.useMemo(()=>N.createElement(C,{...Ne,ref:q}),[q,C,Ne]);return N.useMemo(()=>w?N.createElement(oe.Provider,{value:_},be):be,[oe,be,_])}const R=N.memo(D);if(R.WrappedComponent=C,R.displayName=D.displayName=P,h){const M=N.forwardRef(function(te,oe){return N.createElement(R,{...te,reactReduxForwardedRef:oe})});return M.displayName=P,M.WrappedComponent=C,pd(M,C)}return pd(R,C)}}var uy=FS;function BS(e){const{children:n,context:r,serverState:s,store:i}=e,a=N.useMemo(()=>{const h=ay(i);return{store:i,subscription:h,getServerState:s?()=>s:void 0}},[i,s]),c=N.useMemo(()=>i.getState(),[i]);Ma(()=>{const{subscription:h}=a;return h.onStateChange=h.notifyNestedSubs,h.trySubscribe(),c!==i.getState()&&h.notifyNestedSubs(),()=>{h.tryUnsubscribe(),h.onStateChange=void 0}},[a,c]);const d=r||cy;return N.createElement(d.Provider,{value:a},n)}var $S=BS,GS="Invariant failed";function US(e,n){throw new Error(GS)}var Kn=function(n){var r=n.top,s=n.right,i=n.bottom,a=n.left,c=s-a,d=i-r,h={top:r,right:s,bottom:i,left:a,width:c,height:d,x:a,y:r,center:{x:(s+a)/2,y:(i+r)/2}};return h},Ud=function(n,r){return{top:n.top-r.top,left:n.left-r.left,bottom:n.bottom+r.bottom,right:n.right+r.right}},Bg=function(n,r){return{top:n.top+r.top,left:n.left+r.left,bottom:n.bottom-r.bottom,right:n.right-r.right}},VS=function(n,r){return{top:n.top+r.y,left:n.left+r.x,bottom:n.bottom+r.y,right:n.right+r.x}},$u={top:0,right:0,bottom:0,left:0},Vd=function(n){var r=n.borderBox,s=n.margin,i=s===void 0?$u:s,a=n.border,c=a===void 0?$u:a,d=n.padding,h=d===void 0?$u:d,m=Kn(Ud(r,i)),p=Kn(Bg(r,c)),g=Kn(Bg(p,h));return{marginBox:m,borderBox:Kn(r),paddingBox:p,contentBox:g,margin:i,border:c,padding:h}},_n=function(n){var r=n.slice(0,-2),s=n.slice(-2);if(s!=="px")return 0;var i=Number(r);return isNaN(i)&&US(),i},zS=function(){return{x:window.pageXOffset,y:window.pageYOffset}},Oa=function(n,r){var s=n.borderBox,i=n.border,a=n.margin,c=n.padding,d=VS(s,r);return Vd({borderBox:d,border:i,margin:a,padding:c})},_a=function(n,r){return r===void 0&&(r=zS()),Oa(n,r)},dy=function(n,r){var s={top:_n(r.marginTop),right:_n(r.marginRight),bottom:_n(r.marginBottom),left:_n(r.marginLeft)},i={top:_n(r.paddingTop),right:_n(r.paddingRight),bottom:_n(r.paddingBottom),left:_n(r.paddingLeft)},a={top:_n(r.borderTopWidth),right:_n(r.borderRightWidth),bottom:_n(r.borderBottomWidth),left:_n(r.borderLeftWidth)};return Vd({borderBox:n,margin:s,padding:i,border:a})},fy=function(n){var r=n.getBoundingClientRect(),s=window.getComputedStyle(n);return dy(r,s)},Qs=function(n){var r=[],s=null,i=function(){for(var c=arguments.length,d=new Array(c),h=0;h<c;h++)d[h]=arguments[h];r=d,!s&&(s=requestAnimationFrame(function(){s=null,n.apply(void 0,r)}))};return i.cancel=function(){s&&(cancelAnimationFrame(s),s=null)},i};function La(){return La=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},La.apply(null,arguments)}function hy(e,n){}hy.bind(null,"warn");hy.bind(null,"error");function Wr(){}function WS(e,n){return{...e,...n}}function Bn(e,n,r){const s=n.map(i=>{const a=WS(r,i.options);return e.addEventListener(i.eventName,i.fn,a),function(){e.removeEventListener(i.eventName,i.fn,a)}});return function(){s.forEach(a=>{a()})}}const HS="Invariant failed";class Fa extends Error{}Fa.prototype.toString=function(){return this.message};function de(e,n){throw new Fa(HS)}class qS extends ve.Component{constructor(...n){super(...n),this.callbacks=null,this.unbind=Wr,this.onWindowError=r=>{const s=this.getCallbacks();s.isDragging()&&s.tryAbort(),r.error instanceof Fa&&r.preventDefault()},this.getCallbacks=()=>{if(!this.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return this.callbacks},this.setCallbacks=r=>{this.callbacks=r}}componentDidMount(){this.unbind=Bn(window,[{eventName:"error",fn:this.onWindowError}])}componentDidCatch(n){if(n instanceof Fa){this.setState({});return}throw n}componentWillUnmount(){this.unbind()}render(){return this.props.children(this.setCallbacks)}}const KS=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,Ba=e=>e+1,YS=e=>`
  You have lifted an item in position ${Ba(e.source.index)}
`,my=(e,n)=>{const r=e.droppableId===n.droppableId,s=Ba(e.index),i=Ba(n.index);return r?`
      You have moved the item from position ${s}
      to position ${i}
    `:`
    You have moved the item from position ${s}
    in list ${e.droppableId}
    to list ${n.droppableId}
    in position ${i}
  `},py=(e,n,r)=>n.droppableId===r.droppableId?`
      The item ${e}
      has been combined with ${r.draggableId}`:`
      The item ${e}
      in list ${n.droppableId}
      has been combined with ${r.draggableId}
      in list ${r.droppableId}
    `,QS=e=>{const n=e.destination;if(n)return my(e.source,n);const r=e.combine;return r?py(e.draggableId,e.source,r):"You are over an area that cannot be dropped on"},$g=e=>`
  The item has returned to its starting position
  of ${Ba(e.index)}
`,XS=e=>{if(e.reason==="CANCEL")return`
      Movement cancelled.
      ${$g(e.source)}
    `;const n=e.destination,r=e.combine;return n?`
      You have dropped the item.
      ${my(e.source,n)}
    `:r?`
      You have dropped the item.
      ${py(e.draggableId,e.source,r)}
    `:`
    The item has been dropped while not over a drop area.
    ${$g(e.source)}
  `},Aa={dragHandleUsageInstructions:KS,onDragStart:YS,onDragUpdate:QS,onDragEnd:XS};function JS(e,n){return!!(e===n||Number.isNaN(e)&&Number.isNaN(n))}function gy(e,n){if(e.length!==n.length)return!1;for(let r=0;r<e.length;r++)if(!JS(e[r],n[r]))return!1;return!0}function Be(e,n){const r=N.useState(()=>({inputs:n,result:e()}))[0],s=N.useRef(!0),i=N.useRef(r),c=s.current||!!(n&&i.current.inputs&&gy(n,i.current.inputs))?i.current:{inputs:n,result:e()};return N.useEffect(()=>{s.current=!1,i.current=c},[c]),c.result}function Se(e,n){return Be(()=>e,n)}const Pt={x:0,y:0},_t=(e,n)=>({x:e.x+n.x,y:e.y+n.y}),Sn=(e,n)=>({x:e.x-n.x,y:e.y-n.y}),Hr=(e,n)=>e.x===n.x&&e.y===n.y,Vo=e=>({x:e.x!==0?-e.x:0,y:e.y!==0?-e.y:0}),mo=(e,n,r=0)=>e==="x"?{x:n,y:r}:{x:r,y:n},Xs=(e,n)=>Math.sqrt((n.x-e.x)**2+(n.y-e.y)**2),Gg=(e,n)=>Math.min(...n.map(r=>Xs(e,r))),vy=e=>n=>({x:e(n.x),y:e(n.y)});var ZS=(e,n)=>{const r=Kn({top:Math.max(n.top,e.top),right:Math.min(n.right,e.right),bottom:Math.min(n.bottom,e.bottom),left:Math.max(n.left,e.left)});return r.width<=0||r.height<=0?null:r};const ci=(e,n)=>({top:e.top+n.y,left:e.left+n.x,bottom:e.bottom+n.y,right:e.right+n.x}),Ug=e=>[{x:e.left,y:e.top},{x:e.right,y:e.top},{x:e.left,y:e.bottom},{x:e.right,y:e.bottom}],e2={top:0,right:0,bottom:0,left:0},t2=(e,n)=>n?ci(e,n.scroll.diff.displacement):e,n2=(e,n,r)=>r&&r.increasedBy?{...e,[n.end]:e[n.end]+r.increasedBy[n.line]}:e,r2=(e,n)=>n&&n.shouldClipSubject?ZS(n.pageMarginBox,e):Kn(e);var $o=({page:e,withPlaceholder:n,axis:r,frame:s})=>{const i=t2(e.marginBox,s),a=n2(i,r,n),c=r2(a,s);return{page:e,withPlaceholder:n,active:c}},zd=(e,n)=>{e.frame||de();const r=e.frame,s=Sn(n,r.scroll.initial),i=Vo(s),a={...r,scroll:{initial:r.scroll.initial,current:n,diff:{value:s,displacement:i},max:r.scroll.max}},c=$o({page:e.subject.page,withPlaceholder:e.subject.withPlaceholder,axis:e.axis,frame:a});return{...e,frame:a,subject:c}};function It(e,n=gy){let r=null;function s(...i){if(r&&r.lastThis===this&&n(i,r.lastArgs))return r.lastResult;const a=e.apply(this,i);return r={lastResult:a,lastArgs:i,lastThis:this},a}return s.clear=function(){r=null},s}const yy=It(e=>e.reduce((n,r)=>(n[r.descriptor.id]=r,n),{})),xy=It(e=>e.reduce((n,r)=>(n[r.descriptor.id]=r,n),{})),Za=It(e=>Object.values(e)),o2=It(e=>Object.values(e));var zo=It((e,n)=>o2(n).filter(s=>e===s.descriptor.droppableId).sort((s,i)=>s.descriptor.index-i.descriptor.index));function Wd(e){return e.at&&e.at.type==="REORDER"?e.at.destination:null}function el(e){return e.at&&e.at.type==="COMBINE"?e.at.combine:null}var tl=It((e,n)=>n.filter(r=>r.descriptor.id!==e.descriptor.id)),s2=({isMovingForward:e,draggable:n,destination:r,insideDestination:s,previousImpact:i})=>{if(!r.isCombineEnabled||!Wd(i))return null;function c(b){const w={type:"COMBINE",combine:{draggableId:b,droppableId:r.descriptor.id}};return{...i,at:w}}const d=i.displaced.all,h=d.length?d[0]:null;if(e)return h?c(h):null;const m=tl(n,s);if(!h){if(!m.length)return null;const b=m[m.length-1];return c(b.descriptor.id)}const p=m.findIndex(b=>b.descriptor.id===h);p===-1&&de();const g=p-1;if(g<0)return null;const y=m[g];return c(y.descriptor.id)},Wo=(e,n)=>e.descriptor.droppableId===n.descriptor.id;const by={point:Pt,value:0},Js={invisible:{},visible:{},all:[]},i2={displaced:Js,displacedBy:by,at:null};var $n=(e,n)=>r=>e<=r&&r<=n,Ny=e=>{const n=$n(e.top,e.bottom),r=$n(e.left,e.right);return s=>{if(n(s.top)&&n(s.bottom)&&r(s.left)&&r(s.right))return!0;const a=n(s.top)||n(s.bottom),c=r(s.left)||r(s.right);if(a&&c)return!0;const h=s.top<e.top&&s.bottom>e.bottom,m=s.left<e.left&&s.right>e.right;return h&&m?!0:h&&c||m&&a}},a2=e=>{const n=$n(e.top,e.bottom),r=$n(e.left,e.right);return s=>n(s.top)&&n(s.bottom)&&r(s.left)&&r(s.right)};const Hd={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},wy={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"};var l2=e=>n=>{const r=$n(n.top,n.bottom),s=$n(n.left,n.right);return i=>e===Hd?r(i.top)&&r(i.bottom):s(i.left)&&s(i.right)};const c2=(e,n)=>{const r=n.frame?n.frame.scroll.diff.displacement:Pt;return ci(e,r)},u2=(e,n,r)=>n.subject.active?r(n.subject.active)(e):!1,d2=(e,n,r)=>r(n)(e),qd=({target:e,destination:n,viewport:r,withDroppableDisplacement:s,isVisibleThroughFrameFn:i})=>{const a=s?c2(e,n):e;return u2(a,n,i)&&d2(a,r,i)},f2=e=>qd({...e,isVisibleThroughFrameFn:Ny}),Cy=e=>qd({...e,isVisibleThroughFrameFn:a2}),h2=e=>qd({...e,isVisibleThroughFrameFn:l2(e.destination.axis)}),m2=(e,n,r)=>{if(typeof r=="boolean")return r;if(!n)return!0;const{invisible:s,visible:i}=n;if(s[e])return!1;const a=i[e];return a?a.shouldAnimate:!0};function p2(e,n){const r=e.page.marginBox,s={top:n.point.y,right:0,bottom:0,left:n.point.x};return Kn(Ud(r,s))}function Zs({afterDragging:e,destination:n,displacedBy:r,viewport:s,forceShouldAnimate:i,last:a}){return e.reduce(function(d,h){const m=p2(h,r),p=h.descriptor.id;if(d.all.push(p),!f2({target:m,destination:n,viewport:s,withDroppableDisplacement:!0}))return d.invisible[h.descriptor.id]=!0,d;const y=m2(p,a,i),b={draggableId:p,shouldAnimate:y};return d.visible[p]=b,d},{all:[],visible:{},invisible:{}})}function g2(e,n){if(!e.length)return 0;const r=e[e.length-1].descriptor.index;return n.inHomeList?r:r+1}function Vg({insideDestination:e,inHomeList:n,displacedBy:r,destination:s}){const i=g2(e,{inHomeList:n});return{displaced:Js,displacedBy:r,at:{type:"REORDER",destination:{droppableId:s.descriptor.id,index:i}}}}function $a({draggable:e,insideDestination:n,destination:r,viewport:s,displacedBy:i,last:a,index:c,forceShouldAnimate:d}){const h=Wo(e,r);if(c==null)return Vg({insideDestination:n,inHomeList:h,displacedBy:i,destination:r});const m=n.find(w=>w.descriptor.index===c);if(!m)return Vg({insideDestination:n,inHomeList:h,displacedBy:i,destination:r});const p=tl(e,n),g=n.indexOf(m),y=p.slice(g);return{displaced:Zs({afterDragging:y,destination:r,displacedBy:i,last:a,viewport:s.frame,forceShouldAnimate:d}),displacedBy:i,at:{type:"REORDER",destination:{droppableId:r.descriptor.id,index:c}}}}function qr(e,n){return!!n.effected[e]}var v2=({isMovingForward:e,destination:n,draggables:r,combine:s,afterCritical:i})=>{if(!n.isCombineEnabled)return null;const a=s.draggableId,d=r[a].descriptor.index;return qr(a,i)?e?d:d-1:e?d+1:d},y2=({isMovingForward:e,isInHomeList:n,insideDestination:r,location:s})=>{if(!r.length)return null;const i=s.index,a=e?i+1:i-1,c=r[0].descriptor.index,d=r[r.length-1].descriptor.index,h=n?d:d+1;return a<c||a>h?null:a},x2=({isMovingForward:e,isInHomeList:n,draggable:r,draggables:s,destination:i,insideDestination:a,previousImpact:c,viewport:d,afterCritical:h})=>{const m=c.at;if(m||de(),m.type==="REORDER"){const g=y2({isMovingForward:e,isInHomeList:n,location:m.destination,insideDestination:a});return g==null?null:$a({draggable:r,insideDestination:a,destination:i,viewport:d,last:c.displaced,displacedBy:c.displacedBy,index:g})}const p=v2({isMovingForward:e,destination:i,displaced:c.displaced,draggables:s,combine:m.combine,afterCritical:h});return p==null?null:$a({draggable:r,insideDestination:a,destination:i,viewport:d,last:c.displaced,displacedBy:c.displacedBy,index:p})},b2=({displaced:e,afterCritical:n,combineWith:r,displacedBy:s})=>{const i=!!(e.visible[r]||e.invisible[r]);return qr(r,n)?i?Pt:Vo(s.point):i?s.point:Pt},N2=({afterCritical:e,impact:n,draggables:r})=>{const s=el(n);s||de();const i=s.draggableId,a=r[i].page.borderBox.center,c=b2({displaced:n.displaced,afterCritical:e,combineWith:i,displacedBy:n.displacedBy});return _t(a,c)};const Sy=(e,n)=>n.margin[e.start]+n.borderBox[e.size]/2,w2=(e,n)=>n.margin[e.end]+n.borderBox[e.size]/2,Kd=(e,n,r)=>n[e.crossAxisStart]+r.margin[e.crossAxisStart]+r.borderBox[e.crossAxisSize]/2,zg=({axis:e,moveRelativeTo:n,isMoving:r})=>mo(e.line,n.marginBox[e.end]+Sy(e,r),Kd(e,n.marginBox,r)),Wg=({axis:e,moveRelativeTo:n,isMoving:r})=>mo(e.line,n.marginBox[e.start]-w2(e,r),Kd(e,n.marginBox,r)),C2=({axis:e,moveInto:n,isMoving:r})=>mo(e.line,n.contentBox[e.start]+Sy(e,r),Kd(e,n.contentBox,r));var S2=({impact:e,draggable:n,draggables:r,droppable:s,afterCritical:i})=>{const a=zo(s.descriptor.id,r),c=n.page,d=s.axis;if(!a.length)return C2({axis:d,moveInto:s.page,isMoving:c});const{displaced:h,displacedBy:m}=e,p=h.all[0];if(p){const y=r[p];if(qr(p,i))return Wg({axis:d,moveRelativeTo:y.page,isMoving:c});const b=Oa(y.page,m.point);return Wg({axis:d,moveRelativeTo:b,isMoving:c})}const g=a[a.length-1];if(g.descriptor.id===n.descriptor.id)return c.borderBox.center;if(qr(g.descriptor.id,i)){const y=Oa(g.page,Vo(i.displacedBy.point));return zg({axis:d,moveRelativeTo:y,isMoving:c})}return zg({axis:d,moveRelativeTo:g.page,isMoving:c})},gd=(e,n)=>{const r=e.frame;return r?_t(n,r.scroll.diff.displacement):n};const E2=({impact:e,draggable:n,droppable:r,draggables:s,afterCritical:i})=>{const a=n.page.borderBox.center,c=e.at;return!r||!c?a:c.type==="REORDER"?S2({impact:e,draggable:n,draggables:s,droppable:r,afterCritical:i}):N2({impact:e,draggables:s,afterCritical:i})};var nl=e=>{const n=E2(e),r=e.droppable;return r?gd(r,n):n},Ey=(e,n)=>{const r=Sn(n,e.scroll.initial),s=Vo(r);return{frame:Kn({top:n.y,bottom:n.y+e.frame.height,left:n.x,right:n.x+e.frame.width}),scroll:{initial:e.scroll.initial,max:e.scroll.max,current:n,diff:{value:r,displacement:s}}}};function Hg(e,n){return e.map(r=>n[r])}function D2(e,n){for(let r=0;r<n.length;r++){const s=n[r].visible[e];if(s)return s}return null}var j2=({impact:e,viewport:n,destination:r,draggables:s,maxScrollChange:i})=>{const a=Ey(n,_t(n.scroll.current,i)),c=r.frame?zd(r,_t(r.frame.scroll.current,i)):r,d=e.displaced,h=Zs({afterDragging:Hg(d.all,s),destination:r,displacedBy:e.displacedBy,viewport:a.frame,last:d,forceShouldAnimate:!1}),m=Zs({afterDragging:Hg(d.all,s),destination:c,displacedBy:e.displacedBy,viewport:n.frame,last:d,forceShouldAnimate:!1}),p={},g={},y=[d,h,m];return d.all.forEach(w=>{const E=D2(w,y);if(E){g[w]=E;return}p[w]=!0}),{...e,displaced:{all:d.all,invisible:p,visible:g}}},A2=(e,n)=>_t(e.scroll.diff.displacement,n),Yd=({pageBorderBoxCenter:e,draggable:n,viewport:r})=>{const s=A2(r,e),i=Sn(s,n.page.borderBox.center);return _t(n.client.borderBox.center,i)},Dy=({draggable:e,destination:n,newPageBorderBoxCenter:r,viewport:s,withDroppableDisplacement:i,onlyOnMainAxis:a=!1})=>{const c=Sn(r,e.page.borderBox.center),h={target:ci(e.page.borderBox,c),destination:n,withDroppableDisplacement:i,viewport:s};return a?h2(h):Cy(h)},k2=({isMovingForward:e,draggable:n,destination:r,draggables:s,previousImpact:i,viewport:a,previousPageBorderBoxCenter:c,previousClientSelection:d,afterCritical:h})=>{if(!r.isEnabled)return null;const m=zo(r.descriptor.id,s),p=Wo(n,r),g=s2({isMovingForward:e,draggable:n,destination:r,insideDestination:m,previousImpact:i})||x2({isMovingForward:e,isInHomeList:p,draggable:n,draggables:s,destination:r,insideDestination:m,previousImpact:i,viewport:a,afterCritical:h});if(!g)return null;const y=nl({impact:g,draggable:n,droppable:r,draggables:s,afterCritical:h});if(Dy({draggable:n,destination:r,newPageBorderBoxCenter:y,viewport:a.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0}))return{clientSelection:Yd({pageBorderBoxCenter:y,draggable:n,viewport:a}),impact:g,scrollJumpRequest:null};const w=Sn(y,c),E=j2({impact:g,viewport:a,destination:r,draggables:s,maxScrollChange:w});return{clientSelection:d,impact:E,scrollJumpRequest:w}};const Xt=e=>{const n=e.subject.active;return n||de(),n};var I2=({isMovingForward:e,pageBorderBoxCenter:n,source:r,droppables:s,viewport:i})=>{const a=r.subject.active;if(!a)return null;const c=r.axis,d=$n(a[c.start],a[c.end]),h=Za(s).filter(p=>p!==r).filter(p=>p.isEnabled).filter(p=>!!p.subject.active).filter(p=>Ny(i.frame)(Xt(p))).filter(p=>{const g=Xt(p);return e?a[c.crossAxisEnd]<g[c.crossAxisEnd]:g[c.crossAxisStart]<a[c.crossAxisStart]}).filter(p=>{const g=Xt(p),y=$n(g[c.start],g[c.end]);return d(g[c.start])||d(g[c.end])||y(a[c.start])||y(a[c.end])}).sort((p,g)=>{const y=Xt(p)[c.crossAxisStart],b=Xt(g)[c.crossAxisStart];return e?y-b:b-y}).filter((p,g,y)=>Xt(p)[c.crossAxisStart]===Xt(y[0])[c.crossAxisStart]);if(!h.length)return null;if(h.length===1)return h[0];const m=h.filter(p=>$n(Xt(p)[c.start],Xt(p)[c.end])(n[c.line]));return m.length===1?m[0]:m.length>1?m.sort((p,g)=>Xt(p)[c.start]-Xt(g)[c.start])[0]:h.sort((p,g)=>{const y=Gg(n,Ug(Xt(p))),b=Gg(n,Ug(Xt(g)));return y!==b?y-b:Xt(p)[c.start]-Xt(g)[c.start]})[0]};const qg=(e,n)=>{const r=e.page.borderBox.center;return qr(e.descriptor.id,n)?Sn(r,n.displacedBy.point):r},P2=(e,n)=>{const r=e.page.borderBox;return qr(e.descriptor.id,n)?ci(r,Vo(n.displacedBy.point)):r};var T2=({pageBorderBoxCenter:e,viewport:n,destination:r,insideDestination:s,afterCritical:i})=>s.filter(c=>Cy({target:P2(c,i),destination:r,viewport:n.frame,withDroppableDisplacement:!0})).sort((c,d)=>{const h=Xs(e,gd(r,qg(c,i))),m=Xs(e,gd(r,qg(d,i)));return h<m?-1:m<h?1:c.descriptor.index-d.descriptor.index})[0]||null,ui=It(function(n,r){const s=r[n.line];return{value:s,point:mo(n.line,s)}});const R2=(e,n,r)=>{const s=e.axis;if(e.descriptor.mode==="virtual")return mo(s.line,n[s.line]);const i=e.subject.page.contentBox[s.size],h=zo(e.descriptor.id,r).reduce((m,p)=>m+p.client.marginBox[s.size],0)+n[s.line]-i;return h<=0?null:mo(s.line,h)},jy=(e,n)=>({...e,scroll:{...e.scroll,max:n}}),Ay=(e,n,r)=>{const s=e.frame;Wo(n,e)&&de(),e.subject.withPlaceholder&&de();const i=ui(e.axis,n.displaceBy).point,a=R2(e,i,r),c={placeholderSize:i,increasedBy:a,oldFrameMaxScroll:e.frame?e.frame.scroll.max:null};if(!s){const p=$o({page:e.subject.page,withPlaceholder:c,axis:e.axis,frame:e.frame});return{...e,subject:p}}const d=a?_t(s.scroll.max,a):s.scroll.max,h=jy(s,d),m=$o({page:e.subject.page,withPlaceholder:c,axis:e.axis,frame:h});return{...e,subject:m,frame:h}},M2=e=>{const n=e.subject.withPlaceholder;n||de();const r=e.frame;if(!r){const c=$o({page:e.subject.page,axis:e.axis,frame:null,withPlaceholder:null});return{...e,subject:c}}const s=n.oldFrameMaxScroll;s||de();const i=jy(r,s),a=$o({page:e.subject.page,axis:e.axis,frame:i,withPlaceholder:null});return{...e,subject:a,frame:i}};var O2=({previousPageBorderBoxCenter:e,moveRelativeTo:n,insideDestination:r,draggable:s,draggables:i,destination:a,viewport:c,afterCritical:d})=>{if(!n){if(r.length)return null;const g={displaced:Js,displacedBy:by,at:{type:"REORDER",destination:{droppableId:a.descriptor.id,index:0}}},y=nl({impact:g,draggable:s,droppable:a,draggables:i,afterCritical:d}),b=Wo(s,a)?a:Ay(a,s,i);return Dy({draggable:s,destination:b,newPageBorderBoxCenter:y,viewport:c.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0})?g:null}const h=e[a.axis.line]<=n.page.borderBox.center[a.axis.line],m=(()=>{const g=n.descriptor.index;return n.descriptor.id===s.descriptor.id||h?g:g+1})(),p=ui(a.axis,s.displaceBy);return $a({draggable:s,insideDestination:r,destination:a,viewport:c,displacedBy:p,last:Js,index:m})},_2=({isMovingForward:e,previousPageBorderBoxCenter:n,draggable:r,isOver:s,draggables:i,droppables:a,viewport:c,afterCritical:d})=>{const h=I2({isMovingForward:e,pageBorderBoxCenter:n,source:s,droppables:a,viewport:c});if(!h)return null;const m=zo(h.descriptor.id,i),p=T2({pageBorderBoxCenter:n,viewport:c,destination:h,insideDestination:m,afterCritical:d}),g=O2({previousPageBorderBoxCenter:n,destination:h,draggable:r,draggables:i,moveRelativeTo:p,insideDestination:m,viewport:c,afterCritical:d});if(!g)return null;const y=nl({impact:g,draggable:r,droppable:h,draggables:i,afterCritical:d});return{clientSelection:Yd({pageBorderBoxCenter:y,draggable:r,viewport:c}),impact:g,scrollJumpRequest:null}},En=e=>{const n=e.at;return n?n.type==="REORDER"?n.destination.droppableId:n.combine.droppableId:null};const L2=(e,n)=>{const r=En(e);return r?n[r]:null};var F2=({state:e,type:n})=>{const r=L2(e.impact,e.dimensions.droppables),s=!!r,i=e.dimensions.droppables[e.critical.droppable.id],a=r||i,c=a.axis.direction,d=c==="vertical"&&(n==="MOVE_UP"||n==="MOVE_DOWN")||c==="horizontal"&&(n==="MOVE_LEFT"||n==="MOVE_RIGHT");if(d&&!s)return null;const h=n==="MOVE_DOWN"||n==="MOVE_RIGHT",m=e.dimensions.draggables[e.critical.draggable.id],p=e.current.page.borderBoxCenter,{draggables:g,droppables:y}=e.dimensions;return d?k2({isMovingForward:h,previousPageBorderBoxCenter:p,draggable:m,destination:a,draggables:g,viewport:e.viewport,previousClientSelection:e.current.client.selection,previousImpact:e.impact,afterCritical:e.afterCritical}):_2({isMovingForward:h,previousPageBorderBoxCenter:p,draggable:m,isOver:a,draggables:g,droppables:y,viewport:e.viewport,afterCritical:e.afterCritical})};function fo(e){return e.phase==="DRAGGING"||e.phase==="COLLECTING"}function ky(e){const n=$n(e.top,e.bottom),r=$n(e.left,e.right);return function(i){return n(i.y)&&r(i.x)}}function B2(e,n){return e.left<n.right&&e.right>n.left&&e.top<n.bottom&&e.bottom>n.top}function $2({pageBorderBox:e,draggable:n,candidates:r}){const s=n.page.borderBox.center,i=r.map(a=>{const c=a.axis,d=mo(a.axis.line,e.center[c.line],a.page.borderBox.center[c.crossAxisLine]);return{id:a.descriptor.id,distance:Xs(s,d)}}).sort((a,c)=>c.distance-a.distance);return i[0]?i[0].id:null}function G2({pageBorderBox:e,draggable:n,droppables:r}){const s=Za(r).filter(i=>{if(!i.isEnabled)return!1;const a=i.subject.active;if(!a||!B2(e,a))return!1;if(ky(a)(e.center))return!0;const c=i.axis,d=a.center[c.crossAxisLine],h=e[c.crossAxisStart],m=e[c.crossAxisEnd],p=$n(a[c.crossAxisStart],a[c.crossAxisEnd]),g=p(h),y=p(m);return!g&&!y?!0:g?h<d:m>d});return s.length?s.length===1?s[0].descriptor.id:$2({pageBorderBox:e,draggable:n,candidates:s}):null}const Iy=(e,n)=>Kn(ci(e,n));var U2=(e,n)=>{const r=e.frame;return r?Iy(n,r.scroll.diff.value):n};function Py({displaced:e,id:n}){return!!(e.visible[n]||e.invisible[n])}function V2({draggable:e,closest:n,inHomeList:r}){return n?r&&n.descriptor.index>e.descriptor.index?n.descriptor.index-1:n.descriptor.index:null}var z2=({pageBorderBoxWithDroppableScroll:e,draggable:n,destination:r,insideDestination:s,last:i,viewport:a,afterCritical:c})=>{const d=r.axis,h=ui(r.axis,n.displaceBy),m=h.value,p=e[d.start],g=e[d.end],b=tl(n,s).find(E=>{const C=E.descriptor.id,j=E.page.borderBox.center[d.line],P=qr(C,c),A=Py({displaced:i,id:C});return P?A?g<=j:p<j-m:A?g<=j+m:p<j})||null,w=V2({draggable:n,closest:b,inHomeList:Wo(n,r)});return $a({draggable:n,insideDestination:s,destination:r,viewport:a,last:i,displacedBy:h,index:w})};const W2=4;var H2=({draggable:e,pageBorderBoxWithDroppableScroll:n,previousImpact:r,destination:s,insideDestination:i,afterCritical:a})=>{if(!s.isCombineEnabled)return null;const c=s.axis,d=ui(s.axis,e.displaceBy),h=d.value,m=n[c.start],p=n[c.end],y=tl(e,i).find(w=>{const E=w.descriptor.id,C=w.page.borderBox,P=C[c.size]/W2,A=qr(E,a),D=Py({displaced:r.displaced,id:E});return A?D?p>C[c.start]+P&&p<C[c.end]-P:m>C[c.start]-h+P&&m<C[c.end]-h-P:D?p>C[c.start]+h+P&&p<C[c.end]+h-P:m>C[c.start]+P&&m<C[c.end]-P});return y?{displacedBy:d,displaced:r.displaced,at:{type:"COMBINE",combine:{draggableId:y.descriptor.id,droppableId:s.descriptor.id}}}:null},Ty=({pageOffset:e,draggable:n,draggables:r,droppables:s,previousImpact:i,viewport:a,afterCritical:c})=>{const d=Iy(n.page.borderBox,e),h=G2({pageBorderBox:d,draggable:n,droppables:s});if(!h)return i2;const m=s[h],p=zo(m.descriptor.id,r),g=U2(m,d);return H2({pageBorderBoxWithDroppableScroll:g,draggable:n,previousImpact:i,destination:m,insideDestination:p,afterCritical:c})||z2({pageBorderBoxWithDroppableScroll:g,draggable:n,destination:m,insideDestination:p,last:i.displaced,viewport:a,afterCritical:c})},Qd=(e,n)=>({...e,[n.descriptor.id]:n});const q2=({previousImpact:e,impact:n,droppables:r})=>{const s=En(e),i=En(n);if(!s||s===i)return r;const a=r[s];if(!a.subject.withPlaceholder)return r;const c=M2(a);return Qd(r,c)};var K2=({draggable:e,draggables:n,droppables:r,previousImpact:s,impact:i})=>{const a=q2({previousImpact:s,impact:i,droppables:r}),c=En(i);if(!c)return a;const d=r[c];if(Wo(e,d)||d.subject.withPlaceholder)return a;const h=Ay(d,e,n);return Qd(a,h)},$s=({state:e,clientSelection:n,dimensions:r,viewport:s,impact:i,scrollJumpRequest:a})=>{const c=s||e.viewport,d=r||e.dimensions,h=n||e.current.client.selection,m=Sn(h,e.initial.client.selection),p={offset:m,selection:h,borderBoxCenter:_t(e.initial.client.borderBoxCenter,m)},g={selection:_t(p.selection,c.scroll.current),borderBoxCenter:_t(p.borderBoxCenter,c.scroll.current),offset:_t(p.offset,c.scroll.diff.value)},y={client:p,page:g};if(e.phase==="COLLECTING")return{...e,dimensions:d,viewport:c,current:y};const b=d.draggables[e.critical.draggable.id],w=i||Ty({pageOffset:g.offset,draggable:b,draggables:d.draggables,droppables:d.droppables,previousImpact:e.impact,viewport:c,afterCritical:e.afterCritical}),E=K2({draggable:b,impact:w,previousImpact:e.impact,draggables:d.draggables,droppables:d.droppables});return{...e,current:y,dimensions:{draggables:d.draggables,droppables:E},impact:w,viewport:c,scrollJumpRequest:a||null,forceShouldAnimate:a?!1:null}};function Y2(e,n){return e.map(r=>n[r])}var Ry=({impact:e,viewport:n,draggables:r,destination:s,forceShouldAnimate:i})=>{const a=e.displaced,c=Y2(a.all,r),d=Zs({afterDragging:c,destination:s,displacedBy:e.displacedBy,viewport:n.frame,forceShouldAnimate:i,last:a});return{...e,displaced:d}},My=({impact:e,draggable:n,droppable:r,draggables:s,viewport:i,afterCritical:a})=>{const c=nl({impact:e,draggable:n,draggables:s,droppable:r,afterCritical:a});return Yd({pageBorderBoxCenter:c,draggable:n,viewport:i})},Oy=({state:e,dimensions:n,viewport:r})=>{e.movementMode!=="SNAP"&&de();const s=e.impact,i=r||e.viewport,a=n||e.dimensions,{draggables:c,droppables:d}=a,h=c[e.critical.draggable.id],m=En(s);m||de();const p=d[m],g=Ry({impact:s,viewport:i,destination:p,draggables:c}),y=My({impact:g,draggable:h,droppable:p,draggables:c,viewport:i,afterCritical:e.afterCritical});return $s({impact:g,clientSelection:y,state:e,dimensions:a,viewport:i})},Q2=e=>({index:e.index,droppableId:e.droppableId}),_y=({draggable:e,home:n,draggables:r,viewport:s})=>{const i=ui(n.axis,e.displaceBy),a=zo(n.descriptor.id,r),c=a.indexOf(e);c===-1&&de();const d=a.slice(c+1),h=d.reduce((y,b)=>(y[b.descriptor.id]=!0,y),{}),m={inVirtualList:n.descriptor.mode==="virtual",displacedBy:i,effected:h};return{impact:{displaced:Zs({afterDragging:d,destination:n,displacedBy:i,last:null,viewport:s.frame,forceShouldAnimate:!1}),displacedBy:i,at:{type:"REORDER",destination:Q2(e.descriptor)}},afterCritical:m}},X2=(e,n)=>({draggables:e.draggables,droppables:Qd(e.droppables,n)}),J2=({draggable:e,offset:n,initialWindowScroll:r})=>{const s=Oa(e.client,n),i=_a(s,r);return{...e,placeholder:{...e.placeholder,client:s},client:s,page:i}},Z2=e=>{const n=e.frame;return n||de(),n},eE=({additions:e,updatedDroppables:n,viewport:r})=>{const s=r.scroll.diff.value;return e.map(i=>{const a=i.descriptor.droppableId,c=n[a],h=Z2(c).scroll.diff.value,m=_t(s,h);return J2({draggable:i,offset:m,initialWindowScroll:r.scroll.initial})})},tE=({state:e,published:n})=>{const r=n.modified.map(j=>{const P=e.dimensions.droppables[j.droppableId];return zd(P,j.scroll)}),s={...e.dimensions.droppables,...yy(r)},i=xy(eE({additions:n.additions,updatedDroppables:s,viewport:e.viewport})),a={...e.dimensions.draggables,...i};n.removals.forEach(j=>{delete a[j]});const c={droppables:s,draggables:a},d=En(e.impact),h=d?c.droppables[d]:null,m=c.draggables[e.critical.draggable.id],p=c.droppables[e.critical.droppable.id],{impact:g,afterCritical:y}=_y({draggable:m,home:p,draggables:a,viewport:e.viewport}),b=h&&h.isCombineEnabled?e.impact:g,w=Ty({pageOffset:e.current.page.offset,draggable:c.draggables[e.critical.draggable.id],draggables:c.draggables,droppables:c.droppables,previousImpact:b,viewport:e.viewport,afterCritical:y}),E={...e,phase:"DRAGGING",impact:w,onLiftImpact:g,dimensions:c,afterCritical:y,forceShouldAnimate:!1};return e.phase==="COLLECTING"?E:{...E,phase:"DROP_PENDING",reason:e.reason,isWaiting:!1}};const vd=e=>e.movementMode==="SNAP",Gu=(e,n,r)=>{const s=X2(e.dimensions,n);return!vd(e)||r?$s({state:e,dimensions:s}):Oy({state:e,dimensions:s})};function Uu(e){return e.isDragging&&e.movementMode==="SNAP"?{...e,scrollJumpRequest:null}:e}const Kg={phase:"IDLE",completed:null,shouldFlush:!1};var nE=(e=Kg,n)=>{if(n.type==="FLUSH")return{...Kg,shouldFlush:!0};if(n.type==="INITIAL_PUBLISH"){e.phase!=="IDLE"&&de();const{critical:r,clientSelection:s,viewport:i,dimensions:a,movementMode:c}=n.payload,d=a.draggables[r.draggable.id],h=a.droppables[r.droppable.id],m={selection:s,borderBoxCenter:d.client.borderBox.center,offset:Pt},p={client:m,page:{selection:_t(m.selection,i.scroll.initial),borderBoxCenter:_t(m.selection,i.scroll.initial),offset:_t(m.selection,i.scroll.diff.value)}},g=Za(a.droppables).every(E=>!E.isFixedOnPage),{impact:y,afterCritical:b}=_y({draggable:d,home:h,draggables:a.draggables,viewport:i});return{phase:"DRAGGING",isDragging:!0,critical:r,movementMode:c,dimensions:a,initial:p,current:p,isWindowScrollAllowed:g,impact:y,afterCritical:b,onLiftImpact:y,viewport:i,scrollJumpRequest:null,forceShouldAnimate:null}}if(n.type==="COLLECTION_STARTING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"?e:(e.phase!=="DRAGGING"&&de(),{...e,phase:"COLLECTING"});if(n.type==="PUBLISH_WHILE_DRAGGING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"||de(),tE({state:e,published:n.payload});if(n.type==="MOVE"){if(e.phase==="DROP_PENDING")return e;fo(e)||de();const{client:r}=n.payload;return Hr(r,e.current.client.selection)?e:$s({state:e,clientSelection:r,impact:vd(e)?e.impact:null})}if(n.type==="UPDATE_DROPPABLE_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="COLLECTING")return Uu(e);fo(e)||de();const{id:r,newScroll:s}=n.payload,i=e.dimensions.droppables[r];if(!i)return e;const a=zd(i,s);return Gu(e,a,!1)}if(n.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(e.phase==="DROP_PENDING")return e;fo(e)||de();const{id:r,isEnabled:s}=n.payload,i=e.dimensions.droppables[r];i||de(),i.isEnabled===s&&de();const a={...i,isEnabled:s};return Gu(e,a,!0)}if(n.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(e.phase==="DROP_PENDING")return e;fo(e)||de();const{id:r,isCombineEnabled:s}=n.payload,i=e.dimensions.droppables[r];i||de(),i.isCombineEnabled===s&&de();const a={...i,isCombineEnabled:s};return Gu(e,a,!0)}if(n.type==="MOVE_BY_WINDOW_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="DROP_ANIMATING")return e;fo(e)||de(),e.isWindowScrollAllowed||de();const r=n.payload.newScroll;if(Hr(e.viewport.scroll.current,r))return Uu(e);const s=Ey(e.viewport,r);return vd(e)?Oy({state:e,viewport:s}):$s({state:e,viewport:s})}if(n.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!fo(e))return e;const r=n.payload.maxScroll;if(Hr(r,e.viewport.scroll.max))return e;const s={...e.viewport,scroll:{...e.viewport.scroll,max:r}};return{...e,viewport:s}}if(n.type==="MOVE_UP"||n.type==="MOVE_DOWN"||n.type==="MOVE_LEFT"||n.type==="MOVE_RIGHT"){if(e.phase==="COLLECTING"||e.phase==="DROP_PENDING")return e;e.phase!=="DRAGGING"&&de();const r=F2({state:e,type:n.type});return r?$s({state:e,impact:r.impact,clientSelection:r.clientSelection,scrollJumpRequest:r.scrollJumpRequest}):e}if(n.type==="DROP_PENDING"){const r=n.payload.reason;return e.phase!=="COLLECTING"&&de(),{...e,phase:"DROP_PENDING",isWaiting:!0,reason:r}}if(n.type==="DROP_ANIMATE"){const{completed:r,dropDuration:s,newHomeClientOffset:i}=n.payload;return e.phase==="DRAGGING"||e.phase==="DROP_PENDING"||de(),{phase:"DROP_ANIMATING",completed:r,dropDuration:s,newHomeClientOffset:i,dimensions:e.dimensions}}if(n.type==="DROP_COMPLETE"){const{completed:r}=n.payload;return{phase:"IDLE",completed:r,shouldFlush:!1}}return e};function Ke(e,n){return e instanceof Object&&"type"in e&&e.type===n}const rE=e=>({type:"BEFORE_INITIAL_CAPTURE",payload:e}),oE=e=>({type:"LIFT",payload:e}),sE=e=>({type:"INITIAL_PUBLISH",payload:e}),iE=e=>({type:"PUBLISH_WHILE_DRAGGING",payload:e}),aE=()=>({type:"COLLECTION_STARTING",payload:null}),lE=e=>({type:"UPDATE_DROPPABLE_SCROLL",payload:e}),cE=e=>({type:"UPDATE_DROPPABLE_IS_ENABLED",payload:e}),uE=e=>({type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:e}),Ly=e=>({type:"MOVE",payload:e}),dE=e=>({type:"MOVE_BY_WINDOW_SCROLL",payload:e}),fE=e=>({type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:e}),hE=()=>({type:"MOVE_UP",payload:null}),mE=()=>({type:"MOVE_DOWN",payload:null}),pE=()=>({type:"MOVE_RIGHT",payload:null}),gE=()=>({type:"MOVE_LEFT",payload:null}),Xd=()=>({type:"FLUSH",payload:null}),vE=e=>({type:"DROP_ANIMATE",payload:e}),Jd=e=>({type:"DROP_COMPLETE",payload:e}),Fy=e=>({type:"DROP",payload:e}),yE=e=>({type:"DROP_PENDING",payload:e}),By=()=>({type:"DROP_ANIMATION_FINISHED",payload:null});var xE=e=>({getState:n,dispatch:r})=>s=>i=>{if(!Ke(i,"LIFT")){s(i);return}const{id:a,clientSelection:c,movementMode:d}=i.payload,h=n();h.phase==="DROP_ANIMATING"&&r(Jd({completed:h.completed})),n().phase!=="IDLE"&&de(),r(Xd()),r(rE({draggableId:a,movementMode:d}));const p={draggableId:a,scrollOptions:{shouldPublishImmediately:d==="SNAP"}},{critical:g,dimensions:y,viewport:b}=e.startPublishing(p);r(sE({critical:g,dimensions:y,clientSelection:c,movementMode:d,viewport:b}))},bE=e=>()=>n=>r=>{Ke(r,"INITIAL_PUBLISH")&&e.dragging(),Ke(r,"DROP_ANIMATE")&&e.dropping(r.payload.completed.result.reason),(Ke(r,"FLUSH")||Ke(r,"DROP_COMPLETE"))&&e.resting(),n(r)};const Zd={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},ei={opacity:{drop:0,combining:.7},scale:{drop:.75}},$y={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},uo=`${$y.outOfTheWay}s ${Zd.outOfTheWay}`,Gs={fluid:`opacity ${uo}`,snap:`transform ${uo}, opacity ${uo}`,drop:e=>{const n=`${e}s ${Zd.drop}`;return`transform ${n}, opacity ${n}`},outOfTheWay:`transform ${uo}`,placeholder:`height ${uo}, width ${uo}, margin ${uo}`},Yg=e=>Hr(e,Pt)?void 0:`translate(${e.x}px, ${e.y}px)`,yd={moveTo:Yg,drop:(e,n)=>{const r=Yg(e);if(r)return n?`${r} scale(${ei.scale.drop})`:r}},{minDropTime:xd,maxDropTime:Gy}=$y,NE=Gy-xd,Qg=1500,wE=.6;var CE=({current:e,destination:n,reason:r})=>{const s=Xs(e,n);if(s<=0)return xd;if(s>=Qg)return Gy;const i=s/Qg,a=xd+NE*i,c=r==="CANCEL"?a*wE:a;return Number(c.toFixed(2))},SE=({impact:e,draggable:n,dimensions:r,viewport:s,afterCritical:i})=>{const{draggables:a,droppables:c}=r,d=En(e),h=d?c[d]:null,m=c[n.descriptor.droppableId],p=My({impact:e,draggable:n,draggables:a,afterCritical:i,droppable:h||m,viewport:s});return Sn(p,n.client.borderBox.center)},EE=({draggables:e,reason:n,lastImpact:r,home:s,viewport:i,onLiftImpact:a})=>!r.at||n!=="DROP"?{impact:Ry({draggables:e,impact:a,destination:s,viewport:i,forceShouldAnimate:!0}),didDropInsideDroppable:!1}:r.at.type==="REORDER"?{impact:r,didDropInsideDroppable:!0}:{impact:{...r,displaced:Js},didDropInsideDroppable:!0};const DE=({getState:e,dispatch:n})=>r=>s=>{if(!Ke(s,"DROP")){r(s);return}const i=e(),a=s.payload.reason;if(i.phase==="COLLECTING"){n(yE({reason:a}));return}if(i.phase==="IDLE")return;i.phase==="DROP_PENDING"&&i.isWaiting&&de(),i.phase==="DRAGGING"||i.phase==="DROP_PENDING"||de();const d=i.critical,h=i.dimensions,m=h.draggables[i.critical.draggable.id],{impact:p,didDropInsideDroppable:g}=EE({reason:a,lastImpact:i.impact,afterCritical:i.afterCritical,onLiftImpact:i.onLiftImpact,home:i.dimensions.droppables[i.critical.droppable.id],viewport:i.viewport,draggables:i.dimensions.draggables}),y=g?Wd(p):null,b=g?el(p):null,w={index:d.draggable.index,droppableId:d.droppable.id},E={draggableId:m.descriptor.id,type:m.descriptor.type,source:w,reason:a,mode:i.movementMode,destination:y,combine:b},C=SE({impact:p,draggable:m,dimensions:h,viewport:i.viewport,afterCritical:i.afterCritical}),j={critical:i.critical,afterCritical:i.afterCritical,result:E,impact:p};if(!(!Hr(i.current.client.offset,C)||!!E.combine)){n(Jd({completed:j}));return}const A=CE({current:i.current.client.offset,destination:C,reason:a});n(vE({newHomeClientOffset:C,dropDuration:A,completed:j}))};var Uy=()=>({x:window.pageXOffset,y:window.pageYOffset});function jE(e){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:n=>{n.target!==window&&n.target!==window.document||e()}}}function AE({onWindowScroll:e}){function n(){e(Uy())}const r=Qs(n),s=jE(r);let i=Wr;function a(){return i!==Wr}function c(){a()&&de(),i=Bn(window,[s])}function d(){a()||de(),r.cancel(),i(),i=Wr}return{start:c,stop:d,isActive:a}}const kE=e=>Ke(e,"DROP_COMPLETE")||Ke(e,"DROP_ANIMATE")||Ke(e,"FLUSH"),IE=e=>{const n=AE({onWindowScroll:r=>{e.dispatch(dE({newScroll:r}))}});return r=>s=>{!n.isActive()&&Ke(s,"INITIAL_PUBLISH")&&n.start(),n.isActive()&&kE(s)&&n.stop(),r(s)}};var PE=e=>{let n=!1,r=!1;const s=setTimeout(()=>{r=!0}),i=a=>{n||r||(n=!0,e(a),clearTimeout(s))};return i.wasCalled=()=>n,i},TE=()=>{const e=[],n=i=>{const a=e.findIndex(d=>d.timerId===i);a===-1&&de();const[c]=e.splice(a,1);c.callback()};return{add:i=>{const a=setTimeout(()=>n(a)),c={timerId:a,callback:i};e.push(c)},flush:()=>{if(!e.length)return;const i=[...e];e.length=0,i.forEach(a=>{clearTimeout(a.timerId),a.callback()})}}};const RE=(e,n)=>e==null&&n==null?!0:e==null||n==null?!1:e.droppableId===n.droppableId&&e.index===n.index,ME=(e,n)=>e==null&&n==null?!0:e==null||n==null?!1:e.draggableId===n.draggableId&&e.droppableId===n.droppableId,OE=(e,n)=>{if(e===n)return!0;const r=e.draggable.id===n.draggable.id&&e.draggable.droppableId===n.draggable.droppableId&&e.draggable.type===n.draggable.type&&e.draggable.index===n.draggable.index,s=e.droppable.id===n.droppable.id&&e.droppable.type===n.droppable.type;return r&&s},_s=(e,n)=>{n()},Sa=(e,n)=>({draggableId:e.draggable.id,type:e.droppable.type,source:{droppableId:e.droppable.id,index:e.draggable.index},mode:n});function Vu(e,n,r,s){if(!e){r(s(n));return}const i=PE(r);e(n,{announce:i}),i.wasCalled()||r(s(n))}var _E=(e,n)=>{const r=TE();let s=null;const i=(g,y)=>{s&&de(),_s("onBeforeCapture",()=>{const b=e().onBeforeCapture;b&&b({draggableId:g,mode:y})})},a=(g,y)=>{s&&de(),_s("onBeforeDragStart",()=>{const b=e().onBeforeDragStart;b&&b(Sa(g,y))})},c=(g,y)=>{s&&de();const b=Sa(g,y);s={mode:y,lastCritical:g,lastLocation:b.source,lastCombine:null},r.add(()=>{_s("onDragStart",()=>Vu(e().onDragStart,b,n,Aa.onDragStart))})},d=(g,y)=>{const b=Wd(y),w=el(y);s||de();const E=!OE(g,s.lastCritical);E&&(s.lastCritical=g);const C=!RE(s.lastLocation,b);C&&(s.lastLocation=b);const j=!ME(s.lastCombine,w);if(j&&(s.lastCombine=w),!E&&!C&&!j)return;const P={...Sa(g,s.mode),combine:w,destination:b};r.add(()=>{_s("onDragUpdate",()=>Vu(e().onDragUpdate,P,n,Aa.onDragUpdate))})},h=()=>{s||de(),r.flush()},m=g=>{s||de(),s=null,_s("onDragEnd",()=>Vu(e().onDragEnd,g,n,Aa.onDragEnd))};return{beforeCapture:i,beforeStart:a,start:c,update:d,flush:h,drop:m,abort:()=>{if(!s)return;const g={...Sa(s.lastCritical,s.mode),combine:null,destination:null,reason:"CANCEL"};m(g)}}},LE=(e,n)=>{const r=_E(e,n);return s=>i=>a=>{if(Ke(a,"BEFORE_INITIAL_CAPTURE")){r.beforeCapture(a.payload.draggableId,a.payload.movementMode);return}if(Ke(a,"INITIAL_PUBLISH")){const d=a.payload.critical;r.beforeStart(d,a.payload.movementMode),i(a),r.start(d,a.payload.movementMode);return}if(Ke(a,"DROP_COMPLETE")){const d=a.payload.completed.result;r.flush(),i(a),r.drop(d);return}if(i(a),Ke(a,"FLUSH")){r.abort();return}const c=s.getState();c.phase==="DRAGGING"&&r.update(c.critical,c.impact)}};const FE=e=>n=>r=>{if(!Ke(r,"DROP_ANIMATION_FINISHED")){n(r);return}const s=e.getState();s.phase!=="DROP_ANIMATING"&&de(),e.dispatch(Jd({completed:s.completed}))},BE=e=>{let n=null,r=null;function s(){r&&(cancelAnimationFrame(r),r=null),n&&(n(),n=null)}return i=>a=>{if((Ke(a,"FLUSH")||Ke(a,"DROP_COMPLETE")||Ke(a,"DROP_ANIMATION_FINISHED"))&&s(),i(a),!Ke(a,"DROP_ANIMATE"))return;const c={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){e.getState().phase==="DROP_ANIMATING"&&e.dispatch(By())}};r=requestAnimationFrame(()=>{r=null,n=Bn(window,[c])})}};var $E=e=>()=>n=>r=>{(Ke(r,"DROP_COMPLETE")||Ke(r,"FLUSH")||Ke(r,"DROP_ANIMATE"))&&e.stopPublishing(),n(r)},GE=e=>{let n=!1;return()=>r=>s=>{if(Ke(s,"INITIAL_PUBLISH")){n=!0,e.tryRecordFocus(s.payload.critical.draggable.id),r(s),e.tryRestoreFocusRecorded();return}if(r(s),!!n){if(Ke(s,"FLUSH")){n=!1,e.tryRestoreFocusRecorded();return}if(Ke(s,"DROP_COMPLETE")){n=!1;const i=s.payload.completed.result;i.combine&&e.tryShiftRecord(i.draggableId,i.combine.draggableId),e.tryRestoreFocusRecorded()}}}};const UE=e=>Ke(e,"DROP_COMPLETE")||Ke(e,"DROP_ANIMATE")||Ke(e,"FLUSH");var VE=e=>n=>r=>s=>{if(UE(s)){e.stop(),r(s);return}if(Ke(s,"INITIAL_PUBLISH")){r(s);const i=n.getState();i.phase!=="DRAGGING"&&de(),e.start(i);return}r(s),e.scroll(n.getState())};const zE=e=>n=>r=>{if(n(r),!Ke(r,"PUBLISH_WHILE_DRAGGING"))return;const s=e.getState();s.phase==="DROP_PENDING"&&(s.isWaiting||e.dispatch(Fy({reason:s.reason})))},WE=oy;var HE=({dimensionMarshal:e,focusMarshal:n,styleMarshal:r,getResponders:s,announce:i,autoScroller:a})=>ry(nE,WE(VC(bE(r),$E(e),xE(e),DE,FE,BE,zE,VE(a),IE,GE(n),LE(s,i))));const zu=()=>({additions:{},removals:{},modified:{}});function qE({registry:e,callbacks:n}){let r=zu(),s=null;const i=()=>{s||(n.collectionStarting(),s=requestAnimationFrame(()=>{s=null;const{additions:h,removals:m,modified:p}=r,g=Object.keys(h).map(w=>e.draggable.getById(w).getDimension(Pt)).sort((w,E)=>w.descriptor.index-E.descriptor.index),y=Object.keys(p).map(w=>{const C=e.droppable.getById(w).callbacks.getScrollWhileDragging();return{droppableId:w,scroll:C}}),b={additions:g,removals:Object.keys(m),modified:y};r=zu(),n.publish(b)}))};return{add:h=>{const m=h.descriptor.id;r.additions[m]=h,r.modified[h.descriptor.droppableId]=!0,r.removals[m]&&delete r.removals[m],i()},remove:h=>{const m=h.descriptor;r.removals[m.id]=!0,r.modified[m.droppableId]=!0,r.additions[m.id]&&delete r.additions[m.id],i()},stop:()=>{s&&(cancelAnimationFrame(s),s=null,r=zu())}}}var Vy=({scrollHeight:e,scrollWidth:n,height:r,width:s})=>{const i=Sn({x:n,y:e},{x:s,y:r});return{x:Math.max(0,i.x),y:Math.max(0,i.y)}},zy=()=>{const e=document.documentElement;return e||de(),e},Wy=()=>{const e=zy();return Vy({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,width:e.clientWidth,height:e.clientHeight})},KE=()=>{const e=Uy(),n=Wy(),r=e.y,s=e.x,i=zy(),a=i.clientWidth,c=i.clientHeight,d=s+a,h=r+c;return{frame:Kn({top:r,left:s,right:d,bottom:h}),scroll:{initial:e,current:e,max:n,diff:{value:Pt,displacement:Pt}}}},YE=({critical:e,scrollOptions:n,registry:r})=>{const s=KE(),i=s.scroll.current,a=e.droppable,c=r.droppable.getAllByType(a.type).map(p=>p.callbacks.getDimensionAndWatchScroll(i,n)),d=r.draggable.getAllByType(e.draggable.type).map(p=>p.getDimension(i));return{dimensions:{draggables:xy(d),droppables:yy(c)},critical:e,viewport:s}};function Xg(e,n,r){return!(r.descriptor.id===n.id||r.descriptor.type!==n.type||e.droppable.getById(r.descriptor.droppableId).descriptor.mode!=="virtual")}var QE=(e,n)=>{let r=null;const s=qE({callbacks:{publish:n.publishWhileDragging,collectionStarting:n.collectionStarting},registry:e}),i=(y,b)=>{e.droppable.exists(y)||de(),r&&n.updateDroppableIsEnabled({id:y,isEnabled:b})},a=(y,b)=>{r&&(e.droppable.exists(y)||de(),n.updateDroppableIsCombineEnabled({id:y,isCombineEnabled:b}))},c=(y,b)=>{r&&(e.droppable.exists(y)||de(),n.updateDroppableScroll({id:y,newScroll:b}))},d=(y,b)=>{r&&e.droppable.getById(y).callbacks.scroll(b)},h=()=>{if(!r)return;s.stop();const y=r.critical.droppable;e.droppable.getAllByType(y.type).forEach(b=>b.callbacks.dragStopped()),r.unsubscribe(),r=null},m=y=>{r||de();const b=r.critical.draggable;y.type==="ADDITION"&&Xg(e,b,y.value)&&s.add(y.value),y.type==="REMOVAL"&&Xg(e,b,y.value)&&s.remove(y.value)};return{updateDroppableIsEnabled:i,updateDroppableIsCombineEnabled:a,scrollDroppable:d,updateDroppableScroll:c,startPublishing:y=>{r&&de();const b=e.draggable.getById(y.draggableId),w=e.droppable.getById(b.descriptor.droppableId),E={draggable:b.descriptor,droppable:w.descriptor},C=e.subscribe(m);return r={critical:E,unsubscribe:C},YE({critical:E,registry:e,scrollOptions:y.scrollOptions})},stopPublishing:h}},Hy=(e,n)=>e.phase==="IDLE"?!0:e.phase!=="DROP_ANIMATING"||e.completed.result.draggableId===n?!1:e.completed.result.reason==="DROP",XE=e=>{window.scrollBy(e.x,e.y)};const JE=It(e=>Za(e).filter(n=>!(!n.isEnabled||!n.frame))),ZE=(e,n)=>JE(n).find(s=>(s.frame||de(),ky(s.frame.pageMarginBox)(e)))||null;var eD=({center:e,destination:n,droppables:r})=>{if(n){const i=r[n];return i.frame?i:null}return ZE(e,r)};const ti={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:e=>e**2,durationDampening:{stopDampeningAt:1200,accelerateAt:360},disabled:!1};var tD=(e,n,r=()=>ti)=>{const s=r(),i=e[n.size]*s.startFromPercentage,a=e[n.size]*s.maxScrollAtPercentage;return{startScrollingFrom:i,maxScrollValueAt:a}},qy=({startOfRange:e,endOfRange:n,current:r})=>{const s=n-e;return s===0?0:(r-e)/s},ef=1,nD=(e,n,r=()=>ti)=>{const s=r();if(e>n.startScrollingFrom)return 0;if(e<=n.maxScrollValueAt)return s.maxPixelScroll;if(e===n.startScrollingFrom)return ef;const a=1-qy({startOfRange:n.maxScrollValueAt,endOfRange:n.startScrollingFrom,current:e}),c=s.maxPixelScroll*s.ease(a);return Math.ceil(c)},rD=(e,n,r)=>{const s=r(),i=s.durationDampening.accelerateAt,a=s.durationDampening.stopDampeningAt,c=n,d=a,m=Date.now()-c;if(m>=a)return e;if(m<i)return ef;const p=qy({startOfRange:i,endOfRange:d,current:m}),g=e*s.ease(p);return Math.ceil(g)},Jg=({distanceToEdge:e,thresholds:n,dragStartTime:r,shouldUseTimeDampening:s,getAutoScrollerOptions:i})=>{const a=nD(e,n,i);return a===0?0:s?Math.max(rD(a,r,i),ef):a},Zg=({container:e,distanceToEdges:n,dragStartTime:r,axis:s,shouldUseTimeDampening:i,getAutoScrollerOptions:a})=>{const c=tD(e,s,a);return n[s.end]<n[s.start]?Jg({distanceToEdge:n[s.end],thresholds:c,dragStartTime:r,shouldUseTimeDampening:i,getAutoScrollerOptions:a}):-1*Jg({distanceToEdge:n[s.start],thresholds:c,dragStartTime:r,shouldUseTimeDampening:i,getAutoScrollerOptions:a})},oD=({container:e,subject:n,proposedScroll:r})=>{const s=n.height>e.height,i=n.width>e.width;return!i&&!s?r:i&&s?null:{x:i?0:r.x,y:s?0:r.y}};const sD=vy(e=>e===0?0:e);var Ky=({dragStartTime:e,container:n,subject:r,center:s,shouldUseTimeDampening:i,getAutoScrollerOptions:a})=>{const c={top:s.y-n.top,right:n.right-s.x,bottom:n.bottom-s.y,left:s.x-n.left},d=Zg({container:n,distanceToEdges:c,dragStartTime:e,axis:Hd,shouldUseTimeDampening:i,getAutoScrollerOptions:a}),h=Zg({container:n,distanceToEdges:c,dragStartTime:e,axis:wy,shouldUseTimeDampening:i,getAutoScrollerOptions:a}),m=sD({x:h,y:d});if(Hr(m,Pt))return null;const p=oD({container:n,subject:r,proposedScroll:m});return p?Hr(p,Pt)?null:p:null};const iD=vy(e=>e===0?0:e>0?1:-1),tf=(()=>{const e=(n,r)=>n<0?n:n>r?n-r:0;return({current:n,max:r,change:s})=>{const i=_t(n,s),a={x:e(i.x,r.x),y:e(i.y,r.y)};return Hr(a,Pt)?null:a}})(),Yy=({max:e,current:n,change:r})=>{const s={x:Math.max(n.x,e.x),y:Math.max(n.y,e.y)},i=iD(r),a=tf({max:s,current:n,change:i});return!a||i.x!==0&&a.x===0||i.y!==0&&a.y===0},nf=(e,n)=>Yy({current:e.scroll.current,max:e.scroll.max,change:n}),aD=(e,n)=>{if(!nf(e,n))return null;const r=e.scroll.max,s=e.scroll.current;return tf({current:s,max:r,change:n})},rf=(e,n)=>{const r=e.frame;return r?Yy({current:r.scroll.current,max:r.scroll.max,change:n}):!1},lD=(e,n)=>{const r=e.frame;return!r||!rf(e,n)?null:tf({current:r.scroll.current,max:r.scroll.max,change:n})};var cD=({viewport:e,subject:n,center:r,dragStartTime:s,shouldUseTimeDampening:i,getAutoScrollerOptions:a})=>{const c=Ky({dragStartTime:s,container:e.frame,subject:n,center:r,shouldUseTimeDampening:i,getAutoScrollerOptions:a});return c&&nf(e,c)?c:null},uD=({droppable:e,subject:n,center:r,dragStartTime:s,shouldUseTimeDampening:i,getAutoScrollerOptions:a})=>{const c=e.frame;if(!c)return null;const d=Ky({dragStartTime:s,container:c.pageMarginBox,subject:n,center:r,shouldUseTimeDampening:i,getAutoScrollerOptions:a});return d&&rf(e,d)?d:null},ev=({state:e,dragStartTime:n,shouldUseTimeDampening:r,scrollWindow:s,scrollDroppable:i,getAutoScrollerOptions:a})=>{const c=e.current.page.borderBoxCenter,h=e.dimensions.draggables[e.critical.draggable.id].page.marginBox;if(e.isWindowScrollAllowed){const g=e.viewport,y=cD({dragStartTime:n,viewport:g,subject:h,center:c,shouldUseTimeDampening:r,getAutoScrollerOptions:a});if(y){s(y);return}}const m=eD({center:c,destination:En(e.impact),droppables:e.dimensions.droppables});if(!m)return;const p=uD({dragStartTime:n,droppable:m,subject:h,center:c,shouldUseTimeDampening:r,getAutoScrollerOptions:a});p&&i(m.descriptor.id,p)},dD=({scrollWindow:e,scrollDroppable:n,getAutoScrollerOptions:r=()=>ti})=>{const s=Qs(e),i=Qs(n);let a=null;const c=m=>{a||de();const{shouldUseTimeDampening:p,dragStartTime:g}=a;ev({state:m,scrollWindow:s,scrollDroppable:i,dragStartTime:g,shouldUseTimeDampening:p,getAutoScrollerOptions:r})};return{start:m=>{a&&de();const p=Date.now();let g=!1;const y=()=>{g=!0};ev({state:m,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:y,scrollDroppable:y,getAutoScrollerOptions:r}),a={dragStartTime:p,shouldUseTimeDampening:g},g&&c(m)},stop:()=>{a&&(s.cancel(),i.cancel(),a=null)},scroll:c}},fD=({move:e,scrollDroppable:n,scrollWindow:r})=>{const s=(d,h)=>{const m=_t(d.current.client.selection,h);e({client:m})},i=(d,h)=>{if(!rf(d,h))return h;const m=lD(d,h);if(!m)return n(d.descriptor.id,h),null;const p=Sn(h,m);return n(d.descriptor.id,p),Sn(h,p)},a=(d,h,m)=>{if(!d||!nf(h,m))return m;const p=aD(h,m);if(!p)return r(m),null;const g=Sn(m,p);return r(g),Sn(m,g)};return d=>{const h=d.scrollJumpRequest;if(!h)return;const m=En(d.impact);m||de();const p=i(d.dimensions.droppables[m],h);if(!p)return;const g=d.viewport,y=a(d.isWindowScrollAllowed,g,p);y&&s(d,y)}},hD=({scrollDroppable:e,scrollWindow:n,move:r,getAutoScrollerOptions:s})=>{const i=dD({scrollWindow:n,scrollDroppable:e,getAutoScrollerOptions:s}),a=fD({move:r,scrollWindow:n,scrollDroppable:e});return{scroll:h=>{if(!(s().disabled||h.phase!=="DRAGGING")){if(h.movementMode==="FLUID"){i.scroll(h);return}h.scrollJumpRequest&&a(h)}},start:i.start,stop:i.stop}};const Go="data-rfd",Uo=(()=>{const e=`${Go}-drag-handle`;return{base:e,draggableId:`${e}-draggable-id`,contextId:`${e}-context-id`}})(),bd=(()=>{const e=`${Go}-draggable`;return{base:e,contextId:`${e}-context-id`,id:`${e}-id`}})(),mD=(()=>{const e=`${Go}-droppable`;return{base:e,contextId:`${e}-context-id`,id:`${e}-id`}})(),tv={contextId:`${Go}-scroll-container-context-id`},pD=e=>n=>`[${n}="${e}"]`,Ls=(e,n)=>e.map(r=>{const s=r.styles[n];return s?`${r.selector} { ${s} }`:""}).join(" "),gD="pointer-events: none;";var vD=e=>{const n=pD(e),r=(()=>{const d=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:n(Uo.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:d,dragging:gD,dropAnimating:d}}})(),s=(()=>{const d=`
      transition: ${Gs.outOfTheWay};
    `;return{selector:n(bd.contextId),styles:{dragging:d,dropAnimating:d,userCancel:d}}})(),i={selector:n(mD.contextId),styles:{always:"overflow-anchor: none;"}},c=[s,r,i,{selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}}];return{always:Ls(c,"always"),resting:Ls(c,"resting"),dragging:Ls(c,"dragging"),dropAnimating:Ls(c,"dropAnimating"),userCancel:Ls(c,"userCancel")}};const Dn=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?N.useLayoutEffect:N.useEffect,Wu=()=>{const e=document.querySelector("head");return e||de(),e},nv=e=>{const n=document.createElement("style");return e&&n.setAttribute("nonce",e),n.type="text/css",n};function yD(e,n){const r=Be(()=>vD(e),[e]),s=N.useRef(null),i=N.useRef(null),a=Se(It(g=>{const y=i.current;y||de(),y.textContent=g}),[]),c=Se(g=>{const y=s.current;y||de(),y.textContent=g},[]);Dn(()=>{!s.current&&!i.current||de();const g=nv(n),y=nv(n);return s.current=g,i.current=y,g.setAttribute(`${Go}-always`,e),y.setAttribute(`${Go}-dynamic`,e),Wu().appendChild(g),Wu().appendChild(y),c(r.always),a(r.resting),()=>{const b=w=>{const E=w.current;E||de(),Wu().removeChild(E),w.current=null};b(s),b(i)}},[n,c,a,r.always,r.resting,e]);const d=Se(()=>a(r.dragging),[a,r.dragging]),h=Se(g=>{if(g==="DROP"){a(r.dropAnimating);return}a(r.userCancel)},[a,r.dropAnimating,r.userCancel]),m=Se(()=>{i.current&&a(r.resting)},[a,r.resting]);return Be(()=>({dragging:d,dropping:h,resting:m}),[d,h,m])}function Qy(e,n){return Array.from(e.querySelectorAll(n))}var Xy=e=>e&&e.ownerDocument&&e.ownerDocument.defaultView?e.ownerDocument.defaultView:window;function rl(e){return e instanceof Xy(e).HTMLElement}function xD(e,n){const r=`[${Uo.contextId}="${e}"]`,s=Qy(document,r);if(!s.length)return null;const i=s.find(a=>a.getAttribute(Uo.draggableId)===n);return!i||!rl(i)?null:i}function bD(e){const n=N.useRef({}),r=N.useRef(null),s=N.useRef(null),i=N.useRef(!1),a=Se(function(y,b){const w={id:y,focus:b};return n.current[y]=w,function(){const C=n.current;C[y]!==w&&delete C[y]}},[]),c=Se(function(y){const b=xD(e,y);b&&b!==document.activeElement&&b.focus()},[e]),d=Se(function(y,b){r.current===y&&(r.current=b)},[]),h=Se(function(){s.current||i.current&&(s.current=requestAnimationFrame(()=>{s.current=null;const y=r.current;y&&c(y)}))},[c]),m=Se(function(y){r.current=null;const b=document.activeElement;b&&b.getAttribute(Uo.draggableId)===y&&(r.current=y)},[]);return Dn(()=>(i.current=!0,function(){i.current=!1;const y=s.current;y&&cancelAnimationFrame(y)}),[]),Be(()=>({register:a,tryRecordFocus:m,tryRestoreFocusRecorded:h,tryShiftRecord:d}),[a,m,h,d])}function ND(){const e={draggables:{},droppables:{}},n=[];function r(g){return n.push(g),function(){const b=n.indexOf(g);b!==-1&&n.splice(b,1)}}function s(g){n.length&&n.forEach(y=>y(g))}function i(g){return e.draggables[g]||null}function a(g){const y=i(g);return y||de(),y}const c={register:g=>{e.draggables[g.descriptor.id]=g,s({type:"ADDITION",value:g})},update:(g,y)=>{const b=e.draggables[y.descriptor.id];b&&b.uniqueId===g.uniqueId&&(delete e.draggables[y.descriptor.id],e.draggables[g.descriptor.id]=g)},unregister:g=>{const y=g.descriptor.id,b=i(y);b&&g.uniqueId===b.uniqueId&&(delete e.draggables[y],e.droppables[g.descriptor.droppableId]&&s({type:"REMOVAL",value:g}))},getById:a,findById:i,exists:g=>!!i(g),getAllByType:g=>Object.values(e.draggables).filter(y=>y.descriptor.type===g)};function d(g){return e.droppables[g]||null}function h(g){const y=d(g);return y||de(),y}const m={register:g=>{e.droppables[g.descriptor.id]=g},unregister:g=>{const y=d(g.descriptor.id);y&&g.uniqueId===y.uniqueId&&delete e.droppables[g.descriptor.id]},getById:h,findById:d,exists:g=>!!d(g),getAllByType:g=>Object.values(e.droppables).filter(y=>y.descriptor.type===g)};function p(){e.draggables={},e.droppables={},n.length=0}return{draggable:c,droppable:m,subscribe:r,clean:p}}function wD(){const e=Be(ND,[]);return N.useEffect(()=>function(){e.clean()},[e]),e}var of=ve.createContext(null),Ga=()=>{const e=document.body;return e||de(),e};const CD={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},SD=e=>`rfd-announcement-${e}`;function ED(e){const n=Be(()=>SD(e),[e]),r=N.useRef(null);return N.useEffect(function(){const a=document.createElement("div");return r.current=a,a.id=n,a.setAttribute("aria-live","assertive"),a.setAttribute("aria-atomic","true"),La(a.style,CD),Ga().appendChild(a),function(){setTimeout(function(){const h=Ga();h.contains(a)&&h.removeChild(a),a===r.current&&(r.current=null)})}},[n]),Se(i=>{const a=r.current;if(a){a.textContent=i;return}},[])}const DD={separator:"::"};function sf(e,n=DD){const r=ve.useId();return Be(()=>`${e}${n.separator}${r}`,[n.separator,e,r])}function jD({contextId:e,uniqueId:n}){return`rfd-hidden-text-${e}-${n}`}function AD({contextId:e,text:n}){const r=sf("hidden-text",{separator:"-"}),s=Be(()=>jD({contextId:e,uniqueId:r}),[r,e]);return N.useEffect(function(){const a=document.createElement("div");return a.id=s,a.textContent=n,a.style.display="none",Ga().appendChild(a),function(){const d=Ga();d.contains(a)&&d.removeChild(a)}},[s,n]),s}var ol=ve.createContext(null);function Jy(e){const n=N.useRef(e);return N.useEffect(()=>{n.current=e}),n}function kD(){let e=null;function n(){return!!e}function r(c){return c===e}function s(c){e&&de();const d={abandon:c};return e=d,d}function i(){e||de(),e=null}function a(){e&&(e.abandon(),i())}return{isClaimed:n,isActive:r,claim:s,release:i,tryAbandon:a}}function ni(e){return e.phase==="IDLE"||e.phase==="DROP_ANIMATING"?!1:e.isDragging}const ID=9,PD=13,af=27,Zy=32,TD=33,RD=34,MD=35,OD=36,_D=37,LD=38,FD=39,BD=40,$D={[PD]:!0,[ID]:!0};var ex=e=>{$D[e.keyCode]&&e.preventDefault()};const sl=(()=>{const e="visibilitychange";return typeof document>"u"?e:[e,`ms${e}`,`webkit${e}`,`moz${e}`,`o${e}`].find(s=>`on${s}`in document)||e})(),tx=0,rv=5;function GD(e,n){return Math.abs(n.x-e.x)>=rv||Math.abs(n.y-e.y)>=rv}const ov={type:"IDLE"};function UD({cancel:e,completed:n,getPhase:r,setPhase:s}){return[{eventName:"mousemove",fn:i=>{const{button:a,clientX:c,clientY:d}=i;if(a!==tx)return;const h={x:c,y:d},m=r();if(m.type==="DRAGGING"){i.preventDefault(),m.actions.move(h);return}m.type!=="PENDING"&&de();const p=m.point;if(!GD(p,h))return;i.preventDefault();const g=m.actions.fluidLift(h);s({type:"DRAGGING",actions:g})}},{eventName:"mouseup",fn:i=>{const a=r();if(a.type!=="DRAGGING"){e();return}i.preventDefault(),a.actions.drop({shouldBlockNextClick:!0}),n()}},{eventName:"mousedown",fn:i=>{r().type==="DRAGGING"&&i.preventDefault(),e()}},{eventName:"keydown",fn:i=>{if(r().type==="PENDING"){e();return}if(i.keyCode===af){i.preventDefault(),e();return}ex(i)}},{eventName:"resize",fn:e},{eventName:"scroll",options:{passive:!0,capture:!1},fn:()=>{r().type==="PENDING"&&e()}},{eventName:"webkitmouseforcedown",fn:i=>{const a=r();if(a.type==="IDLE"&&de(),a.actions.shouldRespectForcePress()){e();return}i.preventDefault()}},{eventName:sl,fn:e}]}function VD(e){const n=N.useRef(ov),r=N.useRef(Wr),s=Be(()=>({eventName:"mousedown",fn:function(g){if(g.defaultPrevented||g.button!==tx||g.ctrlKey||g.metaKey||g.shiftKey||g.altKey)return;const y=e.findClosestDraggableId(g);if(!y)return;const b=e.tryGetLock(y,c,{sourceEvent:g});if(!b)return;g.preventDefault();const w={x:g.clientX,y:g.clientY};r.current(),m(b,w)}}),[e]),i=Be(()=>({eventName:"webkitmouseforcewillbegin",fn:p=>{if(p.defaultPrevented)return;const g=e.findClosestDraggableId(p);if(!g)return;const y=e.findOptionsForDraggable(g);y&&(y.shouldRespectForcePress||e.canGetLock(g)&&p.preventDefault())}}),[e]),a=Se(function(){const g={passive:!1,capture:!0};r.current=Bn(window,[i,s],g)},[i,s]),c=Se(()=>{n.current.type!=="IDLE"&&(n.current=ov,r.current(),a())},[a]),d=Se(()=>{const p=n.current;c(),p.type==="DRAGGING"&&p.actions.cancel({shouldBlockNextClick:!0}),p.type==="PENDING"&&p.actions.abort()},[c]),h=Se(function(){const g={capture:!0,passive:!1},y=UD({cancel:d,completed:c,getPhase:()=>n.current,setPhase:b=>{n.current=b}});r.current=Bn(window,y,g)},[d,c]),m=Se(function(g,y){n.current.type!=="IDLE"&&de(),n.current={type:"PENDING",point:y,actions:g},h()},[h]);Dn(function(){return a(),function(){r.current()}},[a])}function zD(){}const WD={[RD]:!0,[TD]:!0,[OD]:!0,[MD]:!0};function HD(e,n){function r(){n(),e.cancel()}function s(){n(),e.drop()}return[{eventName:"keydown",fn:i=>{if(i.keyCode===af){i.preventDefault(),r();return}if(i.keyCode===Zy){i.preventDefault(),s();return}if(i.keyCode===BD){i.preventDefault(),e.moveDown();return}if(i.keyCode===LD){i.preventDefault(),e.moveUp();return}if(i.keyCode===FD){i.preventDefault(),e.moveRight();return}if(i.keyCode===_D){i.preventDefault(),e.moveLeft();return}if(WD[i.keyCode]){i.preventDefault();return}ex(i)}},{eventName:"mousedown",fn:r},{eventName:"mouseup",fn:r},{eventName:"click",fn:r},{eventName:"touchstart",fn:r},{eventName:"resize",fn:r},{eventName:"wheel",fn:r,options:{passive:!0}},{eventName:sl,fn:r}]}function qD(e){const n=N.useRef(zD),r=Be(()=>({eventName:"keydown",fn:function(a){if(a.defaultPrevented||a.keyCode!==Zy)return;const c=e.findClosestDraggableId(a);if(!c)return;const d=e.tryGetLock(c,p,{sourceEvent:a});if(!d)return;a.preventDefault();let h=!0;const m=d.snapLift();n.current();function p(){h||de(),h=!1,n.current(),s()}n.current=Bn(window,HD(m,p),{capture:!0,passive:!1})}}),[e]),s=Se(function(){const a={passive:!1,capture:!0};n.current=Bn(window,[r],a)},[r]);Dn(function(){return s(),function(){n.current()}},[s])}const Hu={type:"IDLE"},KD=120,YD=.15;function QD({cancel:e,getPhase:n}){return[{eventName:"orientationchange",fn:e},{eventName:"resize",fn:e},{eventName:"contextmenu",fn:r=>{r.preventDefault()}},{eventName:"keydown",fn:r=>{if(n().type!=="DRAGGING"){e();return}r.keyCode===af&&r.preventDefault(),e()}},{eventName:sl,fn:e}]}function XD({cancel:e,completed:n,getPhase:r}){return[{eventName:"touchmove",options:{capture:!1},fn:s=>{const i=r();if(i.type!=="DRAGGING"){e();return}i.hasMoved=!0;const{clientX:a,clientY:c}=s.touches[0],d={x:a,y:c};s.preventDefault(),i.actions.move(d)}},{eventName:"touchend",fn:s=>{const i=r();if(i.type!=="DRAGGING"){e();return}s.preventDefault(),i.actions.drop({shouldBlockNextClick:!0}),n()}},{eventName:"touchcancel",fn:s=>{if(r().type!=="DRAGGING"){e();return}s.preventDefault(),e()}},{eventName:"touchforcechange",fn:s=>{const i=r();i.type==="IDLE"&&de();const a=s.touches[0];if(!a||!(a.force>=YD))return;const d=i.actions.shouldRespectForcePress();if(i.type==="PENDING"){d&&e();return}if(d){if(i.hasMoved){s.preventDefault();return}e();return}s.preventDefault()}},{eventName:sl,fn:e}]}function JD(e){const n=N.useRef(Hu),r=N.useRef(Wr),s=Se(function(){return n.current},[]),i=Se(function(b){n.current=b},[]),a=Be(()=>({eventName:"touchstart",fn:function(b){if(b.defaultPrevented)return;const w=e.findClosestDraggableId(b);if(!w)return;const E=e.tryGetLock(w,d,{sourceEvent:b});if(!E)return;const C=b.touches[0],{clientX:j,clientY:P}=C,A={x:j,y:P};r.current(),g(E,A)}}),[e]),c=Se(function(){const b={capture:!0,passive:!1};r.current=Bn(window,[a],b)},[a]),d=Se(()=>{const y=n.current;y.type!=="IDLE"&&(y.type==="PENDING"&&clearTimeout(y.longPressTimerId),i(Hu),r.current(),c())},[c,i]),h=Se(()=>{const y=n.current;d(),y.type==="DRAGGING"&&y.actions.cancel({shouldBlockNextClick:!0}),y.type==="PENDING"&&y.actions.abort()},[d]),m=Se(function(){const b={capture:!0,passive:!1},w={cancel:h,completed:d,getPhase:s},E=Bn(window,XD(w),b),C=Bn(window,QD(w),b);r.current=function(){E(),C()}},[h,s,d]),p=Se(function(){const b=s();b.type!=="PENDING"&&de();const w=b.actions.fluidLift(b.point);i({type:"DRAGGING",actions:w,hasMoved:!1})},[s,i]),g=Se(function(b,w){s().type!=="IDLE"&&de();const E=setTimeout(p,KD);i({type:"PENDING",point:w,actions:b,longPressTimerId:E}),m()},[m,s,i,p]);Dn(function(){return c(),function(){r.current();const w=s();w.type==="PENDING"&&(clearTimeout(w.longPressTimerId),i(Hu))}},[s,c,i]),Dn(function(){return Bn(window,[{eventName:"touchmove",fn:()=>{},options:{capture:!1,passive:!1}}])},[])}const ZD=["input","button","textarea","select","option","optgroup","video","audio"];function nx(e,n){if(n==null)return!1;if(ZD.includes(n.tagName.toLowerCase()))return!0;const s=n.getAttribute("contenteditable");return s==="true"||s===""?!0:n===e?!1:nx(e,n.parentElement)}function ej(e,n){const r=n.target;return rl(r)?nx(e,r):!1}var tj=e=>Kn(e.getBoundingClientRect()).center;function nj(e){return e instanceof Xy(e).Element}const rj=(()=>{const e="matches";return typeof document>"u"?e:[e,"msMatchesSelector","webkitMatchesSelector"].find(s=>s in Element.prototype)||e})();function rx(e,n){return e==null?null:e[rj](n)?e:rx(e.parentElement,n)}function oj(e,n){return e.closest?e.closest(n):rx(e,n)}function sj(e){return`[${Uo.contextId}="${e}"]`}function ij(e,n){const r=n.target;if(!nj(r))return null;const s=sj(e),i=oj(r,s);return!i||!rl(i)?null:i}function aj(e,n){const r=ij(e,n);return r?r.getAttribute(Uo.draggableId):null}function lj(e,n){const r=`[${bd.contextId}="${e}"]`,i=Qy(document,r).find(a=>a.getAttribute(bd.id)===n);return!i||!rl(i)?null:i}function cj(e){e.preventDefault()}function Ea({expected:e,phase:n,isLockActive:r,shouldWarn:s}){return!(!r()||e!==n)}function ox({lockAPI:e,store:n,registry:r,draggableId:s}){if(e.isClaimed())return!1;const i=r.draggable.findById(s);return!(!i||!i.options.isEnabled||!Hy(n.getState(),s))}function uj({lockAPI:e,contextId:n,store:r,registry:s,draggableId:i,forceSensorStop:a,sourceEvent:c}){if(!ox({lockAPI:e,store:r,registry:s,draggableId:i}))return null;const h=s.draggable.getById(i),m=lj(n,h.descriptor.id);if(!m||c&&!h.options.canDragInteractiveElements&&ej(m,c))return null;const p=e.claim(a||Wr);let g="PRE_DRAG";function y(){return h.options.shouldRespectForcePress}function b(){return e.isActive(p)}function w(k,R){Ea({expected:k,phase:g,isLockActive:b,shouldWarn:!0})&&r.dispatch(R())}const E=w.bind(null,"DRAGGING");function C(k){function R(){e.release(),g="COMPLETED"}g!=="PRE_DRAG"&&(R(),de()),r.dispatch(oE(k.liftActionArgs)),g="DRAGGING";function O(M,q={shouldBlockNextClick:!1}){if(k.cleanup(),q.shouldBlockNextClick){const te=Bn(window,[{eventName:"click",fn:cj,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(te)}R(),r.dispatch(Fy({reason:M}))}return{isActive:()=>Ea({expected:"DRAGGING",phase:g,isLockActive:b,shouldWarn:!1}),shouldRespectForcePress:y,drop:M=>O("DROP",M),cancel:M=>O("CANCEL",M),...k.actions}}function j(k){const R=Qs(M=>{E(()=>Ly({client:M}))});return{...C({liftActionArgs:{id:i,clientSelection:k,movementMode:"FLUID"},cleanup:()=>R.cancel(),actions:{move:R}}),move:R}}function P(){const k={moveUp:()=>E(hE),moveRight:()=>E(pE),moveDown:()=>E(mE),moveLeft:()=>E(gE)};return C({liftActionArgs:{id:i,clientSelection:tj(m),movementMode:"SNAP"},cleanup:Wr,actions:k})}function A(){Ea({expected:"PRE_DRAG",phase:g,isLockActive:b,shouldWarn:!0})&&e.release()}return{isActive:()=>Ea({expected:"PRE_DRAG",phase:g,isLockActive:b,shouldWarn:!1}),shouldRespectForcePress:y,fluidLift:j,snapLift:P,abort:A}}const dj=[VD,qD,JD];function fj({contextId:e,store:n,registry:r,customSensors:s,enableDefaultSensors:i}){const a=[...i?dj:[],...s||[]],c=N.useState(()=>kD())[0],d=Se(function(C,j){ni(C)&&!ni(j)&&c.tryAbandon()},[c]);Dn(function(){let C=n.getState();return n.subscribe(()=>{const P=n.getState();d(C,P),C=P})},[c,n,d]),Dn(()=>c.tryAbandon,[c.tryAbandon]);const h=Se(E=>ox({lockAPI:c,registry:r,store:n,draggableId:E}),[c,r,n]),m=Se((E,C,j)=>uj({lockAPI:c,registry:r,contextId:e,store:n,draggableId:E,forceSensorStop:C||null,sourceEvent:j&&j.sourceEvent?j.sourceEvent:null}),[e,c,r,n]),p=Se(E=>aj(e,E),[e]),g=Se(E=>{const C=r.draggable.findById(E);return C?C.options:null},[r.draggable]),y=Se(function(){c.isClaimed()&&(c.tryAbandon(),n.getState().phase!=="IDLE"&&n.dispatch(Xd()))},[c,n]),b=Se(()=>c.isClaimed(),[c]),w=Be(()=>({canGetLock:h,tryGetLock:m,findClosestDraggableId:p,findOptionsForDraggable:g,tryReleaseLock:y,isLockClaimed:b}),[h,m,p,g,y,b]);for(let E=0;E<a.length;E++)a[E](w)}const hj=e=>({onBeforeCapture:n=>{const r=()=>{e.onBeforeCapture&&e.onBeforeCapture(n)};xr.flushSync(r)},onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragEnd:e.onDragEnd,onDragUpdate:e.onDragUpdate}),mj=e=>({...ti,...e.autoScrollerOptions,durationDampening:{...ti.durationDampening,...e.autoScrollerOptions}});function Fs(e){return e.current||de(),e.current}function pj(e){const{contextId:n,setCallbacks:r,sensors:s,nonce:i,dragHandleUsageInstructions:a}=e,c=N.useRef(null),d=Jy(e),h=Se(()=>hj(d.current),[d]),m=Se(()=>mj(d.current),[d]),p=ED(n),g=AD({contextId:n,text:a}),y=yD(n,i),b=Se(te=>{Fs(c).dispatch(te)},[]),w=Be(()=>Ig({publishWhileDragging:iE,updateDroppableScroll:lE,updateDroppableIsEnabled:cE,updateDroppableIsCombineEnabled:uE,collectionStarting:aE},b),[b]),E=wD(),C=Be(()=>QE(E,w),[E,w]),j=Be(()=>hD({scrollWindow:XE,scrollDroppable:C.scrollDroppable,getAutoScrollerOptions:m,...Ig({move:Ly},b)}),[C.scrollDroppable,b,m]),P=bD(n),A=Be(()=>HE({announce:p,autoScroller:j,dimensionMarshal:C,focusMarshal:P,getResponders:h,styleMarshal:y}),[p,j,C,P,h,y]);c.current=A;const D=Se(()=>{const te=Fs(c);te.getState().phase!=="IDLE"&&te.dispatch(Xd())},[]),k=Se(()=>{const te=Fs(c).getState();return te.phase==="DROP_ANIMATING"?!0:te.phase==="IDLE"?!1:te.isDragging},[]),R=Be(()=>({isDragging:k,tryAbort:D}),[k,D]);r(R);const O=Se(te=>Hy(Fs(c).getState(),te),[]),M=Se(()=>fo(Fs(c).getState()),[]),q=Be(()=>({marshal:C,focus:P,contextId:n,canLift:O,isMovementAllowed:M,dragHandleUsageInstructionsId:g,registry:E}),[n,C,g,P,O,M,E]);return fj({contextId:n,store:A,registry:E,customSensors:s||null,enableDefaultSensors:e.enableDefaultSensors!==!1}),N.useEffect(()=>D,[D]),ve.createElement(ol.Provider,{value:q},ve.createElement($S,{context:of,store:A},e.children))}function gj(){return ve.useId()}function sx(e){const n=gj(),r=e.dragHandleUsageInstructions||Aa.dragHandleUsageInstructions;return ve.createElement(qS,null,s=>ve.createElement(pj,{nonce:e.nonce,contextId:n,setCallbacks:s,dragHandleUsageInstructions:r,enableDefaultSensors:e.enableDefaultSensors,sensors:e.sensors,onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragUpdate:e.onDragUpdate,onDragEnd:e.onDragEnd,autoScrollerOptions:e.autoScrollerOptions},e.children))}const sv={dragging:5e3,dropAnimating:4500},vj=(e,n)=>n?Gs.drop(n.duration):e?Gs.snap:Gs.fluid,yj=(e,n)=>{if(e)return n?ei.opacity.drop:ei.opacity.combining},xj=e=>e.forceShouldAnimate!=null?e.forceShouldAnimate:e.mode==="SNAP";function bj(e){const r=e.dimension.client,{offset:s,combineWith:i,dropping:a}=e,c=!!i,d=xj(e),h=!!a,m=h?yd.drop(s,c):yd.moveTo(s);return{position:"fixed",top:r.marginBox.top,left:r.marginBox.left,boxSizing:"border-box",width:r.borderBox.width,height:r.borderBox.height,transition:vj(d,a),transform:m,opacity:yj(c,h),zIndex:h?sv.dropAnimating:sv.dragging,pointerEvents:"none"}}function Nj(e){return{transform:yd.moveTo(e.offset),transition:e.shouldAnimateDisplacement?void 0:"none"}}function wj(e){return e.type==="DRAGGING"?bj(e):Nj(e)}function Cj(e,n,r=Pt){const s=window.getComputedStyle(n),i=n.getBoundingClientRect(),a=dy(i,s),c=_a(a,r),d={client:a,tagName:n.tagName.toLowerCase(),display:s.display},h={x:a.marginBox.width,y:a.marginBox.height};return{descriptor:e,placeholder:d,displaceBy:h,client:a,page:c}}function Sj(e){const n=sf("draggable"),{descriptor:r,registry:s,getDraggableRef:i,canDragInteractiveElements:a,shouldRespectForcePress:c,isEnabled:d}=e,h=Be(()=>({canDragInteractiveElements:a,shouldRespectForcePress:c,isEnabled:d}),[a,d,c]),m=Se(b=>{const w=i();return w||de(),Cj(r,w,b)},[r,i]),p=Be(()=>({uniqueId:n,descriptor:r,options:h,getDimension:m}),[r,m,h,n]),g=N.useRef(p),y=N.useRef(!0);Dn(()=>(s.draggable.register(g.current),()=>s.draggable.unregister(g.current)),[s.draggable]),Dn(()=>{if(y.current){y.current=!1;return}const b=g.current;g.current=p,s.draggable.update(p,b)},[p,s.draggable])}var lf=ve.createContext(null);function Ua(e){const n=N.useContext(e);return n||de(),n}function Ej(e){e.preventDefault()}const Dj=e=>{const n=N.useRef(null),r=Se((R=null)=>{n.current=R},[]),s=Se(()=>n.current,[]),{contextId:i,dragHandleUsageInstructionsId:a,registry:c}=Ua(ol),{type:d,droppableId:h}=Ua(lf),m=Be(()=>({id:e.draggableId,index:e.index,type:d,droppableId:h}),[e.draggableId,e.index,d,h]),{children:p,draggableId:g,isEnabled:y,shouldRespectForcePress:b,canDragInteractiveElements:w,isClone:E,mapped:C,dropAnimationFinished:j}=e;if(!E){const R=Be(()=>({descriptor:m,registry:c,getDraggableRef:s,canDragInteractiveElements:w,shouldRespectForcePress:b,isEnabled:y}),[m,c,s,w,b,y]);Sj(R)}const P=Be(()=>y?{tabIndex:0,role:"button","aria-describedby":a,"data-rfd-drag-handle-draggable-id":g,"data-rfd-drag-handle-context-id":i,draggable:!1,onDragStart:Ej}:null,[i,a,g,y]),A=Se(R=>{C.type==="DRAGGING"&&C.dropping&&R.propertyName==="transform"&&xr.flushSync(j)},[j,C]),D=Be(()=>{const R=wj(C),O=C.type==="DRAGGING"&&C.dropping?A:void 0;return{innerRef:r,draggableProps:{"data-rfd-draggable-context-id":i,"data-rfd-draggable-id":g,style:R,onTransitionEnd:O},dragHandleProps:P}},[i,P,g,C,A,r]),k=Be(()=>({draggableId:m.id,type:m.type,source:{index:m.index,droppableId:m.droppableId}}),[m.droppableId,m.id,m.index,m.type]);return ve.createElement(ve.Fragment,null,p(D,C.snapshot,k))};var ix=(e,n)=>e===n,ax=e=>{const{combine:n,destination:r}=e;return r?r.droppableId:n?n.droppableId:null};const jj=e=>e.combine?e.combine.draggableId:null,Aj=e=>e.at&&e.at.type==="COMBINE"?e.at.combine.draggableId:null;function kj(){const e=It((i,a)=>({x:i,y:a})),n=It((i,a,c=null,d=null,h=null)=>({isDragging:!0,isClone:a,isDropAnimating:!!h,dropAnimation:h,mode:i,draggingOver:c,combineWith:d,combineTargetFor:null})),r=It((i,a,c,d,h=null,m=null,p=null)=>({mapped:{type:"DRAGGING",dropping:null,draggingOver:h,combineWith:m,mode:a,offset:i,dimension:c,forceShouldAnimate:p,snapshot:n(a,d,h,m,null)}}));return(i,a)=>{if(ni(i)){if(i.critical.draggable.id!==a.draggableId)return null;const c=i.current.client.offset,d=i.dimensions.draggables[a.draggableId],h=En(i.impact),m=Aj(i.impact),p=i.forceShouldAnimate;return r(e(c.x,c.y),i.movementMode,d,a.isClone,h,m,p)}if(i.phase==="DROP_ANIMATING"){const c=i.completed;if(c.result.draggableId!==a.draggableId)return null;const d=a.isClone,h=i.dimensions.draggables[a.draggableId],m=c.result,p=m.mode,g=ax(m),y=jj(m),w={duration:i.dropDuration,curve:Zd.drop,moveTo:i.newHomeClientOffset,opacity:y?ei.opacity.drop:null,scale:y?ei.scale.drop:null};return{mapped:{type:"DRAGGING",offset:i.newHomeClientOffset,dimension:h,dropping:w,draggingOver:g,combineWith:y,mode:p,forceShouldAnimate:null,snapshot:n(p,d,g,y,w)}}}return null}}function lx(e=null){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:e,combineWith:null}}const Ij={mapped:{type:"SECONDARY",offset:Pt,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:lx(null)}};function Pj(){const e=It((c,d)=>({x:c,y:d})),n=It(lx),r=It((c,d=null,h)=>({mapped:{type:"SECONDARY",offset:c,combineTargetFor:d,shouldAnimateDisplacement:h,snapshot:n(d)}})),s=c=>c?r(Pt,c,!0):null,i=(c,d,h,m)=>{const p=h.displaced.visible[c],g=!!(m.inVirtualList&&m.effected[c]),y=el(h),b=y&&y.draggableId===c?d:null;if(!p){if(!g)return s(b);if(h.displaced.invisible[c])return null;const C=Vo(m.displacedBy.point),j=e(C.x,C.y);return r(j,b,!0)}if(g)return s(b);const w=h.displacedBy.point,E=e(w.x,w.y);return r(E,b,p.shouldAnimate)};return(c,d)=>{if(ni(c))return c.critical.draggable.id===d.draggableId?null:i(d.draggableId,c.critical.draggable.id,c.impact,c.afterCritical);if(c.phase==="DROP_ANIMATING"){const h=c.completed;return h.result.draggableId===d.draggableId?null:i(d.draggableId,h.result.draggableId,h.impact,h.afterCritical)}return null}}const Tj=()=>{const e=kj(),n=Pj();return(s,i)=>e(s,i)||n(s,i)||Ij},Rj={dropAnimationFinished:By},Mj=uy(Tj,Rj,null,{context:of,areStatePropsEqual:ix})(Dj);function cx(e){return Ua(lf).isUsingCloneFor===e.draggableId&&!e.isClone?null:ve.createElement(Mj,e)}function ux(e){const n=typeof e.isDragDisabled=="boolean"?!e.isDragDisabled:!0,r=!!e.disableInteractiveElementBlocking,s=!!e.shouldRespectForcePress;return ve.createElement(cx,La({},e,{isClone:!1,isEnabled:n,canDragInteractiveElements:r,shouldRespectForcePress:s}))}const dx=e=>n=>e===n,Oj=dx("scroll"),_j=dx("auto"),iv=(e,n)=>n(e.overflowX)||n(e.overflowY),Lj=e=>{const n=window.getComputedStyle(e),r={overflowX:n.overflowX,overflowY:n.overflowY};return iv(r,Oj)||iv(r,_j)},Fj=()=>!1,fx=e=>e==null?null:e===document.body?Fj()?e:null:e===document.documentElement?null:Lj(e)?e:fx(e.parentElement);var Nd=e=>({x:e.scrollLeft,y:e.scrollTop});const hx=e=>e?window.getComputedStyle(e).position==="fixed"?!0:hx(e.parentElement):!1;var Bj=e=>{const n=fx(e),r=hx(e);return{closestScrollable:n,isFixedOnPage:r}},$j=({descriptor:e,isEnabled:n,isCombineEnabled:r,isFixedOnPage:s,direction:i,client:a,page:c,closest:d})=>{const h=(()=>{if(!d)return null;const{scrollSize:y,client:b}=d,w=Vy({scrollHeight:y.scrollHeight,scrollWidth:y.scrollWidth,height:b.paddingBox.height,width:b.paddingBox.width});return{pageMarginBox:d.page.marginBox,frameClient:b,scrollSize:y,shouldClipSubject:d.shouldClipSubject,scroll:{initial:d.scroll,current:d.scroll,max:w,diff:{value:Pt,displacement:Pt}}}})(),m=i==="vertical"?Hd:wy,p=$o({page:c,withPlaceholder:null,axis:m,frame:h});return{descriptor:e,isCombineEnabled:r,isFixedOnPage:s,axis:m,isEnabled:n,client:a,page:c,frame:h,subject:p}};const Gj=(e,n)=>{const r=fy(e);if(!n||e!==n)return r;const s=r.paddingBox.top-n.scrollTop,i=r.paddingBox.left-n.scrollLeft,a=s+n.scrollHeight,c=i+n.scrollWidth,h=Ud({top:s,right:c,bottom:a,left:i},r.border);return Vd({borderBox:h,margin:r.margin,border:r.border,padding:r.padding})};var Uj=({ref:e,descriptor:n,env:r,windowScroll:s,direction:i,isDropDisabled:a,isCombineEnabled:c,shouldClipSubject:d})=>{const h=r.closestScrollable,m=Gj(e,h),p=_a(m,s),g=(()=>{if(!h)return null;const b=fy(h),w={scrollHeight:h.scrollHeight,scrollWidth:h.scrollWidth};return{client:b,page:_a(b,s),scroll:Nd(h),scrollSize:w,shouldClipSubject:d}})();return $j({descriptor:n,isEnabled:!a,isCombineEnabled:c,isFixedOnPage:r.isFixedOnPage,direction:i,client:m,page:p,closest:g})};const Vj={passive:!1},zj={passive:!0};var av=e=>e.shouldPublishImmediately?Vj:zj;const Da=e=>e&&e.env.closestScrollable||null;function Wj(e){const n=N.useRef(null),r=Ua(ol),s=sf("droppable"),{registry:i,marshal:a}=r,c=Jy(e),d=Be(()=>({id:e.droppableId,type:e.type,mode:e.mode}),[e.droppableId,e.mode,e.type]),h=N.useRef(d),m=Be(()=>It((D,k)=>{n.current||de();const R={x:D,y:k};a.updateDroppableScroll(d.id,R)}),[d.id,a]),p=Se(()=>{const D=n.current;return!D||!D.env.closestScrollable?Pt:Nd(D.env.closestScrollable)},[]),g=Se(()=>{const D=p();m(D.x,D.y)},[p,m]),y=Be(()=>Qs(g),[g]),b=Se(()=>{const D=n.current,k=Da(D);if(D&&k||de(),D.scrollOptions.shouldPublishImmediately){g();return}y()},[y,g]),w=Se((D,k)=>{n.current&&de();const R=c.current,O=R.getDroppableRef();O||de();const M=Bj(O),q={ref:O,descriptor:d,env:M,scrollOptions:k};n.current=q;const te=Uj({ref:O,descriptor:d,env:M,windowScroll:D,direction:R.direction,isDropDisabled:R.isDropDisabled,isCombineEnabled:R.isCombineEnabled,shouldClipSubject:!R.ignoreContainerClipping}),oe=M.closestScrollable;return oe&&(oe.setAttribute(tv.contextId,r.contextId),oe.addEventListener("scroll",b,av(q.scrollOptions))),te},[r.contextId,d,b,c]),E=Se(()=>{const D=n.current,k=Da(D);return D&&k||de(),Nd(k)},[]),C=Se(()=>{const D=n.current;D||de();const k=Da(D);n.current=null,k&&(y.cancel(),k.removeAttribute(tv.contextId),k.removeEventListener("scroll",b,av(D.scrollOptions)))},[b,y]),j=Se(D=>{const k=n.current;k||de();const R=Da(k);R||de(),R.scrollTop+=D.y,R.scrollLeft+=D.x},[]),P=Be(()=>({getDimensionAndWatchScroll:w,getScrollWhileDragging:E,dragStopped:C,scroll:j}),[C,w,E,j]),A=Be(()=>({uniqueId:s,descriptor:d,callbacks:P}),[P,d,s]);Dn(()=>(h.current=A.descriptor,i.droppable.register(A),()=>{n.current&&C(),i.droppable.unregister(A)}),[P,d,C,A,a,i.droppable]),Dn(()=>{n.current&&a.updateDroppableIsEnabled(h.current.id,!e.isDropDisabled)},[e.isDropDisabled,a]),Dn(()=>{n.current&&a.updateDroppableIsCombineEnabled(h.current.id,e.isCombineEnabled)},[e.isCombineEnabled,a])}function qu(){}const lv={width:0,height:0,margin:e2},Hj=({isAnimatingOpenOnMount:e,placeholder:n,animate:r})=>e||r==="close"?lv:{height:n.client.borderBox.height,width:n.client.borderBox.width,margin:n.client.margin},qj=({isAnimatingOpenOnMount:e,placeholder:n,animate:r})=>{const s=Hj({isAnimatingOpenOnMount:e,placeholder:n,animate:r});return{display:n.display,boxSizing:"border-box",width:s.width,height:s.height,marginTop:s.margin.top,marginRight:s.margin.right,marginBottom:s.margin.bottom,marginLeft:s.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:r!=="none"?Gs.placeholder:null}},Kj=e=>{const n=N.useRef(null),r=Se(()=>{n.current&&(clearTimeout(n.current),n.current=null)},[]),{animate:s,onTransitionEnd:i,onClose:a,contextId:c}=e,[d,h]=N.useState(e.animate==="open");N.useEffect(()=>d?s!=="open"?(r(),h(!1),qu):n.current?qu:(n.current=setTimeout(()=>{n.current=null,h(!1)}),r):qu,[s,d,r]);const m=Se(g=>{g.propertyName==="height"&&(i(),s==="close"&&a())},[s,a,i]),p=qj({isAnimatingOpenOnMount:d,animate:e.animate,placeholder:e.placeholder});return ve.createElement(e.placeholder.tagName,{style:p,"data-rfd-placeholder-context-id":c,onTransitionEnd:m,ref:e.innerRef})};var Yj=ve.memo(Kj);class Qj extends ve.PureComponent{constructor(...n){super(...n),this.state={isVisible:!!this.props.on,data:this.props.on,animate:this.props.shouldAnimate&&this.props.on?"open":"none"},this.onClose=()=>{this.state.animate==="close"&&this.setState({isVisible:!1})}}static getDerivedStateFromProps(n,r){return n.shouldAnimate?n.on?{isVisible:!0,data:n.on,animate:"open"}:r.isVisible?{isVisible:!0,data:r.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!n.on,data:n.on,animate:"none"}}render(){if(!this.state.isVisible)return null;const n={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(n)}}const Xj=e=>{const n=N.useContext(ol);n||de();const{contextId:r,isMovementAllowed:s}=n,i=N.useRef(null),a=N.useRef(null),{children:c,droppableId:d,type:h,mode:m,direction:p,ignoreContainerClipping:g,isDropDisabled:y,isCombineEnabled:b,snapshot:w,useClone:E,updateViewportMaxScroll:C,getContainerForClone:j}=e,P=Se(()=>i.current,[]),A=Se((oe=null)=>{i.current=oe},[]);Se(()=>a.current,[]);const D=Se((oe=null)=>{a.current=oe},[]),k=Se(()=>{s()&&C({maxScroll:Wy()})},[s,C]);Wj({droppableId:d,type:h,mode:m,direction:p,isDropDisabled:y,isCombineEnabled:b,ignoreContainerClipping:g,getDroppableRef:P});const R=Be(()=>ve.createElement(Qj,{on:e.placeholder,shouldAnimate:e.shouldAnimatePlaceholder},({onClose:oe,data:Z,animate:Q})=>ve.createElement(Yj,{placeholder:Z,onClose:oe,innerRef:D,animate:Q,contextId:r,onTransitionEnd:k})),[r,k,e.placeholder,e.shouldAnimatePlaceholder,D]),O=Be(()=>({innerRef:A,placeholder:R,droppableProps:{"data-rfd-droppable-id":d,"data-rfd-droppable-context-id":r}}),[r,d,R,A]),M=E?E.dragging.draggableId:null,q=Be(()=>({droppableId:d,type:h,isUsingCloneFor:M}),[d,M,h]);function te(){if(!E)return null;const{dragging:oe,render:Z}=E,Q=ve.createElement(cx,{draggableId:oe.draggableId,index:oe.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},(se,K)=>Z(se,K,oe));return xC.createPortal(Q,j())}return ve.createElement(lf.Provider,{value:q},c(O,w),te())};function Jj(){return document.body||de(),document.body}const cv={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:Jj},mx=e=>{let n={...e},r;for(r in cv)e[r]===void 0&&(n={...n,[r]:cv[r]});return n},Ku=(e,n)=>e===n.droppable.type,uv=(e,n)=>n.draggables[e.draggable.id],Zj=()=>{const e={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},n={...e,shouldAnimatePlaceholder:!1},r=It(a=>({draggableId:a.id,type:a.type,source:{index:a.index,droppableId:a.droppableId}})),s=It((a,c,d,h,m,p)=>{const g=m.descriptor.id;if(m.descriptor.droppableId===a){const w=p?{render:p,dragging:r(m.descriptor)}:null,E={isDraggingOver:d,draggingOverWith:d?g:null,draggingFromThisWith:g,isUsingPlaceholder:!0};return{placeholder:m.placeholder,shouldAnimatePlaceholder:!1,snapshot:E,useClone:w}}if(!c)return n;if(!h)return e;const b={isDraggingOver:d,draggingOverWith:g,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:m.placeholder,shouldAnimatePlaceholder:!0,snapshot:b,useClone:null}});return(a,c)=>{const d=mx(c),h=d.droppableId,m=d.type,p=!d.isDropDisabled,g=d.renderClone;if(ni(a)){const y=a.critical;if(!Ku(m,y))return n;const b=uv(y,a.dimensions),w=En(a.impact)===h;return s(h,p,w,w,b,g)}if(a.phase==="DROP_ANIMATING"){const y=a.completed;if(!Ku(m,y.critical))return n;const b=uv(y.critical,a.dimensions);return s(h,p,ax(y.result)===h,En(y.impact)===h,b,g)}if(a.phase==="IDLE"&&a.completed&&!a.shouldFlush){const y=a.completed;if(!Ku(m,y.critical))return n;const b=En(y.impact)===h,w=!!(y.impact.at&&y.impact.at.type==="COMBINE"),E=y.critical.droppable.id===h;return b?w?e:n:E?e:n}return n}},e5={updateViewportMaxScroll:fE},px=uy(Zj,e5,(e,n,r)=>({...mx(r),...e,...n}),{context:of,areStatePropsEqual:ix})(Xj),dn=e=>e.split(",").map(n=>n.trim()),nr=e=>e.join(", "),ka=e=>e.trim()?/^[a-gA-G](##|#|bb|b)?(\d+)?$/.test(e.trim()):!0,dv=e=>{if(!e.trim())return e;const n=e.trim();if(!ka(n))return n;const r=n.match(/^([a-gA-G])(##|#|bb|b)?(\d*)$/);if(r){const[,s,i="",a]=r;return s.toUpperCase()+i.toLowerCase()+a}return n},fv=e=>dn(e).map(r=>Cn(r)).filter(r=>r!==null),t5=(e,n)=>{const r=new Set(e),s=new Set(n);let i=0;for(const a of r)s.has(a)&&i++;return i},n5=({chords:e,onUpdateChord:n,onFetchOriginalChord:r,onChordClick:s})=>{const[i,a]=N.useState(null),[c,d]=N.useState(null),[h,m]=N.useState(""),[p,g]=N.useState(""),[y,b]=N.useState(""),w=Qe(),{key:E,mode:C}=w,j=async K=>{const J=K.name.replace(/\/[A-G](##|#|bb|b)?\d*/,"");console.log("Looking for base chord:",J);const re=await zr.getAllDistinctChords(E,C);if(re){const W=re.filter($=>$.chordName===J);if(W.length===0)console.log("No matches found in library for:",J);else{console.log(`Found ${W.length} chord(s) with name "${J}", comparing notes to find best match...`);const $=fv(K.originalNotes||K.notes);console.log("Current chord note numbers:",$,"from:",K.originalNotes||K.notes);let _=W[0],I=0;for(const L of W)if(L.chordNoteNames){const G=fv(L.chordNoteNames),ee=t5($,G);console.log(`  - Candidate notes: ${L.chordNoteNames} (note numbers: ${G}) - ${ee} shared notes`),ee>I&&(I=ee,_=L)}if(_?.chordNoteNames&&I>0)return console.log(` Best match selected (${I} shared notes):`,_.chordNoteNames),_.chordNoteNames;console.warn(` No good match found (max shared notes: ${I})`)}}if(K.originalKey&&K.originalMode&&r)try{console.log("Fetching base chord",J,"from API");const W=await r(J,K.originalKey,K.originalMode);if(W)return console.log("Fetched base chord from API:",W),W}catch(W){console.warn("Failed to fetch base chord from API:",W)}return console.warn("Could not find base chord definition for:",J),null},P=async()=>{if(m(""),b(""),!!c)try{const K=await j(c);if(K)if(dn(K).every($=>/^[A-Ga-g]/.test($.trim())&&ka($.trim()))){console.log("Reverting to base chord notes:",K),d({...c,notes:K});return}else console.warn("Base chord notes are in invalid format:",K);const J=dn(c.notes);if(J.length>1){const re=J[0],W=h.replace(/\d+/,"");if(re.replace(/\d+/,"")===W){const _=J.slice(1),I=nr(_);console.log("Removing slash note manually, result:",I),d({...c,notes:I});return}}console.warn("Could not revert slash note - no base chord found and no obvious slash note to remove")}catch(K){console.error("Error removing slash note:",K)}},A=K=>{if(!h.trim()||!p)return!1;const J=K.replace(/\d+/,""),re=h.trim().replace(/\d+/,"");return J===re?!dn(p).some(_=>_.replace(/\d+/,"")===re):!1},D=async(K,J)=>{a(K),d({...J});try{const W=await j(J);g(W||J.notes)}catch(W){console.warn("Failed to load original chord, using current notes:",W),g(J.originalNotes||J.notes)}const re=J.name.match(/\/([A-G](##|#|bb|b)?\d*)/);m(re?re[1]:"")},k=()=>{if(i!==null&&c&&n){if(y)return;let K=c.name.replace(/\/[A-G](##|#|bb|b)?\d*/,""),J=c.notes;if(h.trim()){K+=`/${h.trim()}`;const W=dn(J),$=h.trim();if(W.some(I=>{const L=I.replace(/\d+/,""),G=$.replace(/\d+/,"");return L===G})){const I=W.filter(G=>{const ee=G.replace(/\d+/,""),ue=$.replace(/\d+/,"");return ee!==ue}),L=[$,...I];J=nr(L)}else{const I=[$,...W];J=nr(I)}}const re={...c,name:K,notes:J,originalNotes:c.originalNotes||p};n(i,re)}R()},R=()=>{a(null),d(null),m(""),g(""),b("")},O=async K=>{if(!c||K===0)return;const J=dn(c.notes);K===1&&A(J[0])||([J[K],J[K-1]]=[J[K-1],J[K]],d({...c,notes:nr(J)}),await te(J))},M=async K=>{if(!c)return;const J=dn(c.notes);K!==J.length-1&&(K===0&&A(J[0])||([J[K],J[K+1]]=[J[K+1],J[K]],d({...c,notes:nr(J)}),await te(J)))},q=async K=>{if(c)try{const re=await j(c)||c.originalNotes||p;if(!re)return;const W=dn(c.notes);if(!K.trim()){const L=dn(re),G=W[0]?.replace(/\d+/,""),ee=L[0]?.replace(/\d+/,"");!L.some(fe=>fe.replace(/\d+/,"")===G)&&W.length>L.length&&d({...c,notes:nr(W.slice(1))});return}const $=K.trim(),_=W.some(L=>{const G=L.replace(/\d+/,""),ee=$.replace(/\d+/,"");return G===ee});let I;if(_){const L=W.filter(ee=>{const ue=ee.replace(/\d+/,""),fe=$.replace(/\d+/,"");return ue!==fe}),G=W.find(ee=>{const ue=ee.replace(/\d+/,""),fe=$.replace(/\d+/,"");return ue===fe});I=G?[G,...L]:[$,...L]}else I=[$,...W];d({...c,notes:nr(I)})}catch(J){console.warn("Failed to update chord with slash note:",J);const re=dn(c.notes);if(!K.trim())return;const W=K.trim(),$=[W,...re.filter(_=>{const I=_.replace(/\d+/,""),L=W.replace(/\d+/,"");return I!==L})];d({...c,notes:nr($)})}},te=async K=>{if(!(!c||K.length===0))try{const re=await j(c)||c.originalNotes||p;if(!re)return;const W=dn(re),$=K[0],_=W[0];m($!==_?$:"")}catch(J){console.warn("Failed to detect slash note from order:",J);const re=c.originalNotes||p;if(!re)return;const W=dn(re),$=K[0],_=W[0];m($!==_?$:"")}};return{editingChordIndex:i,editingChord:c,slashNote:h,originalChordNotes:p,slashNoteError:y,handleEditChord:D,handleSaveEdit:k,handleCancelEdit:R,moveNoteUp:O,moveNoteDown:M,removeSlashNote:P,handleSlashNoteChange:async K=>{const J=K.trim();if(!J){b(""),m(""),await q("");return}if(!ka(J)){b("Invalid note. Use A-G with optional # or b (e.g., C, F#, Bb, D4)"),m(K);return}b("");const re=dv(J);m(re),await q(re)},handleDragEnd:async K=>{if(!K.destination||!c||K.source.index===K.destination.index)return;const J=dn(c.notes);if(K.source.index===0&&A(J[0])||K.destination.index===0&&A(J[0]))return;const[re]=J.splice(K.source.index,1);J.splice(K.destination.index,0,re),d({...c,notes:nr(J)}),await te(J)},handlePreviewChord:()=>{c&&s(c.notes,-1)},isSlashNote:K=>{if(!h.trim())return!1;const J=K.replace(/\d+/,""),re=h.trim().replace(/\d+/,"");return J===re},isManualSlashNote:A,parseNotes:dn,notesToString:nr,formatNoteName:dv,isValidNoteName:ka}},r5=4,o5=8,s5=({activeMidiNotes:e})=>{const n=ve.useRef(null),[r,s]=ve.useState(400),i=ve.useMemo(()=>r<400?Math.max(300,r-20):r<768?Math.min(500,r-40):Math.min(600,r-60),[r]);ve.useEffect(()=>{const m=()=>{n.current&&s(n.current.offsetWidth)};m();const p=new ResizeObserver(()=>{m()});return n.current&&p.observe(n.current),()=>{p.disconnect()}},[]),ve.useEffect(()=>{const m=document.createElement("style");return m.textContent=`
            /* Disable all pointer events on piano keys to prevent hover/click interference */
            .ReactPiano__Key {
                pointer-events: none !important;
            }
            
            /* specific CSS to override react-piano styles */
            div[class*="ReactPiano"] .ReactPiano__Key--active,
            div[class*="ReactPiano"] .ReactPiano__Key--active.ReactPiano__Key--natural,
            div[class*="ReactPiano"] .ReactPiano__Key--active.ReactPiano__Key--accidental,
            .ReactPiano__Key--active[class*="ReactPiano__Key"],
            .ReactPiano__Key--active[class*="ReactPiano__Key"]:hover,
            .ReactPiano__Key--active[class*="ReactPiano__Key"]:active,
            .ReactPiano__Key--active[class*="ReactPiano__Key"]:focus {
                background: var(--mcb-accent-primary) !important;
                background-color: var(--mcb-accent-primary) !important;
                background-image: none !important;
                color: white !important;
                border-color: var(--mcb-accent-secondary) !important;
                border-top-color: var(--mcb-accent-secondary) !important;
                border-left-color: var(--mcb-accent-secondary) !important;
                border-right-color: var(--mcb-accent-secondary) !important;
                border-bottom-color: var(--mcb-accent-secondary) !important;
                box-shadow: none !important;
                transition: none !important;
            }
            
            /* Force natural (white) keys to stay themed */
            div[class*="ReactPiano"] .ReactPiano__Key--active.ReactPiano__Key--natural,
            .ReactPiano__Key--active.ReactPiano__Key--natural[class*="ReactPiano__Key"],
            .ReactPiano__Key--active.ReactPiano__Key--natural[class*="ReactPiano__Key"]:hover,
            .ReactPiano__Key--active.ReactPiano__Key--natural[class*="ReactPiano__Key"]:active,
            .ReactPiano__Key--active.ReactPiano__Key--natural[class*="ReactPiano__Key"]:focus {
                background: linear-gradient(to bottom, var(--mcb-accent-primary) 0%, var(--mcb-accent-secondary) 100%) !important;
css             background-color: var(--mcb-accent-primary) !important;
                color: white !important;
                border-top: 1px solid var(--mcb-accent-secondary) !important;
                border-left: 1px solid var(--mcb-accent-secondary) !important;
                border-right: 1px solid var(--mcb-accent-secondary) !important;
                border-bottom: 1px solid var(--mcb-accent-subtle) !important;
                box-shadow: 
                    /* Uses --mcb-accent-secondary with 30% alpha (4D) */
                    inset 0 0 0 1px var(--mcb-accent-secondary)4D,
                    inset 0 -3px 6px rgba(0,0,0,0.1) !important;
            }
            
            /* Force accidental (black) keys to stay themed */
            div[class*="ReactPiano"] .ReactPiano__Key--active.ReactPiano__Key--accidental,
            .ReactPiano__Key--active.ReactPiano__Key--accidental[class*="ReactPiano__Key"],
            .ReactPiano__Key--active.ReactPiano__Key--accidental[class*="ReactPiano__Key"]:hover,
            .ReactPiano__Key--active.ReactPiano__Key--accidental[class*="ReactPiano__Key"]:active,
            .ReactPiano__Key--active.ReactPiano__Key--accidental[class*="ReactPiano__Key"]:focus {
                background: linear-gradient(to bottom, var(--mcb-accent-tertiary) 0%, var(--mcb-accent-subtle) 100%) !important;
                background-color: var(--mcb-accent-tertiary) !important;
            s   color: white !important;
                border: 1px solid var(--mcb-accent-subtle) !important;
                box-shadow: 
                    /* Uses --mcb-accent-subtle with 40% alpha (66) */
                    inset 0 0 0 1px var(--mcb-accent-subtle)66,
                	inset 0 -2px 4px rgba(0,0,0,0.2) !important;
            }
            
            /* Override any CSS animations or transitions */
            .ReactPiano__Key--active * {
                transition: none !important;
            	animation: none !important;
            }
            
            /* Nuclear option - override any inline styles that might be applied */
            .ReactPiano__Key--active[style] {
                background: var(--mcb-accent-primary) !important;
                background-color: var(--mcb-accent-primary) !important;
            }
            
            .ReactPiano__Key--active.ReactPiano__Key--natural[style] {
CSS             background: linear-gradient(to bottom, var(--mcb-accent-primary) 0%, var(--mcb-accent-secondary) 100%) !important;
            }
            
            .ReactPiano__Key--active.ReactPiano__Key--accidental[style] {
                background: linear-gradient(to bottom, var(--mcb-accent-tertiary) 0%, var(--mcb-accent-subtle) 100%) !important;
            }
        `,document.head.appendChild(m),()=>{document.head.removeChild(m)}},[]);const a=4,c=7,d=mn.fromNote(`c${a}`),h=mn.fromNote(`c${c}`);return u.jsx("div",{ref:n,className:"w-full",children:u.jsx(Md,{noteRange:{first:d,last:h},playNote:()=>{},stopNote:()=>{},disabled:!1,width:i,activeNotes:e,className:"mx-auto"})})},i5=({editingChordIndex:e,editingChord:n,totalChords:r,chords:s,onUpdateChord:i,onFetchOriginalChord:a,onChordClick:c,onClose:d,onNavigateToChord:h})=>{const{editingChord:m,slashNote:p,slashNoteError:g,handleEditChord:y,handleSaveEdit:b,handleCancelEdit:w,moveNoteUp:E,moveNoteDown:C,removeSlashNote:j,handleSlashNoteChange:P,handleDragEnd:A,handlePreviewChord:D,isSlashNote:k,isManualSlashNote:R,parseNotes:O}=n5({chords:s,onUpdateChord:i,onFetchOriginalChord:a,onChordClick:c});ve.useEffect(()=>{y(e,n)},[e,n]);const M=()=>{b(),d()},q=()=>{w(),d()},te=()=>{e>0&&h&&h(e-1)},oe=()=>{e<r-1&&h&&h(e+1)},Z=ve.useMemo(()=>{if(!m?.notes)return[];try{return Ws(r5,o5,m.notes).map(({note:re,octave:W})=>{try{return mn.fromNote(`${re}${W}`)}catch($){return console.warn(`Failed to parse note: ${re}${W}`,$),null}}).filter(Boolean)}catch(J){return console.warn("Failed to parse chord notes:",J),[]}},[m?.notes]);if(!m)return null;const Q=O(m.notes),se=e>0,K=e<r-1;return u.jsxs("div",{className:"fixed inset-0 bg-mcb-input bg-opacity-95 backdrop-blur-sm z-50 flex flex-col",children:[u.jsxs("div",{className:"flex-shrink-0 max-w-4xl mx-auto px-4 py-4 w-full",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsxs("div",{className:"flex items-center space-x-2 flex-1 min-w-0",children:[u.jsxs("h2",{className:"text-lg sm:text-xl font-bold text-white truncate",children:["Edit: ",m.name.replace(/\/[A-G](##|#|bb|b)?\d*/,"")]}),u.jsxs("span",{className:"px-2 py-1 text-xs bg-[var(--mcb-text-subtle)] text-mcb-secondary rounded font-mono flex-shrink-0",children:[e+1," / ",r]})]}),u.jsxs("div",{className:"flex items-center space-x-2 flex-shrink-0",children:[u.jsxs(zt,{onClick:M,variant:"primary",size:"sm",disabled:!!g,className:ct("bg-[var(--mcb-success-primary)] hover:bg-[var(--mcb-success-secondary)]",g&&"opacity-50 cursor-not-allowed"),title:g?"Fix slash note error before saving":"Save changes",children:[u.jsx(jN,{className:"w-4 h-4 sm:mr-1"}),u.jsx("span",{className:"hidden sm:inline",children:"Save"})]}),u.jsxs(zt,{onClick:q,variant:"secondary",size:"sm",children:[u.jsx("span",{className:"hidden sm:inline",children:"Cancel"}),u.jsx("span",{className:"sm:hidden",children:""})]})]})]}),u.jsx("div",{className:"flex items-center",children:h&&u.jsxs("div",{className:"flex items-center space-x-1",children:[u.jsx(zt,{onClick:te,variant:"secondary",size:"sm",disabled:!se,title:"Previous chord",className:"px-2",children:u.jsx(IN,{className:"w-4 h-4"})}),u.jsx(zt,{onClick:oe,variant:"secondary",size:"sm",disabled:!K,title:"Next chord",className:"px-2",children:u.jsx(Fv,{className:"w-4 h-4"})})]})}),u.jsxs("div",{className:"p-3 bg-mcb-primary rounded-lg border border-mcb-primary mb-4 mt-4",children:[u.jsx("label",{className:"block text-sm font-medium text-mcb-secondary mb-2",children:"Slash Note (Bass Note)"}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("input",{type:"text",value:p,onChange:J=>P(J.target.value),onBlur:J=>P(J.target.value),onKeyDown:J=>{J.key==="Enter"&&P(J.currentTarget.value)},placeholder:"e.g., C4, F#, Bb3",className:ct("flex-1 px-3 py-2 bg-mcb-input border rounded text-white placeholder-gray-400 focus:outline-none transition-colors text-sm",g?"border-[var(--mcb-danger-border)] focus:border-red-400":"border-mcb-primary focus:border-[var(--mcb-accent-primary)]")}),p.trim()&&!g&&u.jsx("button",{onClick:j,className:"p-2 text-[var(--mcb-danger-text)] hover:text-red-300 hover:bg-red-500/10 rounded transition-colors",title:"Remove slash note",children:u.jsx(cd,{className:"w-4 h-4"})})]}),g?u.jsxs("p",{className:"text-xs text-[var(--mcb-danger-text)] mt-1 flex items-center space-x-1",children:[u.jsx(cd,{className:"w-3 h-3 flex-shrink-0"}),u.jsx("span",{children:g})]}):u.jsx("p",{className:"text-xs text-[var(--mcb-text-tertiary)] mt-1",children:"Add bass note (e.g., Cmaj7/E)"}),Q.length>0&&R(Q[0])&&!g&&u.jsx("div",{className:"mt-2 p-2 bg-[var(--mcb-warning-primary)] border border-[var(--mcb-warning-border)] rounded text-xs text-[var(--mcb-warning-text)]",children:u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx(kp,{className:"w-3 h-3"}),u.jsx("span",{children:"Slash note locked in first position"})]})})]}),u.jsx("div",{className:"bg-mcb-primary rounded-lg border border-mcb-primary p-3 mb-4",children:u.jsx("div",{className:"bg-mcb-input rounded p-2 flex justify-center overflow-x-auto",children:u.jsx(s5,{activeMidiNotes:Z})})})]}),u.jsx("div",{className:"flex-1 max-w-4xl mx-auto px-4 w-full overflow-hidden flex flex-col -mt-4",children:u.jsxs("div",{className:"bg-mcb-primary rounded-lg border border-mcb-primary p-4 flex-1 flex flex-col min-h-0",children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsxs(zt,{onClick:D,variant:"secondary",size:"sm",className:"bg-[var(--mcb-accent-secondary)] hover:bg-[var(--mcb-accent-tertiary)] text-white",title:"Preview chord",children:[u.jsx(Ra,{className:"w-4 h-4 sm:mr-1"}),u.jsx("span",{className:"hidden sm:inline",children:"Preview"})]}),u.jsxs("div",{className:"flex-1 text-center mx-4",children:[u.jsx("h3",{className:"text-lg font-medium text-white leading-tight",children:"Chord Notes"}),u.jsx("p",{className:"text-xs text-[var(--mcb-text-tertiary)] leading-tight",children:"Drag to reorder"})]}),u.jsx("div",{className:"w-16 sm:w-20"})," "]}),u.jsx("div",{className:"flex-1 min-h-0",children:u.jsx(sx,{onDragEnd:A,children:u.jsx(px,{droppableId:"notes-list",children:(J,re)=>u.jsxs("div",{...J.droppableProps,ref:J.innerRef,className:ct("space-y-3 transition-colors duration-200 overflow-y-auto h-full",{"bg-[var(--mcb-accent-primary)]/5 rounded-lg p-2":re.isDraggingOver}),children:[Q.map((W,$)=>{const _=k(W),L=R(W)&&$===0;return u.jsx(ux,{draggableId:`${W}-${$}`,index:$,isDragDisabled:L,children:(G,ee)=>u.jsxs("div",{ref:G.innerRef,...G.draggableProps,...G.dragHandleProps,className:ct("flex items-center space-x-3 p-3 rounded border transition-all duration-200",{"shadow-lg shadow-[var(--mcb-accent-primary)]/20 border-[var(--mcb-accent-primary)] transform scale-105":ee.isDragging,"cursor-grab":!ee.isDragging&&!L,"cursor-grabbing":ee.isDragging,"cursor-not-allowed":L,"bg-[var(--mcb-warning-primary)] border-amber-500/50":_&&!ee.isDragging,"hover:border-amber-400/70":_&&!ee.isDragging,"bg-amber-600/15 border-amber-600/60":L&&!ee.isDragging,"bg-mcb-input border-mcb-primary":!_&&!L&&!ee.isDragging,"hover:border-mcb-secondary":!_&&!L&&!ee.isDragging}),style:G.draggableProps.style,children:[u.jsxs("div",{className:"flex-1 text-left",children:[u.jsxs("div",{className:"flex items-center justify-between mb-1",children:[u.jsx("span",{className:"text-white font-mono text-lg font-semibold",children:W}),u.jsxs("div",{className:"flex items-center space-x-2",children:[_&&u.jsx("span",{className:"px-2 py-1 text-xs bg-amber-500/20 text-[var(--mcb-warning-text)] rounded border border-[var(--mcb-warning-border)] font-medium",children:"SLASH"}),L&&u.jsxs("span",{className:"px-2 py-1 text-xs bg-amber-600/20 text-[var(--mcb-warning-text-alt)] rounded border border-amber-600/30 font-medium flex items-center space-x-1",children:[u.jsx(kp,{className:"w-3 h-3"}),u.jsx("span",{children:"LOCKED"})]})]})]}),u.jsxs("div",{className:"text-xs text-mcb-tertiary font-medium",children:["Note ",$+1]})]}),u.jsxs("div",{className:"flex items-center space-x-1",children:[u.jsx("span",{className:"text-xs text-mcb-tertiary mr-2",children:"Order:"}),u.jsx("button",{onClick:ue=>{ue.stopPropagation(),E($)},disabled:$===0||L||$===1&&R(Q[0]),className:"p-1 text-mcb-secondary hover:text-white hover:bg-mcb-hover rounded transition-colors disabled:opacity-30 disabled:cursor-not-allowed",title:L?"Cannot move locked slash note":$===1&&R(Q[0])?"Cannot move past locked slash note":"Move up",children:u.jsx(qs,{className:"w-4 h-4"})}),u.jsx("button",{onClick:ue=>{ue.stopPropagation(),C($)},disabled:$===Q.length-1||L,className:"p-1 text-mcb-secondary hover:text-white hover:bg-mcb-hover rounded transition-colors disabled:opacity-30 disabled:cursor-not-allowed",title:L?"Cannot move locked slash note":"Move down",children:u.jsx(ho,{className:"w-4 h-4"})})]})]})},`${W}-${$}`)}),J.placeholder]})})})})]})}),u.jsx("div",{className:"flex-shrink-0 h-4"})]})},a5=4,l5=7,c5=({musicStore:e,playbackStore:n,patternStore:r,uiStore:s,setEditingChordIndex:i})=>{const[a,c]=N.useState(!1),[d,h]=N.useState(!1),m=N.useRef(null);N.useEffect(()=>{const A=()=>{const D=window.innerHeight,k=parseFloat(getComputedStyle(document.documentElement).fontSize);h(D<35*k)};return A(),window.addEventListener("resize",A,{passive:!0}),window.addEventListener("orientationchange",A,{passive:!0}),()=>{window.removeEventListener("resize",A),window.removeEventListener("orientationchange",A)}},[]),N.useEffect(()=>{const{isLiveMode:A}=s;if(A){const D=document.body.style.overflow,k=document.body.style.overscrollBehavior,R=document.body.style.touchAction;document.body.style.overflow="hidden",document.body.style.overscrollBehavior="none",document.body.style.touchAction="none";const O=()=>{setTimeout(()=>{if(m.current&&A&&!a){const M=m.current;M.style.overflowY="hidden",M.style.touchAction="pan-y",M.offsetHeight,M.style.overflowY="auto",M.style.WebkitOverflowScrolling="touch"}},300)};return window.addEventListener("orientationchange",O),()=>{document.body.style.overflow=D,document.body.style.overscrollBehavior=k,document.body.style.touchAction=R,window.removeEventListener("orientationchange",O)}}},[s.isLiveMode,a]),N.useEffect(()=>{const A=()=>/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||"ontouchstart"in window||navigator.maxTouchPoints>0;if(m.current&&s.isLiveMode){const D=m.current;a?A()?(D.style.touchAction="pan-y",D.style.overflowY="auto",D.style.WebkitOverflowScrolling="auto"):(D.style.removeProperty("touchAction"),D.style.overflowY="auto",D.style.WebkitOverflowScrolling="touch"):(D.style.overflowY="auto",D.style.touchAction="pan-y",D.style.WebkitOverflowScrolling="touch")}},[a,s.isLiveMode]);const p=N.useCallback((A,D,k)=>{if(s.isDeleteMode&&D!==void 0){n.removeChord(D);return}const R=Ws(a5,l5,A);D!==void 0?(n.setTemporaryChord(null),n.setActiveChordIndex(D),r.globalPatternState.isPlaying||n.playNotes(R),n.setHighlightedChordIndex(D),setTimeout(()=>n.setHighlightedChordIndex(null),150)):(k&&n.setTemporaryChord({name:k,notes:A}),r.globalPatternState.isPlaying||n.playNotes(R))},[s.isDeleteMode,r.globalPatternState.isPlaying,n]),g=N.useCallback(()=>{n.clearAllChords(),r.setGlobalPatternState({isPlaying:!1}),s.setIsLiveMode(!1)},[n,r,s]),y=N.useCallback(()=>{r.setGlobalPatternState({isPlaying:!r.globalPatternState.isPlaying})},[r]),b=N.useCallback(()=>{s.setIsDeleteMode(!s.isDeleteMode)},[s]),w=N.useCallback(()=>{s.setIsLiveMode(!s.isLiveMode)},[s]),E=N.useCallback((A,D)=>{const k={name:D.name,notes:D.notes,pattern:D.pattern||["1","2","3","4"],originalKey:D.originalKey||e.key,originalMode:D.originalMode||e.mode,originalNotes:D.originalNotes||D.notes};n.updateChord(A,k)},[e,n]),C=N.useCallback(A=>{i(A)},[i]),j=N.useCallback(()=>{i(null)},[i]),P=N.useCallback(A=>{A>=0&&A<n.addedChords.length&&i(A)},[n.addedChords.length,i]);return{isEditMode:a,setIsEditMode:c,isCompactHeight:d,scrollContainerRef:m,handleChordClick:p,handleUpdateChord:E,handleEditChord:C,handleCloseEditor:j,handleNavigateToChord:P,handleClearAll:g,handleTogglePlayback:y,handleToggleDeleteMode:b,handleToggleLiveMode:w}};function u5(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return N.useMemo(()=>s=>{n.forEach(i=>i(s))},n)}const il=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Ho(e){const n=Object.prototype.toString.call(e);return n==="[object Window]"||n==="[object global]"}function cf(e){return"nodeType"in e}function pn(e){var n,r;return e?Ho(e)?e:cf(e)&&(n=(r=e.ownerDocument)==null?void 0:r.defaultView)!=null?n:window:window}function uf(e){const{Document:n}=pn(e);return e instanceof n}function di(e){return Ho(e)?!1:e instanceof pn(e).HTMLElement}function gx(e){return e instanceof pn(e).SVGElement}function qo(e){return e?Ho(e)?e.document:cf(e)?uf(e)?e:di(e)||gx(e)?e.ownerDocument:document:document:document}const lr=il?N.useLayoutEffect:N.useEffect;function df(e){const n=N.useRef(e);return lr(()=>{n.current=e}),N.useCallback(function(){for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return n.current==null?void 0:n.current(...s)},[])}function d5(){const e=N.useRef(null),n=N.useCallback((s,i)=>{e.current=setInterval(s,i)},[]),r=N.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[n,r]}function ri(e,n){n===void 0&&(n=[e]);const r=N.useRef(e);return lr(()=>{r.current!==e&&(r.current=e)},n),r}function fi(e,n){const r=N.useRef();return N.useMemo(()=>{const s=e(r.current);return r.current=s,s},[...n])}function Va(e){const n=df(e),r=N.useRef(null),s=N.useCallback(i=>{i!==r.current&&n?.(i,r.current),r.current=i},[]);return[r,s]}function wd(e){const n=N.useRef();return N.useEffect(()=>{n.current=e},[e]),n.current}let Yu={};function hi(e,n){return N.useMemo(()=>{if(n)return n;const r=Yu[e]==null?0:Yu[e]+1;return Yu[e]=r,e+"-"+r},[e,n])}function vx(e){return function(n){for(var r=arguments.length,s=new Array(r>1?r-1:0),i=1;i<r;i++)s[i-1]=arguments[i];return s.reduce((a,c)=>{const d=Object.entries(c);for(const[h,m]of d){const p=a[h];p!=null&&(a[h]=p+e*m)}return a},{...n})}}const Lo=vx(1),oi=vx(-1);function f5(e){return"clientX"in e&&"clientY"in e}function ff(e){if(!e)return!1;const{KeyboardEvent:n}=pn(e.target);return n&&e instanceof n}function h5(e){if(!e)return!1;const{TouchEvent:n}=pn(e.target);return n&&e instanceof n}function Cd(e){if(h5(e)){if(e.touches&&e.touches.length){const{clientX:n,clientY:r}=e.touches[0];return{x:n,y:r}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:n,clientY:r}=e.changedTouches[0];return{x:n,y:r}}}return f5(e)?{x:e.clientX,y:e.clientY}:null}const si=Object.freeze({Translate:{toString(e){if(!e)return;const{x:n,y:r}=e;return"translate3d("+(n?Math.round(n):0)+"px, "+(r?Math.round(r):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:n,scaleY:r}=e;return"scaleX("+n+") scaleY("+r+")"}},Transform:{toString(e){if(e)return[si.Translate.toString(e),si.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:n,duration:r,easing:s}=e;return n+" "+r+"ms "+s}}}),hv="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function m5(e){return e.matches(hv)?e:e.querySelector(hv)}const p5={display:"none"};function g5(e){let{id:n,value:r}=e;return ve.createElement("div",{id:n,style:p5},r)}function v5(e){let{id:n,announcement:r,ariaLiveType:s="assertive"}=e;const i={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return ve.createElement("div",{id:n,style:i,role:"status","aria-live":s,"aria-atomic":!0},r)}function y5(){const[e,n]=N.useState("");return{announce:N.useCallback(s=>{s!=null&&n(s)},[]),announcement:e}}const yx=N.createContext(null);function x5(e){const n=N.useContext(yx);N.useEffect(()=>{if(!n)throw new Error("useDndMonitor must be used within a children of <DndContext>");return n(e)},[e,n])}function b5(){const[e]=N.useState(()=>new Set),n=N.useCallback(s=>(e.add(s),()=>e.delete(s)),[e]);return[N.useCallback(s=>{let{type:i,event:a}=s;e.forEach(c=>{var d;return(d=c[i])==null?void 0:d.call(c,a)})},[e]),n]}const N5={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},w5={onDragStart(e){let{active:n}=e;return"Picked up draggable item "+n.id+"."},onDragOver(e){let{active:n,over:r}=e;return r?"Draggable item "+n.id+" was moved over droppable area "+r.id+".":"Draggable item "+n.id+" is no longer over a droppable area."},onDragEnd(e){let{active:n,over:r}=e;return r?"Draggable item "+n.id+" was dropped over droppable area "+r.id:"Draggable item "+n.id+" was dropped."},onDragCancel(e){let{active:n}=e;return"Dragging was cancelled. Draggable item "+n.id+" was dropped."}};function C5(e){let{announcements:n=w5,container:r,hiddenTextDescribedById:s,screenReaderInstructions:i=N5}=e;const{announce:a,announcement:c}=y5(),d=hi("DndLiveRegion"),[h,m]=N.useState(!1);if(N.useEffect(()=>{m(!0)},[]),x5(N.useMemo(()=>({onDragStart(g){let{active:y}=g;a(n.onDragStart({active:y}))},onDragMove(g){let{active:y,over:b}=g;n.onDragMove&&a(n.onDragMove({active:y,over:b}))},onDragOver(g){let{active:y,over:b}=g;a(n.onDragOver({active:y,over:b}))},onDragEnd(g){let{active:y,over:b}=g;a(n.onDragEnd({active:y,over:b}))},onDragCancel(g){let{active:y,over:b}=g;a(n.onDragCancel({active:y,over:b}))}}),[a,n])),!h)return null;const p=ve.createElement(ve.Fragment,null,ve.createElement(g5,{id:s,value:i.draggable}),ve.createElement(v5,{id:d,announcement:c}));return r?xr.createPortal(p,r):p}var wt;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(wt||(wt={}));function za(){}function Qu(e,n){return N.useMemo(()=>({sensor:e,options:n??{}}),[e,n])}function S5(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return N.useMemo(()=>[...n].filter(s=>s!=null),[...n])}const Yn=Object.freeze({x:0,y:0});function xx(e,n){return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}function bx(e,n){let{data:{value:r}}=e,{data:{value:s}}=n;return r-s}function E5(e,n){let{data:{value:r}}=e,{data:{value:s}}=n;return s-r}function mv(e){let{left:n,top:r,height:s,width:i}=e;return[{x:n,y:r},{x:n+i,y:r},{x:n,y:r+s},{x:n+i,y:r+s}]}function Nx(e,n){if(!e||e.length===0)return null;const[r]=e;return r[n]}function pv(e,n,r){return n===void 0&&(n=e.left),r===void 0&&(r=e.top),{x:n+e.width*.5,y:r+e.height*.5}}const D5=e=>{let{collisionRect:n,droppableRects:r,droppableContainers:s}=e;const i=pv(n,n.left,n.top),a=[];for(const c of s){const{id:d}=c,h=r.get(d);if(h){const m=xx(pv(h),i);a.push({id:d,data:{droppableContainer:c,value:m}})}}return a.sort(bx)},j5=e=>{let{collisionRect:n,droppableRects:r,droppableContainers:s}=e;const i=mv(n),a=[];for(const c of s){const{id:d}=c,h=r.get(d);if(h){const m=mv(h),p=i.reduce((y,b,w)=>y+xx(m[w],b),0),g=Number((p/4).toFixed(4));a.push({id:d,data:{droppableContainer:c,value:g}})}}return a.sort(bx)};function A5(e,n){const r=Math.max(n.top,e.top),s=Math.max(n.left,e.left),i=Math.min(n.left+n.width,e.left+e.width),a=Math.min(n.top+n.height,e.top+e.height),c=i-s,d=a-r;if(s<i&&r<a){const h=n.width*n.height,m=e.width*e.height,p=c*d,g=p/(h+m-p);return Number(g.toFixed(4))}return 0}const k5=e=>{let{collisionRect:n,droppableRects:r,droppableContainers:s}=e;const i=[];for(const a of s){const{id:c}=a,d=r.get(c);if(d){const h=A5(d,n);h>0&&i.push({id:c,data:{droppableContainer:a,value:h}})}}return i.sort(E5)};function I5(e,n,r){return{...e,scaleX:n&&r?n.width/r.width:1,scaleY:n&&r?n.height/r.height:1}}function wx(e,n){return e&&n?{x:e.left-n.left,y:e.top-n.top}:Yn}function P5(e){return function(r){for(var s=arguments.length,i=new Array(s>1?s-1:0),a=1;a<s;a++)i[a-1]=arguments[a];return i.reduce((c,d)=>({...c,top:c.top+e*d.y,bottom:c.bottom+e*d.y,left:c.left+e*d.x,right:c.right+e*d.x}),{...r})}}const T5=P5(1);function R5(e){if(e.startsWith("matrix3d(")){const n=e.slice(9,-1).split(/, /);return{x:+n[12],y:+n[13],scaleX:+n[0],scaleY:+n[5]}}else if(e.startsWith("matrix(")){const n=e.slice(7,-1).split(/, /);return{x:+n[4],y:+n[5],scaleX:+n[0],scaleY:+n[3]}}return null}function M5(e,n,r){const s=R5(n);if(!s)return e;const{scaleX:i,scaleY:a,x:c,y:d}=s,h=e.left-c-(1-i)*parseFloat(r),m=e.top-d-(1-a)*parseFloat(r.slice(r.indexOf(" ")+1)),p=i?e.width/i:e.width,g=a?e.height/a:e.height;return{width:p,height:g,top:m,right:h+p,bottom:m+g,left:h}}const O5={ignoreTransform:!1};function Ko(e,n){n===void 0&&(n=O5);let r=e.getBoundingClientRect();if(n.ignoreTransform){const{transform:m,transformOrigin:p}=pn(e).getComputedStyle(e);m&&(r=M5(r,m,p))}const{top:s,left:i,width:a,height:c,bottom:d,right:h}=r;return{top:s,left:i,width:a,height:c,bottom:d,right:h}}function gv(e){return Ko(e,{ignoreTransform:!0})}function _5(e){const n=e.innerWidth,r=e.innerHeight;return{top:0,left:0,right:n,bottom:r,width:n,height:r}}function L5(e,n){return n===void 0&&(n=pn(e).getComputedStyle(e)),n.position==="fixed"}function F5(e,n){n===void 0&&(n=pn(e).getComputedStyle(e));const r=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(i=>{const a=n[i];return typeof a=="string"?r.test(a):!1})}function al(e,n){const r=[];function s(i){if(n!=null&&r.length>=n||!i)return r;if(uf(i)&&i.scrollingElement!=null&&!r.includes(i.scrollingElement))return r.push(i.scrollingElement),r;if(!di(i)||gx(i)||r.includes(i))return r;const a=pn(e).getComputedStyle(i);return i!==e&&F5(i,a)&&r.push(i),L5(i,a)?r:s(i.parentNode)}return e?s(e):r}function Cx(e){const[n]=al(e,1);return n??null}function Xu(e){return!il||!e?null:Ho(e)?e:cf(e)?uf(e)||e===qo(e).scrollingElement?window:di(e)?e:null:null}function Sx(e){return Ho(e)?e.scrollX:e.scrollLeft}function Ex(e){return Ho(e)?e.scrollY:e.scrollTop}function Sd(e){return{x:Sx(e),y:Ex(e)}}var kt;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(kt||(kt={}));function Dx(e){return!il||!e?!1:e===document.scrollingElement}function jx(e){const n={x:0,y:0},r=Dx(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},s={x:e.scrollWidth-r.width,y:e.scrollHeight-r.height},i=e.scrollTop<=n.y,a=e.scrollLeft<=n.x,c=e.scrollTop>=s.y,d=e.scrollLeft>=s.x;return{isTop:i,isLeft:a,isBottom:c,isRight:d,maxScroll:s,minScroll:n}}const B5={x:.2,y:.2};function $5(e,n,r,s,i){let{top:a,left:c,right:d,bottom:h}=r;s===void 0&&(s=10),i===void 0&&(i=B5);const{isTop:m,isBottom:p,isLeft:g,isRight:y}=jx(e),b={x:0,y:0},w={x:0,y:0},E={height:n.height*i.y,width:n.width*i.x};return!m&&a<=n.top+E.height?(b.y=kt.Backward,w.y=s*Math.abs((n.top+E.height-a)/E.height)):!p&&h>=n.bottom-E.height&&(b.y=kt.Forward,w.y=s*Math.abs((n.bottom-E.height-h)/E.height)),!y&&d>=n.right-E.width?(b.x=kt.Forward,w.x=s*Math.abs((n.right-E.width-d)/E.width)):!g&&c<=n.left+E.width&&(b.x=kt.Backward,w.x=s*Math.abs((n.left+E.width-c)/E.width)),{direction:b,speed:w}}function G5(e){if(e===document.scrollingElement){const{innerWidth:a,innerHeight:c}=window;return{top:0,left:0,right:a,bottom:c,width:a,height:c}}const{top:n,left:r,right:s,bottom:i}=e.getBoundingClientRect();return{top:n,left:r,right:s,bottom:i,width:e.clientWidth,height:e.clientHeight}}function Ax(e){return e.reduce((n,r)=>Lo(n,Sd(r)),Yn)}function U5(e){return e.reduce((n,r)=>n+Sx(r),0)}function V5(e){return e.reduce((n,r)=>n+Ex(r),0)}function z5(e,n){if(n===void 0&&(n=Ko),!e)return;const{top:r,left:s,bottom:i,right:a}=n(e);Cx(e)&&(i<=0||a<=0||r>=window.innerHeight||s>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const W5=[["x",["left","right"],U5],["y",["top","bottom"],V5]];class hf{constructor(n,r){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const s=al(r),i=Ax(s);this.rect={...n},this.width=n.width,this.height=n.height;for(const[a,c,d]of W5)for(const h of c)Object.defineProperty(this,h,{get:()=>{const m=d(s),p=i[a]-m;return this.rect[h]+p},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Us{constructor(n){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(r=>{var s;return(s=this.target)==null?void 0:s.removeEventListener(...r)})},this.target=n}add(n,r,s){var i;(i=this.target)==null||i.addEventListener(n,r,s),this.listeners.push([n,r,s])}}function H5(e){const{EventTarget:n}=pn(e);return e instanceof n?e:qo(e)}function Ju(e,n){const r=Math.abs(e.x),s=Math.abs(e.y);return typeof n=="number"?Math.sqrt(r**2+s**2)>n:"x"in n&&"y"in n?r>n.x&&s>n.y:"x"in n?r>n.x:"y"in n?s>n.y:!1}var Fn;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(Fn||(Fn={}));function vv(e){e.preventDefault()}function q5(e){e.stopPropagation()}var _e;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(_e||(_e={}));const kx={start:[_e.Space,_e.Enter],cancel:[_e.Esc],end:[_e.Space,_e.Enter,_e.Tab]},K5=(e,n)=>{let{currentCoordinates:r}=n;switch(e.code){case _e.Right:return{...r,x:r.x+25};case _e.Left:return{...r,x:r.x-25};case _e.Down:return{...r,y:r.y+25};case _e.Up:return{...r,y:r.y-25}}};class mf{constructor(n){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=n;const{event:{target:r}}=n;this.props=n,this.listeners=new Us(qo(r)),this.windowListeners=new Us(pn(r)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Fn.Resize,this.handleCancel),this.windowListeners.add(Fn.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Fn.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:n,onStart:r}=this.props,s=n.node.current;s&&z5(s),r(Yn)}handleKeyDown(n){if(ff(n)){const{active:r,context:s,options:i}=this.props,{keyboardCodes:a=kx,coordinateGetter:c=K5,scrollBehavior:d="smooth"}=i,{code:h}=n;if(a.end.includes(h)){this.handleEnd(n);return}if(a.cancel.includes(h)){this.handleCancel(n);return}const{collisionRect:m}=s.current,p=m?{x:m.left,y:m.top}:Yn;this.referenceCoordinates||(this.referenceCoordinates=p);const g=c(n,{active:r,context:s.current,currentCoordinates:p});if(g){const y=oi(g,p),b={x:0,y:0},{scrollableAncestors:w}=s.current;for(const E of w){const C=n.code,{isTop:j,isRight:P,isLeft:A,isBottom:D,maxScroll:k,minScroll:R}=jx(E),O=G5(E),M={x:Math.min(C===_e.Right?O.right-O.width/2:O.right,Math.max(C===_e.Right?O.left:O.left+O.width/2,g.x)),y:Math.min(C===_e.Down?O.bottom-O.height/2:O.bottom,Math.max(C===_e.Down?O.top:O.top+O.height/2,g.y))},q=C===_e.Right&&!P||C===_e.Left&&!A,te=C===_e.Down&&!D||C===_e.Up&&!j;if(q&&M.x!==g.x){const oe=E.scrollLeft+y.x,Z=C===_e.Right&&oe<=k.x||C===_e.Left&&oe>=R.x;if(Z&&!y.y){E.scrollTo({left:oe,behavior:d});return}Z?b.x=E.scrollLeft-oe:b.x=C===_e.Right?E.scrollLeft-k.x:E.scrollLeft-R.x,b.x&&E.scrollBy({left:-b.x,behavior:d});break}else if(te&&M.y!==g.y){const oe=E.scrollTop+y.y,Z=C===_e.Down&&oe<=k.y||C===_e.Up&&oe>=R.y;if(Z&&!y.x){E.scrollTo({top:oe,behavior:d});return}Z?b.y=E.scrollTop-oe:b.y=C===_e.Down?E.scrollTop-k.y:E.scrollTop-R.y,b.y&&E.scrollBy({top:-b.y,behavior:d});break}}this.handleMove(n,Lo(oi(g,this.referenceCoordinates),b))}}}handleMove(n,r){const{onMove:s}=this.props;n.preventDefault(),s(r)}handleEnd(n){const{onEnd:r}=this.props;n.preventDefault(),this.detach(),r()}handleCancel(n){const{onCancel:r}=this.props;n.preventDefault(),this.detach(),r()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}mf.activators=[{eventName:"onKeyDown",handler:(e,n,r)=>{let{keyboardCodes:s=kx,onActivation:i}=n,{active:a}=r;const{code:c}=e.nativeEvent;if(s.start.includes(c)){const d=a.activatorNode.current;return d&&e.target!==d?!1:(e.preventDefault(),i?.({event:e.nativeEvent}),!0)}return!1}}];function yv(e){return!!(e&&"distance"in e)}function xv(e){return!!(e&&"delay"in e)}class pf{constructor(n,r,s){var i;s===void 0&&(s=H5(n.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=n,this.events=r;const{event:a}=n,{target:c}=a;this.props=n,this.events=r,this.document=qo(c),this.documentListeners=new Us(this.document),this.listeners=new Us(s),this.windowListeners=new Us(pn(c)),this.initialCoordinates=(i=Cd(a))!=null?i:Yn,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:n,props:{options:{activationConstraint:r,bypassActivationConstraint:s}}}=this;if(this.listeners.add(n.move.name,this.handleMove,{passive:!1}),this.listeners.add(n.end.name,this.handleEnd),n.cancel&&this.listeners.add(n.cancel.name,this.handleCancel),this.windowListeners.add(Fn.Resize,this.handleCancel),this.windowListeners.add(Fn.DragStart,vv),this.windowListeners.add(Fn.VisibilityChange,this.handleCancel),this.windowListeners.add(Fn.ContextMenu,vv),this.documentListeners.add(Fn.Keydown,this.handleKeydown),r){if(s!=null&&s({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(xv(r)){this.timeoutId=setTimeout(this.handleStart,r.delay),this.handlePending(r);return}if(yv(r)){this.handlePending(r);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(n,r){const{active:s,onPending:i}=this.props;i(s,n,this.initialCoordinates,r)}handleStart(){const{initialCoordinates:n}=this,{onStart:r}=this.props;n&&(this.activated=!0,this.documentListeners.add(Fn.Click,q5,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Fn.SelectionChange,this.removeTextSelection),r(n))}handleMove(n){var r;const{activated:s,initialCoordinates:i,props:a}=this,{onMove:c,options:{activationConstraint:d}}=a;if(!i)return;const h=(r=Cd(n))!=null?r:Yn,m=oi(i,h);if(!s&&d){if(yv(d)){if(d.tolerance!=null&&Ju(m,d.tolerance))return this.handleCancel();if(Ju(m,d.distance))return this.handleStart()}if(xv(d)&&Ju(m,d.tolerance))return this.handleCancel();this.handlePending(d,m);return}n.cancelable&&n.preventDefault(),c(h)}handleEnd(){const{onAbort:n,onEnd:r}=this.props;this.detach(),this.activated||n(this.props.active),r()}handleCancel(){const{onAbort:n,onCancel:r}=this.props;this.detach(),this.activated||n(this.props.active),r()}handleKeydown(n){n.code===_e.Esc&&this.handleCancel()}removeTextSelection(){var n;(n=this.document.getSelection())==null||n.removeAllRanges()}}const Y5={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class gf extends pf{constructor(n){const{event:r}=n,s=qo(r.target);super(n,Y5,s)}}gf.activators=[{eventName:"onPointerDown",handler:(e,n)=>{let{nativeEvent:r}=e,{onActivation:s}=n;return!r.isPrimary||r.button!==0?!1:(s?.({event:r}),!0)}}];const Q5={move:{name:"mousemove"},end:{name:"mouseup"}};var Ed;(function(e){e[e.RightClick=2]="RightClick"})(Ed||(Ed={}));class X5 extends pf{constructor(n){super(n,Q5,qo(n.event.target))}}X5.activators=[{eventName:"onMouseDown",handler:(e,n)=>{let{nativeEvent:r}=e,{onActivation:s}=n;return r.button===Ed.RightClick?!1:(s?.({event:r}),!0)}}];const Zu={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class Ix extends pf{constructor(n){super(n,Zu)}static setup(){return window.addEventListener(Zu.move.name,n,{capture:!1,passive:!1}),function(){window.removeEventListener(Zu.move.name,n)};function n(){}}}Ix.activators=[{eventName:"onTouchStart",handler:(e,n)=>{let{nativeEvent:r}=e,{onActivation:s}=n;const{touches:i}=r;return i.length>1?!1:(s?.({event:r}),!0)}}];var Vs;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(Vs||(Vs={}));var Wa;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(Wa||(Wa={}));function J5(e){let{acceleration:n,activator:r=Vs.Pointer,canScroll:s,draggingRect:i,enabled:a,interval:c=5,order:d=Wa.TreeOrder,pointerCoordinates:h,scrollableAncestors:m,scrollableAncestorRects:p,delta:g,threshold:y}=e;const b=eA({delta:g,disabled:!a}),[w,E]=d5(),C=N.useRef({x:0,y:0}),j=N.useRef({x:0,y:0}),P=N.useMemo(()=>{switch(r){case Vs.Pointer:return h?{top:h.y,bottom:h.y,left:h.x,right:h.x}:null;case Vs.DraggableRect:return i}},[r,i,h]),A=N.useRef(null),D=N.useCallback(()=>{const R=A.current;if(!R)return;const O=C.current.x*j.current.x,M=C.current.y*j.current.y;R.scrollBy(O,M)},[]),k=N.useMemo(()=>d===Wa.TreeOrder?[...m].reverse():m,[d,m]);N.useEffect(()=>{if(!a||!m.length||!P){E();return}for(const R of k){if(s?.(R)===!1)continue;const O=m.indexOf(R),M=p[O];if(!M)continue;const{direction:q,speed:te}=$5(R,M,P,n,y);for(const oe of["x","y"])b[oe][q[oe]]||(te[oe]=0,q[oe]=0);if(te.x>0||te.y>0){E(),A.current=R,w(D,c),C.current=te,j.current=q;return}}C.current={x:0,y:0},j.current={x:0,y:0},E()},[n,D,s,E,a,c,JSON.stringify(P),JSON.stringify(b),w,m,k,p,JSON.stringify(y)])}const Z5={x:{[kt.Backward]:!1,[kt.Forward]:!1},y:{[kt.Backward]:!1,[kt.Forward]:!1}};function eA(e){let{delta:n,disabled:r}=e;const s=wd(n);return fi(i=>{if(r||!s||!i)return Z5;const a={x:Math.sign(n.x-s.x),y:Math.sign(n.y-s.y)};return{x:{[kt.Backward]:i.x[kt.Backward]||a.x===-1,[kt.Forward]:i.x[kt.Forward]||a.x===1},y:{[kt.Backward]:i.y[kt.Backward]||a.y===-1,[kt.Forward]:i.y[kt.Forward]||a.y===1}}},[r,n,s])}function tA(e,n){const r=n!=null?e.get(n):void 0,s=r?r.node.current:null;return fi(i=>{var a;return n==null?null:(a=s??i)!=null?a:null},[s,n])}function nA(e,n){return N.useMemo(()=>e.reduce((r,s)=>{const{sensor:i}=s,a=i.activators.map(c=>({eventName:c.eventName,handler:n(c.handler,s)}));return[...r,...a]},[]),[e,n])}var ii;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(ii||(ii={}));var Dd;(function(e){e.Optimized="optimized"})(Dd||(Dd={}));const bv=new Map;function rA(e,n){let{dragging:r,dependencies:s,config:i}=n;const[a,c]=N.useState(null),{frequency:d,measure:h,strategy:m}=i,p=N.useRef(e),g=C(),y=ri(g),b=N.useCallback(function(j){j===void 0&&(j=[]),!y.current&&c(P=>P===null?j:P.concat(j.filter(A=>!P.includes(A))))},[y]),w=N.useRef(null),E=fi(j=>{if(g&&!r)return bv;if(!j||j===bv||p.current!==e||a!=null){const P=new Map;for(let A of e){if(!A)continue;if(a&&a.length>0&&!a.includes(A.id)&&A.rect.current){P.set(A.id,A.rect.current);continue}const D=A.node.current,k=D?new hf(h(D),D):null;A.rect.current=k,k&&P.set(A.id,k)}return P}return j},[e,a,r,g,h]);return N.useEffect(()=>{p.current=e},[e]),N.useEffect(()=>{g||b()},[r,g]),N.useEffect(()=>{a&&a.length>0&&c(null)},[JSON.stringify(a)]),N.useEffect(()=>{g||typeof d!="number"||w.current!==null||(w.current=setTimeout(()=>{b(),w.current=null},d))},[d,g,b,...s]),{droppableRects:E,measureDroppableContainers:b,measuringScheduled:a!=null};function C(){switch(m){case ii.Always:return!1;case ii.BeforeDragging:return r;default:return!r}}}function Px(e,n){return fi(r=>e?r||(typeof n=="function"?n(e):e):null,[n,e])}function oA(e,n){return Px(e,n)}function sA(e){let{callback:n,disabled:r}=e;const s=df(n),i=N.useMemo(()=>{if(r||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:a}=window;return new a(s)},[s,r]);return N.useEffect(()=>()=>i?.disconnect(),[i]),i}function ll(e){let{callback:n,disabled:r}=e;const s=df(n),i=N.useMemo(()=>{if(r||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:a}=window;return new a(s)},[r]);return N.useEffect(()=>()=>i?.disconnect(),[i]),i}function iA(e){return new hf(Ko(e),e)}function Nv(e,n,r){n===void 0&&(n=iA);const[s,i]=N.useState(null);function a(){i(h=>{if(!e)return null;if(e.isConnected===!1){var m;return(m=h??r)!=null?m:null}const p=n(e);return JSON.stringify(h)===JSON.stringify(p)?h:p})}const c=sA({callback(h){if(e)for(const m of h){const{type:p,target:g}=m;if(p==="childList"&&g instanceof HTMLElement&&g.contains(e)){a();break}}}}),d=ll({callback:a});return lr(()=>{a(),e?(d?.observe(e),c?.observe(document.body,{childList:!0,subtree:!0})):(d?.disconnect(),c?.disconnect())},[e]),s}function aA(e){const n=Px(e);return wx(e,n)}const wv=[];function lA(e){const n=N.useRef(e),r=fi(s=>e?s&&s!==wv&&e&&n.current&&e.parentNode===n.current.parentNode?s:al(e):wv,[e]);return N.useEffect(()=>{n.current=e},[e]),r}function cA(e){const[n,r]=N.useState(null),s=N.useRef(e),i=N.useCallback(a=>{const c=Xu(a.target);c&&r(d=>d?(d.set(c,Sd(c)),new Map(d)):null)},[]);return N.useEffect(()=>{const a=s.current;if(e!==a){c(a);const d=e.map(h=>{const m=Xu(h);return m?(m.addEventListener("scroll",i,{passive:!0}),[m,Sd(m)]):null}).filter(h=>h!=null);r(d.length?new Map(d):null),s.current=e}return()=>{c(e),c(a)};function c(d){d.forEach(h=>{const m=Xu(h);m?.removeEventListener("scroll",i)})}},[i,e]),N.useMemo(()=>e.length?n?Array.from(n.values()).reduce((a,c)=>Lo(a,c),Yn):Ax(e):Yn,[e,n])}function Cv(e,n){n===void 0&&(n=[]);const r=N.useRef(null);return N.useEffect(()=>{r.current=null},n),N.useEffect(()=>{const s=e!==Yn;s&&!r.current&&(r.current=e),!s&&r.current&&(r.current=null)},[e]),r.current?oi(e,r.current):Yn}function uA(e){N.useEffect(()=>{if(!il)return;const n=e.map(r=>{let{sensor:s}=r;return s.setup==null?void 0:s.setup()});return()=>{for(const r of n)r?.()}},e.map(n=>{let{sensor:r}=n;return r}))}function dA(e,n){return N.useMemo(()=>e.reduce((r,s)=>{let{eventName:i,handler:a}=s;return r[i]=c=>{a(c,n)},r},{}),[e,n])}function Tx(e){return N.useMemo(()=>e?_5(e):null,[e])}const Sv=[];function fA(e,n){n===void 0&&(n=Ko);const[r]=e,s=Tx(r?pn(r):null),[i,a]=N.useState(Sv);function c(){a(()=>e.length?e.map(h=>Dx(h)?s:new hf(n(h),h)):Sv)}const d=ll({callback:c});return lr(()=>{d?.disconnect(),c(),e.forEach(h=>d?.observe(h))},[e]),i}function hA(e){if(!e)return null;if(e.children.length>1)return e;const n=e.children[0];return di(n)?n:e}function mA(e){let{measure:n}=e;const[r,s]=N.useState(null),i=N.useCallback(m=>{for(const{target:p}of m)if(di(p)){s(g=>{const y=n(p);return g?{...g,width:y.width,height:y.height}:y});break}},[n]),a=ll({callback:i}),c=N.useCallback(m=>{const p=hA(m);a?.disconnect(),p&&a?.observe(p),s(p?n(p):null)},[n,a]),[d,h]=Va(c);return N.useMemo(()=>({nodeRef:d,rect:r,setRef:h}),[r,d,h])}const pA=[{sensor:gf,options:{}},{sensor:mf,options:{}}],gA={current:{}},Ia={draggable:{measure:gv},droppable:{measure:gv,strategy:ii.WhileDragging,frequency:Dd.Optimized},dragOverlay:{measure:Ko}};class zs extends Map{get(n){var r;return n!=null&&(r=super.get(n))!=null?r:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(n=>{let{disabled:r}=n;return!r})}getNodeFor(n){var r,s;return(r=(s=this.get(n))==null?void 0:s.node.current)!=null?r:void 0}}const vA={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new zs,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:za},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Ia,measureDroppableContainers:za,windowRect:null,measuringScheduled:!1},yA={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:za,draggableNodes:new Map,over:null,measureDroppableContainers:za},cl=N.createContext(yA),Rx=N.createContext(vA);function xA(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new zs}}}function bA(e,n){switch(n.type){case wt.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:n.initialCoordinates,active:n.active}};case wt.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:n.coordinates.x-e.draggable.initialCoordinates.x,y:n.coordinates.y-e.draggable.initialCoordinates.y}}};case wt.DragEnd:case wt.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case wt.RegisterDroppable:{const{element:r}=n,{id:s}=r,i=new zs(e.droppable.containers);return i.set(s,r),{...e,droppable:{...e.droppable,containers:i}}}case wt.SetDroppableDisabled:{const{id:r,key:s,disabled:i}=n,a=e.droppable.containers.get(r);if(!a||s!==a.key)return e;const c=new zs(e.droppable.containers);return c.set(r,{...a,disabled:i}),{...e,droppable:{...e.droppable,containers:c}}}case wt.UnregisterDroppable:{const{id:r,key:s}=n,i=e.droppable.containers.get(r);if(!i||s!==i.key)return e;const a=new zs(e.droppable.containers);return a.delete(r),{...e,droppable:{...e.droppable,containers:a}}}default:return e}}function NA(e){let{disabled:n}=e;const{active:r,activatorEvent:s,draggableNodes:i}=N.useContext(cl),a=wd(s),c=wd(r?.id);return N.useEffect(()=>{if(!n&&!s&&a&&c!=null){if(!ff(a)||document.activeElement===a.target)return;const d=i.get(c);if(!d)return;const{activatorNode:h,node:m}=d;if(!h.current&&!m.current)return;requestAnimationFrame(()=>{for(const p of[h.current,m.current]){if(!p)continue;const g=m5(p);if(g){g.focus();break}}})}},[s,n,i,c,a]),null}function wA(e,n){let{transform:r,...s}=n;return e!=null&&e.length?e.reduce((i,a)=>a({transform:i,...s}),r):r}function CA(e){return N.useMemo(()=>({draggable:{...Ia.draggable,...e?.draggable},droppable:{...Ia.droppable,...e?.droppable},dragOverlay:{...Ia.dragOverlay,...e?.dragOverlay}}),[e?.draggable,e?.droppable,e?.dragOverlay])}function SA(e){let{activeNode:n,measure:r,initialRect:s,config:i=!0}=e;const a=N.useRef(!1),{x:c,y:d}=typeof i=="boolean"?{x:i,y:i}:i;lr(()=>{if(!c&&!d||!n){a.current=!1;return}if(a.current||!s)return;const m=n?.node.current;if(!m||m.isConnected===!1)return;const p=r(m),g=wx(p,s);if(c||(g.x=0),d||(g.y=0),a.current=!0,Math.abs(g.x)>0||Math.abs(g.y)>0){const y=Cx(m);y&&y.scrollBy({top:g.y,left:g.x})}},[n,c,d,s,r])}const Mx=N.createContext({...Yn,scaleX:1,scaleY:1});var Gr;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(Gr||(Gr={}));const EA=N.memo(function(n){var r,s,i,a;let{id:c,accessibility:d,autoScroll:h=!0,children:m,sensors:p=pA,collisionDetection:g=k5,measuring:y,modifiers:b,...w}=n;const E=N.useReducer(bA,void 0,xA),[C,j]=E,[P,A]=b5(),[D,k]=N.useState(Gr.Uninitialized),R=D===Gr.Initialized,{draggable:{active:O,nodes:M,translate:q},droppable:{containers:te}}=C,oe=O!=null?M.get(O):null,Z=N.useRef({initial:null,translated:null}),Q=N.useMemo(()=>{var V;return O!=null?{id:O,data:(V=oe?.data)!=null?V:gA,rect:Z}:null},[O,oe]),se=N.useRef(null),[K,J]=N.useState(null),[re,W]=N.useState(null),$=ri(w,Object.values(w)),_=hi("DndDescribedBy",c),I=N.useMemo(()=>te.getEnabled(),[te]),L=CA(y),{droppableRects:G,measureDroppableContainers:ee,measuringScheduled:ue}=rA(I,{dragging:R,dependencies:[q.x,q.y],config:L.droppable}),fe=tA(M,O),Ee=N.useMemo(()=>re?Cd(re):null,[re]),pe=tn(),Ne=oA(fe,L.draggable.measure);SA({activeNode:O!=null?M.get(O):null,config:pe.layoutShiftCompensation,initialRect:Ne,measure:L.draggable.measure});const be=Nv(fe,L.draggable.measure,Ne),nt=Nv(fe?fe.parentElement:null),Ie=N.useRef({activatorEvent:null,active:null,activeNode:fe,collisionRect:null,collisions:null,droppableRects:G,draggableNodes:M,draggingNode:null,draggingNodeRect:null,droppableContainers:te,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Xe=te.getNodeFor((r=Ie.current.over)==null?void 0:r.id),Ce=mA({measure:L.dragOverlay.measure}),ze=(s=Ce.nodeRef.current)!=null?s:fe,Je=R?(i=Ce.rect)!=null?i:be:null,Ct=!!(Ce.nodeRef.current&&Ce.rect),Wt=aA(Ct?null:be),Tt=Tx(ze?pn(ze):null),st=lA(R?Xe??fe:null),et=fA(st),We=wA(b,{transform:{x:q.x-Wt.x,y:q.y-Wt.y,scaleX:1,scaleY:1},activatorEvent:re,active:Q,activeNodeRect:be,containerNodeRect:nt,draggingNodeRect:Je,over:Ie.current.over,overlayNodeRect:Ce.rect,scrollableAncestors:st,scrollableAncestorRects:et,windowRect:Tt}),ut=Ee?Lo(Ee,q):null,yt=cA(st),gn=Cv(yt),Ht=Cv(yt,[be]),Y=Lo(We,gn),Te=Je?T5(Je,We):null,Ge=Q&&Te?g({active:Q,collisionRect:Te,droppableRects:G,droppableContainers:I,pointerCoordinates:ut}):null,Le=Nx(Ge,"id"),[He,jn]=N.useState(null),Zt=Ct?We:Lo(We,Ht),en=I5(Zt,(a=He?.rect)!=null?a:null,be),qt=N.useRef(null),An=N.useCallback((V,ne)=>{let{sensor:he,options:Pe}=ne;if(se.current==null)return;const Ue=M.get(se.current);if(!Ue)return;const qe=V.nativeEvent,dt=new he({active:se.current,activeNode:Ue,event:qe,options:Pe,context:Ie,onAbort(Ze){if(!M.get(Ze))return;const{onDragAbort:ft}=$.current,Ft={id:Ze};ft?.(Ft),P({type:"onDragAbort",event:Ft})},onPending(Ze,nn,ft,Ft){if(!M.get(Ze))return;const{onDragPending:Qn}=$.current,yn={id:Ze,constraint:nn,initialCoordinates:ft,offset:Ft};Qn?.(yn),P({type:"onDragPending",event:yn})},onStart(Ze){const nn=se.current;if(nn==null)return;const ft=M.get(nn);if(!ft)return;const{onDragStart:Ft}=$.current,rn={activatorEvent:qe,active:{id:nn,data:ft.data,rect:Z}};xr.unstable_batchedUpdates(()=>{Ft?.(rn),k(Gr.Initializing),j({type:wt.DragStart,initialCoordinates:Ze,active:nn}),P({type:"onDragStart",event:rn}),J(qt.current),W(qe)})},onMove(Ze){j({type:wt.DragMove,coordinates:Ze})},onEnd:Kt(wt.DragEnd),onCancel:Kt(wt.DragCancel)});qt.current=dt;function Kt(Ze){return async function(){const{active:ft,collisions:Ft,over:rn,scrollAdjustedTranslate:Qn}=Ie.current;let yn=null;if(ft&&Qn){const{cancelDrop:cr}=$.current;yn={activatorEvent:qe,active:ft,collisions:Ft,delta:Qn,over:rn},Ze===wt.DragEnd&&typeof cr=="function"&&await Promise.resolve(cr(yn))&&(Ze=wt.DragCancel)}se.current=null,xr.unstable_batchedUpdates(()=>{j({type:Ze}),k(Gr.Uninitialized),jn(null),J(null),W(null),qt.current=null;const cr=Ze===wt.DragEnd?"onDragEnd":"onDragCancel";if(yn){const Yo=$.current[cr];Yo?.(yn),P({type:cr,event:yn})}})}}},[M]),Lt=N.useCallback((V,ne)=>(he,Pe)=>{const Ue=he.nativeEvent,qe=M.get(Pe);if(se.current!==null||!qe||Ue.dndKit||Ue.defaultPrevented)return;const dt={active:qe};V(he,ne.options,dt)===!0&&(Ue.dndKit={capturedBy:ne.sensor},se.current=Pe,An(he,ne))},[M,An]),St=nA(p,Lt);uA(p),lr(()=>{be&&D===Gr.Initializing&&k(Gr.Initialized)},[be,D]),N.useEffect(()=>{const{onDragMove:V}=$.current,{active:ne,activatorEvent:he,collisions:Pe,over:Ue}=Ie.current;if(!ne||!he)return;const qe={active:ne,activatorEvent:he,collisions:Pe,delta:{x:Y.x,y:Y.y},over:Ue};xr.unstable_batchedUpdates(()=>{V?.(qe),P({type:"onDragMove",event:qe})})},[Y.x,Y.y]),N.useEffect(()=>{const{active:V,activatorEvent:ne,collisions:he,droppableContainers:Pe,scrollAdjustedTranslate:Ue}=Ie.current;if(!V||se.current==null||!ne||!Ue)return;const{onDragOver:qe}=$.current,dt=Pe.get(Le),Kt=dt&&dt.rect.current?{id:dt.id,rect:dt.rect.current,data:dt.data,disabled:dt.disabled}:null,Ze={active:V,activatorEvent:ne,collisions:he,delta:{x:Ue.x,y:Ue.y},over:Kt};xr.unstable_batchedUpdates(()=>{jn(Kt),qe?.(Ze),P({type:"onDragOver",event:Ze})})},[Le]),lr(()=>{Ie.current={activatorEvent:re,active:Q,activeNode:fe,collisionRect:Te,collisions:Ge,droppableRects:G,draggableNodes:M,draggingNode:ze,draggingNodeRect:Je,droppableContainers:te,over:He,scrollableAncestors:st,scrollAdjustedTranslate:Y},Z.current={initial:Je,translated:Te}},[Q,fe,Ge,Te,M,ze,Je,G,te,He,st,Y]),J5({...pe,delta:q,draggingRect:Te,pointerCoordinates:ut,scrollableAncestors:st,scrollableAncestorRects:et});const vn=N.useMemo(()=>({active:Q,activeNode:fe,activeNodeRect:be,activatorEvent:re,collisions:Ge,containerNodeRect:nt,dragOverlay:Ce,draggableNodes:M,droppableContainers:te,droppableRects:G,over:He,measureDroppableContainers:ee,scrollableAncestors:st,scrollableAncestorRects:et,measuringConfiguration:L,measuringScheduled:ue,windowRect:Tt}),[Q,fe,be,re,Ge,nt,Ce,M,te,G,He,ee,st,et,L,ue,Tt]),kn=N.useMemo(()=>({activatorEvent:re,activators:St,active:Q,activeNodeRect:be,ariaDescribedById:{draggable:_},dispatch:j,draggableNodes:M,over:He,measureDroppableContainers:ee}),[re,St,Q,be,j,_,M,He,ee]);return ve.createElement(yx.Provider,{value:A},ve.createElement(cl.Provider,{value:kn},ve.createElement(Rx.Provider,{value:vn},ve.createElement(Mx.Provider,{value:en},m)),ve.createElement(NA,{disabled:d?.restoreFocus===!1})),ve.createElement(C5,{...d,hiddenTextDescribedById:_}));function tn(){const V=K?.autoScrollEnabled===!1,ne=typeof h=="object"?h.enabled===!1:h===!1,he=R&&!V&&!ne;return typeof h=="object"?{...h,enabled:he}:{enabled:he}}}),DA=N.createContext(null),Ev="button",jA="Draggable";function AA(e){let{id:n,data:r,disabled:s=!1,attributes:i}=e;const a=hi(jA),{activators:c,activatorEvent:d,active:h,activeNodeRect:m,ariaDescribedById:p,draggableNodes:g,over:y}=N.useContext(cl),{role:b=Ev,roleDescription:w="draggable",tabIndex:E=0}=i??{},C=h?.id===n,j=N.useContext(C?Mx:DA),[P,A]=Va(),[D,k]=Va(),R=dA(c,n),O=ri(r);lr(()=>(g.set(n,{id:n,key:a,node:P,activatorNode:D,data:O}),()=>{const q=g.get(n);q&&q.key===a&&g.delete(n)}),[g,n]);const M=N.useMemo(()=>({role:b,tabIndex:E,"aria-disabled":s,"aria-pressed":C&&b===Ev?!0:void 0,"aria-roledescription":w,"aria-describedby":p.draggable}),[s,b,E,C,w,p.draggable]);return{active:h,activatorEvent:d,activeNodeRect:m,attributes:M,isDragging:C,listeners:s?void 0:R,node:P,over:y,setNodeRef:A,setActivatorNodeRef:k,transform:j}}function kA(){return N.useContext(Rx)}const IA="Droppable",PA={timeout:25};function TA(e){let{data:n,disabled:r=!1,id:s,resizeObserverConfig:i}=e;const a=hi(IA),{active:c,dispatch:d,over:h,measureDroppableContainers:m}=N.useContext(cl),p=N.useRef({disabled:r}),g=N.useRef(!1),y=N.useRef(null),b=N.useRef(null),{disabled:w,updateMeasurementsFor:E,timeout:C}={...PA,...i},j=ri(E??s),P=N.useCallback(()=>{if(!g.current){g.current=!0;return}b.current!=null&&clearTimeout(b.current),b.current=setTimeout(()=>{m(Array.isArray(j.current)?j.current:[j.current]),b.current=null},C)},[C]),A=ll({callback:P,disabled:w||!c}),D=N.useCallback((M,q)=>{A&&(q&&(A.unobserve(q),g.current=!1),M&&A.observe(M))},[A]),[k,R]=Va(D),O=ri(n);return N.useEffect(()=>{!A||!k.current||(A.disconnect(),g.current=!1,A.observe(k.current))},[k,A]),N.useEffect(()=>(d({type:wt.RegisterDroppable,element:{id:s,key:a,disabled:r,node:k,rect:y,data:O}}),()=>d({type:wt.UnregisterDroppable,key:a,id:s})),[s]),N.useEffect(()=>{r!==p.current.disabled&&(d({type:wt.SetDroppableDisabled,id:s,key:a,disabled:r}),p.current.disabled=r)},[s,a,r,d]),{active:c,rect:y,isOver:h?.id===s,node:k,over:h,setNodeRef:R}}function vf(e,n,r){const s=e.slice();return s.splice(r<0?s.length+r:r,0,s.splice(n,1)[0]),s}function RA(e,n){return e.reduce((r,s,i)=>{const a=n.get(s);return a&&(r[i]=a),r},Array(e.length))}function ja(e){return e!==null&&e>=0}function MA(e,n){if(e===n)return!0;if(e.length!==n.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==n[r])return!1;return!0}function OA(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const yf=e=>{let{rects:n,activeIndex:r,overIndex:s,index:i}=e;const a=vf(n,s,r),c=n[i],d=a[i];return!d||!c?null:{x:d.left-c.left,y:d.top-c.top,scaleX:d.width/c.width,scaleY:d.height/c.height}},Ox="Sortable",_x=ve.createContext({activeIndex:-1,containerId:Ox,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:yf,disabled:{draggable:!1,droppable:!1}});function _A(e){let{children:n,id:r,items:s,strategy:i=yf,disabled:a=!1}=e;const{active:c,dragOverlay:d,droppableRects:h,over:m,measureDroppableContainers:p}=kA(),g=hi(Ox,r),y=d.rect!==null,b=N.useMemo(()=>s.map(R=>typeof R=="object"&&"id"in R?R.id:R),[s]),w=c!=null,E=c?b.indexOf(c.id):-1,C=m?b.indexOf(m.id):-1,j=N.useRef(b),P=!MA(b,j.current),A=C!==-1&&E===-1||P,D=OA(a);lr(()=>{P&&w&&p(b)},[P,b,w,p]),N.useEffect(()=>{j.current=b},[b]);const k=N.useMemo(()=>({activeIndex:E,containerId:g,disabled:D,disableTransforms:A,items:b,overIndex:C,useDragOverlay:y,sortedRects:RA(b,h),strategy:i}),[E,g,D.draggable,D.droppable,A,b,C,h,y,i]);return ve.createElement(_x.Provider,{value:k},n)}const LA=e=>{let{id:n,items:r,activeIndex:s,overIndex:i}=e;return vf(r,s,i).indexOf(n)},FA=e=>{let{containerId:n,isSorting:r,wasDragging:s,index:i,items:a,newIndex:c,previousItems:d,previousContainerId:h,transition:m}=e;return!m||!s||d!==a&&i===c?!1:r?!0:c!==i&&n===h},BA={duration:200,easing:"ease"},Lx="transform",$A=si.Transition.toString({property:Lx,duration:0,easing:"linear"}),GA={roleDescription:"sortable"};function UA(e){let{disabled:n,index:r,node:s,rect:i}=e;const[a,c]=N.useState(null),d=N.useRef(r);return lr(()=>{if(!n&&r!==d.current&&s.current){const h=i.current;if(h){const m=Ko(s.current,{ignoreTransform:!0}),p={x:h.left-m.left,y:h.top-m.top,scaleX:h.width/m.width,scaleY:h.height/m.height};(p.x||p.y)&&c(p)}}r!==d.current&&(d.current=r)},[n,r,s,i]),N.useEffect(()=>{a&&c(null)},[a]),a}function VA(e){let{animateLayoutChanges:n=FA,attributes:r,disabled:s,data:i,getNewIndex:a=LA,id:c,strategy:d,resizeObserverConfig:h,transition:m=BA}=e;const{items:p,containerId:g,activeIndex:y,disabled:b,disableTransforms:w,sortedRects:E,overIndex:C,useDragOverlay:j,strategy:P}=N.useContext(_x),A=zA(s,b),D=p.indexOf(c),k=N.useMemo(()=>({sortable:{containerId:g,index:D,items:p},...i}),[g,i,D,p]),R=N.useMemo(()=>p.slice(p.indexOf(c)),[p,c]),{rect:O,node:M,isOver:q,setNodeRef:te}=TA({id:c,data:k,disabled:A.droppable,resizeObserverConfig:{updateMeasurementsFor:R,...h}}),{active:oe,activatorEvent:Z,activeNodeRect:Q,attributes:se,setNodeRef:K,listeners:J,isDragging:re,over:W,setActivatorNodeRef:$,transform:_}=AA({id:c,data:k,attributes:{...GA,...r},disabled:A.draggable}),I=u5(te,K),L=!!oe,G=L&&!w&&ja(y)&&ja(C),ee=!j&&re,ue=ee&&G?_:null,Ee=G?ue??(d??P)({rects:E,activeNodeRect:Q,activeIndex:y,overIndex:C,index:D}):null,pe=ja(y)&&ja(C)?a({id:c,items:p,activeIndex:y,overIndex:C}):D,Ne=oe?.id,be=N.useRef({activeId:Ne,items:p,newIndex:pe,containerId:g}),nt=p!==be.current.items,Ie=n({active:oe,containerId:g,isDragging:re,isSorting:L,id:c,index:D,items:p,newIndex:be.current.newIndex,previousItems:be.current.items,previousContainerId:be.current.containerId,transition:m,wasDragging:be.current.activeId!=null}),Xe=UA({disabled:!Ie,index:D,node:M,rect:O});return N.useEffect(()=>{L&&be.current.newIndex!==pe&&(be.current.newIndex=pe),g!==be.current.containerId&&(be.current.containerId=g),p!==be.current.items&&(be.current.items=p)},[L,pe,g,p]),N.useEffect(()=>{if(Ne===be.current.activeId)return;if(Ne!=null&&be.current.activeId==null){be.current.activeId=Ne;return}const ze=setTimeout(()=>{be.current.activeId=Ne},50);return()=>clearTimeout(ze)},[Ne]),{active:oe,activeIndex:y,attributes:se,data:k,rect:O,index:D,newIndex:pe,items:p,isOver:q,isSorting:L,isDragging:re,listeners:J,node:M,overIndex:C,over:W,setNodeRef:I,setActivatorNodeRef:$,setDroppableNodeRef:te,setDraggableNodeRef:K,transform:Xe??Ee,transition:Ce()};function Ce(){if(Xe||nt&&be.current.newIndex===D)return $A;if(!(ee&&!ff(Z)||!m)&&(L||Ie))return si.Transition.toString({...m,property:Lx})}}function zA(e,n){var r,s;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(r=e?.draggable)!=null?r:n.draggable,droppable:(s=e?.droppable)!=null?s:n.droppable}}function Ha(e){if(!e)return!1;const n=e.data.current;return!!(n&&"sortable"in n&&typeof n.sortable=="object"&&"containerId"in n.sortable&&"items"in n.sortable&&"index"in n.sortable)}const WA=[_e.Down,_e.Right,_e.Up,_e.Left],HA=(e,n)=>{let{context:{active:r,collisionRect:s,droppableRects:i,droppableContainers:a,over:c,scrollableAncestors:d}}=n;if(WA.includes(e.code)){if(e.preventDefault(),!r||!s)return;const h=[];a.getEnabled().forEach(g=>{if(!g||g!=null&&g.disabled)return;const y=i.get(g.id);if(y)switch(e.code){case _e.Down:s.top<y.top&&h.push(g);break;case _e.Up:s.top>y.top&&h.push(g);break;case _e.Left:s.left>y.left&&h.push(g);break;case _e.Right:s.left<y.left&&h.push(g);break}});const m=j5({collisionRect:s,droppableRects:i,droppableContainers:h});let p=Nx(m,"id");if(p===c?.id&&m.length>1&&(p=m[1].id),p!=null){const g=a.get(r.id),y=a.get(p),b=y?i.get(y.id):null,w=y?.node.current;if(w&&b&&g&&y){const C=al(w).some((R,O)=>d[O]!==R),j=Fx(g,y),P=qA(g,y),A=C||!j?{x:0,y:0}:{x:P?s.width-b.width:0,y:P?s.height-b.height:0},D={x:b.left,y:b.top};return A.x&&A.y?D:oi(D,A)}}}};function Fx(e,n){return!Ha(e)||!Ha(n)?!1:e.data.current.sortable.containerId===n.data.current.sortable.containerId}function qA(e,n){return!Ha(e)||!Ha(n)||!Fx(e,n)?!1:e.data.current.sortable.index<n.data.current.sortable.index}const Bs=()=>/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||"ontouchstart"in window||navigator.maxTouchPoints>0,KA=({addedChords:e,activeChordIndex:n,playbackStore:r,isLiveMode:s})=>{const i=S5(Qu(gf,{activationConstraint:Bs()?{delay:300,tolerance:8}:{distance:8}}),Qu(Ix,{activationConstraint:{delay:400,tolerance:10}}),Qu(mf,{coordinateGetter:HA})),a=N.useCallback(()=>{if(document.body.classList.add("dragging"),Bs()){document.body.style.overflow="hidden",document.body.style.overscrollBehavior="none",document.body.style.touchAction="none",document.body.style.userSelect="none",document.body.style.webkitUserSelect="none",document.documentElement.style.overscrollBehavior="none",document.documentElement.style.touchAction="none";const p=document.querySelector('meta[name="viewport"]');p&&(p.setAttribute("data-original-content",p.getAttribute("content")||""),p.setAttribute("content","width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"))}},[]),c=N.useCallback(()=>{if(document.body.classList.remove("dragging"),Bs()){document.body.style.overflow="",document.body.style.overscrollBehavior="",document.body.style.touchAction="",document.body.style.userSelect="",document.body.style.webkitUserSelect="",document.documentElement.style.overscrollBehavior="",document.documentElement.style.touchAction="";const p=document.querySelector('meta[name="viewport"]');if(p){const g=p.getAttribute("data-original-content");g&&(p.setAttribute("content",g),p.removeAttribute("data-original-content"))}}},[]),d=N.useCallback(p=>{const{active:g,over:y}=p;if(document.body.classList.remove("dragging"),Bs()){document.body.style.overflow="",document.body.style.overscrollBehavior="",document.body.style.touchAction="",document.body.style.userSelect="",document.body.style.webkitUserSelect="",document.documentElement.style.overscrollBehavior="",document.documentElement.style.touchAction="";const b=document.querySelector('meta[name="viewport"]');if(b){const w=b.getAttribute("data-original-content");w&&(b.setAttribute("content",w),b.removeAttribute("data-original-content"))}}if(y&&g.id!==y.id){const b=parseInt(g.id.toString().replace("chord-","")),w=parseInt(y.id.toString().replace("chord-",""));if(!isNaN(b)&&!isNaN(w)&&b>=0&&b<e.length&&w>=0&&w<e.length){const E=vf(e,b,w);console.log("Reordered chords:",E.map(C=>C.name)),r.setAddedChords(E),n!==null&&(n===b?r.setActiveChordIndex(w):b<n&&w>=n?r.setActiveChordIndex(n-1):b>n&&w<=n&&r.setActiveChordIndex(n+1))}}},[e,n,r]),h=N.useCallback(p=>{if(!p.destination)return;const g=p.source.index,y=p.destination.index;if(g===y)return;const b=Array.from(e),[w]=b.splice(g,1);b.splice(y,0,w),r.setAddedChords(b),n!==null&&(n===g?r.setActiveChordIndex(y):g<n&&y>=n?r.setActiveChordIndex(n-1):g>n&&y<=n&&r.setActiveChordIndex(n+1))},[e,n,r]),m=N.useCallback(p=>{const{containerNodeRect:g,draggingNodeRect:y,transform:b}=p;if(!g||!y)return b;const w=Bs()?20:10,E=g.left+w,C=g.right-w,j=g.top+w,P=g.bottom-w,A=y.left+b.x,D=y.right+b.x,k=y.top+b.y,R=y.bottom+b.y;let O=b.x,M=b.y;return A<E?O=E-y.left:D>C&&(O=C-y.right),k<j?M=j-y.top:R>P&&(M=P-y.bottom),{...b,x:O,y:M}},[]);return{sensors:i,handleDragStart:a,handleDragCancel:c,handleDragEndDndKit:d,handleDragEnd:h,restrictToContainer:m}},YA=({isLiveMode:e,isEditMode:n,isDeleteMode:r,isCompactHeight:s,globalPatternState:i,addedChords:a,onTogglePlayback:c,onToggleLiveMode:d,onClearAll:h,onToggleDeleteMode:m})=>u.jsxs("div",{className:`${e?"flex-shrink-0":""} max-w-7xl mx-auto px-4 ${e?s?"pt-2 z-10":"pt-4 z-10":"pt-2"} w-full`,children:[u.jsxs("div",{className:`flex items-center justify-between ${e?s?"mb-1":"mb-3":"mb-2"}`,children:[u.jsxs("div",{className:"flex items-center space-x-4",children:[!e&&u.jsx(zt,{onClick:c,variant:"icon",size:"icon",active:i.isPlaying,title:i.isPlaying?"Stop":"Play",children:i.isPlaying?u.jsx(Ks,{className:"w-4 h-4"}):u.jsx(Ra,{className:"w-4 h-4"})}),e&&u.jsx(zt,{onClick:c,variant:"play-stop",size:"sm",active:i.isPlaying,className:"shadow-lg",children:i.isPlaying?u.jsxs(u.Fragment,{children:[u.jsx(Ks,{className:"w-4 h-4"})," Stop"]}):u.jsxs(u.Fragment,{children:[u.jsx(Ys,{className:"w-4 h-4"})," Play"]})})]}),u.jsxs("div",{className:"text-center sm:w-full sm:text-left sm:mx-4",children:[u.jsxs("div",{className:"hidden sm:block text-xs font-bold text-mcb-secondary uppercase tracking-wider",children:["chords ",n&&u.jsx("span",{className:"text-[var(--mcb-accent-text-primary)]",children:"(drag to reorder)"})]}),u.jsxs("div",{className:"block sm:hidden text-xs text-mcb-secondary uppercase tracking-wider",children:["chords ",n&&u.jsx("span",{className:"text-[var(--mcb-accent-text-primary)]",children:"(drag)"})]})]}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("button",{onClick:d,className:ct("w-[7em] h-8 flex items-center space-x-2 px-3 py-1.5 text-xs border rounded transition-all duration-200",e?"text-mcb-primary bg-mcb-hover border-mcb-primary hover:bg-mcb-active":"text-mcb-secondary hover:text-mcb-primary bg-mcb-hover hover:bg-mcb-active border-mcb-primary"),children:e?u.jsxs(u.Fragment,{children:[u.jsx(CN,{className:"h-3 w-3"}),u.jsx("span",{children:"Collapse"})]}):u.jsxs(u.Fragment,{children:[u.jsx(EN,{className:"h-3 w-3"}),u.jsx("span",{children:"Expand"})]})}),!e&&u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:()=>{e&&d(),h()},className:"w-[5em] h-8 flex items-center justify-center px-3 py-1.5 text-xs text-mcb-secondary hover:text-mcb-primary bg-mcb-hover hover:bg-mcb-active border border-mcb-primary rounded transition-all duration-200",children:"Clear"}),u.jsxs("button",{onClick:m,className:ct("w-[7em] h-8 flex items-center space-x-2 px-3 py-1.5 text-xs border rounded transition-all duration-200",r?"text-white bg-[var(--mcb-danger-primary)] border-[var(--mcb-danger-border)] hover:bg-[var(--mcb-danger-secondary)]":"text-mcb-secondary hover:text-mcb-primary bg-mcb-hover hover:bg-mcb-active border-mcb-primary"),children:[u.jsx(Gv,{className:"h-3 w-3"}),u.jsx("span",{children:r?"Done":"Delete"})]})]})]})]}),e&&!s&&u.jsxs("div",{className:"mb-4 text-sm text-center text-mcb-tertiary",children:[u.jsxs("div",{children:["Use 1-",Math.min(a.length,9)," or click chords"]}),u.jsxs("div",{className:"mt-2 text-xs",children:[u.jsx("span",{className:"inline-block w-3 h-3 mr-2 bg-[var(--mcb-accent-primary)] rounded-full"}),"Active Chord",n&&u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"mx-2",children:""}),u.jsx("span",{className:"text-[var(--mcb-accent-text-primary)]",children:"Drag chords to reorder"})]})]})]})]});function QA(e,n,r){const s={...e};return n.top+e.y<=r.top?s.y=r.top-n.top:n.bottom+e.y>=r.top+r.height&&(s.y=r.top+r.height-n.bottom),n.left+e.x<=r.left?s.x=r.left-n.left:n.right+e.x>=r.left+r.width&&(s.x=r.left+r.width-n.right),s}const XA=e=>{let{containerNodeRect:n,draggingNodeRect:r,transform:s}=e;return!r||!n?s:QA(s,r,n)},JA=({id:e,index:n,chord:r,onEdit:s,renderChordButton:i})=>{const{attributes:a,listeners:c,setNodeRef:d,transform:h,transition:m,isDragging:p}=VA({id:e}),g={transform:si.Transform.toString(h),transition:p?"none":m},y={...a,style:{userSelect:"none",webkitUserSelect:"none",...g}};return u.jsx("div",{ref:d,...y,...c,className:"mobile-drag-item",style:{WebkitTouchCallout:"none",WebkitTapHighlightColor:"transparent",...y.style},children:i(r,n,p,s)})},ir={DRAG_STYLES:`
        .dragging {
            overflow: hidden !important;
            touch-action: none !important;
            overscroll-behavior: none !important;
            -webkit-overflow-scrolling: auto !important;
        }
        
        .dragging * {
            pointer-events: none !important;
        }
        
        .dragging .mobile-drag-item,
        .dragging .mobile-drag-item * {
            pointer-events: auto !important;
        }
        
        @media (max-width: 768px) {
            .dragging {
                -webkit-user-select: none !important;
                user-select: none !important;
            }
        }
    `,GRID_CLASSES:{LIVE_MODE:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4 auto-rows-max pt-0",COLLAPSED_MODE:"flex space-x-2 overflow-x-auto pb-2 chord-sequence-scroll -mx-2 px-2"},BUTTON_SIZES:{LIVE_DESKTOP:{container:"py-8 px-6 text-lg min-h-[120px] flex flex-col items-center justify-center",number:"text-xl mb-2",name:"text-base text-center text-white",icon:"h-6 w-6"},LIVE_MOBILE:{container:"py-8 px-6 text-lg min-h-[140px] flex flex-col items-center justify-center",number:"text-xl mb-2",name:"text-base text-center text-white",icon:"h-6 w-6"},COLLAPSED:{container:"py-4 px-2 text-sm min-w-[85px] bottom-nav-button chord-button space-x-1 mt-1 min-h-[60px] !min-w-[70px] flex flex-col items-center justify-center",number:"text-xs mb-1",name:"text-xs",icon:"h-4 w-4"}},MOBILE_USER_AGENTS:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i},ZA=()=>ir.MOBILE_USER_AGENTS.test(navigator.userAgent)||"ontouchstart"in window||navigator.maxTouchPoints>0,ek=({isLiveMode:e,isEditMode:n,onClick:r})=>u.jsx("button",{onClick:r,className:ct("flex items-center justify-center rounded-lg border-2 border-dashed transition-all duration-200",e?"w-full h-full min-h-[120px] py-8 px-6":"w-12 h-12",n?"border-[var(--mcb-accent-primary)] text-[var(--mcb-accent-text-primary)] bg-[var(--mcb-accent-primary)]/10 hover:bg-[var(--mcb-accent-primary)]/20":"border-mcb-secondary text-[var(--mcb-text-tertiary)] hover:border-gray-400 hover:text-mcb-secondary hover:bg-gray-500/10"),title:n?"Exit edit mode":"Edit chords",style:{minHeight:e&&ZA()?"140px":void 0},children:u.jsx(ld,{className:ct(e?"w-8 h-8":"w-6 h-6",{"animate-spin":n})})}),Dv=()=>ir.MOBILE_USER_AGENTS.test(navigator.userAgent)||"ontouchstart"in window||navigator.maxTouchPoints>0,tk=({children:e,onClick:n,onTouchStart:r,onTouchEnd:s,className:i="",variant:a="primary",size:c="md",disabled:d=!1,active:h=!1,"aria-label":m,"aria-expanded":p,type:g="button",title:y,style:b,chord:w,index:E,isLiveMode:C,isDeleteMode:j,isEditMode:P,isHighlighted:A,isDragging:D,sizeConfig:k})=>{const R=`
    font-medium transition-all duration-200 rounded-md border
    focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-[#2a2f38]
    disabled:opacity-50 disabled:cursor-not-allowed
    flex items-center justify-center gap-1
  `,O={sm:"py-1 px-3 text-xs",md:"py-2 px-4 text-sm",lg:"py-3 px-6 text-base"},M={primary:h?"bg-[var(--mcb-accent-secondary)] border-[var(--mcb-accent-primary)] text-white focus:ring-[var(--mcb-accent-primary)]":"bg-[var(--mcb-accent-tertiary)] border-[var(--mcb-accent-secondary)] hover:bg-[var(--mcb-accent-secondary)] hover:border-[var(--mcb-accent-primary)] text-white focus:ring-[var(--mcb-accent-primary)]",secondary:h?"bg-mcb-active border-mcb-secondary text-white focus:ring-gray-500":"bg-mcb-hover border-mcb-primary hover:bg-mcb-active hover:border-mcb-secondary text-white focus:ring-gray-500",danger:h?"bg-[var(--mcb-danger-primary)] border-[var(--mcb-danger-border)] text-white focus:ring-red-500":"bg-[var(--mcb-danger-secondary)] border-red-600 hover:bg-[var(--mcb-danger-primary)] hover:border-[var(--mcb-danger-border)] text-white focus:ring-red-500",success:h?"bg-[var(--mcb-success-primary)] border-green-500 text-white focus:ring-green-500":"bg-[var(--mcb-success-secondary)] border-green-600 hover:bg-[var(--mcb-success-primary)] hover:border-green-500 text-white focus:ring-green-500"},q=w?ct(R,k?"":O[c],M[a],{transform:A,"shadow-xl":C,"border-[var(--mcb-accent-primary)] hover:border-[var(--mcb-accent-text-primary)]":P,"cursor-grab active:cursor-grabbing":P&&!Dv(),"opacity-80 shadow-2xl scale-105":D,"select-none":P},i):ct(R,O[c],M[a],i);return w&&typeof E=="number"?u.jsxs("button",{type:g,onClick:n,onTouchStart:r,onTouchEnd:s,disabled:d,"aria-label":m,"aria-expanded":p,title:y,style:b,className:q,children:[j&&u.jsx(cd,{className:`absolute top-1 right-1 text-white bg-red-500 rounded-full shadow-sm ${C?"h-6 w-6":"h-4 w-4"}`}),P&&u.jsxs(u.Fragment,{children:[u.jsx(ld,{className:`absolute top-1 right-1 text-white bg-[var(--mcb-accent-primary)] rounded-full shadow-sm p-0.5 ${C?"h-6 w-6":"h-4 w-4"}`}),u.jsx(ld,{className:"absolute rounded-md  right-0 h-full w-full opacity-0"})]}),P&&Dv()&&u.jsx("div",{className:"absolute inset-0 w-full bg-[var(--mcb-accent-primary)]/5 border-2 border-[var(--mcb-accent-primary)]/20 rounded-lg pointer-events-none"}),u.jsx("div",{className:`text-[var(--mcb-accent-text-light)] font-bold ${k?.number||"text-xl mb-2"}`,children:E+1}),u.jsx("div",{className:`leading-tight ${k?.name||"text-base text-center text-white"}`,children:w.name}),C&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"mt-4 text-xs text-center text-mcb-secondary",children:w.notes.replace(/,/g,"  ")}),u.jsx("div",{className:"mt-1 font-mono text-xs text-center text-mcb-secondary",children:w.pattern.join("-")})]})]}):u.jsx("button",{type:g,onClick:n,onTouchStart:r,onTouchEnd:s,disabled:d,"aria-label":m,"aria-expanded":p,title:y,style:b,className:q,children:e})},ed=()=>ir.MOBILE_USER_AGENTS.test(navigator.userAgent)||"ontouchstart"in window||navigator.maxTouchPoints>0,nk=N.forwardRef(({isLiveMode:e,isEditMode:n,isDeleteMode:r,isCompactHeight:s,addedChords:i,activeChordIndex:a,highlightedChordIndex:c,sensors:d,onChordClick:h,onEditChord:m,onSetEditMode:p,onDragStart:g,onDragEnd:y,onDragEndDndKit:b,onDragCancel:w},E)=>{const C=(k,R,O=!1,M)=>{const q=R===a,te=R===c,oe=K=>{K.stopPropagation(),K.preventDefault(),n&&M?(console.log("Opening editor for chord",R),M(R)):n||(console.log("Playing chord",R),h(k.notes,R))},Z=K=>{n||(K.currentTarget.style.transform="scale(0.95)")},Q=K=>{n||(K.currentTarget.style.transform="")},se=e?ed()?ir.BUTTON_SIZES.LIVE_MOBILE:ir.BUTTON_SIZES.LIVE_DESKTOP:ir.BUTTON_SIZES.COLLAPSED;return u.jsx(tk,{onClick:oe,onTouchStart:Z,onTouchEnd:Q,variant:r?"danger":n?"secondary":"primary",active:q&&!r&&!n,"aria-label":`Pattern: ${k.pattern.join("-")}`,className:`relative w-full h-full mobile-drag-item ${se.container}`,style:{touchAction:n?void 0:"auto"},chord:k,index:R,isLiveMode:e,isDeleteMode:r,isEditMode:n,isHighlighted:te,isDragging:O,sizeConfig:se},R)},j=u.jsx(ek,{isLiveMode:e,isEditMode:n,onClick:()=>p(!n)}),P=e?u.jsxs("div",{className:ir.GRID_CLASSES.LIVE_MODE,children:[i.map((k,R)=>u.jsx("div",{children:C(k,R)},R)),u.jsx("div",{children:j})]}):u.jsxs("div",{className:ir.GRID_CLASSES.COLLAPSED_MODE,children:[i.map((k,R)=>u.jsx("div",{className:"flex-shrink-0",children:C(k,R)},R)),u.jsx("div",{className:"flex-shrink-0 py-4 px-2 min-w-[85px] min-h-[60px] mt-1 flex items-center justify-center",children:j})]}),A=e?u.jsx(EA,{sensors:d,collisionDetection:D5,onDragStart:g,onDragEnd:b,onDragCancel:w,modifiers:[XA],children:u.jsx(_A,{items:i.map((k,R)=>`chord-${R}`),strategy:yf,children:u.jsxs("div",{className:ir.GRID_CLASSES.LIVE_MODE,style:{gap:"1rem"},children:[i.map((k,R)=>u.jsx(JA,{id:`chord-${R}`,index:R,chord:k,onEdit:m,renderChordButton:C},`${k.name}-${k.notes}-${R}`)),u.jsx("div",{children:j})]})})}):u.jsx(sx,{onDragEnd:y,children:u.jsx(px,{droppableId:"chord-list",direction:"horizontal",children:k=>u.jsxs("div",{ref:k.innerRef,...k.droppableProps,className:"flex pb-2 -mx-2 overflow-x-auto space-x-2 px-2 chord-sequence-scroll",children:[i.map((R,O)=>u.jsx(ux,{draggableId:`chord-${O}`,index:O,children:(M,q)=>u.jsx("div",{ref:M.innerRef,...M.draggableProps,...M.dragHandleProps,className:"flex-shrink-0",children:C(R,O,q.isDragging,m)})},`chord-${O}`)),k.placeholder,u.jsx("div",{className:"flex-shrink-0 py-4 px-2 min-w-[85px] min-h-[60px] mt-1 flex items-center justify-center",children:j})]})})}),D=e&&!n?{WebkitOverflowScrolling:"touch",touchAction:"pan-y",overscrollBehavior:"contain",position:"relative",zIndex:1}:e&&n?{WebkitOverflowScrolling:ed()?"auto":"touch",touchAction:ed()?"pan-y":"auto",overscrollBehavior:"contain",position:"relative",zIndex:1}:void 0;return u.jsx("div",{ref:E,className:`flex-1 max-w-7xl mx-auto w-full ${e?`px-4 pb-8 ${s?"pt-1":"pt-2"} overflow-y-auto`:"px-2 pb-1"}`,style:D,children:n?A:P})}),rk=({isEditMode:e,isDeleteMode:n,addedChords:r,onClearAll:s,onToggleDeleteMode:i})=>u.jsx("div",{className:"flex-shrink-0 bg-mcb-primary border-t border-mcb-primary px-4 py-3",children:u.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[u.jsxs("div",{className:"text-xs font-medium text-mcb-tertiary mr-3",children:[r.length," chord",r.length!==1?"s":""," loaded",e&&u.jsx("span",{className:"ml-2 text-[var(--mcb-accent-text-primary)]",children:" Edit Mode: Click chords to edit"})]}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("button",{onClick:s,className:"w-[5em] h-8 flex items-center justify-center px-3 py-1.5 text-xs text-mcb-secondary hover:text-mcb-primary bg-mcb-hover hover:bg-mcb-active border border-mcb-primary rounded transition-all duration-200",children:"Clear"}),u.jsxs("button",{onClick:i,className:ct("w-[7em] h-8 flex items-center space-x-2 px-3 py-1.5 text-xs border rounded transition-all duration-200",n?"text-white bg-[var(--mcb-danger-primary)] border-[var(--mcb-danger-border)] hover:bg-[var(--mcb-danger-secondary)]":"text-mcb-secondary hover:text-mcb-primary bg-mcb-hover hover:bg-mcb-active border-mcb-primary"),children:[u.jsx(Gv,{className:"h-3 w-3"}),u.jsx("span",{children:n?"Done":"Delete"})]})]})]})}),ok=()=>{const e=Qe(),n=Re(),r=lt(),s=or(),{addedChords:i,activeChordIndex:a,highlightedChordIndex:c}=n,{isDeleteMode:d,isLiveMode:h}=s,{globalPatternState:m}=r,{chords:p}=e,[g,y]=N.useState(null),{isEditMode:b,setIsEditMode:w,isCompactHeight:E,scrollContainerRef:C,handleChordClick:j,handleUpdateChord:P,handleEditChord:A,handleCloseEditor:D,handleNavigateToChord:k,handleClearAll:R,handleTogglePlayback:O,handleToggleDeleteMode:M,handleToggleLiveMode:q}=c5({musicStore:e,playbackStore:n,patternStore:r,uiStore:s,setEditingChordIndex:y}),{sensors:te,handleDragStart:oe,handleDragCancel:Z,handleDragEndDndKit:Q,handleDragEnd:se}=KA({addedChords:i,activeChordIndex:a,playbackStore:n,isLiveMode:h});if(i.length===0)return null;if(g!==null){const J=i[g];if(J)return u.jsx(i5,{editingChordIndex:g,editingChord:J,totalChords:i.length,chords:p,onUpdateChord:P,onFetchOriginalChord:n.handleFetchOriginalChord,onChordClick:j,onClose:D,onNavigateToChord:k})}const K=h?"fixed inset-0 bg-mcb-input bg-opacity-95 backdrop-blur-sm z-50 flex flex-col":"fixed bottom-0 left-0 right-0 bg-mcb-primary bg-mcb-elevated border-t border-mcb-primary shadow-2xl z-50";return u.jsxs("div",{className:K,style:h?{touchAction:"none",overscrollBehavior:"none"}:void 0,children:[u.jsx("style",{children:ir.DRAG_STYLES}),u.jsx(YA,{isLiveMode:h,isEditMode:b,isDeleteMode:d,isCompactHeight:E,globalPatternState:m,addedChords:i,onTogglePlayback:O,onToggleLiveMode:q,onClearAll:R,onToggleDeleteMode:M}),u.jsx(nk,{ref:C,isLiveMode:h,isEditMode:b,isDeleteMode:d,isCompactHeight:E,addedChords:i,activeChordIndex:a,highlightedChordIndex:c,sensors:te,onChordClick:j,onEditChord:A,onSetEditMode:w,onDragStart:oe,onDragEnd:se,onDragEndDndKit:Q,onDragCancel:Z}),h&&u.jsx(rk,{isEditMode:b,isDeleteMode:d,addedChords:i,onClearAll:R,onToggleDeleteMode:M})]})},jd=({size:e=48,className:n=""})=>u.jsxs("div",{className:`relative flex items-center ${n}`,children:[u.jsx("div",{className:"relative",style:{width:e,height:e},children:u.jsxs("svg",{viewBox:"0 0 48 48",style:{width:e,height:e},children:[u.jsx("polygon",{points:"24,2 38,12 38,28 24,38 10,28 10,12",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"text-mcb-secondary"}),u.jsx("circle",{cx:"18",cy:"20",r:"2",fill:"currentColor",className:"text-mcb-tertiary"}),u.jsx("circle",{cx:"30",cy:"20",r:"2",fill:"currentColor",className:"text-mcb-tertiary"}),u.jsx("circle",{cx:"24",cy:"28",r:"2",fill:"currentColor",className:"text-mcb-tertiary"}),u.jsx("line",{x1:"18",y1:"20",x2:"24",y2:"28",stroke:"currentColor",strokeWidth:"1.5",className:"text-mcb-tertiary"}),u.jsx("line",{x1:"30",y1:"20",x2:"24",y2:"28",stroke:"currentColor",strokeWidth:"1.5",className:"text-mcb-tertiary"}),u.jsx("line",{x1:"18",y1:"20",x2:"30",y2:"20",stroke:"currentColor",strokeWidth:"1.5",className:"text-mcb-tertiary"})]})}),u.jsx("div",{className:"absolute -top-1 -right-0 w-2 h-2 border border-[var(--mcb-text-tertiary)] transform rotate-45"})]}),jv=({currentKey:e,mode:n,modes:r,pianoSettings:s,availableInstruments:i,isPlayingScale:a,scaleNotes:c,transposeEnabled:d,isDesktop:h=!1,onKeyChange:m,onModeChange:p,onInstrumentChange:g,onToggleTranspose:y,onToggleScalePlayback:b})=>{const w={key:h?"w-[5rem]":"w-[6em]",mode:h?"w-[11rem]":"w-[14rem]",voice:"w-[14rem]"},E=h?"flex flex-col bg-mcb-secondary/30 border border-mcb-secondary rounded-lg px-6 py-4":"space-y-4",C=h?"w-px h-8 bg-[var(--mcb-border-primary)]/50 mx-8":"hidden",j=h?"text-sm text-mcb-secondary font-medium whitespace-nowrap":"text-sm text-mcb-secondary font-medium whitespace-nowrap w-16 flex items-center";return h?u.jsxs("div",{className:E,children:[u.jsxs("div",{className:"flex items-center",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("span",{className:j,children:"Key:"}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(sr,{value:e,className:w.key,buttonClassName:"px-3 py-1.5 text-center font-medium text-xs h-10 flex items-center justify-center",menuClassName:`min-w-[${w.key}]`,onChange:m,showSearch:!1,options:Hs}),u.jsx(zt,{onClick:b,variant:"play-stop",size:"icon",className:"!w-8 !h-8 flex items-center justify-center ml-1",active:a,title:a?"Stop scale":`Play ${e} ${n} scale`,disabled:!c||c.length===0,children:a?u.jsx(Ks,{className:"w-6 h-6"}):u.jsx(Ys,{className:"w-6 h-6"})})]})]}),u.jsx("div",{className:C}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("span",{className:j,children:"Mode:"}),r&&u.jsx(sr,{value:n,className:w.mode,buttonClassName:"px-3 py-1.5 text-left font-medium text-xs h-10 flex items-center",menuClassName:`min-w-[${w.mode}]`,onChange:p,showSearch:!0,options:r})]}),u.jsx("div",{className:C}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("span",{className:j,children:"Voice:"}),u.jsx(sr,{value:s.instrumentName.replaceAll("_"," "),className:w.voice,buttonClassName:"px-3 py-1.5 text-left font-medium text-xs h-10 flex items-center",menuClassName:"min-w-[11rem]",onChange:g,showSearch:!0,options:i.map(P=>P.replaceAll("_"," "))})]})]}),u.jsx("div",{className:"flex items-start mt-3",children:u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("span",{className:"text-sm text-mcb-secondary font-medium whitespace-nowrap invisible",children:"Key:"}),u.jsx("button",{onClick:y,className:`relative flex items-center justify-center px-4 py-2 rounded-lg text-xs font-medium uppercase tracking-wide transition-all duration-200 border ${d?"bg-gradient-to-r from-[var(--mcb-accent-secondary)] to-[var(--mcb-accent-tertiary)] text-white border-[var(--mcb-accent-secondary)] shadow-lg shadow-[var(--mcb-accent-secondary)]/25":"bg-mcb-secondary text-mcb-tertiary border-mcb-primary hover:bg-mcb-hover hover:text-mcb-secondary"}`,title:"When enabled, changing key or mode will transpose all added chords",children:u.jsxs("div",{className:`flex items-center gap-2 ${d?"text-white":""}`,children:[u.jsx("div",{className:`w-2 h-2 rounded-full transition-colors duration-200 ${d?"bg-white":"bg-[var(--mcb-text-disabled)]"}`}),u.jsx("span",{children:"Transpose"})]})})]})})]}):u.jsxs("div",{className:E,children:[u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx("span",{className:`${j} mt-2`,children:"Key:"}),u.jsxs("div",{className:"flex flex-col gap-2",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(sr,{value:e,className:w.key,buttonClassName:"px-3 py-1.5 text-center font-medium text-xs h-10 flex items-center justify-center",menuClassName:"min-w-[6rem]",onChange:m,showSearch:!1,options:Hs}),u.jsx(zt,{onClick:b,variant:"play-stop",size:"icon",className:"!w-8 !h-8 flex items-center justify-center ml-1",active:a,title:a?"Stop scale":`Play ${e} ${n} scale`,disabled:!c||c.length===0,children:a?u.jsx(Ks,{className:"w-6 h-6"}):u.jsx(Ys,{className:"w-6 h-6"})})]}),u.jsx("button",{onClick:y,className:`relative flex items-center justify-center px-4 py-2 rounded-lg text-xs font-medium uppercase tracking-wide transition-all duration-200 border max-w-[13em] ${d?"bg-gradient-to-r from-[var(--mcb-accent-secondary)] to-[var(--mcb-accent-tertiary)] text-white border-[var(--mcb-accent-secondary)] shadow-lg shadow-[var(--mcb-accent-secondary)]/25":"bg-mcb-secondary text-mcb-tertiary border-mcb-primary hover:bg-mcb-hover hover:text-mcb-secondary"}`,title:"When enabled, changing key or mode will transpose all added chords",children:u.jsxs("div",{className:`flex items-center gap-2 ${d?"text-white":""}`,children:[u.jsx("div",{className:`w-2 h-2 rounded-full transition-colors duration-200 ${d?"bg-white":"bg-[var(--mcb-text-disabled)]"}`}),u.jsx("span",{children:"Transpose"})]})})]})]}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("span",{className:j,children:"Mode:"}),r&&u.jsx(sr,{value:n,className:w.mode,buttonClassName:"px-3 py-1.5 text-left font-medium text-xs h-10 flex items-center",menuClassName:`min-w-[${w.mode}]`,onChange:p,showSearch:!0,options:r})]}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("span",{className:j,children:"Voice:"}),u.jsx(sr,{value:s.instrumentName.replaceAll("_"," "),className:w.voice,buttonClassName:"px-3 py-1.5 text-left font-medium text-xs h-10 flex items-center",menuClassName:"min-w-[11rem]",onChange:g,showSearch:!0,options:i.map(P=>P.replaceAll("_"," "))})]})]})},sk=(e,n=4)=>{const r={C:0,"C#":1,Db:1,D:2,"D#":3,Eb:3,E:4,F:5,"F#":6,Gb:6,G:7,"G#":8,Ab:8,A:9,"A#":10,Bb:10,B:11};return(n+1)*12+(r[e]??0)},ik=({className:e="",onKeyChange:n,onModeChange:r,onInstrumentChange:s})=>{const i=Qe(Ce=>Ce.key),a=Qe(Ce=>Ce.mode),c=Qe(Ce=>Ce.modes),d=Qe(Ce=>Ce.scaleNotes),h=ar(Ce=>Ce.pianoSettings),m=ar(Ce=>Ce.availableInstruments),p=Re(Ce=>Ce.isPlayingScale),g=lt(Ce=>Ce.globalPatternState),{setKey:y,setMode:b}=Qe(),{setPianoInstrument:w,setCutOffPreviousNotes:E,setEq:C,setOctaveOffset:j,setReverbLevel:P,setNoteDuration:A,setVolume:D,setChorusLevel:k,setDelayLevel:R,setDistortionLevel:O,setBitcrusherLevel:M,setPhaserLevel:q,setFlangerLevel:te,setRingModLevel:oe,setAutoFilterLevel:Z,setTremoloLevel:Q,setStereoWidthLevel:se,setCompressorLevel:K}=ar(),{setIsPlayingScale:J,clearScalePlaybackTimeouts:re,setActiveNotes:W}=Re(),[$,_]=N.useState(!1),[I,L]=N.useState(!1),{transposeChords:G}=$1(),ee=N.useRef([]),ue=N.useRef(!1);N.useEffect(()=>{(async()=>{i&&a&&i!=="C"&&d.length===0&&(console.log("Forcing data load for key:",i),y(i))})()},[]),N.useEffect(()=>{(async()=>{if(await new Promise(Je=>setTimeout(Je,200)),!d||d.length===0){console.log("No scale notes, fetching for",i,a),await Qe.getState().fetchMusicData(i,a);return}const ze=d[0]?.noteName;if(ze){const Je=Vr(ze),Ct=Vr(i);Je!==Ct&&await Qe.getState().fetchMusicData(i,a)}})()},[i,a,d]);const fe=Ce=>{const ze=Ce.replaceAll(" ","_");s?s(ze):w(ze)},Ee=async Ce=>{n?n(Ce):(I&&await G(i,a,Ce,a),y(Ce))},pe=async Ce=>{r?r(Ce):(I&&await G(i,a,i,Ce),b(Ce))},Ne=N.useCallback(()=>{ee.current.forEach(Ce=>clearTimeout(Ce)),ee.current=[],ue.current=!1},[]),be=N.useCallback(Ce=>6e4/Ce/2,[]),nt=N.useCallback(()=>{if(!d||d.length===0){console.warn("No scale notes available to play");return}Ne();const Ce=g?.bpm||120,ze=be(Ce);ue.current=!0,J(!0);const Je=[...d];if(d.length>0){const We=d[0];Je.push({...We,seqNote:We.seqNote?We.seqNote+12:void 0})}const Ct=Je.map(We=>{const ut=Vr(We.noteName)||"C",yt=4,gn=We.seqNote?We.seqNote:sk(ut,yt);return{note:ut,octave:yt,sortValue:gn}}).sort((We,ut)=>We.sortValue-ut.sortValue),Wt=We=>({C:0,"C#":1,Db:1,D:2,"D#":3,Eb:3,E:4,F:5,"F#":6,Gb:6,G:7,"G#":8,Ab:8,A:9,"A#":10,Bb:10,B:11})[We]??0,Tt=[];let st=4,et=-1;for(let We=0;We<Ct.length;We++){const ut=Ct[We],yt=Wt(ut.note);(et!==-1&&et===11&&yt<=11&&yt<et||et!==-1&&yt<et&&!(et===11&&yt===0))&&st++,Tt.push({note:ut.note,octave:st}),et=yt}Tt.forEach((We,ut)=>{const yt=setTimeout(()=>{if(!ue.current)return;W([We]);const gn=setTimeout(()=>{ue.current&&W([])},ze*.8);if(ee.current.push(gn),ut===Tt.length-1){const Ht=setTimeout(()=>{ue.current&&Ie()},ze);ee.current.push(Ht)}},ut*ze);ee.current.push(yt)})},[d,g,J,W,Ne,be]),Ie=N.useCallback(()=>{Ne(),W([]),J(!1),re&&re()},[Ne,W,J,re]),Xe=N.useCallback(()=>{p||ue.current?Ie():nt()},[p,nt,Ie]);return ve.useEffect(()=>()=>Ne(),[Ne]),u.jsx("div",{className:`w-full max-w-7xl mx-auto px-2 sm:mt-2 mt-0 mb-0 ${e}`,children:u.jsxs("div",{className:"bg-mcb-secondary border border-mcb-primary rounded-lg overflow-hidden",children:[u.jsx("div",{className:"px-4 py-3 border-b border-mcb-primary",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("h2",{className:"text-sm font-bold text-mcb-secondary uppercase tracking-wider",children:"Controls"}),u.jsx("button",{onClick:()=>_(!$),className:"w-[7em] h-8 flex items-center space-x-2 px-3 py-1.5 text-xs text-mcb-secondary hover:text-mcb-primary bg-mcb-hover hover:bg-mcb-active border border-mcb-primary rounded transition-all duration-200",children:$?u.jsxs(u.Fragment,{children:[u.jsx(qs,{className:"w-3 h-3"}),u.jsx("span",{children:"Settings"})]}):u.jsxs(u.Fragment,{children:[u.jsx(ho,{className:"w-3 h-3"}),u.jsx("span",{children:"Settings"})]})})]})}),u.jsx("div",{className:"p-6 py-4 bg-mcb-tertiary",children:u.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-start lg:justify-center gap-6",children:[u.jsxs("div",{className:"hidden lg:flex items-center justify-between w-full",children:[u.jsx("div",{className:"flex-shrink-0 opacity-30",children:u.jsx(jd,{size:80})}),u.jsx("div",{className:"flex-shrink-0",children:u.jsx(jv,{currentKey:i,mode:a,modes:c,pianoSettings:h,availableInstruments:m,isPlayingScale:p,scaleNotes:d,transposeEnabled:I,isDesktop:!0,onKeyChange:Ee,onModeChange:pe,onInstrumentChange:fe,onToggleTranspose:()=>L(!I),onToggleScalePlayback:Xe})}),u.jsx("div",{className:"hidden [@media(min-width:72em)]:flex flex-shrink-0 opacity-30",children:u.jsx(jd,{size:80})})]}),u.jsx("div",{className:"lg:hidden",children:u.jsx(jv,{currentKey:i,mode:a,modes:c,pianoSettings:h,availableInstruments:m,isPlayingScale:p,scaleNotes:d,transposeEnabled:I,isDesktop:!1,onKeyChange:Ee,onModeChange:pe,onInstrumentChange:fe,onToggleTranspose:()=>L(!I),onToggleScalePlayback:Xe})})]})}),u.jsx("div",{className:`transition-all duration-300 ease-in-out overflow-hidden ${$?" opacity-100":"max-h-0 opacity-0"}`,children:u.jsxs("div",{className:"border-t border-mcb-primary bg-mcb-secondary",children:[u.jsx("div",{className:"px-4 py-3 border-b border-mcb-primary",children:u.jsx("h3",{className:"text-left text-sm font-medium text-mcb-primary uppercase tracking-wider",children:"Piano Settings"})}),u.jsx("div",{className:"p-6 bg-mcb-tertiary",children:u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-x-8 gap-y-8",children:[u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("div",{className:"bg-mcb-secondary border border-mcb-primary rounded px-3 py-2 mb-4",children:u.jsx("h4",{className:"text-xs font-medium text-mcb-primary uppercase tracking-wider",children:"Basic"})}),u.jsxs("div",{className:"space-y-4",children:[u.jsx(Ot,{label:"Volume",value:h.volume,min:0,max:1,step:.05,onChange:D,showPercentage:!0,showBypass:!0}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-medium text-mcb-primary mb-2 uppercase tracking-wide",children:"Octave Shift"}),u.jsxs("div",{className:"flex items-center justify-between bg-mcb-secondary border border-mcb-primary rounded-md p-1.5",children:[u.jsx("button",{onClick:()=>j(Math.max(-3,h.octaveOffset-1)),className:"w-6 h-6 flex items-center justify-center text-mcb-secondary hover:text-mcb-primary hover:bg-mcb-hover rounded transition-colors",disabled:h.octaveOffset<=-3,children:""}),u.jsx("span",{className:"font-mono text-xs text-mcb-primary px-2",children:h.octaveOffset===0?"Normal":`${h.octaveOffset>0?"+":""}${h.octaveOffset} octave${Math.abs(h.octaveOffset)>1?"s":""}`}),u.jsx("button",{onClick:()=>j(Math.min(3,h.octaveOffset+1)),className:"w-6 h-6 flex items-center justify-center text-mcb-secondary hover:text-mcb-primary hover:bg-mcb-hover rounded transition-colors",disabled:h.octaveOffset>=3,children:"+"})]})]}),u.jsx(Ot,{label:"Note Duration",value:h.noteDuration,min:.1,max:1,step:.05,onChange:A,showPercentage:!0}),u.jsx("div",{children:u.jsxs("label",{className:"flex items-center cursor-pointer",children:[u.jsx("input",{type:"checkbox",className:"w-3.5 h-3.5 text-[var(--mcb-accent-secondary)] bg-mcb-secondary border-mcb-primary rounded focus:ring-[var(--mcb-accent-primary)] focus:ring-1",checked:h.cutOffPreviousNotes,onChange:Ce=>E(Ce.target.checked)}),u.jsx("span",{className:"ml-2 text-xs text-mcb-secondary uppercase tracking-wide",children:"Cut off previous notes"})]})})]})]}),u.jsxs("div",{className:"pt-2",children:[u.jsx("div",{className:"bg-mcb-secondary border border-mcb-primary rounded px-3 py-2 mb-4",children:u.jsx("h4",{className:"text-xs font-medium text-mcb-primary uppercase tracking-wider",children:"Equalizer"})}),u.jsx("div",{className:"space-y-3",children:[{label:"Bass",key:"bass"},{label:"Mid",key:"mid"},{label:"Treble",key:"treble"}].map(({label:Ce,key:ze})=>u.jsx(Ot,{label:Ce,showBypass:!0,value:h.eq[ze],min:-24,max:24,step:.5,variant:"split",onChange:Je=>{const Ct={...h.eq,[ze]:Je};C(Ct)},formatValue:Je=>`${Je>0?"+":""}${Je.toFixed(1)}dB`},ze))})]})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("div",{className:"bg-mcb-secondary border border-mcb-primary rounded px-3 py-2 mb-4",children:u.jsx("h4",{className:"text-xs font-medium text-mcb-primary uppercase tracking-wider",children:"Effects"})}),u.jsx(Ot,{label:"Reverb",value:h.reverbLevel,min:0,max:1,step:.05,onChange:P,showPercentage:!0,showBypass:!0}),u.jsx(Ot,{label:"Chorus",value:h.chorusLevel,min:0,max:1,step:.05,onChange:k,showPercentage:!0,showBypass:!0}),u.jsx(Ot,{label:"Delay",value:h.delayLevel,min:0,max:1,step:.05,onChange:R,showPercentage:!0,showBypass:!0}),u.jsx(Ot,{label:"Phaser",value:h.phaserLevel,min:0,max:1,step:.05,onChange:q,showPercentage:!0,showBypass:!0}),u.jsx(Ot,{label:"Flanger",value:h.flangerLevel,min:0,max:1,step:.05,onChange:te,showPercentage:!0,showBypass:!0}),u.jsx(Ot,{label:"Tremolo",value:h.tremoloLevel,min:0,max:1,step:.05,onChange:Q,showPercentage:!0,showBypass:!0})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("div",{className:"bg-mcb-secondary border border-mcb-primary rounded px-3 py-2 mb-4",children:u.jsx("h4",{className:"text-xs font-medium text-mcb-primary uppercase tracking-wider",children:"Extended"})}),u.jsx(Ot,{label:"Distortion",value:h.distortionLevel,min:0,max:1,step:.05,onChange:O,showPercentage:!0,showBypass:!0}),u.jsx(Ot,{label:"Bitcrusher",value:h.bitcrusherLevel,min:0,max:1,step:.05,onChange:M,showPercentage:!0,showBypass:!0}),u.jsx(Ot,{label:"Ring Mod",value:h.ringModLevel,min:0,max:1,step:.05,onChange:oe,showPercentage:!0,showBypass:!0}),u.jsx(Ot,{label:"Auto-Filter",value:h.autoFilterLevel,min:0,max:1,step:.05,onChange:Z,showPercentage:!0,showBypass:!0}),u.jsx(Ot,{label:"Stereo Width",value:h.stereoWidthLevel,min:0,max:1,step:.05,onChange:se,showPercentage:!0,showBypass:!0}),u.jsx(Ot,{label:"Compressor",value:h.compressorLevel,min:0,max:1,step:.05,onChange:K,showPercentage:!0,showBypass:!0})]})]})})]})})]})})},xf=({isOpen:e,onClose:n,children:r,className:s="",showCloseButton:i=!0,closeOnBackdropClick:a=!0,title:c,fixedHeader:d=!1})=>{if(!e)return null;const h=m=>{a&&m.target===m.currentTarget&&n()};return u.jsxs("div",{className:"fixed inset-0 z-[1000] flex items-center justify-center p-4",children:[u.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:h}),u.jsxs("div",{className:`relative bg-mcb-secondary border border-mcb-primary rounded-lg shadow-xl w-full animate-in fade-in-0 zoom-in-95 duration-200 ${d?"flex flex-col max-h-full":""} ${s}`,children:[(c||i)&&u.jsxs("div",{className:`flex items-center justify-between p-4 border-b border-mcb-primary bg-mcb-secondary rounded-t-lg ${d?"flex-shrink-0":""}`,children:[c&&u.jsx("h3",{className:"text-sm font-semibold text-mcb-primary uppercase tracking-wide",children:c}),i&&u.jsx("button",{onClick:n,className:"w-6 h-6 flex items-center justify-center rounded-full hover:bg-[var(--mcb-text-subtle)] text-mcb-tertiary hover:text-mcb-primary transition-colors ml-auto",children:u.jsx(Uv,{className:"w-4 h-4"})})]}),d?u.jsx("div",{className:"flex-1 min-h-0 overflow-y-auto",children:r}):r]})]})},ak=({isOpen:e,onClose:n,onOpenHelp:r})=>{const s=()=>{n(),r()};return u.jsx(xf,{isOpen:e,onClose:n,title:"About",className:"max-w-2xl max-h-[85vh]",fixedHeader:!0,children:u.jsxs("div",{className:"p-6 space-y-6",children:[u.jsx("div",{className:"bg-mcb-primary rounded-lg border border-mcb-primary overflow-hidden",children:u.jsxs("div",{className:"p-4 text-sm leading-relaxed space-y-3 text-mcb-secondary text-left",children:[u.jsx("p",{children:"Modal Chord Buildr is a music learning, composition, and performance tool built with React. The app provides an intuitive interface for exploring musical scales and building chord progressions, while also offering basic synth and sequencer functionality."}),u.jsxs("p",{children:["For more details on how to use this app, please refer to the"," ",u.jsx("button",{onClick:s,className:"font-semibold text-[var(--mcb-accent-text-primary)] hover:text-[var(--mcb-accent-text-secondary)] underline underline-offset-2 transition-colors cursor-pointer",children:"Help & Guide"})," ","documentation."]})]})}),u.jsxs("div",{className:"bg-mcb-primary rounded-lg border border-mcb-primary overflow-hidden",children:[u.jsx("div",{className:"bg-mcb-tertiary px-4 py-3 border-b border-mcb-primary",children:u.jsx("h4",{className:"text-sm font-semibold text-white uppercase tracking-wide",children:"Key Features"})}),u.jsx("div",{className:"p-4",children:u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{className:"flex items-start space-x-3 p-2 rounded-md hover:bg-mcb-secondary/50 transition-colors",children:[u.jsx("div",{className:"w-2 h-2 rounded-full bg-[var(--mcb-accent-text-primary)] mt-2 flex-shrink-0"}),u.jsx("span",{className:"text-sm text-mcb-secondary text-left",children:"Interactive piano with multiple instruments and audio effects"})]}),u.jsxs("div",{className:"flex items-start space-x-3 p-2 rounded-md hover:bg-mcb-secondary/50 transition-colors",children:[u.jsx("div",{className:"w-2 h-2 rounded-full bg-[var(--mcb-accent-text-primary)] mt-2 flex-shrink-0"}),u.jsx("span",{className:"text-sm text-mcb-secondary text-left",children:"Pattern sequencer with customizable rhythmic patterns"})]}),u.jsxs("div",{className:"flex items-start space-x-3 p-2 rounded-md hover:bg-mcb-secondary/50 transition-colors",children:[u.jsx("div",{className:"w-2 h-2 rounded-full bg-[var(--mcb-accent-text-primary)] mt-2 flex-shrink-0"}),u.jsx("span",{className:"text-sm text-mcb-secondary text-left",children:"Extensive chord explorer with mode-based chord generation"})]}),u.jsxs("div",{className:"flex items-start space-x-3 p-2 rounded-md hover:bg-mcb-secondary/50 transition-colors",children:[u.jsx("div",{className:"w-2 h-2 rounded-full bg-[var(--mcb-accent-text-primary)] mt-2 flex-shrink-0"}),u.jsx("span",{className:"text-sm text-mcb-secondary text-left",children:"Real-time visualization of scale notes and chord relationships"})]}),u.jsxs("div",{className:"flex items-start space-x-3 p-2 rounded-md hover:bg-mcb-secondary/50 transition-colors",children:[u.jsx("div",{className:"w-2 h-2 rounded-full bg-[var(--mcb-accent-text-primary)] mt-2 flex-shrink-0"}),u.jsx("span",{className:"text-sm text-mcb-secondary text-left",children:"Live mode for performance and improvisation"})]})]})})]}),u.jsxs("div",{className:"bg-mcb-primary rounded-lg border border-mcb-primary overflow-hidden",children:[u.jsx("div",{className:"bg-mcb-tertiary px-4 py-3 border-b border-mcb-primary",children:u.jsx("h4",{className:"text-sm font-semibold text-white uppercase tracking-wide",children:"Links"})}),u.jsxs("div",{className:"p-4 space-y-3",children:[u.jsxs("a",{href:"https://github.com/jekrch/chord-analyzr",target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-3 p-3 rounded-lg bg-mcb-secondary/50 hover:bg-mcb-hover/70 transition-all duration-200 group",children:[u.jsx("div",{className:"w-8 h-8 flex items-center justify-center rounded-full bg-gray-700 group-hover:bg-[var(--mcb-border-primary)] transition-colors",children:u.jsx("svg",{className:"w-5 h-5 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:u.jsx("path",{fillRule:"evenodd",d:"M10 0C4.477 0 0 4.484 0 10.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0110 4.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.203 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.942.359.31.678.921.678 1.856 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0020 10.017C20 4.484 15.522 0 10 0z",clipRule:"evenodd"})})}),u.jsxs("div",{className:"flex-1 text-left",children:[u.jsx("div",{className:"text-sm font-medium text-white group-hover:text-[var(--mcb-accent-text-light)] transition-colors",children:"GitHub Repository"}),u.jsx("div",{className:"text-xs text-mcb-tertiary",children:"View source code and documentation"})]})]}),u.jsxs("a",{href:"https://jacobkrch.com",target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-3 p-3 rounded-lg bg-mcb-secondary/50 hover:bg-mcb-hover/70 transition-all duration-200 group",children:[u.jsx("div",{className:"w-8 h-8 flex items-center justify-center rounded-full bg-[var(--mcb-accent-secondary)] group-hover:bg-[var(--mcb-accent-primary)] transition-colors",children:u.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})}),u.jsx("div",{className:"flex-1 text-left",children:u.jsx("div",{className:"text-sm font-medium text-white group-hover:text-[var(--mcb-accent-text-light)] transition-colors",children:"jacobkrch.com"})})]})]})]}),u.jsx("div",{className:"pt-4 border-t border-mcb-primary/50",children:u.jsx("p",{className:"text-xs text-mcb-tertiary text-left",children:" 2025 Jacob Krch. All rights reserved."})})]})})},rr=({title:e,children:n,defaultOpen:r=!1})=>{const[s,i]=N.useState(r);return u.jsxs("div",{className:"bg-mcb-primary rounded-lg border border-mcb-primary overflow-hidden mb-4",children:[u.jsxs("button",{onClick:()=>i(!s),className:"w-full flex items-center justify-between p-4 text-left bg-mcb-tertiary border-b border-mcb-primary hover:bg-mcb-hover transition-all duration-200",children:[u.jsx("h4",{className:"text-sm font-semibold text-white uppercase tracking-wide",children:e}),s?u.jsx(ho,{className:"w-4 h-4 text-mcb-secondary flex-shrink-0"}):u.jsx(Fv,{className:"w-4 h-4 text-mcb-secondary flex-shrink-0"})]}),s&&u.jsx("div",{className:"p-4 text-mcb-secondary",children:n})]})},lk=({isOpen:e,onClose:n})=>u.jsx(xf,{isOpen:e,onClose:n,title:"Help & Guide",className:"max-w-4xl max-h-[85vh]",fixedHeader:!0,children:u.jsxs("div",{className:"p-6 space-y-4",children:[u.jsx(rr,{title:"Quick Start",defaultOpen:!0,children:u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex items-start space-x-4 p-3 rounded-lg bg-mcb-secondary/30 hover:bg-mcb-secondary/50 transition-colors",children:[u.jsx("div",{className:"w-8 h-8 flex items-center justify-center rounded-full bg-[var(--mcb-accent-secondary)] text-white text-sm font-bold flex-shrink-0",children:"1"}),u.jsxs("div",{className:"text-left",children:[u.jsx("div",{className:"text-sm font-semibold text-white mb-1",children:"Choose a Key & Mode"}),u.jsx("div",{className:"text-sm text-mcb-secondary",children:"Use the Controls section to select your musical key and mode (like C Ionian, D# Lydian, etc.)"})]})]}),u.jsxs("div",{className:"flex items-start space-x-4 p-3 rounded-lg bg-mcb-secondary/30 hover:bg-mcb-secondary/50 transition-colors",children:[u.jsx("div",{className:"w-8 h-8 flex items-center justify-center rounded-full bg-[var(--mcb-accent-secondary)] text-white text-sm font-bold flex-shrink-0",children:"2"}),u.jsxs("div",{className:"text-left",children:[u.jsx("div",{className:"text-sm font-semibold text-white mb-1",children:"Explore Chords"}),u.jsx("div",{className:"text-sm text-mcb-secondary",children:"Browse the Chord Explorer below to discover chords that fit your chosen key/mode"})]})]}),u.jsxs("div",{className:"flex items-start space-x-4 p-3 rounded-lg bg-mcb-secondary/30 hover:bg-mcb-secondary/50 transition-colors",children:[u.jsx("div",{className:"w-8 h-8 flex items-center justify-center rounded-full bg-[var(--mcb-accent-secondary)] text-white text-sm font-bold flex-shrink-0",children:"3"}),u.jsxs("div",{className:"text-left",children:[u.jsx("div",{className:"text-sm font-semibold text-white mb-1",children:"Build Sequences"}),u.jsx("div",{className:"text-sm text-mcb-secondary",children:"Click the + button on chords to add them to your sequence"})]})]}),u.jsxs("div",{className:"flex items-start space-x-4 p-3 rounded-lg bg-mcb-secondary/30 hover:bg-mcb-secondary/50 transition-colors",children:[u.jsx("div",{className:"w-8 h-8 flex items-center justify-center rounded-full bg-[var(--mcb-accent-secondary)] text-white text-sm font-bold flex-shrink-0",children:"4"}),u.jsxs("div",{className:"text-left",children:[u.jsx("div",{className:"text-sm font-semibold text-white mb-1",children:"Create Patterns"}),u.jsx("div",{className:"text-sm text-mcb-secondary",children:"Use the Sequencer to create rhythmic patterns for your chords"})]})]}),u.jsxs("div",{className:"flex items-start space-x-4 p-3 rounded-lg bg-mcb-secondary/30 hover:bg-mcb-secondary/50 transition-colors",children:[u.jsx("div",{className:"w-8 h-8 flex items-center justify-center rounded-full bg-[var(--mcb-accent-secondary)] text-white text-sm font-bold flex-shrink-0",children:"5"}),u.jsxs("div",{className:"text-left",children:[u.jsx("div",{className:"text-sm font-semibold text-white mb-1",children:"Play & Perform"}),u.jsx("div",{className:"text-sm text-mcb-secondary",children:"Hit Play to hear your creation, or use Live Mode for real-time performance"})]})]})]})}),u.jsx(rr,{title:"Keyboard Shortcuts",children:u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[u.jsxs("div",{className:"space-y-3",children:[u.jsx("h5",{className:"text-white font-semibold text-sm border-b border-mcb-primary pb-2 text-left",children:"Playback Control"}),u.jsxs("div",{className:"flex items-center justify-between p-2 rounded-md bg-mcb-secondary/30",children:[u.jsx("span",{className:"text-sm text-left",children:"Play/Pause sequencer"}),u.jsx("kbd",{className:"px-2 py-1 bg-gray-700 rounded text-xs font-mono",children:"Space"})]})]}),u.jsxs("div",{className:"space-y-3",children:[u.jsx("h5",{className:"text-white font-semibold text-sm border-b border-mcb-primary pb-2 text-left",children:"Navigation"}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"flex items-center justify-between p-2 rounded-md bg-mcb-secondary/30",children:[u.jsx("span",{className:"text-sm text-left",children:"Expand chord buttons"}),u.jsx("kbd",{className:"px-2 py-1 bg-gray-700 rounded text-xs font-mono",children:"L"})]}),u.jsxs("div",{className:"flex items-center justify-between p-2 rounded-md bg-mcb-secondary/30",children:[u.jsx("span",{className:"text-sm text-left",children:"Select chord from sequence"}),u.jsx("kbd",{className:"px-2 py-1 bg-gray-700 rounded text-xs font-mono",children:"1-9"})]})]})]})]})}),u.jsx(rr,{title:"Piano & Audio Controls",children:u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"p-4 rounded-lg bg-mcb-secondary/30",children:[u.jsx("h5",{className:"text-white font-semibold mb-3 text-sm text-left",children:"Piano Interaction"}),u.jsx("p",{className:"text-sm text-left",children:"Click piano keys to play individual notes. The piano highlights scale notes and chord tones based on your current selection."})]}),u.jsxs("div",{className:"p-4 rounded-lg bg-mcb-secondary/30",children:[u.jsx("h5",{className:"text-white font-semibold mb-3 text-sm text-left",children:"Audio Settings"}),u.jsx("p",{className:"text-sm mb-3 text-left",children:"Access comprehensive audio controls through the Settings panel in the Controls section:"}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"flex items-start space-x-2 text-sm",children:[u.jsx("div",{className:"w-2 h-2 rounded-full bg-[var(--mcb-accent-text-primary)] mt-2 flex-shrink-0"}),u.jsxs("div",{className:"text-left",children:[u.jsx("strong",{className:"text-white",children:"Voice:"})," ",u.jsx("span",{className:"text-mcb-secondary",children:"Choose from multiple instrument sounds"})]})]}),u.jsxs("div",{className:"flex items-start space-x-2 text-sm",children:[u.jsx("div",{className:"w-2 h-2 rounded-full bg-[var(--mcb-accent-text-primary)] mt-2 flex-shrink-0"}),u.jsxs("div",{className:"text-left",children:[u.jsx("strong",{className:"text-white",children:"Volume & Octave:"})," ",u.jsx("span",{className:"text-mcb-secondary",children:"Adjust overall volume and pitch range"})]})]}),u.jsxs("div",{className:"flex items-start space-x-2 text-sm",children:[u.jsx("div",{className:"w-2 h-2 rounded-full bg-[var(--mcb-accent-text-primary)] mt-2 flex-shrink-0"}),u.jsxs("div",{className:"text-left",children:[u.jsx("strong",{className:"text-white",children:"Effects:"})," ",u.jsx("span",{className:"text-mcb-secondary",children:"Add reverb, chorus, and delay"})]})]}),u.jsxs("div",{className:"flex items-start space-x-2 text-sm",children:[u.jsx("div",{className:"w-2 h-2 rounded-full bg-[var(--mcb-accent-text-primary)] mt-2 flex-shrink-0"}),u.jsxs("div",{className:"text-left",children:[u.jsx("strong",{className:"text-white",children:"Equalizer:"})," ",u.jsx("span",{className:"text-mcb-secondary",children:"Shape the sound with bass, mid, and treble controls"})]})]}),u.jsxs("div",{className:"flex items-start space-x-2 text-sm",children:[u.jsx("div",{className:"w-2 h-2 rounded-full bg-[var(--mcb-accent-text-primary)] mt-2 flex-shrink-0"}),u.jsxs("div",{className:"text-left",children:[u.jsx("strong",{className:"text-white",children:"Note Duration:"})," ",u.jsx("span",{className:"text-mcb-secondary",children:"Control how long notes ring out"})]})]})]})]})]})}),u.jsx(rr,{title:"Pattern Sequencer",children:u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"p-4 rounded-lg bg-mcb-secondary/30",children:[u.jsx("h5",{className:"text-white font-semibold mb-3 text-sm text-left",children:"Understanding Patterns"}),u.jsx("p",{className:"text-sm mb-3 text-left",children:"Patterns control which chord tones play at different time steps. Each step can be:"}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"flex items-center space-x-3 p-2 rounded-md bg-mcb-primary",children:[u.jsx("code",{className:"px-2 py-1 bg-gray-700 rounded text-xs font-mono text-white min-w-[4rem] text-center",children:""}),u.jsx("span",{className:"text-sm text-mcb-secondary text-left",children:"Rest/silence (represented as 'x' in custom patterns)"})]}),u.jsxs("div",{className:"flex items-center space-x-3 p-2 rounded-md bg-mcb-primary",children:[u.jsx("code",{className:"px-2 py-1 bg-gray-700 rounded text-xs font-mono text-white min-w-[4rem] text-center",children:"1, 2, 3..."}),u.jsx("span",{className:"text-sm text-mcb-secondary text-left",children:"Play the 1st, 2nd, 3rd... note of the chord"})]}),u.jsxs("div",{className:"flex items-center space-x-3 p-2 rounded-md bg-mcb-primary",children:[u.jsx("code",{className:"px-2 py-1 bg-gray-700 rounded text-xs font-mono text-white min-w-[4rem] text-center",children:"1, 2..."}),u.jsx("span",{className:"text-sm text-mcb-secondary text-left",children:"Play the note one octave higher ('+' in custom patterns)"})]})]})]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[u.jsxs("div",{className:"p-4 rounded-lg bg-mcb-secondary/30",children:[u.jsx("h5",{className:"text-white font-semibold mb-3 text-sm text-left",children:"Pattern Controls"}),u.jsxs("div",{className:"space-y-2 text-sm text-left",children:[u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Add/Remove Steps:"})," Use the +/- buttons to change pattern length (1-16 steps)"]}),u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Pattern Presets:"})," Choose from pre-built patterns organized by category and note count"]}),u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Custom Patterns:"}),' Enter your own pattern using notation like "1,x,3,2+" and click Apply']}),u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Visual Feedback:"})," Blue indicator shows the currently playing step"]})]})]}),u.jsxs("div",{className:"p-4 rounded-lg bg-mcb-secondary/30",children:[u.jsx("h5",{className:"text-white font-semibold mb-3 text-sm text-left",children:"Timing Controls"}),u.jsxs("div",{className:"space-y-2 text-sm text-left",children:[u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"BPM:"})," Set tempo from 60-200 beats per minute"]}),u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Subdivision:"})," Choose note duration (32nd, 16th, 8th, quarter, half notes)"]}),u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Swing:"})," Add groove by delaying alternate notes (0-50%)"]})]})]})]}),u.jsxs("div",{className:"p-4 rounded-lg bg-mcb-secondary/30",children:[u.jsx("h5",{className:"text-white font-semibold mb-3 text-sm text-left",children:"Chord-Specific Patterns"}),u.jsx("p",{className:"text-sm mb-3 text-left",children:"Each chord in your sequence can have its own unique pattern:"}),u.jsxs("div",{className:"space-y-2 text-sm text-left",children:[u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Global Pattern:"}),' The default pattern that plays when no chord is selected (shown with cyan "Global Pattern" label)']}),u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Chord Pattern:"})," Select a chord from your sequence to edit its specific pattern (shown with purple chord name label)"]}),u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Automatic Switching:"})," The sequencer automatically uses each chord's pattern during playback"]}),u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Visual Indicators:"})," Pattern editor shows which chord you're currently editing"]})]})]}),u.jsxs("div",{className:"p-4 rounded-lg bg-mcb-secondary/30",children:[u.jsx("h5",{className:"text-white font-semibold mb-3 text-sm text-left",children:"Pattern Presets"}),u.jsx("p",{className:"text-sm mb-3 text-left",children:"Browse categorized pattern presets to quickly create common rhythmic patterns:"}),u.jsxs("div",{className:"space-y-2 text-sm text-left",children:[u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Filter by Note Count:"}),' Enable "Hide patterns with fewer notes" to show only patterns that use all available chord notes']}),u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Categories:"})," Patterns are organized by style (Arpeggios, Rhythmic, Bass Lines, etc.)"]}),u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Visual Preview:"})," Each preset shows its pattern notation before applying"]})]})]})]})}),u.jsx(rr,{title:"MIDI Recording & Export",children:u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"p-4 rounded-lg bg-mcb-secondary/30",children:[u.jsx("h5",{className:"text-white font-semibold mb-3 text-sm text-left",children:"Automatic MIDI Recording"}),u.jsx("p",{className:"text-sm mb-3 text-left",children:"The app automatically records your sequencer performances as standard MIDI files that you can export and use in any DAW or music software."}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"flex items-start space-x-3 p-2 rounded-md bg-mcb-primary",children:[u.jsx("div",{className:"w-2 h-2 rounded-full bg-[var(--mcb-accent-text-primary)] mt-2 flex-shrink-0"}),u.jsxs("div",{className:"text-sm text-left",children:[u.jsx("strong",{className:"text-white",children:"Start Recording:"})," ",u.jsx("span",{className:"text-mcb-secondary",children:"Recording begins automatically when you press Play on the sequencer"})]})]}),u.jsxs("div",{className:"flex items-start space-x-3 p-2 rounded-md bg-mcb-primary",children:[u.jsx("div",{className:"w-2 h-2 rounded-full bg-[var(--mcb-accent-text-primary)] mt-2 flex-shrink-0"}),u.jsxs("div",{className:"text-sm text-left",children:[u.jsx("strong",{className:"text-white",children:"Recording Indicator:"})," ",u.jsx("span",{className:"text-mcb-secondary",children:'A red pulsing indicator appears showing "Recording MIDI" during playback'})]})]}),u.jsxs("div",{className:"flex items-start space-x-3 p-2 rounded-md bg-mcb-primary",children:[u.jsx("div",{className:"w-2 h-2 rounded-full bg-[var(--mcb-accent-text-primary)] mt-2 flex-shrink-0"}),u.jsxs("div",{className:"text-sm text-left",children:[u.jsx("strong",{className:"text-white",children:"Stop Recording:"})," ",u.jsx("span",{className:"text-mcb-secondary",children:"Recording stops when you press Stop or Pause on the sequencer"})]})]}),u.jsxs("div",{className:"flex items-start space-x-3 p-2 rounded-md bg-mcb-primary",children:[u.jsx("div",{className:"w-2 h-2 rounded-full bg-[var(--mcb-accent-text-primary)] mt-2 flex-shrink-0"}),u.jsxs("div",{className:"text-sm text-left",children:[u.jsx("strong",{className:"text-white",children:"Save MIDI:"})," ",u.jsx("span",{className:"text-mcb-secondary",children:'After stopping, a green "Save MIDI" button appears - click to download your recording'})]})]})]})]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[u.jsxs("div",{className:"p-4 rounded-lg bg-mcb-secondary/30",children:[u.jsx("h5",{className:"text-white font-semibold mb-3 text-sm text-left",children:"What Gets Recorded"}),u.jsxs("div",{className:"space-y-2 text-sm text-left",children:[u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Note Events:"})," All notes played by the sequencer with accurate timing"]}),u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Tempo:"})," Your BPM setting is preserved in the MIDI file"]}),u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Duration:"})," Note lengths based on your note duration setting"]}),u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Patterns:"})," Records the full sequence including chord-specific patterns"]})]})]}),u.jsxs("div",{className:"p-4 rounded-lg bg-mcb-secondary/30",children:[u.jsx("h5",{className:"text-white font-semibold mb-3 text-sm text-left",children:"Using MIDI Files"}),u.jsxs("div",{className:"space-y-2 text-sm text-left",children:[u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Import to DAW:"})," Drag the .mid file into any music production software"]}),u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Change Instruments:"})," Assign any virtual instrument or sound"]}),u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Further Editing:"})," Edit timing, velocities, and notes in your DAW"]}),u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Timestamped Files:"})," Each export is automatically named with a timestamp"]})]})]})]}),u.jsxs("div",{className:"p-4 rounded-lg bg-mcb-secondary/30",children:[u.jsx("h5",{className:"text-white font-semibold mb-3 text-sm text-left",children:"Tips for MIDI Recording"}),u.jsxs("div",{className:"space-y-2 text-sm text-left",children:[u.jsx("div",{children:"Set your desired BPM and timing before starting playback"}),u.jsx("div",{children:"Let the sequence play through completely for the best recording"}),u.jsx("div",{children:"Multiple recordings can be made - each creates a new file"}),u.jsx("div",{children:'The "Save MIDI" button remains available until you start a new recording'})]})]})]})}),u.jsx(rr,{title:"Chord Explorer & Sequences",children:u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[u.jsxs("div",{className:"p-4 rounded-lg bg-mcb-secondary/30",children:[u.jsx("h5",{className:"text-white font-semibold mb-3 text-sm text-left",children:"Finding Chords"}),u.jsx("p",{className:"text-sm mb-3 text-left",children:"The Chord Explorer shows all chords that fit your selected key and mode. You can:"}),u.jsxs("div",{className:"space-y-2 text-sm text-left",children:[u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Filter by root note"})," to find specific chord types"]}),u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Search"})," for chord names or note combinations"]}),u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Click to preview"})," any chord"]}),u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Click "})," to see the individual notes in a chord"]})]})]}),u.jsxs("div",{className:"p-4 rounded-lg bg-mcb-secondary/30",children:[u.jsx("h5",{className:"text-white font-semibold mb-3 text-sm text-left",children:"Building Sequences"}),u.jsxs("p",{className:"text-sm mb-3 text-left",children:["Add chords to your sequence using the ",u.jsx("span",{className:"text-green-400 font-bold",children:"+"})," button. Your chord sequence appears at the bottom where you can:"]}),u.jsxs("div",{className:"space-y-2 text-sm text-left",children:[u.jsx("div",{children:"Click any chord to play it immediately"}),u.jsx("div",{children:"Use numbers 1-9 to jump between chords"}),u.jsx("div",{children:"Toggle Delete mode to remove unwanted chords"}),u.jsx("div",{children:"Clear all chords to start fresh"}),u.jsxs("div",{children:[u.jsx("strong",{className:"text-[var(--mcb-accent-text-primary)]",children:"Click the gear icon"})," to enter Edit mode and modify chords"]})]})]})]})}),u.jsx(rr,{title:"Chord Editing",children:u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"p-4 rounded-lg bg-mcb-secondary/30",children:[u.jsx("h5",{className:"text-white font-semibold mb-3 text-sm text-left",children:"Edit Mode"}),u.jsxs("p",{className:"text-sm mb-3 text-left",children:["Click the ",u.jsx("span",{className:"text-[var(--mcb-accent-text-primary)] font-bold",children:"gear icon"})," next to your chord sequence to enter Edit Mode. In this mode, you can:"]}),u.jsxs("div",{className:"space-y-2 text-sm text-left",children:[u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Click any chord"})," to open the chord editor"]}),u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Modify chord voicings"})," by reordering notes"]}),u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Add slash chords"})," to change the bass note"]}),u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Preview changes"})," before saving them"]})]})]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[u.jsxs("div",{className:"p-4 rounded-lg bg-mcb-secondary/30",children:[u.jsx("h5",{className:"text-white font-semibold mb-3 text-sm text-left",children:"Slash Chords"}),u.jsx("p",{className:"text-sm mb-3 text-left",children:"Create slash chords (like C/E) by specifying a bass note:"}),u.jsxs("div",{className:"space-y-2 text-sm text-left",children:[u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Bass Note Field:"})," Enter a note name (e.g., E, Gb, C)"]}),u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Automatic Voicing:"})," The bass note moves to the lowest position"]}),u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Chord Name:"})," Updates to show the slash notation (C/E)"]}),u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Remove Bass:"})," Clear the field to return to original chord"]})]})]}),u.jsxs("div",{className:"p-4 rounded-lg bg-mcb-secondary/30",children:[u.jsx("h5",{className:"text-white font-semibold mb-3 text-sm text-left",children:"Note Reordering"}),u.jsx("p",{className:"text-sm mb-3 text-left",children:"Change the order of chord notes for different voicings:"}),u.jsxs("div",{className:"space-y-2 text-sm text-left",children:[u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Drag & Drop:"})," Drag notes to reorder them"]}),u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Arrow Buttons:"})," Use up/down arrows to move notes"]}),u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Auto-Detection:"})," Slash note updates automatically when you change the bass"]}),u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Visual Feedback:"})," Slash notes are highlighted in amber"]})]})]})]}),u.jsxs("div",{className:"p-4 rounded-lg bg-mcb-secondary/30",children:[u.jsx("h5",{className:"text-white font-semibold mb-3 text-sm text-left",children:"Editor Controls"}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[u.jsxs("div",{className:"space-y-2 text-sm text-left",children:[u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Preview:"})," Click the play button to hear your changes"]}),u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Save:"})," Green checkmark to confirm edits"]}),u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Cancel:"})," Discard changes and close editor"]})]}),u.jsxs("div",{className:"space-y-2 text-sm text-left",children:[u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Original Notes:"})," Editor preserves original chord voicing"]}),u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Real-time Updates:"})," Changes reflect immediately in the editor"]}),u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Full-screen:"})," Editor takes over the entire interface for focused editing"]})]})]})]})]})}),u.jsx(rr,{title:"Live Mode",children:u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"p-4 rounded-lg bg-mcb-secondary/30",children:[u.jsx("h5",{className:"text-white font-semibold mb-3 text-sm text-left",children:"Performance Mode"}),u.jsx("p",{className:"text-sm mb-3 text-left",children:"Live Mode expands your chord sequence into a full-screen performance interface perfect for:"}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"flex items-start space-x-3 p-2 rounded-md bg-mcb-primary",children:[u.jsx("div",{className:"w-2 h-2 rounded-full bg-[var(--mcb-accent-text-primary)] mt-2 flex-shrink-0"}),u.jsxs("div",{className:"text-sm text-left",children:[u.jsx("strong",{className:"text-white",children:"Live performance:"})," ",u.jsx("span",{className:"text-mcb-secondary",children:"Large, touch-friendly chord buttons"})]})]}),u.jsxs("div",{className:"flex items-start space-x-3 p-2 rounded-md bg-mcb-primary",children:[u.jsx("div",{className:"w-2 h-2 rounded-full bg-[var(--mcb-accent-text-primary)] mt-2 flex-shrink-0"}),u.jsxs("div",{className:"text-sm text-left",children:[u.jsx("strong",{className:"text-white",children:"Practice sessions:"})," ",u.jsx("span",{className:"text-mcb-secondary",children:"Easy chord switching with visual feedback"})]})]}),u.jsxs("div",{className:"flex items-start space-x-3 p-2 rounded-md bg-mcb-primary",children:[u.jsx("div",{className:"w-2 h-2 rounded-full bg-[var(--mcb-accent-text-primary)] mt-2 flex-shrink-0"}),u.jsxs("div",{className:"text-sm text-left",children:[u.jsx("strong",{className:"text-white",children:"Composition:"})," ",u.jsx("span",{className:"text-mcb-secondary",children:"Hear chord progressions in real-time"})]})]})]})]}),u.jsxs("div",{className:"p-4 rounded-lg bg-mcb-secondary/30",children:[u.jsx("h5",{className:"text-white font-semibold mb-3 text-sm text-left",children:"Using Live Mode"}),u.jsxs("div",{className:"space-y-2 text-sm text-left",children:[u.jsx("div",{children:'Click "Expand" in the chord sequence to enter Live Mode'}),u.jsx("div",{children:"Use keyboard numbers 1-9 or click/tap chord buttons"}),u.jsx("div",{children:"The sequencer continues playing your patterns"}),u.jsx("div",{children:"Active chord is highlighted in blue"})]})]})]})}),u.jsxs(rr,{title:"Interface Tips",children:[u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[u.jsx("div",{className:"space-y-4",children:u.jsxs("div",{className:"p-4 rounded-lg bg-mcb-secondary/30",children:[u.jsx("h5",{className:"text-white font-semibold mb-3 text-sm text-left",children:"Navigation"}),u.jsxs("div",{className:"space-y-2 text-sm text-left",children:[u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Sequencer Header:"})," Click to show/hide the pattern editor"]}),u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Settings Panels:"})," Most sections have expandable settings"]}),u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Status Indicators:"})," Top bar shows current key, mode, and playback status"]})]})]})}),u.jsx("div",{className:"space-y-4",children:u.jsxs("div",{className:"p-4 rounded-lg bg-mcb-secondary/30",children:[u.jsx("h5",{className:"text-white font-semibold mb-3 text-sm text-left",children:"Visual Feedback"}),u.jsxs("div",{className:"space-y-2 text-sm text-left",children:[u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Piano Keys:"})," Scale notes are highlighted in blue"]}),u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Chord Tones:"})," Active chord notes show in brighter colors"]}),u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Step Indicator:"})," Shows current position in the pattern"]}),u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Animations:"})," Visual feedback for chord changes and playback"]})]})]})})]}),u.jsxs("div",{className:"p-4 rounded-lg bg-mcb-secondary/30 mt-4",children:[u.jsx("h5",{className:"text-white font-semibold mb-3 text-sm text-left",children:"Responsive Design"}),u.jsx("p",{className:"text-sm text-left",children:"The interface adapts to different screen sizes. On mobile devices, some controls are simplified and touch-optimized for better usability."})]})]}),u.jsx(rr,{title:"Troubleshooting",children:u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[u.jsxs("div",{className:"p-4 rounded-lg bg-mcb-secondary/30",children:[u.jsx("h5",{className:"text-white font-semibold mb-3 text-sm text-left",children:"Audio Issues"}),u.jsxs("div",{className:"space-y-2 text-sm text-left",children:[u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"No sound:"})," Check device volume and ensure audio isn't muted"]}),u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"iOS devices:"})," Tap any button first to initialize audio"]}),u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Distorted audio:"})," Lower the volume setting in piano controls"]})]})]}),u.jsxs("div",{className:"p-4 rounded-lg bg-mcb-secondary/30",children:[u.jsx("h5",{className:"text-white font-semibold mb-3 text-sm text-left",children:"Performance"}),u.jsxs("div",{className:"space-y-2 text-sm text-left",children:[u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Lag or glitches:"})," Close other browser tabs using audio"]}),u.jsxs("div",{children:[u.jsx("strong",{className:"text-white",children:"Mobile performance:"})," Use lower reverb/effect settings for better performance"]})]})]})]})}),u.jsx("div",{className:"mt-8 pt-6 border-t border-mcb-primary/50",children:u.jsx("p",{className:"text-xs text-mcb-tertiary text-left",children:"Need more help? Check the GitHub repository for detailed documentation and examples."})})]})}),ck=[{id:"default",name:"Default",description:"Classic blue and gray theme",colors:{primary:"#3b82f6",secondary:"#3d434f",accent:"#60a5fa"}},{id:"forest",name:"Forest",description:"Calming green and earth tones",colors:{primary:"#10b981",secondary:"#2d4436",accent:"#34d399"}},{id:"neon",name:"Neon",description:"Synthwave purple and pink vibes",colors:{primary:"#a855f7",secondary:"#2d1f3d",accent:"#c084fc"}},{id:"sunset",name:"Sunset",description:"Warm orange vibes for a cozy feel",colors:{primary:"#f97316",secondary:"#3d2a21",accent:"#fb923c"}}],uk=({isOpen:e,onClose:n})=>{const[r,s]=N.useState("default");N.useEffect(()=>{const c=localStorage.getItem("mcb-theme");c&&["default","forest","neon","sunset"].includes(c)&&(s(c),i(c))},[]);const i=c=>{document.documentElement.setAttribute("data-theme",c),localStorage.setItem("mcb-theme",c)},a=c=>{s(c),i(c)};return u.jsx(xf,{isOpen:e,onClose:n,title:"Theme Settings",className:"max-w-2xl",children:u.jsxs("div",{className:"p-6 space-y-6 overflow-y-auto max-h-[80vh]",children:[u.jsx("div",{className:"bg-mcb-primary rounded-lg border border-[var(--mcb-border-primary)] p-4",children:u.jsx("p",{className:"text-sm text-[var(--mcb-text-secondary)] text-left leading-relaxed",children:"Choose a color theme that suits your preference. Your selection will be saved and applied automatically when you return."})}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("h3",{className:"text-sm font-semibold text-white uppercase tracking-wide text-left",children:"Available Themes"}),u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:ck.map(c=>u.jsxs("button",{onClick:()=>a(c.id),className:`relative p-4 rounded-lg border-2 transition-all duration-200 text-left ${r===c.id?"border-[var(--mcb-accent-primary)] bg-[var(--mcb-bg-secondary)] shadow-lg shadow-[var(--mcb-accent-light)]":" border-[var(--mcb-border-primary)] bg-[var(--mcb-bg-primary)] hover:border-[var(--mcb-border-secondary)] hover:bg-[var(--mcb-bg-secondary)]"}`,children:[r===c.id&&u.jsxs("div",{className:"absolute top-2 right-2",children:[u.jsx("div",{className:"w-5 h-5 rounded-full bg-[var(--mcb-accent-primary)] flex items-center justify-center",children:u.jsx("svg",{className:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3",d:"M5 13l4 4L19 7"})})})," "]}),u.jsxs("div",{className:"mb-2 pr-6",children:[u.jsx("h4",{className:"text-sm font-bold text-white",children:c.name}),u.jsx("p",{className:"text-xs text-[var(--mcb-text-tertiary)] mt-0.5 leading-tight",children:c.description})]}),u.jsxs("div",{className:"flex items-center space-x-2 mt-3",children:[u.jsxs("div",{className:"flex-1 space-y-1",children:[u.jsx("div",{className:"h-5 rounded border  border-[var(--mcb-border-primary)]",style:{backgroundColor:c.colors.primary},title:"Accent Color"}),u.jsx("div",{className:"h-3 rounded border  border-[var(--mcb-border-primary)]",style:{backgroundColor:c.colors.secondary},title:"Background Color"})]}),u.jsx("div",{className:"text-xs text-[var(--mcb-text-disabled)] flex-shrink-0",children:"Preview"})]})]},c.id))})]}),u.jsxs("div",{className:"bg-mcb-primary rounded-lg border  border-[var(--mcb-border-primary)] overflow-hidden",children:[u.jsx("div",{className:"bg-[var(--mcb-bg-tertiary)] px-4 py-3 border-b  border-[var(--mcb-border-primary)]",children:u.jsx("h4",{className:"text-sm font-semibold text-white uppercase tracking-wide",children:"Live Preview"})}),u.jsxs("div",{className:"p-4 space-y-3",children:[u.jsxs("div",{className:"bg-[var(--mcb-bg-secondary)] border border-[var(--mcb-border-primary)] rounded-lg p-3",children:[u.jsx("div",{className:"text-sm text-[var(--mcb-text-primary)] mb-2",children:"Sample Content"}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx(zt,{variant:"primary",size:"sm",children:"Accent"}),u.jsx(zt,{variant:"secondary",size:"sm",children:"Secondary"}),u.jsx(zt,{variant:"success",size:"sm",children:"Success"})]})]}),u.jsx("div",{className:"text-xs text-[var(--mcb-text-tertiary)] text-center",children:"This preview updates as you select different themes"})]})]}),u.jsx("div",{className:"pt-4 border-t  border-[var(--mcb-border-primary)]/50",children:u.jsx("p",{className:"text-xs text-[var(--mcb-text-primary)] text-left",children:" Your theme preference is saved locally and will persist between sessions."})})]})})},Av=()=>{const[e,n]=N.useState(!1),[r,s]=N.useState(!1),[i,a]=N.useState(!1),[c,d]=N.useState(!1),h=N.useRef(null),m=N.useRef(null),p=Qe(),{key:g,mode:y}=p;N.useEffect(()=>{const E=C=>{h.current&&m.current&&!h.current.contains(C.target)&&!m.current.contains(C.target)&&d(!1)};return document.addEventListener("mousedown",E),()=>document.removeEventListener("mousedown",E)},[]);const b=E=>{E(),d(!1)},w=()=>{s(!0)};return u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"bg-mcb-secondary border-b border-mcb-primary",children:u.jsx("div",{className:"relative",children:u.jsxs("div",{className:"flex items-center justify-between px-6 py-4",children:[u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsx(jd,{className:"mt-2"}),u.jsx("div",{className:"flex items-center space-x-3",children:u.jsxs("div",{className:"flex flex-col items-start",children:[u.jsx("h1",{className:"text-xl font-bold text-[var(--mcb-accent-primary)] tracking-tight leading-none",children:"modal"}),u.jsxs("div",{className:"flex items-center space-x-0.5",children:[u.jsx("span",{className:"text-xs text-mcb-tertiary font-medium uppercase tracking-widest",children:"chord"}),u.jsx("div",{className:"w-1 h-1 mr-[0.2em] bg-[var(--mcb-text-tertiary)]"}),u.jsx("span",{className:"text-xs text-mcb-tertiary font-medium uppercase tracking-widest",children:"buildr"})]})]})})]}),u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsxs("div",{className:"hidden sm:flex items-center space-x-2 text-sm",children:[u.jsx("div",{className:"px-2 py-0.5 bg-mcb-tertiary border border-mcb-primary rounded text-mcb-secondary font-mono",children:g}),u.jsx("div",{className:"w-px h-4 bg-[var(--mcb-text-subtle)]"}),u.jsx("div",{className:"px-2 py-1 bg-mcb-tertiary border border-mcb-primary rounded text-mcb-secondary text-xs font-mono",children:y})]}),u.jsxs("div",{className:"relative",children:[u.jsx("button",{ref:m,onClick:()=>d(!c),className:"w-9 h-9 flex items-center justify-center text-mcb-tertiary hover:text-mcb-primary hover:bg-mcb-hover rounded-lg transition-all duration-200 border border-transparent hover:border-mcb-primary",title:"Menu",children:u.jsx(ON,{className:"w-5 h-5"})}),c&&u.jsx("div",{ref:h,className:"absolute right-0 mt-2 w-64 bg-mcb-secondary border border-mcb-primary rounded-lg shadow-xl z-50 overflow-hidden",children:u.jsxs("div",{className:"py-2",children:[u.jsxs("button",{onClick:()=>b(()=>a(!0)),className:"w-full px-4 py-2.5 text-left flex items-center space-x-3 text-mcb-tertiary hover:text-mcb-primary hover:bg-mcb-hover transition-all duration-150",children:[u.jsx(ZN,{className:"w-4 h-4 flex-shrink-0"}),u.jsx("span",{className:"text-sm font-medium",children:"Theme"})]}),u.jsxs("button",{onClick:()=>b(()=>n(!0)),className:"w-full px-4 py-2.5 text-left flex items-center space-x-3 text-mcb-tertiary hover:text-mcb-primary hover:bg-mcb-hover transition-all duration-150",children:[u.jsx(LN,{className:"w-4 h-4 flex-shrink-0"}),u.jsx("span",{className:"text-sm font-medium",children:"About"})]}),u.jsxs("button",{onClick:()=>b(()=>s(!0)),className:"w-full px-4 py-2.5 text-left flex items-center space-x-3 text-mcb-tertiary hover:text-mcb-primary hover:bg-mcb-hover transition-all duration-150",children:[u.jsx(YN,{className:"w-4 h-4 flex-shrink-0"}),u.jsx("span",{className:"text-sm font-medium",children:"Help"})]})]})})]})]})]})})}),u.jsx(ak,{isOpen:e,onClose:()=>n(!1),onOpenHelp:w}),u.jsx(lk,{isOpen:r,onClose:()=>s(!1)}),u.jsx(uk,{isOpen:i,onClose:()=>a(!1)})]})},dk=(e,n,r,s)=>e?s:n!==null&&r[n]?.pattern?r[n].pattern:s,fk=({className:e=""})=>{const n=lt(p=>p.globalPatternState.isPlaying),r=lt(p=>p.globalPatternState.bpm),s=lt(p=>p.currentlyActivePattern),i=Re(p=>p.temporaryChord),a=Re(p=>p.activeChordIndex),c=Re(p=>p.addedChords),d=N.useMemo(()=>dk(i,a,c,s),[i,a,c,s]),h=N.useMemo(()=>a!==null?c[a]:null,[a,c]),m=N.useMemo(()=>d.join("-"),[d]);return d.length>0&&d.length,n?u.jsx("div",{className:ct("w-full px-2 mx-auto items-center",e),children:u.jsx("div",{className:"px-6 py-3 bg-green-900 bg-opacity-50 rounded-lg border border-green-700 w-full max-w-7xl mx-auto",children:u.jsxs("div",{className:"text-sm text-green-300 flex items-center justify-center space-x-4",children:[u.jsxs("div",{className:"flex items-center",children:[u.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse mr-2"}),u.jsx("span",{className:"font-medium",children:"Sequencer Active"})]}),u.jsxs("div",{className:"text-xs opacity-80 font-mono",children:[m," |",` ${r}`," BPM |",i&&u.jsx("span",{className:"ml-2 text-yellow-300",children:i.name}),!i&&h&&u.jsx("span",{className:"ml-2 text-[var(--mcb-purple-text)]",children:h.name})]})]})})}):null},hk=ve.memo(fk);function mk(){const{isLiveMode:e,handleChordClick:n,addChordClick:r}=yN(),s=N.useRef(null),i=N.useRef(!1),[a,c]=N.useState(!1),d=N.useRef(!1),h=N.useRef(null),m=N.useCallback(()=>{const g=window.innerHeight,y=parseFloat(getComputedStyle(document.documentElement).fontSize),b=g<35*y;b!==d.current&&(d.current=b,c(b),setTimeout(()=>{h.current&&(h.current.style.overflow="hidden",h.current.offsetHeight,h.current.style.overflow="auto")},50))},[]);N.useEffect(()=>{let g;const y=()=>{clearTimeout(g),g=setTimeout(m,100)},b=()=>{setTimeout(()=>{if(m(),h.current&&/Mobi|Android/i.test(navigator.userAgent)){const w=h.current;w.style.overflowY="hidden",w.style.touchAction="pan-y",w.offsetHeight,w.style.overflowY="auto",w.style.WebkitOverflowScrolling="touch"}},250)};return m(),window.addEventListener("resize",y,{passive:!0}),window.addEventListener("orientationchange",b,{passive:!0}),()=>{clearTimeout(g),window.removeEventListener("resize",y),window.removeEventListener("orientationchange",b)}},[m]),N.useEffect(()=>{if(h.current){const g=h.current;g.style.WebkitOverflowScrolling="touch",g.style.touchAction="pan-y",g.style.overscrollBehavior="contain"}},[a]);const p=async()=>{if(!i.current)try{await s.current?.play(),i.current=!0,document.removeEventListener("touchstart",p),document.removeEventListener("mousedown",p),document.removeEventListener("click",p)}catch(g){console.error("failed to initialize audio:",g)}};return N.useEffect(()=>(document.addEventListener("touchstart",p),document.addEventListener("mousedown",p),document.addEventListener("click",p),()=>{document.removeEventListener("touchstart",p),document.removeEventListener("mousedown",p),document.removeEventListener("click",p)}),[]),console.log("test App render"),u.jsxs("div",{className:"select-none text-center bg-mcb-app min-h-screen h-screen w-screen overflow-hidden flex flex-col",children:[u.jsx(xN,{}),u.jsx("audio",{ref:s,preload:"auto",children:u.jsx("source",{src:"/silence.mp3",type:"audio/mp3"})}),!a&&u.jsx("div",{className:"flex-shrink-0",children:u.jsx(Av,{})}),u.jsxs("div",{ref:h,className:"flex-1 overflow-y-auto flex flex-col",style:{WebkitOverflowScrolling:"touch",touchAction:"pan-y",overscrollBehavior:"contain"},children:[a&&u.jsx("div",{className:"flex-shrink-0",children:u.jsx(Av,{})}),u.jsxs("div",{className:`flex flex-col items-center justify-start text-[calc(10px+2vmin)] text-white p-4 space-y-4x pb-32 ${a?"":"mt-2"} ${e?"pointer-events-none opacity-30":""}`,children:[u.jsx("div",{className:"w-full max-w-7xl mb-6",children:u.jsx(qw,{hideConfigControls:!0})}),u.jsx(ik,{}),u.jsx(BC,{}),u.jsx(hk,{className:"mt-4"}),u.jsx("div",{className:"w-full max-w-7xl mb-20 mt-4",children:u.jsx(dw,{onChordClick:n,addChordClick:r})})]})]}),u.jsx("div",{className:"flex-shrink-0",children:u.jsx(ok,{})})]})}B0.createRoot(document.getElementById("root")).render(u.jsx(ve.StrictMode,{children:u.jsx(mk,{})}));export{YN as F,xf as M,u as j,N as r};
