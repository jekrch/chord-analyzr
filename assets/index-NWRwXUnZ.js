(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const a of l)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function o(l){const a={};return l.integrity&&(a.integrity=l.integrity),l.referrerPolicy&&(a.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?a.credentials="include":l.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(l){if(l.ep)return;l.ep=!0;const a=o(l);fetch(l.href,a)}})();var fa=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Pr(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function $g(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var n=e.default;if(typeof n=="function"){var o=function s(){var l=!1;try{l=this instanceof s}catch{}return l?Reflect.construct(n,arguments,this.constructor):n.apply(this,arguments)};o.prototype=n.prototype}else o={};return Object.defineProperty(o,"__esModule",{value:!0}),Object.keys(e).forEach(function(s){var l=Object.getOwnPropertyDescriptor(e,s);Object.defineProperty(o,s,l.get?l:{enumerable:!0,get:function(){return e[s]}})}),o}var Bc={exports:{}},Ns={},Fc={exports:{}},Te={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jp;function Ly(){if(jp)return Te;jp=1;var e=Symbol.for("react.element"),n=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),u=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),g=Symbol.iterator;function x(k){return k===null||typeof k!="object"?null:(k=g&&k[g]||k["@@iterator"],typeof k=="function"?k:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,E={};function S(k,U,ae){this.props=k,this.context=U,this.refs=E,this.updater=ae||b}S.prototype.isReactComponent={},S.prototype.setState=function(k,U){if(typeof k!="object"&&typeof k!="function"&&k!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,k,U,"setState")},S.prototype.forceUpdate=function(k){this.updater.enqueueForceUpdate(this,k,"forceUpdate")};function j(){}j.prototype=S.prototype;function R(k,U,ae){this.props=k,this.context=U,this.refs=E,this.updater=ae||b}var A=R.prototype=new j;A.constructor=R,C(A,S.prototype),A.isPureReactComponent=!0;var D=Array.isArray,I=Object.prototype.hasOwnProperty,T={current:null},M={key:!0,ref:!0,__self:!0,__source:!0};function _(k,U,ae){var fe,ne={},de=null,Ee=null;if(U!=null)for(fe in U.ref!==void 0&&(Ee=U.ref),U.key!==void 0&&(de=""+U.key),U)I.call(U,fe)&&!M.hasOwnProperty(fe)&&(ne[fe]=U[fe]);var ge=arguments.length-2;if(ge===1)ne.children=ae;else if(1<ge){for(var le=Array(ge),pe=0;pe<ge;pe++)le[pe]=arguments[pe+2];ne.children=le}if(k&&k.defaultProps)for(fe in ge=k.defaultProps,ge)ne[fe]===void 0&&(ne[fe]=ge[fe]);return{$$typeof:e,type:k,key:de,ref:Ee,props:ne,_owner:T.current}}function K(k,U){return{$$typeof:e,type:k.type,key:U,ref:k.ref,props:k.props,_owner:k._owner}}function J(k){return typeof k=="object"&&k!==null&&k.$$typeof===e}function te(k){var U={"=":"=0",":":"=2"};return"$"+k.replace(/[=:]/g,function(ae){return U[ae]})}var L=/\/+/g;function $(k,U){return typeof k=="object"&&k!==null&&k.key!=null?te(""+k.key):U.toString(36)}function G(k,U,ae,fe,ne){var de=typeof k;(de==="undefined"||de==="boolean")&&(k=null);var Ee=!1;if(k===null)Ee=!0;else switch(de){case"string":case"number":Ee=!0;break;case"object":switch(k.$$typeof){case e:case n:Ee=!0}}if(Ee)return Ee=k,ne=ne(Ee),k=fe===""?"."+$(Ee,0):fe,D(ne)?(ae="",k!=null&&(ae=k.replace(L,"$&/")+"/"),G(ne,U,ae,"",function(pe){return pe})):ne!=null&&(J(ne)&&(ne=K(ne,ae+(!ne.key||Ee&&Ee.key===ne.key?"":(""+ne.key).replace(L,"$&/")+"/")+k)),U.push(ne)),1;if(Ee=0,fe=fe===""?".":fe+":",D(k))for(var ge=0;ge<k.length;ge++){de=k[ge];var le=fe+$(de,ge);Ee+=G(de,U,ae,le,ne)}else if(le=x(k),typeof le=="function")for(k=le.call(k),ge=0;!(de=k.next()).done;)de=de.value,le=fe+$(de,ge++),Ee+=G(de,U,ae,le,ne);else if(de==="object")throw U=String(k),Error("Objects are not valid as a React child (found: "+(U==="[object Object]"?"object with keys {"+Object.keys(k).join(", ")+"}":U)+"). If you meant to render a collection of children, use an array instead.");return Ee}function X(k,U,ae){if(k==null)return k;var fe=[],ne=0;return G(k,fe,"","",function(de){return U.call(ae,de,ne++)}),fe}function ee(k){if(k._status===-1){var U=k._result;U=U(),U.then(function(ae){(k._status===0||k._status===-1)&&(k._status=1,k._result=ae)},function(ae){(k._status===0||k._status===-1)&&(k._status=2,k._result=ae)}),k._status===-1&&(k._status=0,k._result=U)}if(k._status===1)return k._result.default;throw k._result}var se={current:null},q={transition:null},Q={ReactCurrentDispatcher:se,ReactCurrentBatchConfig:q,ReactCurrentOwner:T};function Y(){throw Error("act(...) is not supported in production builds of React.")}return Te.Children={map:X,forEach:function(k,U,ae){X(k,function(){U.apply(this,arguments)},ae)},count:function(k){var U=0;return X(k,function(){U++}),U},toArray:function(k){return X(k,function(U){return U})||[]},only:function(k){if(!J(k))throw Error("React.Children.only expected to receive a single React element child.");return k}},Te.Component=S,Te.Fragment=o,Te.Profiler=l,Te.PureComponent=R,Te.StrictMode=s,Te.Suspense=h,Te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Q,Te.act=Y,Te.cloneElement=function(k,U,ae){if(k==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+k+".");var fe=C({},k.props),ne=k.key,de=k.ref,Ee=k._owner;if(U!=null){if(U.ref!==void 0&&(de=U.ref,Ee=T.current),U.key!==void 0&&(ne=""+U.key),k.type&&k.type.defaultProps)var ge=k.type.defaultProps;for(le in U)I.call(U,le)&&!M.hasOwnProperty(le)&&(fe[le]=U[le]===void 0&&ge!==void 0?ge[le]:U[le])}var le=arguments.length-2;if(le===1)fe.children=ae;else if(1<le){ge=Array(le);for(var pe=0;pe<le;pe++)ge[pe]=arguments[pe+2];fe.children=ge}return{$$typeof:e,type:k.type,key:ne,ref:de,props:fe,_owner:Ee}},Te.createContext=function(k){return k={$$typeof:u,_currentValue:k,_currentValue2:k,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},k.Provider={$$typeof:a,_context:k},k.Consumer=k},Te.createElement=_,Te.createFactory=function(k){var U=_.bind(null,k);return U.type=k,U},Te.createRef=function(){return{current:null}},Te.forwardRef=function(k){return{$$typeof:f,render:k}},Te.isValidElement=J,Te.lazy=function(k){return{$$typeof:m,_payload:{_status:-1,_result:k},_init:ee}},Te.memo=function(k,U){return{$$typeof:p,type:k,compare:U===void 0?null:U}},Te.startTransition=function(k){var U=q.transition;q.transition={};try{k()}finally{q.transition=U}},Te.unstable_act=Y,Te.useCallback=function(k,U){return se.current.useCallback(k,U)},Te.useContext=function(k){return se.current.useContext(k)},Te.useDebugValue=function(){},Te.useDeferredValue=function(k){return se.current.useDeferredValue(k)},Te.useEffect=function(k,U){return se.current.useEffect(k,U)},Te.useId=function(){return se.current.useId()},Te.useImperativeHandle=function(k,U,ae){return se.current.useImperativeHandle(k,U,ae)},Te.useInsertionEffect=function(k,U){return se.current.useInsertionEffect(k,U)},Te.useLayoutEffect=function(k,U){return se.current.useLayoutEffect(k,U)},Te.useMemo=function(k,U){return se.current.useMemo(k,U)},Te.useReducer=function(k,U,ae){return se.current.useReducer(k,U,ae)},Te.useRef=function(k){return se.current.useRef(k)},Te.useState=function(k){return se.current.useState(k)},Te.useSyncExternalStore=function(k,U,ae){return se.current.useSyncExternalStore(k,U,ae)},Te.useTransition=function(){return se.current.useTransition()},Te.version="18.3.1",Te}var kp;function za(){return kp||(kp=1,Fc.exports=Ly()),Fc.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ap;function By(){if(Ap)return Ns;Ap=1;var e=za(),n=Symbol.for("react.element"),o=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,l=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function u(f,h,p){var m,g={},x=null,b=null;p!==void 0&&(x=""+p),h.key!==void 0&&(x=""+h.key),h.ref!==void 0&&(b=h.ref);for(m in h)s.call(h,m)&&!a.hasOwnProperty(m)&&(g[m]=h[m]);if(f&&f.defaultProps)for(m in h=f.defaultProps,h)g[m]===void 0&&(g[m]=h[m]);return{$$typeof:n,type:f,key:x,ref:b,props:g,_owner:l.current}}return Ns.Fragment=o,Ns.jsx=u,Ns.jsxs=u,Ns}var Ip;function Fy(){return Ip||(Ip=1,Bc.exports=By()),Bc.exports}var c=Fy(),w=za();const we=Pr(w);var ha={},$c={exports:{}},zt={},Uc={exports:{}},zc={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pp;function $y(){return Pp||(Pp=1,function(e){function n(q,Q){var Y=q.length;q.push(Q);e:for(;0<Y;){var k=Y-1>>>1,U=q[k];if(0<l(U,Q))q[k]=Q,q[Y]=U,Y=k;else break e}}function o(q){return q.length===0?null:q[0]}function s(q){if(q.length===0)return null;var Q=q[0],Y=q.pop();if(Y!==Q){q[0]=Y;e:for(var k=0,U=q.length,ae=U>>>1;k<ae;){var fe=2*(k+1)-1,ne=q[fe],de=fe+1,Ee=q[de];if(0>l(ne,Y))de<U&&0>l(Ee,ne)?(q[k]=Ee,q[de]=Y,k=de):(q[k]=ne,q[fe]=Y,k=fe);else if(de<U&&0>l(Ee,Y))q[k]=Ee,q[de]=Y,k=de;else break e}}return Q}function l(q,Q){var Y=q.sortIndex-Q.sortIndex;return Y!==0?Y:q.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var u=Date,f=u.now();e.unstable_now=function(){return u.now()-f}}var h=[],p=[],m=1,g=null,x=3,b=!1,C=!1,E=!1,S=typeof setTimeout=="function"?setTimeout:null,j=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function A(q){for(var Q=o(p);Q!==null;){if(Q.callback===null)s(p);else if(Q.startTime<=q)s(p),Q.sortIndex=Q.expirationTime,n(h,Q);else break;Q=o(p)}}function D(q){if(E=!1,A(q),!C)if(o(h)!==null)C=!0,ee(I);else{var Q=o(p);Q!==null&&se(D,Q.startTime-q)}}function I(q,Q){C=!1,E&&(E=!1,j(_),_=-1),b=!0;var Y=x;try{for(A(Q),g=o(h);g!==null&&(!(g.expirationTime>Q)||q&&!te());){var k=g.callback;if(typeof k=="function"){g.callback=null,x=g.priorityLevel;var U=k(g.expirationTime<=Q);Q=e.unstable_now(),typeof U=="function"?g.callback=U:g===o(h)&&s(h),A(Q)}else s(h);g=o(h)}if(g!==null)var ae=!0;else{var fe=o(p);fe!==null&&se(D,fe.startTime-Q),ae=!1}return ae}finally{g=null,x=Y,b=!1}}var T=!1,M=null,_=-1,K=5,J=-1;function te(){return!(e.unstable_now()-J<K)}function L(){if(M!==null){var q=e.unstable_now();J=q;var Q=!0;try{Q=M(!0,q)}finally{Q?$():(T=!1,M=null)}}else T=!1}var $;if(typeof R=="function")$=function(){R(L)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,X=G.port2;G.port1.onmessage=L,$=function(){X.postMessage(null)}}else $=function(){S(L,0)};function ee(q){M=q,T||(T=!0,$())}function se(q,Q){_=S(function(){q(e.unstable_now())},Q)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(q){q.callback=null},e.unstable_continueExecution=function(){C||b||(C=!0,ee(I))},e.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):K=0<q?Math.floor(1e3/q):5},e.unstable_getCurrentPriorityLevel=function(){return x},e.unstable_getFirstCallbackNode=function(){return o(h)},e.unstable_next=function(q){switch(x){case 1:case 2:case 3:var Q=3;break;default:Q=x}var Y=x;x=Q;try{return q()}finally{x=Y}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(q,Q){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var Y=x;x=q;try{return Q()}finally{x=Y}},e.unstable_scheduleCallback=function(q,Q,Y){var k=e.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?k+Y:k):Y=k,q){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=Y+U,q={id:m++,callback:Q,priorityLevel:q,startTime:Y,expirationTime:U,sortIndex:-1},Y>k?(q.sortIndex=Y,n(p,q),o(h)===null&&q===o(p)&&(E?(j(_),_=-1):E=!0,se(D,Y-k))):(q.sortIndex=U,n(h,q),C||b||(C=!0,ee(I))),q},e.unstable_shouldYield=te,e.unstable_wrapCallback=function(q){var Q=x;return function(){var Y=x;x=Q;try{return q.apply(this,arguments)}finally{x=Y}}}}(zc)),zc}var Rp;function Uy(){return Rp||(Rp=1,Uc.exports=$y()),Uc.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tp;function zy(){if(Tp)return zt;Tp=1;var e=za(),n=Uy();function o(t){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+t,i=1;i<arguments.length;i++)r+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,l={};function a(t,r){u(t,r),u(t+"Capture",r)}function u(t,r){for(l[t]=r,t=0;t<r.length;t++)s.add(r[t])}var f=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},g={};function x(t){return h.call(g,t)?!0:h.call(m,t)?!1:p.test(t)?g[t]=!0:(m[t]=!0,!1)}function b(t,r,i,d){if(i!==null&&i.type===0)return!1;switch(typeof r){case"function":case"symbol":return!0;case"boolean":return d?!1:i!==null?!i.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function C(t,r,i,d){if(r===null||typeof r>"u"||b(t,r,i,d))return!0;if(d)return!1;if(i!==null)switch(i.type){case 3:return!r;case 4:return r===!1;case 5:return isNaN(r);case 6:return isNaN(r)||1>r}return!1}function E(t,r,i,d,v,y,N){this.acceptsBooleans=r===2||r===3||r===4,this.attributeName=d,this.attributeNamespace=v,this.mustUseProperty=i,this.propertyName=t,this.type=r,this.sanitizeURL=y,this.removeEmptyString=N}var S={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){S[t]=new E(t,0,!1,t,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var r=t[0];S[r]=new E(r,1,!1,t[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){S[t]=new E(t,2,!1,t.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){S[t]=new E(t,2,!1,t,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){S[t]=new E(t,3,!1,t.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(t){S[t]=new E(t,3,!0,t,null,!1,!1)}),["capture","download"].forEach(function(t){S[t]=new E(t,4,!1,t,null,!1,!1)}),["cols","rows","size","span"].forEach(function(t){S[t]=new E(t,6,!1,t,null,!1,!1)}),["rowSpan","start"].forEach(function(t){S[t]=new E(t,5,!1,t.toLowerCase(),null,!1,!1)});var j=/[\-:]([a-z])/g;function R(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var r=t.replace(j,R);S[r]=new E(r,1,!1,t,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var r=t.replace(j,R);S[r]=new E(r,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(t){var r=t.replace(j,R);S[r]=new E(r,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(t){S[t]=new E(t,1,!1,t.toLowerCase(),null,!1,!1)}),S.xlinkHref=new E("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(t){S[t]=new E(t,1,!1,t.toLowerCase(),null,!0,!0)});function A(t,r,i,d){var v=S.hasOwnProperty(r)?S[r]:null;(v!==null?v.type!==0:d||!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(C(r,i,v,d)&&(i=null),d||v===null?x(r)&&(i===null?t.removeAttribute(r):t.setAttribute(r,""+i)):v.mustUseProperty?t[v.propertyName]=i===null?v.type===3?!1:"":i:(r=v.attributeName,d=v.attributeNamespace,i===null?t.removeAttribute(r):(v=v.type,i=v===3||v===4&&i===!0?"":""+i,d?t.setAttributeNS(d,r,i):t.setAttribute(r,i))))}var D=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,I=Symbol.for("react.element"),T=Symbol.for("react.portal"),M=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),K=Symbol.for("react.profiler"),J=Symbol.for("react.provider"),te=Symbol.for("react.context"),L=Symbol.for("react.forward_ref"),$=Symbol.for("react.suspense"),G=Symbol.for("react.suspense_list"),X=Symbol.for("react.memo"),ee=Symbol.for("react.lazy"),se=Symbol.for("react.offscreen"),q=Symbol.iterator;function Q(t){return t===null||typeof t!="object"?null:(t=q&&t[q]||t["@@iterator"],typeof t=="function"?t:null)}var Y=Object.assign,k;function U(t){if(k===void 0)try{throw Error()}catch(i){var r=i.stack.trim().match(/\n( *(at )?)/);k=r&&r[1]||""}return`
`+k+t}var ae=!1;function fe(t,r){if(!t||ae)return"";ae=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(r)if(r=function(){throw Error()},Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(r,[])}catch(W){var d=W}Reflect.construct(t,[],r)}else{try{r.call()}catch(W){d=W}t.call(r.prototype)}else{try{throw Error()}catch(W){d=W}t()}}catch(W){if(W&&d&&typeof W.stack=="string"){for(var v=W.stack.split(`
`),y=d.stack.split(`
`),N=v.length-1,P=y.length-1;1<=N&&0<=P&&v[N]!==y[P];)P--;for(;1<=N&&0<=P;N--,P--)if(v[N]!==y[P]){if(N!==1||P!==1)do if(N--,P--,0>P||v[N]!==y[P]){var O=`
`+v[N].replace(" at new "," at ");return t.displayName&&O.includes("<anonymous>")&&(O=O.replace("<anonymous>",t.displayName)),O}while(1<=N&&0<=P);break}}}finally{ae=!1,Error.prepareStackTrace=i}return(t=t?t.displayName||t.name:"")?U(t):""}function ne(t){switch(t.tag){case 5:return U(t.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return t=fe(t.type,!1),t;case 11:return t=fe(t.type.render,!1),t;case 1:return t=fe(t.type,!0),t;default:return""}}function de(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case M:return"Fragment";case T:return"Portal";case K:return"Profiler";case _:return"StrictMode";case $:return"Suspense";case G:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case te:return(t.displayName||"Context")+".Consumer";case J:return(t._context.displayName||"Context")+".Provider";case L:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case X:return r=t.displayName||null,r!==null?r:de(t.type)||"Memo";case ee:r=t._payload,t=t._init;try{return de(t(r))}catch{}}return null}function Ee(t){var r=t.type;switch(t.tag){case 24:return"Cache";case 9:return(r.displayName||"Context")+".Consumer";case 10:return(r._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=r.render,t=t.displayName||t.name||"",r.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return r;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return de(r);case 8:return r===_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r}return null}function ge(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function le(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function pe(t){var r=le(t)?"checked":"value",i=Object.getOwnPropertyDescriptor(t.constructor.prototype,r),d=""+t[r];if(!t.hasOwnProperty(r)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var v=i.get,y=i.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return v.call(this)},set:function(N){d=""+N,y.call(this,N)}}),Object.defineProperty(t,r,{enumerable:i.enumerable}),{getValue:function(){return d},setValue:function(N){d=""+N},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function Re(t){t._valueTracker||(t._valueTracker=pe(t))}function De(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var i=r.getValue(),d="";return t&&(d=le(t)?t.checked?"true":"false":t.value),t=d,t!==i?(r.setValue(t),!0):!1}function xe(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Pe(t,r){var i=r.checked;return Y({},r,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:i??t._wrapperState.initialChecked})}function _e(t,r){var i=r.defaultValue==null?"":r.defaultValue,d=r.checked!=null?r.checked:r.defaultChecked;i=ge(r.value!=null?r.value:i),t._wrapperState={initialChecked:d,initialValue:i,controlled:r.type==="checkbox"||r.type==="radio"?r.checked!=null:r.value!=null}}function rt(t,r){r=r.checked,r!=null&&A(t,"checked",r,!1)}function nn(t,r){rt(t,r);var i=ge(r.value),d=r.type;if(i!=null)d==="number"?(i===0&&t.value===""||t.value!=i)&&(t.value=""+i):t.value!==""+i&&(t.value=""+i);else if(d==="submit"||d==="reset"){t.removeAttribute("value");return}r.hasOwnProperty("value")?pn(t,r.type,i):r.hasOwnProperty("defaultValue")&&pn(t,r.type,ge(r.defaultValue)),r.checked==null&&r.defaultChecked!=null&&(t.defaultChecked=!!r.defaultChecked)}function Ct(t,r,i){if(r.hasOwnProperty("value")||r.hasOwnProperty("defaultValue")){var d=r.type;if(!(d!=="submit"&&d!=="reset"||r.value!==void 0&&r.value!==null))return;r=""+t._wrapperState.initialValue,i||r===t.value||(t.value=r),t.defaultValue=r}i=t.name,i!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,i!==""&&(t.name=i)}function pn(t,r,i){(r!=="number"||xe(t.ownerDocument)!==t)&&(i==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+i&&(t.defaultValue=""+i))}var ot=Array.isArray;function lt(t,r,i,d){if(t=t.options,r){r={};for(var v=0;v<i.length;v++)r["$"+i[v]]=!0;for(i=0;i<t.length;i++)v=r.hasOwnProperty("$"+t[i].value),t[i].selected!==v&&(t[i].selected=v),v&&d&&(t[i].defaultSelected=!0)}else{for(i=""+ge(i),r=null,v=0;v<t.length;v++){if(t[v].value===i){t[v].selected=!0,d&&(t[v].defaultSelected=!0);return}r!==null||t[v].disabled||(r=t[v])}r!==null&&(r.selected=!0)}}function kn(t,r){if(r.dangerouslySetInnerHTML!=null)throw Error(o(91));return Y({},r,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Rr(t,r){var i=r.value;if(i==null){if(i=r.children,r=r.defaultValue,i!=null){if(r!=null)throw Error(o(92));if(ot(i)){if(1<i.length)throw Error(o(93));i=i[0]}r=i}r==null&&(r=""),i=r}t._wrapperState={initialValue:ge(i)}}function Tr(t,r){var i=ge(r.value),d=ge(r.defaultValue);i!=null&&(i=""+i,i!==t.value&&(t.value=i),r.defaultValue==null&&t.defaultValue!==i&&(t.defaultValue=i)),d!=null&&(t.defaultValue=""+d)}function ro(t){var r=t.textContent;r===t._wrapperState.initialValue&&r!==""&&r!==null&&(t.value=r)}function Un(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Gt(t,r){return t==null||t==="http://www.w3.org/1999/xhtml"?Un(r):t==="http://www.w3.org/2000/svg"&&r==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ht,An=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(r,i,d,v){MSApp.execUnsafeLocalFunction(function(){return t(r,i,d,v)})}:t}(function(t,r){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=r;else{for(Ht=Ht||document.createElement("div"),Ht.innerHTML="<svg>"+r.valueOf().toString()+"</svg>",r=Ht.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;r.firstChild;)t.appendChild(r.firstChild)}});function In(t,r){if(r){var i=t.firstChild;if(i&&i===t.lastChild&&i.nodeType===3){i.nodeValue=r;return}}t.textContent=r}var St={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},oo=["Webkit","ms","Moz","O"];Object.keys(St).forEach(function(t){oo.forEach(function(r){r=r+t.charAt(0).toUpperCase()+t.substring(1),St[r]=St[t]})});function so(t,r,i){return r==null||typeof r=="boolean"||r===""?"":i||typeof r!="number"||r===0||St.hasOwnProperty(t)&&St[t]?(""+r).trim():r+"px"}function io(t,r){t=t.style;for(var i in r)if(r.hasOwnProperty(i)){var d=i.indexOf("--")===0,v=so(i,r[i],d);i==="float"&&(i="cssFloat"),d?t.setProperty(i,v):t[i]=v}}var Mr=Y({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function rr(t,r){if(r){if(Mr[t]&&(r.children!=null||r.dangerouslySetInnerHTML!=null))throw Error(o(137,t));if(r.dangerouslySetInnerHTML!=null){if(r.children!=null)throw Error(o(60));if(typeof r.dangerouslySetInnerHTML!="object"||!("__html"in r.dangerouslySetInnerHTML))throw Error(o(61))}if(r.style!=null&&typeof r.style!="object")throw Error(o(62))}}function zn(t,r){if(t.indexOf("-")===-1)return typeof r.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Vn=null;function Or(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var or=null,Pn=null,z=null;function Z(t){if(t=as(t)){if(typeof or!="function")throw Error(o(280));var r=t.stateNode;r&&(r=ji(r),or(t.stateNode,t.type,r))}}function he(t){Pn?z?z.push(t):z=[t]:Pn=t}function Ie(){if(Pn){var t=Pn,r=z;if(z=Pn=null,Z(t),r)for(t=0;t<r.length;t++)Z(r[t])}}function Be(t,r){return t(r)}function $e(){}var Ye=!1;function It(t,r,i){if(Ye)return t(r,i);Ye=!0;try{return Be(t,r,i)}finally{Ye=!1,(Pn!==null||z!==null)&&($e(),Ie())}}function Ve(t,r){var i=t.stateNode;if(i===null)return null;var d=ji(i);if(d===null)return null;i=d[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(t=t.type,d=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!d;break e;default:t=!1}if(t)return null;if(i&&typeof i!="function")throw Error(o(231,r,typeof i));return i}var Ot=!1;if(f)try{var Qe={};Object.defineProperty(Qe,"passive",{get:function(){Ot=!0}}),window.addEventListener("test",Qe,Qe),window.removeEventListener("test",Qe,Qe)}catch{Ot=!1}function Et(t,r,i,d,v,y,N,P,O){var W=Array.prototype.slice.call(arguments,3);try{r.apply(i,W)}catch(oe){this.onError(oe)}}var _t=!1,Rn=null,Wt=!1,Gn=null,zo={onError:function(t){_t=!0,Rn=t}};function Hv(t,r,i,d,v,y,N,P,O){_t=!1,Rn=null,Et.apply(zo,arguments)}function Wv(t,r,i,d,v,y,N,P,O){if(Hv.apply(this,arguments),_t){if(_t){var W=Rn;_t=!1,Rn=null}else throw Error(o(198));Wt||(Wt=!0,Gn=W)}}function _r(t){var r=t,i=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,(r.flags&4098)!==0&&(i=r.return),t=r.return;while(t)}return r.tag===3?i:null}function Yd(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function Qd(t){if(_r(t)!==t)throw Error(o(188))}function qv(t){var r=t.alternate;if(!r){if(r=_r(t),r===null)throw Error(o(188));return r!==t?null:t}for(var i=t,d=r;;){var v=i.return;if(v===null)break;var y=v.alternate;if(y===null){if(d=v.return,d!==null){i=d;continue}break}if(v.child===y.child){for(y=v.child;y;){if(y===i)return Qd(v),t;if(y===d)return Qd(v),r;y=y.sibling}throw Error(o(188))}if(i.return!==d.return)i=v,d=y;else{for(var N=!1,P=v.child;P;){if(P===i){N=!0,i=v,d=y;break}if(P===d){N=!0,d=v,i=y;break}P=P.sibling}if(!N){for(P=y.child;P;){if(P===i){N=!0,i=y,d=v;break}if(P===d){N=!0,d=y,i=v;break}P=P.sibling}if(!N)throw Error(o(189))}}if(i.alternate!==d)throw Error(o(190))}if(i.tag!==3)throw Error(o(188));return i.stateNode.current===i?t:r}function Jd(t){return t=qv(t),t!==null?Xd(t):null}function Xd(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var r=Xd(t);if(r!==null)return r;t=t.sibling}return null}var Zd=n.unstable_scheduleCallback,ef=n.unstable_cancelCallback,Kv=n.unstable_shouldYield,Yv=n.unstable_requestPaint,et=n.unstable_now,Qv=n.unstable_getCurrentPriorityLevel,ol=n.unstable_ImmediatePriority,tf=n.unstable_UserBlockingPriority,ai=n.unstable_NormalPriority,Jv=n.unstable_LowPriority,nf=n.unstable_IdlePriority,li=null,Tn=null;function Xv(t){if(Tn&&typeof Tn.onCommitFiberRoot=="function")try{Tn.onCommitFiberRoot(li,t,void 0,(t.current.flags&128)===128)}catch{}}var mn=Math.clz32?Math.clz32:tx,Zv=Math.log,ex=Math.LN2;function tx(t){return t>>>=0,t===0?32:31-(Zv(t)/ex|0)|0}var ci=64,ui=4194304;function Vo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function di(t,r){var i=t.pendingLanes;if(i===0)return 0;var d=0,v=t.suspendedLanes,y=t.pingedLanes,N=i&268435455;if(N!==0){var P=N&~v;P!==0?d=Vo(P):(y&=N,y!==0&&(d=Vo(y)))}else N=i&~v,N!==0?d=Vo(N):y!==0&&(d=Vo(y));if(d===0)return 0;if(r!==0&&r!==d&&(r&v)===0&&(v=d&-d,y=r&-r,v>=y||v===16&&(y&4194240)!==0))return r;if((d&4)!==0&&(d|=i&16),r=t.entangledLanes,r!==0)for(t=t.entanglements,r&=d;0<r;)i=31-mn(r),v=1<<i,d|=t[i],r&=~v;return d}function nx(t,r){switch(t){case 1:case 2:case 4:return r+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function rx(t,r){for(var i=t.suspendedLanes,d=t.pingedLanes,v=t.expirationTimes,y=t.pendingLanes;0<y;){var N=31-mn(y),P=1<<N,O=v[N];O===-1?((P&i)===0||(P&d)!==0)&&(v[N]=nx(P,r)):O<=r&&(t.expiredLanes|=P),y&=~P}}function sl(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function rf(){var t=ci;return ci<<=1,(ci&4194240)===0&&(ci=64),t}function il(t){for(var r=[],i=0;31>i;i++)r.push(t);return r}function Go(t,r,i){t.pendingLanes|=r,r!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,r=31-mn(r),t[r]=i}function ox(t,r){var i=t.pendingLanes&~r;t.pendingLanes=r,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=r,t.mutableReadLanes&=r,t.entangledLanes&=r,r=t.entanglements;var d=t.eventTimes;for(t=t.expirationTimes;0<i;){var v=31-mn(i),y=1<<v;r[v]=0,d[v]=-1,t[v]=-1,i&=~y}}function al(t,r){var i=t.entangledLanes|=r;for(t=t.entanglements;i;){var d=31-mn(i),v=1<<d;v&r|t[d]&r&&(t[d]|=r),i&=~v}}var ze=0;function of(t){return t&=-t,1<t?4<t?(t&268435455)!==0?16:536870912:4:1}var sf,ll,af,lf,cf,cl=!1,fi=[],sr=null,ir=null,ar=null,Ho=new Map,Wo=new Map,lr=[],sx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function uf(t,r){switch(t){case"focusin":case"focusout":sr=null;break;case"dragenter":case"dragleave":ir=null;break;case"mouseover":case"mouseout":ar=null;break;case"pointerover":case"pointerout":Ho.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Wo.delete(r.pointerId)}}function qo(t,r,i,d,v,y){return t===null||t.nativeEvent!==y?(t={blockedOn:r,domEventName:i,eventSystemFlags:d,nativeEvent:y,targetContainers:[v]},r!==null&&(r=as(r),r!==null&&ll(r)),t):(t.eventSystemFlags|=d,r=t.targetContainers,v!==null&&r.indexOf(v)===-1&&r.push(v),t)}function ix(t,r,i,d,v){switch(r){case"focusin":return sr=qo(sr,t,r,i,d,v),!0;case"dragenter":return ir=qo(ir,t,r,i,d,v),!0;case"mouseover":return ar=qo(ar,t,r,i,d,v),!0;case"pointerover":var y=v.pointerId;return Ho.set(y,qo(Ho.get(y)||null,t,r,i,d,v)),!0;case"gotpointercapture":return y=v.pointerId,Wo.set(y,qo(Wo.get(y)||null,t,r,i,d,v)),!0}return!1}function df(t){var r=Lr(t.target);if(r!==null){var i=_r(r);if(i!==null){if(r=i.tag,r===13){if(r=Yd(i),r!==null){t.blockedOn=r,cf(t.priority,function(){af(i)});return}}else if(r===3&&i.stateNode.current.memoizedState.isDehydrated){t.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}t.blockedOn=null}function hi(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var i=dl(t.domEventName,t.eventSystemFlags,r[0],t.nativeEvent);if(i===null){i=t.nativeEvent;var d=new i.constructor(i.type,i);Vn=d,i.target.dispatchEvent(d),Vn=null}else return r=as(i),r!==null&&ll(r),t.blockedOn=i,!1;r.shift()}return!0}function ff(t,r,i){hi(t)&&i.delete(r)}function ax(){cl=!1,sr!==null&&hi(sr)&&(sr=null),ir!==null&&hi(ir)&&(ir=null),ar!==null&&hi(ar)&&(ar=null),Ho.forEach(ff),Wo.forEach(ff)}function Ko(t,r){t.blockedOn===r&&(t.blockedOn=null,cl||(cl=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,ax)))}function Yo(t){function r(v){return Ko(v,t)}if(0<fi.length){Ko(fi[0],t);for(var i=1;i<fi.length;i++){var d=fi[i];d.blockedOn===t&&(d.blockedOn=null)}}for(sr!==null&&Ko(sr,t),ir!==null&&Ko(ir,t),ar!==null&&Ko(ar,t),Ho.forEach(r),Wo.forEach(r),i=0;i<lr.length;i++)d=lr[i],d.blockedOn===t&&(d.blockedOn=null);for(;0<lr.length&&(i=lr[0],i.blockedOn===null);)df(i),i.blockedOn===null&&lr.shift()}var ao=D.ReactCurrentBatchConfig,pi=!0;function lx(t,r,i,d){var v=ze,y=ao.transition;ao.transition=null;try{ze=1,ul(t,r,i,d)}finally{ze=v,ao.transition=y}}function cx(t,r,i,d){var v=ze,y=ao.transition;ao.transition=null;try{ze=4,ul(t,r,i,d)}finally{ze=v,ao.transition=y}}function ul(t,r,i,d){if(pi){var v=dl(t,r,i,d);if(v===null)kl(t,r,d,mi,i),uf(t,d);else if(ix(v,t,r,i,d))d.stopPropagation();else if(uf(t,d),r&4&&-1<sx.indexOf(t)){for(;v!==null;){var y=as(v);if(y!==null&&sf(y),y=dl(t,r,i,d),y===null&&kl(t,r,d,mi,i),y===v)break;v=y}v!==null&&d.stopPropagation()}else kl(t,r,d,null,i)}}var mi=null;function dl(t,r,i,d){if(mi=null,t=Or(d),t=Lr(t),t!==null)if(r=_r(t),r===null)t=null;else if(i=r.tag,i===13){if(t=Yd(r),t!==null)return t;t=null}else if(i===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null);return mi=t,null}function hf(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Qv()){case ol:return 1;case tf:return 4;case ai:case Jv:return 16;case nf:return 536870912;default:return 16}default:return 16}}var cr=null,fl=null,gi=null;function pf(){if(gi)return gi;var t,r=fl,i=r.length,d,v="value"in cr?cr.value:cr.textContent,y=v.length;for(t=0;t<i&&r[t]===v[t];t++);var N=i-t;for(d=1;d<=N&&r[i-d]===v[y-d];d++);return gi=v.slice(t,1<d?1-d:void 0)}function vi(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function xi(){return!0}function mf(){return!1}function qt(t){function r(i,d,v,y,N){this._reactName=i,this._targetInst=v,this.type=d,this.nativeEvent=y,this.target=N,this.currentTarget=null;for(var P in t)t.hasOwnProperty(P)&&(i=t[P],this[P]=i?i(y):y[P]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?xi:mf,this.isPropagationStopped=mf,this}return Y(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=xi)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=xi)},persist:function(){},isPersistent:xi}),r}var lo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hl=qt(lo),Qo=Y({},lo,{view:0,detail:0}),ux=qt(Qo),pl,ml,Jo,yi=Y({},Qo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vl,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Jo&&(Jo&&t.type==="mousemove"?(pl=t.screenX-Jo.screenX,ml=t.screenY-Jo.screenY):ml=pl=0,Jo=t),pl)},movementY:function(t){return"movementY"in t?t.movementY:ml}}),gf=qt(yi),dx=Y({},yi,{dataTransfer:0}),fx=qt(dx),hx=Y({},Qo,{relatedTarget:0}),gl=qt(hx),px=Y({},lo,{animationName:0,elapsedTime:0,pseudoElement:0}),mx=qt(px),gx=Y({},lo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),vx=qt(gx),xx=Y({},lo,{data:0}),vf=qt(xx),yx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bx={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wx={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Nx(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=wx[t])?!!r[t]:!1}function vl(){return Nx}var Cx=Y({},Qo,{key:function(t){if(t.key){var r=yx[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=vi(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?bx[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vl,charCode:function(t){return t.type==="keypress"?vi(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?vi(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Sx=qt(Cx),Ex=Y({},yi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),xf=qt(Ex),Dx=Y({},Qo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vl}),jx=qt(Dx),kx=Y({},lo,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ax=qt(kx),Ix=Y({},yi,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Px=qt(Ix),Rx=[9,13,27,32],xl=f&&"CompositionEvent"in window,Xo=null;f&&"documentMode"in document&&(Xo=document.documentMode);var Tx=f&&"TextEvent"in window&&!Xo,yf=f&&(!xl||Xo&&8<Xo&&11>=Xo),bf=" ",wf=!1;function Nf(t,r){switch(t){case"keyup":return Rx.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Cf(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var co=!1;function Mx(t,r){switch(t){case"compositionend":return Cf(r);case"keypress":return r.which!==32?null:(wf=!0,bf);case"textInput":return t=r.data,t===bf&&wf?null:t;default:return null}}function Ox(t,r){if(co)return t==="compositionend"||!xl&&Nf(t,r)?(t=pf(),gi=fl=cr=null,co=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return yf&&r.locale!=="ko"?null:r.data;default:return null}}var _x={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Sf(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!_x[t.type]:r==="textarea"}function Ef(t,r,i,d){he(d),r=Si(r,"onChange"),0<r.length&&(i=new hl("onChange","change",null,i,d),t.push({event:i,listeners:r}))}var Zo=null,es=null;function Lx(t){Vf(t,0)}function bi(t){var r=mo(t);if(De(r))return t}function Bx(t,r){if(t==="change")return r}var Df=!1;if(f){var yl;if(f){var bl="oninput"in document;if(!bl){var jf=document.createElement("div");jf.setAttribute("oninput","return;"),bl=typeof jf.oninput=="function"}yl=bl}else yl=!1;Df=yl&&(!document.documentMode||9<document.documentMode)}function kf(){Zo&&(Zo.detachEvent("onpropertychange",Af),es=Zo=null)}function Af(t){if(t.propertyName==="value"&&bi(es)){var r=[];Ef(r,es,t,Or(t)),It(Lx,r)}}function Fx(t,r,i){t==="focusin"?(kf(),Zo=r,es=i,Zo.attachEvent("onpropertychange",Af)):t==="focusout"&&kf()}function $x(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return bi(es)}function Ux(t,r){if(t==="click")return bi(r)}function zx(t,r){if(t==="input"||t==="change")return bi(r)}function Vx(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var gn=typeof Object.is=="function"?Object.is:Vx;function ts(t,r){if(gn(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var i=Object.keys(t),d=Object.keys(r);if(i.length!==d.length)return!1;for(d=0;d<i.length;d++){var v=i[d];if(!h.call(r,v)||!gn(t[v],r[v]))return!1}return!0}function If(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Pf(t,r){var i=If(t);t=0;for(var d;i;){if(i.nodeType===3){if(d=t+i.textContent.length,t<=r&&d>=r)return{node:i,offset:r-t};t=d}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=If(i)}}function Rf(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?Rf(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function Tf(){for(var t=window,r=xe();r instanceof t.HTMLIFrameElement;){try{var i=typeof r.contentWindow.location.href=="string"}catch{i=!1}if(i)t=r.contentWindow;else break;r=xe(t.document)}return r}function wl(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}function Gx(t){var r=Tf(),i=t.focusedElem,d=t.selectionRange;if(r!==i&&i&&i.ownerDocument&&Rf(i.ownerDocument.documentElement,i)){if(d!==null&&wl(i)){if(r=d.start,t=d.end,t===void 0&&(t=r),"selectionStart"in i)i.selectionStart=r,i.selectionEnd=Math.min(t,i.value.length);else if(t=(r=i.ownerDocument||document)&&r.defaultView||window,t.getSelection){t=t.getSelection();var v=i.textContent.length,y=Math.min(d.start,v);d=d.end===void 0?y:Math.min(d.end,v),!t.extend&&y>d&&(v=d,d=y,y=v),v=Pf(i,y);var N=Pf(i,d);v&&N&&(t.rangeCount!==1||t.anchorNode!==v.node||t.anchorOffset!==v.offset||t.focusNode!==N.node||t.focusOffset!==N.offset)&&(r=r.createRange(),r.setStart(v.node,v.offset),t.removeAllRanges(),y>d?(t.addRange(r),t.extend(N.node,N.offset)):(r.setEnd(N.node,N.offset),t.addRange(r)))}}for(r=[],t=i;t=t.parentNode;)t.nodeType===1&&r.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof i.focus=="function"&&i.focus(),i=0;i<r.length;i++)t=r[i],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Hx=f&&"documentMode"in document&&11>=document.documentMode,uo=null,Nl=null,ns=null,Cl=!1;function Mf(t,r,i){var d=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;Cl||uo==null||uo!==xe(d)||(d=uo,"selectionStart"in d&&wl(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),ns&&ts(ns,d)||(ns=d,d=Si(Nl,"onSelect"),0<d.length&&(r=new hl("onSelect","select",null,r,i),t.push({event:r,listeners:d}),r.target=uo)))}function wi(t,r){var i={};return i[t.toLowerCase()]=r.toLowerCase(),i["Webkit"+t]="webkit"+r,i["Moz"+t]="moz"+r,i}var fo={animationend:wi("Animation","AnimationEnd"),animationiteration:wi("Animation","AnimationIteration"),animationstart:wi("Animation","AnimationStart"),transitionend:wi("Transition","TransitionEnd")},Sl={},Of={};f&&(Of=document.createElement("div").style,"AnimationEvent"in window||(delete fo.animationend.animation,delete fo.animationiteration.animation,delete fo.animationstart.animation),"TransitionEvent"in window||delete fo.transitionend.transition);function Ni(t){if(Sl[t])return Sl[t];if(!fo[t])return t;var r=fo[t],i;for(i in r)if(r.hasOwnProperty(i)&&i in Of)return Sl[t]=r[i];return t}var _f=Ni("animationend"),Lf=Ni("animationiteration"),Bf=Ni("animationstart"),Ff=Ni("transitionend"),$f=new Map,Uf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ur(t,r){$f.set(t,r),a(r,[t])}for(var El=0;El<Uf.length;El++){var Dl=Uf[El],Wx=Dl.toLowerCase(),qx=Dl[0].toUpperCase()+Dl.slice(1);ur(Wx,"on"+qx)}ur(_f,"onAnimationEnd"),ur(Lf,"onAnimationIteration"),ur(Bf,"onAnimationStart"),ur("dblclick","onDoubleClick"),ur("focusin","onFocus"),ur("focusout","onBlur"),ur(Ff,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var rs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Kx=new Set("cancel close invalid load scroll toggle".split(" ").concat(rs));function zf(t,r,i){var d=t.type||"unknown-event";t.currentTarget=i,Wv(d,r,void 0,t),t.currentTarget=null}function Vf(t,r){r=(r&4)!==0;for(var i=0;i<t.length;i++){var d=t[i],v=d.event;d=d.listeners;e:{var y=void 0;if(r)for(var N=d.length-1;0<=N;N--){var P=d[N],O=P.instance,W=P.currentTarget;if(P=P.listener,O!==y&&v.isPropagationStopped())break e;zf(v,P,W),y=O}else for(N=0;N<d.length;N++){if(P=d[N],O=P.instance,W=P.currentTarget,P=P.listener,O!==y&&v.isPropagationStopped())break e;zf(v,P,W),y=O}}}if(Wt)throw t=Gn,Wt=!1,Gn=null,t}function He(t,r){var i=r[Ml];i===void 0&&(i=r[Ml]=new Set);var d=t+"__bubble";i.has(d)||(Gf(r,t,2,!1),i.add(d))}function jl(t,r,i){var d=0;r&&(d|=4),Gf(i,t,d,r)}var Ci="_reactListening"+Math.random().toString(36).slice(2);function os(t){if(!t[Ci]){t[Ci]=!0,s.forEach(function(i){i!=="selectionchange"&&(Kx.has(i)||jl(i,!1,t),jl(i,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[Ci]||(r[Ci]=!0,jl("selectionchange",!1,r))}}function Gf(t,r,i,d){switch(hf(r)){case 1:var v=lx;break;case 4:v=cx;break;default:v=ul}i=v.bind(null,r,i,t),v=void 0,!Ot||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(v=!0),d?v!==void 0?t.addEventListener(r,i,{capture:!0,passive:v}):t.addEventListener(r,i,!0):v!==void 0?t.addEventListener(r,i,{passive:v}):t.addEventListener(r,i,!1)}function kl(t,r,i,d,v){var y=d;if((r&1)===0&&(r&2)===0&&d!==null)e:for(;;){if(d===null)return;var N=d.tag;if(N===3||N===4){var P=d.stateNode.containerInfo;if(P===v||P.nodeType===8&&P.parentNode===v)break;if(N===4)for(N=d.return;N!==null;){var O=N.tag;if((O===3||O===4)&&(O=N.stateNode.containerInfo,O===v||O.nodeType===8&&O.parentNode===v))return;N=N.return}for(;P!==null;){if(N=Lr(P),N===null)return;if(O=N.tag,O===5||O===6){d=y=N;continue e}P=P.parentNode}}d=d.return}It(function(){var W=y,oe=Or(i),ie=[];e:{var re=$f.get(t);if(re!==void 0){var me=hl,ye=t;switch(t){case"keypress":if(vi(i)===0)break e;case"keydown":case"keyup":me=Sx;break;case"focusin":ye="focus",me=gl;break;case"focusout":ye="blur",me=gl;break;case"beforeblur":case"afterblur":me=gl;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":me=gf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":me=fx;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":me=jx;break;case _f:case Lf:case Bf:me=mx;break;case Ff:me=Ax;break;case"scroll":me=ux;break;case"wheel":me=Px;break;case"copy":case"cut":case"paste":me=vx;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":me=xf}var be=(r&4)!==0,tt=!be&&t==="scroll",V=be?re!==null?re+"Capture":null:re;be=[];for(var B=W,H;B!==null;){H=B;var ce=H.stateNode;if(H.tag===5&&ce!==null&&(H=ce,V!==null&&(ce=Ve(B,V),ce!=null&&be.push(ss(B,ce,H)))),tt)break;B=B.return}0<be.length&&(re=new me(re,ye,null,i,oe),ie.push({event:re,listeners:be}))}}if((r&7)===0){e:{if(re=t==="mouseover"||t==="pointerover",me=t==="mouseout"||t==="pointerout",re&&i!==Vn&&(ye=i.relatedTarget||i.fromElement)&&(Lr(ye)||ye[Hn]))break e;if((me||re)&&(re=oe.window===oe?oe:(re=oe.ownerDocument)?re.defaultView||re.parentWindow:window,me?(ye=i.relatedTarget||i.toElement,me=W,ye=ye?Lr(ye):null,ye!==null&&(tt=_r(ye),ye!==tt||ye.tag!==5&&ye.tag!==6)&&(ye=null)):(me=null,ye=W),me!==ye)){if(be=gf,ce="onMouseLeave",V="onMouseEnter",B="mouse",(t==="pointerout"||t==="pointerover")&&(be=xf,ce="onPointerLeave",V="onPointerEnter",B="pointer"),tt=me==null?re:mo(me),H=ye==null?re:mo(ye),re=new be(ce,B+"leave",me,i,oe),re.target=tt,re.relatedTarget=H,ce=null,Lr(oe)===W&&(be=new be(V,B+"enter",ye,i,oe),be.target=H,be.relatedTarget=tt,ce=be),tt=ce,me&&ye)t:{for(be=me,V=ye,B=0,H=be;H;H=ho(H))B++;for(H=0,ce=V;ce;ce=ho(ce))H++;for(;0<B-H;)be=ho(be),B--;for(;0<H-B;)V=ho(V),H--;for(;B--;){if(be===V||V!==null&&be===V.alternate)break t;be=ho(be),V=ho(V)}be=null}else be=null;me!==null&&Hf(ie,re,me,be,!1),ye!==null&&tt!==null&&Hf(ie,tt,ye,be,!0)}}e:{if(re=W?mo(W):window,me=re.nodeName&&re.nodeName.toLowerCase(),me==="select"||me==="input"&&re.type==="file")var Ne=Bx;else if(Sf(re))if(Df)Ne=zx;else{Ne=$x;var je=Fx}else(me=re.nodeName)&&me.toLowerCase()==="input"&&(re.type==="checkbox"||re.type==="radio")&&(Ne=Ux);if(Ne&&(Ne=Ne(t,W))){Ef(ie,Ne,i,oe);break e}je&&je(t,re,W),t==="focusout"&&(je=re._wrapperState)&&je.controlled&&re.type==="number"&&pn(re,"number",re.value)}switch(je=W?mo(W):window,t){case"focusin":(Sf(je)||je.contentEditable==="true")&&(uo=je,Nl=W,ns=null);break;case"focusout":ns=Nl=uo=null;break;case"mousedown":Cl=!0;break;case"contextmenu":case"mouseup":case"dragend":Cl=!1,Mf(ie,i,oe);break;case"selectionchange":if(Hx)break;case"keydown":case"keyup":Mf(ie,i,oe)}var ke;if(xl)e:{switch(t){case"compositionstart":var Ae="onCompositionStart";break e;case"compositionend":Ae="onCompositionEnd";break e;case"compositionupdate":Ae="onCompositionUpdate";break e}Ae=void 0}else co?Nf(t,i)&&(Ae="onCompositionEnd"):t==="keydown"&&i.keyCode===229&&(Ae="onCompositionStart");Ae&&(yf&&i.locale!=="ko"&&(co||Ae!=="onCompositionStart"?Ae==="onCompositionEnd"&&co&&(ke=pf()):(cr=oe,fl="value"in cr?cr.value:cr.textContent,co=!0)),je=Si(W,Ae),0<je.length&&(Ae=new vf(Ae,t,null,i,oe),ie.push({event:Ae,listeners:je}),ke?Ae.data=ke:(ke=Cf(i),ke!==null&&(Ae.data=ke)))),(ke=Tx?Mx(t,i):Ox(t,i))&&(W=Si(W,"onBeforeInput"),0<W.length&&(oe=new vf("onBeforeInput","beforeinput",null,i,oe),ie.push({event:oe,listeners:W}),oe.data=ke))}Vf(ie,r)})}function ss(t,r,i){return{instance:t,listener:r,currentTarget:i}}function Si(t,r){for(var i=r+"Capture",d=[];t!==null;){var v=t,y=v.stateNode;v.tag===5&&y!==null&&(v=y,y=Ve(t,i),y!=null&&d.unshift(ss(t,y,v)),y=Ve(t,r),y!=null&&d.push(ss(t,y,v))),t=t.return}return d}function ho(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Hf(t,r,i,d,v){for(var y=r._reactName,N=[];i!==null&&i!==d;){var P=i,O=P.alternate,W=P.stateNode;if(O!==null&&O===d)break;P.tag===5&&W!==null&&(P=W,v?(O=Ve(i,y),O!=null&&N.unshift(ss(i,O,P))):v||(O=Ve(i,y),O!=null&&N.push(ss(i,O,P)))),i=i.return}N.length!==0&&t.push({event:r,listeners:N})}var Yx=/\r\n?/g,Qx=/\u0000|\uFFFD/g;function Wf(t){return(typeof t=="string"?t:""+t).replace(Yx,`
`).replace(Qx,"")}function Ei(t,r,i){if(r=Wf(r),Wf(t)!==r&&i)throw Error(o(425))}function Di(){}var Al=null,Il=null;function Pl(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Rl=typeof setTimeout=="function"?setTimeout:void 0,Jx=typeof clearTimeout=="function"?clearTimeout:void 0,qf=typeof Promise=="function"?Promise:void 0,Xx=typeof queueMicrotask=="function"?queueMicrotask:typeof qf<"u"?function(t){return qf.resolve(null).then(t).catch(Zx)}:Rl;function Zx(t){setTimeout(function(){throw t})}function Tl(t,r){var i=r,d=0;do{var v=i.nextSibling;if(t.removeChild(i),v&&v.nodeType===8)if(i=v.data,i==="/$"){if(d===0){t.removeChild(v),Yo(r);return}d--}else i!=="$"&&i!=="$?"&&i!=="$!"||d++;i=v}while(i);Yo(r)}function dr(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?")break;if(r==="/$")return null}}return t}function Kf(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var i=t.data;if(i==="$"||i==="$!"||i==="$?"){if(r===0)return t;r--}else i==="/$"&&r++}t=t.previousSibling}return null}var po=Math.random().toString(36).slice(2),Mn="__reactFiber$"+po,is="__reactProps$"+po,Hn="__reactContainer$"+po,Ml="__reactEvents$"+po,ey="__reactListeners$"+po,ty="__reactHandles$"+po;function Lr(t){var r=t[Mn];if(r)return r;for(var i=t.parentNode;i;){if(r=i[Hn]||i[Mn]){if(i=r.alternate,r.child!==null||i!==null&&i.child!==null)for(t=Kf(t);t!==null;){if(i=t[Mn])return i;t=Kf(t)}return r}t=i,i=t.parentNode}return null}function as(t){return t=t[Mn]||t[Hn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function mo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(o(33))}function ji(t){return t[is]||null}var Ol=[],go=-1;function fr(t){return{current:t}}function We(t){0>go||(t.current=Ol[go],Ol[go]=null,go--)}function Ge(t,r){go++,Ol[go]=t.current,t.current=r}var hr={},Dt=fr(hr),Lt=fr(!1),Br=hr;function vo(t,r){var i=t.type.contextTypes;if(!i)return hr;var d=t.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===r)return d.__reactInternalMemoizedMaskedChildContext;var v={},y;for(y in i)v[y]=r[y];return d&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=v),v}function Bt(t){return t=t.childContextTypes,t!=null}function ki(){We(Lt),We(Dt)}function Yf(t,r,i){if(Dt.current!==hr)throw Error(o(168));Ge(Dt,r),Ge(Lt,i)}function Qf(t,r,i){var d=t.stateNode;if(r=r.childContextTypes,typeof d.getChildContext!="function")return i;d=d.getChildContext();for(var v in d)if(!(v in r))throw Error(o(108,Ee(t)||"Unknown",v));return Y({},i,d)}function Ai(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||hr,Br=Dt.current,Ge(Dt,t),Ge(Lt,Lt.current),!0}function Jf(t,r,i){var d=t.stateNode;if(!d)throw Error(o(169));i?(t=Qf(t,r,Br),d.__reactInternalMemoizedMergedChildContext=t,We(Lt),We(Dt),Ge(Dt,t)):We(Lt),Ge(Lt,i)}var Wn=null,Ii=!1,_l=!1;function Xf(t){Wn===null?Wn=[t]:Wn.push(t)}function ny(t){Ii=!0,Xf(t)}function pr(){if(!_l&&Wn!==null){_l=!0;var t=0,r=ze;try{var i=Wn;for(ze=1;t<i.length;t++){var d=i[t];do d=d(!0);while(d!==null)}Wn=null,Ii=!1}catch(v){throw Wn!==null&&(Wn=Wn.slice(t+1)),Zd(ol,pr),v}finally{ze=r,_l=!1}}return null}var xo=[],yo=0,Pi=null,Ri=0,rn=[],on=0,Fr=null,qn=1,Kn="";function $r(t,r){xo[yo++]=Ri,xo[yo++]=Pi,Pi=t,Ri=r}function Zf(t,r,i){rn[on++]=qn,rn[on++]=Kn,rn[on++]=Fr,Fr=t;var d=qn;t=Kn;var v=32-mn(d)-1;d&=~(1<<v),i+=1;var y=32-mn(r)+v;if(30<y){var N=v-v%5;y=(d&(1<<N)-1).toString(32),d>>=N,v-=N,qn=1<<32-mn(r)+v|i<<v|d,Kn=y+t}else qn=1<<y|i<<v|d,Kn=t}function Ll(t){t.return!==null&&($r(t,1),Zf(t,1,0))}function Bl(t){for(;t===Pi;)Pi=xo[--yo],xo[yo]=null,Ri=xo[--yo],xo[yo]=null;for(;t===Fr;)Fr=rn[--on],rn[on]=null,Kn=rn[--on],rn[on]=null,qn=rn[--on],rn[on]=null}var Kt=null,Yt=null,qe=!1,vn=null;function eh(t,r){var i=cn(5,null,null,0);i.elementType="DELETED",i.stateNode=r,i.return=t,r=t.deletions,r===null?(t.deletions=[i],t.flags|=16):r.push(i)}function th(t,r){switch(t.tag){case 5:var i=t.type;return r=r.nodeType!==1||i.toLowerCase()!==r.nodeName.toLowerCase()?null:r,r!==null?(t.stateNode=r,Kt=t,Yt=dr(r.firstChild),!0):!1;case 6:return r=t.pendingProps===""||r.nodeType!==3?null:r,r!==null?(t.stateNode=r,Kt=t,Yt=null,!0):!1;case 13:return r=r.nodeType!==8?null:r,r!==null?(i=Fr!==null?{id:qn,overflow:Kn}:null,t.memoizedState={dehydrated:r,treeContext:i,retryLane:1073741824},i=cn(18,null,null,0),i.stateNode=r,i.return=t,t.child=i,Kt=t,Yt=null,!0):!1;default:return!1}}function Fl(t){return(t.mode&1)!==0&&(t.flags&128)===0}function $l(t){if(qe){var r=Yt;if(r){var i=r;if(!th(t,r)){if(Fl(t))throw Error(o(418));r=dr(i.nextSibling);var d=Kt;r&&th(t,r)?eh(d,i):(t.flags=t.flags&-4097|2,qe=!1,Kt=t)}}else{if(Fl(t))throw Error(o(418));t.flags=t.flags&-4097|2,qe=!1,Kt=t}}}function nh(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Kt=t}function Ti(t){if(t!==Kt)return!1;if(!qe)return nh(t),qe=!0,!1;var r;if((r=t.tag!==3)&&!(r=t.tag!==5)&&(r=t.type,r=r!=="head"&&r!=="body"&&!Pl(t.type,t.memoizedProps)),r&&(r=Yt)){if(Fl(t))throw rh(),Error(o(418));for(;r;)eh(t,r),r=dr(r.nextSibling)}if(nh(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(o(317));e:{for(t=t.nextSibling,r=0;t;){if(t.nodeType===8){var i=t.data;if(i==="/$"){if(r===0){Yt=dr(t.nextSibling);break e}r--}else i!=="$"&&i!=="$!"&&i!=="$?"||r++}t=t.nextSibling}Yt=null}}else Yt=Kt?dr(t.stateNode.nextSibling):null;return!0}function rh(){for(var t=Yt;t;)t=dr(t.nextSibling)}function bo(){Yt=Kt=null,qe=!1}function Ul(t){vn===null?vn=[t]:vn.push(t)}var ry=D.ReactCurrentBatchConfig;function ls(t,r,i){if(t=i.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(i._owner){if(i=i._owner,i){if(i.tag!==1)throw Error(o(309));var d=i.stateNode}if(!d)throw Error(o(147,t));var v=d,y=""+t;return r!==null&&r.ref!==null&&typeof r.ref=="function"&&r.ref._stringRef===y?r.ref:(r=function(N){var P=v.refs;N===null?delete P[y]:P[y]=N},r._stringRef=y,r)}if(typeof t!="string")throw Error(o(284));if(!i._owner)throw Error(o(290,t))}return t}function Mi(t,r){throw t=Object.prototype.toString.call(r),Error(o(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t))}function oh(t){var r=t._init;return r(t._payload)}function sh(t){function r(V,B){if(t){var H=V.deletions;H===null?(V.deletions=[B],V.flags|=16):H.push(B)}}function i(V,B){if(!t)return null;for(;B!==null;)r(V,B),B=B.sibling;return null}function d(V,B){for(V=new Map;B!==null;)B.key!==null?V.set(B.key,B):V.set(B.index,B),B=B.sibling;return V}function v(V,B){return V=Nr(V,B),V.index=0,V.sibling=null,V}function y(V,B,H){return V.index=H,t?(H=V.alternate,H!==null?(H=H.index,H<B?(V.flags|=2,B):H):(V.flags|=2,B)):(V.flags|=1048576,B)}function N(V){return t&&V.alternate===null&&(V.flags|=2),V}function P(V,B,H,ce){return B===null||B.tag!==6?(B=Rc(H,V.mode,ce),B.return=V,B):(B=v(B,H),B.return=V,B)}function O(V,B,H,ce){var Ne=H.type;return Ne===M?oe(V,B,H.props.children,ce,H.key):B!==null&&(B.elementType===Ne||typeof Ne=="object"&&Ne!==null&&Ne.$$typeof===ee&&oh(Ne)===B.type)?(ce=v(B,H.props),ce.ref=ls(V,B,H),ce.return=V,ce):(ce=oa(H.type,H.key,H.props,null,V.mode,ce),ce.ref=ls(V,B,H),ce.return=V,ce)}function W(V,B,H,ce){return B===null||B.tag!==4||B.stateNode.containerInfo!==H.containerInfo||B.stateNode.implementation!==H.implementation?(B=Tc(H,V.mode,ce),B.return=V,B):(B=v(B,H.children||[]),B.return=V,B)}function oe(V,B,H,ce,Ne){return B===null||B.tag!==7?(B=Kr(H,V.mode,ce,Ne),B.return=V,B):(B=v(B,H),B.return=V,B)}function ie(V,B,H){if(typeof B=="string"&&B!==""||typeof B=="number")return B=Rc(""+B,V.mode,H),B.return=V,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case I:return H=oa(B.type,B.key,B.props,null,V.mode,H),H.ref=ls(V,null,B),H.return=V,H;case T:return B=Tc(B,V.mode,H),B.return=V,B;case ee:var ce=B._init;return ie(V,ce(B._payload),H)}if(ot(B)||Q(B))return B=Kr(B,V.mode,H,null),B.return=V,B;Mi(V,B)}return null}function re(V,B,H,ce){var Ne=B!==null?B.key:null;if(typeof H=="string"&&H!==""||typeof H=="number")return Ne!==null?null:P(V,B,""+H,ce);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case I:return H.key===Ne?O(V,B,H,ce):null;case T:return H.key===Ne?W(V,B,H,ce):null;case ee:return Ne=H._init,re(V,B,Ne(H._payload),ce)}if(ot(H)||Q(H))return Ne!==null?null:oe(V,B,H,ce,null);Mi(V,H)}return null}function me(V,B,H,ce,Ne){if(typeof ce=="string"&&ce!==""||typeof ce=="number")return V=V.get(H)||null,P(B,V,""+ce,Ne);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case I:return V=V.get(ce.key===null?H:ce.key)||null,O(B,V,ce,Ne);case T:return V=V.get(ce.key===null?H:ce.key)||null,W(B,V,ce,Ne);case ee:var je=ce._init;return me(V,B,H,je(ce._payload),Ne)}if(ot(ce)||Q(ce))return V=V.get(H)||null,oe(B,V,ce,Ne,null);Mi(B,ce)}return null}function ye(V,B,H,ce){for(var Ne=null,je=null,ke=B,Ae=B=0,dt=null;ke!==null&&Ae<H.length;Ae++){ke.index>Ae?(dt=ke,ke=null):dt=ke.sibling;var Fe=re(V,ke,H[Ae],ce);if(Fe===null){ke===null&&(ke=dt);break}t&&ke&&Fe.alternate===null&&r(V,ke),B=y(Fe,B,Ae),je===null?Ne=Fe:je.sibling=Fe,je=Fe,ke=dt}if(Ae===H.length)return i(V,ke),qe&&$r(V,Ae),Ne;if(ke===null){for(;Ae<H.length;Ae++)ke=ie(V,H[Ae],ce),ke!==null&&(B=y(ke,B,Ae),je===null?Ne=ke:je.sibling=ke,je=ke);return qe&&$r(V,Ae),Ne}for(ke=d(V,ke);Ae<H.length;Ae++)dt=me(ke,V,Ae,H[Ae],ce),dt!==null&&(t&&dt.alternate!==null&&ke.delete(dt.key===null?Ae:dt.key),B=y(dt,B,Ae),je===null?Ne=dt:je.sibling=dt,je=dt);return t&&ke.forEach(function(Cr){return r(V,Cr)}),qe&&$r(V,Ae),Ne}function be(V,B,H,ce){var Ne=Q(H);if(typeof Ne!="function")throw Error(o(150));if(H=Ne.call(H),H==null)throw Error(o(151));for(var je=Ne=null,ke=B,Ae=B=0,dt=null,Fe=H.next();ke!==null&&!Fe.done;Ae++,Fe=H.next()){ke.index>Ae?(dt=ke,ke=null):dt=ke.sibling;var Cr=re(V,ke,Fe.value,ce);if(Cr===null){ke===null&&(ke=dt);break}t&&ke&&Cr.alternate===null&&r(V,ke),B=y(Cr,B,Ae),je===null?Ne=Cr:je.sibling=Cr,je=Cr,ke=dt}if(Fe.done)return i(V,ke),qe&&$r(V,Ae),Ne;if(ke===null){for(;!Fe.done;Ae++,Fe=H.next())Fe=ie(V,Fe.value,ce),Fe!==null&&(B=y(Fe,B,Ae),je===null?Ne=Fe:je.sibling=Fe,je=Fe);return qe&&$r(V,Ae),Ne}for(ke=d(V,ke);!Fe.done;Ae++,Fe=H.next())Fe=me(ke,V,Ae,Fe.value,ce),Fe!==null&&(t&&Fe.alternate!==null&&ke.delete(Fe.key===null?Ae:Fe.key),B=y(Fe,B,Ae),je===null?Ne=Fe:je.sibling=Fe,je=Fe);return t&&ke.forEach(function(_y){return r(V,_y)}),qe&&$r(V,Ae),Ne}function tt(V,B,H,ce){if(typeof H=="object"&&H!==null&&H.type===M&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case I:e:{for(var Ne=H.key,je=B;je!==null;){if(je.key===Ne){if(Ne=H.type,Ne===M){if(je.tag===7){i(V,je.sibling),B=v(je,H.props.children),B.return=V,V=B;break e}}else if(je.elementType===Ne||typeof Ne=="object"&&Ne!==null&&Ne.$$typeof===ee&&oh(Ne)===je.type){i(V,je.sibling),B=v(je,H.props),B.ref=ls(V,je,H),B.return=V,V=B;break e}i(V,je);break}else r(V,je);je=je.sibling}H.type===M?(B=Kr(H.props.children,V.mode,ce,H.key),B.return=V,V=B):(ce=oa(H.type,H.key,H.props,null,V.mode,ce),ce.ref=ls(V,B,H),ce.return=V,V=ce)}return N(V);case T:e:{for(je=H.key;B!==null;){if(B.key===je)if(B.tag===4&&B.stateNode.containerInfo===H.containerInfo&&B.stateNode.implementation===H.implementation){i(V,B.sibling),B=v(B,H.children||[]),B.return=V,V=B;break e}else{i(V,B);break}else r(V,B);B=B.sibling}B=Tc(H,V.mode,ce),B.return=V,V=B}return N(V);case ee:return je=H._init,tt(V,B,je(H._payload),ce)}if(ot(H))return ye(V,B,H,ce);if(Q(H))return be(V,B,H,ce);Mi(V,H)}return typeof H=="string"&&H!==""||typeof H=="number"?(H=""+H,B!==null&&B.tag===6?(i(V,B.sibling),B=v(B,H),B.return=V,V=B):(i(V,B),B=Rc(H,V.mode,ce),B.return=V,V=B),N(V)):i(V,B)}return tt}var wo=sh(!0),ih=sh(!1),Oi=fr(null),_i=null,No=null,zl=null;function Vl(){zl=No=_i=null}function Gl(t){var r=Oi.current;We(Oi),t._currentValue=r}function Hl(t,r,i){for(;t!==null;){var d=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,d!==null&&(d.childLanes|=r)):d!==null&&(d.childLanes&r)!==r&&(d.childLanes|=r),t===i)break;t=t.return}}function Co(t,r){_i=t,zl=No=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&r)!==0&&(Ft=!0),t.firstContext=null)}function sn(t){var r=t._currentValue;if(zl!==t)if(t={context:t,memoizedValue:r,next:null},No===null){if(_i===null)throw Error(o(308));No=t,_i.dependencies={lanes:0,firstContext:t}}else No=No.next=t;return r}var Ur=null;function Wl(t){Ur===null?Ur=[t]:Ur.push(t)}function ah(t,r,i,d){var v=r.interleaved;return v===null?(i.next=i,Wl(r)):(i.next=v.next,v.next=i),r.interleaved=i,Yn(t,d)}function Yn(t,r){t.lanes|=r;var i=t.alternate;for(i!==null&&(i.lanes|=r),i=t,t=t.return;t!==null;)t.childLanes|=r,i=t.alternate,i!==null&&(i.childLanes|=r),i=t,t=t.return;return i.tag===3?i.stateNode:null}var mr=!1;function ql(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function lh(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Qn(t,r){return{eventTime:t,lane:r,tag:0,payload:null,callback:null,next:null}}function gr(t,r,i){var d=t.updateQueue;if(d===null)return null;if(d=d.shared,(Le&2)!==0){var v=d.pending;return v===null?r.next=r:(r.next=v.next,v.next=r),d.pending=r,Yn(t,i)}return v=d.interleaved,v===null?(r.next=r,Wl(d)):(r.next=v.next,v.next=r),d.interleaved=r,Yn(t,i)}function Li(t,r,i){if(r=r.updateQueue,r!==null&&(r=r.shared,(i&4194240)!==0)){var d=r.lanes;d&=t.pendingLanes,i|=d,r.lanes=i,al(t,i)}}function ch(t,r){var i=t.updateQueue,d=t.alternate;if(d!==null&&(d=d.updateQueue,i===d)){var v=null,y=null;if(i=i.firstBaseUpdate,i!==null){do{var N={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};y===null?v=y=N:y=y.next=N,i=i.next}while(i!==null);y===null?v=y=r:y=y.next=r}else v=y=r;i={baseState:d.baseState,firstBaseUpdate:v,lastBaseUpdate:y,shared:d.shared,effects:d.effects},t.updateQueue=i;return}t=i.lastBaseUpdate,t===null?i.firstBaseUpdate=r:t.next=r,i.lastBaseUpdate=r}function Bi(t,r,i,d){var v=t.updateQueue;mr=!1;var y=v.firstBaseUpdate,N=v.lastBaseUpdate,P=v.shared.pending;if(P!==null){v.shared.pending=null;var O=P,W=O.next;O.next=null,N===null?y=W:N.next=W,N=O;var oe=t.alternate;oe!==null&&(oe=oe.updateQueue,P=oe.lastBaseUpdate,P!==N&&(P===null?oe.firstBaseUpdate=W:P.next=W,oe.lastBaseUpdate=O))}if(y!==null){var ie=v.baseState;N=0,oe=W=O=null,P=y;do{var re=P.lane,me=P.eventTime;if((d&re)===re){oe!==null&&(oe=oe.next={eventTime:me,lane:0,tag:P.tag,payload:P.payload,callback:P.callback,next:null});e:{var ye=t,be=P;switch(re=r,me=i,be.tag){case 1:if(ye=be.payload,typeof ye=="function"){ie=ye.call(me,ie,re);break e}ie=ye;break e;case 3:ye.flags=ye.flags&-65537|128;case 0:if(ye=be.payload,re=typeof ye=="function"?ye.call(me,ie,re):ye,re==null)break e;ie=Y({},ie,re);break e;case 2:mr=!0}}P.callback!==null&&P.lane!==0&&(t.flags|=64,re=v.effects,re===null?v.effects=[P]:re.push(P))}else me={eventTime:me,lane:re,tag:P.tag,payload:P.payload,callback:P.callback,next:null},oe===null?(W=oe=me,O=ie):oe=oe.next=me,N|=re;if(P=P.next,P===null){if(P=v.shared.pending,P===null)break;re=P,P=re.next,re.next=null,v.lastBaseUpdate=re,v.shared.pending=null}}while(!0);if(oe===null&&(O=ie),v.baseState=O,v.firstBaseUpdate=W,v.lastBaseUpdate=oe,r=v.shared.interleaved,r!==null){v=r;do N|=v.lane,v=v.next;while(v!==r)}else y===null&&(v.shared.lanes=0);Gr|=N,t.lanes=N,t.memoizedState=ie}}function uh(t,r,i){if(t=r.effects,r.effects=null,t!==null)for(r=0;r<t.length;r++){var d=t[r],v=d.callback;if(v!==null){if(d.callback=null,d=i,typeof v!="function")throw Error(o(191,v));v.call(d)}}}var cs={},On=fr(cs),us=fr(cs),ds=fr(cs);function zr(t){if(t===cs)throw Error(o(174));return t}function Kl(t,r){switch(Ge(ds,r),Ge(us,t),Ge(On,cs),t=r.nodeType,t){case 9:case 11:r=(r=r.documentElement)?r.namespaceURI:Gt(null,"");break;default:t=t===8?r.parentNode:r,r=t.namespaceURI||null,t=t.tagName,r=Gt(r,t)}We(On),Ge(On,r)}function So(){We(On),We(us),We(ds)}function dh(t){zr(ds.current);var r=zr(On.current),i=Gt(r,t.type);r!==i&&(Ge(us,t),Ge(On,i))}function Yl(t){us.current===t&&(We(On),We(us))}var Je=fr(0);function Fi(t){for(var r=t;r!==null;){if(r.tag===13){var i=r.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||i.data==="$!"))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var Ql=[];function Jl(){for(var t=0;t<Ql.length;t++)Ql[t]._workInProgressVersionPrimary=null;Ql.length=0}var $i=D.ReactCurrentDispatcher,Xl=D.ReactCurrentBatchConfig,Vr=0,Xe=null,st=null,ct=null,Ui=!1,fs=!1,hs=0,oy=0;function jt(){throw Error(o(321))}function Zl(t,r){if(r===null)return!1;for(var i=0;i<r.length&&i<t.length;i++)if(!gn(t[i],r[i]))return!1;return!0}function ec(t,r,i,d,v,y){if(Vr=y,Xe=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,$i.current=t===null||t.memoizedState===null?ly:cy,t=i(d,v),fs){y=0;do{if(fs=!1,hs=0,25<=y)throw Error(o(301));y+=1,ct=st=null,r.updateQueue=null,$i.current=uy,t=i(d,v)}while(fs)}if($i.current=Gi,r=st!==null&&st.next!==null,Vr=0,ct=st=Xe=null,Ui=!1,r)throw Error(o(300));return t}function tc(){var t=hs!==0;return hs=0,t}function _n(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ct===null?Xe.memoizedState=ct=t:ct=ct.next=t,ct}function an(){if(st===null){var t=Xe.alternate;t=t!==null?t.memoizedState:null}else t=st.next;var r=ct===null?Xe.memoizedState:ct.next;if(r!==null)ct=r,st=t;else{if(t===null)throw Error(o(310));st=t,t={memoizedState:st.memoizedState,baseState:st.baseState,baseQueue:st.baseQueue,queue:st.queue,next:null},ct===null?Xe.memoizedState=ct=t:ct=ct.next=t}return ct}function ps(t,r){return typeof r=="function"?r(t):r}function nc(t){var r=an(),i=r.queue;if(i===null)throw Error(o(311));i.lastRenderedReducer=t;var d=st,v=d.baseQueue,y=i.pending;if(y!==null){if(v!==null){var N=v.next;v.next=y.next,y.next=N}d.baseQueue=v=y,i.pending=null}if(v!==null){y=v.next,d=d.baseState;var P=N=null,O=null,W=y;do{var oe=W.lane;if((Vr&oe)===oe)O!==null&&(O=O.next={lane:0,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null}),d=W.hasEagerState?W.eagerState:t(d,W.action);else{var ie={lane:oe,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null};O===null?(P=O=ie,N=d):O=O.next=ie,Xe.lanes|=oe,Gr|=oe}W=W.next}while(W!==null&&W!==y);O===null?N=d:O.next=P,gn(d,r.memoizedState)||(Ft=!0),r.memoizedState=d,r.baseState=N,r.baseQueue=O,i.lastRenderedState=d}if(t=i.interleaved,t!==null){v=t;do y=v.lane,Xe.lanes|=y,Gr|=y,v=v.next;while(v!==t)}else v===null&&(i.lanes=0);return[r.memoizedState,i.dispatch]}function rc(t){var r=an(),i=r.queue;if(i===null)throw Error(o(311));i.lastRenderedReducer=t;var d=i.dispatch,v=i.pending,y=r.memoizedState;if(v!==null){i.pending=null;var N=v=v.next;do y=t(y,N.action),N=N.next;while(N!==v);gn(y,r.memoizedState)||(Ft=!0),r.memoizedState=y,r.baseQueue===null&&(r.baseState=y),i.lastRenderedState=y}return[y,d]}function fh(){}function hh(t,r){var i=Xe,d=an(),v=r(),y=!gn(d.memoizedState,v);if(y&&(d.memoizedState=v,Ft=!0),d=d.queue,oc(gh.bind(null,i,d,t),[t]),d.getSnapshot!==r||y||ct!==null&&ct.memoizedState.tag&1){if(i.flags|=2048,ms(9,mh.bind(null,i,d,v,r),void 0,null),ut===null)throw Error(o(349));(Vr&30)!==0||ph(i,r,v)}return v}function ph(t,r,i){t.flags|=16384,t={getSnapshot:r,value:i},r=Xe.updateQueue,r===null?(r={lastEffect:null,stores:null},Xe.updateQueue=r,r.stores=[t]):(i=r.stores,i===null?r.stores=[t]:i.push(t))}function mh(t,r,i,d){r.value=i,r.getSnapshot=d,vh(r)&&xh(t)}function gh(t,r,i){return i(function(){vh(r)&&xh(t)})}function vh(t){var r=t.getSnapshot;t=t.value;try{var i=r();return!gn(t,i)}catch{return!0}}function xh(t){var r=Yn(t,1);r!==null&&wn(r,t,1,-1)}function yh(t){var r=_n();return typeof t=="function"&&(t=t()),r.memoizedState=r.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ps,lastRenderedState:t},r.queue=t,t=t.dispatch=ay.bind(null,Xe,t),[r.memoizedState,t]}function ms(t,r,i,d){return t={tag:t,create:r,destroy:i,deps:d,next:null},r=Xe.updateQueue,r===null?(r={lastEffect:null,stores:null},Xe.updateQueue=r,r.lastEffect=t.next=t):(i=r.lastEffect,i===null?r.lastEffect=t.next=t:(d=i.next,i.next=t,t.next=d,r.lastEffect=t)),t}function bh(){return an().memoizedState}function zi(t,r,i,d){var v=_n();Xe.flags|=t,v.memoizedState=ms(1|r,i,void 0,d===void 0?null:d)}function Vi(t,r,i,d){var v=an();d=d===void 0?null:d;var y=void 0;if(st!==null){var N=st.memoizedState;if(y=N.destroy,d!==null&&Zl(d,N.deps)){v.memoizedState=ms(r,i,y,d);return}}Xe.flags|=t,v.memoizedState=ms(1|r,i,y,d)}function wh(t,r){return zi(8390656,8,t,r)}function oc(t,r){return Vi(2048,8,t,r)}function Nh(t,r){return Vi(4,2,t,r)}function Ch(t,r){return Vi(4,4,t,r)}function Sh(t,r){if(typeof r=="function")return t=t(),r(t),function(){r(null)};if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function Eh(t,r,i){return i=i!=null?i.concat([t]):null,Vi(4,4,Sh.bind(null,r,t),i)}function sc(){}function Dh(t,r){var i=an();r=r===void 0?null:r;var d=i.memoizedState;return d!==null&&r!==null&&Zl(r,d[1])?d[0]:(i.memoizedState=[t,r],t)}function jh(t,r){var i=an();r=r===void 0?null:r;var d=i.memoizedState;return d!==null&&r!==null&&Zl(r,d[1])?d[0]:(t=t(),i.memoizedState=[t,r],t)}function kh(t,r,i){return(Vr&21)===0?(t.baseState&&(t.baseState=!1,Ft=!0),t.memoizedState=i):(gn(i,r)||(i=rf(),Xe.lanes|=i,Gr|=i,t.baseState=!0),r)}function sy(t,r){var i=ze;ze=i!==0&&4>i?i:4,t(!0);var d=Xl.transition;Xl.transition={};try{t(!1),r()}finally{ze=i,Xl.transition=d}}function Ah(){return an().memoizedState}function iy(t,r,i){var d=br(t);if(i={lane:d,action:i,hasEagerState:!1,eagerState:null,next:null},Ih(t))Ph(r,i);else if(i=ah(t,r,i,d),i!==null){var v=Rt();wn(i,t,d,v),Rh(i,r,d)}}function ay(t,r,i){var d=br(t),v={lane:d,action:i,hasEagerState:!1,eagerState:null,next:null};if(Ih(t))Ph(r,v);else{var y=t.alternate;if(t.lanes===0&&(y===null||y.lanes===0)&&(y=r.lastRenderedReducer,y!==null))try{var N=r.lastRenderedState,P=y(N,i);if(v.hasEagerState=!0,v.eagerState=P,gn(P,N)){var O=r.interleaved;O===null?(v.next=v,Wl(r)):(v.next=O.next,O.next=v),r.interleaved=v;return}}catch{}finally{}i=ah(t,r,v,d),i!==null&&(v=Rt(),wn(i,t,d,v),Rh(i,r,d))}}function Ih(t){var r=t.alternate;return t===Xe||r!==null&&r===Xe}function Ph(t,r){fs=Ui=!0;var i=t.pending;i===null?r.next=r:(r.next=i.next,i.next=r),t.pending=r}function Rh(t,r,i){if((i&4194240)!==0){var d=r.lanes;d&=t.pendingLanes,i|=d,r.lanes=i,al(t,i)}}var Gi={readContext:sn,useCallback:jt,useContext:jt,useEffect:jt,useImperativeHandle:jt,useInsertionEffect:jt,useLayoutEffect:jt,useMemo:jt,useReducer:jt,useRef:jt,useState:jt,useDebugValue:jt,useDeferredValue:jt,useTransition:jt,useMutableSource:jt,useSyncExternalStore:jt,useId:jt,unstable_isNewReconciler:!1},ly={readContext:sn,useCallback:function(t,r){return _n().memoizedState=[t,r===void 0?null:r],t},useContext:sn,useEffect:wh,useImperativeHandle:function(t,r,i){return i=i!=null?i.concat([t]):null,zi(4194308,4,Sh.bind(null,r,t),i)},useLayoutEffect:function(t,r){return zi(4194308,4,t,r)},useInsertionEffect:function(t,r){return zi(4,2,t,r)},useMemo:function(t,r){var i=_n();return r=r===void 0?null:r,t=t(),i.memoizedState=[t,r],t},useReducer:function(t,r,i){var d=_n();return r=i!==void 0?i(r):r,d.memoizedState=d.baseState=r,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:r},d.queue=t,t=t.dispatch=iy.bind(null,Xe,t),[d.memoizedState,t]},useRef:function(t){var r=_n();return t={current:t},r.memoizedState=t},useState:yh,useDebugValue:sc,useDeferredValue:function(t){return _n().memoizedState=t},useTransition:function(){var t=yh(!1),r=t[0];return t=sy.bind(null,t[1]),_n().memoizedState=t,[r,t]},useMutableSource:function(){},useSyncExternalStore:function(t,r,i){var d=Xe,v=_n();if(qe){if(i===void 0)throw Error(o(407));i=i()}else{if(i=r(),ut===null)throw Error(o(349));(Vr&30)!==0||ph(d,r,i)}v.memoizedState=i;var y={value:i,getSnapshot:r};return v.queue=y,wh(gh.bind(null,d,y,t),[t]),d.flags|=2048,ms(9,mh.bind(null,d,y,i,r),void 0,null),i},useId:function(){var t=_n(),r=ut.identifierPrefix;if(qe){var i=Kn,d=qn;i=(d&~(1<<32-mn(d)-1)).toString(32)+i,r=":"+r+"R"+i,i=hs++,0<i&&(r+="H"+i.toString(32)),r+=":"}else i=oy++,r=":"+r+"r"+i.toString(32)+":";return t.memoizedState=r},unstable_isNewReconciler:!1},cy={readContext:sn,useCallback:Dh,useContext:sn,useEffect:oc,useImperativeHandle:Eh,useInsertionEffect:Nh,useLayoutEffect:Ch,useMemo:jh,useReducer:nc,useRef:bh,useState:function(){return nc(ps)},useDebugValue:sc,useDeferredValue:function(t){var r=an();return kh(r,st.memoizedState,t)},useTransition:function(){var t=nc(ps)[0],r=an().memoizedState;return[t,r]},useMutableSource:fh,useSyncExternalStore:hh,useId:Ah,unstable_isNewReconciler:!1},uy={readContext:sn,useCallback:Dh,useContext:sn,useEffect:oc,useImperativeHandle:Eh,useInsertionEffect:Nh,useLayoutEffect:Ch,useMemo:jh,useReducer:rc,useRef:bh,useState:function(){return rc(ps)},useDebugValue:sc,useDeferredValue:function(t){var r=an();return st===null?r.memoizedState=t:kh(r,st.memoizedState,t)},useTransition:function(){var t=rc(ps)[0],r=an().memoizedState;return[t,r]},useMutableSource:fh,useSyncExternalStore:hh,useId:Ah,unstable_isNewReconciler:!1};function xn(t,r){if(t&&t.defaultProps){r=Y({},r),t=t.defaultProps;for(var i in t)r[i]===void 0&&(r[i]=t[i]);return r}return r}function ic(t,r,i,d){r=t.memoizedState,i=i(d,r),i=i==null?r:Y({},r,i),t.memoizedState=i,t.lanes===0&&(t.updateQueue.baseState=i)}var Hi={isMounted:function(t){return(t=t._reactInternals)?_r(t)===t:!1},enqueueSetState:function(t,r,i){t=t._reactInternals;var d=Rt(),v=br(t),y=Qn(d,v);y.payload=r,i!=null&&(y.callback=i),r=gr(t,y,v),r!==null&&(wn(r,t,v,d),Li(r,t,v))},enqueueReplaceState:function(t,r,i){t=t._reactInternals;var d=Rt(),v=br(t),y=Qn(d,v);y.tag=1,y.payload=r,i!=null&&(y.callback=i),r=gr(t,y,v),r!==null&&(wn(r,t,v,d),Li(r,t,v))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var i=Rt(),d=br(t),v=Qn(i,d);v.tag=2,r!=null&&(v.callback=r),r=gr(t,v,d),r!==null&&(wn(r,t,d,i),Li(r,t,d))}};function Th(t,r,i,d,v,y,N){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(d,y,N):r.prototype&&r.prototype.isPureReactComponent?!ts(i,d)||!ts(v,y):!0}function Mh(t,r,i){var d=!1,v=hr,y=r.contextType;return typeof y=="object"&&y!==null?y=sn(y):(v=Bt(r)?Br:Dt.current,d=r.contextTypes,y=(d=d!=null)?vo(t,v):hr),r=new r(i,y),t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=Hi,t.stateNode=r,r._reactInternals=t,d&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=v,t.__reactInternalMemoizedMaskedChildContext=y),r}function Oh(t,r,i,d){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(i,d),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(i,d),r.state!==t&&Hi.enqueueReplaceState(r,r.state,null)}function ac(t,r,i,d){var v=t.stateNode;v.props=i,v.state=t.memoizedState,v.refs={},ql(t);var y=r.contextType;typeof y=="object"&&y!==null?v.context=sn(y):(y=Bt(r)?Br:Dt.current,v.context=vo(t,y)),v.state=t.memoizedState,y=r.getDerivedStateFromProps,typeof y=="function"&&(ic(t,r,y,i),v.state=t.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(r=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),r!==v.state&&Hi.enqueueReplaceState(v,v.state,null),Bi(t,i,v,d),v.state=t.memoizedState),typeof v.componentDidMount=="function"&&(t.flags|=4194308)}function Eo(t,r){try{var i="",d=r;do i+=ne(d),d=d.return;while(d);var v=i}catch(y){v=`
Error generating stack: `+y.message+`
`+y.stack}return{value:t,source:r,stack:v,digest:null}}function lc(t,r,i){return{value:t,source:null,stack:i??null,digest:r??null}}function cc(t,r){try{console.error(r.value)}catch(i){setTimeout(function(){throw i})}}var dy=typeof WeakMap=="function"?WeakMap:Map;function _h(t,r,i){i=Qn(-1,i),i.tag=3,i.payload={element:null};var d=r.value;return i.callback=function(){Xi||(Xi=!0,Sc=d),cc(t,r)},i}function Lh(t,r,i){i=Qn(-1,i),i.tag=3;var d=t.type.getDerivedStateFromError;if(typeof d=="function"){var v=r.value;i.payload=function(){return d(v)},i.callback=function(){cc(t,r)}}var y=t.stateNode;return y!==null&&typeof y.componentDidCatch=="function"&&(i.callback=function(){cc(t,r),typeof d!="function"&&(xr===null?xr=new Set([this]):xr.add(this));var N=r.stack;this.componentDidCatch(r.value,{componentStack:N!==null?N:""})}),i}function Bh(t,r,i){var d=t.pingCache;if(d===null){d=t.pingCache=new dy;var v=new Set;d.set(r,v)}else v=d.get(r),v===void 0&&(v=new Set,d.set(r,v));v.has(i)||(v.add(i),t=Ey.bind(null,t,r,i),r.then(t,t))}function Fh(t){do{var r;if((r=t.tag===13)&&(r=t.memoizedState,r=r!==null?r.dehydrated!==null:!0),r)return t;t=t.return}while(t!==null);return null}function $h(t,r,i,d,v){return(t.mode&1)===0?(t===r?t.flags|=65536:(t.flags|=128,i.flags|=131072,i.flags&=-52805,i.tag===1&&(i.alternate===null?i.tag=17:(r=Qn(-1,1),r.tag=2,gr(i,r,1))),i.lanes|=1),t):(t.flags|=65536,t.lanes=v,t)}var fy=D.ReactCurrentOwner,Ft=!1;function Pt(t,r,i,d){r.child=t===null?ih(r,null,i,d):wo(r,t.child,i,d)}function Uh(t,r,i,d,v){i=i.render;var y=r.ref;return Co(r,v),d=ec(t,r,i,d,y,v),i=tc(),t!==null&&!Ft?(r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~v,Jn(t,r,v)):(qe&&i&&Ll(r),r.flags|=1,Pt(t,r,d,v),r.child)}function zh(t,r,i,d,v){if(t===null){var y=i.type;return typeof y=="function"&&!Pc(y)&&y.defaultProps===void 0&&i.compare===null&&i.defaultProps===void 0?(r.tag=15,r.type=y,Vh(t,r,y,d,v)):(t=oa(i.type,null,d,r,r.mode,v),t.ref=r.ref,t.return=r,r.child=t)}if(y=t.child,(t.lanes&v)===0){var N=y.memoizedProps;if(i=i.compare,i=i!==null?i:ts,i(N,d)&&t.ref===r.ref)return Jn(t,r,v)}return r.flags|=1,t=Nr(y,d),t.ref=r.ref,t.return=r,r.child=t}function Vh(t,r,i,d,v){if(t!==null){var y=t.memoizedProps;if(ts(y,d)&&t.ref===r.ref)if(Ft=!1,r.pendingProps=d=y,(t.lanes&v)!==0)(t.flags&131072)!==0&&(Ft=!0);else return r.lanes=t.lanes,Jn(t,r,v)}return uc(t,r,i,d,v)}function Gh(t,r,i){var d=r.pendingProps,v=d.children,y=t!==null?t.memoizedState:null;if(d.mode==="hidden")if((r.mode&1)===0)r.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ge(jo,Qt),Qt|=i;else{if((i&1073741824)===0)return t=y!==null?y.baseLanes|i:i,r.lanes=r.childLanes=1073741824,r.memoizedState={baseLanes:t,cachePool:null,transitions:null},r.updateQueue=null,Ge(jo,Qt),Qt|=t,null;r.memoizedState={baseLanes:0,cachePool:null,transitions:null},d=y!==null?y.baseLanes:i,Ge(jo,Qt),Qt|=d}else y!==null?(d=y.baseLanes|i,r.memoizedState=null):d=i,Ge(jo,Qt),Qt|=d;return Pt(t,r,v,i),r.child}function Hh(t,r){var i=r.ref;(t===null&&i!==null||t!==null&&t.ref!==i)&&(r.flags|=512,r.flags|=2097152)}function uc(t,r,i,d,v){var y=Bt(i)?Br:Dt.current;return y=vo(r,y),Co(r,v),i=ec(t,r,i,d,y,v),d=tc(),t!==null&&!Ft?(r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~v,Jn(t,r,v)):(qe&&d&&Ll(r),r.flags|=1,Pt(t,r,i,v),r.child)}function Wh(t,r,i,d,v){if(Bt(i)){var y=!0;Ai(r)}else y=!1;if(Co(r,v),r.stateNode===null)qi(t,r),Mh(r,i,d),ac(r,i,d,v),d=!0;else if(t===null){var N=r.stateNode,P=r.memoizedProps;N.props=P;var O=N.context,W=i.contextType;typeof W=="object"&&W!==null?W=sn(W):(W=Bt(i)?Br:Dt.current,W=vo(r,W));var oe=i.getDerivedStateFromProps,ie=typeof oe=="function"||typeof N.getSnapshotBeforeUpdate=="function";ie||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||(P!==d||O!==W)&&Oh(r,N,d,W),mr=!1;var re=r.memoizedState;N.state=re,Bi(r,d,N,v),O=r.memoizedState,P!==d||re!==O||Lt.current||mr?(typeof oe=="function"&&(ic(r,i,oe,d),O=r.memoizedState),(P=mr||Th(r,i,P,d,re,O,W))?(ie||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount()),typeof N.componentDidMount=="function"&&(r.flags|=4194308)):(typeof N.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=d,r.memoizedState=O),N.props=d,N.state=O,N.context=W,d=P):(typeof N.componentDidMount=="function"&&(r.flags|=4194308),d=!1)}else{N=r.stateNode,lh(t,r),P=r.memoizedProps,W=r.type===r.elementType?P:xn(r.type,P),N.props=W,ie=r.pendingProps,re=N.context,O=i.contextType,typeof O=="object"&&O!==null?O=sn(O):(O=Bt(i)?Br:Dt.current,O=vo(r,O));var me=i.getDerivedStateFromProps;(oe=typeof me=="function"||typeof N.getSnapshotBeforeUpdate=="function")||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||(P!==ie||re!==O)&&Oh(r,N,d,O),mr=!1,re=r.memoizedState,N.state=re,Bi(r,d,N,v);var ye=r.memoizedState;P!==ie||re!==ye||Lt.current||mr?(typeof me=="function"&&(ic(r,i,me,d),ye=r.memoizedState),(W=mr||Th(r,i,W,d,re,ye,O)||!1)?(oe||typeof N.UNSAFE_componentWillUpdate!="function"&&typeof N.componentWillUpdate!="function"||(typeof N.componentWillUpdate=="function"&&N.componentWillUpdate(d,ye,O),typeof N.UNSAFE_componentWillUpdate=="function"&&N.UNSAFE_componentWillUpdate(d,ye,O)),typeof N.componentDidUpdate=="function"&&(r.flags|=4),typeof N.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof N.componentDidUpdate!="function"||P===t.memoizedProps&&re===t.memoizedState||(r.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||P===t.memoizedProps&&re===t.memoizedState||(r.flags|=1024),r.memoizedProps=d,r.memoizedState=ye),N.props=d,N.state=ye,N.context=O,d=W):(typeof N.componentDidUpdate!="function"||P===t.memoizedProps&&re===t.memoizedState||(r.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||P===t.memoizedProps&&re===t.memoizedState||(r.flags|=1024),d=!1)}return dc(t,r,i,d,y,v)}function dc(t,r,i,d,v,y){Hh(t,r);var N=(r.flags&128)!==0;if(!d&&!N)return v&&Jf(r,i,!1),Jn(t,r,y);d=r.stateNode,fy.current=r;var P=N&&typeof i.getDerivedStateFromError!="function"?null:d.render();return r.flags|=1,t!==null&&N?(r.child=wo(r,t.child,null,y),r.child=wo(r,null,P,y)):Pt(t,r,P,y),r.memoizedState=d.state,v&&Jf(r,i,!0),r.child}function qh(t){var r=t.stateNode;r.pendingContext?Yf(t,r.pendingContext,r.pendingContext!==r.context):r.context&&Yf(t,r.context,!1),Kl(t,r.containerInfo)}function Kh(t,r,i,d,v){return bo(),Ul(v),r.flags|=256,Pt(t,r,i,d),r.child}var fc={dehydrated:null,treeContext:null,retryLane:0};function hc(t){return{baseLanes:t,cachePool:null,transitions:null}}function Yh(t,r,i){var d=r.pendingProps,v=Je.current,y=!1,N=(r.flags&128)!==0,P;if((P=N)||(P=t!==null&&t.memoizedState===null?!1:(v&2)!==0),P?(y=!0,r.flags&=-129):(t===null||t.memoizedState!==null)&&(v|=1),Ge(Je,v&1),t===null)return $l(r),t=r.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?((r.mode&1)===0?r.lanes=1:t.data==="$!"?r.lanes=8:r.lanes=1073741824,null):(N=d.children,t=d.fallback,y?(d=r.mode,y=r.child,N={mode:"hidden",children:N},(d&1)===0&&y!==null?(y.childLanes=0,y.pendingProps=N):y=sa(N,d,0,null),t=Kr(t,d,i,null),y.return=r,t.return=r,y.sibling=t,r.child=y,r.child.memoizedState=hc(i),r.memoizedState=fc,t):pc(r,N));if(v=t.memoizedState,v!==null&&(P=v.dehydrated,P!==null))return hy(t,r,N,d,P,v,i);if(y){y=d.fallback,N=r.mode,v=t.child,P=v.sibling;var O={mode:"hidden",children:d.children};return(N&1)===0&&r.child!==v?(d=r.child,d.childLanes=0,d.pendingProps=O,r.deletions=null):(d=Nr(v,O),d.subtreeFlags=v.subtreeFlags&14680064),P!==null?y=Nr(P,y):(y=Kr(y,N,i,null),y.flags|=2),y.return=r,d.return=r,d.sibling=y,r.child=d,d=y,y=r.child,N=t.child.memoizedState,N=N===null?hc(i):{baseLanes:N.baseLanes|i,cachePool:null,transitions:N.transitions},y.memoizedState=N,y.childLanes=t.childLanes&~i,r.memoizedState=fc,d}return y=t.child,t=y.sibling,d=Nr(y,{mode:"visible",children:d.children}),(r.mode&1)===0&&(d.lanes=i),d.return=r,d.sibling=null,t!==null&&(i=r.deletions,i===null?(r.deletions=[t],r.flags|=16):i.push(t)),r.child=d,r.memoizedState=null,d}function pc(t,r){return r=sa({mode:"visible",children:r},t.mode,0,null),r.return=t,t.child=r}function Wi(t,r,i,d){return d!==null&&Ul(d),wo(r,t.child,null,i),t=pc(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function hy(t,r,i,d,v,y,N){if(i)return r.flags&256?(r.flags&=-257,d=lc(Error(o(422))),Wi(t,r,N,d)):r.memoizedState!==null?(r.child=t.child,r.flags|=128,null):(y=d.fallback,v=r.mode,d=sa({mode:"visible",children:d.children},v,0,null),y=Kr(y,v,N,null),y.flags|=2,d.return=r,y.return=r,d.sibling=y,r.child=d,(r.mode&1)!==0&&wo(r,t.child,null,N),r.child.memoizedState=hc(N),r.memoizedState=fc,y);if((r.mode&1)===0)return Wi(t,r,N,null);if(v.data==="$!"){if(d=v.nextSibling&&v.nextSibling.dataset,d)var P=d.dgst;return d=P,y=Error(o(419)),d=lc(y,d,void 0),Wi(t,r,N,d)}if(P=(N&t.childLanes)!==0,Ft||P){if(d=ut,d!==null){switch(N&-N){case 4:v=2;break;case 16:v=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:v=32;break;case 536870912:v=268435456;break;default:v=0}v=(v&(d.suspendedLanes|N))!==0?0:v,v!==0&&v!==y.retryLane&&(y.retryLane=v,Yn(t,v),wn(d,t,v,-1))}return Ic(),d=lc(Error(o(421))),Wi(t,r,N,d)}return v.data==="$?"?(r.flags|=128,r.child=t.child,r=Dy.bind(null,t),v._reactRetry=r,null):(t=y.treeContext,Yt=dr(v.nextSibling),Kt=r,qe=!0,vn=null,t!==null&&(rn[on++]=qn,rn[on++]=Kn,rn[on++]=Fr,qn=t.id,Kn=t.overflow,Fr=r),r=pc(r,d.children),r.flags|=4096,r)}function Qh(t,r,i){t.lanes|=r;var d=t.alternate;d!==null&&(d.lanes|=r),Hl(t.return,r,i)}function mc(t,r,i,d,v){var y=t.memoizedState;y===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:d,tail:i,tailMode:v}:(y.isBackwards=r,y.rendering=null,y.renderingStartTime=0,y.last=d,y.tail=i,y.tailMode=v)}function Jh(t,r,i){var d=r.pendingProps,v=d.revealOrder,y=d.tail;if(Pt(t,r,d.children,i),d=Je.current,(d&2)!==0)d=d&1|2,r.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Qh(t,i,r);else if(t.tag===19)Qh(t,i,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}d&=1}if(Ge(Je,d),(r.mode&1)===0)r.memoizedState=null;else switch(v){case"forwards":for(i=r.child,v=null;i!==null;)t=i.alternate,t!==null&&Fi(t)===null&&(v=i),i=i.sibling;i=v,i===null?(v=r.child,r.child=null):(v=i.sibling,i.sibling=null),mc(r,!1,v,i,y);break;case"backwards":for(i=null,v=r.child,r.child=null;v!==null;){if(t=v.alternate,t!==null&&Fi(t)===null){r.child=v;break}t=v.sibling,v.sibling=i,i=v,v=t}mc(r,!0,i,null,y);break;case"together":mc(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function qi(t,r){(r.mode&1)===0&&t!==null&&(t.alternate=null,r.alternate=null,r.flags|=2)}function Jn(t,r,i){if(t!==null&&(r.dependencies=t.dependencies),Gr|=r.lanes,(i&r.childLanes)===0)return null;if(t!==null&&r.child!==t.child)throw Error(o(153));if(r.child!==null){for(t=r.child,i=Nr(t,t.pendingProps),r.child=i,i.return=r;t.sibling!==null;)t=t.sibling,i=i.sibling=Nr(t,t.pendingProps),i.return=r;i.sibling=null}return r.child}function py(t,r,i){switch(r.tag){case 3:qh(r),bo();break;case 5:dh(r);break;case 1:Bt(r.type)&&Ai(r);break;case 4:Kl(r,r.stateNode.containerInfo);break;case 10:var d=r.type._context,v=r.memoizedProps.value;Ge(Oi,d._currentValue),d._currentValue=v;break;case 13:if(d=r.memoizedState,d!==null)return d.dehydrated!==null?(Ge(Je,Je.current&1),r.flags|=128,null):(i&r.child.childLanes)!==0?Yh(t,r,i):(Ge(Je,Je.current&1),t=Jn(t,r,i),t!==null?t.sibling:null);Ge(Je,Je.current&1);break;case 19:if(d=(i&r.childLanes)!==0,(t.flags&128)!==0){if(d)return Jh(t,r,i);r.flags|=128}if(v=r.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),Ge(Je,Je.current),d)break;return null;case 22:case 23:return r.lanes=0,Gh(t,r,i)}return Jn(t,r,i)}var Xh,gc,Zh,ep;Xh=function(t,r){for(var i=r.child;i!==null;){if(i.tag===5||i.tag===6)t.appendChild(i.stateNode);else if(i.tag!==4&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return;i=i.return}i.sibling.return=i.return,i=i.sibling}},gc=function(){},Zh=function(t,r,i,d){var v=t.memoizedProps;if(v!==d){t=r.stateNode,zr(On.current);var y=null;switch(i){case"input":v=Pe(t,v),d=Pe(t,d),y=[];break;case"select":v=Y({},v,{value:void 0}),d=Y({},d,{value:void 0}),y=[];break;case"textarea":v=kn(t,v),d=kn(t,d),y=[];break;default:typeof v.onClick!="function"&&typeof d.onClick=="function"&&(t.onclick=Di)}rr(i,d);var N;i=null;for(W in v)if(!d.hasOwnProperty(W)&&v.hasOwnProperty(W)&&v[W]!=null)if(W==="style"){var P=v[W];for(N in P)P.hasOwnProperty(N)&&(i||(i={}),i[N]="")}else W!=="dangerouslySetInnerHTML"&&W!=="children"&&W!=="suppressContentEditableWarning"&&W!=="suppressHydrationWarning"&&W!=="autoFocus"&&(l.hasOwnProperty(W)?y||(y=[]):(y=y||[]).push(W,null));for(W in d){var O=d[W];if(P=v?.[W],d.hasOwnProperty(W)&&O!==P&&(O!=null||P!=null))if(W==="style")if(P){for(N in P)!P.hasOwnProperty(N)||O&&O.hasOwnProperty(N)||(i||(i={}),i[N]="");for(N in O)O.hasOwnProperty(N)&&P[N]!==O[N]&&(i||(i={}),i[N]=O[N])}else i||(y||(y=[]),y.push(W,i)),i=O;else W==="dangerouslySetInnerHTML"?(O=O?O.__html:void 0,P=P?P.__html:void 0,O!=null&&P!==O&&(y=y||[]).push(W,O)):W==="children"?typeof O!="string"&&typeof O!="number"||(y=y||[]).push(W,""+O):W!=="suppressContentEditableWarning"&&W!=="suppressHydrationWarning"&&(l.hasOwnProperty(W)?(O!=null&&W==="onScroll"&&He("scroll",t),y||P===O||(y=[])):(y=y||[]).push(W,O))}i&&(y=y||[]).push("style",i);var W=y;(r.updateQueue=W)&&(r.flags|=4)}},ep=function(t,r,i,d){i!==d&&(r.flags|=4)};function gs(t,r){if(!qe)switch(t.tailMode){case"hidden":r=t.tail;for(var i=null;r!==null;)r.alternate!==null&&(i=r),r=r.sibling;i===null?t.tail=null:i.sibling=null;break;case"collapsed":i=t.tail;for(var d=null;i!==null;)i.alternate!==null&&(d=i),i=i.sibling;d===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:d.sibling=null}}function kt(t){var r=t.alternate!==null&&t.alternate.child===t.child,i=0,d=0;if(r)for(var v=t.child;v!==null;)i|=v.lanes|v.childLanes,d|=v.subtreeFlags&14680064,d|=v.flags&14680064,v.return=t,v=v.sibling;else for(v=t.child;v!==null;)i|=v.lanes|v.childLanes,d|=v.subtreeFlags,d|=v.flags,v.return=t,v=v.sibling;return t.subtreeFlags|=d,t.childLanes=i,r}function my(t,r,i){var d=r.pendingProps;switch(Bl(r),r.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return kt(r),null;case 1:return Bt(r.type)&&ki(),kt(r),null;case 3:return d=r.stateNode,So(),We(Lt),We(Dt),Jl(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(t===null||t.child===null)&&(Ti(r)?r.flags|=4:t===null||t.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,vn!==null&&(jc(vn),vn=null))),gc(t,r),kt(r),null;case 5:Yl(r);var v=zr(ds.current);if(i=r.type,t!==null&&r.stateNode!=null)Zh(t,r,i,d,v),t.ref!==r.ref&&(r.flags|=512,r.flags|=2097152);else{if(!d){if(r.stateNode===null)throw Error(o(166));return kt(r),null}if(t=zr(On.current),Ti(r)){d=r.stateNode,i=r.type;var y=r.memoizedProps;switch(d[Mn]=r,d[is]=y,t=(r.mode&1)!==0,i){case"dialog":He("cancel",d),He("close",d);break;case"iframe":case"object":case"embed":He("load",d);break;case"video":case"audio":for(v=0;v<rs.length;v++)He(rs[v],d);break;case"source":He("error",d);break;case"img":case"image":case"link":He("error",d),He("load",d);break;case"details":He("toggle",d);break;case"input":_e(d,y),He("invalid",d);break;case"select":d._wrapperState={wasMultiple:!!y.multiple},He("invalid",d);break;case"textarea":Rr(d,y),He("invalid",d)}rr(i,y),v=null;for(var N in y)if(y.hasOwnProperty(N)){var P=y[N];N==="children"?typeof P=="string"?d.textContent!==P&&(y.suppressHydrationWarning!==!0&&Ei(d.textContent,P,t),v=["children",P]):typeof P=="number"&&d.textContent!==""+P&&(y.suppressHydrationWarning!==!0&&Ei(d.textContent,P,t),v=["children",""+P]):l.hasOwnProperty(N)&&P!=null&&N==="onScroll"&&He("scroll",d)}switch(i){case"input":Re(d),Ct(d,y,!0);break;case"textarea":Re(d),ro(d);break;case"select":case"option":break;default:typeof y.onClick=="function"&&(d.onclick=Di)}d=v,r.updateQueue=d,d!==null&&(r.flags|=4)}else{N=v.nodeType===9?v:v.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Un(i)),t==="http://www.w3.org/1999/xhtml"?i==="script"?(t=N.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof d.is=="string"?t=N.createElement(i,{is:d.is}):(t=N.createElement(i),i==="select"&&(N=t,d.multiple?N.multiple=!0:d.size&&(N.size=d.size))):t=N.createElementNS(t,i),t[Mn]=r,t[is]=d,Xh(t,r,!1,!1),r.stateNode=t;e:{switch(N=zn(i,d),i){case"dialog":He("cancel",t),He("close",t),v=d;break;case"iframe":case"object":case"embed":He("load",t),v=d;break;case"video":case"audio":for(v=0;v<rs.length;v++)He(rs[v],t);v=d;break;case"source":He("error",t),v=d;break;case"img":case"image":case"link":He("error",t),He("load",t),v=d;break;case"details":He("toggle",t),v=d;break;case"input":_e(t,d),v=Pe(t,d),He("invalid",t);break;case"option":v=d;break;case"select":t._wrapperState={wasMultiple:!!d.multiple},v=Y({},d,{value:void 0}),He("invalid",t);break;case"textarea":Rr(t,d),v=kn(t,d),He("invalid",t);break;default:v=d}rr(i,v),P=v;for(y in P)if(P.hasOwnProperty(y)){var O=P[y];y==="style"?io(t,O):y==="dangerouslySetInnerHTML"?(O=O?O.__html:void 0,O!=null&&An(t,O)):y==="children"?typeof O=="string"?(i!=="textarea"||O!=="")&&In(t,O):typeof O=="number"&&In(t,""+O):y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&y!=="autoFocus"&&(l.hasOwnProperty(y)?O!=null&&y==="onScroll"&&He("scroll",t):O!=null&&A(t,y,O,N))}switch(i){case"input":Re(t),Ct(t,d,!1);break;case"textarea":Re(t),ro(t);break;case"option":d.value!=null&&t.setAttribute("value",""+ge(d.value));break;case"select":t.multiple=!!d.multiple,y=d.value,y!=null?lt(t,!!d.multiple,y,!1):d.defaultValue!=null&&lt(t,!!d.multiple,d.defaultValue,!0);break;default:typeof v.onClick=="function"&&(t.onclick=Di)}switch(i){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}}d&&(r.flags|=4)}r.ref!==null&&(r.flags|=512,r.flags|=2097152)}return kt(r),null;case 6:if(t&&r.stateNode!=null)ep(t,r,t.memoizedProps,d);else{if(typeof d!="string"&&r.stateNode===null)throw Error(o(166));if(i=zr(ds.current),zr(On.current),Ti(r)){if(d=r.stateNode,i=r.memoizedProps,d[Mn]=r,(y=d.nodeValue!==i)&&(t=Kt,t!==null))switch(t.tag){case 3:Ei(d.nodeValue,i,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ei(d.nodeValue,i,(t.mode&1)!==0)}y&&(r.flags|=4)}else d=(i.nodeType===9?i:i.ownerDocument).createTextNode(d),d[Mn]=r,r.stateNode=d}return kt(r),null;case 13:if(We(Je),d=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(qe&&Yt!==null&&(r.mode&1)!==0&&(r.flags&128)===0)rh(),bo(),r.flags|=98560,y=!1;else if(y=Ti(r),d!==null&&d.dehydrated!==null){if(t===null){if(!y)throw Error(o(318));if(y=r.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(o(317));y[Mn]=r}else bo(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;kt(r),y=!1}else vn!==null&&(jc(vn),vn=null),y=!0;if(!y)return r.flags&65536?r:null}return(r.flags&128)!==0?(r.lanes=i,r):(d=d!==null,d!==(t!==null&&t.memoizedState!==null)&&d&&(r.child.flags|=8192,(r.mode&1)!==0&&(t===null||(Je.current&1)!==0?it===0&&(it=3):Ic())),r.updateQueue!==null&&(r.flags|=4),kt(r),null);case 4:return So(),gc(t,r),t===null&&os(r.stateNode.containerInfo),kt(r),null;case 10:return Gl(r.type._context),kt(r),null;case 17:return Bt(r.type)&&ki(),kt(r),null;case 19:if(We(Je),y=r.memoizedState,y===null)return kt(r),null;if(d=(r.flags&128)!==0,N=y.rendering,N===null)if(d)gs(y,!1);else{if(it!==0||t!==null&&(t.flags&128)!==0)for(t=r.child;t!==null;){if(N=Fi(t),N!==null){for(r.flags|=128,gs(y,!1),d=N.updateQueue,d!==null&&(r.updateQueue=d,r.flags|=4),r.subtreeFlags=0,d=i,i=r.child;i!==null;)y=i,t=d,y.flags&=14680066,N=y.alternate,N===null?(y.childLanes=0,y.lanes=t,y.child=null,y.subtreeFlags=0,y.memoizedProps=null,y.memoizedState=null,y.updateQueue=null,y.dependencies=null,y.stateNode=null):(y.childLanes=N.childLanes,y.lanes=N.lanes,y.child=N.child,y.subtreeFlags=0,y.deletions=null,y.memoizedProps=N.memoizedProps,y.memoizedState=N.memoizedState,y.updateQueue=N.updateQueue,y.type=N.type,t=N.dependencies,y.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),i=i.sibling;return Ge(Je,Je.current&1|2),r.child}t=t.sibling}y.tail!==null&&et()>ko&&(r.flags|=128,d=!0,gs(y,!1),r.lanes=4194304)}else{if(!d)if(t=Fi(N),t!==null){if(r.flags|=128,d=!0,i=t.updateQueue,i!==null&&(r.updateQueue=i,r.flags|=4),gs(y,!0),y.tail===null&&y.tailMode==="hidden"&&!N.alternate&&!qe)return kt(r),null}else 2*et()-y.renderingStartTime>ko&&i!==1073741824&&(r.flags|=128,d=!0,gs(y,!1),r.lanes=4194304);y.isBackwards?(N.sibling=r.child,r.child=N):(i=y.last,i!==null?i.sibling=N:r.child=N,y.last=N)}return y.tail!==null?(r=y.tail,y.rendering=r,y.tail=r.sibling,y.renderingStartTime=et(),r.sibling=null,i=Je.current,Ge(Je,d?i&1|2:i&1),r):(kt(r),null);case 22:case 23:return Ac(),d=r.memoizedState!==null,t!==null&&t.memoizedState!==null!==d&&(r.flags|=8192),d&&(r.mode&1)!==0?(Qt&1073741824)!==0&&(kt(r),r.subtreeFlags&6&&(r.flags|=8192)):kt(r),null;case 24:return null;case 25:return null}throw Error(o(156,r.tag))}function gy(t,r){switch(Bl(r),r.tag){case 1:return Bt(r.type)&&ki(),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return So(),We(Lt),We(Dt),Jl(),t=r.flags,(t&65536)!==0&&(t&128)===0?(r.flags=t&-65537|128,r):null;case 5:return Yl(r),null;case 13:if(We(Je),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(o(340));bo()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return We(Je),null;case 4:return So(),null;case 10:return Gl(r.type._context),null;case 22:case 23:return Ac(),null;case 24:return null;default:return null}}var Ki=!1,At=!1,vy=typeof WeakSet=="function"?WeakSet:Set,ve=null;function Do(t,r){var i=t.ref;if(i!==null)if(typeof i=="function")try{i(null)}catch(d){Ze(t,r,d)}else i.current=null}function vc(t,r,i){try{i()}catch(d){Ze(t,r,d)}}var tp=!1;function xy(t,r){if(Al=pi,t=Tf(),wl(t)){if("selectionStart"in t)var i={start:t.selectionStart,end:t.selectionEnd};else e:{i=(i=t.ownerDocument)&&i.defaultView||window;var d=i.getSelection&&i.getSelection();if(d&&d.rangeCount!==0){i=d.anchorNode;var v=d.anchorOffset,y=d.focusNode;d=d.focusOffset;try{i.nodeType,y.nodeType}catch{i=null;break e}var N=0,P=-1,O=-1,W=0,oe=0,ie=t,re=null;t:for(;;){for(var me;ie!==i||v!==0&&ie.nodeType!==3||(P=N+v),ie!==y||d!==0&&ie.nodeType!==3||(O=N+d),ie.nodeType===3&&(N+=ie.nodeValue.length),(me=ie.firstChild)!==null;)re=ie,ie=me;for(;;){if(ie===t)break t;if(re===i&&++W===v&&(P=N),re===y&&++oe===d&&(O=N),(me=ie.nextSibling)!==null)break;ie=re,re=ie.parentNode}ie=me}i=P===-1||O===-1?null:{start:P,end:O}}else i=null}i=i||{start:0,end:0}}else i=null;for(Il={focusedElem:t,selectionRange:i},pi=!1,ve=r;ve!==null;)if(r=ve,t=r.child,(r.subtreeFlags&1028)!==0&&t!==null)t.return=r,ve=t;else for(;ve!==null;){r=ve;try{var ye=r.alternate;if((r.flags&1024)!==0)switch(r.tag){case 0:case 11:case 15:break;case 1:if(ye!==null){var be=ye.memoizedProps,tt=ye.memoizedState,V=r.stateNode,B=V.getSnapshotBeforeUpdate(r.elementType===r.type?be:xn(r.type,be),tt);V.__reactInternalSnapshotBeforeUpdate=B}break;case 3:var H=r.stateNode.containerInfo;H.nodeType===1?H.textContent="":H.nodeType===9&&H.documentElement&&H.removeChild(H.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(ce){Ze(r,r.return,ce)}if(t=r.sibling,t!==null){t.return=r.return,ve=t;break}ve=r.return}return ye=tp,tp=!1,ye}function vs(t,r,i){var d=r.updateQueue;if(d=d!==null?d.lastEffect:null,d!==null){var v=d=d.next;do{if((v.tag&t)===t){var y=v.destroy;v.destroy=void 0,y!==void 0&&vc(r,i,y)}v=v.next}while(v!==d)}}function Yi(t,r){if(r=r.updateQueue,r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var d=i.create;i.destroy=d()}i=i.next}while(i!==r)}}function xc(t){var r=t.ref;if(r!==null){var i=t.stateNode;switch(t.tag){case 5:t=i;break;default:t=i}typeof r=="function"?r(t):r.current=t}}function np(t){var r=t.alternate;r!==null&&(t.alternate=null,np(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&(delete r[Mn],delete r[is],delete r[Ml],delete r[ey],delete r[ty])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function rp(t){return t.tag===5||t.tag===3||t.tag===4}function op(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||rp(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function yc(t,r,i){var d=t.tag;if(d===5||d===6)t=t.stateNode,r?i.nodeType===8?i.parentNode.insertBefore(t,r):i.insertBefore(t,r):(i.nodeType===8?(r=i.parentNode,r.insertBefore(t,i)):(r=i,r.appendChild(t)),i=i._reactRootContainer,i!=null||r.onclick!==null||(r.onclick=Di));else if(d!==4&&(t=t.child,t!==null))for(yc(t,r,i),t=t.sibling;t!==null;)yc(t,r,i),t=t.sibling}function bc(t,r,i){var d=t.tag;if(d===5||d===6)t=t.stateNode,r?i.insertBefore(t,r):i.appendChild(t);else if(d!==4&&(t=t.child,t!==null))for(bc(t,r,i),t=t.sibling;t!==null;)bc(t,r,i),t=t.sibling}var vt=null,yn=!1;function vr(t,r,i){for(i=i.child;i!==null;)sp(t,r,i),i=i.sibling}function sp(t,r,i){if(Tn&&typeof Tn.onCommitFiberUnmount=="function")try{Tn.onCommitFiberUnmount(li,i)}catch{}switch(i.tag){case 5:At||Do(i,r);case 6:var d=vt,v=yn;vt=null,vr(t,r,i),vt=d,yn=v,vt!==null&&(yn?(t=vt,i=i.stateNode,t.nodeType===8?t.parentNode.removeChild(i):t.removeChild(i)):vt.removeChild(i.stateNode));break;case 18:vt!==null&&(yn?(t=vt,i=i.stateNode,t.nodeType===8?Tl(t.parentNode,i):t.nodeType===1&&Tl(t,i),Yo(t)):Tl(vt,i.stateNode));break;case 4:d=vt,v=yn,vt=i.stateNode.containerInfo,yn=!0,vr(t,r,i),vt=d,yn=v;break;case 0:case 11:case 14:case 15:if(!At&&(d=i.updateQueue,d!==null&&(d=d.lastEffect,d!==null))){v=d=d.next;do{var y=v,N=y.destroy;y=y.tag,N!==void 0&&((y&2)!==0||(y&4)!==0)&&vc(i,r,N),v=v.next}while(v!==d)}vr(t,r,i);break;case 1:if(!At&&(Do(i,r),d=i.stateNode,typeof d.componentWillUnmount=="function"))try{d.props=i.memoizedProps,d.state=i.memoizedState,d.componentWillUnmount()}catch(P){Ze(i,r,P)}vr(t,r,i);break;case 21:vr(t,r,i);break;case 22:i.mode&1?(At=(d=At)||i.memoizedState!==null,vr(t,r,i),At=d):vr(t,r,i);break;default:vr(t,r,i)}}function ip(t){var r=t.updateQueue;if(r!==null){t.updateQueue=null;var i=t.stateNode;i===null&&(i=t.stateNode=new vy),r.forEach(function(d){var v=jy.bind(null,t,d);i.has(d)||(i.add(d),d.then(v,v))})}}function bn(t,r){var i=r.deletions;if(i!==null)for(var d=0;d<i.length;d++){var v=i[d];try{var y=t,N=r,P=N;e:for(;P!==null;){switch(P.tag){case 5:vt=P.stateNode,yn=!1;break e;case 3:vt=P.stateNode.containerInfo,yn=!0;break e;case 4:vt=P.stateNode.containerInfo,yn=!0;break e}P=P.return}if(vt===null)throw Error(o(160));sp(y,N,v),vt=null,yn=!1;var O=v.alternate;O!==null&&(O.return=null),v.return=null}catch(W){Ze(v,r,W)}}if(r.subtreeFlags&12854)for(r=r.child;r!==null;)ap(r,t),r=r.sibling}function ap(t,r){var i=t.alternate,d=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(bn(r,t),Ln(t),d&4){try{vs(3,t,t.return),Yi(3,t)}catch(be){Ze(t,t.return,be)}try{vs(5,t,t.return)}catch(be){Ze(t,t.return,be)}}break;case 1:bn(r,t),Ln(t),d&512&&i!==null&&Do(i,i.return);break;case 5:if(bn(r,t),Ln(t),d&512&&i!==null&&Do(i,i.return),t.flags&32){var v=t.stateNode;try{In(v,"")}catch(be){Ze(t,t.return,be)}}if(d&4&&(v=t.stateNode,v!=null)){var y=t.memoizedProps,N=i!==null?i.memoizedProps:y,P=t.type,O=t.updateQueue;if(t.updateQueue=null,O!==null)try{P==="input"&&y.type==="radio"&&y.name!=null&&rt(v,y),zn(P,N);var W=zn(P,y);for(N=0;N<O.length;N+=2){var oe=O[N],ie=O[N+1];oe==="style"?io(v,ie):oe==="dangerouslySetInnerHTML"?An(v,ie):oe==="children"?In(v,ie):A(v,oe,ie,W)}switch(P){case"input":nn(v,y);break;case"textarea":Tr(v,y);break;case"select":var re=v._wrapperState.wasMultiple;v._wrapperState.wasMultiple=!!y.multiple;var me=y.value;me!=null?lt(v,!!y.multiple,me,!1):re!==!!y.multiple&&(y.defaultValue!=null?lt(v,!!y.multiple,y.defaultValue,!0):lt(v,!!y.multiple,y.multiple?[]:"",!1))}v[is]=y}catch(be){Ze(t,t.return,be)}}break;case 6:if(bn(r,t),Ln(t),d&4){if(t.stateNode===null)throw Error(o(162));v=t.stateNode,y=t.memoizedProps;try{v.nodeValue=y}catch(be){Ze(t,t.return,be)}}break;case 3:if(bn(r,t),Ln(t),d&4&&i!==null&&i.memoizedState.isDehydrated)try{Yo(r.containerInfo)}catch(be){Ze(t,t.return,be)}break;case 4:bn(r,t),Ln(t);break;case 13:bn(r,t),Ln(t),v=t.child,v.flags&8192&&(y=v.memoizedState!==null,v.stateNode.isHidden=y,!y||v.alternate!==null&&v.alternate.memoizedState!==null||(Cc=et())),d&4&&ip(t);break;case 22:if(oe=i!==null&&i.memoizedState!==null,t.mode&1?(At=(W=At)||oe,bn(r,t),At=W):bn(r,t),Ln(t),d&8192){if(W=t.memoizedState!==null,(t.stateNode.isHidden=W)&&!oe&&(t.mode&1)!==0)for(ve=t,oe=t.child;oe!==null;){for(ie=ve=oe;ve!==null;){switch(re=ve,me=re.child,re.tag){case 0:case 11:case 14:case 15:vs(4,re,re.return);break;case 1:Do(re,re.return);var ye=re.stateNode;if(typeof ye.componentWillUnmount=="function"){d=re,i=re.return;try{r=d,ye.props=r.memoizedProps,ye.state=r.memoizedState,ye.componentWillUnmount()}catch(be){Ze(d,i,be)}}break;case 5:Do(re,re.return);break;case 22:if(re.memoizedState!==null){up(ie);continue}}me!==null?(me.return=re,ve=me):up(ie)}oe=oe.sibling}e:for(oe=null,ie=t;;){if(ie.tag===5){if(oe===null){oe=ie;try{v=ie.stateNode,W?(y=v.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none"):(P=ie.stateNode,O=ie.memoizedProps.style,N=O!=null&&O.hasOwnProperty("display")?O.display:null,P.style.display=so("display",N))}catch(be){Ze(t,t.return,be)}}}else if(ie.tag===6){if(oe===null)try{ie.stateNode.nodeValue=W?"":ie.memoizedProps}catch(be){Ze(t,t.return,be)}}else if((ie.tag!==22&&ie.tag!==23||ie.memoizedState===null||ie===t)&&ie.child!==null){ie.child.return=ie,ie=ie.child;continue}if(ie===t)break e;for(;ie.sibling===null;){if(ie.return===null||ie.return===t)break e;oe===ie&&(oe=null),ie=ie.return}oe===ie&&(oe=null),ie.sibling.return=ie.return,ie=ie.sibling}}break;case 19:bn(r,t),Ln(t),d&4&&ip(t);break;case 21:break;default:bn(r,t),Ln(t)}}function Ln(t){var r=t.flags;if(r&2){try{e:{for(var i=t.return;i!==null;){if(rp(i)){var d=i;break e}i=i.return}throw Error(o(160))}switch(d.tag){case 5:var v=d.stateNode;d.flags&32&&(In(v,""),d.flags&=-33);var y=op(t);bc(t,y,v);break;case 3:case 4:var N=d.stateNode.containerInfo,P=op(t);yc(t,P,N);break;default:throw Error(o(161))}}catch(O){Ze(t,t.return,O)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function yy(t,r,i){ve=t,lp(t)}function lp(t,r,i){for(var d=(t.mode&1)!==0;ve!==null;){var v=ve,y=v.child;if(v.tag===22&&d){var N=v.memoizedState!==null||Ki;if(!N){var P=v.alternate,O=P!==null&&P.memoizedState!==null||At;P=Ki;var W=At;if(Ki=N,(At=O)&&!W)for(ve=v;ve!==null;)N=ve,O=N.child,N.tag===22&&N.memoizedState!==null?dp(v):O!==null?(O.return=N,ve=O):dp(v);for(;y!==null;)ve=y,lp(y),y=y.sibling;ve=v,Ki=P,At=W}cp(t)}else(v.subtreeFlags&8772)!==0&&y!==null?(y.return=v,ve=y):cp(t)}}function cp(t){for(;ve!==null;){var r=ve;if((r.flags&8772)!==0){var i=r.alternate;try{if((r.flags&8772)!==0)switch(r.tag){case 0:case 11:case 15:At||Yi(5,r);break;case 1:var d=r.stateNode;if(r.flags&4&&!At)if(i===null)d.componentDidMount();else{var v=r.elementType===r.type?i.memoizedProps:xn(r.type,i.memoizedProps);d.componentDidUpdate(v,i.memoizedState,d.__reactInternalSnapshotBeforeUpdate)}var y=r.updateQueue;y!==null&&uh(r,y,d);break;case 3:var N=r.updateQueue;if(N!==null){if(i=null,r.child!==null)switch(r.child.tag){case 5:i=r.child.stateNode;break;case 1:i=r.child.stateNode}uh(r,N,i)}break;case 5:var P=r.stateNode;if(i===null&&r.flags&4){i=P;var O=r.memoizedProps;switch(r.type){case"button":case"input":case"select":case"textarea":O.autoFocus&&i.focus();break;case"img":O.src&&(i.src=O.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(r.memoizedState===null){var W=r.alternate;if(W!==null){var oe=W.memoizedState;if(oe!==null){var ie=oe.dehydrated;ie!==null&&Yo(ie)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(o(163))}At||r.flags&512&&xc(r)}catch(re){Ze(r,r.return,re)}}if(r===t){ve=null;break}if(i=r.sibling,i!==null){i.return=r.return,ve=i;break}ve=r.return}}function up(t){for(;ve!==null;){var r=ve;if(r===t){ve=null;break}var i=r.sibling;if(i!==null){i.return=r.return,ve=i;break}ve=r.return}}function dp(t){for(;ve!==null;){var r=ve;try{switch(r.tag){case 0:case 11:case 15:var i=r.return;try{Yi(4,r)}catch(O){Ze(r,i,O)}break;case 1:var d=r.stateNode;if(typeof d.componentDidMount=="function"){var v=r.return;try{d.componentDidMount()}catch(O){Ze(r,v,O)}}var y=r.return;try{xc(r)}catch(O){Ze(r,y,O)}break;case 5:var N=r.return;try{xc(r)}catch(O){Ze(r,N,O)}}}catch(O){Ze(r,r.return,O)}if(r===t){ve=null;break}var P=r.sibling;if(P!==null){P.return=r.return,ve=P;break}ve=r.return}}var by=Math.ceil,Qi=D.ReactCurrentDispatcher,wc=D.ReactCurrentOwner,ln=D.ReactCurrentBatchConfig,Le=0,ut=null,nt=null,xt=0,Qt=0,jo=fr(0),it=0,xs=null,Gr=0,Ji=0,Nc=0,ys=null,$t=null,Cc=0,ko=1/0,Xn=null,Xi=!1,Sc=null,xr=null,Zi=!1,yr=null,ea=0,bs=0,Ec=null,ta=-1,na=0;function Rt(){return(Le&6)!==0?et():ta!==-1?ta:ta=et()}function br(t){return(t.mode&1)===0?1:(Le&2)!==0&&xt!==0?xt&-xt:ry.transition!==null?(na===0&&(na=rf()),na):(t=ze,t!==0||(t=window.event,t=t===void 0?16:hf(t.type)),t)}function wn(t,r,i,d){if(50<bs)throw bs=0,Ec=null,Error(o(185));Go(t,i,d),((Le&2)===0||t!==ut)&&(t===ut&&((Le&2)===0&&(Ji|=i),it===4&&wr(t,xt)),Ut(t,d),i===1&&Le===0&&(r.mode&1)===0&&(ko=et()+500,Ii&&pr()))}function Ut(t,r){var i=t.callbackNode;rx(t,r);var d=di(t,t===ut?xt:0);if(d===0)i!==null&&ef(i),t.callbackNode=null,t.callbackPriority=0;else if(r=d&-d,t.callbackPriority!==r){if(i!=null&&ef(i),r===1)t.tag===0?ny(hp.bind(null,t)):Xf(hp.bind(null,t)),Xx(function(){(Le&6)===0&&pr()}),i=null;else{switch(of(d)){case 1:i=ol;break;case 4:i=tf;break;case 16:i=ai;break;case 536870912:i=nf;break;default:i=ai}i=wp(i,fp.bind(null,t))}t.callbackPriority=r,t.callbackNode=i}}function fp(t,r){if(ta=-1,na=0,(Le&6)!==0)throw Error(o(327));var i=t.callbackNode;if(Ao()&&t.callbackNode!==i)return null;var d=di(t,t===ut?xt:0);if(d===0)return null;if((d&30)!==0||(d&t.expiredLanes)!==0||r)r=ra(t,d);else{r=d;var v=Le;Le|=2;var y=mp();(ut!==t||xt!==r)&&(Xn=null,ko=et()+500,Wr(t,r));do try{Cy();break}catch(P){pp(t,P)}while(!0);Vl(),Qi.current=y,Le=v,nt!==null?r=0:(ut=null,xt=0,r=it)}if(r!==0){if(r===2&&(v=sl(t),v!==0&&(d=v,r=Dc(t,v))),r===1)throw i=xs,Wr(t,0),wr(t,d),Ut(t,et()),i;if(r===6)wr(t,d);else{if(v=t.current.alternate,(d&30)===0&&!wy(v)&&(r=ra(t,d),r===2&&(y=sl(t),y!==0&&(d=y,r=Dc(t,y))),r===1))throw i=xs,Wr(t,0),wr(t,d),Ut(t,et()),i;switch(t.finishedWork=v,t.finishedLanes=d,r){case 0:case 1:throw Error(o(345));case 2:qr(t,$t,Xn);break;case 3:if(wr(t,d),(d&130023424)===d&&(r=Cc+500-et(),10<r)){if(di(t,0)!==0)break;if(v=t.suspendedLanes,(v&d)!==d){Rt(),t.pingedLanes|=t.suspendedLanes&v;break}t.timeoutHandle=Rl(qr.bind(null,t,$t,Xn),r);break}qr(t,$t,Xn);break;case 4:if(wr(t,d),(d&4194240)===d)break;for(r=t.eventTimes,v=-1;0<d;){var N=31-mn(d);y=1<<N,N=r[N],N>v&&(v=N),d&=~y}if(d=v,d=et()-d,d=(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3e3>d?3e3:4320>d?4320:1960*by(d/1960))-d,10<d){t.timeoutHandle=Rl(qr.bind(null,t,$t,Xn),d);break}qr(t,$t,Xn);break;case 5:qr(t,$t,Xn);break;default:throw Error(o(329))}}}return Ut(t,et()),t.callbackNode===i?fp.bind(null,t):null}function Dc(t,r){var i=ys;return t.current.memoizedState.isDehydrated&&(Wr(t,r).flags|=256),t=ra(t,r),t!==2&&(r=$t,$t=i,r!==null&&jc(r)),t}function jc(t){$t===null?$t=t:$t.push.apply($t,t)}function wy(t){for(var r=t;;){if(r.flags&16384){var i=r.updateQueue;if(i!==null&&(i=i.stores,i!==null))for(var d=0;d<i.length;d++){var v=i[d],y=v.getSnapshot;v=v.value;try{if(!gn(y(),v))return!1}catch{return!1}}}if(i=r.child,r.subtreeFlags&16384&&i!==null)i.return=r,r=i;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function wr(t,r){for(r&=~Nc,r&=~Ji,t.suspendedLanes|=r,t.pingedLanes&=~r,t=t.expirationTimes;0<r;){var i=31-mn(r),d=1<<i;t[i]=-1,r&=~d}}function hp(t){if((Le&6)!==0)throw Error(o(327));Ao();var r=di(t,0);if((r&1)===0)return Ut(t,et()),null;var i=ra(t,r);if(t.tag!==0&&i===2){var d=sl(t);d!==0&&(r=d,i=Dc(t,d))}if(i===1)throw i=xs,Wr(t,0),wr(t,r),Ut(t,et()),i;if(i===6)throw Error(o(345));return t.finishedWork=t.current.alternate,t.finishedLanes=r,qr(t,$t,Xn),Ut(t,et()),null}function kc(t,r){var i=Le;Le|=1;try{return t(r)}finally{Le=i,Le===0&&(ko=et()+500,Ii&&pr())}}function Hr(t){yr!==null&&yr.tag===0&&(Le&6)===0&&Ao();var r=Le;Le|=1;var i=ln.transition,d=ze;try{if(ln.transition=null,ze=1,t)return t()}finally{ze=d,ln.transition=i,Le=r,(Le&6)===0&&pr()}}function Ac(){Qt=jo.current,We(jo)}function Wr(t,r){t.finishedWork=null,t.finishedLanes=0;var i=t.timeoutHandle;if(i!==-1&&(t.timeoutHandle=-1,Jx(i)),nt!==null)for(i=nt.return;i!==null;){var d=i;switch(Bl(d),d.tag){case 1:d=d.type.childContextTypes,d!=null&&ki();break;case 3:So(),We(Lt),We(Dt),Jl();break;case 5:Yl(d);break;case 4:So();break;case 13:We(Je);break;case 19:We(Je);break;case 10:Gl(d.type._context);break;case 22:case 23:Ac()}i=i.return}if(ut=t,nt=t=Nr(t.current,null),xt=Qt=r,it=0,xs=null,Nc=Ji=Gr=0,$t=ys=null,Ur!==null){for(r=0;r<Ur.length;r++)if(i=Ur[r],d=i.interleaved,d!==null){i.interleaved=null;var v=d.next,y=i.pending;if(y!==null){var N=y.next;y.next=v,d.next=N}i.pending=d}Ur=null}return t}function pp(t,r){do{var i=nt;try{if(Vl(),$i.current=Gi,Ui){for(var d=Xe.memoizedState;d!==null;){var v=d.queue;v!==null&&(v.pending=null),d=d.next}Ui=!1}if(Vr=0,ct=st=Xe=null,fs=!1,hs=0,wc.current=null,i===null||i.return===null){it=1,xs=r,nt=null;break}e:{var y=t,N=i.return,P=i,O=r;if(r=xt,P.flags|=32768,O!==null&&typeof O=="object"&&typeof O.then=="function"){var W=O,oe=P,ie=oe.tag;if((oe.mode&1)===0&&(ie===0||ie===11||ie===15)){var re=oe.alternate;re?(oe.updateQueue=re.updateQueue,oe.memoizedState=re.memoizedState,oe.lanes=re.lanes):(oe.updateQueue=null,oe.memoizedState=null)}var me=Fh(N);if(me!==null){me.flags&=-257,$h(me,N,P,y,r),me.mode&1&&Bh(y,W,r),r=me,O=W;var ye=r.updateQueue;if(ye===null){var be=new Set;be.add(O),r.updateQueue=be}else ye.add(O);break e}else{if((r&1)===0){Bh(y,W,r),Ic();break e}O=Error(o(426))}}else if(qe&&P.mode&1){var tt=Fh(N);if(tt!==null){(tt.flags&65536)===0&&(tt.flags|=256),$h(tt,N,P,y,r),Ul(Eo(O,P));break e}}y=O=Eo(O,P),it!==4&&(it=2),ys===null?ys=[y]:ys.push(y),y=N;do{switch(y.tag){case 3:y.flags|=65536,r&=-r,y.lanes|=r;var V=_h(y,O,r);ch(y,V);break e;case 1:P=O;var B=y.type,H=y.stateNode;if((y.flags&128)===0&&(typeof B.getDerivedStateFromError=="function"||H!==null&&typeof H.componentDidCatch=="function"&&(xr===null||!xr.has(H)))){y.flags|=65536,r&=-r,y.lanes|=r;var ce=Lh(y,P,r);ch(y,ce);break e}}y=y.return}while(y!==null)}vp(i)}catch(Ne){r=Ne,nt===i&&i!==null&&(nt=i=i.return);continue}break}while(!0)}function mp(){var t=Qi.current;return Qi.current=Gi,t===null?Gi:t}function Ic(){(it===0||it===3||it===2)&&(it=4),ut===null||(Gr&268435455)===0&&(Ji&268435455)===0||wr(ut,xt)}function ra(t,r){var i=Le;Le|=2;var d=mp();(ut!==t||xt!==r)&&(Xn=null,Wr(t,r));do try{Ny();break}catch(v){pp(t,v)}while(!0);if(Vl(),Le=i,Qi.current=d,nt!==null)throw Error(o(261));return ut=null,xt=0,it}function Ny(){for(;nt!==null;)gp(nt)}function Cy(){for(;nt!==null&&!Kv();)gp(nt)}function gp(t){var r=bp(t.alternate,t,Qt);t.memoizedProps=t.pendingProps,r===null?vp(t):nt=r,wc.current=null}function vp(t){var r=t;do{var i=r.alternate;if(t=r.return,(r.flags&32768)===0){if(i=my(i,r,Qt),i!==null){nt=i;return}}else{if(i=gy(i,r),i!==null){i.flags&=32767,nt=i;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{it=6,nt=null;return}}if(r=r.sibling,r!==null){nt=r;return}nt=r=t}while(r!==null);it===0&&(it=5)}function qr(t,r,i){var d=ze,v=ln.transition;try{ln.transition=null,ze=1,Sy(t,r,i,d)}finally{ln.transition=v,ze=d}return null}function Sy(t,r,i,d){do Ao();while(yr!==null);if((Le&6)!==0)throw Error(o(327));i=t.finishedWork;var v=t.finishedLanes;if(i===null)return null;if(t.finishedWork=null,t.finishedLanes=0,i===t.current)throw Error(o(177));t.callbackNode=null,t.callbackPriority=0;var y=i.lanes|i.childLanes;if(ox(t,y),t===ut&&(nt=ut=null,xt=0),(i.subtreeFlags&2064)===0&&(i.flags&2064)===0||Zi||(Zi=!0,wp(ai,function(){return Ao(),null})),y=(i.flags&15990)!==0,(i.subtreeFlags&15990)!==0||y){y=ln.transition,ln.transition=null;var N=ze;ze=1;var P=Le;Le|=4,wc.current=null,xy(t,i),ap(i,t),Gx(Il),pi=!!Al,Il=Al=null,t.current=i,yy(i),Yv(),Le=P,ze=N,ln.transition=y}else t.current=i;if(Zi&&(Zi=!1,yr=t,ea=v),y=t.pendingLanes,y===0&&(xr=null),Xv(i.stateNode),Ut(t,et()),r!==null)for(d=t.onRecoverableError,i=0;i<r.length;i++)v=r[i],d(v.value,{componentStack:v.stack,digest:v.digest});if(Xi)throw Xi=!1,t=Sc,Sc=null,t;return(ea&1)!==0&&t.tag!==0&&Ao(),y=t.pendingLanes,(y&1)!==0?t===Ec?bs++:(bs=0,Ec=t):bs=0,pr(),null}function Ao(){if(yr!==null){var t=of(ea),r=ln.transition,i=ze;try{if(ln.transition=null,ze=16>t?16:t,yr===null)var d=!1;else{if(t=yr,yr=null,ea=0,(Le&6)!==0)throw Error(o(331));var v=Le;for(Le|=4,ve=t.current;ve!==null;){var y=ve,N=y.child;if((ve.flags&16)!==0){var P=y.deletions;if(P!==null){for(var O=0;O<P.length;O++){var W=P[O];for(ve=W;ve!==null;){var oe=ve;switch(oe.tag){case 0:case 11:case 15:vs(8,oe,y)}var ie=oe.child;if(ie!==null)ie.return=oe,ve=ie;else for(;ve!==null;){oe=ve;var re=oe.sibling,me=oe.return;if(np(oe),oe===W){ve=null;break}if(re!==null){re.return=me,ve=re;break}ve=me}}}var ye=y.alternate;if(ye!==null){var be=ye.child;if(be!==null){ye.child=null;do{var tt=be.sibling;be.sibling=null,be=tt}while(be!==null)}}ve=y}}if((y.subtreeFlags&2064)!==0&&N!==null)N.return=y,ve=N;else e:for(;ve!==null;){if(y=ve,(y.flags&2048)!==0)switch(y.tag){case 0:case 11:case 15:vs(9,y,y.return)}var V=y.sibling;if(V!==null){V.return=y.return,ve=V;break e}ve=y.return}}var B=t.current;for(ve=B;ve!==null;){N=ve;var H=N.child;if((N.subtreeFlags&2064)!==0&&H!==null)H.return=N,ve=H;else e:for(N=B;ve!==null;){if(P=ve,(P.flags&2048)!==0)try{switch(P.tag){case 0:case 11:case 15:Yi(9,P)}}catch(Ne){Ze(P,P.return,Ne)}if(P===N){ve=null;break e}var ce=P.sibling;if(ce!==null){ce.return=P.return,ve=ce;break e}ve=P.return}}if(Le=v,pr(),Tn&&typeof Tn.onPostCommitFiberRoot=="function")try{Tn.onPostCommitFiberRoot(li,t)}catch{}d=!0}return d}finally{ze=i,ln.transition=r}}return!1}function xp(t,r,i){r=Eo(i,r),r=_h(t,r,1),t=gr(t,r,1),r=Rt(),t!==null&&(Go(t,1,r),Ut(t,r))}function Ze(t,r,i){if(t.tag===3)xp(t,t,i);else for(;r!==null;){if(r.tag===3){xp(r,t,i);break}else if(r.tag===1){var d=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(xr===null||!xr.has(d))){t=Eo(i,t),t=Lh(r,t,1),r=gr(r,t,1),t=Rt(),r!==null&&(Go(r,1,t),Ut(r,t));break}}r=r.return}}function Ey(t,r,i){var d=t.pingCache;d!==null&&d.delete(r),r=Rt(),t.pingedLanes|=t.suspendedLanes&i,ut===t&&(xt&i)===i&&(it===4||it===3&&(xt&130023424)===xt&&500>et()-Cc?Wr(t,0):Nc|=i),Ut(t,r)}function yp(t,r){r===0&&((t.mode&1)===0?r=1:(r=ui,ui<<=1,(ui&130023424)===0&&(ui=4194304)));var i=Rt();t=Yn(t,r),t!==null&&(Go(t,r,i),Ut(t,i))}function Dy(t){var r=t.memoizedState,i=0;r!==null&&(i=r.retryLane),yp(t,i)}function jy(t,r){var i=0;switch(t.tag){case 13:var d=t.stateNode,v=t.memoizedState;v!==null&&(i=v.retryLane);break;case 19:d=t.stateNode;break;default:throw Error(o(314))}d!==null&&d.delete(r),yp(t,i)}var bp;bp=function(t,r,i){if(t!==null)if(t.memoizedProps!==r.pendingProps||Lt.current)Ft=!0;else{if((t.lanes&i)===0&&(r.flags&128)===0)return Ft=!1,py(t,r,i);Ft=(t.flags&131072)!==0}else Ft=!1,qe&&(r.flags&1048576)!==0&&Zf(r,Ri,r.index);switch(r.lanes=0,r.tag){case 2:var d=r.type;qi(t,r),t=r.pendingProps;var v=vo(r,Dt.current);Co(r,i),v=ec(null,r,d,t,v,i);var y=tc();return r.flags|=1,typeof v=="object"&&v!==null&&typeof v.render=="function"&&v.$$typeof===void 0?(r.tag=1,r.memoizedState=null,r.updateQueue=null,Bt(d)?(y=!0,Ai(r)):y=!1,r.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,ql(r),v.updater=Hi,r.stateNode=v,v._reactInternals=r,ac(r,d,t,i),r=dc(null,r,d,!0,y,i)):(r.tag=0,qe&&y&&Ll(r),Pt(null,r,v,i),r=r.child),r;case 16:d=r.elementType;e:{switch(qi(t,r),t=r.pendingProps,v=d._init,d=v(d._payload),r.type=d,v=r.tag=Ay(d),t=xn(d,t),v){case 0:r=uc(null,r,d,t,i);break e;case 1:r=Wh(null,r,d,t,i);break e;case 11:r=Uh(null,r,d,t,i);break e;case 14:r=zh(null,r,d,xn(d.type,t),i);break e}throw Error(o(306,d,""))}return r;case 0:return d=r.type,v=r.pendingProps,v=r.elementType===d?v:xn(d,v),uc(t,r,d,v,i);case 1:return d=r.type,v=r.pendingProps,v=r.elementType===d?v:xn(d,v),Wh(t,r,d,v,i);case 3:e:{if(qh(r),t===null)throw Error(o(387));d=r.pendingProps,y=r.memoizedState,v=y.element,lh(t,r),Bi(r,d,null,i);var N=r.memoizedState;if(d=N.element,y.isDehydrated)if(y={element:d,isDehydrated:!1,cache:N.cache,pendingSuspenseBoundaries:N.pendingSuspenseBoundaries,transitions:N.transitions},r.updateQueue.baseState=y,r.memoizedState=y,r.flags&256){v=Eo(Error(o(423)),r),r=Kh(t,r,d,i,v);break e}else if(d!==v){v=Eo(Error(o(424)),r),r=Kh(t,r,d,i,v);break e}else for(Yt=dr(r.stateNode.containerInfo.firstChild),Kt=r,qe=!0,vn=null,i=ih(r,null,d,i),r.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(bo(),d===v){r=Jn(t,r,i);break e}Pt(t,r,d,i)}r=r.child}return r;case 5:return dh(r),t===null&&$l(r),d=r.type,v=r.pendingProps,y=t!==null?t.memoizedProps:null,N=v.children,Pl(d,v)?N=null:y!==null&&Pl(d,y)&&(r.flags|=32),Hh(t,r),Pt(t,r,N,i),r.child;case 6:return t===null&&$l(r),null;case 13:return Yh(t,r,i);case 4:return Kl(r,r.stateNode.containerInfo),d=r.pendingProps,t===null?r.child=wo(r,null,d,i):Pt(t,r,d,i),r.child;case 11:return d=r.type,v=r.pendingProps,v=r.elementType===d?v:xn(d,v),Uh(t,r,d,v,i);case 7:return Pt(t,r,r.pendingProps,i),r.child;case 8:return Pt(t,r,r.pendingProps.children,i),r.child;case 12:return Pt(t,r,r.pendingProps.children,i),r.child;case 10:e:{if(d=r.type._context,v=r.pendingProps,y=r.memoizedProps,N=v.value,Ge(Oi,d._currentValue),d._currentValue=N,y!==null)if(gn(y.value,N)){if(y.children===v.children&&!Lt.current){r=Jn(t,r,i);break e}}else for(y=r.child,y!==null&&(y.return=r);y!==null;){var P=y.dependencies;if(P!==null){N=y.child;for(var O=P.firstContext;O!==null;){if(O.context===d){if(y.tag===1){O=Qn(-1,i&-i),O.tag=2;var W=y.updateQueue;if(W!==null){W=W.shared;var oe=W.pending;oe===null?O.next=O:(O.next=oe.next,oe.next=O),W.pending=O}}y.lanes|=i,O=y.alternate,O!==null&&(O.lanes|=i),Hl(y.return,i,r),P.lanes|=i;break}O=O.next}}else if(y.tag===10)N=y.type===r.type?null:y.child;else if(y.tag===18){if(N=y.return,N===null)throw Error(o(341));N.lanes|=i,P=N.alternate,P!==null&&(P.lanes|=i),Hl(N,i,r),N=y.sibling}else N=y.child;if(N!==null)N.return=y;else for(N=y;N!==null;){if(N===r){N=null;break}if(y=N.sibling,y!==null){y.return=N.return,N=y;break}N=N.return}y=N}Pt(t,r,v.children,i),r=r.child}return r;case 9:return v=r.type,d=r.pendingProps.children,Co(r,i),v=sn(v),d=d(v),r.flags|=1,Pt(t,r,d,i),r.child;case 14:return d=r.type,v=xn(d,r.pendingProps),v=xn(d.type,v),zh(t,r,d,v,i);case 15:return Vh(t,r,r.type,r.pendingProps,i);case 17:return d=r.type,v=r.pendingProps,v=r.elementType===d?v:xn(d,v),qi(t,r),r.tag=1,Bt(d)?(t=!0,Ai(r)):t=!1,Co(r,i),Mh(r,d,v),ac(r,d,v,i),dc(null,r,d,!0,t,i);case 19:return Jh(t,r,i);case 22:return Gh(t,r,i)}throw Error(o(156,r.tag))};function wp(t,r){return Zd(t,r)}function ky(t,r,i,d){this.tag=t,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function cn(t,r,i,d){return new ky(t,r,i,d)}function Pc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Ay(t){if(typeof t=="function")return Pc(t)?1:0;if(t!=null){if(t=t.$$typeof,t===L)return 11;if(t===X)return 14}return 2}function Nr(t,r){var i=t.alternate;return i===null?(i=cn(t.tag,r,t.key,t.mode),i.elementType=t.elementType,i.type=t.type,i.stateNode=t.stateNode,i.alternate=t,t.alternate=i):(i.pendingProps=r,i.type=t.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=t.flags&14680064,i.childLanes=t.childLanes,i.lanes=t.lanes,i.child=t.child,i.memoizedProps=t.memoizedProps,i.memoizedState=t.memoizedState,i.updateQueue=t.updateQueue,r=t.dependencies,i.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},i.sibling=t.sibling,i.index=t.index,i.ref=t.ref,i}function oa(t,r,i,d,v,y){var N=2;if(d=t,typeof t=="function")Pc(t)&&(N=1);else if(typeof t=="string")N=5;else e:switch(t){case M:return Kr(i.children,v,y,r);case _:N=8,v|=8;break;case K:return t=cn(12,i,r,v|2),t.elementType=K,t.lanes=y,t;case $:return t=cn(13,i,r,v),t.elementType=$,t.lanes=y,t;case G:return t=cn(19,i,r,v),t.elementType=G,t.lanes=y,t;case se:return sa(i,v,y,r);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case J:N=10;break e;case te:N=9;break e;case L:N=11;break e;case X:N=14;break e;case ee:N=16,d=null;break e}throw Error(o(130,t==null?t:typeof t,""))}return r=cn(N,i,r,v),r.elementType=t,r.type=d,r.lanes=y,r}function Kr(t,r,i,d){return t=cn(7,t,d,r),t.lanes=i,t}function sa(t,r,i,d){return t=cn(22,t,d,r),t.elementType=se,t.lanes=i,t.stateNode={isHidden:!1},t}function Rc(t,r,i){return t=cn(6,t,null,r),t.lanes=i,t}function Tc(t,r,i){return r=cn(4,t.children!==null?t.children:[],t.key,r),r.lanes=i,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}function Iy(t,r,i,d,v){this.tag=r,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=il(0),this.expirationTimes=il(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=il(0),this.identifierPrefix=d,this.onRecoverableError=v,this.mutableSourceEagerHydrationData=null}function Mc(t,r,i,d,v,y,N,P,O){return t=new Iy(t,r,i,P,O),r===1?(r=1,y===!0&&(r|=8)):r=0,y=cn(3,null,null,r),t.current=y,y.stateNode=t,y.memoizedState={element:d,isDehydrated:i,cache:null,transitions:null,pendingSuspenseBoundaries:null},ql(y),t}function Py(t,r,i){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:T,key:d==null?null:""+d,children:t,containerInfo:r,implementation:i}}function Np(t){if(!t)return hr;t=t._reactInternals;e:{if(_r(t)!==t||t.tag!==1)throw Error(o(170));var r=t;do{switch(r.tag){case 3:r=r.stateNode.context;break e;case 1:if(Bt(r.type)){r=r.stateNode.__reactInternalMemoizedMergedChildContext;break e}}r=r.return}while(r!==null);throw Error(o(171))}if(t.tag===1){var i=t.type;if(Bt(i))return Qf(t,i,r)}return r}function Cp(t,r,i,d,v,y,N,P,O){return t=Mc(i,d,!0,t,v,y,N,P,O),t.context=Np(null),i=t.current,d=Rt(),v=br(i),y=Qn(d,v),y.callback=r??null,gr(i,y,v),t.current.lanes=v,Go(t,v,d),Ut(t,d),t}function ia(t,r,i,d){var v=r.current,y=Rt(),N=br(v);return i=Np(i),r.context===null?r.context=i:r.pendingContext=i,r=Qn(y,N),r.payload={element:t},d=d===void 0?null:d,d!==null&&(r.callback=d),t=gr(v,r,N),t!==null&&(wn(t,v,N,y),Li(t,v,N)),N}function aa(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Sp(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var i=t.retryLane;t.retryLane=i!==0&&i<r?i:r}}function Oc(t,r){Sp(t,r),(t=t.alternate)&&Sp(t,r)}function Ry(){return null}var Ep=typeof reportError=="function"?reportError:function(t){console.error(t)};function _c(t){this._internalRoot=t}la.prototype.render=_c.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(o(409));ia(t,r,null,null)},la.prototype.unmount=_c.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;Hr(function(){ia(null,t,null,null)}),r[Hn]=null}};function la(t){this._internalRoot=t}la.prototype.unstable_scheduleHydration=function(t){if(t){var r=lf();t={blockedOn:null,target:t,priority:r};for(var i=0;i<lr.length&&r!==0&&r<lr[i].priority;i++);lr.splice(i,0,t),i===0&&df(t)}};function Lc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ca(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Dp(){}function Ty(t,r,i,d,v){if(v){if(typeof d=="function"){var y=d;d=function(){var W=aa(N);y.call(W)}}var N=Cp(r,d,t,0,null,!1,!1,"",Dp);return t._reactRootContainer=N,t[Hn]=N.current,os(t.nodeType===8?t.parentNode:t),Hr(),N}for(;v=t.lastChild;)t.removeChild(v);if(typeof d=="function"){var P=d;d=function(){var W=aa(O);P.call(W)}}var O=Mc(t,0,!1,null,null,!1,!1,"",Dp);return t._reactRootContainer=O,t[Hn]=O.current,os(t.nodeType===8?t.parentNode:t),Hr(function(){ia(r,O,i,d)}),O}function ua(t,r,i,d,v){var y=i._reactRootContainer;if(y){var N=y;if(typeof v=="function"){var P=v;v=function(){var O=aa(N);P.call(O)}}ia(r,N,t,v)}else N=Ty(i,r,t,v,d);return aa(N)}sf=function(t){switch(t.tag){case 3:var r=t.stateNode;if(r.current.memoizedState.isDehydrated){var i=Vo(r.pendingLanes);i!==0&&(al(r,i|1),Ut(r,et()),(Le&6)===0&&(ko=et()+500,pr()))}break;case 13:Hr(function(){var d=Yn(t,1);if(d!==null){var v=Rt();wn(d,t,1,v)}}),Oc(t,1)}},ll=function(t){if(t.tag===13){var r=Yn(t,134217728);if(r!==null){var i=Rt();wn(r,t,134217728,i)}Oc(t,134217728)}},af=function(t){if(t.tag===13){var r=br(t),i=Yn(t,r);if(i!==null){var d=Rt();wn(i,t,r,d)}Oc(t,r)}},lf=function(){return ze},cf=function(t,r){var i=ze;try{return ze=t,r()}finally{ze=i}},or=function(t,r,i){switch(r){case"input":if(nn(t,i),r=i.name,i.type==="radio"&&r!=null){for(i=t;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),r=0;r<i.length;r++){var d=i[r];if(d!==t&&d.form===t.form){var v=ji(d);if(!v)throw Error(o(90));De(d),nn(d,v)}}}break;case"textarea":Tr(t,i);break;case"select":r=i.value,r!=null&&lt(t,!!i.multiple,r,!1)}},Be=kc,$e=Hr;var My={usingClientEntryPoint:!1,Events:[as,mo,ji,he,Ie,kc]},ws={findFiberByHostInstance:Lr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Oy={bundleType:ws.bundleType,version:ws.version,rendererPackageName:ws.rendererPackageName,rendererConfig:ws.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:D.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Jd(t),t===null?null:t.stateNode},findFiberByHostInstance:ws.findFiberByHostInstance||Ry,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var da=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!da.isDisabled&&da.supportsFiber)try{li=da.inject(Oy),Tn=da}catch{}}return zt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=My,zt.createPortal=function(t,r){var i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Lc(r))throw Error(o(200));return Py(t,r,null,i)},zt.createRoot=function(t,r){if(!Lc(t))throw Error(o(299));var i=!1,d="",v=Ep;return r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(d=r.identifierPrefix),r.onRecoverableError!==void 0&&(v=r.onRecoverableError)),r=Mc(t,1,!1,null,null,i,!1,d,v),t[Hn]=r.current,os(t.nodeType===8?t.parentNode:t),new _c(r)},zt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(o(188)):(t=Object.keys(t).join(","),Error(o(268,t)));return t=Jd(r),t=t===null?null:t.stateNode,t},zt.flushSync=function(t){return Hr(t)},zt.hydrate=function(t,r,i){if(!ca(r))throw Error(o(200));return ua(null,t,r,!0,i)},zt.hydrateRoot=function(t,r,i){if(!Lc(t))throw Error(o(405));var d=i!=null&&i.hydratedSources||null,v=!1,y="",N=Ep;if(i!=null&&(i.unstable_strictMode===!0&&(v=!0),i.identifierPrefix!==void 0&&(y=i.identifierPrefix),i.onRecoverableError!==void 0&&(N=i.onRecoverableError)),r=Cp(r,null,t,1,i??null,v,!1,y,N),t[Hn]=r.current,os(t),d)for(t=0;t<d.length;t++)i=d[t],v=i._getVersion,v=v(i._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[i,v]:r.mutableSourceEagerHydrationData.push(i,v);return new la(r)},zt.render=function(t,r,i){if(!ca(r))throw Error(o(200));return ua(null,t,r,!1,i)},zt.unmountComponentAtNode=function(t){if(!ca(t))throw Error(o(40));return t._reactRootContainer?(Hr(function(){ua(null,null,t,!1,function(){t._reactRootContainer=null,t[Hn]=null})}),!0):!1},zt.unstable_batchedUpdates=kc,zt.unstable_renderSubtreeIntoContainer=function(t,r,i,d){if(!ca(i))throw Error(o(200));if(t==null||t._reactInternals===void 0)throw Error(o(38));return ua(t,r,i,!1,d)},zt.version="18.3.1-next-f1338f8080-20240426",zt}var Mp;function Ug(){if(Mp)return $c.exports;Mp=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(n){console.error(n)}}return e(),$c.exports=zy(),$c.exports}var Op;function Vy(){if(Op)return ha;Op=1;var e=Ug();return ha.createRoot=e.createRoot,ha.hydrateRoot=e.hydrateRoot,ha}var Gy=Vy();const Hy=Pr(Gy);var Vc,_p;function Wy(){if(_p)return Vc;_p=1,Vc=e;function e(n,o,s){if(n!=null&&typeof n!="number")throw new Error("start must be a number or null");if(o!=null&&typeof o!="number")throw new Error("stop must be a number or null");if(s!=null&&typeof s!="number")throw new Error("step must be a number or null");o==null&&(o=n||0,n=0),s==null&&(s=o>n?1:-1);for(var l=[],a=n<o;a?n<o:n>o;n+=s)l.push(n);return l}return Vc}var qy=Wy();const nd=Pr(qy);var Gc={exports:{}},Hc,Lp;function Ky(){if(Lp)return Hc;Lp=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Hc=e,Hc}var Wc,Bp;function Yy(){if(Bp)return Wc;Bp=1;var e=Ky();function n(){}function o(){}return o.resetWarningCache=n,Wc=function(){function s(u,f,h,p,m,g){if(g!==e){var x=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw x.name="Invariant Violation",x}}s.isRequired=s;function l(){return s}var a={array:s,bigint:s,bool:s,func:s,number:s,object:s,string:s,symbol:s,any:s,arrayOf:l,element:s,elementType:s,instanceOf:l,node:s,objectOf:l,oneOf:l,oneOfType:l,shape:l,exact:l,checkPropTypes:o,resetWarningCache:n};return a.PropTypes=a,a},Wc}var Fp;function Qy(){return Fp||(Fp=1,Gc.exports=Yy()()),Gc.exports}var Jy=Qy();const Se=Pr(Jy);var qc={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var $p;function Xy(){return $p||($p=1,function(e){(function(){var n={}.hasOwnProperty;function o(){for(var a="",u=0;u<arguments.length;u++){var f=arguments[u];f&&(a=l(a,s(f)))}return a}function s(a){if(typeof a=="string"||typeof a=="number")return a;if(typeof a!="object")return"";if(Array.isArray(a))return o.apply(null,a);if(a.toString!==Object.prototype.toString&&!a.toString.toString().includes("[native code]"))return a.toString();var u="";for(var f in a)n.call(a,f)&&a[f]&&(u=l(u,f));return u}function l(a,u){return u?a?a+" "+u:a+u:a}e.exports?(o.default=o,e.exports=o):window.classNames=o})()}(qc)),qc.exports}var Zy=Xy();const pt=Pr(Zy);var Kc,Up;function eb(){if(Up)return Kc;Up=1;var e=200,n="__lodash_hash_undefined__",o=9007199254740991,s="[object Arguments]",l="[object Function]",a="[object GeneratorFunction]",u=/[\\^$.*+?()[\]{}|]/g,f=/^\[object .+?Constructor\]$/,h=typeof fa=="object"&&fa&&fa.Object===Object&&fa,p=typeof self=="object"&&self&&self.Object===Object&&self,m=h||p||Function("return this")();function g(z,Z,he){switch(he.length){case 0:return z.call(Z);case 1:return z.call(Z,he[0]);case 2:return z.call(Z,he[0],he[1]);case 3:return z.call(Z,he[0],he[1],he[2])}return z.apply(Z,he)}function x(z,Z){var he=z?z.length:0;return!!he&&E(z,Z,0)>-1}function b(z,Z){for(var he=-1,Ie=Z.length,Be=z.length;++he<Ie;)z[Be+he]=Z[he];return z}function C(z,Z,he,Ie){for(var Be=z.length,$e=he+-1;++$e<Be;)if(Z(z[$e],$e,z))return $e;return-1}function E(z,Z,he){if(Z!==Z)return C(z,S,he);for(var Ie=he-1,Be=z.length;++Ie<Be;)if(z[Ie]===Z)return Ie;return-1}function S(z){return z!==z}function j(z,Z){return z.has(Z)}function R(z,Z){return z?.[Z]}function A(z){var Z=!1;if(z!=null&&typeof z.toString!="function")try{Z=!!(z+"")}catch{}return Z}var D=Array.prototype,I=Function.prototype,T=Object.prototype,M=m["__core-js_shared__"],_=function(){var z=/[^.]+$/.exec(M&&M.keys&&M.keys.IE_PROTO||"");return z?"Symbol(src)_1."+z:""}(),K=I.toString,J=T.hasOwnProperty,te=T.toString,L=RegExp("^"+K.call(J).replace(u,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),$=m.Symbol,G=T.propertyIsEnumerable,X=D.splice,ee=$?$.isConcatSpreadable:void 0,se=Math.max,q=Gt(m,"Map"),Q=Gt(Object,"create");function Y(z){var Z=-1,he=z?z.length:0;for(this.clear();++Z<he;){var Ie=z[Z];this.set(Ie[0],Ie[1])}}function k(){this.__data__=Q?Q(null):{}}function U(z){return this.has(z)&&delete this.__data__[z]}function ae(z){var Z=this.__data__;if(Q){var he=Z[z];return he===n?void 0:he}return J.call(Z,z)?Z[z]:void 0}function fe(z){var Z=this.__data__;return Q?Z[z]!==void 0:J.call(Z,z)}function ne(z,Z){var he=this.__data__;return he[z]=Q&&Z===void 0?n:Z,this}Y.prototype.clear=k,Y.prototype.delete=U,Y.prototype.get=ae,Y.prototype.has=fe,Y.prototype.set=ne;function de(z){var Z=-1,he=z?z.length:0;for(this.clear();++Z<he;){var Ie=z[Z];this.set(Ie[0],Ie[1])}}function Ee(){this.__data__=[]}function ge(z){var Z=this.__data__,he=lt(Z,z);if(he<0)return!1;var Ie=Z.length-1;return he==Ie?Z.pop():X.call(Z,he,1),!0}function le(z){var Z=this.__data__,he=lt(Z,z);return he<0?void 0:Z[he][1]}function pe(z){return lt(this.__data__,z)>-1}function Re(z,Z){var he=this.__data__,Ie=lt(he,z);return Ie<0?he.push([z,Z]):he[Ie][1]=Z,this}de.prototype.clear=Ee,de.prototype.delete=ge,de.prototype.get=le,de.prototype.has=pe,de.prototype.set=Re;function De(z){var Z=-1,he=z?z.length:0;for(this.clear();++Z<he;){var Ie=z[Z];this.set(Ie[0],Ie[1])}}function xe(){this.__data__={hash:new Y,map:new(q||de),string:new Y}}function Pe(z){return Un(this,z).delete(z)}function _e(z){return Un(this,z).get(z)}function rt(z){return Un(this,z).has(z)}function nn(z,Z){return Un(this,z).set(z,Z),this}De.prototype.clear=xe,De.prototype.delete=Pe,De.prototype.get=_e,De.prototype.has=rt,De.prototype.set=nn;function Ct(z){var Z=-1,he=z?z.length:0;for(this.__data__=new De;++Z<he;)this.add(z[Z])}function pn(z){return this.__data__.set(z,n),this}function ot(z){return this.__data__.has(z)}Ct.prototype.add=Ct.prototype.push=pn,Ct.prototype.has=ot;function lt(z,Z){for(var he=z.length;he--;)if(so(z[he][0],Z))return he;return-1}function kn(z,Z,he,Ie){var Be=-1,$e=x,Ye=!0,It=z.length,Ve=[],Ot=Z.length;if(!It)return Ve;Z.length>=e&&($e=j,Ye=!1,Z=new Ct(Z));e:for(;++Be<It;){var Qe=z[Be],Et=Qe;if(Qe=Qe!==0?Qe:0,Ye&&Et===Et){for(var _t=Ot;_t--;)if(Z[_t]===Et)continue e;Ve.push(Qe)}else $e(Z,Et,Ie)||Ve.push(Qe)}return Ve}function Rr(z,Z,he,Ie,Be){var $e=-1,Ye=z.length;for(he||(he=Ht),Be||(Be=[]);++$e<Ye;){var It=z[$e];he(It)&&b(Be,It)}return Be}function Tr(z){if(!or(z)||In(z))return!1;var Z=Vn(z)||A(z)?L:f;return Z.test(St(z))}function ro(z,Z){return Z=se(Z===void 0?z.length-1:Z,0),function(){for(var he=arguments,Ie=-1,Be=se(he.length-Z,0),$e=Array(Be);++Ie<Be;)$e[Ie]=he[Z+Ie];Ie=-1;for(var Ye=Array(Z+1);++Ie<Z;)Ye[Ie]=he[Ie];return Ye[Z]=$e,g(z,this,Ye)}}function Un(z,Z){var he=z.__data__;return An(Z)?he[typeof Z=="string"?"string":"hash"]:he.map}function Gt(z,Z){var he=R(z,Z);return Tr(he)?he:void 0}function Ht(z){return Mr(z)||io(z)||!!(ee&&z&&z[ee])}function An(z){var Z=typeof z;return Z=="string"||Z=="number"||Z=="symbol"||Z=="boolean"?z!=="__proto__":z===null}function In(z){return!!_&&_ in z}function St(z){if(z!=null){try{return K.call(z)}catch{}try{return z+""}catch{}}return""}var oo=ro(function(z,Z){return zn(z)?kn(z,Rr(Z,1,zn)):[]});function so(z,Z){return z===Z||z!==z&&Z!==Z}function io(z){return zn(z)&&J.call(z,"callee")&&(!G.call(z,"callee")||te.call(z)==s)}var Mr=Array.isArray;function rr(z){return z!=null&&Or(z.length)&&!Vn(z)}function zn(z){return Pn(z)&&rr(z)}function Vn(z){var Z=or(z)?te.call(z):"";return Z==l||Z==a}function Or(z){return typeof z=="number"&&z>-1&&z%1==0&&z<=o}function or(z){var Z=typeof z;return!!z&&(Z=="object"||Z=="function")}function Pn(z){return!!z&&typeof z=="object"}return Kc=oo,Kc}var tb=eb();const zp=Pr(tb);function Va(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function nb(e,n){for(var o=0;o<n.length;o++){var s=n[o];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function Ga(e,n,o){return n&&nb(e.prototype,n),e}function Ke(e,n,o){return n in e?Object.defineProperty(e,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[n]=o,e}function Mu(){return Mu=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var o=arguments[n];for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(e[s]=o[s])}return e},Mu.apply(this,arguments)}function Ha(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&Ou(e,n)}function Ro(e){return Ro=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Ro(e)}function Ou(e,n){return Ou=Object.setPrototypeOf||function(s,l){return s.__proto__=l,s},Ou(e,n)}function rb(e,n){if(e==null)return{};var o={},s=Object.keys(e),l,a;for(a=0;a<s.length;a++)l=s[a],!(n.indexOf(l)>=0)&&(o[l]=e[l]);return o}function ob(e,n){if(e==null)return{};var o=rb(e,n),s,l;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(l=0;l<a.length;l++)s=a[l],!(n.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(o[s]=e[s])}return o}function ft(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Wa(e,n){return n&&(typeof n=="object"||typeof n=="function")?n:ft(e)}function sb(e,n){return ib(e)||ab(e,n)||lb()}function ib(e){if(Array.isArray(e))return e}function ab(e,n){var o=[],s=!0,l=!1,a=void 0;try{for(var u=e[Symbol.iterator](),f;!(s=(f=u.next()).done)&&(o.push(f.value),!(n&&o.length===n));s=!0);}catch(h){l=!0,a=h}finally{try{!s&&u.return!=null&&u.return()}finally{if(l)throw a}}return o}function lb(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}var cb=["C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B"],ub=["Db","Eb","Gb","Ab","Bb"],db={C:0,"C#":1,Db:1,D:2,"D#":3,Eb:3,E:4,F:5,"F#":6,Gb:6,G:7,"G#":8,Ab:8,A:9,"A#":10,Bb:10,B:11},Sa=12,rd=Sa,od=127,fb=/([a-g])([#b]?)(\d+)/,_u=12;function hb(e){if(!e)throw Error("Invalid note argument");var n=fb.exec(e.toLowerCase());if(!n)throw Error("Invalid note argument");var o=sb(n,4),s=o[1],l=o[2],a=o[3],u="".concat(s.toUpperCase()).concat(l),f=db[u];if(f==null)throw Error("Invalid note argument");return Sa+f+_u*parseInt(a,10)}function pb(e){var n=(e-Sa)%_u,o=Math.floor((e-Sa)/_u),s=cb[n];return{note:"".concat(s).concat(o),pitchName:s,octave:o,midiNumber:e,isAccidental:ub.includes(s)}}function mb(){return nd(rd,od+1).reduce(function(e,n){return e[n]=pb(n),e},{})}var gb=mb();function zg(e){var n=gb[e];if(!n)throw Error("Invalid MIDI number");return n}var vb=nd(rd,od+1).filter(function(e){return!zg(e).isAccidental}),wt={fromNote:hb,getAttributes:zg,MIN_MIDI_NUMBER:rd,MAX_MIDI_NUMBER:od,NATURAL_MIDI_NUMBERS:vb},sd=function(e){Ha(n,e);function n(){var o,s;Va(this,n);for(var l=arguments.length,a=new Array(l),u=0;u<l;u++)a[u]=arguments[u];return s=Wa(this,(o=Ro(n)).call.apply(o,[this].concat(a))),Ke(ft(s),"onPlayNoteInput",function(){s.props.onPlayNoteInput(s.props.midiNumber)}),Ke(ft(s),"onStopNoteInput",function(){s.props.onStopNoteInput(s.props.midiNumber)}),s}return Ga(n,[{key:"getAbsoluteKeyPosition",value:function(s){var l=7,a=wt.getAttributes(s),u=a.octave,f=a.pitchName,h=this.props.pitchPositions[f],p=l*u;return h+p}},{key:"getRelativeKeyPosition",value:function(s){return this.getAbsoluteKeyPosition(s)-this.getAbsoluteKeyPosition(this.props.noteRange.first)}},{key:"render",value:function(){var s=this.props,l=s.naturalKeyWidth,a=s.accidentalWidthRatio,u=s.midiNumber,f=s.gliss,h=s.useTouchEvents,p=s.accidental,m=s.active,g=s.disabled,x=s.children;return we.createElement("div",{className:pt("ReactPiano__Key",{"ReactPiano__Key--accidental":p,"ReactPiano__Key--natural":!p,"ReactPiano__Key--disabled":g,"ReactPiano__Key--active":m}),style:{left:Vp(this.getRelativeKeyPosition(u)*l),width:Vp(p?a*l:l)},onMouseDown:h?null:this.onPlayNoteInput,onMouseUp:h?null:this.onStopNoteInput,onMouseEnter:f?this.onPlayNoteInput:null,onMouseLeave:this.onStopNoteInput,onTouchStart:h?this.onPlayNoteInput:null,onTouchCancel:h?this.onStopNoteInput:null,onTouchEnd:h?this.onStopNoteInput:null},we.createElement("div",{className:"ReactPiano__NoteLabelContainer"},x))}}]),n}(we.Component);Ke(sd,"propTypes",{midiNumber:Se.number.isRequired,naturalKeyWidth:Se.number.isRequired,gliss:Se.bool.isRequired,useTouchEvents:Se.bool.isRequired,accidental:Se.bool.isRequired,active:Se.bool.isRequired,disabled:Se.bool.isRequired,onPlayNoteInput:Se.func.isRequired,onStopNoteInput:Se.func.isRequired,accidentalWidthRatio:Se.number.isRequired,pitchPositions:Se.object.isRequired,children:Se.node});Ke(sd,"defaultProps",{accidentalWidthRatio:.65,pitchPositions:{C:0,Db:.55,D:1,Eb:1.8,E:2,F:3,Gb:3.5,G:4,Ab:4.7,A:5,Bb:5.85,B:6}});function Vp(e){return"".concat(e*100,"%")}var id=function(e){Ha(n,e);function n(){return Va(this,n),Wa(this,Ro(n).apply(this,arguments))}return Ga(n,[{key:"getMidiNumbers",value:function(){return nd(this.props.noteRange.first,this.props.noteRange.last+1)}},{key:"getNaturalKeyCount",value:function(){return this.getMidiNumbers().filter(function(s){var l=wt.getAttributes(s),a=l.isAccidental;return!a}).length}},{key:"getNaturalKeyWidth",value:function(){return 1/this.getNaturalKeyCount()}},{key:"getWidth",value:function(){return this.props.width?this.props.width:"100%"}},{key:"getHeight",value:function(){if(!this.props.width)return"100%";var s=this.props.width*this.getNaturalKeyWidth();return"".concat(s/this.props.keyWidthToHeight,"px")}},{key:"render",value:function(){var s=this,l=this.getNaturalKeyWidth();return we.createElement("div",{className:pt("ReactPiano__Keyboard",this.props.className),style:{width:this.getWidth(),height:this.getHeight()}},this.getMidiNumbers().map(function(a){var u=wt.getAttributes(a);u.note;var f=u.isAccidental,h=!s.props.disabled&&s.props.activeNotes.includes(a);return we.createElement(sd,{naturalKeyWidth:l,midiNumber:a,noteRange:s.props.noteRange,active:h,accidental:f,disabled:s.props.disabled,onPlayNoteInput:s.props.onPlayNoteInput,onStopNoteInput:s.props.onStopNoteInput,gliss:s.props.gliss,useTouchEvents:s.props.useTouchEvents,key:a},s.props.disabled?null:s.props.renderNoteLabel({isActive:h,isAccidental:f,midiNumber:a}))}))}}]),n}(we.Component);Ke(id,"propTypes",{noteRange:xb,activeNotes:Se.arrayOf(Se.number),onPlayNoteInput:Se.func.isRequired,onStopNoteInput:Se.func.isRequired,renderNoteLabel:Se.func.isRequired,keyWidthToHeight:Se.number.isRequired,className:Se.string,disabled:Se.bool,gliss:Se.bool,useTouchEvents:Se.bool,width:Se.number});Ke(id,"defaultProps",{disabled:!1,gliss:!1,useTouchEvents:!1,keyWidthToHeight:.33,renderNoteLabel:function(){}});function Gp(e){return typeof e!="number"?!1:wt.NATURAL_MIDI_NUMBERS.includes(e)}function xb(e,n,o){var s=e[n],l=s.first,a=s.last;if(!l||!a)return new Error("Invalid prop ".concat(n," supplied to ").concat(o,". ").concat(n," must be an object with .first and .last values."));if(!Gp(l)||!Gp(a))return new Error("Invalid prop ".concat(n," supplied to ").concat(o,". ").concat(n," values must be valid MIDI numbers, and should not be accidentals (sharp or flat notes)."));if(l>=a)return new Error("Invalid prop ".concat(n," supplied to ").concat(o,". ").concat(n,".first must be smaller than ").concat(n,".last."))}var ad=function(e){Ha(n,e);function n(){var o,s;Va(this,n);for(var l=arguments.length,a=new Array(l),u=0;u<l;u++)a[u]=arguments[u];return s=Wa(this,(o=Ro(n)).call.apply(o,[this].concat(a))),Ke(ft(s),"state",{isMouseDown:!1,useTouchEvents:!1}),Ke(ft(s),"handleNoteChanges",function(f){var h=f.prevActiveNotes,p=f.nextActiveNotes;if(!s.props.disabled){var m=zp(h,p),g=zp(p,h);g.forEach(function(x){s.props.playNote(x)}),m.forEach(function(x){s.props.stopNote(x)})}}),Ke(ft(s),"getMidiNumberForKey",function(f){if(!s.props.keyboardShortcuts)return null;var h=s.props.keyboardShortcuts.find(function(p){return p.key===f});return h&&h.midiNumber}),Ke(ft(s),"getKeyForMidiNumber",function(f){if(!s.props.keyboardShortcuts)return null;var h=s.props.keyboardShortcuts.find(function(p){return p.midiNumber===f});return h&&h.key}),Ke(ft(s),"onKeyDown",function(f){if(!(f.ctrlKey||f.metaKey||f.shiftKey)){var h=s.getMidiNumberForKey(f.key);h&&s.onPlayNoteInput(h)}}),Ke(ft(s),"onKeyUp",function(f){var h=s.getMidiNumberForKey(f.key);h&&s.onStopNoteInput(h)}),Ke(ft(s),"onPlayNoteInput",function(f){s.props.disabled||s.props.onPlayNoteInput(f,s.props.activeNotes)}),Ke(ft(s),"onStopNoteInput",function(f){s.props.disabled||s.props.onStopNoteInput(f,s.props.activeNotes)}),Ke(ft(s),"onMouseDown",function(){s.setState({isMouseDown:!0})}),Ke(ft(s),"onMouseUp",function(){s.setState({isMouseDown:!1})}),Ke(ft(s),"onTouchStart",function(){s.setState({useTouchEvents:!0})}),Ke(ft(s),"renderNoteLabel",function(f){var h=f.midiNumber,p=f.isActive,m=f.isAccidental,g=s.getKeyForMidiNumber(h);return s.props.renderNoteLabel({keyboardShortcut:g,midiNumber:h,isActive:p,isAccidental:m})}),s}return Ga(n,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.onKeyDown),window.addEventListener("keyup",this.onKeyUp)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.onKeyDown),window.removeEventListener("keyup",this.onKeyUp)}},{key:"componentDidUpdate",value:function(s,l){this.props.activeNotes!==s.activeNotes&&this.handleNoteChanges({prevActiveNotes:s.activeNotes||[],nextActiveNotes:this.props.activeNotes||[]})}},{key:"render",value:function(){return we.createElement("div",{style:{width:"100%",height:"100%"},onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchStart:this.onTouchStart,"data-testid":"container"},we.createElement(id,{noteRange:this.props.noteRange,onPlayNoteInput:this.onPlayNoteInput,onStopNoteInput:this.onStopNoteInput,activeNotes:this.props.activeNotes,className:this.props.className,disabled:this.props.disabled,width:this.props.width,keyWidthToHeight:this.props.keyWidthToHeight,gliss:this.state.isMouseDown,useTouchEvents:this.state.useTouchEvents,renderNoteLabel:this.renderNoteLabel}))}}]),n}(we.Component);Ke(ad,"propTypes",{noteRange:Se.object.isRequired,activeNotes:Se.arrayOf(Se.number.isRequired).isRequired,playNote:Se.func.isRequired,stopNote:Se.func.isRequired,onPlayNoteInput:Se.func.isRequired,onStopNoteInput:Se.func.isRequired,renderNoteLabel:Se.func.isRequired,className:Se.string,disabled:Se.bool,width:Se.number,keyWidthToHeight:Se.number,keyboardShortcuts:Se.arrayOf(Se.shape({key:Se.string.isRequired,midiNumber:Se.number.isRequired}))});Ke(ad,"defaultProps",{renderNoteLabel:function(n){var o=n.keyboardShortcut;n.midiNumber;var s=n.isActive,l=n.isAccidental;return o?we.createElement("div",{className:pt("ReactPiano__NoteLabel",{"ReactPiano__NoteLabel--active":s,"ReactPiano__NoteLabel--accidental":l,"ReactPiano__NoteLabel--natural":!l})},o):null}});var ld=function(e){Ha(n,e);function n(){var o,s;Va(this,n);for(var l=arguments.length,a=new Array(l),u=0;u<l;u++)a[u]=arguments[u];return s=Wa(this,(o=Ro(n)).call.apply(o,[this].concat(a))),Ke(ft(s),"state",{activeNotes:s.props.activeNotes||[]}),Ke(ft(s),"handlePlayNoteInput",function(f){s.setState(function(h){return s.props.onPlayNoteInput&&s.props.onPlayNoteInput(f,{prevActiveNotes:h.activeNotes}),h.activeNotes.includes(f)?null:{activeNotes:h.activeNotes.concat(f)}})}),Ke(ft(s),"handleStopNoteInput",function(f){s.setState(function(h){return s.props.onStopNoteInput&&s.props.onStopNoteInput(f,{prevActiveNotes:s.state.activeNotes}),{activeNotes:h.activeNotes.filter(function(p){return f!==p})}})}),s}return Ga(n,[{key:"componentDidUpdate",value:function(s){s.activeNotes!==this.props.activeNotes&&this.state.activeNotes!==this.props.activeNotes&&this.setState({activeNotes:this.props.activeNotes||[]})}},{key:"render",value:function(){var s=this.props;s.activeNotes,s.onPlayNoteInput,s.onStopNoteInput;var l=ob(s,["activeNotes","onPlayNoteInput","onStopNoteInput"]);return we.createElement(ad,Mu({activeNotes:this.state.activeNotes,onPlayNoteInput:this.handlePlayNoteInput,onStopNoteInput:this.handleStopNoteInput},l))}}]),n}(we.Component);Ke(ld,"propTypes",{noteRange:Se.object.isRequired,activeNotes:Se.arrayOf(Se.number.isRequired),playNote:Se.func.isRequired,stopNote:Se.func.isRequired,onPlayNoteInput:Se.func,onStopNoteInput:Se.func,renderNoteLabel:Se.func,className:Se.string,disabled:Se.bool,width:Se.number,keyWidthToHeight:Se.number,keyboardShortcuts:Se.arrayOf(Se.shape({key:Se.string.isRequired,midiNumber:Se.number.isRequired}))});function yb(e){for(var n=e.firstNote,o=e.lastNote,s=e.keyboardConfig,l=n,a=0,u=[];a<s.length&&l<=o;){var f=s[a],h=wt.getAttributes(l),p=h.isAccidental;p?u.push({key:f.flat,midiNumber:l}):(u.push({key:f.natural,midiNumber:l}),a+=1),l+=1}return u}var Hp={create:yb,BOTTOM_ROW:[{natural:"z",flat:"a",sharp:"s"},{natural:"x",flat:"s",sharp:"d"},{natural:"c",flat:"d",sharp:"f"},{natural:"v",flat:"f",sharp:"g"},{natural:"b",flat:"g",sharp:"h"},{natural:"n",flat:"h",sharp:"j"},{natural:"m",flat:"j",sharp:"k"},{natural:",",flat:"k",sharp:"l"},{natural:".",flat:"l",sharp:";"},{natural:"/",flat:";",sharp:"'"}],HOME_ROW:[{natural:"a",flat:"q",sharp:"w"},{natural:"s",flat:"w",sharp:"e"},{natural:"d",flat:"e",sharp:"r"},{natural:"f",flat:"r",sharp:"t"},{natural:"g",flat:"t",sharp:"y"},{natural:"h",flat:"y",sharp:"u"},{natural:"j",flat:"u",sharp:"i"},{natural:"k",flat:"i",sharp:"o"},{natural:"l",flat:"o",sharp:"p"},{natural:";",flat:"p",sharp:"["},{natural:"'",flat:"[",sharp:"]"}],QWERTY_ROW:[{natural:"q",flat:"1",sharp:"2"},{natural:"w",flat:"2",sharp:"3"},{natural:"e",flat:"3",sharp:"4"},{natural:"r",flat:"4",sharp:"5"},{natural:"t",flat:"5",sharp:"6"},{natural:"y",flat:"6",sharp:"7"},{natural:"u",flat:"7",sharp:"8"},{natural:"i",flat:"8",sharp:"9"},{natural:"o",flat:"9",sharp:"0"},{natural:"p",flat:"0",sharp:"-"},{natural:"[",flat:"-",sharp:"="}]};const Wp=e=>{let n;const o=new Set,s=(p,m)=>{const g=typeof p=="function"?p(n):p;if(!Object.is(g,n)){const x=n;n=m??(typeof g!="object"||g===null)?g:Object.assign({},n,g),o.forEach(b=>b(n,x))}},l=()=>n,f={setState:s,getState:l,getInitialState:()=>h,subscribe:p=>(o.add(p),()=>o.delete(p))},h=n=e(s,l,f);return f},bb=e=>e?Wp(e):Wp,wb=e=>e;function Nb(e,n=wb){const o=we.useSyncExternalStore(e.subscribe,we.useCallback(()=>n(e.getState()),[e,n]),we.useCallback(()=>n(e.getInitialState()),[e,n]));return we.useDebugValue(o),o}const qp=e=>{const n=bb(e),o=s=>Nb(n,s);return Object.assign(o,n),o},ei=e=>e?qp(e):qp;class Kp extends Error{constructor(n,o,s){super(s),this.name="ApiError",this.url=o.url,this.status=o.status,this.statusText=o.statusText,this.body=o.body,this.request=n}}class Cb extends Error{constructor(n){super(n),this.name="CancelError"}get isCancelled(){return!0}}class Sb{#t;#n;#e;#r;#s;#i;#o;constructor(n){this.#t=!1,this.#n=!1,this.#e=!1,this.#r=[],this.#s=new Promise((o,s)=>{this.#i=o,this.#o=s;const l=f=>{this.#t||this.#n||this.#e||(this.#t=!0,this.#i&&this.#i(f))},a=f=>{this.#t||this.#n||this.#e||(this.#n=!0,this.#o&&this.#o(f))},u=f=>{this.#t||this.#n||this.#e||this.#r.push(f)};return Object.defineProperty(u,"isResolved",{get:()=>this.#t}),Object.defineProperty(u,"isRejected",{get:()=>this.#n}),Object.defineProperty(u,"isCancelled",{get:()=>this.#e}),n(l,a,u)})}get[Symbol.toStringTag](){return"Cancellable Promise"}then(n,o){return this.#s.then(n,o)}catch(n){return this.#s.catch(n)}finally(n){return this.#s.finally(n)}cancel(){if(!(this.#t||this.#n||this.#e)){if(this.#e=!0,this.#r.length)try{for(const n of this.#r)n()}catch(n){console.warn("Cancellation threw an error",n);return}this.#r.length=0,this.#o&&this.#o(new Cb("Request aborted"))}}get isCancelled(){return this.#e}}const cd={BASE:"http://localhost:8080",VERSION:"0",WITH_CREDENTIALS:!1,CREDENTIALS:"include",TOKEN:void 0,USERNAME:void 0,PASSWORD:void 0,HEADERS:void 0,ENCODE_PATH:void 0},ud=e=>e!=null,ti=e=>typeof e=="string",Yc=e=>ti(e)&&e!=="",dd=e=>typeof e=="object"&&typeof e.type=="string"&&typeof e.stream=="function"&&typeof e.arrayBuffer=="function"&&typeof e.constructor=="function"&&typeof e.constructor.name=="string"&&/^(Blob|File)$/.test(e.constructor.name)&&/^(Blob|File)$/.test(e[Symbol.toStringTag]),Vg=e=>e instanceof FormData,Eb=e=>{try{return btoa(e)}catch{return Buffer.from(e).toString("base64")}},Db=e=>{const n=[],o=(l,a)=>{n.push(`${encodeURIComponent(l)}=${encodeURIComponent(String(a))}`)},s=(l,a)=>{ud(a)&&(Array.isArray(a)?a.forEach(u=>{s(l,u)}):typeof a=="object"?Object.entries(a).forEach(([u,f])=>{s(`${l}[${u}]`,f)}):o(l,a))};return Object.entries(e).forEach(([l,a])=>{s(l,a)}),n.length>0?`?${n.join("&")}`:""},jb=(e,n)=>{const o=encodeURI,s=n.url.replace("{api-version}",e.VERSION).replace(/{(.*?)}/g,(a,u)=>n.path?.hasOwnProperty(u)?o(String(n.path[u])):a),l=`${e.BASE}${s}`;return n.query?`${l}${Db(n.query)}`:l},kb=e=>{if(e.formData){const n=new FormData,o=(s,l)=>{ti(l)||dd(l)?n.append(s,l):n.append(s,JSON.stringify(l))};return Object.entries(e.formData).filter(([s,l])=>ud(l)).forEach(([s,l])=>{Array.isArray(l)?l.forEach(a=>o(s,a)):o(s,l)}),n}},pa=async(e,n)=>n,Ab=async(e,n)=>{const[o,s,l,a]=await Promise.all([pa(n,e.TOKEN),pa(n,e.USERNAME),pa(n,e.PASSWORD),pa(n,e.HEADERS)]),u=Object.entries({Accept:"application/json",...a,...n.headers}).filter(([f,h])=>ud(h)).reduce((f,[h,p])=>({...f,[h]:String(p)}),{});if(Yc(o)&&(u.Authorization=`Bearer ${o}`),Yc(s)&&Yc(l)){const f=Eb(`${s}:${l}`);u.Authorization=`Basic ${f}`}return n.body&&(n.mediaType?u["Content-Type"]=n.mediaType:dd(n.body)?u["Content-Type"]=n.body.type||"application/octet-stream":ti(n.body)?u["Content-Type"]="text/plain":Vg(n.body)||(u["Content-Type"]="application/json")),new Headers(u)},Ib=e=>{if(e.body!==void 0)return e.mediaType?.includes("/json")?JSON.stringify(e.body):ti(e.body)||dd(e.body)||Vg(e.body)?e.body:JSON.stringify(e.body)},Pb=async(e,n,o,s,l,a,u)=>{const f=new AbortController,h={headers:a,body:s??l,method:n.method,signal:f.signal};return u(()=>f.abort()),await fetch(o,h)},Rb=(e,n)=>{if(n){const o=e.headers.get(n);if(ti(o))return o}},Tb=async e=>{if(e.status!==204)try{const n=e.headers.get("Content-Type");if(n)return["application/json","application/problem+json"].some(l=>n.toLowerCase().startsWith(l))?await e.json():await e.text()}catch(n){console.error(n)}},Mb=(e,n)=>{const s={400:"Bad Request",401:"Unauthorized",403:"Forbidden",404:"Not Found",500:"Internal Server Error",502:"Bad Gateway",503:"Service Unavailable",...e.errors}[n.status];if(s)throw new Kp(e,n,s);if(!n.ok){const l=n.status??"unknown",a=n.statusText??"unknown",u=(()=>{try{return JSON.stringify(n.body,null,2)}catch{return}})();throw new Kp(e,n,`Generic Error: status: ${l}; status text: ${a}; body: ${u}`)}},fd=(e,n)=>new Sb(async(o,s,l)=>{try{const a=jb(e,n),u=kb(n),f=Ib(n),h=await Ab(e,n);if(!l.isCancelled){const p=await Pb(e,n,a,f,u,h,l),m=await Tb(p),g=Rb(p,n.responseHeader),x={url:a,ok:p.ok,status:p.status,statusText:p.statusText,body:g??m};Mb(n,x),o(x.body)}}catch(a){s(a)}});class Yp{static getModeKeyChords(n,o){return fd(cd,{method:"GET",url:"/api/chords",query:{key:n,mode:o}})}}class Qc{static getModes(){return fd(cd,{method:"GET",url:"/api/modes"})}}class Ob{static getScaleNotes(n,o){return fd(cd,{method:"GET",url:"/api/scales",query:{key:n,mode:o}})}}class _b{constructor(){this.chordTypes={"":[0,4,7],m:[0,3,7],aug:[0,4,8],dim:[0,3,6],5:[0,7],b5:[0,4,6],6:[0,4,7,9],m6:[0,3,7,9],7:[0,4,7,10],m7:[0,3,7,10],maj7:[0,4,7,11],dim7:[0,3,6,9],aug7:[0,4,8,10],m7b5:[0,3,6,10],"maj7#5":[0,4,8,11],maj7b5:[0,4,6,11],"m7#5":[0,3,8,10],m7b9:[0,3,7,10,13],9:[0,4,7,10,14],m9:[0,3,7,10,14],maj9:[0,4,7,11,14],"maj9#11":[0,4,7,11,14,18],"7b9":[0,4,7,10,13],"7#9":[0,4,7,10,15],"9#5":[0,4,8,10,14],"9b5":[0,4,6,10,14],11:[0,4,7,10,14,17],m11:[0,3,7,10,14,17],maj11:[0,4,7,11,14,17],"7#11":[0,4,7,10,18],"maj7#11":[0,4,7,11,18],"m7#11":[0,3,7,10,18],"11b9":[0,4,7,10,13,14,17],13:[0,4,7,10,14,17,21],m13:[0,3,7,10,14,17,21],maj13:[0,4,7,11,14,17,21],"13#11":[0,4,7,10,14,18,21],"maj13#11":[0,4,7,11,14,18,21],sus2:[0,2,7],sus4:[0,5,7],sus2sus4:[0,2,5,7],"7sus2":[0,2,7,10],"7sus4":[0,5,7,10],"9sus4":[0,5,7,10,14],"add(2)":[0,2,4,7],"add(4)":[0,4,5,7],"add(9)":[0,4,7,14],"add(2) add(4)":[0,2,4,5,7],"m add(2)":[0,2,3,7],"m add(4)":[0,3,5,7],"m add(9)":[0,3,7,14],"m add(2) add(4)":[0,2,3,5,7],"7 add(4)":[0,4,5,7,10],"m7 add(4)":[0,3,5,7,10],"6/9":[0,4,7,9,14],"m6/9":[0,3,7,9,14],"maj6/7":[0,4,7,9,11],"7/6":[0,4,7,9,10],"m7/6":[0,3,7,9,10],"m/Maj7":[0,3,7,11],"m/Maj9":[0,3,7,11,14],"m/Maj11":[0,3,7,11,14,17],"m/Maj13":[0,3,7,11,14,17,21],"7b5":[0,4,6,10],"7#5":[0,4,8,10],"7b5b9":[0,4,6,10,13],"7b5#9":[0,4,6,10,15],"7#5b9":[0,4,8,10,13],"7#5#9":[0,4,8,10,15],"7aug5":[0,4,8,10],maj7sus2:[0,2,7,11],maj7sus4:[0,5,7,11],"6sus2":[0,2,7,9],"6sus4":[0,5,7,9],"9sus2":[0,2,7,10,14],"13sus4":[0,5,7,10,14,21],"7b13":[0,4,7,10,20],"7#9#11":[0,4,7,10,15,18],"7b9#11":[0,4,7,10,13,18],"7b9b13":[0,4,7,10,13,20],"7#9b13":[0,4,7,10,15,20],"7alt":[0,4,6,8,10,13,15],madd9:[0,3,7,14],"6add9":[0,4,7,9,14],"7no5":[0,4,10],"9no5":[0,4,10,14],maj7no5:[0,4,11],m7no5:[0,3,10],m9no5:[0,3,10,14],dim9:[0,3,6,9,14],dim11:[0,3,6,9,14,17],dimMaj7:[0,3,6,11],augMaj7:[0,4,8,11],aug9:[0,4,8,10,14],sus4add9:[0,5,7,14],"4th":[0,5,10],"4ths":[0,5,10,15],maj9no5:[0,4,11,14],"11no5":[0,4,10,14,17],maj6add4:[0,4,5,7,9],"7b9#5":[0,4,8,10,13]},this.chromaticNotes=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],this.chromaticNotesFlat=["C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B"]}noteNameToNumber(n){if(!n||n.length===0)return 0;const o=n.charAt(0).toUpperCase(),s=n.slice(1);let a={C:0,D:2,E:4,F:5,G:7,A:9,B:11}[o];if(a===void 0)return 0;const u=(s.match(/#/g)||[]).length,f=(s.match(/b/g)||[]).length;return a+=u,a-=f,a}getChromaticNoteName(n,o){const s=(n%12+12)%12;return o.includes("b")?this.chromaticNotesFlat[s]:this.chromaticNotes[s]}getLetterName(n){return n.charAt(0).toUpperCase()}getLetterPosition(n){return["C","D","E","F","G","A","B"].indexOf(n.toUpperCase())}calculateIntervalNoteName(n,o){const s=this.getLetterName(n),l=this.getLetterPosition(s),a=this.noteNameToNumber(n),f={0:0,1:0,2:1,3:2,4:2,5:3,6:3,7:4,8:5,9:5,10:6,11:6,12:0,13:0,14:1,15:2,16:2,17:3,18:3,19:4,20:4,21:5,22:5,23:6}[o]??0,h=(l+f)%7,m=["C","D","E","F","G","A","B"][h],g=a+o;let b={C:0,D:2,E:4,F:5,G:7,A:9,B:11}[m];const C=Math.round((g-b)/12);b+=C*12;const E=g-b;return E===0?m:E>0?m+"#".repeat(E):m+"b".repeat(-E)}findBestNoteName(n,o,s,l,a){if(l!==void 0&&a!==void 0)return this.calculateIntervalNoteName(l,a);const u=(n%12+12)%12,f=o.find(h=>(this.noteNameToNumber(h.noteName)%12+12)%12===u);return f?f.noteName:this.getChromaticNoteName(u,s)}async generateChordsForScale(n,o,s=!1){try{const l=await Nn.getScaleNotes(n,o),u=(await Nn.getModes()).find(p=>p.name===o);if(!u)throw new Error(`Mode "${o}" not found`);const f=l.map(p=>(this.noteNameToNumber(p.noteName)%12+12)%12),h=[];return l.forEach(p=>{const m=this.noteNameToNumber(p.noteName);Object.entries(this.chordTypes).forEach(([g,x])=>{const b=[],C=[];let E=!0;x.forEach(S=>{const j=m+S,R=(j%12+12)%12;f.includes(R)||(E=!1);const A=this.findBestNoteName(j,l,n,p.noteName,S);b.push(j),C.push(A)}),(E||s)&&h.push({keyName:n,modeId:u.id,chordNote:m,chordNoteName:p.noteName,chordName:`${p.noteName}${g}`,chordNotes:b.join(", "),chordNoteNames:C.join(", ")})})}),h}catch(l){throw console.error("Error generating chords for scale:",l),l}}async generateChord(n,o,s,l){try{const a=this.chordTypes[o];if(!a)throw new Error(`Unknown chord type: ${o}`);const u=await Nn.getScaleNotes(s,l),h=(await Nn.getModes()).find(x=>x.name===l);if(!h)throw new Error(`Mode "${l}" not found`);const p=this.noteNameToNumber(n),m=[],g=[];return a.forEach(x=>{const b=p+x,C=this.findBestNoteName(b,u,s,n,x);m.push(b),g.push(C)}),{keyName:s,modeId:h.id,chordNote:p,chordNoteName:n,chordName:`${n}${o}`,chordNotes:m.join(", "),chordNoteNames:g.join(", ")}}catch(a){return console.error("Error generating chord:",a),null}}async getCompatibleChords(n,o){return this.generateChordsForScale(n,o,!1)}async getAllPossibleChords(n,o){return this.generateChordsForScale(n,o,!0)}getChordTypes(){return Object.keys(this.chordTypes)}addChordType(n,o){this.chordTypes[n]=o}}const Cs=new _b;class Lb{constructor(){this.baseUrl="/data",this.indexCache=null,this.modesCache=null,this.scalesCache=new Map,this.distinctChordsCache=null,this.useDynamicChords=!0}normalizeKey(n){const o=n.trim();return o.length===0?"":o.charAt(0).toUpperCase()+o.slice(1).toLowerCase()}setUseDynamicChords(n){this.useDynamicChords=n,this.distinctChordsCache=null}async loadIndex(){if(this.indexCache)return this.indexCache;try{const n=await fetch(`${this.baseUrl}/index.json`);if(!n.ok)throw new Error(`Failed to load index: ${n.statusText}`);return this.indexCache=await n.json(),this.indexCache}catch(n){throw console.error("Error loading static data index:",n),new Error("Failed to load static data. Please ensure the data generation completed successfully.")}}async getModes(){if(this.modesCache)return this.modesCache;try{const n=await fetch(`${this.baseUrl}/modes.json`);if(!n.ok)throw new Error(`Failed to load modes: ${n.statusText}`);return this.modesCache=await n.json(),this.modesCache}catch(n){throw console.error("Error loading modes from static data:",n),n}}async getModeKeyChords(n,o,s=!1){const l=this.normalizeKey(n);if(this.useDynamicChords)try{return(await Cs.generateChordsForScale(l,o,s)).map(u=>({keyName:u.keyName,modeId:u.modeId,chordNote:u.chordNote,chordNoteName:u.chordNoteName,chordName:u.chordName,chordNotes:u.chordNotes,chordNoteNames:u.chordNoteNames}))}catch(a){console.warn("Dynamic chord generation failed, falling back to static data:",a)}try{const u=(await this.loadIndex()).modes.find(g=>g.name===o);if(!u||!u.id)throw new Error(`Mode "${o}" not found`);const f=u.id.toString(),h=await fetch(`${this.baseUrl}/chords-mode-${f}.json`);if(!h.ok)throw new Error(`Failed to load chords for mode ${o}: ${h.statusText}`);return(await h.json()).filter(g=>g.keyName===l)}catch(a){throw console.error("Error loading chords from static data:",a),a}}async getCompatibleChords(n,o){if(this.useDynamicChords)try{const u=this.normalizeKey(n);return(await Cs.getCompatibleChords(u,o)).map(h=>({keyName:h.keyName,modeId:h.modeId,chordNote:h.chordNote,chordNoteName:h.chordNoteName,chordName:h.chordName,chordNotes:h.chordNotes,chordNoteNames:h.chordNoteNames}))}catch(u){console.warn("Dynamic compatible chord generation failed:",u)}const s=await this.getModeKeyChords(n,o),a=(await this.getScaleNotes(n,o)).map(u=>(({C:0,"C#":1,Db:1,D:2,"D#":3,Eb:3,E:4,"E#":5,Fb:4,F:5,"F#":6,Gb:6,G:7,"G#":8,Ab:8,A:9,"A#":10,Bb:10,B:11,"B#":0,Cb:11}[u.noteName]??0)%12+12)%12);return s.filter(u=>u.chordNotes?u.chordNotes.split(", ").map(h=>(parseInt(h.trim())%12+12)%12).every(h=>a.includes(h)):!1)}async generateSpecificChord(n,o,s,l){if(!this.useDynamicChords)throw new Error("Dynamic chord generation is disabled");try{const a=this.normalizeKey(s),u=await Cs.generateChord(n,o,a,l);return u?{keyName:u.keyName,modeId:u.modeId,chordNote:u.chordNote,chordNoteName:u.chordNoteName,chordName:u.chordName,chordNotes:u.chordNotes,chordNoteNames:u.chordNoteNames}:null}catch(a){return console.error("Error generating specific chord:",a),null}}getAvailableChordTypes(){return Cs.getChordTypes()}async getScaleNotes(n,o){try{const s=this.normalizeKey(n),a=(await this.loadIndex()).modes.find(p=>p.name===o);if(!a||!a.id)throw new Error(`Mode "${o}" not found`);const u=a.id.toString();if(this.scalesCache.has(u))return this.scalesCache.get(u)[s]||[];const f=await fetch(`${this.baseUrl}/scales-mode-${u}.json`);if(!f.ok)throw new Error(`Failed to load scales for mode ${o}: ${f.statusText}`);const h=await f.json();return this.scalesCache.set(u,h),h[s]||[]}catch(s){throw console.error("Error loading scale notes from static data:",s),s}}async getAllDistinctChords(){if(this.distinctChordsCache)return this.distinctChordsCache;if(this.useDynamicChords)try{const n=await this.getModes(),o=["C","D","E","F","G","A","B","C#","F#","Bb","Eb","Ab","Db"],s=[];for(const l of n)for(const a of o)try{const u=await Cs.generateChordsForScale(a,l.name,!0);s.push(...u.map(f=>({keyName:f.keyName,modeId:f.modeId,chordNote:f.chordNote,chordNoteName:f.chordNoteName,chordName:f.chordName,chordNotes:f.chordNotes,chordNoteNames:f.chordNoteNames})))}catch(u){console.warn(`Error generating chords for ${a} ${l.name}:`,u)}return this.distinctChordsCache=this.deduplicateChords(s),this.distinctChordsCache}catch(n){console.warn("Dynamic distinct chord generation failed, falling back to static data:",n)}try{const n=await this.loadIndex(),o=[];for(const s of n.modes){if(!s.id)continue;const l=s.id.toString();try{const a=await fetch(`${this.baseUrl}/chords-mode-${l}.json`);if(!a.ok){console.warn(`Failed to load chords for mode ${s.name} (ID: ${l}): ${a.statusText}`);continue}const u=await a.json();o.push(...u)}catch(a){console.warn(`Error loading chords for mode ${s.name}:`,a)}}return this.distinctChordsCache=this.deduplicateChords(o),this.distinctChordsCache}catch(n){throw console.error("Error loading all distinct chords from static data:",n),n}}deduplicateChords(n){const o=new Map;for(const s of n){let l;const a=s.chordNotes.split(",").map(u=>u.trim()).filter(u=>u.length>0).sort();l=s.chordName+a.join(","),l&&!o.has(l)&&o.set(l,s)}return Array.from(o.values())}async getMetadata(){if(this.useDynamicChords){const o=await this.getModes();return{generatedAt:new Date().toISOString(),modesCount:o.length,usingDynamicChords:!0}}const n=await this.loadIndex();return{generatedAt:n.generated_at,modesCount:n.modes.length,usingDynamicChords:!1}}clearCache(){this.indexCache=null,this.modesCache=null,this.scalesCache.clear(),this.distinctChordsCache=null}}const Nn=new Lb,Bb={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_BASE_URL:"http://localhost:8080",VITE_USE_STATIC_DATA:"true"};function Fb(){try{return Bb||{}}catch{return console.warn("Failed to access import.meta.env, using fallbacks"),{}}}const $b=Fb();function Qp(e,n=""){const o=$b[e];return typeof o=="string"?o:n}class Ub{constructor(){const n=Qp("VITE_USE_STATIC_DATA","true");console.log("Initializing DataService with environment:",{useStaticData:n}),this.config={useStaticData:n.toLowerCase()!=="false",apiBaseUrl:Qp("VITE_API_BASE_URL","http://localhost:8080")},console.log("DataService initialized with config:",this.config)}async getModes(){return this.config.useStaticData?(console.log("Loading modes from static data"),Nn.getModes()):(console.log("Loading modes from API"),Qc.getModes())}async getModeKeyChords(n,o){return this.config.useStaticData?Nn.getModeKeyChords(n,o):Yp.getModeKeyChords(n,o)}async getScaleNotes(n,o){return this.config.useStaticData?Nn.getScaleNotes(n,o):Ob.getScaleNotes(n,o)}async getAllDistinctChords(){if(this.config.useStaticData)return console.log("Loading all distinct chords from static data"),Nn.getAllDistinctChords();{console.log("Loading all distinct chords from API");const n=await Qc.getModes(),o=Fs,s=[];for(const l of n)for(const a of o)try{const u=await Yp.getModeKeyChords(a,l.name);s.push(...u)}catch(u){console.warn(`Failed to load chords for ${l.name} in ${a}:`,u)}return this.deduplicateChords(s)}}deduplicateChords(n){const o=new Map;for(const s of n){let l;if(s.chordName&&s.chordName.trim()!=="")l=s.chordName.trim();else if(s.chordNoteNames&&s.chordNoteNames.trim()!=="")l=s.chordNoteNames.trim();else if(s.chordTypeId!==void 0&&s.chordNoteName)l=`${s.chordNoteName}_type_${s.chordTypeId}`;else if(s.chordNotes&&s.chordNotes.trim()!=="")l=s.chordNotes.trim();else{const a=[];s.chordNote!==void 0&&a.push(`note_${s.chordNote}`),s.chordTypeId!==void 0&&a.push(`type_${s.chordTypeId}`),s.chordNoteName&&a.push(s.chordNoteName),l=a.length>0?a.join("_"):JSON.stringify(s)}o.has(l)||o.set(l,s)}return Array.from(o.values())}getConfig(){return{...this.config}}updateConfig(n){this.config={...this.config,...n},console.log("DataService configuration updated:",this.config),n.useStaticData!==void 0&&Nn.clearCache()}async getDataSourceInfo(){if(this.config.useStaticData)try{return{source:"static",metadata:await Nn.getMetadata()}}catch{return{source:"static",metadata:{error:"Failed to load metadata"}}}else return{source:"api",metadata:{baseUrl:this.config.apiBaseUrl}}}async testConnection(){const n=Date.now();try{return this.config.useStaticData?await Nn.getModes():await Qc.getModes(),{success:!0,responseTime:Date.now()-n}}catch(o){return{success:!1,error:o instanceof Error?o.message:"Unknown error",responseTime:Date.now()-n}}}}const Dr=new Ub,zb={"C##":"D","D##":"E","E#":"F","F##":"G","G##":"A","A##":"B","B#":"C",Cb:"B",Db:"C#",Eb:"D#",Fb:"E",Gb:"F#",Ab:"G#",Bb:"A#",Dbb:"C",Ebb:"D",Fbb:"E",Gbb:"F",Abb:"G",Bbb:"A",Cbb:"B"},jr=e=>{if(e)return zb[e]||e},Xt=ei((e,n)=>({chords:void 0,scaleNotes:[],key:"C",mode:"Ionian",modes:[],loadingChords:!1,normalizedScaleNotes:[],allDistinctChords:void 0,loadingAllChords:!1,showAllChords:!1,setKey:o=>{e({key:o}),n().fetchMusicData(o,n().mode)},setMode:o=>{e({mode:o}),n().fetchMusicData(n().key,o)},setModes:o=>{e({modes:o});const{key:s,mode:l,chords:a}=n();!a&&s&&l&&n().fetchMusicData(s,l)},setKeyAndMode:(o,s)=>{e({key:o,mode:s}),n().fetchMusicData(o,s)},fetchMusicData:async(o,s)=>{if(!(!o||!s)){e({loadingChords:!0});try{const[l,a]=await Promise.all([Dr.getModeKeyChords(o,s),Dr.getScaleNotes(o,s)]),u=a.map(f=>f.noteName?jr(f.noteName):null).filter(Boolean);e({chords:l,scaleNotes:a,normalizedScaleNotes:u,loadingChords:!1})}catch(l){console.error("Error fetching music data:",l),e({loadingChords:!1})}}},initialize:async()=>{const{key:o,mode:s}=n();await n().fetchMusicData(o,s)},fetchAllDistinctChords:async()=>{const{allDistinctChords:o}=n();if(!o){e({loadingAllChords:!0});try{const s=await Dr.getAllDistinctChords();e({allDistinctChords:s,loadingAllChords:!1})}catch(s){console.error("Error fetching all distinct chords:",s),e({loadingAllChords:!1})}}},toggleShowAllChords:()=>{const{showAllChords:o,allDistinctChords:s}=n(),l=!o;e({showAllChords:l}),l&&!s&&n().fetchAllDistinctChords()},setShowAllChords:o=>{e({showAllChords:o}),o&&!n().allDistinctChords&&n().fetchAllDistinctChords()}})),Vb=["electric_piano_1","acoustic_grand_piano","bright_acoustic_piano","electric_grand_piano","honkytonk_piano","electric_piano_2","harpsichord","clavinet"],Gb=()=>({instrumentName:"electric_piano_1",cutOffPreviousNotes:!0,eq:{bass:0,mid:0,treble:0},octaveOffset:0,reverbLevel:0,noteDuration:.8,volume:.8,chorusLevel:0,delayLevel:0}),Io=ei((e,n)=>({pianoSettings:Gb(),availableInstruments:Vb,updatePianoSettings:o=>e(s=>({pianoSettings:{...s.pianoSettings,...o}})),setPianoInstrument:o=>n().updatePianoSettings({instrumentName:o}),setCutOffPreviousNotes:o=>n().updatePianoSettings({cutOffPreviousNotes:o}),setEq:o=>n().updatePianoSettings({eq:o}),setOctaveOffset:o=>n().updatePianoSettings({octaveOffset:o}),setReverbLevel:o=>n().updatePianoSettings({reverbLevel:o}),setNoteDuration:o=>n().updatePianoSettings({noteDuration:o}),setVolume:o=>n().updatePianoSettings({volume:o}),setChorusLevel:o=>n().updatePianoSettings({chorusLevel:o}),setDelayLevel:o=>n().updatePianoSettings({delayLevel:o}),setAvailableInstruments:o=>e({availableInstruments:o})})),Ea=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],Gg=(e,n)=>{const o={Db:"C#",Eb:"D#",Gb:"F#",Ab:"G#",Bb:"A#"},s=o[e]||e,l=o[n]||n,a=Ea.indexOf(s),u=Ea.indexOf(l);if(a===-1||u===-1)return 0;let f=u-a;return f>6&&(f-=12),f<-5&&(f+=12),f},Hg=(e,n)=>{const o={Db:"C#",Eb:"D#",Gb:"F#",Ab:"G#",Bb:"A#"};let s=e;o[e]&&(s=o[e]);const l=Ea.indexOf(s);if(l===-1)return e;const a=(l+n+12)%12;return Ea[a]},Wg=(e,n)=>{let o="",s="";return e.length>=2&&(e[1]==="#"||e[1]==="b")?(o=e.substring(0,2),s=e.substring(2)):e.length>=1&&(o=e[0],s=e.substring(1)),Hg(o,n)+s},Da=(e,n)=>e.split(" ").map(o=>Hg(o,n)).join(" "),Dn=ei((e,n)=>({activeNotes:[],activeChordIndex:null,highlightedChordIndex:null,addedChords:[],temporaryChord:null,isPlayingScale:!1,scalePlaybackTimeouts:[],setActiveNotes:o=>e({activeNotes:o}),setAddedChords:o=>e({addedChords:o}),setActiveChordIndex:o=>e({activeChordIndex:o}),setHighlightedChordIndex:o=>e({highlightedChordIndex:o}),setTemporaryChord:o=>e({temporaryChord:o}),setIsPlayingScale:o=>e({isPlayingScale:o}),addChord:(o,s,l,a,u)=>e(f=>({addedChords:[...f.addedChords,{name:o,notes:s,pattern:[...l],originalKey:a,originalMode:u,originalNotes:s}]})),updateChord:(o,s)=>e(l=>{const a=[...l.addedChords];return a[o]={...s},{addedChords:a}}),removeChord:o=>e(s=>{const l=s.addedChords.filter((u,f)=>f!==o);let a=s.activeChordIndex;return s.activeChordIndex===o?a=null:s.activeChordIndex!==null&&s.activeChordIndex>o&&(a=s.activeChordIndex-1),{addedChords:l,activeChordIndex:a}}),clearAllChords:()=>e({addedChords:[],activeChordIndex:null,temporaryChord:null}),updateChordPattern:(o,s)=>e(l=>{const a=[...l.addedChords];return a[o]={...a[o],pattern:[...s]},{addedChords:a}}),playNotes:o=>{e({activeNotes:[]}),setTimeout(()=>e({activeNotes:o}),10)},handleFetchOriginalChord:async(o,s,l)=>{try{return(await Dr.getModeKeyChords(s,l)).find(f=>f.chordName===o)?.chordNoteNames||null}catch(a){return console.error("Failed to fetch original chord:",a),null}},addScalePlaybackTimeout:o=>e(s=>({scalePlaybackTimeouts:[...s.scalePlaybackTimeouts,o]})),clearScalePlaybackTimeouts:()=>{const{scalePlaybackTimeouts:o}=n();o.forEach(clearTimeout),e({scalePlaybackTimeouts:[]})},transposeAddedChords:async(o,s,l)=>{const{addedChords:a,handleFetchOriginalChord:u}=n();console.log(`Transposing added chords from ${o} to ${s} (${l})`),console.log(a);const f=Gg(o,s),h=await Promise.all(a.map(async p=>{const m=Wg(p.name,f);console.log(`Transposing chord ${p.name} (${p.notes}) from ${o} to ${s}: ${m}`);const g=await u(m,s,l);if(g)return{...p,name:m,notes:g,originalKey:s,originalMode:l,originalNotes:g};{const x=Da(p.notes,f),b=p.originalNotes?Da(p.originalNotes,f):x;return{...p,name:m,notes:x,originalNotes:b}}}));e({addedChords:h})}})),no=ei((e,n)=>({globalPatternState:{currentPattern:["1","2","3","4"],isPlaying:!1,bpm:120,subdivision:.25,swing:0,currentStep:0,repeat:!0,lastChordChangeTime:0,globalClockStartTime:0},currentlyActivePattern:["1","2","3","4"],setGlobalPatternState:o=>e(s=>({globalPatternState:{...s.globalPatternState,...o}})),setCurrentlyActivePattern:o=>e({currentlyActivePattern:o}),togglePlayback:()=>{const{globalPatternState:o}=n(),s=!o.isPlaying;e(l=>({globalPatternState:{...l.globalPatternState,isPlaying:s}}))},updatePattern:o=>{e(s=>({globalPatternState:{...s.globalPatternState,...o}}))}})),qg=ei(e=>({isDeleteMode:!1,isLiveMode:!1,showPatternSystem:!1,setIsDeleteMode:n=>e({isDeleteMode:n}),setIsLiveMode:n=>e({isLiveMode:n}),setShowPatternSystem:n=>e({showPatternSystem:n}),toggleDeleteMode:()=>e(n=>({isDeleteMode:!n.isDeleteMode})),toggleLiveMode:()=>e(n=>({isLiveMode:!n.isLiveMode})),togglePatternSystem:()=>e(n=>({showPatternSystem:!n.showPatternSystem}))}));function Hb(){const[e,n]=w.useState(),[o,s]=w.useState(null);return w.useEffect(()=>{(async()=>{try{const a=await Dr.getModes();n(a.map(u=>u.name))}catch(a){s(a),console.error("Error fetching modes:",a)}})()},[]),{modes:e,error:o}}const Jp=["C","D","E","F","G","A","B"],ja=(e,n,o)=>{const s=o.split(", ");let l=Jp.indexOf(jr(s[0])[0]),a=e;return s.map((u,f)=>{const h=jr(u),p=Jp.indexOf(h[0]);return p<l&&f>0&&a++,a>n&&(a=n),l=p,{note:h,octave:a}})},yt=e=>Math.max(0,Math.round(e)).toString(36),bt=e=>parseInt(e,36)||0,Wb=(e,n,o,s,l,a,u,f,h,p,m,g,x,b)=>{if(!b?.length||!m.length||!g.length)return"";try{const C="v7",E=m.indexOf(e),S=yt(Math.max(0,E)),j=g.indexOf(n),R=yt(Math.max(0,j)),A=s.slice(0,16).map(ge=>ge.replace(/[xX]/gi,"0")).join("."),D=Math.max(60,Math.min(200,l)),I=yt(D-60),M={.125:"0",.25:"1",.5:"2",1:"3",2:"4"}[a]||"1",_=Math.max(0,Math.min(50,u)),K=yt(_),J=(f?2:0)+(h?1:0),te=yt(J),L=`${I}|${M}|${K}|${te}`,$=x.indexOf(p.instrumentName),G=yt(Math.max(0,$)),X=p.cutOffPreviousNotes?"1":"0",ee=yt(Math.round(p.eq.bass)+24),se=yt(Math.round(p.eq.mid)+24),q=yt(Math.round(p.eq.treble)+24),Q=yt(p.octaveOffset+3),Y=yt(Math.round(p.reverbLevel*35)),k=yt(Math.round(p.volume*35)),U=yt(Math.round(p.chorusLevel*35)),ae=yt(Math.round(p.delayLevel*35)),fe=yt(Math.max(0,Math.round(p.noteDuration*10)-1)),ne=`${G}|${X}|${ee}|${se}|${q}|${Q}|${Y}|${fe}|${k}|${U}|${ae}`,Ee=o.map(ge=>{const le=encodeURIComponent(ge.name),pe=encodeURIComponent(ge.notes);let Re=`${le}~${pe}`;if(ge.originalKey&&ge.originalMode){const Pe=m.indexOf(ge.originalKey),_e=g.indexOf(ge.originalMode);Pe>=0&&_e>=0&&(Re+=`@${yt(Pe)}${yt(_e)}`)}const De=ge.pattern.map(Pe=>Pe.replace(/[xX]/gi,"0")).join("."),xe=s.map(Pe=>Pe.replace(/[xX]/gi,"0")).join(".");if(De===xe)return Re;{const Pe=ge.pattern.slice(0,16).map(_e=>_e.replace(/[xX]/gi,"0")).join(".");return`${Re}:${Pe}`}}).filter(Boolean).join("|");return`${C}_${S}_${R}_${A}_${L}_${ne}_${Ee}`}catch(C){return console.error("Failed to encode state:",C),""}},qb=(e,n,o,s,l)=>{if(console.log("Decoding state:",e),!e||!l?.length||!n.length||!o.length)return console.log("Cannot decode - missing data"),null;try{const a=e.split("_");if(a[0]!=="v7"||a.length<6)return console.log("Invalid state format - only v7 supported"),null;const f=bt(a[1]||"0"),h=n[f]||n[0],p=bt(a[2]||"0"),m=o[p]||o[0],x=(a[3]||"1.2.3.4").split(".").map(K=>K==="0"?"x":K),b=(a[4]||"").split("|"),C=bt(b[0]||"60")+60,S={0:.125,1:.25,2:.5,3:1,4:2}[b[1]||"1"]||.25,j=bt(b[2]||"0"),R=bt(b[3]||"0"),A=(R&2)!==0,D=(R&1)!==0,I=(a[5]||"").split("|"),T={instrumentName:s[bt(I[0]||"0")]||s[0]||"electric_piano_1",cutOffPreviousNotes:(I[1]||"1")==="1",eq:{bass:bt(I[2]||"o")-24,mid:bt(I[3]||"o")-24,treble:bt(I[4]||"o")-24},octaveOffset:bt(I[5]||"3")-3,reverbLevel:bt(I[6]||"0")/35,noteDuration:(bt(I[7]||"7")+1)/10,volume:bt(I[8]||"p")/35,chorusLevel:bt(I[9]||"0")/35,delayLevel:bt(I[10]||"0")/35},M=[],_=a[6]||"";if(_){const K=_.split("|").filter(Boolean);for(const J of K){const[te,L]=J.split(":");let $=te,G,X;if(te.includes("@")){const[q,Q]=te.split("@");if($=q,Q.length>=2){const Y=bt(Q[0]),k=bt(Q[1]);G=n[Y],X=o[k]}}const[ee,se]=$.split("~");if(ee&&se){const q=decodeURIComponent(ee),Q=decodeURIComponent(se);let Y;L?Y=L.split(".").map(U=>U==="0"?"x":U):Y=[...x];const k={name:q,notes:Q,pattern:Y,originalKey:G||h,originalMode:X,originalNotes:Q};M.push(k)}else console.warn("Invalid chord format:",J)}}return{key:h,mode:m,pattern:x,bpm:C,subdivision:S,swing:j,showPattern:A,liveMode:D,addedChords:M,pianoSettings:T}}catch(a){return console.error("Failed to decode state:",a),null}},Kb=(e,n="s")=>{if(e){const o=new URL(window.location.href);o.searchParams.set(n,e),window.history.replaceState({},"",o.toString())}},Yb=(e="s")=>new URL(window.location.href).searchParams.get(e),Qb=(e,n,o,s,l,a,u,f,h,p,m,g,x,b,C="s")=>{const E=Wb(e,n,o,s,l,a,u,f,h,p,m,g,x,b);Kb(E,C)},Jb=(e,n,o,s,l="s")=>{const a=Yb(l);return a?qb(a,e,n,o,s):null},Xp=4,Zp=7,Fs=["C","C#","Db","D","D#","Eb","E","F","F#","Gb","G","G#","Ab","A","A#","Bb","B"],Xb=(e,n)=>{if(!e||e.length===0)return!0;const o=e[n%e.length];return o!=="x"&&o!=="X"},em=(e,n,o,s)=>e?s:n!==null&&o[n]?o[n].pattern:s,Zb=()=>{const e=Xt(),n=Io(),o=Dn(),s=no(),l=qg(),{modes:a}=Hb(),u=w.useRef(null),f=w.useRef(0),h=w.useRef(0),p=w.useRef(0),m=w.useRef(!1),g=w.useRef(null),x=w.useRef(!0),b=w.useRef(!1);w.useEffect(()=>{if(a&&!b.current){b.current=!0,e.setModes(a);const $=new URLSearchParams(window.location.search).has("s");!e.chords&&!$&&e.initialize()}},[a]);const C=w.useMemo(()=>6e4/s.globalPatternState.bpm*s.globalPatternState.subdivision,[s.globalPatternState.bpm,s.globalPatternState.subdivision]),E=w.useCallback(L=>{if(s.globalPatternState.swing===0)return C;const $=L%2===1,G=1+s.globalPatternState.swing/100;return $?C*G:C/G},[C,s.globalPatternState.swing]),S=w.useCallback(()=>em(o.temporaryChord,o.activeChordIndex,o.addedChords,s.currentlyActivePattern),[o.temporaryChord,o.activeChordIndex,o.addedChords,s.currentlyActivePattern]),j=w.useCallback(()=>{e.chords?.length&&a?.length&&!x.current&&Qb(e.key,e.mode,o.addedChords,s.globalPatternState.currentPattern,s.globalPatternState.bpm,s.globalPatternState.subdivision,s.globalPatternState.swing,l.showPatternSystem,l.isLiveMode,n.pianoSettings,Fs,a,n.availableInstruments,e.chords)},[e.key,e.mode,e.chords,o.addedChords,s.globalPatternState,l.showPatternSystem,l.isLiveMode,n.pianoSettings,n.availableInstruments,a]),R=w.useCallback(()=>{if(e.chords?.length){const L=Jb(Fs,a||[],n.availableInstruments,e.chords);L&&(e.setKeyAndMode(L.key,L.mode),o.clearAllChords(),L.addedChords.forEach($=>{o.addChord($.name,$.notes,$.pattern||["1","2","3","4"],$.originalKey||L.key,$.originalMode||L.mode)}),s.setGlobalPatternState({currentPattern:L.pattern,bpm:L.bpm,subdivision:L.subdivision,swing:L.swing}),l.setShowPatternSystem(L.showPattern),l.setIsLiveMode(L.liveMode),n.updatePianoSettings(L.pianoSettings))}},[e.chords,a,n.availableInstruments]),A=w.useCallback((L,$,G)=>{if(l.isDeleteMode&&$!==void 0){o.removeChord($);return}const X=ja(Xp,Zp,L);$!==void 0?(o.setTemporaryChord(null),o.setActiveChordIndex($),s.globalPatternState.isPlaying||o.playNotes(X),o.setHighlightedChordIndex($),setTimeout(()=>o.setHighlightedChordIndex(null),150)):(G&&o.setTemporaryChord({name:G,notes:L}),s.globalPatternState.isPlaying||o.playNotes(X))},[l.isDeleteMode,s.globalPatternState.isPlaying]),D=w.useCallback((L,$,G,X)=>{o.addChord(L,$,s.currentlyActivePattern,G,X)},[s.currentlyActivePattern,e.key,e.mode]),I=w.useCallback((L,$)=>{const G={name:$.name,notes:$.notes,pattern:$.pattern||["1","2","3","4"],originalKey:$.originalKey||e.key,originalMode:$.originalMode||e.mode,originalNotes:$.originalNotes||$.notes};o.updateChord(L,G)},[e.key,e.mode]),T=w.useCallback((L,$)=>{const G=Array.from(o.addedChords),[X]=G.splice(L,1);G.splice($,0,X),o.setAddedChords(G);const{activeChordIndex:ee}=o;if(ee===null)return;let se=ee;ee===L?se=$:L<ee&&$>=ee?se=ee-1:L>ee&&$<=ee&&(se=ee+1),se!==ee&&o.setActiveChordIndex(se)},[o]),M=w.useCallback(()=>{o.clearAllChords(),s.setGlobalPatternState({isPlaying:!1}),l.setIsLiveMode(!1)},[]),_=w.useCallback(L=>{s.updatePattern(L),L.hasOwnProperty("isPlaying")&&L.isPlaying&&(f.current=0,h.current=Date.now(),p.current=Date.now()),L.hasOwnProperty("currentStep")&&L.currentStep===0&&(f.current=0,h.current=Date.now(),p.current=Date.now())},[]),K=w.useCallback(()=>{const L=!s.globalPatternState.isPlaying;s.setGlobalPatternState({isPlaying:L}),L&&(f.current=0,h.current=Date.now(),p.current=Date.now())},[s.globalPatternState.isPlaying]),J=w.useCallback(()=>{if(o.isPlayingScale){o.clearScalePlaybackTimeouts(),o.setActiveNotes([]),o.setIsPlayingScale(!1);return}if(!e.scaleNotes?.length)return;o.setIsPlayingScale(!0);const L=s.globalPatternState.isPlaying;L&&s.setGlobalPatternState({isPlaying:!1}),o.setActiveNotes([]);const G=6e4/s.globalPatternState.bpm*.8;let X=100,ee=4,se=0;const q=[...e.scaleNotes];e.scaleNotes[0]?.noteName&&q.push({noteName:e.scaleNotes[0].noteName}),q.forEach(Y=>{if(!Y.noteName)return;const k=setTimeout(()=>{const U=jr(Y.noteName);if(!U)return;let ae=wt.fromNote(U+ee);ae<=se&&(ee++,ae=wt.fromNote(U+ee)),se=ae;const fe=wt.getAttributes(ae),ne=fe.note.slice(0,-1),de=parseInt(fe.note.slice(-1),10);o.setActiveNotes([{midiNote:ae,note:ne,octave:de}])},X);o.addScalePlaybackTimeout(k),X+=G});const Q=setTimeout(()=>{o.setActiveNotes([]),o.setIsPlayingScale(!1),o.clearScalePlaybackTimeouts(),L&&s.setGlobalPatternState({isPlaying:!0})},X+G);o.addScalePlaybackTimeout(Q)},[e.scaleNotes,o.isPlayingScale,s.globalPatternState.bpm,s.globalPatternState.isPlaying]),te=w.useCallback(L=>{if(L.target instanceof HTMLInputElement)return;if(L.key.toLowerCase()==="p"){l.togglePatternSystem();return}if(L.key.toLowerCase()==="l"){l.toggleLiveMode();return}if(L.key===" "){L.preventDefault(),K();return}const $=L.key==="0"?9:parseInt(L.key,10)-1;if(!isNaN($)&&$>=0&&$<o.addedChords.length){const G=o.addedChords[$];G&&(o.setTemporaryChord(null),A(G.notes,$))}},[o.addedChords,A,K]);return w.useEffect(()=>{o.activeChordIndex!==null&&o.addedChords[o.activeChordIndex]?s.setCurrentlyActivePattern([...o.addedChords[o.activeChordIndex].pattern]):s.setCurrentlyActivePattern([...s.globalPatternState.currentPattern])},[o.activeChordIndex,o.addedChords,s.globalPatternState.currentPattern]),w.useEffect(()=>{if(s.globalPatternState.isPlaying){if(!u.current){h.current=Date.now(),f.current=0,s.setGlobalPatternState({currentStep:0}),p.current=Date.now()+E(0);const L=()=>{const $=Date.now();if($>=p.current){f.current++;const G=E(f.current);p.current=$+G,s.setGlobalPatternState({currentStep:f.current})}u.current=setTimeout(L,5)};L()}}else u.current&&(clearTimeout(u.current),u.current=null);return()=>{u.current&&(clearTimeout(u.current),u.current=null)}},[s.globalPatternState.isPlaying,E]),w.useEffect(()=>{if(s.globalPatternState.isPlaying){let L=null;if(o.temporaryChord?L=o.temporaryChord:o.activeChordIndex!==null&&o.addedChords[o.activeChordIndex]&&(L=o.addedChords[o.activeChordIndex]),L){const $=em(o.temporaryChord,o.activeChordIndex,o.addedChords,s.currentlyActivePattern),G=s.globalPatternState.currentStep%$.length;if(Xb($,G)){const X=ja(Xp,Zp,L.notes);o.setActiveNotes(X)}else o.setActiveNotes([])}}},[s.globalPatternState.isPlaying,s.globalPatternState.currentStep,o.temporaryChord,o.activeChordIndex,o.addedChords,s.currentlyActivePattern]),w.useEffect(()=>{e.chords?.length&&!m.current&&(m.current=!0,x.current=!0,R(),setTimeout(()=>{x.current=!1},100))},[e.chords,R]),w.useEffect(()=>(e.chords?.length&&a?.length&&!x.current&&(g.current&&clearTimeout(g.current),g.current=setTimeout(()=>{j()},100)),()=>{g.current&&clearTimeout(g.current)}),[e.key,e.mode,o.addedChords,s.globalPatternState,l.showPatternSystem,l.isLiveMode,n.pianoSettings,e.chords?.length,a?.length,j]),w.useEffect(()=>(document.addEventListener("keydown",te),()=>document.removeEventListener("keydown",te)),[te]),{chords:e.chords,key:e.key,mode:e.mode,modes:e.modes,activeNotes:o.activeNotes,activeChordIndex:o.activeChordIndex,highlightedChordIndex:o.highlightedChordIndex,addedChords:o.addedChords,loadingChords:e.loadingChords,isDeleteMode:l.isDeleteMode,isPlayingScale:o.isPlayingScale,isLiveMode:l.isLiveMode,globalPatternState:s.globalPatternState,currentlyActivePattern:s.currentlyActivePattern,temporaryChord:o.temporaryChord,normalizedScaleNotes:e.normalizedScaleNotes,pianoSettings:n.pianoSettings,availableInstruments:n.availableInstruments,setKey:e.setKey,setMode:e.setMode,setIsDeleteMode:l.setIsDeleteMode,setIsLiveMode:l.setIsLiveMode,setAvailableInstruments:n.setAvailableInstruments,handleChordClick:A,addChordClick:D,updateChord:I,reorderChords:T,clearAllChords:M,updateChordPattern:o.updateChordPattern,toggleScalePlayback:J,handlePatternChange:_,handleTogglePlayback:K,getCurrentPattern:S,handleFetchOriginalChord:o.handleFetchOriginalChord,setPianoInstrument:n.setPianoInstrument,setCutOffPreviousNotes:n.setCutOffPreviousNotes,setEq:n.setEq,setOctaveOffset:n.setOctaveOffset,setReverbLevel:n.setReverbLevel,setNoteDuration:n.setNoteDuration,setVolume:n.setVolume,setChorusLevel:n.setChorusLevel,setDelayLevel:n.setDelayLevel}};function e1({title:e,titleId:n,...o},s){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":n},o),e?w.createElement("title",{id:n},e):null,w.createElement("path",{d:"M10.75 2.75a.75.75 0 0 0-1.5 0v8.614L6.295 8.235a.75.75 0 1 0-1.09 1.03l4.25 4.5a.75.75 0 0 0 1.09 0l4.25-4.5a.75.75 0 0 0-1.09-1.03l-2.955 3.129V2.75Z"}),w.createElement("path",{d:"M3.5 12.75a.75.75 0 0 0-1.5 0v2.5A2.75 2.75 0 0 0 4.75 18h10.5A2.75 2.75 0 0 0 18 15.25v-2.5a.75.75 0 0 0-1.5 0v2.5c0 .69-.56 1.25-1.25 1.25H4.75c-.69 0-1.25-.56-1.25-1.25v-2.5Z"}))}const t1=w.forwardRef(e1);function n1({title:e,titleId:n,...o},s){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":n},o),e?w.createElement("title",{id:n},e):null,w.createElement("path",{d:"M3.28 2.22a.75.75 0 0 0-1.06 1.06L5.44 6.5H2.75a.75.75 0 0 0 0 1.5h4.5A.75.75 0 0 0 8 7.25v-4.5a.75.75 0 0 0-1.5 0v2.69L3.28 2.22ZM13.5 2.75a.75.75 0 0 0-1.5 0v4.5c0 .414.336.75.75.75h4.5a.75.75 0 0 0 0-1.5h-2.69l3.22-3.22a.75.75 0 0 0-1.06-1.06L13.5 5.44V2.75ZM3.28 17.78l3.22-3.22v2.69a.75.75 0 0 0 1.5 0v-4.5a.75.75 0 0 0-.75-.75h-4.5a.75.75 0 0 0 0 1.5h2.69l-3.22 3.22a.75.75 0 1 0 1.06 1.06ZM13.5 14.56l3.22 3.22a.75.75 0 1 0 1.06-1.06l-3.22-3.22h2.69a.75.75 0 0 0 0-1.5h-4.5a.75.75 0 0 0-.75.75v4.5a.75.75 0 0 0 1.5 0v-2.69Z"}))}const r1=w.forwardRef(n1);function o1({title:e,titleId:n,...o},s){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":n},o),e?w.createElement("title",{id:n},e):null,w.createElement("path",{d:"m13.28 7.78 3.22-3.22v2.69a.75.75 0 0 0 1.5 0v-4.5a.75.75 0 0 0-.75-.75h-4.5a.75.75 0 0 0 0 1.5h2.69l-3.22 3.22a.75.75 0 0 0 1.06 1.06ZM2 17.25v-4.5a.75.75 0 0 1 1.5 0v2.69l3.22-3.22a.75.75 0 0 1 1.06 1.06L4.56 16.5h2.69a.75.75 0 0 1 0 1.5h-4.5a.747.747 0 0 1-.75-.75ZM12.22 13.28l3.22 3.22h-2.69a.75.75 0 0 0 0 1.5h4.5a.747.747 0 0 0 .75-.75v-4.5a.75.75 0 0 0-1.5 0v2.69l-3.22-3.22a.75.75 0 1 0-1.06 1.06ZM3.5 4.56l3.22 3.22a.75.75 0 0 0 1.06-1.06L4.56 3.5h2.69a.75.75 0 0 0 0-1.5h-4.5a.75.75 0 0 0-.75.75v4.5a.75.75 0 0 0 1.5 0V4.56Z"}))}const s1=w.forwardRef(o1);function i1({title:e,titleId:n,...o},s){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":n},o),e?w.createElement("title",{id:n},e):null,w.createElement("path",{fillRule:"evenodd",d:"M16.704 4.153a.75.75 0 0 1 .143 1.052l-8 10.5a.75.75 0 0 1-1.127.075l-4.5-4.5a.75.75 0 0 1 1.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 0 1 1.05-.143Z",clipRule:"evenodd"}))}const a1=w.forwardRef(i1);function l1({title:e,titleId:n,...o},s){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":n},o),e?w.createElement("title",{id:n},e):null,w.createElement("path",{fillRule:"evenodd",d:"M5.22 8.22a.75.75 0 0 1 1.06 0L10 11.94l3.72-3.72a.75.75 0 1 1 1.06 1.06l-4.25 4.25a.75.75 0 0 1-1.06 0L5.22 9.28a.75.75 0 0 1 0-1.06Z",clipRule:"evenodd"}))}const eo=w.forwardRef(l1);function c1({title:e,titleId:n,...o},s){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":n},o),e?w.createElement("title",{id:n},e):null,w.createElement("path",{fillRule:"evenodd",d:"M11.78 5.22a.75.75 0 0 1 0 1.06L8.06 10l3.72 3.72a.75.75 0 1 1-1.06 1.06l-4.25-4.25a.75.75 0 0 1 0-1.06l4.25-4.25a.75.75 0 0 1 1.06 0Z",clipRule:"evenodd"}))}const u1=w.forwardRef(c1);function d1({title:e,titleId:n,...o},s){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":n},o),e?w.createElement("title",{id:n},e):null,w.createElement("path",{fillRule:"evenodd",d:"M8.22 5.22a.75.75 0 0 1 1.06 0l4.25 4.25a.75.75 0 0 1 0 1.06l-4.25 4.25a.75.75 0 0 1-1.06-1.06L11.94 10 8.22 6.28a.75.75 0 0 1 0-1.06Z",clipRule:"evenodd"}))}const Kg=w.forwardRef(d1);function f1({title:e,titleId:n,...o},s){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":n},o),e?w.createElement("title",{id:n},e):null,w.createElement("path",{fillRule:"evenodd",d:"M9.47 6.47a.75.75 0 0 1 1.06 0l4.25 4.25a.75.75 0 1 1-1.06 1.06L10 8.06l-3.72 3.72a.75.75 0 0 1-1.06-1.06l4.25-4.25Z",clipRule:"evenodd"}))}const $s=w.forwardRef(f1);function h1({title:e,titleId:n,...o},s){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":n},o),e?w.createElement("title",{id:n},e):null,w.createElement("path",{d:"M13.024 9.25c.47 0 .827-.433.637-.863a4 4 0 0 0-4.094-2.364c-.468.05-.665.576-.43.984l1.08 1.868a.75.75 0 0 0 .649.375h2.158ZM7.84 7.758c-.236-.408-.79-.5-1.068-.12A3.982 3.982 0 0 0 6 10c0 .884.287 1.7.772 2.363.278.38.832.287 1.068-.12l1.078-1.868a.75.75 0 0 0 0-.75L7.839 7.758ZM9.138 12.993c-.235.408-.039.934.43.984a4 4 0 0 0 4.094-2.364c.19-.43-.168-.863-.638-.863h-2.158a.75.75 0 0 0-.65.375l-1.078 1.868Z"}),w.createElement("path",{fillRule:"evenodd",d:"m14.13 4.347.644-1.117a.75.75 0 0 0-1.299-.75l-.644 1.116a6.954 6.954 0 0 0-2.081-.556V1.75a.75.75 0 0 0-1.5 0v1.29a6.954 6.954 0 0 0-2.081.556L6.525 2.48a.75.75 0 1 0-1.3.75l.645 1.117A7.04 7.04 0 0 0 4.347 5.87L3.23 5.225a.75.75 0 1 0-.75 1.3l1.116.644A6.954 6.954 0 0 0 3.04 9.25H1.75a.75.75 0 0 0 0 1.5h1.29c.078.733.27 1.433.556 2.081l-1.116.645a.75.75 0 1 0 .75 1.298l1.117-.644a7.04 7.04 0 0 0 1.523 1.523l-.645 1.117a.75.75 0 1 0 1.3.75l.644-1.116a6.954 6.954 0 0 0 2.081.556v1.29a.75.75 0 0 0 1.5 0v-1.29a6.954 6.954 0 0 0 2.081-.556l.645 1.116a.75.75 0 0 0 1.299-.75l-.645-1.117a7.042 7.042 0 0 0 1.523-1.523l1.117.644a.75.75 0 0 0 .75-1.298l-1.116-.645a6.954 6.954 0 0 0 .556-2.081h1.29a.75.75 0 0 0 0-1.5h-1.29a6.954 6.954 0 0 0-.556-2.081l1.116-.644a.75.75 0 0 0-.75-1.3l-1.117.645a7.04 7.04 0 0 0-1.524-1.523ZM10 4.5a5.475 5.475 0 0 0-2.781.754A5.527 5.527 0 0 0 5.22 7.277 5.475 5.475 0 0 0 4.5 10a5.475 5.475 0 0 0 .752 2.777 5.527 5.527 0 0 0 2.028 2.004c.802.458 1.73.719 2.72.719a5.474 5.474 0 0 0 2.78-.753 5.527 5.527 0 0 0 2.001-2.027c.458-.802.719-1.73.719-2.72a5.475 5.475 0 0 0-.753-2.78 5.528 5.528 0 0 0-2.028-2.002A5.475 5.475 0 0 0 10 4.5Z",clipRule:"evenodd"}))}const Lu=w.forwardRef(h1);function p1({title:e,titleId:n,...o},s){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":n},o),e?w.createElement("title",{id:n},e):null,w.createElement("path",{d:"M10 3a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM10 8.5a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM11.5 15.5a1.5 1.5 0 1 0-3 0 1.5 1.5 0 0 0 3 0Z"}))}const m1=w.forwardRef(p1);function g1({title:e,titleId:n,...o},s){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":n},o),e?w.createElement("title",{id:n},e):null,w.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 1 1-16 0 8 8 0 0 1 16 0Zm-7-4a1 1 0 1 1-2 0 1 1 0 0 1 2 0ZM9 9a.75.75 0 0 0 0 1.5h.253a.25.25 0 0 1 .244.304l-.459 2.066A1.75 1.75 0 0 0 10.747 15H11a.75.75 0 0 0 0-1.5h-.253a.25.25 0 0 1-.244-.304l.459-2.066A1.75 1.75 0 0 0 9.253 9H9Z",clipRule:"evenodd"}))}const v1=w.forwardRef(g1);function x1({title:e,titleId:n,...o},s){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":n},o),e?w.createElement("title",{id:n},e):null,w.createElement("path",{fillRule:"evenodd",d:"M10 1a4.5 4.5 0 0 0-4.5 4.5V9H5a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2v-6a2 2 0 0 0-2-2h-.5V5.5A4.5 4.5 0 0 0 10 1Zm3 8V5.5a3 3 0 1 0-6 0V9h6Z",clipRule:"evenodd"}))}const tm=w.forwardRef(x1);function y1({title:e,titleId:n,...o},s){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":n},o),e?w.createElement("title",{id:n},e):null,w.createElement("path",{fillRule:"evenodd",d:"M9 3.5a5.5 5.5 0 1 0 0 11 5.5 5.5 0 0 0 0-11ZM2 9a7 7 0 1 1 12.452 4.391l3.328 3.329a.75.75 0 1 1-1.06 1.06l-3.329-3.328A7 7 0 0 1 2 9Z",clipRule:"evenodd"}))}const b1=w.forwardRef(y1);function w1({title:e,titleId:n,...o},s){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":n},o),e?w.createElement("title",{id:n},e):null,w.createElement("path",{fillRule:"evenodd",d:"M4 10a.75.75 0 0 1 .75-.75h10.5a.75.75 0 0 1 0 1.5H4.75A.75.75 0 0 1 4 10Z",clipRule:"evenodd"}))}const nm=w.forwardRef(w1);function N1({title:e,titleId:n,...o},s){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":n},o),e?w.createElement("title",{id:n},e):null,w.createElement("path",{d:"M5.75 3a.75.75 0 0 0-.75.75v12.5c0 .414.336.75.75.75h1.5a.75.75 0 0 0 .75-.75V3.75A.75.75 0 0 0 7.25 3h-1.5ZM12.75 3a.75.75 0 0 0-.75.75v12.5c0 .414.336.75.75.75h1.5a.75.75 0 0 0 .75-.75V3.75a.75.75 0 0 0-.75-.75h-1.5Z"}))}const Us=w.forwardRef(N1);function C1({title:e,titleId:n,...o},s){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":n},o),e?w.createElement("title",{id:n},e):null,w.createElement("path",{fillRule:"evenodd",d:"M2 10a8 8 0 1 1 16 0 8 8 0 0 1-16 0Zm6.39-2.908a.75.75 0 0 1 .766.027l3.5 2.25a.75.75 0 0 1 0 1.262l-3.5 2.25A.75.75 0 0 1 8 12.25v-4.5a.75.75 0 0 1 .39-.658Z",clipRule:"evenodd"}))}const zs=w.forwardRef(C1);function S1({title:e,titleId:n,...o},s){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":n},o),e?w.createElement("title",{id:n},e):null,w.createElement("path",{d:"M6.3 2.84A1.5 1.5 0 0 0 4 4.11v11.78a1.5 1.5 0 0 0 2.3 1.27l9.344-5.891a1.5 1.5 0 0 0 0-2.538L6.3 2.841Z"}))}const Yg=w.forwardRef(S1);function E1({title:e,titleId:n,...o},s){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":n},o),e?w.createElement("title",{id:n},e):null,w.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 1 0 0-16 8 8 0 0 0 0 16Zm.75-11.25a.75.75 0 0 0-1.5 0v2.5h-2.5a.75.75 0 0 0 0 1.5h2.5v2.5a.75.75 0 0 0 1.5 0v-2.5h2.5a.75.75 0 0 0 0-1.5h-2.5v-2.5Z",clipRule:"evenodd"}))}const D1=w.forwardRef(E1);function j1({title:e,titleId:n,...o},s){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":n},o),e?w.createElement("title",{id:n},e):null,w.createElement("path",{d:"M10.75 4.75a.75.75 0 0 0-1.5 0v4.5h-4.5a.75.75 0 0 0 0 1.5h4.5v4.5a.75.75 0 0 0 1.5 0v-4.5h4.5a.75.75 0 0 0 0-1.5h-4.5v-4.5Z"}))}const rm=w.forwardRef(j1);function k1({title:e,titleId:n,...o},s){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":n},o),e?w.createElement("title",{id:n},e):null,w.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 1 1-16 0 8 8 0 0 1 16 0ZM8.94 6.94a.75.75 0 1 1-1.061-1.061 3 3 0 1 1 2.871 5.026v.345a.75.75 0 0 1-1.5 0v-.5c0-.72.57-1.172 1.081-1.287A1.5 1.5 0 1 0 8.94 6.94ZM10 15a1 1 0 1 0 0-2 1 1 0 0 0 0 2Z",clipRule:"evenodd"}))}const Qg=w.forwardRef(k1);function A1({title:e,titleId:n,...o},s){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":n},o),e?w.createElement("title",{id:n},e):null,w.createElement("path",{fillRule:"evenodd",d:"M8.75 1A2.75 2.75 0 0 0 6 3.75v.443c-.795.077-1.584.176-2.365.298a.75.75 0 1 0 .23 1.482l.149-.022.841 10.518A2.75 2.75 0 0 0 7.596 19h4.807a2.75 2.75 0 0 0 2.742-2.53l.841-10.52.149.023a.75.75 0 0 0 .23-1.482A41.03 41.03 0 0 0 14 4.193V3.75A2.75 2.75 0 0 0 11.25 1h-2.5ZM10 4c.84 0 1.673.025 2.5.075V3.75c0-.69-.56-1.25-1.25-1.25h-2.5c-.69 0-1.25.56-1.25 1.25v.325C8.327 4.025 9.16 4 10 4ZM8.58 7.72a.75.75 0 0 0-1.5.06l.3 7.5a.75.75 0 1 0 1.5-.06l-.3-7.5Zm4.34.06a.75.75 0 1 0-1.5-.06l-.3 7.5a.75.75 0 1 0 1.5.06l.3-7.5Z",clipRule:"evenodd"}))}const Jg=w.forwardRef(A1);function I1({title:e,titleId:n,...o},s){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":n},o),e?w.createElement("title",{id:n},e):null,w.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 1 0 0-16 8 8 0 0 0 0 16ZM8.28 7.22a.75.75 0 0 0-1.06 1.06L8.94 10l-1.72 1.72a.75.75 0 1 0 1.06 1.06L10 11.06l1.72 1.72a.75.75 0 1 0 1.06-1.06L11.06 10l1.72-1.72a.75.75 0 0 0-1.06-1.06L10 8.94 8.28 7.22Z",clipRule:"evenodd"}))}const Bu=w.forwardRef(I1);function P1({title:e,titleId:n,...o},s){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":n},o),e?w.createElement("title",{id:n},e):null,w.createElement("path",{d:"M6.28 5.22a.75.75 0 0 0-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 1 0 1.06 1.06L10 11.06l3.72 3.72a.75.75 0 1 0 1.06-1.06L11.06 10l3.72-3.72a.75.75 0 0 0-1.06-1.06L10 8.94 6.28 5.22Z"}))}const R1=w.forwardRef(P1),Xg=w.memo(({chord:e,index:n,isExpanded:o,isPlaying:s,isAdding:l,onChordPlay:a,onChordAdd:u,onToggleExpansion:f})=>{const h=w.useCallback(()=>{a(e.chordNoteNames,n,e.chordName)},[a,e.chordNoteNames,e.chordName,n]),p=w.useCallback(g=>{g.stopPropagation(),u(n,e.chordName,e.chordNoteNames,e.keyName,e.modeId)},[u,n,e.chordName,e.chordNoteNames,e.keyName,e.modeId]),m=w.useCallback(g=>{g.stopPropagation(),f(n)},[f,n]);return c.jsxs("div",{className:`bg-[#3d434f] rounded-lg border border-gray-600 hover:border-blue-500 hover:bg-[#444b59] transition-all duration-200 overflow-hidden cursor-pointer group relative ${s?"chord-playing z-50":""} ${l?"chord-adding z-40":""}`,onClick:h,children:[c.jsx("div",{className:"p-3 sm:p-4",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3 flex-1 min-w-0",children:[c.jsx(zs,{className:`h-5 w-5 sm:h-6 sm:w-6 transition-colors flex-shrink-0 ${s?"text-blue-400":"text-gray-400 group-hover:text-blue-300"}`}),c.jsx("h3",{className:`text-base sm:text-lg font-bold transition-colors truncate ${s?"text-blue-200":"text-white group-hover:text-blue-200"}`,children:e.chordName})]}),c.jsxs("div",{className:"flex items-center space-x-1 flex-shrink-0 ml-2",children:[c.jsx("button",{onClick:p,className:`p-1 sm:p-2 rounded-md transition-colors ${l?"bg-green-600 text-white":"hover:bg-green-600 text-gray-400 hover:text-white"}`,title:"Add to sequence",children:c.jsx(D1,{className:"h-5 w-5 sm:h-4 sm:w-4"})}),c.jsx("button",{onClick:m,className:"p-1.5 sm:p-2 rounded-md hover:bg-[#565b6f] text-gray-400 hover:text-white transition-colors",title:o?"Hide notes":"Show notes",children:o?c.jsx($s,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"}):c.jsx(eo,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"})})]})]})}),o&&c.jsx("div",{className:"px-3 pb-3 pt-0 sm:px-4 sm:pb-4",children:c.jsxs("div",{className:"bg-gray-800x bg-[#363c46]  rounded-md p-2 sm:p-3 border-1 border-gray-600",children:[c.jsx("div",{className:"text-xs font-medium text-gray-400 uppercase tracking-wide mb-1",children:"Notes"}),c.jsx("div",{className:"text-sm text-gray-200 font-mono",children:e.chordNoteNames})]})})]})});Xg.displayName="ChordCard";const T1=({onChordClick:e,addChordClick:n})=>{const[o,s]=w.useState("All"),[l,a]=w.useState(""),[u,f]=w.useState(new Set),[h,p]=w.useState(new Set),[m,g]=w.useState(new Set),[x,b]=w.useState(1),C=Xt(),{chords:E,loadingChords:S,allDistinctChords:j,loadingAllChords:R,showAllChords:A,toggleShowAllChords:D,key:I,mode:T}=C,M=A?j:E,_=A?R:S;w.useEffect(()=>{const k=()=>{const U=window.innerWidth;U>=1280?b(3):U>=640?b(2):b(1)};return k(),window.addEventListener("resize",k),()=>window.removeEventListener("resize",k)},[]);const K=w.useCallback(k=>Math.floor(k/x),[x]),J=w.useMemo(()=>M?M.filter(k=>k.chordName&&k.chordNoteNames&&k.chordNoteName&&k.chordName.trim()!==""&&k.chordNoteNames.trim()!==""&&k.chordNoteName.trim()!==""):[],[M]),te=w.useMemo(()=>{const k=new Set;return J.forEach(U=>{U.chordNoteName&&k.add(U.chordNoteName)}),Array.from(k).sort()},[J]),L=w.useMemo(()=>{const k={};return J.forEach(U=>{U.chordNoteName&&(k[U.chordNoteName]=(k[U.chordNoteName]||0)+1)}),k},[J]),$=w.useMemo(()=>{let k=J;if(o!=="All"&&(k=k.filter(U=>U.chordNoteName===o)),l.trim()){const U=l.toLowerCase().trim();k=k.filter(ae=>ae.chordName?.toLowerCase().includes(U)||ae.chordNoteNames?.toLowerCase().includes(U))}return k.sort((U,ae)=>{const fe=U.chordName?.toLowerCase()||"",ne=ae.chordName?.toLowerCase()||"";return fe.localeCompare(ne)})},[J,o,l]);w.useEffect(()=>{f(new Set)},[x,$]);const G=w.useCallback((k,U,ae)=>{p(ne=>new Set(ne).add(U)),e(k,void 0,ae);const fe=setTimeout(()=>{p(ne=>{const de=new Set(ne);return de.delete(U),de})},800);return()=>clearTimeout(fe)},[e]),X=w.useCallback((k,U,ae,fe,ne)=>{g(ge=>new Set(ge).add(k));const de=C.modes[ne-1];n?.(U,ae,fe,de);const Ee=setTimeout(()=>{g(ge=>{const le=new Set(ge);return le.delete(k),le})},600);return()=>clearTimeout(Ee)},[n,C.modes]),ee=w.useCallback(k=>{const U=K(k);f(ae=>{const fe=new Set(ae);return fe.has(U)?fe.delete(U):fe.add(U),fe})},[K]),se=w.useCallback(()=>{D(),s("All"),a(""),f(new Set)},[D]),q=w.useCallback(()=>{a(""),s("All")},[]),Q=w.useCallback(k=>{a(k.target.value)},[]),Y=w.useMemo(()=>c.jsxs("div",{className:"flex space-x-2 overflow-x-auto pb-2 scrollbar-thin scrollbar-thumb-gray-600 scrollbar-track-transparent px-1",children:[c.jsxs("button",{onClick:()=>s("All"),className:`flex-shrink-0 px-3 py-2 rounded-full text-sm font-medium transition-colors ${o==="All"?"bg-blue-600 text-white":"bg-[#444b59] text-gray-300 hover:bg-[#525a6b] hover:text-white"}`,children:["All (",J.length,")"]}),te.map(k=>c.jsxs("button",{onClick:()=>s(k),className:`flex-shrink-0 px-3 py-2 rounded-full text-sm font-medium transition-colors ${o===k?"bg-blue-600 text-white":"bg-[#444b59] text-gray-300 hover:bg-[#525a6b] hover:text-white"}`,children:[k," (",L[k]||0,")"]},k))]}),[o,J.length,te,L]);return c.jsxs("div",{className:"w-full max-w-7xl mx-auto px-2",children:[c.jsx("div",{className:"bg-[#3d434f]  border border-gray-600 rounded-lg overflow-hidden mb-4",children:c.jsxs("div",{className:"px-4 py-4",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsx("h2",{className:"text-sm font-bold text-slate-300 uppercase tracking-wider",children:"Chord Explorer"}),c.jsxs("div",{className:"text-xs text-gray-400",children:[$.length," of ",J.length," chords"]})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-center justify-between p-3 bg-[#444b59]x bg-[#363c46]  rounded-lg border border-gray-600",children:[c.jsxs("div",{className:"flex flex-col text-left",children:[c.jsx("span",{className:"text-xs uppercase font-medium text-gray-400 text-left",children:"Show All Chords"}),c.jsx("span",{className:"text-xs text-gray-400",children:A?j?`${j?.length} chords`:"Loading...":`Showing chords in ${I} ${T}`})]}),c.jsx("button",{onClick:se,disabled:_,className:`relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:ring-offset-gray-800 ${A?"bg-blue-600":"bg-gray-600"} ${_?"opacity-50 cursor-not-allowed":""}`,role:"switch","aria-checked":A,"aria-label":"Toggle between current mode chords and all distinct chords",children:c.jsx("span",{"aria-hidden":"true",className:`pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ${A?"translate-x-5":"translate-x-0"}`})})]}),c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"absolute left-3 inset-y-0 flex items-center pointer-events-none",children:c.jsx(b1,{className:"w-4 h-4 text-gray-400"})}),c.jsx("input",{type:"text",placeholder:"Search chords...",value:l,onChange:Q,className:"w-full pl-10 pr-4 py-2 bg-[#444b59] border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:border-blue-500 focus:outline-none transition-colors !text-sm"})]})]}),c.jsx("div",{className:"lg:hidden mt-4",children:Y})]})}),c.jsxs("div",{className:"flex flex-col lg:flex-row gap-3 lg:gap-4",children:[c.jsx("div",{className:"hidden lg:block lg:w-48 flex-shrink-0",children:c.jsxs("div",{className:"bg-[#3d434f] rounded-lg h-fit",children:[c.jsx("div",{className:"px-4 py-3 border-b border-gray-600",children:c.jsx("h3",{className:"text-sm font-medium text-gray-200 uppercase tracking-wide",children:"Filter by Root"})}),c.jsxs("div",{className:"p-2",children:[c.jsx("button",{onClick:()=>s("All"),className:`w-full px-3 py-2 text-left transition-colors rounded-md border-l-4 ${o==="All"?"bg-[#4a5262] border-l-blue-500 text-white":"hover:bg-[#444b59] border-l-transparent text-gray-300 hover:text-white"}`,children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("span",{className:"text-sm font-medium",children:"All Notes"}),c.jsx("span",{className:"text-xs text-gray-400 bg-gray-700 px-2 py-1 rounded",children:J.length})]})}),te.map(k=>c.jsx("button",{onClick:()=>s(k),className:`w-full px-3 py-2 text-left transition-colors rounded-md border-l-4 mt-1 ${o===k?"bg-[#4a5262] border-l-blue-500 text-white":"hover:bg-[#444b59] border-l-transparent text-gray-300 hover:text-white"}`,children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("span",{className:"text-sm font-medium",children:k}),c.jsx("span",{className:"text-xs text-gray-400 bg-gray-700 px-2 py-1 rounded",children:L[k]||0})]})},k))]})]})}),c.jsxs("div",{className:"flex-1",children:[_?c.jsx("div",{className:"flex justify-center items-center h-64",children:c.jsxs("div",{className:"flex flex-col items-center space-y-3",children:[c.jsx("div",{className:"inline-block h-8 w-8 animate-spin rounded-full border-4 border-solid border-current border-r-transparent text-blue-500"}),c.jsx("span",{className:"text-sm text-gray-400",children:A?"Loading all distinct chords...":"Loading chords..."})]})}):$.length?c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 gap-2 sm:gap-3",children:$.map((k,U)=>c.jsx(Xg,{chord:k,index:U,isExpanded:u.has(K(U)),isPlaying:h.has(U),isAdding:m.has(U),onChordPlay:G,onChordAdd:X,onToggleExpansion:ee},`chord-${k.chordName}-${U}`))}):c.jsx("div",{className:"flex justify-center items-center h-64 bg-[#3d434f] rounded-lg",children:c.jsxs("div",{className:"text-center space-y-3",children:[c.jsx("div",{className:"text-gray-500 text-4xl",children:"🎵"}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("div",{className:"text-sm text-gray-400",children:l.trim()?`No chords found matching "${l}"`:o==="All"?A?"No distinct chords available":"No chords available":`No chords found for root note "${o}"`}),(l.trim()||o!=="All")&&c.jsx("button",{onClick:q,className:"text-sm text-blue-400 hover:text-blue-300 underline transition-colors",children:"Clear filters"})]})]})}),$.length>0&&c.jsx("div",{className:"mt-4 text-center",children:c.jsxs("div",{className:"text-xs text-gray-400",children:["Tap any chord to play •",c.jsx("span",{className:"text-gray-300 mx-1",children:"+"})," to add to sequence •",c.jsx(eo,{className:"inline h-3 w-3 mx-1"})," to show notes for entire row",A&&c.jsx("span",{className:"block mt-1 text-blue-400",children:"Currently showing all distinct chords across all modes and keys (sorted alphabetically)"})]})})]})]})]})},qd=class qd extends w.Component{constructor(){super(...arguments),this.state={instrumentList:null},this.loadInstrumentList=()=>{fetch(`${this.props.hostname}/${this.props.soundfont}/names.json`).then(n=>n.json()).then(n=>{this.setState({instrumentList:n})})}}componentDidMount(){this.loadInstrumentList()}render(){return this.props.render(this.state.instrumentList)}};qd.defaultProps={soundfont:"MusyngKite"};let ka=qd;function M1({title:e,titleId:n,...o},s){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":n},o),e?w.createElement("title",{id:n},e):null,w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"}),w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const O1=w.forwardRef(M1);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _1=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),L1=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(n,o,s)=>s?s.toUpperCase():o.toLowerCase()),om=e=>{const n=L1(e);return n.charAt(0).toUpperCase()+n.slice(1)},Zg=(...e)=>e.filter((n,o,s)=>!!n&&n.trim()!==""&&s.indexOf(n)===o).join(" ").trim(),B1=e=>{for(const n in e)if(n.startsWith("aria-")||n==="role"||n==="title")return!0};/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var F1={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $1=w.forwardRef(({color:e="currentColor",size:n=24,strokeWidth:o=2,absoluteStrokeWidth:s,className:l="",children:a,iconNode:u,...f},h)=>w.createElement("svg",{ref:h,...F1,width:n,height:n,stroke:e,strokeWidth:s?Number(o)*24/Number(n):o,className:Zg("lucide",l),...!a&&!B1(f)&&{"aria-hidden":"true"},...f},[...u.map(([p,m])=>w.createElement(p,m)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e0=(e,n)=>{const o=w.forwardRef(({className:s,...l},a)=>w.createElement($1,{ref:a,iconNode:n,className:Zg(`lucide-${_1(om(e))}`,`lucide-${e}`,s),...l}));return o.displayName=om(e),o};/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U1=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],z1=e0("chevron-down",U1);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V1=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],G1=e0("search",V1);var tr=Ug();const H1=Pr(tr),Cn=({value:e,onChange:n,options:o,className:s="",menuClassName:l="",showSearch:a=!1,buttonClassName:u=""})=>{const[f,h]=w.useState(!1),[p,m]=w.useState(!1),[g,x]=w.useState(""),b=w.useRef(null),C=w.useRef(null),E=w.useRef(null),S=w.useRef(null),[j,R]=w.useState({top:0,left:0,width:0,maxHeight:320}),A=o.filter(M=>g?.length?M.toLowerCase().includes(g.toLowerCase()):!0),D=()=>{if(b.current){const M=b.current.getBoundingClientRect(),_=window.innerHeight-M.bottom,K=Math.min(_-10,320);R({top:M.bottom+window.scrollY,left:M.left+window.scrollX,width:M.width,maxHeight:K}),m(!0)}};w.useEffect(()=>{const M=K=>{b.current&&!b.current.contains(K.target)&&C.current&&!C.current.contains(K.target)&&(h(!1),x(""),m(!1))},_=K=>{K.key==="Escape"&&(h(!1),x(""),m(!1))};return f&&(document.addEventListener("mousedown",M),document.addEventListener("keydown",_)),()=>{document.removeEventListener("mousedown",M),document.removeEventListener("keydown",_)}},[f]),w.useEffect(()=>{f&&p&&S.current&&E.current&&S.current.scrollIntoView({block:"nearest",behavior:"instant"})},[f,p]);const I=()=>{f?(h(!1),m(!1)):(D(),requestAnimationFrame(()=>{h(!0)}))},T=M=>{n(M),h(!1),x(""),m(!1)};return c.jsxs("div",{className:`relative inline-block text-left text-lg ${s}`,children:[c.jsxs("button",{ref:b,onClick:I,className:`
          inline-flex w-full justify-between items-center gap-x-2 rounded-lg
          bg-[#3d434f] border
          px-4 py-2.5 text-sm font-medium
          text-slate-200 
          ${f?"border-blue-500 bg-[#4a5262]":"border-gray-600 hover:bg-[#4a5262] hover:border-gray-500"}
          focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:ring-offset-2 focus:ring-offset-[#2a2f38]
          transition-all duration-200 ease-out
          ${u.includes("h-")?"":"h-10"}
          ${u}
        `,children:[c.jsx("span",{className:"truncate text-left flex-1 font-medium tracking-wide",children:e}),c.jsx(z1,{className:`
            h-4 w-4 text-slate-400 flex-shrink-0
            transition-all duration-200
            ${f?"rotate-180 text-slate-200":"group-hover:text-slate-200"}
          `,"aria-hidden":"true"})]}),f&&p&&tr.createPortal(c.jsx("div",{ref:C,style:{position:"absolute",top:`${j.top+4}px`,left:`${j.left}px`,minWidth:`${j.width}px`,maxWidth:`${j.width}px`,zIndex:9999},className:"origin-top dropdown-enter",children:c.jsx("div",{style:{maxHeight:`${j.maxHeight}px`,minWidth:`${j.width}px`},className:"dropdown-menu rounded-lg shadow-2xl ring-1 ring-black/30 overflow-hidden",children:c.jsxs("div",{className:"bg-[#3d434f] border border-gray-600 rounded-lg overflow-hidden shadow-2xl",children:[a&&c.jsx("div",{className:"p-3 border-b border-gray-600 bg-[#444b59]",children:c.jsxs("div",{className:"relative",children:[c.jsx(G1,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-slate-400"}),c.jsx("input",{type:"text",className:`w-full text-slate-200 pl-9 pr-3 py-2 text-sm font-normal 
                        bg-[#2a2f38] border border-gray-600 rounded-md 
                        focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500 
                        placeholder-slate-500 
                        transition-all duration-200
                        hover:bg-[#333844] hover:border-gray-500`,placeholder:"Search options...",value:g,onChange:M=>x(M.target.value),autoFocus:!0})]})}),c.jsx("div",{ref:E,className:`py-1.5 overflow-y-auto ${l}`,style:{maxHeight:a?`${j.maxHeight-60}px`:`${j.maxHeight}px`},children:A.length>0?A.map((M,_)=>c.jsxs("button",{ref:e===M?S:null,onClick:()=>T(M),className:`
                        relative block w-full px-4 py-2.5 text-left text-sm font-medium 
                        transition-all duration-200
                        text-slate-300 hover:text-slate-100
                        hover:bg-[#4a5262]
                        border-l-2 border-l-transparent hover:border-l-blue-400
                      `,children:[c.jsx("span",{className:"relative truncate block tracking-wide",children:M}),e===M&&c.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-1.5 h-1.5 bg-blue-400 rounded-full"})]},_)):c.jsx("div",{className:"px-4 py-3 text-sm text-slate-500 italic text-center",children:"No options found"})})]})})}),document.body)]})},W1=e=>c.jsx("label",{className:pt("mr-[1em] flex-1 text-right text-sm font-medium text-slate-400",e.className),children:e.value}),q1=({isOpen:e,cutOffPreviousNotes:n,setCutOffPreviousNotes:o,eq:s,setEq:l,octaveOffset:a,setOctaveOffset:u,reverbLevel:f,setReverbLevel:h,noteDuration:p,setNoteDuration:m,volume:g,setVolume:x,chorusLevel:b,setChorusLevel:C,delayLevel:E,setDelayLevel:S})=>{const j=R=>{const{name:A,value:D}=R.target;l({...s,[A]:parseFloat(D)})};return c.jsx("div",{className:`transition-all duration-300 ease-in-out overflow-hidden px-2 ${e?"max-h-[600px] opacity-100 mt-6":"max-h-0 opacity-0"}`,children:c.jsxs("div",{className:"bg-[#3d434f] border border-gray-600 rounded-lg overflow-hidden w-full max-w-7xl mx-auto",children:[c.jsx("div",{className:"px-4 py-3 border-b border-gray-600",children:c.jsx("h3",{className:"text-sm font-medium text-slate-200 uppercase tracking-wider",children:"Piano Settings"})}),c.jsx("div",{className:"p-6 bg-[#444b59]",children:c.jsxs("div",{className:"grid grid-cols-2 gap-x-8",children:[c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsxs("label",{className:"block text-xs font-medium text-slate-200 mb-2 uppercase tracking-wide",children:["Volume",c.jsxs("span",{className:"text-xs text-slate-400 ml-2 normal-case",children:["(",Math.round(g*100),"%)"]})]}),c.jsx("div",{className:"relative",children:c.jsx("input",{type:"range",min:"0",max:"1.0",step:"0.05",value:g,onChange:R=>x(parseFloat(R.target.value)),className:"w-full h-1.5 bg-[#3d434f] rounded appearance-none cursor-pointer slider-thumb"})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-medium text-slate-200 mb-2 uppercase tracking-wide",children:"Octave Shift"}),c.jsxs("div",{className:"flex items-center justify-between bg-[#3d434f] border border-gray-600 rounded-md p-1.5",children:[c.jsx("button",{onClick:()=>u(Math.max(-3,a-1)),className:"w-6 h-6 flex items-center justify-center text-slate-300 hover:text-slate-200 hover:bg-[#4a5262] rounded transition-colors",disabled:a<=-3,children:"−"}),c.jsx("span",{className:"font-mono !text-xs text-slate-200 px-2",children:a===0?"Normal":`${a>0?"+":""}${a} octave${Math.abs(a)>1?"s":""}`}),c.jsx("button",{onClick:()=>u(Math.min(3,a+1)),className:"w-6 h-6 flex items-center justify-center text-slate-300 hover:text-slate-200 hover:bg-[#4a5262] rounded transition-colors",disabled:a>=3,children:"+"})]})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-xs font-medium text-slate-200 mb-2 uppercase tracking-wide",children:["Reverb",c.jsxs("span",{className:"text-xs text-slate-400 ml-2 normal-case",children:["(",Math.round(f*100),"%)"]})]}),c.jsx("div",{className:"relative",children:c.jsx("input",{type:"range",min:"0",max:"1.0",step:"0.05",value:f,onChange:R=>h(parseFloat(R.target.value)),className:"w-full h-1.5 bg-[#3d434f] rounded appearance-none cursor-pointer slider-thumb"})})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-xs font-medium text-slate-200 mb-2 uppercase tracking-wide",children:["Note Duration",c.jsxs("span",{className:"text-xs text-slate-400 ml-2 normal-case",children:["(",Math.round(p*100),"%)"]})]}),c.jsx("div",{className:"relative",children:c.jsx("input",{type:"range",min:"0.1",max:"1.0",step:"0.05",value:p,onChange:R=>m(parseFloat(R.target.value)),className:"w-full h-1.5 bg-[#3d434f] rounded appearance-none cursor-pointer slider-thumb"})})]}),c.jsx("div",{children:c.jsxs("label",{className:"flex items-center cursor-pointer",children:[c.jsx("input",{type:"checkbox",className:"w-3.5 h-3.5 text-blue-600 bg-[#3d434f] border-gray-600 rounded focus:ring-blue-500 focus:ring-1",checked:n,onChange:R=>o(R.target.checked)}),c.jsx("span",{className:"ml-2 text-xs text-slate-300 uppercase tracking-wide",children:"Cut off previous notes"})]})})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-medium text-slate-200 mb-2 uppercase tracking-wide",children:"Equalizer"}),c.jsx("div",{className:"space-y-3",children:[{label:"Bass",key:"bass"},{label:"Mid",key:"mid"},{label:"Treble",key:"treble"}].map(({label:R,key:A})=>c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between items-center mb-1",children:[c.jsx("span",{className:"text-xs text-slate-400 uppercase tracking-wide",children:R}),c.jsxs("span",{className:"text-xs text-slate-400 font-mono",children:[s[A]>0?"+":"",s[A].toFixed(1),"dB"]})]}),c.jsx("input",{type:"range",name:A,min:"-24",max:"24",step:"0.5",value:s[A],onChange:j,className:"w-full h-1.5 bg-[#3d434f] rounded appearance-none cursor-pointer slider-thumb"})]},A))})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsxs("label",{className:"block text-xs font-medium text-slate-200 mb-2 uppercase tracking-wide",children:["Chorus",c.jsxs("span",{className:"text-xs text-slate-400 ml-2 normal-case",children:["(",Math.round(b*100),"%)"]})]}),c.jsx("div",{className:"relative",children:c.jsx("input",{type:"range",min:"0",max:"1.0",step:"0.05",value:b,onChange:R=>C(parseFloat(R.target.value)),className:"w-full h-1.5 bg-[#3d434f] rounded appearance-none cursor-pointer slider-thumb"})})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-xs font-medium text-slate-200 mb-2 uppercase tracking-wide",children:["Delay",c.jsxs("span",{className:"text-xs text-slate-400 ml-2 normal-case",children:["(",Math.round(E*100),"%)"]})]}),c.jsx("div",{className:"relative",children:c.jsx("input",{type:"range",min:"0",max:"1.0",step:"0.05",value:E,onChange:R=>S(parseFloat(R.target.value)),className:"w-full h-1.5 bg-[#3d434f] rounded appearance-none cursor-pointer slider-thumb"})})]})]})]})]})})]})})},Sn=({children:e,onClick:n,className:o="",variant:s="primary",size:l="md",disabled:a=!1,active:u=!1,"aria-label":f,"aria-expanded":h,type:p="button",title:m})=>{const g=`
    inline-flex justify-center items-center gap-x-2 rounded-sm
    font-medium border
    focus:outline-none
    transition-all duration-200 ease-out
    disabled:opacity-50 disabled:cursor-not-allowed
    relative overflow-hidden
  `,x=`
    focus:ring-2 focus:ring-offset-2 focus:ring-offset-[#2a2f38]
  `,b={sm:"px-3 py-1.5 text-xs h-8",md:"px-4 py-2.5 text-sm h-10",lg:"px-6 py-3 text-base h-12",icon:"w-8 h-8 flex items-center justify-center p-0"},C={primary:`
      ${u?"bg-[#525a6b] border-gray-500 text-slate-100":"bg-[#3d434f] border-gray-600 text-slate-200 hover:bg-[#4a5262] hover:border-gray-500"}
      focus:ring-blue-500/50
    `,secondary:`
      ${u?"bg-[#525a6b] border-gray-500 text-slate-100":"bg-[#4a5262] border-gray-500 text-slate-200 hover:bg-[#525a6b] hover:border-gray-400"}
      focus:ring-gray-400/50
    `,success:`
      ${u?"bg-green-600 border-green-500 text-green-100":"bg-green-700 border-green-600 text-green-100 hover:bg-green-600 hover:border-green-500"}
      focus:ring-green-500/50
    `,danger:`
      ${u?"bg-red-600 border-red-500 text-red-100":"bg-red-700 border-red-600 text-red-100 hover:bg-red-600 hover:border-red-500"}
      focus:ring-red-500/50
    `,icon:`
      ${u?"bg-[#525a6b] border-gray-500 text-slate-200":"bg-[#3d434f] border-gray-600 text-slate-400 hover:bg-[#4a5262] hover:border-gray-500 hover:text-slate-200"}
      focus:ring-gray-500/50
    `,"play-stop":`
      ${u?"bg-red-700 hover:bg-red-600 border-red-600 text-white":"bg-green-600 hover:bg-green-500 border-green-500 text-white"}
      font-medium uppercase tracking-wide text-sm w-[7em] px-4 py-2
      focus:ring-green-500/50
    `};return c.jsx("button",{type:p,onClick:n,disabled:a,"aria-label":f,"aria-expanded":h,title:m,className:pt(g,x,b[l],C[s],o),children:c.jsx("span",{className:pt("flex items-center gap-x-2 tracking-wide","relative"),children:e})})};class K1 extends w.Component{constructor(n){super(n),this.handleKeyDown=o=>{const{noteRange:s,keyboardShortcutOffset:l}=this.props.config;if(!s)return;const a=s.last-s.first+1,u=0,f=a-this.props.keyboardShortcuts.length;if(o.key==="ArrowLeft"){const h=l-1;h>=u&&this.props.setConfig({keyboardShortcutOffset:h})}else if(o.key==="ArrowRight"){const h=l+1;h<=f&&this.props.setConfig({keyboardShortcutOffset:h})}},this.onChangeFirstNote=o=>{this.props.setConfig({noteRange:{first:parseInt(o.target.value,10),last:this.props.config.noteRange.last}})},this.onChangeLastNote=o=>{this.props.setConfig({noteRange:{first:this.props.config.noteRange.first,last:parseInt(o.target.value,10)}})},this.onChangeInstrument=o=>{const s=o.replaceAll(" ","_");this.props.setConfig({instrumentName:s}),this.props.onInstrumentChange(s)},this.state={settingsOpen:!1}}componentDidMount(){window.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){window.removeEventListener("keydown",this.handleKeyDown)}render(){const{noteRange:n,instrumentName:o}=this.props.config;return c.jsxs("div",{children:[c.jsx("div",{className:"flex justify-center",children:c.jsxs("div",{className:"inline-flex items-center gap-2",children:[c.jsx("div",{className:"inline-block",children:c.jsx(W1,{value:"voice"})}),c.jsx("div",{className:"inline-block",children:c.jsx(Cn,{className:"form-control h-10",value:this.props.config.instrumentName.replaceAll("_"," ")||o.replaceAll("_"," "),onChange:this.onChangeInstrument,options:this.props.instrumentList.map(s=>s.replaceAll("_"," ")),showSearch:!0})}),c.jsx("div",{className:"inline-block",children:c.jsx(Sn,{onClick:()=>this.setState({settingsOpen:!this.state.settingsOpen}),active:this.state.settingsOpen,"aria-label":"Sound Settings","aria-expanded":this.state.settingsOpen,size:"sm",className:"h-10 ",children:c.jsx(O1,{className:"h-5 w-5 text-slate-400 group-hover:text-slate-300 transition-colors duration-200 flex-shrink-0"})})})]})}),c.jsx("div",{className:"flex justify-center",children:c.jsx(q1,{isOpen:this.state.settingsOpen,cutOffPreviousNotes:this.props.cutOffPreviousNotes,setCutOffPreviousNotes:this.props.setCutOffPreviousNotes,eq:this.props.eq,setEq:this.props.setEq,octaveOffset:this.props.octaveOffset,setOctaveOffset:this.props.setOctaveOffset,reverbLevel:this.props.reverbLevel,setReverbLevel:this.props.setReverbLevel,noteDuration:this.props.noteDuration,setNoteDuration:this.props.setNoteDuration,volume:this.props.volume,setVolume:this.props.setVolume,chorusLevel:this.props.chorusLevel,setChorusLevel:this.props.setChorusLevel,delayLevel:this.props.delayLevel,setDelayLevel:this.props.setDelayLevel})})]})}}var Jc={exports:{}},Xc={exports:{}},Zc,sm;function Y1(){if(sm)return Zc;sm=1;function e(o){return o>64&&o<91?o-65:o>96&&o<123?o-71:o>47&&o<58?o+4:o===43?62:o===47?63:0}function n(o,s){for(var l=o.replace(/[^A-Za-z0-9\+\/]/g,""),a=l.length,u=s?Math.ceil((a*3+1>>2)/s)*s:a*3+1>>2,f=new Uint8Array(u),h,p,m=0,g=0,x=0;x<a;x++)if(p=x&3,m|=e(l.charCodeAt(x))<<18-6*p,p===3||a-x===1){for(h=0;h<3&&g<u;h++,g++)f[g]=m>>>(16>>>h&24)&255;m=0}return f}return Zc={decode:n},Zc}var eu,im;function Q1(){return im||(im=1,eu=function(e,n){return new Promise(function(o,s){var l=new XMLHttpRequest;n&&(l.responseType=n),l.open("GET",e),l.onload=function(){l.status===200?o(l.response):s(Error(l.statusText))},l.onerror=function(){s(Error("Network Error"))},l.send()})}),eu}var am;function J1(){return am||(am=1,function(e){var n=Y1(),o=Q1();function s(M){return function(_){return typeof _=="string"&&M.test(_)}}function l(M,_){return typeof M=="string"?M+_:typeof M=="function"?M(_):_}function a(M,_,K,J){var te=u(_)?f:h(_)?p:m(_)?g:x(_)?b:C(_)?E:S(_)?j:R(_)?A:D(_)?I:null,L=K||{};return te?te(M,_,L):J?Promise.resolve(J):Promise.reject("Source not valid ("+_+")")}a.fetch=o;function u(M){return M instanceof ArrayBuffer}function f(M,_,K){return new Promise(function(J,te){M.decodeAudioData(_,function(L){J(L)},function(){te("Can't decode audio data ("+_.slice(0,30)+"...)")})})}var h=s(/\.(mp3|wav|ogg)(\?.*)?$/i);function p(M,_,K){var J=l(K.from,_);return a(M,a.fetch(J,"arraybuffer"),K)}function m(M){return M&&typeof M.then=="function"}function g(M,_,K){return _.then(function(J){return a(M,J,K)})}var x=Array.isArray;function b(M,_,K){return Promise.all(_.map(function(J){return a(M,J,K,J)}))}function C(M){return M&&typeof M=="object"}function E(M,_,K){var J={},te=Object.keys(_).map(function(L){if(K.only&&K.only.indexOf(L)===-1)return null;var $=_[L];return a(M,$,K,$).then(function(G){J[L]=G})});return Promise.all(te).then(function(){return J})}var S=s(/\.json(\?.*)?$/i);function j(M,_,K){var J=l(K.from,_);return a(M,a.fetch(J,"text").then(JSON.parse),K)}var R=s(/^data:audio/);function A(M,_,K){var J=_.indexOf(",");return a(M,n.decode(_.slice(J+1)).buffer,K)}var D=s(/\.js(\?.*)?$/i);function I(M,_,K){var J=l(K.from,_);return a(M,a.fetch(J,"text").then(T),K)}function T(M){var _=M.indexOf("MIDI.Soundfont.");if(_<0)throw Error("Invalid MIDI.js Soundfont format");_=M.indexOf("=",_)+2;var K=M.lastIndexOf(",");return JSON.parse(M.slice(_,K)+"}")}e.exports&&(e.exports=a),typeof window<"u"&&(window.loadAudio=a)}(Xc)),Xc.exports}var tu={exports:{}},nu,lm;function X1(){if(lm)return nu;lm=1,nu=e;function e(f){var h=f.createGain(),p=h._voltage=s(f),m=l(p),g=l(p),x=l(p);return h._startAmount=l(g),h._endAmount=l(x),h._multiplier=l(m),h._multiplier.connect(h),h._startAmount.connect(h),h._endAmount.connect(h),h.value=m.gain,h.startValue=g.gain,h.endValue=x.gain,h.startValue.value=0,h.endValue.value=0,Object.defineProperties(h,n),h}var n={attack:{value:0,writable:!0},decay:{value:0,writable:!0},sustain:{value:1,writable:!0},release:{value:0,writable:!0},getReleaseDuration:{value:function(){return this.release}},start:{value:function(f){var h=this._multiplier.gain,p=this._startAmount.gain,m=this._endAmount.gain;this._voltage.start(f),this._decayFrom=this._decayFrom=f+this.attack,this._startedAt=f;var g=this.sustain;h.cancelScheduledValues(f),p.cancelScheduledValues(f),m.cancelScheduledValues(f),m.setValueAtTime(0,f),this.attack?(h.setValueAtTime(0,f),h.linearRampToValueAtTime(1,f+this.attack),p.setValueAtTime(1,f),p.linearRampToValueAtTime(0,f+this.attack)):(h.setValueAtTime(1,f),p.setValueAtTime(0,f)),this.decay&&h.setTargetAtTime(g,this._decayFrom,a(this.decay))}},stop:{value:function(f,h){h&&(f=f-this.release);var p=f+this.release;if(this.release){var m=this._multiplier.gain,g=this._startAmount.gain,x=this._endAmount.gain;m.cancelScheduledValues(f),g.cancelScheduledValues(f),x.cancelScheduledValues(f);var b=a(this.release);if(this.attack&&f<this._decayFrom){var C=u(0,1,this._startedAt,this._decayFrom,f);m.linearRampToValueAtTime(C,f),g.linearRampToValueAtTime(1-C,f),g.setTargetAtTime(0,f,b)}x.setTargetAtTime(1,f,b),m.setTargetAtTime(0,f,b)}return this._voltage.stop(p),p}},onended:{get:function(){return this._voltage.onended},set:function(f){this._voltage.onended=f}}},o=new Float32Array([1,1]);function s(f){var h=f.createBufferSource(),p=f.createBuffer(1,2,f.sampleRate);return p.getChannelData(0).set(o),h.buffer=p,h.loop=!0,h}function l(f){var h=f.context.createGain();return f.connect(h),h}function a(f){return Math.log(f+1)/Math.log(100)}function u(f,h,p,m,g){var x=h-f,b=m-p,C=g-p,E=C/b,S=f+E*x;return S<=f&&(S=f),S>=h&&(S=h),S}return nu}var ru,cm;function Z1(){if(cm)return ru;cm=1;var e=X1(),n={},o={gain:1,attack:.01,decay:.1,sustain:.9,release:.3,loop:!1,cents:0,loopStart:0,loopEnd:0};function s(h,p,m){var g=!1,x=0,b={},C=h.createGain();C.gain.value=1;var E=Object.assign({},o,m),S={context:h,out:C,opts:E};return p instanceof AudioBuffer?S.buffer=p:S.buffers=p,S.start=function(A,D,I){if(S.buffer&&A!==null)return S.start(null,A,D);var T=A?S.buffers[A]:S.buffer;if(T){if(!g){console.warn("SamplePlayer not connected to any node.");return}}else{console.warn("Buffer "+A+" not found.");return}var M=I||n;D=Math.max(h.currentTime,D||0),S.emit("start",D,A,M);var _=R(A,T,M);return _.id=j(A,_),_.env.start(D),_.source.start(D),S.emit("started",D,_.id,_),M.duration&&_.stop(D+M.duration),_},S.play=function(A,D,I){return S.start(A,D,I)},S.stop=function(A,D){var I;return D=D||Object.keys(b),D.map(function(T){return I=b[T],I?(I.stop(A),I.id):null})},S.connect=function(A){return g=!0,C.connect(A),S},S.emit=function(A,D,I,T){S.onevent&&S.onevent(A,D,I,T);var M=S["on"+A];M&&M(D,I,T)},S;function j(A,D){return D.id=x++,b[D.id]=D,D.source.onended=function(){var I=h.currentTime;D.source.disconnect(),D.env.disconnect(),D.disconnect(),S.emit("ended",I,D.id,D)},D.id}function R(A,D,I){var T=h.createGain();return T.gain.value=0,T.connect(C),T.env=u(h,I,E),T.env.connect(T.gain),T.source=h.createBufferSource(),T.source.buffer=D,T.source.connect(T),T.source.loop=I.loop||E.loop,T.source.playbackRate.value=f(I.cents||E.cents),T.source.loopStart=I.loopStart||E.loopStart,T.source.loopEnd=I.loopEnd||E.loopEnd,T.stop=function(M){var _=M||h.currentTime;S.emit("stop",_,A);var K=T.env.stop(_);T.source.stop(K)},T}}function l(h){return typeof h=="number"}var a=["attack","decay","sustain","release"];function u(h,p,m){var g=e(h),x=p.adsr||m.adsr;return a.forEach(function(b,C){x?g[b]=x[C]:g[b]=p[b]||m[b]}),g.value.value=l(p.gain)?p.gain:l(m.gain)?m.gain:1,g}function f(h){return h?Math.pow(2,h/1200):1}return ru=s,ru}var ou,um;function ew(){if(um)return ou;um=1,ou=function(n){return n.on=function(o,s){if(arguments.length===1&&typeof o=="function")return n.on("event",o);var l="on"+o,a=n[l];return n[l]=a?e(a,s):s,n},n};function e(n,o){return function(s,l,a,u){n(s,l,a,u),o(s,l,a,u)}}return ou}var su,dm;function tw(){if(dm)return su;dm=1;var e=/^([a-gA-G])(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)\s*$/;function n(){return e}var o=[0,2,4,5,7,9,11];function s(f,h,p){if(typeof f!="string")return null;var m=e.exec(f);if(!m||!h&&m[4])return null;var g={letter:m[1].toUpperCase(),acc:m[2].replace(/x/g,"##")};return g.pc=g.letter+g.acc,g.step=(g.letter.charCodeAt(0)+3)%7,g.alt=g.acc[0]==="b"?-g.acc.length:g.acc.length,g.chroma=o[g.step]+g.alt,m[3]&&(g.oct=+m[3],g.midi=g.chroma+12*(g.oct+1),g.freq=l(g.midi,p)),h&&(g.tonicOf=m[4]),g}function l(f,h){return Math.pow(2,(f-69)/12)*(h||440)}var a={parse:s,regex:n,midiToFreq:l},u=["letter","acc","pc","step","alt","chroma","oct","midi","freq"];return u.forEach(function(f){a[f]=function(h){var p=s(h);return p&&typeof p[f]<"u"?p[f]:null}}),su=a,su}var iu,fm;function nw(){if(fm)return iu;fm=1;var e=tw(),n=function(l){return l!==null&&l!==[]&&l>=0&&l<129},o=function(l){return n(l)?+l:e.midi(l)};iu=function(l){if(l.buffers){var a=l.opts.map,u=typeof a=="function"?a:o,f=function(p){return p?u(p)||p:null};l.buffers=s(l.buffers,f);var h=l.start;l.start=function(p,m,g){var x=f(p),b=x%1;return b&&(x=Math.floor(x),g=Object.assign(g||{},{cents:Math.floor(b*100)})),h(x,m,g)}}return l};function s(l,a){return Object.keys(l).reduce(function(u,f){return u[a(f)]=l[f],u},{})}return iu}var au,hm;function rw(){if(hm)return au;hm=1;var e=Array.isArray,n=function(s){return s&&typeof s=="object"},o={};return au=function(s){return s.schedule=function(l,a){var u=s.context.currentTime,f=l<u?u:l;s.emit("schedule",f,a);var h,p,m,g;return a.map(function(x){if(x)e(x)?(h=x[0],p=x[1]):(h=x.time,p=x);else return null;return n(p)?(m=p.name||p.key||p.note||p.midi||null,g=p):(m=p,g=o),s.start(m,f+(h||0),g)})},s},au}function ma(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var lu={exports:{}},pm;function ow(){return pm||(pm=1,function(e,n){(function(o){e.exports=o()})(function(){return function o(s,l,a){function u(p,m){if(!l[p]){if(!s[p]){var g=typeof ma=="function"&&ma;if(!m&&g)return g(p,!0);if(f)return f(p,!0);var x=new Error("Cannot find module '"+p+"'");throw x.code="MODULE_NOT_FOUND",x}var b=l[p]={exports:{}};s[p][0].call(b.exports,function(C){var E=s[p][1][C];return u(E||C)},b,b.exports,o,s,l,a)}return l[p].exports}for(var f=typeof ma=="function"&&ma,h=0;h<a.length;h++)u(a[h]);return u}({1:[function(o,s,l){Object.defineProperty(l,"__esModule",{value:!0}),l.default=function(a){function u(f){if(this._event=f,this._data=f.data,this.receivedTime=f.receivedTime,this._data&&this._data.length<2){console.warn("Illegal MIDI message of length",this._data.length);return}switch(this._messageCode=f.data[0]&240,this.channel=f.data[0]&15,this._messageCode){case 128:this.messageType="noteoff",this.key=f.data[1]&127,this.velocity=f.data[2]&127;break;case 144:this.messageType="noteon",this.key=f.data[1]&127,this.velocity=f.data[2]&127;break;case 160:this.messageType="keypressure",this.key=f.data[1]&127,this.pressure=f.data[2]&127;break;case 176:this.messageType="controlchange",this.controllerNumber=f.data[1]&127,this.controllerValue=f.data[2]&127,this.controllerNumber===120&&this.controllerValue===0?this.channelModeMessage="allsoundoff":this.controllerNumber===121?this.channelModeMessage="resetallcontrollers":this.controllerNumber===122?this.controllerValue===0?this.channelModeMessage="localcontroloff":this.channelModeMessage="localcontrolon":this.controllerNumber===123&&this.controllerValue===0?this.channelModeMessage="allnotesoff":this.controllerNumber===124&&this.controllerValue===0?this.channelModeMessage="omnimodeoff":this.controllerNumber===125&&this.controllerValue===0?this.channelModeMessage="omnimodeon":this.controllerNumber===126?this.channelModeMessage="monomodeon":this.controllerNumber===127&&(this.channelModeMessage="polymodeon");break;case 192:this.messageType="programchange",this.program=f.data[1];break;case 208:this.messageType="channelpressure",this.pressure=f.data[1]&127;break;case 224:this.messageType="pitchbendchange";var h=f.data[2]&127,p=f.data[1]&127;this.pitchBend=(h<<8)+p;break}}return new u(a)},s.exports=l.default},{}]},{},[1])(1)})}(lu)),lu.exports}var cu,mm;function sw(){if(mm)return cu;mm=1;var e=ow();return cu=function(n){return n.listenToMidi=function(o,s){var l={},a=s||{},u=a.gain||function(f){return f/127};return o.onmidimessage=function(f){var h=f.messageType?f:e(f);if(h.messageType==="noteon"&&h.velocity===0&&(h.messageType="noteoff"),!(a.channel&&h.channel!==a.channel))switch(h.messageType){case"noteon":l[h.key]=n.play(h.key,0,{gain:u(h.velocity)});break;case"noteoff":l[h.key]&&(l[h.key].stop(),delete l[h.key]);break}},n},n},cu}var gm;function iw(){return gm||(gm=1,function(e){var n=Z1(),o=ew(),s=nw(),l=rw(),a=sw();function u(f,h,p){return a(l(s(o(n(f,h,p)))))}e.exports&&(e.exports=u),typeof window<"u"&&(window.SamplePlayer=u)}(tu)),tu.exports}function vm(e,n){return Array(n+1).join(e)}function hd(e){return typeof e=="number"}function aw(e){return typeof e=="string"}function lw(e){return typeof e<"u"}function t0(e,n){return Math.pow(2,(e-69)/12)*(n||440)}var n0=/^([a-gA-G])(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)\s*$/;function cw(){return n0}var uw=[0,2,4,5,7,9,11];function nr(e,n,o){if(typeof e!="string")return null;var s=n0.exec(e);if(!s||!n&&s[4])return null;var l={letter:s[1].toUpperCase(),acc:s[2].replace(/x/g,"##")};l.pc=l.letter+l.acc,l.step=(l.letter.charCodeAt(0)+3)%7,l.alt=l.acc[0]==="b"?-l.acc.length:l.acc.length;var a=uw[l.step]+l.alt;return l.chroma=a<0?12+a:a%12,s[3]&&(l.oct=+s[3],l.midi=a+12*(l.oct+1),l.freq=t0(l.midi,o)),n&&(l.tonicOf=s[4]),l}var dw="CDEFGAB";function fw(e){return hd(e)?e<0?vm("b",-e):vm("#",e):""}function hw(e){return hd(e)?""+e:""}function r0(e,n,o){return e===null||typeof e>"u"?null:e.step?r0(e.step,e.alt,e.oct):e<0||e>6?null:dw.charAt(e)+fw(n)+hw(o)}function o0(e){if((hd(e)||aw(e))&&e>=0&&e<128)return+e;var n=nr(e);return n&&lw(n.midi)?n.midi:null}function pw(e,n){var o=o0(e);return o===null?null:t0(o,n)}function mw(e){return(nr(e)||{}).letter}function gw(e){return(nr(e)||{}).acc}function vw(e){return(nr(e)||{}).pc}function xw(e){return(nr(e)||{}).step}function yw(e){return(nr(e)||{}).alt}function bw(e){return(nr(e)||{}).chroma}function ww(e){return(nr(e)||{}).oct}const Nw=Object.freeze(Object.defineProperty({__proto__:null,acc:gw,alt:yw,build:r0,chroma:bw,freq:pw,letter:mw,midi:o0,oct:ww,parse:nr,pc:vw,regex:cw,step:xw},Symbol.toStringTag,{value:"Module"})),Cw=$g(Nw);var uu,xm;function Sw(){if(xm)return uu;xm=1;var e=Cw;function n(l,a){if(console.warn("new Soundfont() is deprected"),console.log("Please use Soundfont.instrument() instead of new Soundfont().instrument()"),!(this instanceof n))return new n(l);this.nameToUrl=a||n.nameToUrl,this.ctx=l,this.instruments={},this.promises=[]}n.prototype.onready=function(l){console.warn("deprecated API"),console.log("Please use Promise.all(Soundfont.instrument(), Soundfont.instrument()).then() instead of new Soundfont().onready()"),Promise.all(this.promises).then(l)},n.prototype.instrument=function(l,a){console.warn("new Soundfont().instrument() is deprecated."),console.log("Please use Soundfont.instrument() instead.");var u=this.ctx;if(l=l||"default",l in this.instruments)return this.instruments[l];var f={name:l,play:s(u,a)};if(this.instruments[l]=f,l!=="default"){var h=n.instrument(u,l,a).then(function(p){return f.play=p.play,f});this.promises.push(h),f.onready=function(p){console.warn("onready is deprecated. Use Soundfont.instrument().then()"),h.then(p)}}else f.onready=function(p){console.warn("onready is deprecated. Use Soundfont.instrument().then()"),p()};return f};function o(l,a,u){return console.warn("Soundfont.loadBuffers is deprecate."),console.log("Use Soundfont.instrument(..) and get buffers properties from the result."),n.instrument(l,a,u).then(function(f){return f.buffers})}n.loadBuffers=o;function s(l,a){return a=a||{},function(u,f,h,p){console.warn("The oscillator player is deprecated."),console.log("Starting with version 0.9.0 you will have to wait until the soundfont is loaded to play sounds.");var m=u>0&&u<129?+u:e.midi(u),g=m?e.midiToFreq(m,440):null;if(g){h=h||.2,p=p||{};var x=p.destination||a.destination||l.destination,b=p.vcoType||a.vcoType||"sine",C=p.gain||a.gain||.4,E=l.createOscillator();E.type=b,E.frequency.value=g;var S=l.createGain();return S.gain.value=C,E.connect(S),S.connect(x),E.start(f),h>0&&E.stop(f+h),E}}}return n.noteToMidi=e.midi,uu=n,uu}var ym;function Ew(){return ym||(ym=1,function(e){var n=J1(),o=iw();function s(f,h,p){if(arguments.length===1)return function(C,E){return s(f,C,E)};var m=p||{},g=m.isSoundfontURL||l,x=m.nameToUrl||a,b=g(h)?h:x(h,m.soundfont,m.format);return n(f,b,{only:m.only||m.notes}).then(function(C){var E=o(f,C,m).connect(m.destination?m.destination:f.destination);return E.url=b,E.name=h,E})}function l(f){return/\.js(\?.*)?$/i.test(f)}function a(f,h,p){return p=p==="ogg"?p:"mp3",h=h==="FluidR3_GM"?h:"MusyngKite","https://gleitz.github.io/midi-js-soundfonts/"+h+"/"+f+"-"+p+".js"}var u=Sw();u.instrument=s,u.nameToUrl=a,e.exports&&(e.exports=u),typeof window<"u"&&(window.Soundfont=u)}(Jc)),Jc.exports}var Dw=Ew();const jw=Pr(Dw),Kd=class Kd extends we.Component{constructor(n){super(n),this.setupAudioChain=()=>{const{audioContext:o,eq:s,reverbLevel:l,volume:a,chorusLevel:u,delayLevel:f}=this.props;this.effectsChain=o.createGain(),this.masterVolumeNode=o.createGain(),this.masterVolumeNode.gain.value=a,this.bassNode=o.createBiquadFilter(),this.midNode=o.createBiquadFilter(),this.trebleNode=o.createBiquadFilter(),this.bassNode.type="lowshelf",this.bassNode.frequency.value=320,this.bassNode.gain.value=s.bass,this.midNode.type="peaking",this.midNode.frequency.value=1e3,this.midNode.Q.value=1,this.midNode.gain.value=s.mid,this.trebleNode.type="highshelf",this.trebleNode.frequency.value=3200,this.trebleNode.gain.value=s.treble,this.chorusDelayNode=o.createDelay(.05),this.chorusDelayNode.delayTime.value=.015,this.chorusLFO=o.createOscillator(),this.chorusLFO.frequency.value=1.5,this.chorusLFO.type="sine",this.chorusLFOGain=o.createGain(),this.chorusLFOGain.gain.value=.005,this.chorusDryGain=o.createGain(),this.chorusWetGain=o.createGain(),this.chorusMixNode=o.createGain(),this.chorusLFO.connect(this.chorusLFOGain),this.chorusLFOGain.connect(this.chorusDelayNode.delayTime),this.chorusLFO.start(),this.delayNode=o.createDelay(1),this.delayNode.delayTime.value=.3,this.delayFeedbackGain=o.createGain(),this.delayFeedbackGain.gain.value=.4,this.delayDryGain=o.createGain(),this.delayWetGain=o.createGain(),this.delayMixNode=o.createGain(),this.delayNode.connect(this.delayFeedbackGain),this.delayFeedbackGain.connect(this.delayNode),this.convolverNode=o.createConvolver(),this.wetGainNode=o.createGain(),this.dryGainNode=o.createGain(),this.convolverNode.buffer=this.generateImpulseResponse(o),this.effectsChain.connect(this.masterVolumeNode),this.masterVolumeNode.connect(this.bassNode),this.bassNode.connect(this.midNode),this.midNode.connect(this.trebleNode),this.trebleNode.connect(this.chorusDryGain),this.trebleNode.connect(this.chorusDelayNode),this.chorusDelayNode.connect(this.chorusWetGain),this.chorusDryGain.connect(this.chorusMixNode),this.chorusWetGain.connect(this.chorusMixNode),this.chorusMixNode.connect(this.delayDryGain),this.chorusMixNode.connect(this.delayNode),this.delayNode.connect(this.delayWetGain),this.delayDryGain.connect(this.delayMixNode),this.delayWetGain.connect(this.delayMixNode),this.delayMixNode.connect(this.dryGainNode),this.delayMixNode.connect(this.convolverNode),this.convolverNode.connect(this.wetGainNode),this.dryGainNode.connect(o.destination),this.wetGainNode.connect(o.destination),this.updateReverbMix(l),this.updateChorusMix(u),this.updateDelayMix(f)},this.generateImpulseResponse=o=>{const s=o.sampleRate,l=3,a=1.5,u=o.createBuffer(2,l*s,s);for(let f=0;f<2;f++){const h=u.getChannelData(f);for(let p=0;p<u.length;p++){const m=p/u.length,g=Math.sin(m*Math.PI*20)*Math.exp(-m*3),x=(Math.random()*2-1)*Math.pow(1-m,a),b=Math.sin(m*Math.PI*100)*.1*Math.exp(-m*8);h[p]=(g*.3+x*.6+b*.1)*1.5,f===1&&(h[p]*=1+Math.sin(m*Math.PI*7)*.2)}}return u},this.updateReverbMix=o=>{const s=this.props.audioContext.currentTime,l=Math.pow(o,.7)*1.2,a=1-o*.6;this.dryGainNode.gain.setValueAtTime(a,s),this.wetGainNode.gain.setValueAtTime(l,s)},this.updateChorusMix=o=>{const s=this.props.audioContext.currentTime,l=o*.8,a=1-o*.3;this.chorusDryGain.gain.setValueAtTime(a,s),this.chorusWetGain.gain.setValueAtTime(l,s)},this.updateDelayMix=o=>{const s=this.props.audioContext.currentTime,l=o*.6,a=1-o*.2;this.delayDryGain.gain.setValueAtTime(a,s),this.delayWetGain.gain.setValueAtTime(l,s)},this.updateVolume=o=>{const s=this.props.audioContext.currentTime;this.masterVolumeNode.gain.setValueAtTime(o,s)},this.loadInstrument=o=>{this.setState({instrument:null}),jw.instrument(this.props.audioContext,o,{format:this.props.format,soundfont:this.props.soundfont,nameToUrl:(s,l,a)=>`${this.props.hostname}/${l}/${s}-${a}.js`,destination:this.effectsChain}).then(s=>{this.setState({instrument:s}),this.props.onLoad&&this.props.onLoad({playNote:this.playNote,stopNote:this.stopNote,stopAllNotes:this.stopAllNotes})})},this.playNote=o=>{this.resumeAudio().then(()=>{if(!this.state.instrument)return;const s=this.state.instrument.play(o.toString());this.setState(l=>({activeAudioNodes:{...l.activeAudioNodes,[o]:s}}))})},this.stopNote=o=>{this.resumeAudio().then(()=>{const s=this.state.activeAudioNodes[o];s&&(s.stop(),this.setState(l=>{const a={...l.activeAudioNodes};return delete a[o],{activeAudioNodes:a}}))})},this.resumeAudio=()=>this.props.audioContext.state==="suspended"?this.props.audioContext.resume():Promise.resolve(),this.stopAllNotes=()=>{this.resumeAudio().then(()=>{Object.values(this.state.activeAudioNodes).forEach(o=>{o&&o.stop()}),this.setState({activeAudioNodes:{}})})},this.state={activeAudioNodes:{},instrument:null},this.setupAudioChain()}componentDidMount(){this.loadInstrument(this.props.instrumentName)}componentDidUpdate(n){if(n.instrumentName!==this.props.instrumentName&&this.loadInstrument(this.props.instrumentName),JSON.stringify(n.eq)!==JSON.stringify(this.props.eq)){const o=this.props.audioContext.currentTime;this.bassNode.gain.setValueAtTime(this.props.eq.bass,o),this.midNode.gain.setValueAtTime(this.props.eq.mid,o),this.trebleNode.gain.setValueAtTime(this.props.eq.treble,o)}n.reverbLevel!==this.props.reverbLevel&&this.updateReverbMix(this.props.reverbLevel),n.volume!==this.props.volume&&this.updateVolume(this.props.volume),n.chorusLevel!==this.props.chorusLevel&&this.updateChorusMix(this.props.chorusLevel),n.delayLevel!==this.props.delayLevel&&this.updateDelayMix(this.props.delayLevel)}render(){return this.props.render?this.props.render({isLoading:!this.state.instrument,playNote:this.playNote,stopNote:this.stopNote,stopAllNotes:this.stopAllNotes}):null}};Kd.defaultProps={format:"mp3",soundfont:"MusyngKite",instrumentName:"acoustic_grand_piano",eq:{bass:0,mid:0,treble:0},reverbLevel:0,volume:.8,chorusLevel:0,delayLevel:0};let Fu=Kd;const bm=typeof window<"u"?new(window.AudioContext||window.webkitAudioContext):null,kw=4,Aw=7,Iw=({hideConfigControls:e=!1})=>{const n=le=>{if(!le||le.length===0)return"C";const pe=le.charAt(0).toUpperCase(),Re=le.slice(1);let xe={C:0,D:2,E:4,F:5,G:7,A:9,B:11}[pe];if(xe===void 0)return"C";const Pe=(Re.match(/#/g)||[]).length,_e=(Re.match(/b/g)||[]).length;return xe+=Pe-_e,xe=(xe%12+12)%12,["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"][xe]},o=Xt(),s=Io(),l=Dn(),a=no(),{activeNotes:u,activeChordIndex:f,addedChords:h}=l,{normalizedScaleNotes:p}=o,{currentlyActivePattern:m,globalPatternState:g}=a,{pianoSettings:x,availableInstruments:b,setPianoInstrument:C,setCutOffPreviousNotes:E,setEq:S,setOctaveOffset:j,setReverbLevel:R,setNoteDuration:A,setVolume:D,setChorusLevel:I,setDelayLevel:T,setAvailableInstruments:M}=s,_="https://d1pzp51pvbm36p.cloudfront.net",K=w.useRef(null),[J,te]=w.useState([]),L=w.useRef(-1),$=w.useRef(null),G=w.useRef(null),[X,ee]=w.useState(500),se=w.useMemo(()=>{const le=X;return le<400?Math.max(320,le-40):le<768?Math.min(600,le-60):le<1200?Math.min(800,le-80):Math.min(1e3,le-100)},[X]);w.useEffect(()=>{const le=()=>{G.current&&ee(G.current.offsetWidth)};le();const pe=new ResizeObserver(()=>{le()});G.current&&pe.observe(G.current);const Re=()=>{le()};return window.addEventListener("resize",Re),()=>{pe.disconnect(),window.removeEventListener("resize",Re)}},[]);const{firstNote:q,lastNote:Q,keyboardShortcuts:Y,midiOffset:k}=w.useMemo(()=>{const le="c",pe=wt.fromNote(`${le}${kw}`),Re=wt.fromNote(`${le}${Aw}`),De=x.octaveOffset*12;return{firstNote:pe,lastNote:Re,midiOffset:De,keyboardShortcuts:Hp.create({firstNote:pe,lastNote:Re,keyboardConfig:Hp.HOME_ROW})}},[x.octaveOffset]),[U,ae]=w.useState({instrumentName:x.instrumentName});w.useEffect(()=>{ae(le=>({...le,instrumentName:x.instrumentName}))},[x.instrumentName]),w.useEffect(()=>{if($.current&&(clearTimeout($.current),$.current=null),!g.isPlaying&&u.length>0){const le=u.map(({note:pe,octave:Re=4})=>wt.fromNote(`${n(pe)}${Re}`));te(le),$.current=setTimeout(()=>{g.isPlaying||te([])},2e3)}else!g.isPlaying&&u.length===0&&te([]);return()=>{$.current&&(clearTimeout($.current),$.current=null)}},[u,g.isPlaying]);const fe=w.useCallback(()=>f!==null&&h[f]?h[f].pattern:m,[f,h,m]),ne=w.useCallback((le,pe)=>{if(le==="x"||le==="X")return null;const Re=le.includes("+"),De=le.includes("-"),xe=parseInt(le.replace(/[+-]/g,""))-1;return xe>=0&&xe<pe?{noteIndex:xe,octaveUp:Re,octaveDown:De}:null},[]),de=w.useCallback(()=>6e4/g.bpm*g.subdivision,[g.bpm,g.subdivision]);w.useEffect(()=>{const le=fe();if(g.isPlaying&&u.length>0&&le?.length>0&&g.currentStep!==L.current){L.current=g.currentStep;const pe=g.currentStep%le.length,Re=le[pe],De=ne(Re,u.length);if(De){const{noteIndex:xe,octaveUp:Pe,octaveDown:_e}=De,{note:rt,octave:nn=4}=u[xe];let Ct=nn;Pe&&(Ct+=1),_e&&(Ct-=1),Ct=Math.max(1,Math.min(8,Ct));const pn=wt.fromNote(`${n(rt)}${Ct}`);!x.cutOffPreviousNotes&&K.current&&K.current(),te([pn]);const ot=de(),lt=Math.min(ot*x.noteDuration,ot-50);setTimeout(()=>{te([])},lt)}else te([])}else g.isPlaying||L.current!==-1&&(te([]),L.current=-1)},[g.currentStep,g.isPlaying,u,x.cutOffPreviousNotes,x.noteDuration,de,fe,ne]);const Ee=le=>pe=>{!x.cutOffPreviousNotes&&K.current&&K.current(),le(pe+k)},ge=le=>pe=>{le(pe+k)};return bm?c.jsx(Fu,{instrumentName:x.instrumentName,audioContext:bm,hostname:_,eq:x.eq,reverbLevel:x.reverbLevel,volume:x.volume,chorusLevel:x.chorusLevel,delayLevel:x.delayLevel,render:({isLoading:le,playNote:pe,stopNote:Re,stopAllNotes:De})=>(K.current=De,c.jsxs(c.Fragment,{children:[c.jsx("div",{ref:G,className:"relative w-full",children:c.jsx("div",{className:"w-full flex justify-center overflow-x-auto",children:c.jsx(ld,{noteRange:{first:q,last:Q},playNote:Ee(pe),stopNote:ge(Re),disabled:le,width:se,className:"mx-auto w-full",activeNotes:J,renderNoteLabel:({midiNumber:xe,isAccidental:Pe})=>{const _e=wt.getAttributes(xe).note.slice(0,-1);return p.includes(jr(_e))?c.jsx("div",{className:`mx-auto mb-2 w-2 h-2 rounded-full ${Pe?"bg-blue-300":"bg-blue-500"}`}):null}})})}),!e&&c.jsx("div",{className:"mt-5",children:c.jsx(ka,{hostname:_,render:xe=>(xe&&xe.length>0&&JSON.stringify(xe)!==JSON.stringify(b)&&M(xe),c.jsx(K1,{config:U,setConfig:ae,instrumentList:xe||b,keyboardShortcuts:Y,cutOffPreviousNotes:x.cutOffPreviousNotes,setCutOffPreviousNotes:E,eq:x.eq,setEq:S,octaveOffset:x.octaveOffset,setOctaveOffset:j,reverbLevel:x.reverbLevel,setReverbLevel:R,noteDuration:x.noteDuration,setNoteDuration:A,volume:x.volume,setVolume:D,chorusLevel:x.chorusLevel,setChorusLevel:I,delayLevel:x.delayLevel,setDelayLevel:T,onInstrumentChange:C}))})}),c.jsx(ka,{hostname:_,render:xe=>(xe&&xe.length>0&&JSON.stringify(xe)!==JSON.stringify(b)&&M(xe),c.jsx(c.Fragment,{}))})]}))}):c.jsx("div",{children:"Audio context is not available."})},pd=({isOpen:e,onClose:n,children:o,className:s="",showCloseButton:l=!0,closeOnBackdropClick:a=!0,title:u,fixedHeader:f=!1})=>{if(!e)return null;const h=p=>{a&&p.target===p.currentTarget&&n()};return c.jsxs("div",{className:"fixed inset-0 z-[1000] flex items-center justify-center p-4",children:[c.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:h}),c.jsxs("div",{className:`relative bg-[#3d434f] border border-gray-600 rounded-lg shadow-xl w-full animate-in fade-in-0 zoom-in-95 duration-200 ${f?"flex flex-col max-h-full":""} ${s}`,children:[(u||l)&&c.jsxs("div",{className:`flex items-center justify-between p-4 border-b border-gray-600 bg-[#3d434f] rounded-t-lg ${f?"flex-shrink-0":""}`,children:[u&&c.jsx("h3",{className:"text-sm font-semibold text-slate-200 uppercase tracking-wide",children:u}),l&&c.jsx("button",{onClick:n,className:"w-6 h-6 flex items-center justify-center rounded-full hover:bg-slate-600 text-slate-400 hover:text-slate-200 transition-colors ml-auto",children:c.jsx(R1,{className:"w-4 h-4"})})]}),f?c.jsx("div",{className:"flex-1 min-h-0 overflow-y-auto",children:o}):o]})]})},Pw=({className:e=""})=>{const[n,o]=w.useState(!1),s=()=>o(!0),l=()=>o(!1);return c.jsxs(c.Fragment,{children:[c.jsx("button",{onClick:s,className:`inline-flex items-center justify-center w-5 h-5 rounded-full bg-slate-600 hover:bg-slate-500 text-slate-300 hover:text-white transition-colors ${e}`,title:"Pattern notation help",children:c.jsx(Qg,{className:"w-3 h-3"})}),c.jsxs(pd,{isOpen:n,onClose:l,title:"Pattern Notation Guide",children:[c.jsxs("div",{className:"p-4 space-y-4",children:[c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("code",{className:"px-2 py-1 bg-slate-700 text-slate-200 rounded text-xs font-mono min-w-[2rem] text-center",children:"x"}),c.jsx("span",{className:"text-xs text-slate-300",children:"Rest (silence)"})]}),c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("code",{className:"px-2 py-1 bg-slate-700 text-slate-200 rounded text-xs font-mono min-w-[2rem] text-center",children:"1-8"}),c.jsx("span",{className:"text-xs text-slate-300",children:"Note index (1st, 2nd, 3rd note, etc.)"})]}),c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("code",{className:"px-2 py-1 bg-slate-700 text-slate-200 rounded text-xs font-mono min-w-[2rem] text-center",children:"1+"}),c.jsx("span",{className:"text-xs text-slate-300",children:"Note with octave up"})]})]}),c.jsxs("div",{className:"border-t border-gray-600 pt-4",children:[c.jsx("div",{className:"text-xs text-slate-400 mb-2",children:c.jsx("strong",{className:"text-slate-300",children:"Example:"})}),c.jsxs("div",{className:"bg-slate-700 rounded p-3",children:[c.jsx("code",{className:"text-xs font-mono text-slate-200",children:"1,x,3,2+"}),c.jsx("div",{className:"text-xs text-slate-400 mt-1",children:"Plays: 1st note → rest → 3rd note → 2nd note (octave up)"})]})]}),c.jsx("div",{className:"text-xs text-slate-500",children:"Separate values with commas. Use any combination to create your pattern."})]}),c.jsx("div",{className:"flex justify-end p-4 border-t border-gray-600",children:c.jsx("button",{onClick:l,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white text-xs font-medium rounded transition-colors uppercase tracking-wide",children:"Got it"})})]})]})},F={BASIC:"basic",RHYTHMIC:"rhythmic",ADVANCED:"advanced",GENRE:"genre",CUSTOM:"custom"},wm=[{name:"Root Only",pattern:["1","x","1","x"],desc:"Simple root note emphasis",icon:"🎯",category:F.BASIC},{name:"Root Bass",pattern:["1","x","x","x","1","x","x","x"],desc:"Steady root note bass line",icon:"🎸",category:F.BASIC},{name:"Up Down",pattern:["1","2","3","4","3","2"],desc:"Classic ascending and descending",icon:"⬆️",category:F.BASIC},{name:"Broken Chord",pattern:["1","3","2","4"],desc:"Mixed chord tones",icon:"🔀",category:F.BASIC},{name:"Octave Jump",pattern:["1","1+","1","1+"],desc:"Root note with octave jumps",icon:"🦘",category:F.BASIC},{name:"Waltz",pattern:["1","2","3"],desc:"Three-beat waltz pattern",icon:"💃",category:F.BASIC},{name:"Alberti Bass",pattern:["1","3","2","3","1","3","2","3"],desc:"Classical broken chord accompaniment",icon:"🎼",category:F.BASIC},{name:"Syncopated",pattern:["x","1","x","2","x","3","1","x"],desc:"Off-beat emphasis",icon:"⚡",category:F.RHYTHMIC},{name:"Dotted Rhythm",pattern:["1","x","x","2","x","x"],desc:"Long-short rhythm pattern",icon:"🎵",category:F.RHYTHMIC},{name:"Staccato",pattern:["1","x","2","x","3","x","4","x"],desc:"Short, detached notes",icon:"🔸",category:F.RHYTHMIC},{name:"Legato Flow",pattern:["1","2","3","4","4","3","2","1"],desc:"Smooth, connected motion",icon:"🌊",category:F.ADVANCED},{name:"Fifth Wheel",pattern:["1","2","3","4","5"],desc:"Simple ascent through 5-note chord",icon:"5️⃣",category:F.BASIC},{name:"Pentagon",pattern:["1","3","5","2","4","1"],desc:"Geometric pattern through 5 notes",icon:"⬟",category:F.BASIC},{name:"Five Alive",pattern:["1","5","2","4","3","5","1","x"],desc:"Dynamic 5-note exploration",icon:"🖐️",category:F.ADVANCED},{name:"Jazz Walk",pattern:["1","2","3","4","5","4","3","2"],desc:"Walking bass with 5th extension",icon:"🚶",category:F.ADVANCED},{name:"Quintet Roll",pattern:["1","x","2","3","x","4","5","x"],desc:"Rolled chord with gaps",icon:"🎲",category:F.RHYTHMIC},{name:"High Five",pattern:["1","2+","3","4+","5","1+"],desc:"Mix of regular and high octave notes",icon:"🙌",category:F.ADVANCED},{name:"Hexagon",pattern:["1","2","3","4","5","6"],desc:"Complete 6-note ascent",icon:"⬡",category:F.BASIC},{name:"Six Pack",pattern:["1","6","2","5","3","4"],desc:"Outside-in pattern",icon:"📦",category:F.ADVANCED},{name:"Jazz Cascade",pattern:["1","3","5","6","4","2","1","x"],desc:"Complex jazz voicing pattern",icon:"🎺",category:F.ADVANCED},{name:"Spiral Six",pattern:["1","4","2","5","3","6","1"],desc:"Spiraling through 6 notes",icon:"🌀",category:F.ADVANCED},{name:"Double Triple",pattern:["1","2","3","4","5","6","6","5","4","3","2","1"],desc:"Up and down through all 6 notes",icon:"↕️",category:F.ADVANCED},{name:"Sixth Sense",pattern:["1","x","3","x","5","x","6","x"],desc:"Selective 6-note chord tones",icon:"👁️",category:F.RHYTHMIC},{name:"Polyrhythm",pattern:["1","x","x","2","x","3","x","x","1","x","3","x"],desc:"Complex rhythmic displacement",icon:"🎛️",category:F.RHYTHMIC},{name:"Bounce",pattern:["1","4","1","4","2","3","2","3"],desc:"Bouncing between chord tones",icon:"⚾",category:F.ADVANCED},{name:"Cascade",pattern:["4+","3+","2+","1+","4","3","2","1"],desc:"Waterfall effect across octaves",icon:"🏔️",category:F.ADVANCED},{name:"Morse Code",pattern:["1","x","1","1","x","x","1","x","1","1","x"],desc:"Dot-dash rhythm pattern",icon:"📡",category:F.RHYTHMIC},{name:"Fibonacci",pattern:["1","1","2","3","2","1","3","4"],desc:"Based on Fibonacci sequence",icon:"🌻",category:F.ADVANCED},{name:"Pendulum",pattern:["1","3","2","4","3","1","2","4","3","2"],desc:"Swinging motion through chord",icon:"⚖️",category:F.ADVANCED},{name:"Stutter Step",pattern:["1","1","x","2","2","x","3","3","x"],desc:"Repeated notes with rests",icon:"💬",category:F.RHYTHMIC},{name:"Call Response",pattern:["1","x","x","3","2","x","x","4"],desc:"Question and answer phrases",icon:"🗣️",category:F.RHYTHMIC},{name:"Spiral",pattern:["1","2","4","3","1","4","2","3"],desc:"Spiraling chord progression",icon:"🌪️",category:F.ADVANCED},{name:"Latin Clave",pattern:["1","x","x","1","x","1","x","x"],desc:"Based on Latin clave rhythm",icon:"🥥",category:F.RHYTHMIC},{name:"Long Journey",pattern:["1","2","x","3","4","x","3","2","1","x","2","3","4","x","x","1"],desc:"Extended 16-step pattern",icon:"🛤️",category:F.ADVANCED},{name:"Minimalist",pattern:["1","x","x","x","x","x","x","x"],desc:"Sparse, contemplative",icon:"🎋",category:F.BASIC},{name:"Maximalist",pattern:["1","2","3","4","1+","2+","3+","4+"],desc:"Dense, energetic pattern",icon:"🎆",category:F.ADVANCED},{name:"Ghost Notes",pattern:["1","x","2","x","x","3","x","4","x","x"],desc:"Implied rhythm with spaces",icon:"👻",category:F.RHYTHMIC},{name:"Power Chord",pattern:["1","1","1+","1+"],desc:"Rock-style power chord emphasis",icon:"⚡",category:F.BASIC},{name:"Bossa Nova",pattern:["1","x","2","x","3","x","4","2"],desc:"Brazilian bossa nova feel",icon:"🏖️",category:F.GENRE},{name:"Reggae Skank",pattern:["x","2","x","4","x","2","x","4"],desc:"Reggae upstroke pattern",icon:"🇯🇲",category:F.GENRE},{name:"Tango",pattern:["1","x","2","3","x","x","4","x"],desc:"Dramatic tango rhythm",icon:"💃",category:F.GENRE},{name:"Swing Feel",pattern:["1","x","3","x","2","x","4","x"],desc:"Jazz swing pattern",icon:"🎷",category:F.GENRE},{name:"Folk Strum",pattern:["1","2","3","2","1","2","3","2"],desc:"Folk guitar strumming pattern",icon:"🪕",category:F.GENRE},{name:"Extended Jazz",pattern:["1","3","5","6","5","3","1","x"],desc:"Jazz chord extensions",icon:"🎼",category:F.ADVANCED},{name:"Full House",pattern:["1","2","3","4","5","6","x","x"],desc:"All chord tones, then rest",icon:"🏠",category:F.BASIC},{name:"Polyrhythmic 6",pattern:["1","x","3","x","5","x","2","x","4","x","6","x"],desc:"Complex 6-note polyrhythm",icon:"🎯",category:F.RHYTHMIC},{name:"Wave Function",pattern:["1","3","5","6","4","2","1","3","5","4","2","x"],desc:"Wave-like motion through extended chord",icon:"〰️",category:F.ADVANCED},{name:"Grand Scale",pattern:["1","2","3","4","5","6","5","4","3","2","1"],desc:"Full scale ascent and descent",icon:"🎹",category:F.BASIC},{name:"Step by Step",pattern:["1","2","1","3","2","4","3","5","4","6","5"],desc:"Gradual stepping pattern",icon:"🪜",category:F.BASIC},{name:"Simple Sixes",pattern:["1","3","5","1","3","5","6","4","2","6","4","2"],desc:"Two three-note groups with extensions",icon:"👥",category:F.BASIC},{name:"Double Root",pattern:["1","1","2","3","4","1","1"],desc:"Root emphasis with ascent",icon:"🎯",category:F.BASIC},{name:"Neighbor Tones",pattern:["1","2","1","3","2","3","4","3"],desc:"Step-wise neighboring motion",icon:"🏠",category:F.BASIC},{name:"Triad Plus",pattern:["1","3","5","6","1","3","5","4"],desc:"Basic triad with extensions",icon:"➕",category:F.BASIC},{name:"Full Circle",pattern:["1","2","3","4","5","6","6","5","4","3","2","1","x","x"],desc:"Complete journey up and down",icon:"🔄",category:F.BASIC},{name:"Building Blocks",pattern:["1","1","2","1","2","3","1","2","3","4"],desc:"Gradually building up the chord",icon:"🧱",category:F.BASIC},{name:"Polymetric 5",pattern:["1","x","x","2","x","3","x","x","4","x","5","x","x","1","x"],desc:"Five-note pattern in complex meter",icon:"🎲",category:F.RHYTHMIC},{name:"Shuffle Step",pattern:["1","x","2","3","x","x","4","x","5","6","x","x"],desc:"Shuffle rhythm through extended chord",icon:"🃏",category:F.RHYTHMIC},{name:"Heartbeat",pattern:["1","1","x","x","2","2","x","x","3","3","x","x"],desc:"Pulse-like doubled pattern",icon:"💓",category:F.RHYTHMIC},{name:"Cross Rhythm",pattern:["1","x","x","2","x","x","3","x","4","x","x","5","x","x","6"],desc:"Pattern crossing metric boundaries",icon:"❌",category:F.RHYTHMIC},{name:"Breath Mark",pattern:["1","2","3","x","x","4","5","6","x","x","1","2","x","x"],desc:"Groups of notes with breathing spaces",icon:"🫁",category:F.RHYTHMIC},{name:"Displacement",pattern:["x","1","x","2","x","3","1","x","2","x","3","x","4","x"],desc:"Rhythmically displaced chord tones",icon:"📐",category:F.RHYTHMIC},{name:"Echo Chamber",pattern:["1","x","1","x","x","2","x","2","x","x","3","x","3","x","x"],desc:"Each note echoes with delays",icon:"📢",category:F.RHYTHMIC},{name:"Odd Meter",pattern:["1","x","2","x","3","x","x","4","x","5","x","6","x","x"],desc:"Seven-beat groupings",icon:"7️⃣",category:F.RHYTHMIC},{name:"Metric Modulation",pattern:["1","2","x","3","4","x","x","5","6","x","1","x","x","2","x"],desc:"Changing rhythmic emphasis",icon:"🔄",category:F.RHYTHMIC},{name:"Chromatic Walk",pattern:["1","2","3","4","5","6","5","4","3","2","1","2","3","4","5","6"],desc:"Extended chromatic voice leading",icon:"🚶‍♂️",category:F.ADVANCED},{name:"Voice Exchange",pattern:["1","6","2","5","3","4","4","3","5","2","6","1"],desc:"Voices trading positions",icon:"🔄",category:F.ADVANCED},{name:"Nested Loops",pattern:["1","3","5","3","1","4","6","4","2","5","6","5","2","1"],desc:"Loops within loops structure",icon:"🪆",category:F.ADVANCED},{name:"Golden Ratio",pattern:["1","2","3","5","6","4","1","3","5","6","2","4","1"],desc:"Based on mathematical proportions",icon:"📐",category:F.ADVANCED},{name:"Fractal Pattern",pattern:["1","3","2","1","4","6","5","4","1","3","2","1"],desc:"Self-similar pattern at different scales",icon:"🌿",category:F.ADVANCED},{name:"Intervallic Series",pattern:["1","4","2","5","3","6","1","5","2","6","3","4"],desc:"Systematic interval exploration",icon:"📏",category:F.ADVANCED},{name:"Orbit",pattern:["1","3","5","2","4","6","3","5","1","4","6","2","5","1","6"],desc:"Circular motion through chord space",icon:"🪐",category:F.ADVANCED},{name:"Double Helix",pattern:["1","6","2","5","3","4","3+","4+","2+","5+","1+","6+","1+"],desc:"Intertwining ascending and descending lines",icon:"🧬",category:F.ADVANCED},{name:"Metamorphosis",pattern:["1","2","1","3","2","4","3","5","4","6","5","6","1+","2+"],desc:"Gradually transforming pattern",icon:"🦋",category:F.ADVANCED},{name:"Tessellation",pattern:["1","3","6","4","2","5","1","4","6","3","2","5"],desc:"Interlocking geometric pattern",icon:"🔷",category:F.ADVANCED},{name:"Prime Number",pattern:["1","x","2","x","x","3","x","x","x","x","5","x","x","x","x","x","x"],desc:"Based on prime number sequence",icon:"🔢",category:F.ADVANCED},{name:"Matrix",pattern:["1","2","3","4+","5+","6+","6","5","4","3+","2+","1+"],desc:"Systematic octave displacement matrix",icon:"🎯",category:F.ADVANCED},{name:"Mandala",pattern:["1","x","3","x","5","x","6","x","4","x","2","x","1","x"],desc:"Symmetric spiritual geometry",icon:"🕉️",category:F.ADVANCED},{name:"Infinity Loop",pattern:["1","2","3","4","5","6","5","4","3","2","1","6","5","4","3","2","1"],desc:"Never-ending loop pattern",icon:"♾️",category:F.ADVANCED},{name:"Quantum Jump",pattern:["1","4+","2","5+","x","3","6+","x","1+","4","x","2+","5"],desc:"Unpredictable quantum-like leaps",icon:"⚛️",category:F.ADVANCED},{name:"Epic Journey",pattern:["1","2","3","4","5","6","6+","5+","4+","3+","2+","1+","6","5","4","3","2","1","x","x"],desc:"20-step odyssey through all chord tones",icon:"🗺️",category:F.ADVANCED},{name:"Full Spectrum",pattern:["1","x","2","x","3","x","4","x","5","x","6","x","1+","x","2+","x","3+","x"],desc:"Complete chord exploration with rests",icon:"🌈",category:F.BASIC},{name:"Polyrhythmic Marathon",pattern:["1","x","x","2","x","3","x","x","4","x","5","x","x","6","x","1+","x","x","2+","x"],desc:"Extended polyrhythmic exploration",icon:"🏃‍♀️",category:F.RHYTHMIC},{name:"Dimensional Shift",pattern:["1","3","5","1+","3+","5+","6+","4+","2+","6","4","2","1","2","3","4","5","6"],desc:"Moving between octave dimensions",icon:"🌌",category:F.ADVANCED},{name:"Quick Five",pattern:["1","2","3","4","5","1"],desc:"Efficient 5-note exploration",icon:"⚡",category:F.BASIC},{name:"Hex Core",pattern:["1","3","5","2","4","6"],desc:"All 6 notes in compact form",icon:"⬡",category:F.BASIC},{name:"Jazz Snap",pattern:["1","3","6","4","2","5"],desc:"Quick jazz chord exploration",icon:"🎺",category:F.ADVANCED},{name:"Prism",pattern:["1","4","6","3","5","2"],desc:"Light refraction pattern",icon:"💎",category:F.ADVANCED},{name:"Star Map",pattern:["1","5","2","6","3","4"],desc:"Navigating chord constellation",icon:"⭐",category:F.ADVANCED},{name:"Speed Dial",pattern:["1","2","4","5","6","3"],desc:"Quick access to extended tones",icon:"📞",category:F.BASIC},{name:"Kaleidoscope",pattern:["1","6","4","2","5","3"],desc:"Shifting colorful pattern",icon:"🔮",category:F.ADVANCED},{name:"Magnetic",pattern:["1","3","5","6","4","2"],desc:"Attraction between chord tones",icon:"🧲",category:F.ADVANCED},{name:"Quantum Six",pattern:["6","1","4","2","5","3"],desc:"Non-linear quantum exploration",icon:"⚛️",category:F.ADVANCED},{name:"Crystal",pattern:["1","4","2","5","3","6"],desc:"Crystalline structure pattern",icon:"💎",category:F.ADVANCED},{name:"Octagon",pattern:["1","2","3","4","5","6","5","4"],desc:"8-sided geometric exploration",icon:"⬛",category:F.BASIC},{name:"Double Helix 6",pattern:["1","6","2","5","3","4","3+","1+"],desc:"DNA-like interweaving pattern",icon:"🧬",category:F.ADVANCED},{name:"Infinity 5",pattern:["1","3","5","4","2","4","5","1"],desc:"Figure-8 through 5 chord tones",icon:"♾️",category:F.ADVANCED},{name:"Compass Rose",pattern:["1","4","6","3","2","5","1","6"],desc:"Navigate all directions",icon:"🧭",category:F.ADVANCED},{name:"Quick March",pattern:["1","2","3","4","5","6","1+","x"],desc:"Military precision through chord",icon:"🥾",category:F.BASIC},{name:"Ripple Effect",pattern:["1","3","5","2","4","6","4","2"],desc:"Waves expanding outward",icon:"🌊",category:F.ADVANCED},{name:"Spider Web",pattern:["1","4","2","6","3","5","1+","4"],desc:"Intricate connecting pattern",icon:"🕸️",category:F.ADVANCED},{name:"Gear Shift",pattern:["1","2","4","3","5","6","5","2"],desc:"Mechanical shifting motion",icon:"⚙️",category:F.ADVANCED},{name:"Phoenix Rise",pattern:["1","3","5","6","4","2","5+","1+"],desc:"Rising from ashes pattern",icon:"🔥",category:F.ADVANCED},{name:"Molecule",pattern:["1","6","3","2","5","4","6+","1+"],desc:"Chemical bond structure",icon:"⚗️",category:F.ADVANCED},{name:"Time Warp",pattern:["1","5","2","4","6","3","1+","5"],desc:"Bending through chord space-time",icon:"⏰",category:F.ADVANCED},{name:"Magic Square",pattern:["1","4","6","2","3","5","4+","1+"],desc:"Mathematical magic pattern",icon:"🔢",category:F.ADVANCED},{name:"Synth Wave",pattern:["1","2","4","6","5","3","2+","1+"],desc:"Electronic wave synthesis",icon:"🎛️",category:F.ADVANCED},{name:"Butterfly",pattern:["1","3","6","4","2","5","3+","1+"],desc:"Graceful wing-like motion",icon:"🦋",category:F.ADVANCED},{name:"Binary Code",pattern:["1","x","2","3","4","5","6","x"],desc:"Digital pattern with gaps",icon:"💻",category:F.RHYTHMIC},{name:"Vortex",pattern:["1","6","4","2","5","3","6+","1+"],desc:"Spiraling energy pattern",icon:"🌪️",category:F.ADVANCED},{name:"Lightning",pattern:["1","4","6","2","5","3","1+","x"],desc:"Zigzag electrical pattern",icon:"⚡",category:F.ADVANCED},{name:"Honeycomb",pattern:["1","3","5","2","6","4","5+","1+"],desc:"Hexagonal bee pattern",icon:"🍯",category:F.ADVANCED},{name:"Tidal Wave",pattern:["1","2","4","5","6","3","2+","1+"],desc:"Ocean wave crescendo",icon:"🌊",category:F.ADVANCED},{name:"Satellite",pattern:["1","5","3","6","2","4","1+","5+"],desc:"Orbital motion pattern",icon:"🛰️",category:F.ADVANCED},{name:"Quad Core",pattern:["1","2","3","4","3","2"],desc:"4-note mountain shape",icon:"🏔️",category:F.BASIC},{name:"Square Dance",pattern:["1","3","2","4","1","3"],desc:"4-note folk pattern",icon:"💃",category:F.BASIC},{name:"Tetris Block",pattern:["1","4","2","3","4","1","2","3"],desc:"Interlocking 4-note pattern",icon:"🧩",category:F.ADVANCED},{name:"Compass",pattern:["1","2","4","3","1","4"],desc:"4-direction navigation",icon:"🧭",category:F.BASIC},{name:"Engine Cycle",pattern:["1","3","4","2","1","3","4","2"],desc:"Repeating 4-stroke pattern",icon:"🚗",category:F.ADVANCED},{name:"Diamond",pattern:["1","2","4","3","2","1"],desc:"Diamond-shaped 4-note gem",icon:"💎",category:F.BASIC},{name:"Pentagon Path",pattern:["1","2","3","4","5","1"],desc:"5-sided geometric progression",icon:"⬟",category:F.BASIC},{name:"Star Jump",pattern:["1","3","5","2","4","1"],desc:"5-pointed star navigation",icon:"⭐",category:F.ADVANCED},{name:"High Five",pattern:["1","2","3","4","5","1+"],desc:"5-note celebration with octave",icon:"🙌",category:F.BASIC},{name:"Flower Power",pattern:["1","3","2","5","4","1","3","5"],desc:"5-petal blooming pattern",icon:"🌸",category:F.ADVANCED},{name:"Olympic Rings",pattern:["1","4","2","5","3","4"],desc:"Interlocking 5-note circles",icon:"🏅",category:F.ADVANCED},{name:"Jazz Hand",pattern:["1","2","4","3","5","2","1","4"],desc:"5-finger jazz expression",icon:"🎭",category:F.ADVANCED},{name:"Spiral Five",pattern:["1","3","5","4","2","3"],desc:"Spiraling 5-note motion",icon:"🌀",category:F.ADVANCED},{name:"Power Plant",pattern:["1","5","3","2","4","1+"],desc:"Energy-generating 5-note pattern",icon:"⚡",category:F.ADVANCED},{name:"Full House",pattern:["1","2","3","4","5","6"],desc:"Complete 6-note ascent",icon:"🏠",category:F.BASIC},{name:"Hexagon Spin",pattern:["1","3","5","2","4","6"],desc:"6-sided rotating pattern",icon:"⬡",category:F.BASIC},{name:"Rainbow Arc",pattern:["1","6","2","5","3","4"],desc:"6-color spectrum bridge",icon:"🌈",category:F.ADVANCED},{name:"Dice Roll",pattern:["1","4","6","2","5","3"],desc:"Random 6-sided exploration",icon:"🎲",category:F.ADVANCED},{name:"Spider Legs",pattern:["1","2","4","6","3","5","1","4"],desc:"8-legged 6-note crawl",icon:"🕷️",category:F.ADVANCED},{name:"Snowflake",pattern:["1","6","3","4","2","5"],desc:"6-sided crystalline beauty",icon:"❄️",category:F.ADVANCED},{name:"Benzene Ring",pattern:["1","2","4","5","3","6","1","4"],desc:"Chemical 6-carbon structure",icon:"⚗️",category:F.ADVANCED},{name:"Clock Face",pattern:["1","3","6","4","2","5"],desc:"12-hour time navigation",icon:"🕐",category:F.ADVANCED},{name:"Mandala Six",pattern:["1","4","2","6","3","5","1","6"],desc:"Sacred 6-fold geometry",icon:"🕉️",category:F.ADVANCED},{name:"Puzzle Piece",pattern:["1","5","2","4","6","3"],desc:"Interlocking 6-note solution",icon:"🧩",category:F.ADVANCED},{name:"Rainbow Bridge",pattern:["1","2","3","4","5","6","1+"],desc:"Complete 7-tone spectrum",icon:"🌈",category:F.BASIC},{name:"Lucky Seven",pattern:["1","3","5","6","4","2","1+","3+"],desc:"7-note fortune pattern",icon:"🍀",category:F.ADVANCED},{name:"Chakra Flow",pattern:["1","2","3","4","5","6","1+"],desc:"7-energy center alignment",icon:"🧘",category:F.ADVANCED},{name:"Week Days",pattern:["1","4","2","6","3","5","1+","4+"],desc:"7-day cycle pattern",icon:"📅",category:F.ADVANCED},{name:"Heptagon",pattern:["1","3","6","2","5","4","1+"],desc:"7-sided geometric form",icon:"🔷",category:F.ADVANCED},{name:"Scale Heaven",pattern:["1","2","3","4","5","6","2+","1+"],desc:"7-note stairway to heaven",icon:"🪜",category:F.ADVANCED},{name:"Prism Split",pattern:["1","6","4","2","5","3","1+"],desc:"Light splitting into 7 colors",icon:"💎",category:F.ADVANCED},{name:"Musical Bowl",pattern:["1","2","4","6","3","5","1+","4+"],desc:"7-tone singing bowl",icon:"🎵",category:F.ADVANCED},{name:"Fusion Dance",pattern:["1","3","6","4","2","5"],desc:"6-note fusion choreography",icon:"🕺",category:F.ADVANCED},{name:"Crystal Grid",pattern:["1","4","3","6","2","5","1+","4+"],desc:"6-point energy crystal matrix",icon:"💎",category:F.ADVANCED},{name:"Gear Train",pattern:["1","2","4","3","6","5"],desc:"Mechanical 6-gear system",icon:"⚙️",category:F.ADVANCED},{name:"DNA Strand",pattern:["1","5","2","6","3","4","1+","5+"],desc:"Double helix genetic code",icon:"🧬",category:F.ADVANCED},{name:"Meteor Shower",pattern:["1","6","3","5","2","4"],desc:"6-streak cosmic display",icon:"☄️",category:F.ADVANCED},{name:"Magic Circle",pattern:["1","3","2","6","4","5","1+"],desc:"7-point mystical protection",icon:"🔮",category:F.ADVANCED},{name:"Tornado Spin",pattern:["1","4","6","3","2","5","1+","4+"],desc:"Spiraling 7-note vortex",icon:"🌪️",category:F.ADVANCED},{name:"Phoenix Wings",pattern:["1","2","5","6","3","4"],desc:"6-feather wing spread",icon:"🔥",category:F.ADVANCED},{name:"Quad Echo",pattern:["1","2","1","3","2","4","3","4"],desc:"4-note echo chamber",icon:"📢",category:F.RHYTHMIC},{name:"Four Corners",pattern:["1","3","4","2","1","3","4","2"],desc:"Repeating 4-corner square",icon:"🔲",category:F.BASIC},{name:"Heartbeat Quad",pattern:["1","1","2","3","3","4","2","4"],desc:"Pulsing 4-note rhythm",icon:"💓",category:F.RHYTHMIC},{name:"Compass Spin",pattern:["1","2","4","3","2","1","4","3"],desc:"4-direction circular motion",icon:"🧭",category:F.ADVANCED},{name:"Engine Rev",pattern:["1","4","2","3","4","1","3","2"],desc:"4-cylinder engine pattern",icon:"🏎️",category:F.ADVANCED},{name:"Square Wave",pattern:["1","1","3","3","2","2","4","4"],desc:"Digital square wave form",icon:"⬛",category:F.RHYTHMIC},{name:"Four Seasons",pattern:["1","2","3","4","2+","1","4","3"],desc:"Seasonal cycle pattern",icon:"🍂",category:F.ADVANCED},{name:"Card Suit",pattern:["1","3","2","4","3+","1+","2","4"],desc:"Playing card 4-suit pattern",icon:"🃏",category:F.ADVANCED},{name:"Quad Pulse",pattern:["1","2","2","3","3+","4+","4","1"],desc:"Doubled pulse pattern",icon:"⚡",category:F.RHYTHMIC},{name:"Element Mix",pattern:["1","4","3","2","1","2","3","4"],desc:"4-element combination",icon:"🔥",category:F.ADVANCED},{name:"Pentagon Echo",pattern:["1","2","3","4","5","1","3","5"],desc:"5-note with strategic repeats",icon:"⬟",category:F.BASIC},{name:"Five Alive",pattern:["1","3","5","2","4","1","5","3"],desc:"Dynamic 5-note exploration",icon:"🖐️",category:F.ADVANCED},{name:"Star Circuit",pattern:["1","2","4","5","3","2","4","1"],desc:"5-pointed star electrical circuit",icon:"⭐",category:F.ADVANCED},{name:"Olympic Flow",pattern:["1","3","2","5","4","3","1","5"],desc:"5-ring Olympic movement",icon:"🏅",category:F.ADVANCED},{name:"Hand Jive",pattern:["1","2","3","4","5","2","4","3"],desc:"5-finger dance pattern",icon:"✋",category:F.RHYTHMIC},{name:"Jazz Fifth",pattern:["1","3","5","4","2","5","1","3"],desc:"Jazz 5-note improvisation",icon:"🎺",category:F.ADVANCED},{name:"Flower Bloom",pattern:["1","2","4","3","5","4","2","1"],desc:"5-petal opening flower",icon:"🌺",category:F.ADVANCED},{name:"Spiral Five",pattern:["1","5","3","2","4","5","3","1"],desc:"Spiraling 5-note motion",icon:"🌀",category:F.ADVANCED},{name:"Pentagon March",pattern:["1","2","3","4","5","4","3","2"],desc:"Military 5-count march",icon:"🥾",category:F.BASIC},{name:"Five Elements",pattern:["1","4","2","5","3","4","1+","5+"],desc:"Ancient 5-element cycle",icon:"🌊",category:F.ADVANCED},{name:"Quintet Jam",pattern:["1","3","4","2","5","3","4","1"],desc:"5-piece band improvisation",icon:"🎵",category:F.ADVANCED},{name:"Five Fold",pattern:["1","5","2","4","3","2","5","4"],desc:"5-fold symmetrical pattern",icon:"🔷",category:F.ADVANCED},{name:"Hex Repeat",pattern:["1","2","3","4","5","6","1","4"],desc:"6-note with strategic repeats",icon:"⬡",category:F.BASIC},{name:"Rainbow Fade",pattern:["1","6","2","5","3","4","6","1"],desc:"6-color spectrum fade",icon:"🌈",category:F.ADVANCED},{name:"Snowflake Dance",pattern:["1","3","6","4","2","5","3","1"],desc:"6-sided crystal dance",icon:"❄️",category:F.ADVANCED},{name:"Benzene Loop",pattern:["1","2","4","5","3","6","2","4"],desc:"Chemical 6-carbon ring",icon:"⚗️",category:F.ADVANCED},{name:"Dice Double",pattern:["1","4","6","2","5","3","4","6"],desc:"6-sided die double roll",icon:"🎲",category:F.ADVANCED},{name:"Hexagon Twist",pattern:["1","3","5","2","4","6","3","5"],desc:"6-sided geometric twist",icon:"⬡",category:F.ADVANCED},{name:"Clock Tick",pattern:["1","2","4","6","3","5","2","6"],desc:"6-hour time progression",icon:"🕐",category:F.RHYTHMIC},{name:"Mandala Six",pattern:["1","4","2","6","3","5","4","2"],desc:"Sacred 6-fold pattern",icon:"🕉️",category:F.ADVANCED},{name:"Flower Power",pattern:["1","6","3","2","5","4","6","3"],desc:"6-petal power flower",icon:"🌻",category:F.ADVANCED},{name:"Insect Walk",pattern:["1","2","4","3","6","5","2","4"],desc:"6-legged insect movement",icon:"🐛",category:F.ADVANCED},{name:"Crystal Matrix",pattern:["1","5","3","6","2","4","5","3"],desc:"6-point crystal energy grid",icon:"💎",category:F.ADVANCED},{name:"Spinner Six",pattern:["1","3","6","2","4","5","3","6"],desc:"6-blade spinner pattern",icon:"🔄",category:F.ADVANCED},{name:"Web Weave",pattern:["1","4","6","3","2","5","4","1"],desc:"6-strand web weaving",icon:"🕸️",category:F.ADVANCED},{name:"Honeycomb Flow",pattern:["1","2","5","6","3","4","2","5"],desc:"6-sided honeycomb flow",icon:"🍯",category:F.ADVANCED},{name:"Gear Mesh",pattern:["1","6","4","2","5","3","6","4"],desc:"6-tooth gear meshing",icon:"⚙️",category:F.ADVANCED},{name:"Jazz Hexagon",pattern:["1","3+","5","6+","4","2+","3","5+"],desc:"6-note jazz with octave sophistication",icon:"🎷",category:F.ADVANCED},{name:"Empty 4-Step",pattern:["x","x","x","x"],desc:"Let's do this!",icon:"✨",category:F.CUSTOM}],du=e=>new Set(e.filter(o=>o!=="x").map(o=>{const s=parseInt(o.replace("+",""));return isNaN(s)?null:s}).filter(o=>o!==null)).size,Rw=(e,n)=>e.length!==n.length?!1:e.every((o,s)=>o===n[s]),Tw=({chordNoteCount:e,maxAvailableNotes:n,hideFewerNotePatterns:o,currentPattern:s,onHideFewerNotePatternsChange:l,onApplyPreset:a,className:u=""})=>{const f=Dn(I=>I.addedChords),[h,p]=w.useState("all"),[m,g]=w.useState("all"),x=w.useRef(null),b=w.useRef({}),C=w.useMemo(()=>{const I=[],T=new Set;return wm.forEach(M=>{T.add(M.pattern.join("|"))}),f.forEach((M,_)=>{const K=M.pattern.join("|");!T.has(K)&&K.trim()!==""&&(T.add(K),du(M.pattern),I.push({name:`Custom ${I.length+1}`,pattern:[...M.pattern],desc:`Custom pattern from "${M.name}"`,icon:"🎨",category:F.CUSTOM}))}),I},[f]),E=w.useMemo(()=>[...wm,...C],[C]),S=w.useMemo(()=>{const I=new Set(E.map(T=>T.pattern.length));return Array.from(I).sort((T,M)=>T-M)},[E]),j=w.useMemo(()=>E.filter(I=>{const T=du(I.pattern);return!(T>e||o&&T<e||Math.max(...I.pattern.filter(_=>_!=="x").map(_=>{const K=parseInt(_.replace("+",""));return isNaN(K)?0:K}))>n||h!=="all"&&I.pattern.length!==parseInt(h)||m!=="all"&&I.category!==m)}),[E,e,o,n,h,m]),R=w.useMemo(()=>s?j.findIndex(I=>Rw(I.pattern,s)):-1,[s,j]);w.useEffect(()=>{if(R>=0&&x.current){const I=x.current,T=b.current[R];if(T){const M=I.getBoundingClientRect(),_=T.getBoundingClientRect(),K=_.top-M.top+I.scrollTop,J=K+_.height,te=I.clientHeight,L=I.scrollTop,$=L+te;if(K<L||J>$){const G=K-te/2+_.height/2;I.scrollTo({top:Math.max(0,G),behavior:"instant"})}}}},[R,j]);const A=["All Steps",...S.map(I=>`${I} Steps`)],D=["All Categories","Basic","Rhythmic","Advanced","Genre","Custom"];return c.jsxs("div",{className:`space-y-4 ${u}`,children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-medium text-slate-200 mb-2 uppercase tracking-wide",children:"Pattern Presets"}),c.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:o,onChange:I=>l(I.target.checked),className:"w-3 h-3 rounded border-gray-600 bg-[#3d434f] text-blue-600 focus:ring-blue-500 focus:ring-1"}),c.jsx("span",{className:"text-xs text-slate-200",children:"Hide patterns with fewer notes"})]})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[c.jsx(Cn,{value:A[h==="all"?0:A.findIndex(I=>I===`${h} Steps`)],onChange:I=>{if(I==="All Steps")p("all");else{const T=I.replace(" Steps","");p(T)}},options:A,className:"flex-1",buttonClassName:"w-full p-2 bg-[#3d434f] border border-gray-600 rounded text-slate-200 text-xs transition-colors hover:bg-[#4a5262]"}),c.jsx(Cn,{value:D[m==="all"?0:D.findIndex(I=>I.toLowerCase()===m)],onChange:I=>{g(I==="All Categories"?"all":I.toLowerCase())},options:D,className:"flex-1",buttonClassName:"w-full p-2 bg-[#3d434f] border border-gray-600 rounded text-slate-200 text-xs transition-colors hover:bg-[#4a5262]"})]}),c.jsx("div",{ref:x,className:"grid grid-cols-1 gap-2 max-h-80 overflow-y-auto pr-2 custom-scrollbar",children:j.length>0?j.map((I,T)=>{const M=du(I.pattern),_=T===R;return c.jsxs("button",{ref:K=>{b.current[T]=K},onClick:()=>a(I),className:`p-2 rounded text-xs transition-colors text-left border ${_?"bg-blue-600/20 text-slate-100 border-blue-500 ring-1 ring-blue-500/50":"bg-[#3d434f] text-slate-300 hover:bg-[#4a5262] hover:text-slate-200 border-gray-600 hover:border-gray-500"}`,children:[c.jsxs("div",{className:"flex items-center justify-between mb-1",children:[c.jsx("span",{className:"font-medium uppercase tracking-wide",children:I.name}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsxs("span",{className:`text-xs ${_?"text-slate-300":"text-slate-500"}`,children:[M,"n • ",I.pattern.length,"s"]}),c.jsx("span",{children:I.icon})]})]}),c.jsx("div",{className:`text-xs opacity-60 ${_?"text-slate-400":"text-slate-500"}`,children:I.pattern.join("-")})]},T)}):c.jsx("div",{className:"p-3 text-xs text-slate-400 text-center",children:"No patterns found matching current filters"})})]})},Sr=({label:e,value:n,min:o,max:s,step:l=.05,onChange:a,suffix:u,showPercentage:f=!1,formatValue:h,showMinMax:p=!1,minLabel:m,maxLabel:g,variant:x="default",className:b="",labelClassName:C=""})=>{const E=()=>h?h(n):f?`${Math.round(n*100)}%`:`${n}${u||""}`,S=j=>{const R=parseFloat(j.target.value);a(R)};return x==="split"?c.jsxs("div",{className:b,children:[c.jsxs("div",{className:"flex justify-between items-center mb-1",children:[c.jsx("span",{className:`text-xs text-slate-400 uppercase tracking-wide ${C}`,children:e}),c.jsx("span",{className:"text-xs text-slate-400 font-mono",children:E()})]}),c.jsx("input",{type:"range",min:o,max:s,step:l,value:n,onChange:S,className:"w-full h-1.5 bg-[#3d434f] rounded appearance-none cursor-pointer slider-thumb"}),p&&c.jsxs("div",{className:"flex justify-between text-xs text-slate-500 mt-1",children:[c.jsx("span",{children:m||o}),c.jsx("span",{children:g||s})]})]}):c.jsxs("div",{className:b,children:[c.jsxs("label",{className:`block text-xs font-medium text-slate-200 mb-2 uppercase tracking-wide ${C}`,children:[e,c.jsxs("span",{className:"text-xs text-slate-400 ml-2 normal-case",children:["(",E(),")"]})]}),c.jsx("div",{className:"relative",children:c.jsx("input",{type:"range",min:o,max:s,step:l,value:n,onChange:S,className:"slider-mobile w-full h-1.5 bg-[#3d434f] rounded appearance-none cursor-pointer slider-thumb"})}),p&&c.jsxs("div",{className:"flex justify-between text-xs text-slate-500 mt-1",children:[c.jsx("span",{children:m||o}),c.jsx("span",{children:g||s})]})]})};var Yr={},ga={},fu,Nm;function Mw(){if(Nm)return fu;Nm=1;function e(l){var a=new s(l),u=a.readChunk();if(u.id!="MThd")throw"Bad MIDI file.  Expected 'MHdr', got: '"+u.id+"'";for(var f=n(u.data),h=[],p=0;!a.eof()&&p<f.numTracks;p++){var m=a.readChunk();if(m.id!="MTrk")throw"Bad MIDI file.  Expected 'MTrk', got: '"+m.id+"'";var g=o(m.data);h.push(g)}return{header:f,tracks:h}}function n(l){var a=new s(l),u=a.readUInt16(),f=a.readUInt16(),h={format:u,numTracks:f},p=a.readUInt16();return p&32768?(h.framesPerSecond=256-(p>>8),h.ticksPerFrame=p&255):h.ticksPerBeat=p,h}function o(l){for(var a=new s(l),u=[];!a.eof();){var f=p();u.push(f)}return u;var h;function p(){var m={};m.deltaTime=a.readVarInt();var g=a.readUInt8();if((g&240)===240)if(g===255){m.meta=!0;var x=a.readUInt8(),b=a.readVarInt();switch(x){case 0:if(m.type="sequenceNumber",b!==2)throw"Expected length for sequenceNumber event is 2, got "+b;return m.number=a.readUInt16(),m;case 1:return m.type="text",m.text=a.readString(b),m;case 2:return m.type="copyrightNotice",m.text=a.readString(b),m;case 3:return m.type="trackName",m.text=a.readString(b),m;case 4:return m.type="instrumentName",m.text=a.readString(b),m;case 5:return m.type="lyrics",m.text=a.readString(b),m;case 6:return m.type="marker",m.text=a.readString(b),m;case 7:return m.type="cuePoint",m.text=a.readString(b),m;case 32:if(m.type="channelPrefix",b!=1)throw"Expected length for channelPrefix event is 1, got "+b;return m.channel=a.readUInt8(),m;case 33:if(m.type="portPrefix",b!=1)throw"Expected length for portPrefix event is 1, got "+b;return m.port=a.readUInt8(),m;case 47:if(m.type="endOfTrack",b!=0)throw"Expected length for endOfTrack event is 0, got "+b;return m;case 81:if(m.type="setTempo",b!=3)throw"Expected length for setTempo event is 3, got "+b;return m.microsecondsPerBeat=a.readUInt24(),m;case 84:if(m.type="smpteOffset",b!=5)throw"Expected length for smpteOffset event is 5, got "+b;var C=a.readUInt8(),E={0:24,32:25,64:29,96:30};return m.frameRate=E[C&96],m.hour=C&31,m.min=a.readUInt8(),m.sec=a.readUInt8(),m.frame=a.readUInt8(),m.subFrame=a.readUInt8(),m;case 88:if(m.type="timeSignature",b!=2&&b!=4)throw"Expected length for timeSignature event is 4 or 2, got "+b;return m.numerator=a.readUInt8(),m.denominator=1<<a.readUInt8(),b===4?(m.metronome=a.readUInt8(),m.thirtyseconds=a.readUInt8()):(m.metronome=36,m.thirtyseconds=8),m;case 89:if(m.type="keySignature",b!=2)throw"Expected length for keySignature event is 2, got "+b;return m.key=a.readInt8(),m.scale=a.readUInt8(),m;case 127:return m.type="sequencerSpecific",m.data=a.readBytes(b),m;default:return m.type="unknownMeta",m.data=a.readBytes(b),m.metatypeByte=x,m}}else if(g==240){m.type="sysEx";var b=a.readVarInt();return m.data=a.readBytes(b),m}else if(g==247){m.type="endSysEx";var b=a.readVarInt();return m.data=a.readBytes(b),m}else throw"Unrecognised MIDI event type byte: "+g;else{var S;if((g&128)===0){if(h===null)throw"Running status byte encountered before status byte";S=g,g=h,m.running=!0}else S=a.readUInt8(),h=g;var j=g>>4;switch(m.channel=g&15,j){case 8:return m.type="noteOff",m.noteNumber=S,m.velocity=a.readUInt8(),m;case 9:var R=a.readUInt8();return m.type=R===0?"noteOff":"noteOn",m.noteNumber=S,m.velocity=R,R===0&&(m.byte9=!0),m;case 10:return m.type="noteAftertouch",m.noteNumber=S,m.amount=a.readUInt8(),m;case 11:return m.type="controller",m.controllerType=S,m.value=a.readUInt8(),m;case 12:return m.type="programChange",m.programNumber=S,m;case 13:return m.type="channelAftertouch",m.amount=S,m;case 14:return m.type="pitchBend",m.value=S+(a.readUInt8()<<7)-8192,m;default:throw"Unrecognised MIDI event type: "+j}}}}function s(l){this.buffer=l,this.bufferLen=this.buffer.length,this.pos=0}return s.prototype.eof=function(){return this.pos>=this.bufferLen},s.prototype.readUInt8=function(){var l=this.buffer[this.pos];return this.pos+=1,l},s.prototype.readInt8=function(){var l=this.readUInt8();return l&128?l-256:l},s.prototype.readUInt16=function(){var l=this.readUInt8(),a=this.readUInt8();return(l<<8)+a},s.prototype.readInt16=function(){var l=this.readUInt16();return l&32768?l-65536:l},s.prototype.readUInt24=function(){var l=this.readUInt8(),a=this.readUInt8(),u=this.readUInt8();return(l<<16)+(a<<8)+u},s.prototype.readInt24=function(){var l=this.readUInt24();return l&8388608?l-16777216:l},s.prototype.readUInt32=function(){var l=this.readUInt8(),a=this.readUInt8(),u=this.readUInt8(),f=this.readUInt8();return(l<<24)+(a<<16)+(u<<8)+f},s.prototype.readBytes=function(l){var a=this.buffer.slice(this.pos,this.pos+l);return this.pos+=l,a},s.prototype.readString=function(l){var a=this.readBytes(l);return String.fromCharCode.apply(null,a)},s.prototype.readVarInt=function(){for(var l=0;!this.eof();){var a=this.readUInt8();if(a&128)l+=a&127,l<<=7;else return l+a}return l},s.prototype.readChunk=function(){var l=this.readString(4),a=this.readUInt32(),u=this.readBytes(a);return{id:l,length:a,data:u}},fu=e,fu}var hu,Cm;function Ow(){if(Cm)return hu;Cm=1;function e(a,u){if(typeof a!="object")throw"Invalid MIDI data";u=u||{};var f=a.header||{},h=a.tracks||[],p,m=h.length,g=new l;for(n(g,f,m),p=0;p<m;p++)o(g,h[p],u);return g.buffer}function n(a,u,f){var h=u.format==null?1:u.format,p=128;u.timeDivision?p=u.timeDivision:u.ticksPerFrame&&u.framesPerSecond?p=-(u.framesPerSecond&255)<<8|u.ticksPerFrame&255:u.ticksPerBeat&&(p=u.ticksPerBeat&32767);var m=new l;m.writeUInt16(h),m.writeUInt16(f),m.writeUInt16(p),a.writeChunk("MThd",m.buffer)}function o(a,u,f){var h=new l,p,m=u.length,g=null;for(p=0;p<m;p++)(f.running===!1||!f.running&&!u[p].running)&&(g=null),g=s(h,u[p],g,f.useByte9ForNoteOff);a.writeChunk("MTrk",h.buffer)}function s(a,u,f,h){var p=u.type,m=u.deltaTime,g=u.text||"",x=u.data||[],b=null;switch(a.writeVarInt(m),p){case"sequenceNumber":a.writeUInt8(255),a.writeUInt8(0),a.writeVarInt(2),a.writeUInt16(u.number);break;case"text":a.writeUInt8(255),a.writeUInt8(1),a.writeVarInt(g.length),a.writeString(g);break;case"copyrightNotice":a.writeUInt8(255),a.writeUInt8(2),a.writeVarInt(g.length),a.writeString(g);break;case"trackName":a.writeUInt8(255),a.writeUInt8(3),a.writeVarInt(g.length),a.writeString(g);break;case"instrumentName":a.writeUInt8(255),a.writeUInt8(4),a.writeVarInt(g.length),a.writeString(g);break;case"lyrics":a.writeUInt8(255),a.writeUInt8(5),a.writeVarInt(g.length),a.writeString(g);break;case"marker":a.writeUInt8(255),a.writeUInt8(6),a.writeVarInt(g.length),a.writeString(g);break;case"cuePoint":a.writeUInt8(255),a.writeUInt8(7),a.writeVarInt(g.length),a.writeString(g);break;case"channelPrefix":a.writeUInt8(255),a.writeUInt8(32),a.writeVarInt(1),a.writeUInt8(u.channel);break;case"portPrefix":a.writeUInt8(255),a.writeUInt8(33),a.writeVarInt(1),a.writeUInt8(u.port);break;case"endOfTrack":a.writeUInt8(255),a.writeUInt8(47),a.writeVarInt(0);break;case"setTempo":a.writeUInt8(255),a.writeUInt8(81),a.writeVarInt(3),a.writeUInt24(u.microsecondsPerBeat);break;case"smpteOffset":a.writeUInt8(255),a.writeUInt8(84),a.writeVarInt(5);var C={24:0,25:32,29:64,30:96},E=u.hour&31|C[u.frameRate];a.writeUInt8(E),a.writeUInt8(u.min),a.writeUInt8(u.sec),a.writeUInt8(u.frame),a.writeUInt8(u.subFrame);break;case"timeSignature":a.writeUInt8(255),a.writeUInt8(88),a.writeVarInt(4),a.writeUInt8(u.numerator);var S=Math.floor(Math.log(u.denominator)/Math.LN2)&255;a.writeUInt8(S),a.writeUInt8(u.metronome),a.writeUInt8(u.thirtyseconds||8);break;case"keySignature":a.writeUInt8(255),a.writeUInt8(89),a.writeVarInt(2),a.writeInt8(u.key),a.writeUInt8(u.scale);break;case"sequencerSpecific":a.writeUInt8(255),a.writeUInt8(127),a.writeVarInt(x.length),a.writeBytes(x);break;case"unknownMeta":u.metatypeByte!=null&&(a.writeUInt8(255),a.writeUInt8(u.metatypeByte),a.writeVarInt(x.length),a.writeBytes(x));break;case"sysEx":a.writeUInt8(240),a.writeVarInt(x.length),a.writeBytes(x);break;case"endSysEx":a.writeUInt8(247),a.writeVarInt(x.length),a.writeBytes(x);break;case"noteOff":var j=h!==!1&&u.byte9||h&&u.velocity==0?144:128;b=j|u.channel,b!==f&&a.writeUInt8(b),a.writeUInt8(u.noteNumber),a.writeUInt8(u.velocity);break;case"noteOn":b=144|u.channel,b!==f&&a.writeUInt8(b),a.writeUInt8(u.noteNumber),a.writeUInt8(u.velocity);break;case"noteAftertouch":b=160|u.channel,b!==f&&a.writeUInt8(b),a.writeUInt8(u.noteNumber),a.writeUInt8(u.amount);break;case"controller":b=176|u.channel,b!==f&&a.writeUInt8(b),a.writeUInt8(u.controllerType),a.writeUInt8(u.value);break;case"programChange":b=192|u.channel,b!==f&&a.writeUInt8(b),a.writeUInt8(u.programNumber);break;case"channelAftertouch":b=208|u.channel,b!==f&&a.writeUInt8(b),a.writeUInt8(u.amount);break;case"pitchBend":b=224|u.channel,b!==f&&a.writeUInt8(b);var R=8192+u.value,A=R&127,D=R>>7&127;a.writeUInt8(A),a.writeUInt8(D);break;default:throw"Unrecognized event type: "+p}return b}function l(){this.buffer=[]}return l.prototype.writeUInt8=function(a){this.buffer.push(a&255)},l.prototype.writeInt8=l.prototype.writeUInt8,l.prototype.writeUInt16=function(a){var u=a>>8&255,f=a&255;this.writeUInt8(u),this.writeUInt8(f)},l.prototype.writeInt16=l.prototype.writeUInt16,l.prototype.writeUInt24=function(a){var u=a>>16&255,f=a>>8&255,h=a&255;this.writeUInt8(u),this.writeUInt8(f),this.writeUInt8(h)},l.prototype.writeInt24=l.prototype.writeUInt24,l.prototype.writeUInt32=function(a){var u=a>>24&255,f=a>>16&255,h=a>>8&255,p=a&255;this.writeUInt8(u),this.writeUInt8(f),this.writeUInt8(h),this.writeUInt8(p)},l.prototype.writeInt32=l.prototype.writeUInt32,l.prototype.writeBytes=function(a){this.buffer=this.buffer.concat(Array.prototype.slice.call(a,0))},l.prototype.writeString=function(a){var u,f=a.length,h=[];for(u=0;u<f;u++)h.push(a.codePointAt(u));this.writeBytes(h)},l.prototype.writeVarInt=function(a){if(a<0)throw"Cannot write negative variable-length integer";if(a<=127)this.writeUInt8(a);else{var u=a,f=[];for(f.push(u&127),u>>=7;u;){var h=u&127|128;f.push(h),u>>=7}this.writeBytes(f.reverse())}},l.prototype.writeChunk=function(a,u){this.writeString(a),this.writeUInt32(u.length),this.writeBytes(u)},hu=e,hu}var Sm;function s0(){return Sm||(Sm=1,ga.parseMidi=Mw(),ga.writeMidi=Ow()),ga}var pu={},Qr={},Em;function i0(){if(Em)return Qr;Em=1,Object.defineProperty(Qr,"__esModule",{value:!0}),Qr.insert=Qr.search=void 0;function e(o,s,l){l===void 0&&(l="ticks");var a=0,u=o.length,f=u;if(u>0&&o[u-1][l]<=s)return u-1;for(;a<f;){var h=Math.floor(a+(f-a)/2),p=o[h],m=o[h+1];if(p[l]===s){for(var g=h;g<o.length;g++){var x=o[g];x[l]===s&&(h=g)}return h}else{if(p[l]<s&&m[l]>s)return h;p[l]>s?f=h:p[l]<s&&(a=h+1)}}return-1}Qr.search=e;function n(o,s,l){if(l===void 0&&(l="ticks"),o.length){var a=e(o,s[l],l);o.splice(a+1,0,s)}else o.push(s)}return Qr.insert=n,Qr}var Dm;function $u(){return Dm||(Dm=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Header=e.keySignatureKeys=void 0;var n=i0(),o=new WeakMap;e.keySignatureKeys=["Cb","Gb","Db","Ab","Eb","Bb","F","C","G","D","A","E","B","F#","C#"];var s=function(){function l(a){var u=this;if(this.tempos=[],this.timeSignatures=[],this.keySignatures=[],this.meta=[],this.name="",o.set(this,480),a){o.set(this,a.header.ticksPerBeat),a.tracks.forEach(function(h){h.forEach(function(p){p.meta&&(p.type==="timeSignature"?u.timeSignatures.push({ticks:p.absoluteTime,timeSignature:[p.numerator,p.denominator]}):p.type==="setTempo"?u.tempos.push({bpm:6e7/p.microsecondsPerBeat,ticks:p.absoluteTime}):p.type==="keySignature"&&u.keySignatures.push({key:e.keySignatureKeys[p.key+7],scale:p.scale===0?"major":"minor",ticks:p.absoluteTime}))})});var f=0;a.tracks[0].forEach(function(h){f+=h.deltaTime,h.meta&&(h.type==="trackName"?u.name=h.text:(h.type==="text"||h.type==="cuePoint"||h.type==="marker"||h.type==="lyrics")&&u.meta.push({text:h.text,ticks:f,type:h.type}))}),this.update()}}return l.prototype.update=function(){var a=this,u=0,f=0;this.tempos.sort(function(h,p){return h.ticks-p.ticks}),this.tempos.forEach(function(h,p){var m=p>0?a.tempos[p-1].bpm:a.tempos[0].bpm,g=h.ticks/a.ppq-f,x=60/m*g;h.time=x+u,u=h.time,f+=g}),this.timeSignatures.sort(function(h,p){return h.ticks-p.ticks}),this.timeSignatures.forEach(function(h,p){var m=p>0?a.timeSignatures[p-1]:a.timeSignatures[0],g=(h.ticks-m.ticks)/a.ppq,x=g/m.timeSignature[0]/(m.timeSignature[1]/4);m.measures=m.measures||0,h.measures=x+m.measures})},l.prototype.ticksToSeconds=function(a){var u=(0,n.search)(this.tempos,a);if(u!==-1){var f=this.tempos[u],h=f.time,p=(a-f.ticks)/this.ppq;return h+60/f.bpm*p}else{var m=a/this.ppq;return 60/120*m}},l.prototype.ticksToMeasures=function(a){var u=(0,n.search)(this.timeSignatures,a);if(u!==-1){var f=this.timeSignatures[u],h=(a-f.ticks)/this.ppq;return f.measures+h/(f.timeSignature[0]/f.timeSignature[1])/4}else return a/this.ppq/4},Object.defineProperty(l.prototype,"ppq",{get:function(){return o.get(this)},enumerable:!1,configurable:!0}),l.prototype.secondsToTicks=function(a){var u=(0,n.search)(this.tempos,a,"time");if(u!==-1){var f=this.tempos[u],h=f.time,p=a-h,m=p/(60/f.bpm);return Math.round(f.ticks+m*this.ppq)}else{var g=a/.5;return Math.round(g*this.ppq)}},l.prototype.toJSON=function(){return{keySignatures:this.keySignatures,meta:this.meta,name:this.name,ppq:this.ppq,tempos:this.tempos.map(function(a){return{bpm:a.bpm,ticks:a.ticks}}),timeSignatures:this.timeSignatures}},l.prototype.fromJSON=function(a){this.name=a.name,this.tempos=a.tempos.map(function(u){return Object.assign({},u)}),this.timeSignatures=a.timeSignatures.map(function(u){return Object.assign({},u)}),this.keySignatures=a.keySignatures.map(function(u){return Object.assign({},u)}),this.meta=a.meta.map(function(u){return Object.assign({},u)}),o.set(this,a.ppq),this.update()},l.prototype.setTempo=function(a){this.tempos=[{bpm:a,ticks:0}],this.update()},l}();e.Header=s}(pu)),pu}var Ss={},mu={},jm;function a0(){return jm||(jm=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ControlChange=e.controlChangeIds=e.controlChangeNames=void 0,e.controlChangeNames={1:"modulationWheel",2:"breath",4:"footController",5:"portamentoTime",7:"volume",8:"balance",10:"pan",64:"sustain",65:"portamentoTime",66:"sostenuto",67:"softPedal",68:"legatoFootswitch",84:"portamentoControl"},e.controlChangeIds=Object.keys(e.controlChangeNames).reduce(function(l,a){return l[e.controlChangeNames[a]]=a,l},{});var n=new WeakMap,o=new WeakMap,s=function(){function l(a,u){n.set(this,u),o.set(this,a.controllerType),this.ticks=a.absoluteTime,this.value=a.value}return Object.defineProperty(l.prototype,"number",{get:function(){return o.get(this)},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"name",{get:function(){return e.controlChangeNames[this.number]?e.controlChangeNames[this.number]:null},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"time",{get:function(){var a=n.get(this);return a.ticksToSeconds(this.ticks)},set:function(a){var u=n.get(this);this.ticks=u.secondsToTicks(a)},enumerable:!1,configurable:!0}),l.prototype.toJSON=function(){return{number:this.number,ticks:this.ticks,time:this.time,value:this.value}},l}();e.ControlChange=s}(mu)),mu}var Es={},km;function _w(){if(km)return Es;km=1,Object.defineProperty(Es,"__esModule",{value:!0}),Es.createControlChanges=void 0;var e=a0();function n(){return new Proxy({},{get:function(o,s){if(o[s])return o[s];if(e.controlChangeIds.hasOwnProperty(s))return o[e.controlChangeIds[s]]},set:function(o,s,l){return e.controlChangeIds.hasOwnProperty(s)?o[e.controlChangeIds[s]]=l:o[s]=l,!0}})}return Es.createControlChanges=n,Es}var Ds={},Am;function Lw(){if(Am)return Ds;Am=1,Object.defineProperty(Ds,"__esModule",{value:!0}),Ds.PitchBend=void 0;var e=new WeakMap,n=function(){function o(s,l){e.set(this,l),this.ticks=s.absoluteTime,this.value=s.value}return Object.defineProperty(o.prototype,"time",{get:function(){var s=e.get(this);return s.ticksToSeconds(this.ticks)},set:function(s){var l=e.get(this);this.ticks=l.secondsToTicks(s)},enumerable:!1,configurable:!0}),o.prototype.toJSON=function(){return{ticks:this.ticks,time:this.time,value:this.value}},o}();return Ds.PitchBend=n,Ds}var js={},Zn={},Im;function Bw(){return Im||(Im=1,Object.defineProperty(Zn,"__esModule",{value:!0}),Zn.DrumKitByPatchID=Zn.InstrumentFamilyByID=Zn.instrumentByPatchID=void 0,Zn.instrumentByPatchID=["acoustic grand piano","bright acoustic piano","electric grand piano","honky-tonk piano","electric piano 1","electric piano 2","harpsichord","clavi","celesta","glockenspiel","music box","vibraphone","marimba","xylophone","tubular bells","dulcimer","drawbar organ","percussive organ","rock organ","church organ","reed organ","accordion","harmonica","tango accordion","acoustic guitar (nylon)","acoustic guitar (steel)","electric guitar (jazz)","electric guitar (clean)","electric guitar (muted)","overdriven guitar","distortion guitar","guitar harmonics","acoustic bass","electric bass (finger)","electric bass (pick)","fretless bass","slap bass 1","slap bass 2","synth bass 1","synth bass 2","violin","viola","cello","contrabass","tremolo strings","pizzicato strings","orchestral harp","timpani","string ensemble 1","string ensemble 2","synthstrings 1","synthstrings 2","choir aahs","voice oohs","synth voice","orchestra hit","trumpet","trombone","tuba","muted trumpet","french horn","brass section","synthbrass 1","synthbrass 2","soprano sax","alto sax","tenor sax","baritone sax","oboe","english horn","bassoon","clarinet","piccolo","flute","recorder","pan flute","blown bottle","shakuhachi","whistle","ocarina","lead 1 (square)","lead 2 (sawtooth)","lead 3 (calliope)","lead 4 (chiff)","lead 5 (charang)","lead 6 (voice)","lead 7 (fifths)","lead 8 (bass + lead)","pad 1 (new age)","pad 2 (warm)","pad 3 (polysynth)","pad 4 (choir)","pad 5 (bowed)","pad 6 (metallic)","pad 7 (halo)","pad 8 (sweep)","fx 1 (rain)","fx 2 (soundtrack)","fx 3 (crystal)","fx 4 (atmosphere)","fx 5 (brightness)","fx 6 (goblins)","fx 7 (echoes)","fx 8 (sci-fi)","sitar","banjo","shamisen","koto","kalimba","bag pipe","fiddle","shanai","tinkle bell","agogo","steel drums","woodblock","taiko drum","melodic tom","synth drum","reverse cymbal","guitar fret noise","breath noise","seashore","bird tweet","telephone ring","helicopter","applause","gunshot"],Zn.InstrumentFamilyByID=["piano","chromatic percussion","organ","guitar","bass","strings","ensemble","brass","reed","pipe","synth lead","synth pad","synth effects","world","percussive","sound effects"],Zn.DrumKitByPatchID={0:"standard kit",8:"room kit",16:"power kit",24:"electronic kit",25:"tr-808 kit",32:"jazz kit",40:"brush kit",48:"orchestra kit",56:"sound fx kit"}),Zn}var Pm;function Fw(){if(Pm)return js;Pm=1,Object.defineProperty(js,"__esModule",{value:!0}),js.Instrument=void 0;var e=Bw(),n=new WeakMap,o=function(){function s(l,a){if(this.number=0,n.set(this,a),this.number=0,l){var u=l.find(function(f){return f.type==="programChange"});u&&(this.number=u.programNumber)}}return Object.defineProperty(s.prototype,"name",{get:function(){return this.percussion?e.DrumKitByPatchID[this.number]:e.instrumentByPatchID[this.number]},set:function(l){var a=e.instrumentByPatchID.indexOf(l);a!==-1&&(this.number=a)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"family",{get:function(){return this.percussion?"drums":e.InstrumentFamilyByID[Math.floor(this.number/8)]},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"percussion",{get:function(){var l=n.get(this);return l.channel===9},enumerable:!1,configurable:!0}),s.prototype.toJSON=function(){return{family:this.family,number:this.number,name:this.name}},s.prototype.fromJSON=function(l){this.number=l.number},s}();return js.Instrument=o,js}var ks={},Rm;function $w(){if(Rm)return ks;Rm=1,Object.defineProperty(ks,"__esModule",{value:!0}),ks.Note=void 0;function e(u){var f=Math.floor(u/12)-1;return n(u)+f.toString()}function n(u){var f=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],h=u%12;return f[h]}function o(u){var f=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];return f.indexOf(u)}var s=function(){var u=/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i,f={cbb:-2,cb:-1,c:0,"c#":1,cx:2,dbb:0,db:1,d:2,"d#":3,dx:4,ebb:2,eb:3,e:4,"e#":5,ex:6,fbb:3,fb:4,f:5,"f#":6,fx:7,gbb:5,gb:6,g:7,"g#":8,gx:9,abb:7,ab:8,a:9,"a#":10,ax:11,bbb:9,bb:10,b:11,"b#":12,bx:13};return function(h){var p=u.exec(h),m=p[1],g=p[2],x=f[m.toLowerCase()];return x+(parseInt(g,10)+1)*12}}(),l=new WeakMap,a=function(){function u(f,h,p){l.set(this,p),this.midi=f.midi,this.velocity=f.velocity,this.noteOffVelocity=h.velocity,this.ticks=f.ticks,this.durationTicks=h.ticks-f.ticks}return Object.defineProperty(u.prototype,"name",{get:function(){return e(this.midi)},set:function(f){this.midi=s(f)},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"octave",{get:function(){return Math.floor(this.midi/12)-1},set:function(f){var h=f-this.octave;this.midi+=h*12},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"pitch",{get:function(){return n(this.midi)},set:function(f){this.midi=12*(this.octave+1)+o(f)},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"duration",{get:function(){var f=l.get(this);return f.ticksToSeconds(this.ticks+this.durationTicks)-f.ticksToSeconds(this.ticks)},set:function(f){var h=l.get(this),p=h.secondsToTicks(this.time+f);this.durationTicks=p-this.ticks},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"time",{get:function(){var f=l.get(this);return f.ticksToSeconds(this.ticks)},set:function(f){var h=l.get(this);this.ticks=h.secondsToTicks(f)},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"bars",{get:function(){var f=l.get(this);return f.ticksToMeasures(this.ticks)},enumerable:!1,configurable:!0}),u.prototype.toJSON=function(){return{duration:this.duration,durationTicks:this.durationTicks,midi:this.midi,name:this.name,ticks:this.ticks,time:this.time,velocity:this.velocity}},u}();return ks.Note=a,ks}var Tm;function Mm(){if(Tm)return Ss;Tm=1,Object.defineProperty(Ss,"__esModule",{value:!0}),Ss.Track=void 0;var e=i0(),n=a0(),o=_w(),s=Lw(),l=Fw(),a=$w(),u=new WeakMap,f=function(){function h(p,m){var g=this;if(this.name="",this.notes=[],this.controlChanges=(0,o.createControlChanges)(),this.pitchBends=[],u.set(this,m),p){var x=p.find(function(D){return D.type==="trackName"});this.name=x?x.text:""}if(this.instrument=new l.Instrument(p,this),this.channel=0,p){for(var b=p.filter(function(D){return D.type==="noteOn"}),C=p.filter(function(D){return D.type==="noteOff"}),E=function(){var D=b.shift();S.channel=D.channel;var I=C.findIndex(function(M){return M.noteNumber===D.noteNumber&&M.absoluteTime>=D.absoluteTime});if(I!==-1){var T=C.splice(I,1)[0];S.addNote({durationTicks:T.absoluteTime-D.absoluteTime,midi:D.noteNumber,noteOffVelocity:T.velocity/127,ticks:D.absoluteTime,velocity:D.velocity/127})}},S=this;b.length;)E();var j=p.filter(function(D){return D.type==="controller"});j.forEach(function(D){g.addCC({number:D.controllerType,ticks:D.absoluteTime,value:D.value/127})});var R=p.filter(function(D){return D.type==="pitchBend"});R.forEach(function(D){g.addPitchBend({ticks:D.absoluteTime,value:D.value/Math.pow(2,13)})});var A=p.find(function(D){return D.type==="endOfTrack"});this.endOfTrackTicks=A!==void 0?A.absoluteTime:void 0}}return h.prototype.addNote=function(p){var m=u.get(this),g=new a.Note({midi:0,ticks:0,velocity:1},{ticks:0,velocity:0},m);return Object.assign(g,p),(0,e.insert)(this.notes,g,"ticks"),this},h.prototype.addCC=function(p){var m=u.get(this),g=new n.ControlChange({controllerType:p.number},m);return delete p.number,Object.assign(g,p),Array.isArray(this.controlChanges[g.number])||(this.controlChanges[g.number]=[]),(0,e.insert)(this.controlChanges[g.number],g,"ticks"),this},h.prototype.addPitchBend=function(p){var m=u.get(this),g=new s.PitchBend({},m);return Object.assign(g,p),(0,e.insert)(this.pitchBends,g,"ticks"),this},Object.defineProperty(h.prototype,"duration",{get:function(){if(!this.notes.length)return 0;for(var p=this.notes[this.notes.length-1].time+this.notes[this.notes.length-1].duration,m=0;m<this.notes.length-1;m++){var g=this.notes[m].time+this.notes[m].duration;p<g&&(p=g)}return p},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"durationTicks",{get:function(){if(!this.notes.length)return 0;for(var p=this.notes[this.notes.length-1].ticks+this.notes[this.notes.length-1].durationTicks,m=0;m<this.notes.length-1;m++){var g=this.notes[m].ticks+this.notes[m].durationTicks;p<g&&(p=g)}return p},enumerable:!1,configurable:!0}),h.prototype.fromJSON=function(p){var m=this;this.name=p.name,this.channel=p.channel,this.instrument=new l.Instrument(void 0,this),this.instrument.fromJSON(p.instrument),p.endOfTrackTicks!==void 0&&(this.endOfTrackTicks=p.endOfTrackTicks);for(var g in p.controlChanges)p.controlChanges[g]&&p.controlChanges[g].forEach(function(x){m.addCC({number:x.number,ticks:x.ticks,value:x.value})});p.notes.forEach(function(x){m.addNote({durationTicks:x.durationTicks,midi:x.midi,ticks:x.ticks,velocity:x.velocity})})},h.prototype.toJSON=function(){for(var p={},m=0;m<127;m++)this.controlChanges.hasOwnProperty(m)&&(p[m]=this.controlChanges[m].map(function(x){return x.toJSON()}));var g={channel:this.channel,controlChanges:p,pitchBends:this.pitchBends.map(function(x){return x.toJSON()}),instrument:this.instrument.toJSON(),name:this.name,notes:this.notes.map(function(x){return x.toJSON()})};return this.endOfTrackTicks!==void 0&&(g.endOfTrackTicks=this.endOfTrackTicks),g},h}();return Ss.Track=f,Ss}var Jr={};function Uw(e){var n=[];return l0(e,n),n}function l0(e,n){for(var o=0;o<e.length;o++){var s=e[o];Array.isArray(s)?l0(s,n):n.push(s)}}const zw=Object.freeze(Object.defineProperty({__proto__:null,flatten:Uw},Symbol.toStringTag,{value:"Module"})),Vw=$g(zw);var Om;function Gw(){if(Om)return Jr;Om=1;var e=Jr&&Jr.__spreadArray||function(j,R,A){if(A||arguments.length===2)for(var D=0,I=R.length,T;D<I;D++)(T||!(D in R))&&(T||(T=Array.prototype.slice.call(R,0,D)),T[D]=R[D]);return j.concat(T||Array.prototype.slice.call(R))};Object.defineProperty(Jr,"__esModule",{value:!0}),Jr.encode=void 0;var n=s0(),o=$u(),s=Vw;function l(j,R){return[{absoluteTime:j.ticks,channel:R,deltaTime:0,noteNumber:j.midi,type:"noteOn",velocity:Math.floor(j.velocity*127)},{absoluteTime:j.ticks+j.durationTicks,channel:R,deltaTime:0,noteNumber:j.midi,type:"noteOff",velocity:Math.floor(j.noteOffVelocity*127)}]}function a(j){return(0,s.flatten)(j.notes.map(function(R){return l(R,j.channel)}))}function u(j,R){return{absoluteTime:j.ticks,channel:R,controllerType:j.number,deltaTime:0,type:"controller",value:Math.floor(j.value*127)}}function f(j){for(var R=[],A=0;A<127;A++)j.controlChanges.hasOwnProperty(A)&&j.controlChanges[A].forEach(function(D){R.push(u(D,j.channel))});return R}function h(j,R){return{absoluteTime:j.ticks,channel:R,deltaTime:0,type:"pitchBend",value:j.value}}function p(j){var R=[];return j.pitchBends.forEach(function(A){R.push(h(A,j.channel))}),R}function m(j){return{absoluteTime:0,channel:j.channel,deltaTime:0,programNumber:j.instrument.number,type:"programChange"}}function g(j){return{absoluteTime:0,deltaTime:0,meta:!0,text:j,type:"trackName"}}function x(j){return{absoluteTime:j.ticks,deltaTime:0,meta:!0,microsecondsPerBeat:Math.floor(6e7/j.bpm),type:"setTempo"}}function b(j){return{absoluteTime:j.ticks,deltaTime:0,denominator:j.timeSignature[1],meta:!0,metronome:24,numerator:j.timeSignature[0],thirtyseconds:8,type:"timeSignature"}}function C(j){var R=o.keySignatureKeys.indexOf(j.key);return{absoluteTime:j.ticks,deltaTime:0,key:R+7,meta:!0,scale:j.scale==="major"?0:1,type:"keySignature"}}function E(j){return{absoluteTime:j.ticks,deltaTime:0,meta:!0,text:j.text,type:j.type}}function S(j){var R={header:{format:1,numTracks:j.tracks.length+1,ticksPerBeat:j.header.ppq},tracks:e([e(e(e(e([{absoluteTime:0,deltaTime:0,meta:!0,text:j.header.name,type:"trackName"}],j.header.keySignatures.map(function(A){return C(A)}),!0),j.header.meta.map(function(A){return E(A)}),!0),j.header.tempos.map(function(A){return x(A)}),!0),j.header.timeSignatures.map(function(A){return b(A)}),!0)],j.tracks.map(function(A){return e(e(e([g(A.name),m(A)],a(A),!0),f(A),!0),p(A),!0)}),!0)};return R.tracks=R.tracks.map(function(A){A=A.sort(function(I,T){return I.absoluteTime-T.absoluteTime});var D=0;return A.forEach(function(I){I.deltaTime=I.absoluteTime-D,D=I.absoluteTime,delete I.absoluteTime}),A.push({deltaTime:0,meta:!0,type:"endOfTrack"}),A}),new Uint8Array((0,n.writeMidi)(R))}return Jr.encode=S,Jr}var _m;function Hw(){return _m||(_m=1,function(e){var n=Yr&&Yr.__awaiter||function(g,x,b,C){function E(S){return S instanceof b?S:new b(function(j){j(S)})}return new(b||(b=Promise))(function(S,j){function R(I){try{D(C.next(I))}catch(T){j(T)}}function A(I){try{D(C.throw(I))}catch(T){j(T)}}function D(I){I.done?S(I.value):E(I.value).then(R,A)}D((C=C.apply(g,x||[])).next())})},o=Yr&&Yr.__generator||function(g,x){var b={label:0,sent:function(){if(S[0]&1)throw S[1];return S[1]},trys:[],ops:[]},C,E,S,j;return j={next:R(0),throw:R(1),return:R(2)},typeof Symbol=="function"&&(j[Symbol.iterator]=function(){return this}),j;function R(D){return function(I){return A([D,I])}}function A(D){if(C)throw new TypeError("Generator is already executing.");for(;b;)try{if(C=1,E&&(S=D[0]&2?E.return:D[0]?E.throw||((S=E.return)&&S.call(E),0):E.next)&&!(S=S.call(E,D[1])).done)return S;switch(E=0,S&&(D=[D[0]&2,S.value]),D[0]){case 0:case 1:S=D;break;case 4:return b.label++,{value:D[1],done:!1};case 5:b.label++,E=D[1],D=[0];continue;case 7:D=b.ops.pop(),b.trys.pop();continue;default:if(S=b.trys,!(S=S.length>0&&S[S.length-1])&&(D[0]===6||D[0]===2)){b=0;continue}if(D[0]===3&&(!S||D[1]>S[0]&&D[1]<S[3])){b.label=D[1];break}if(D[0]===6&&b.label<S[1]){b.label=S[1],S=D;break}if(S&&b.label<S[2]){b.label=S[2],b.ops.push(D);break}S[2]&&b.ops.pop(),b.trys.pop();continue}D=x.call(g,b)}catch(I){D=[6,I],E=0}finally{C=S=0}if(D[0]&5)throw D[1];return{value:D[0]?D[1]:void 0,done:!0}}};Object.defineProperty(e,"__esModule",{value:!0}),e.Header=e.Track=e.Midi=void 0;var s=s0(),l=$u(),a=Mm(),u=Gw(),f=function(){function g(x){var b=this,C=null;if(x){var E=x instanceof ArrayBuffer?new Uint8Array(x):x;C=(0,s.parseMidi)(E),C.tracks.forEach(function(S){var j=0;S.forEach(function(R){j+=R.deltaTime,R.absoluteTime=j})}),C.tracks=m(C.tracks)}this.header=new l.Header(C),this.tracks=[],x&&(this.tracks=C.tracks.map(function(S){return new a.Track(S,b.header)}),C.header.format===1&&this.tracks[0].duration===0&&this.tracks.shift())}return g.fromUrl=function(x){return n(this,void 0,void 0,function(){var b,C;return o(this,function(E){switch(E.label){case 0:return[4,fetch(x)];case 1:return b=E.sent(),b.ok?[4,b.arrayBuffer()]:[3,3];case 2:return C=E.sent(),[2,new g(C)];case 3:throw new Error("Could not load '".concat(x,"'"))}})})},Object.defineProperty(g.prototype,"name",{get:function(){return this.header.name},set:function(x){this.header.name=x},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"duration",{get:function(){var x=this.tracks.map(function(b){return b.duration});return Math.max.apply(Math,x)},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"durationTicks",{get:function(){var x=this.tracks.map(function(b){return b.durationTicks});return Math.max.apply(Math,x)},enumerable:!1,configurable:!0}),g.prototype.addTrack=function(){var x=new a.Track(void 0,this.header);return this.tracks.push(x),x},g.prototype.toArray=function(){return(0,u.encode)(this)},g.prototype.toJSON=function(){return{header:this.header.toJSON(),tracks:this.tracks.map(function(x){return x.toJSON()})}},g.prototype.fromJSON=function(x){var b=this;this.header=new l.Header,this.header.fromJSON(x.header),this.tracks=x.tracks.map(function(C){var E=new a.Track(void 0,b.header);return E.fromJSON(C),E})},g.prototype.clone=function(){var x=new g;return x.fromJSON(this.toJSON()),x},g}();e.Midi=f;var h=Mm();Object.defineProperty(e,"Track",{enumerable:!0,get:function(){return h.Track}});var p=$u();Object.defineProperty(e,"Header",{enumerable:!0,get:function(){return p.Header}});function m(g){for(var x=[],b=0;b<g.length;b++)for(var C=x.length,E=new Map,S=Array(16).fill(0),j=0,R=g[b];j<R.length;j++){var A=R[j],D=C,I=A.channel;if(I!==void 0){A.type==="programChange"&&(S[I]=A.programNumber);var T=S[I],M="".concat(T," ").concat(I);E.has(M)?D=E.get(M):(D=C+E.size,E.set(M,D))}x[D]||x.push([]),x[D].push(A)}return x}}(Yr)),Yr}var Ww=Hw();const qw=()=>{const[e,n]=w.useState(!1),o=w.useRef(null),s=w.useRef(new Map),l=w.useCallback((m,g)=>{o.current={notes:[],bpm:m,subdivision:g},s.current.clear(),n(!0),console.log("MIDI Recording started at BPM:",m,"Subdivision:",g)},[]),a=w.useCallback((m,g)=>{!o.current||!e||s.current.set(m,g)},[e]),u=w.useCallback((m,g,x)=>{if(!o.current||!e)return;const b=s.current.get(m);if(b===void 0)return;const C=x;o.current.notes.push({note:m,step:b,duration:C}),s.current.delete(m)},[e]),f=w.useCallback(()=>{if(!o.current)return null;s.current.forEach((g,x)=>{o.current.notes.push({note:x,step:g,duration:.9})}),s.current.clear(),n(!1);const m=o.current;return o.current=null,console.log("MIDI Recording stopped. Recorded notes:",m.notes.length),m},[]),h=w.useCallback(m=>{const g=new Ww.Midi;g.header.setTempo(m.bpm);const x=g.addTrack(),E=60/m.bpm*m.subdivision;m.notes.forEach(R=>{const A=R.step*E,D=R.duration*E;x.addNote({midi:R.note,time:A,duration:D,velocity:.8})});const j=g.toArray().buffer.slice(0);return new Blob([j],{type:"audio/midi"})},[]),p=w.useCallback((m,g="recording.mid")=>{const x=h(m),b=URL.createObjectURL(x),C=document.createElement("a");C.href=b,C.download=g,document.body.appendChild(C),C.click(),document.body.removeChild(C),URL.revokeObjectURL(b)},[h]);return{isRecording:e,startRecording:l,stopRecording:f,recordNoteOn:a,recordNoteOff:u,downloadMidi:p}},Kw=e=>{if(!e||e.length===0)return"C";const n=e.charAt(0).toUpperCase(),o=e.slice(1);let l={C:0,D:2,E:4,F:5,G:7,A:9,B:11}[n];if(l===void 0)return"C";const a=(o.match(/#/g)||[]).length,u=(o.match(/b/g)||[]).length;return l+=a-u,l=(l%12+12)%12,["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"][l]},Yw=({className:e=""})=>{const[n,o]=w.useState(!1),{isRecording:s,startRecording:l,stopRecording:a,recordNoteOn:u,recordNoteOff:f,downloadMidi:h}=qw(),{globalPatternState:p}=no(),{activeNotes:m,activeChordIndex:g,addedChords:x}=Dn(),{pianoSettings:b}=Io(),C=w.useRef(null),E=w.useRef(-1),S=w.useRef(null);w.useEffect(()=>{if(p.isPlaying&&!s&&n)l(p.bpm,p.subdivision),S.current=null,E.current=-1;else if((!p.isPlaying||!n)&&s){const A=a();A&&A.notes.length>0&&(S.current=A),E.current=-1}},[p.isPlaying,p.bpm,p.subdivision,s,l,a,n]),w.useEffect(()=>{if(!s||!p.isPlaying||p.currentStep===E.current)return;const A=g!==null&&x[g]?x[g].pattern:p.currentPattern;if(!A||A.length===0)return;const D=p.currentStep%A.length,I=A[D],M=((_,K)=>{if(_==="x"||_==="X")return null;const J=_.includes("+"),te=_.includes("-"),L=parseInt(_.replace(/[+-]/g,""))-1;return L>=0&&L<K?{noteIndex:L,octaveUp:J,octaveDown:te}:null})(I,m.length);if(C.current!==null&&(f(C.current,p.currentStep,b.noteDuration),C.current=null),M&&m.length>0){const{noteIndex:_,octaveUp:K,octaveDown:J}=M,{note:te,octave:L=4}=m[_];let $=L;K&&($+=1),J&&($-=1),$=Math.max(1,Math.min(8,$));const G=wt.fromNote(`${Kw(te)}${$}`);u(G,p.currentStep),C.current=G}E.current=p.currentStep},[p.currentStep,p.isPlaying,s,m,g,x,p.currentPattern,b.noteDuration,u,f]),w.useEffect(()=>()=>{C.current!==null&&s&&f(C.current,p.currentStep,b.noteDuration)},[f,s,p.currentStep,b.noteDuration]);const j=()=>{if(S.current){const A=new Date().toISOString().replace(/[:.]/g,"-").slice(0,-5);h(S.current,`recording-${A}.mid`),S.current=null}},R=()=>{if(o(!n),n&&s){const A=a();A&&A.notes.length>0&&(S.current=A)}};return c.jsxs("div",{className:`space-t-4 ${e}`,children:[c.jsxs("div",{className:"flex items-center justify-between p-3 bg-[#363c46] rounded-lg border border-gray-600",children:[c.jsxs("div",{className:"flex flex-col text-left",children:[c.jsx("span",{className:"text-xs uppercase font-medium text-gray-400 text-left mr-6",children:"MIDI Recording"}),c.jsxs("div",{className:"flex items-center space-x-2",children:[s&&c.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse mt-[0.2em]"}),c.jsx("span",{className:`text-xs ${s?"text-red-300 font-medium":"text-gray-400"}`,children:n?s?"Recording MIDI":(S.current,"Ready to record"):"Disabled"})]})]}),c.jsx("button",{onClick:R,className:`relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:ring-offset-gray-800 ${n?"bg-blue-600":"bg-gray-600"}`,role:"switch","aria-checked":n,"aria-label":"Toggle MIDI recording",children:c.jsx("span",{"aria-hidden":"true",className:`pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ${n?"translate-x-5":"translate-x-0"}`})})]}),!s&&S.current&&c.jsx("div",{className:"mt-3",children:c.jsxs("button",{onClick:j,className:"flex items-center space-x-2 px-3 py-1.5 h-8 bg-green-600 hover:bg-green-700 text-white rounded transition-colors text-xs font-medium uppercase tracking-wide",children:[c.jsx(t1,{className:"w-4 h-4"}),c.jsx("span",{children:"Save"})]})})]})},As=[{value:.125,symbol:"♬",name:"32nd notes"},{value:.25,symbol:"♪",name:"16th notes"},{value:.5,symbol:"♩",name:"8th notes"},{value:1,symbol:"♪",name:"Quarter notes"},{value:2,symbol:"♪",name:"Half notes"}],Uu=w.memo(({stepIndex:e,stepValue:n,maxNotes:o,onStepChange:s})=>{const l=w.useMemo(()=>{const p=["—"];for(let m=1;m<=o;m++)p.push(String(m)),p.push(`${m}↑`);return p},[o]),u=(()=>{if(n==="x")return"—";const p=parseInt(n.replace("+",""));return!isNaN(p)&&p>o?"—":n.replace("+","↑")})(),f=n!=="x"&&u==="—",h=p=>{let m=p;p==="—"?m="x":p.includes("↑")&&(m=p.replace("↑","+")),s(e,m)};return c.jsx("div",{className:"relative",children:c.jsx(Cn,{value:u,onChange:h,options:l,className:"w-full",buttonClassName:`w-full h-10 text-xs pl-2.5 ${n==="x"?"bg-[#3d434f] border-gray-700 text-slate-400":f?"bg-[#3d434f] border-gray-700 text-orange-400":"bg-[#3d434f] border-gray-600 text-slate-200 hover:bg-[#4a5262]"} border rounded transition-all duration-200`})})});Uu.displayName="StepEditor";const Qw=()=>{Xt();const e=Dn(),n=no(),{addedChords:o,activeChordIndex:s}=e,{currentlyActivePattern:l,globalPatternState:a}=n,[u,f]=w.useState(!1),[h,p]=w.useState(!0),[m,g]=w.useState("1,2,3,4"),[x,b]=w.useState(!1);w.useCallback(()=>s!==null&&o[s]?o[s].pattern:l,[s,o,l]);const{currentPattern:C,editingContext:E}=w.useMemo(()=>{if(s!==null&&o[s]){const G=o[s];return{currentPattern:G.pattern,editingContext:{type:"chord",title:`Pattern for "${G.name}"`,description:"Editing pattern for this specific chord",chordName:G.name}}}else return{currentPattern:a.currentPattern,editingContext:{type:"current",title:"Global Pattern",description:"Base pattern - becomes active when no chord is selected",chordName:null}}},[s,o,a.currentPattern]),S=w.useMemo(()=>{if(s!==null&&o[s]){const X=o[s].notes.split(",").map(se=>se.trim()).filter(se=>se);return new Set(X.map(se=>se.replace(/\d+$/,""))).size}return 4},[s,o]),j=w.useMemo(()=>{const G=Math.min(4,S);return Math.max(G,S)},[S]);w.useEffect(()=>{C&&g(C.join(","))},[C]);const R=w.useCallback(()=>{const G=!a.isPlaying;n.setGlobalPatternState({isPlaying:G})},[a.isPlaying]);w.useCallback(()=>{n.setGlobalPatternState({isPlaying:!1,currentStep:0})},[]);const A=w.useCallback(G=>{E.type==="current"?n.setGlobalPatternState({currentPattern:G}):E.type==="chord"&&s!==null&&e.updateChordPattern(s,G)},[E.type,s]),D=w.useCallback((G,X)=>{const ee=[...C];ee[G]=X,A(ee)},[C,A]),I=w.useCallback(()=>{if(C.length<16){const G=[...C,"x"];A(G)}},[C,A]),T=w.useCallback(()=>{if(C.length>1){const G=C.slice(0,-1);A(G)}},[C,A]),M=w.useCallback(()=>{try{const G=m.split(",").map(X=>X.trim()).filter(X=>X);G.length>0&&A(G)}catch{console.error("Invalid pattern format")}},[m,A]),_=w.useCallback(G=>{A(G.pattern)},[A]),K=w.useCallback(G=>{n.updatePattern(G)},[]),J=w.useMemo(()=>a.isPlaying?a.currentStep%C.length:-1,[a.isPlaying,a.currentStep,C.length]),te=As.map(G=>`${G.symbol} ${G.name}`),L=As.find(G=>G.value===a.subdivision),$=L?`${L.symbol} ${L.name}`:`${As[1].symbol} ${As[1].name}`;return c.jsx("div",{className:"w-full max-w-7xl mx-auto px-2 mt-4",children:c.jsxs("div",{className:"bg-[#3d434f] border border-gray-600 rounded-lg overflow-hidden",children:[c.jsxs("div",{className:"px-4 py-3",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h2",{className:"text-sm font-bold text-slate-300 uppercase tracking-wider",children:"Sequencer"}),c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("button",{onClick:()=>f(!u),className:"w-[7em] h-8 flex items-center space-x-2 px-3 py-1.5 text-xs text-slate-300 hover:text-slate-200 bg-[#4a5262] hover:bg-[#525a6b] border border-gray-600 rounded transition-all duration-200",children:u?c.jsxs(c.Fragment,{children:[c.jsx($s,{className:"w-3 h-3"}),c.jsx("span",{children:"Hide"})]}):c.jsxs(c.Fragment,{children:[c.jsx(eo,{className:"w-3 h-3"}),c.jsx("span",{children:"Show"})]})}),c.jsx(Sn,{onClick:R,variant:"play-stop",size:"sm",active:a.isPlaying,className:"shadow-lg",children:a.isPlaying?c.jsxs(c.Fragment,{children:[c.jsx(Us,{className:"w-6 h-6"}),c.jsx("span",{className:"hidden sm:inline",children:"Stop"})]}):c.jsxs(c.Fragment,{children:[c.jsx(zs,{className:"w-6 h-6"}),c.jsx("span",{className:"hidden sm:inline",children:"Play"})]})})]})]}),c.jsx("div",{className:"mt-3 pt-3 border-t border-gray-600",children:c.jsx(Yw,{})})]}),c.jsxs("div",{className:`transition-all duration-300 ease-in-out overflow-hidden ${u?" opacity-100":"max-h-0 opacity-0"}`,children:[c.jsxs("div",{className:"border-t border-gray-600 bg-[#444b59]",children:[c.jsxs("div",{className:"px-4 py-3 border-b border-gray-600 bg-[#3d434f]",children:[c.jsxs("div",{className:"flex items-center justify-between sm:hidden",children:[c.jsxs("div",{className:"flex items-center space-x-1",children:[c.jsx("button",{onClick:T,disabled:C.length<=1,className:"flex items-center justify-center w-7 h-7 bg-[#4a5262] hover:bg-red-600 disabled:opacity-50 disabled:cursor-not-allowed text-xs rounded transition-all duration-200 text-slate-200 hover:text-white disabled:hover:bg-[#4a5262] disabled:hover:text-slate-200",title:"Remove step",children:c.jsx(nm,{className:"w-3 h-3"})}),c.jsx("div",{className:"text-xs text-slate-300 font-mono w-8 text-center",children:C.length}),c.jsx("button",{onClick:I,disabled:C.length>=16,className:"flex items-center justify-center w-7 h-7 bg-[#4a5262] hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed text-xs rounded transition-all duration-200 text-slate-200 hover:text-white disabled:hover:bg-[#4a5262] disabled:hover:text-slate-200",title:"Add step",children:c.jsx(rm,{className:"w-3 h-3"})})]}),c.jsx("div",{children:E.chordName?c.jsx("div",{className:"text-xs font-medium text-purple-300 bg-purple-900/30 px-2 py-1 rounded border border-purple-700/50",children:E.chordName}):c.jsx("div",{className:"text-xs text-cyan-300 bg-cyan-900/30 px-2 py-1 rounded border border-cyan-700/50",children:"Global Pattern"})})]}),c.jsxs("div",{className:"hidden sm:flex sm:items-center sm:justify-between",children:[c.jsxs("div",{className:"flex items-center space-x-4",children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("span",{className:"text-xs text-slate-400 font-medium",children:"Pattern:"}),c.jsxs("div",{className:"text-xs text-slate-300 font-mono bg-[#4a5262] px-2 py-1 rounded",children:[C.length," steps"]})]}),E.chordName&&c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("span",{className:"text-xs text-slate-400",children:"for"}),c.jsx("div",{className:"text-xs font-medium text-purple-300 bg-purple-900/30 px-2 py-1 rounded border border-purple-700/50",children:E.chordName})]}),!E.chordName&&c.jsx("div",{className:"text-xs text-cyan-300 bg-cyan-900/30 px-2 py-1 rounded border border-cyan-700/50",children:"Global Pattern"})]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("span",{className:"text-xs text-slate-400",children:"Steps:"}),c.jsxs("div",{className:"flex items-center space-x-1",children:[c.jsx("button",{onClick:T,disabled:C.length<=1,className:"flex items-center justify-center w-7 h-7 bg-[#4a5262] hover:bg-red-600 disabled:opacity-50 disabled:cursor-not-allowed text-xs rounded transition-all duration-200 text-slate-200 hover:text-white disabled:hover:bg-[#4a5262] disabled:hover:text-slate-200",title:"Remove step",children:c.jsx(nm,{className:"w-3 h-3"})}),c.jsx("div",{className:"text-xs text-slate-300 font-mono w-8 text-center",children:C.length}),c.jsx("button",{onClick:I,disabled:C.length>=16,className:"flex items-center justify-center w-7 h-7 bg-[#4a5262] hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed text-xs rounded transition-all duration-200 text-slate-200 hover:text-white disabled:hover:bg-[#4a5262] disabled:hover:text-slate-200",title:"Add step",children:c.jsx(rm,{className:"w-3 h-3"})})]})]})]})]}),c.jsxs("div",{className:"p-6 px-3 sm:px-4",children:[c.jsx("div",{className:"block md:hidden",children:Array.from({length:Math.ceil(C.length/4)},(G,X)=>{const ee=X*4,se=Math.min(ee+4,C.length),q=C.slice(ee,se);return c.jsxs("div",{className:"mb-4 last:mb-0",children:[c.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[q.map((Q,Y)=>{const k=ee+Y;return c.jsx(Uu,{stepIndex:k,stepValue:Q,maxNotes:j,onStepChange:D},`pattern-${E.type}-${s}-${k}`)}),Array.from({length:4-q.length},(Q,Y)=>c.jsx("div",{},`empty-${Y}`))]}),c.jsxs("div",{className:"grid grid-cols-4 gap-2 mt-2",children:[q.map((Q,Y)=>{const k=ee+Y;return c.jsx("div",{className:"flex justify-center",children:c.jsx("div",{className:`transition-all duration-200 ${J===k?"w-full h-1 bg-blue-400 rounded-full":"w-full h-1 bg-gray-600 rounded-full"}`})},`indicator-${k}`)}),Array.from({length:4-q.length},(Q,Y)=>c.jsx("div",{},`empty-indicator-${Y}`))]})]},`mobile-row-${X}`)})}),c.jsx("div",{className:"hidden md:block",children:Array.from({length:Math.ceil(C.length/8)},(G,X)=>{const ee=X*8,se=Math.min(ee+8,C.length),q=C.slice(ee,se);return c.jsxs("div",{className:"mb-4 last:mb-0",children:[c.jsxs("div",{className:"grid grid-cols-8 gap-2",children:[q.map((Q,Y)=>{const k=ee+Y;return c.jsx(Uu,{stepIndex:k,stepValue:Q,maxNotes:j,onStepChange:D},`pattern-${E.type}-${s}-${k}`)}),Array.from({length:8-q.length},(Q,Y)=>c.jsx("div",{},`empty-${Y}`))]}),c.jsxs("div",{className:"grid grid-cols-8 gap-2 mt-2",children:[q.map((Q,Y)=>{const k=ee+Y;return c.jsx("div",{className:"flex justify-center",children:c.jsx("div",{className:`transition-all duration-200 ${J===k?"w-full h-1 bg-blue-400 rounded-full shadow-lg shadow-blue-400/50":"w-full h-1 bg-gray-600 rounded-full"}`})},`indicator-${k}`)}),Array.from({length:8-q.length},(Q,Y)=>c.jsx("div",{},`empty-indicator-${Y}`))]})]},`desktop-row-${X}`)})})]})]}),c.jsxs("div",{className:"bg-[#3d434f] border-t border-gray-600",children:[c.jsx("div",{className:"px-4 py-3 border-b border-gray-600",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h3",{className:"text-sm font-medium text-slate-200 uppercase tracking-wider",children:"Settings"}),c.jsx("button",{onClick:()=>p(!h),className:"w-[7em] h-8 flex items-center space-x-2 px-3 py-1.5 text-xs text-slate-300 hover:text-slate-200 bg-[#4a5262] hover:bg-[#525a6b] border border-gray-600 rounded transition-all duration-200",children:h?c.jsxs(c.Fragment,{children:[c.jsx($s,{className:"w-3 h-3"}),c.jsx("span",{children:"Hide"})]}):c.jsxs(c.Fragment,{children:[c.jsx(eo,{className:"w-3 h-3"}),c.jsx("span",{children:"Show"})]})})]})}),c.jsx("div",{className:`transition-all duration-300 ease-in-out overflow-hidden ${h?" opacity-100":"max-h-0 opacity-0"}`,children:c.jsx("div",{className:"p-6 bg-[#444b59]",children:c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-x-8 gap-y-6",children:[c.jsxs("div",{className:"space-y-6",children:[c.jsx("div",{children:c.jsx("label",{className:"block text-xs font-medium text-slate-200 mb-2 uppercase tracking-wide",children:"Timing"})}),c.jsx(Sr,{label:"BPM",value:a.bpm,min:60,max:200,step:1,onChange:G=>K({bpm:Math.round(G)}),showMinMax:!0,minLabel:"60",maxLabel:"200"}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-medium text-slate-200 mb-2 uppercase tracking-wide",children:"Subdivision"}),c.jsx(Cn,{value:$,onChange:G=>{const X=As.find(ee=>`${ee.symbol} ${ee.name}`===G);X&&K({subdivision:X.value})},options:te,className:"w-full",buttonClassName:"w-full p-3 bg-[#3d434f] border border-gray-600 rounded text-slate-200 text-xs focus:border-blue-500 transition-colors hover:bg-[#4a5262]"})]}),c.jsx(Sr,{label:"Swing",value:a.swing,min:0,max:50,step:1,suffix:"%",onChange:G=>K({swing:Math.round(G)}),showMinMax:!0,minLabel:"0%",maxLabel:"50%"})]}),c.jsx(Tw,{chordNoteCount:S,maxAvailableNotes:j,hideFewerNotePatterns:x,onHideFewerNotePatternsChange:b,onApplyPreset:_,currentPattern:l}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("label",{className:"block text-xs font-medium text-slate-200 uppercase tracking-wide",children:"Custom"}),c.jsx(Pw,{})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsx("input",{type:"text",value:m,onChange:G=>g(G.target.value),onKeyPress:G=>G.key==="Enter"&&M(),placeholder:"1,x,3,2+",className:"w-full p-2 bg-[#3d434f] border border-gray-600 rounded text-slate-200 text-xs focus:border-blue-500 transition-colors placeholder-slate-500"}),c.jsx("button",{onClick:M,className:"w-full px-3 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded text-xs font-medium transition-colors uppercase tracking-wide",children:"Apply Pattern"})]})]})]})})})]})]})]})})};function Mt(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var Jw=typeof Symbol=="function"&&Symbol.observable||"@@observable",Lm=Jw,Bm=()=>Math.random().toString(36).substring(7).split("").join("."),Xw={INIT:`@@redux/INIT${Bm()}`,REPLACE:`@@redux/REPLACE${Bm()}`},Fm=Xw;function Zw(e){if(typeof e!="object"||e===null)return!1;let n=e;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(e)===n||Object.getPrototypeOf(e)===null}function c0(e,n,o){if(typeof e!="function")throw new Error(Mt(2));if(typeof n=="function"&&typeof o=="function"||typeof o=="function"&&typeof arguments[3]=="function")throw new Error(Mt(0));if(typeof n=="function"&&typeof o>"u"&&(o=n,n=void 0),typeof o<"u"){if(typeof o!="function")throw new Error(Mt(1));return o(c0)(e,n)}let s=e,l=n,a=new Map,u=a,f=0,h=!1;function p(){u===a&&(u=new Map,a.forEach((S,j)=>{u.set(j,S)}))}function m(){if(h)throw new Error(Mt(3));return l}function g(S){if(typeof S!="function")throw new Error(Mt(4));if(h)throw new Error(Mt(5));let j=!0;p();const R=f++;return u.set(R,S),function(){if(j){if(h)throw new Error(Mt(6));j=!1,p(),u.delete(R),a=null}}}function x(S){if(!Zw(S))throw new Error(Mt(7));if(typeof S.type>"u")throw new Error(Mt(8));if(typeof S.type!="string")throw new Error(Mt(17));if(h)throw new Error(Mt(9));try{h=!0,l=s(l,S)}finally{h=!1}return(a=u).forEach(R=>{R()}),S}function b(S){if(typeof S!="function")throw new Error(Mt(10));s=S,x({type:Fm.REPLACE})}function C(){const S=g;return{subscribe(j){if(typeof j!="object"||j===null)throw new Error(Mt(11));function R(){const D=j;D.next&&D.next(m())}return R(),{unsubscribe:S(R)}},[Lm](){return this}}}return x({type:Fm.INIT}),{dispatch:x,subscribe:g,getState:m,replaceReducer:b,[Lm]:C}}function $m(e,n){return function(...o){return n(e.apply(this,o))}}function Um(e,n){if(typeof e=="function")return $m(e,n);if(typeof e!="object"||e===null)throw new Error(Mt(16));const o={};for(const s in e){const l=e[s];typeof l=="function"&&(o[s]=$m(l,n))}return o}function u0(...e){return e.length===0?n=>n:e.length===1?e[0]:e.reduce((n,o)=>(...s)=>n(o(...s)))}function eN(...e){return n=>(o,s)=>{const l=n(o,s);let a=()=>{throw new Error(Mt(15))};const u={getState:l.getState,dispatch:(h,...p)=>a(h,...p)},f=e.map(h=>h(u));return a=u0(...f)(l.dispatch),{...l,dispatch:a}}}var gu={exports:{}},vu={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zm;function tN(){if(zm)return vu;zm=1;var e=za();function n(h,p){return h===p&&(h!==0||1/h===1/p)||h!==h&&p!==p}var o=typeof Object.is=="function"?Object.is:n,s=e.useSyncExternalStore,l=e.useRef,a=e.useEffect,u=e.useMemo,f=e.useDebugValue;return vu.useSyncExternalStoreWithSelector=function(h,p,m,g,x){var b=l(null);if(b.current===null){var C={hasValue:!1,value:null};b.current=C}else C=b.current;b=u(function(){function S(I){if(!j){if(j=!0,R=I,I=g(I),x!==void 0&&C.hasValue){var T=C.value;if(x(T,I))return A=T}return A=I}if(T=A,o(R,I))return T;var M=g(I);return x!==void 0&&x(T,M)?(R=I,T):(R=I,A=M)}var j=!1,R,A,D=m===void 0?null:m;return[function(){return S(p())},D===null?void 0:function(){return S(D())}]},[p,m,g,x]);var E=s(h,b[0],b[1]);return a(function(){C.hasValue=!0,C.value=E},[E]),f(E),E},vu}var Vm;function nN(){return Vm||(Vm=1,gu.exports=tN()),gu.exports}nN();var rN=w.version.startsWith("19"),oN=Symbol.for(rN?"react.transitional.element":"react.element"),sN=Symbol.for("react.portal"),iN=Symbol.for("react.fragment"),aN=Symbol.for("react.strict_mode"),lN=Symbol.for("react.profiler"),cN=Symbol.for("react.consumer"),uN=Symbol.for("react.context"),d0=Symbol.for("react.forward_ref"),dN=Symbol.for("react.suspense"),fN=Symbol.for("react.suspense_list"),md=Symbol.for("react.memo"),hN=Symbol.for("react.lazy"),pN=d0,mN=md;function gN(e){if(typeof e=="object"&&e!==null){const{$$typeof:n}=e;switch(n){case oN:switch(e=e.type,e){case iN:case lN:case aN:case dN:case fN:return e;default:switch(e=e&&e.$$typeof,e){case uN:case d0:case hN:case md:return e;case cN:return e;default:return n}}case sN:return n}}}function vN(e){return gN(e)===md}function xN(e,n,o,s,{areStatesEqual:l,areOwnPropsEqual:a,areStatePropsEqual:u}){let f=!1,h,p,m,g,x;function b(R,A){return h=R,p=A,m=e(h,p),g=n(s,p),x=o(m,g,p),f=!0,x}function C(){return m=e(h,p),n.dependsOnOwnProps&&(g=n(s,p)),x=o(m,g,p),x}function E(){return e.dependsOnOwnProps&&(m=e(h,p)),n.dependsOnOwnProps&&(g=n(s,p)),x=o(m,g,p),x}function S(){const R=e(h,p),A=!u(R,m);return m=R,A&&(x=o(m,g,p)),x}function j(R,A){const D=!a(A,p),I=!l(R,h,A,p);return h=R,p=A,D&&I?C():D?E():I?S():x}return function(A,D){return f?j(A,D):b(A,D)}}function yN(e,{initMapStateToProps:n,initMapDispatchToProps:o,initMergeProps:s,...l}){const a=n(e,l),u=o(e,l),f=s(e,l);return xN(a,u,f,e,l)}function bN(e,n){const o={};for(const s in e){const l=e[s];typeof l=="function"&&(o[s]=(...a)=>n(l(...a)))}return o}function zu(e){return function(o){const s=e(o);function l(){return s}return l.dependsOnOwnProps=!1,l}}function Gm(e){return e.dependsOnOwnProps?!!e.dependsOnOwnProps:e.length!==1}function f0(e,n){return function(s,{displayName:l}){const a=function(f,h){return a.dependsOnOwnProps?a.mapToProps(f,h):a.mapToProps(f,void 0)};return a.dependsOnOwnProps=!0,a.mapToProps=function(f,h){a.mapToProps=e,a.dependsOnOwnProps=Gm(e);let p=a(f,h);return typeof p=="function"&&(a.mapToProps=p,a.dependsOnOwnProps=Gm(p),p=a(f,h)),p},a}}function gd(e,n){return(o,s)=>{throw new Error(`Invalid value of type ${typeof e} for ${n} argument when connecting component ${s.wrappedComponentName}.`)}}function wN(e){return e&&typeof e=="object"?zu(n=>bN(e,n)):e?typeof e=="function"?f0(e):gd(e,"mapDispatchToProps"):zu(n=>({dispatch:n}))}function NN(e){return e?typeof e=="function"?f0(e):gd(e,"mapStateToProps"):zu(()=>({}))}function CN(e,n,o){return{...o,...e,...n}}function SN(e){return function(o,{displayName:s,areMergedPropsEqual:l}){let a=!1,u;return function(h,p,m){const g=e(h,p,m);return a?l(g,u)||(u=g):(a=!0,u=g),u}}}function EN(e){return e?typeof e=="function"?SN(e):gd(e,"mergeProps"):()=>CN}function DN(e){e()}function jN(){let e=null,n=null;return{clear(){e=null,n=null},notify(){DN(()=>{let o=e;for(;o;)o.callback(),o=o.next})},get(){const o=[];let s=e;for(;s;)o.push(s),s=s.next;return o},subscribe(o){let s=!0;const l=n={callback:o,next:null,prev:n};return l.prev?l.prev.next=l:e=l,function(){!s||e===null||(s=!1,l.next?l.next.prev=l.prev:n=l.prev,l.prev?l.prev.next=l.next:e=l.next)}}}}var Hm={notify(){},get:()=>[]};function h0(e,n){let o,s=Hm,l=0,a=!1;function u(E){m();const S=s.subscribe(E);let j=!1;return()=>{j||(j=!0,S(),g())}}function f(){s.notify()}function h(){C.onStateChange&&C.onStateChange()}function p(){return a}function m(){l++,o||(o=n?n.addNestedSub(h):e.subscribe(h),s=jN())}function g(){l--,o&&l===0&&(o(),o=void 0,s.clear(),s=Hm)}function x(){a||(a=!0,m())}function b(){a&&(a=!1,g())}const C={addNestedSub:u,notifyNestedSubs:f,handleChangeWrapper:h,isSubscribed:p,trySubscribe:x,tryUnsubscribe:b,getListeners:()=>s};return C}var kN=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",AN=kN(),IN=()=>typeof navigator<"u"&&navigator.product==="ReactNative",PN=IN(),RN=()=>AN||PN?w.useLayoutEffect:w.useEffect,Aa=RN();function Wm(e,n){return e===n?e!==0||n!==0||1/e===1/n:e!==e&&n!==n}function xu(e,n){if(Wm(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;const o=Object.keys(e),s=Object.keys(n);if(o.length!==s.length)return!1;for(let l=0;l<o.length;l++)if(!Object.prototype.hasOwnProperty.call(n,o[l])||!Wm(e[o[l]],n[o[l]]))return!1;return!0}var TN={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},MN={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},ON={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},p0={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},_N={[pN]:ON,[mN]:p0};function qm(e){return vN(e)?p0:_N[e.$$typeof]||TN}var LN=Object.defineProperty,BN=Object.getOwnPropertyNames,Km=Object.getOwnPropertySymbols,FN=Object.getOwnPropertyDescriptor,$N=Object.getPrototypeOf,Ym=Object.prototype;function Vu(e,n){if(typeof n!="string"){if(Ym){const a=$N(n);a&&a!==Ym&&Vu(e,a)}let o=BN(n);Km&&(o=o.concat(Km(n)));const s=qm(e),l=qm(n);for(let a=0;a<o.length;++a){const u=o[a];if(!MN[u]&&!(l&&l[u])&&!(s&&s[u])){const f=FN(n,u);try{LN(e,u,f)}catch{}}}}return e}var UN=Symbol.for("react-redux-context"),zN=typeof globalThis<"u"?globalThis:{};function VN(){if(!w.createContext)return{};const e=zN[UN]??=new Map;let n=e.get(w.createContext);return n||(n=w.createContext(null),e.set(w.createContext,n)),n}var m0=VN(),GN=[null,null];function HN(e,n,o){Aa(()=>e(...n),o)}function WN(e,n,o,s,l,a){e.current=s,o.current=!1,l.current&&(l.current=null,a())}function qN(e,n,o,s,l,a,u,f,h,p,m){if(!e)return()=>{};let g=!1,x=null;const b=()=>{if(g||!f.current)return;const E=n.getState();let S,j;try{S=s(E,l.current)}catch(R){j=R,x=R}j||(x=null),S===a.current?u.current||p():(a.current=S,h.current=S,u.current=!0,m())};return o.onStateChange=b,o.trySubscribe(),b(),()=>{if(g=!0,o.tryUnsubscribe(),o.onStateChange=null,x)throw x}}function KN(e,n){return e===n}function YN(e,n,o,{pure:s,areStatesEqual:l=KN,areOwnPropsEqual:a=xu,areStatePropsEqual:u=xu,areMergedPropsEqual:f=xu,forwardRef:h=!1,context:p=m0}={}){const m=p,g=NN(e),x=wN(n),b=EN(o),C=!!e;return S=>{const j=S.displayName||S.name||"Component",R=`Connect(${j})`,A={shouldHandleStateChanges:C,displayName:R,wrappedComponentName:j,WrappedComponent:S,initMapStateToProps:g,initMapDispatchToProps:x,initMergeProps:b,areStatesEqual:l,areStatePropsEqual:u,areOwnPropsEqual:a,areMergedPropsEqual:f};function D(M){const[_,K,J]=w.useMemo(()=>{const{reactReduxForwardedRef:De,...xe}=M;return[M.context,De,xe]},[M]),te=w.useMemo(()=>{let De=m;return _?.Consumer,De},[_,m]),L=w.useContext(te),$=!!M.store&&!!M.store.getState&&!!M.store.dispatch,G=!!L&&!!L.store,X=$?M.store:L.store,ee=G?L.getServerState:X.getState,se=w.useMemo(()=>yN(X.dispatch,A),[X]),[q,Q]=w.useMemo(()=>{if(!C)return GN;const De=h0(X,$?void 0:L.subscription),xe=De.notifyNestedSubs.bind(De);return[De,xe]},[X,$,L]),Y=w.useMemo(()=>$?L:{...L,subscription:q},[$,L,q]),k=w.useRef(void 0),U=w.useRef(J),ae=w.useRef(void 0),fe=w.useRef(!1),ne=w.useRef(!1),de=w.useRef(void 0);Aa(()=>(ne.current=!0,()=>{ne.current=!1}),[]);const Ee=w.useMemo(()=>()=>ae.current&&J===U.current?ae.current:se(X.getState(),J),[X,J]),ge=w.useMemo(()=>xe=>q?qN(C,X,q,se,U,k,fe,ne,ae,Q,xe):()=>{},[q]);HN(WN,[U,k,fe,J,ae,Q]);let le;try{le=w.useSyncExternalStore(ge,Ee,ee?()=>se(ee(),J):Ee)}catch(De){throw de.current&&(De.message+=`
The error may be correlated with this previous error:
${de.current.stack}

`),De}Aa(()=>{de.current=void 0,ae.current=void 0,k.current=le});const pe=w.useMemo(()=>w.createElement(S,{...le,ref:K}),[K,S,le]);return w.useMemo(()=>C?w.createElement(te.Provider,{value:Y},pe):pe,[te,pe,Y])}const T=w.memo(D);if(T.WrappedComponent=S,T.displayName=D.displayName=R,h){const _=w.forwardRef(function(J,te){return w.createElement(T,{...J,reactReduxForwardedRef:te})});return _.displayName=R,_.WrappedComponent=S,Vu(_,S)}return Vu(T,S)}}var g0=YN;function QN(e){const{children:n,context:o,serverState:s,store:l}=e,a=w.useMemo(()=>{const h=h0(l);return{store:l,subscription:h,getServerState:s?()=>s:void 0}},[l,s]),u=w.useMemo(()=>l.getState(),[l]);Aa(()=>{const{subscription:h}=a;return h.onStateChange=h.notifyNestedSubs,h.trySubscribe(),u!==l.getState()&&h.notifyNestedSubs(),()=>{h.tryUnsubscribe(),h.onStateChange=void 0}},[a,u]);const f=o||m0;return w.createElement(f.Provider,{value:a},n)}var JN=QN,XN="Invariant failed";function ZN(e,n){throw new Error(XN)}var En=function(n){var o=n.top,s=n.right,l=n.bottom,a=n.left,u=s-a,f=l-o,h={top:o,right:s,bottom:l,left:a,width:u,height:f,x:a,y:o,center:{x:(s+a)/2,y:(l+o)/2}};return h},vd=function(n,o){return{top:n.top-o.top,left:n.left-o.left,bottom:n.bottom+o.bottom,right:n.right+o.right}},Qm=function(n,o){return{top:n.top+o.top,left:n.left+o.left,bottom:n.bottom-o.bottom,right:n.right-o.right}},e2=function(n,o){return{top:n.top+o.y,left:n.left+o.x,bottom:n.bottom+o.y,right:n.right+o.x}},yu={top:0,right:0,bottom:0,left:0},xd=function(n){var o=n.borderBox,s=n.margin,l=s===void 0?yu:s,a=n.border,u=a===void 0?yu:a,f=n.padding,h=f===void 0?yu:f,p=En(vd(o,l)),m=En(Qm(o,u)),g=En(Qm(m,h));return{marginBox:p,borderBox:En(o),paddingBox:m,contentBox:g,margin:l,border:u,padding:h}},un=function(n){var o=n.slice(0,-2),s=n.slice(-2);if(s!=="px")return 0;var l=Number(o);return isNaN(l)&&ZN(),l},t2=function(){return{x:window.pageXOffset,y:window.pageYOffset}},Ia=function(n,o){var s=n.borderBox,l=n.border,a=n.margin,u=n.padding,f=e2(s,o);return xd({borderBox:f,border:l,margin:a,padding:u})},Pa=function(n,o){return o===void 0&&(o=t2()),Ia(n,o)},v0=function(n,o){var s={top:un(o.marginTop),right:un(o.marginRight),bottom:un(o.marginBottom),left:un(o.marginLeft)},l={top:un(o.paddingTop),right:un(o.paddingRight),bottom:un(o.paddingBottom),left:un(o.paddingLeft)},a={top:un(o.borderTopWidth),right:un(o.borderRightWidth),bottom:un(o.borderBottomWidth),left:un(o.borderLeftWidth)};return xd({borderBox:n,margin:s,padding:l,border:a})},x0=function(n){var o=n.getBoundingClientRect(),s=window.getComputedStyle(n);return v0(o,s)},Vs=function(n){var o=[],s=null,l=function(){for(var u=arguments.length,f=new Array(u),h=0;h<u;h++)f[h]=arguments[h];o=f,!s&&(s=requestAnimationFrame(function(){s=null,n.apply(void 0,o)}))};return l.cancel=function(){s&&(cancelAnimationFrame(s),s=null)},l};function Ra(){return Ra=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var o=arguments[n];for(var s in o)({}).hasOwnProperty.call(o,s)&&(e[s]=o[s])}return e},Ra.apply(null,arguments)}function y0(e,n){}y0.bind(null,"warn");y0.bind(null,"error");function kr(){}function n2(e,n){return{...e,...n}}function fn(e,n,o){const s=n.map(l=>{const a=n2(o,l.options);return e.addEventListener(l.eventName,l.fn,a),function(){e.removeEventListener(l.eventName,l.fn,a)}});return function(){s.forEach(a=>{a()})}}const r2="Invariant failed";class Ta extends Error{}Ta.prototype.toString=function(){return this.message};function ue(e,n){throw new Ta(r2)}class o2 extends we.Component{constructor(...n){super(...n),this.callbacks=null,this.unbind=kr,this.onWindowError=o=>{const s=this.getCallbacks();s.isDragging()&&s.tryAbort(),o.error instanceof Ta&&o.preventDefault()},this.getCallbacks=()=>{if(!this.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return this.callbacks},this.setCallbacks=o=>{this.callbacks=o}}componentDidMount(){this.unbind=fn(window,[{eventName:"error",fn:this.onWindowError}])}componentDidCatch(n){if(n instanceof Ta){this.setState({});return}throw n}componentWillUnmount(){this.unbind()}render(){return this.props.children(this.setCallbacks)}}const s2=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,Ma=e=>e+1,i2=e=>`
  You have lifted an item in position ${Ma(e.source.index)}
`,b0=(e,n)=>{const o=e.droppableId===n.droppableId,s=Ma(e.index),l=Ma(n.index);return o?`
      You have moved the item from position ${s}
      to position ${l}
    `:`
    You have moved the item from position ${s}
    in list ${e.droppableId}
    to list ${n.droppableId}
    in position ${l}
  `},w0=(e,n,o)=>n.droppableId===o.droppableId?`
      The item ${e}
      has been combined with ${o.draggableId}`:`
      The item ${e}
      in list ${n.droppableId}
      has been combined with ${o.draggableId}
      in list ${o.droppableId}
    `,a2=e=>{const n=e.destination;if(n)return b0(e.source,n);const o=e.combine;return o?w0(e.draggableId,e.source,o):"You are over an area that cannot be dropped on"},Jm=e=>`
  The item has returned to its starting position
  of ${Ma(e.index)}
`,l2=e=>{if(e.reason==="CANCEL")return`
      Movement cancelled.
      ${Jm(e.source)}
    `;const n=e.destination,o=e.combine;return n?`
      You have dropped the item.
      ${b0(e.source,n)}
    `:o?`
      You have dropped the item.
      ${w0(e.draggableId,e.source,o)}
    `:`
    The item has been dropped while not over a drop area.
    ${Jm(e.source)}
  `},wa={dragHandleUsageInstructions:s2,onDragStart:i2,onDragUpdate:a2,onDragEnd:l2};function c2(e,n){return!!(e===n||Number.isNaN(e)&&Number.isNaN(n))}function N0(e,n){if(e.length!==n.length)return!1;for(let o=0;o<e.length;o++)if(!c2(e[o],n[o]))return!1;return!0}function Oe(e,n){const o=w.useState(()=>({inputs:n,result:e()}))[0],s=w.useRef(!0),l=w.useRef(o),u=s.current||!!(n&&l.current.inputs&&N0(n,l.current.inputs))?l.current:{inputs:n,result:e()};return w.useEffect(()=>{s.current=!1,l.current=u},[u]),u.result}function Ce(e,n){return Oe(()=>e,n)}const gt={x:0,y:0},Nt=(e,n)=>({x:e.x+n.x,y:e.y+n.y}),Zt=(e,n)=>({x:e.x-n.x,y:e.y-n.y}),Ar=(e,n)=>e.x===n.x&&e.y===n.y,_o=e=>({x:e.x!==0?-e.x:0,y:e.y!==0?-e.y:0}),to=(e,n,o=0)=>e==="x"?{x:n,y:o}:{x:o,y:n},Gs=(e,n)=>Math.sqrt((n.x-e.x)**2+(n.y-e.y)**2),Xm=(e,n)=>Math.min(...n.map(o=>Gs(e,o))),C0=e=>n=>({x:e(n.x),y:e(n.y)});var u2=(e,n)=>{const o=En({top:Math.max(n.top,e.top),right:Math.min(n.right,e.right),bottom:Math.min(n.bottom,e.bottom),left:Math.max(n.left,e.left)});return o.width<=0||o.height<=0?null:o};const ni=(e,n)=>({top:e.top+n.y,left:e.left+n.x,bottom:e.bottom+n.y,right:e.right+n.x}),Zm=e=>[{x:e.left,y:e.top},{x:e.right,y:e.top},{x:e.left,y:e.bottom},{x:e.right,y:e.bottom}],d2={top:0,right:0,bottom:0,left:0},f2=(e,n)=>n?ni(e,n.scroll.diff.displacement):e,h2=(e,n,o)=>o&&o.increasedBy?{...e,[n.end]:e[n.end]+o.increasedBy[n.line]}:e,p2=(e,n)=>n&&n.shouldClipSubject?u2(n.pageMarginBox,e):En(e);var To=({page:e,withPlaceholder:n,axis:o,frame:s})=>{const l=f2(e.marginBox,s),a=h2(l,o,n),u=p2(a,s);return{page:e,withPlaceholder:n,active:u}},yd=(e,n)=>{e.frame||ue();const o=e.frame,s=Zt(n,o.scroll.initial),l=_o(s),a={...o,scroll:{initial:o.scroll.initial,current:n,diff:{value:s,displacement:l},max:o.scroll.max}},u=To({page:e.subject.page,withPlaceholder:e.subject.withPlaceholder,axis:e.axis,frame:a});return{...e,frame:a,subject:u}};function mt(e,n=N0){let o=null;function s(...l){if(o&&o.lastThis===this&&n(l,o.lastArgs))return o.lastResult;const a=e.apply(this,l);return o={lastResult:a,lastArgs:l,lastThis:this},a}return s.clear=function(){o=null},s}const S0=mt(e=>e.reduce((n,o)=>(n[o.descriptor.id]=o,n),{})),E0=mt(e=>e.reduce((n,o)=>(n[o.descriptor.id]=o,n),{})),qa=mt(e=>Object.values(e)),m2=mt(e=>Object.values(e));var Lo=mt((e,n)=>m2(n).filter(s=>e===s.descriptor.droppableId).sort((s,l)=>s.descriptor.index-l.descriptor.index));function bd(e){return e.at&&e.at.type==="REORDER"?e.at.destination:null}function Ka(e){return e.at&&e.at.type==="COMBINE"?e.at.combine:null}var Ya=mt((e,n)=>n.filter(o=>o.descriptor.id!==e.descriptor.id)),g2=({isMovingForward:e,draggable:n,destination:o,insideDestination:s,previousImpact:l})=>{if(!o.isCombineEnabled||!bd(l))return null;function u(b){const C={type:"COMBINE",combine:{draggableId:b,droppableId:o.descriptor.id}};return{...l,at:C}}const f=l.displaced.all,h=f.length?f[0]:null;if(e)return h?u(h):null;const p=Ya(n,s);if(!h){if(!p.length)return null;const b=p[p.length-1];return u(b.descriptor.id)}const m=p.findIndex(b=>b.descriptor.id===h);m===-1&&ue();const g=m-1;if(g<0)return null;const x=p[g];return u(x.descriptor.id)},Bo=(e,n)=>e.descriptor.droppableId===n.descriptor.id;const D0={point:gt,value:0},Hs={invisible:{},visible:{},all:[]},v2={displaced:Hs,displacedBy:D0,at:null};var hn=(e,n)=>o=>e<=o&&o<=n,j0=e=>{const n=hn(e.top,e.bottom),o=hn(e.left,e.right);return s=>{if(n(s.top)&&n(s.bottom)&&o(s.left)&&o(s.right))return!0;const a=n(s.top)||n(s.bottom),u=o(s.left)||o(s.right);if(a&&u)return!0;const h=s.top<e.top&&s.bottom>e.bottom,p=s.left<e.left&&s.right>e.right;return h&&p?!0:h&&u||p&&a}},x2=e=>{const n=hn(e.top,e.bottom),o=hn(e.left,e.right);return s=>n(s.top)&&n(s.bottom)&&o(s.left)&&o(s.right)};const wd={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},k0={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"};var y2=e=>n=>{const o=hn(n.top,n.bottom),s=hn(n.left,n.right);return l=>e===wd?o(l.top)&&o(l.bottom):s(l.left)&&s(l.right)};const b2=(e,n)=>{const o=n.frame?n.frame.scroll.diff.displacement:gt;return ni(e,o)},w2=(e,n,o)=>n.subject.active?o(n.subject.active)(e):!1,N2=(e,n,o)=>o(n)(e),Nd=({target:e,destination:n,viewport:o,withDroppableDisplacement:s,isVisibleThroughFrameFn:l})=>{const a=s?b2(e,n):e;return w2(a,n,l)&&N2(a,o,l)},C2=e=>Nd({...e,isVisibleThroughFrameFn:j0}),A0=e=>Nd({...e,isVisibleThroughFrameFn:x2}),S2=e=>Nd({...e,isVisibleThroughFrameFn:y2(e.destination.axis)}),E2=(e,n,o)=>{if(typeof o=="boolean")return o;if(!n)return!0;const{invisible:s,visible:l}=n;if(s[e])return!1;const a=l[e];return a?a.shouldAnimate:!0};function D2(e,n){const o=e.page.marginBox,s={top:n.point.y,right:0,bottom:0,left:n.point.x};return En(vd(o,s))}function Ws({afterDragging:e,destination:n,displacedBy:o,viewport:s,forceShouldAnimate:l,last:a}){return e.reduce(function(f,h){const p=D2(h,o),m=h.descriptor.id;if(f.all.push(m),!C2({target:p,destination:n,viewport:s,withDroppableDisplacement:!0}))return f.invisible[h.descriptor.id]=!0,f;const x=E2(m,a,l),b={draggableId:m,shouldAnimate:x};return f.visible[m]=b,f},{all:[],visible:{},invisible:{}})}function j2(e,n){if(!e.length)return 0;const o=e[e.length-1].descriptor.index;return n.inHomeList?o:o+1}function eg({insideDestination:e,inHomeList:n,displacedBy:o,destination:s}){const l=j2(e,{inHomeList:n});return{displaced:Hs,displacedBy:o,at:{type:"REORDER",destination:{droppableId:s.descriptor.id,index:l}}}}function Oa({draggable:e,insideDestination:n,destination:o,viewport:s,displacedBy:l,last:a,index:u,forceShouldAnimate:f}){const h=Bo(e,o);if(u==null)return eg({insideDestination:n,inHomeList:h,displacedBy:l,destination:o});const p=n.find(C=>C.descriptor.index===u);if(!p)return eg({insideDestination:n,inHomeList:h,displacedBy:l,destination:o});const m=Ya(e,n),g=n.indexOf(p),x=m.slice(g);return{displaced:Ws({afterDragging:x,destination:o,displacedBy:l,last:a,viewport:s.frame,forceShouldAnimate:f}),displacedBy:l,at:{type:"REORDER",destination:{droppableId:o.descriptor.id,index:u}}}}function Ir(e,n){return!!n.effected[e]}var k2=({isMovingForward:e,destination:n,draggables:o,combine:s,afterCritical:l})=>{if(!n.isCombineEnabled)return null;const a=s.draggableId,f=o[a].descriptor.index;return Ir(a,l)?e?f:f-1:e?f+1:f},A2=({isMovingForward:e,isInHomeList:n,insideDestination:o,location:s})=>{if(!o.length)return null;const l=s.index,a=e?l+1:l-1,u=o[0].descriptor.index,f=o[o.length-1].descriptor.index,h=n?f:f+1;return a<u||a>h?null:a},I2=({isMovingForward:e,isInHomeList:n,draggable:o,draggables:s,destination:l,insideDestination:a,previousImpact:u,viewport:f,afterCritical:h})=>{const p=u.at;if(p||ue(),p.type==="REORDER"){const g=A2({isMovingForward:e,isInHomeList:n,location:p.destination,insideDestination:a});return g==null?null:Oa({draggable:o,insideDestination:a,destination:l,viewport:f,last:u.displaced,displacedBy:u.displacedBy,index:g})}const m=k2({isMovingForward:e,destination:l,displaced:u.displaced,draggables:s,combine:p.combine,afterCritical:h});return m==null?null:Oa({draggable:o,insideDestination:a,destination:l,viewport:f,last:u.displaced,displacedBy:u.displacedBy,index:m})},P2=({displaced:e,afterCritical:n,combineWith:o,displacedBy:s})=>{const l=!!(e.visible[o]||e.invisible[o]);return Ir(o,n)?l?gt:_o(s.point):l?s.point:gt},R2=({afterCritical:e,impact:n,draggables:o})=>{const s=Ka(n);s||ue();const l=s.draggableId,a=o[l].page.borderBox.center,u=P2({displaced:n.displaced,afterCritical:e,combineWith:l,displacedBy:n.displacedBy});return Nt(a,u)};const I0=(e,n)=>n.margin[e.start]+n.borderBox[e.size]/2,T2=(e,n)=>n.margin[e.end]+n.borderBox[e.size]/2,Cd=(e,n,o)=>n[e.crossAxisStart]+o.margin[e.crossAxisStart]+o.borderBox[e.crossAxisSize]/2,tg=({axis:e,moveRelativeTo:n,isMoving:o})=>to(e.line,n.marginBox[e.end]+I0(e,o),Cd(e,n.marginBox,o)),ng=({axis:e,moveRelativeTo:n,isMoving:o})=>to(e.line,n.marginBox[e.start]-T2(e,o),Cd(e,n.marginBox,o)),M2=({axis:e,moveInto:n,isMoving:o})=>to(e.line,n.contentBox[e.start]+I0(e,o),Cd(e,n.contentBox,o));var O2=({impact:e,draggable:n,draggables:o,droppable:s,afterCritical:l})=>{const a=Lo(s.descriptor.id,o),u=n.page,f=s.axis;if(!a.length)return M2({axis:f,moveInto:s.page,isMoving:u});const{displaced:h,displacedBy:p}=e,m=h.all[0];if(m){const x=o[m];if(Ir(m,l))return ng({axis:f,moveRelativeTo:x.page,isMoving:u});const b=Ia(x.page,p.point);return ng({axis:f,moveRelativeTo:b,isMoving:u})}const g=a[a.length-1];if(g.descriptor.id===n.descriptor.id)return u.borderBox.center;if(Ir(g.descriptor.id,l)){const x=Ia(g.page,_o(l.displacedBy.point));return tg({axis:f,moveRelativeTo:x,isMoving:u})}return tg({axis:f,moveRelativeTo:g.page,isMoving:u})},Gu=(e,n)=>{const o=e.frame;return o?Nt(n,o.scroll.diff.displacement):n};const _2=({impact:e,draggable:n,droppable:o,draggables:s,afterCritical:l})=>{const a=n.page.borderBox.center,u=e.at;return!o||!u?a:u.type==="REORDER"?O2({impact:e,draggable:n,draggables:s,droppable:o,afterCritical:l}):R2({impact:e,draggables:s,afterCritical:l})};var Qa=e=>{const n=_2(e),o=e.droppable;return o?Gu(o,n):n},P0=(e,n)=>{const o=Zt(n,e.scroll.initial),s=_o(o);return{frame:En({top:n.y,bottom:n.y+e.frame.height,left:n.x,right:n.x+e.frame.width}),scroll:{initial:e.scroll.initial,max:e.scroll.max,current:n,diff:{value:o,displacement:s}}}};function rg(e,n){return e.map(o=>n[o])}function L2(e,n){for(let o=0;o<n.length;o++){const s=n[o].visible[e];if(s)return s}return null}var B2=({impact:e,viewport:n,destination:o,draggables:s,maxScrollChange:l})=>{const a=P0(n,Nt(n.scroll.current,l)),u=o.frame?yd(o,Nt(o.frame.scroll.current,l)):o,f=e.displaced,h=Ws({afterDragging:rg(f.all,s),destination:o,displacedBy:e.displacedBy,viewport:a.frame,last:f,forceShouldAnimate:!1}),p=Ws({afterDragging:rg(f.all,s),destination:u,displacedBy:e.displacedBy,viewport:n.frame,last:f,forceShouldAnimate:!1}),m={},g={},x=[f,h,p];return f.all.forEach(C=>{const E=L2(C,x);if(E){g[C]=E;return}m[C]=!0}),{...e,displaced:{all:f.all,invisible:m,visible:g}}},F2=(e,n)=>Nt(e.scroll.diff.displacement,n),Sd=({pageBorderBoxCenter:e,draggable:n,viewport:o})=>{const s=F2(o,e),l=Zt(s,n.page.borderBox.center);return Nt(n.client.borderBox.center,l)},R0=({draggable:e,destination:n,newPageBorderBoxCenter:o,viewport:s,withDroppableDisplacement:l,onlyOnMainAxis:a=!1})=>{const u=Zt(o,e.page.borderBox.center),h={target:ni(e.page.borderBox,u),destination:n,withDroppableDisplacement:l,viewport:s};return a?S2(h):A0(h)},$2=({isMovingForward:e,draggable:n,destination:o,draggables:s,previousImpact:l,viewport:a,previousPageBorderBoxCenter:u,previousClientSelection:f,afterCritical:h})=>{if(!o.isEnabled)return null;const p=Lo(o.descriptor.id,s),m=Bo(n,o),g=g2({isMovingForward:e,draggable:n,destination:o,insideDestination:p,previousImpact:l})||I2({isMovingForward:e,isInHomeList:m,draggable:n,draggables:s,destination:o,insideDestination:p,previousImpact:l,viewport:a,afterCritical:h});if(!g)return null;const x=Qa({impact:g,draggable:n,droppable:o,draggables:s,afterCritical:h});if(R0({draggable:n,destination:o,newPageBorderBoxCenter:x,viewport:a.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0}))return{clientSelection:Sd({pageBorderBoxCenter:x,draggable:n,viewport:a}),impact:g,scrollJumpRequest:null};const C=Zt(x,u),E=B2({impact:g,viewport:a,destination:o,draggables:s,maxScrollChange:C});return{clientSelection:f,impact:E,scrollJumpRequest:C}};const Tt=e=>{const n=e.subject.active;return n||ue(),n};var U2=({isMovingForward:e,pageBorderBoxCenter:n,source:o,droppables:s,viewport:l})=>{const a=o.subject.active;if(!a)return null;const u=o.axis,f=hn(a[u.start],a[u.end]),h=qa(s).filter(m=>m!==o).filter(m=>m.isEnabled).filter(m=>!!m.subject.active).filter(m=>j0(l.frame)(Tt(m))).filter(m=>{const g=Tt(m);return e?a[u.crossAxisEnd]<g[u.crossAxisEnd]:g[u.crossAxisStart]<a[u.crossAxisStart]}).filter(m=>{const g=Tt(m),x=hn(g[u.start],g[u.end]);return f(g[u.start])||f(g[u.end])||x(a[u.start])||x(a[u.end])}).sort((m,g)=>{const x=Tt(m)[u.crossAxisStart],b=Tt(g)[u.crossAxisStart];return e?x-b:b-x}).filter((m,g,x)=>Tt(m)[u.crossAxisStart]===Tt(x[0])[u.crossAxisStart]);if(!h.length)return null;if(h.length===1)return h[0];const p=h.filter(m=>hn(Tt(m)[u.start],Tt(m)[u.end])(n[u.line]));return p.length===1?p[0]:p.length>1?p.sort((m,g)=>Tt(m)[u.start]-Tt(g)[u.start])[0]:h.sort((m,g)=>{const x=Xm(n,Zm(Tt(m))),b=Xm(n,Zm(Tt(g)));return x!==b?x-b:Tt(m)[u.start]-Tt(g)[u.start]})[0]};const og=(e,n)=>{const o=e.page.borderBox.center;return Ir(e.descriptor.id,n)?Zt(o,n.displacedBy.point):o},z2=(e,n)=>{const o=e.page.borderBox;return Ir(e.descriptor.id,n)?ni(o,_o(n.displacedBy.point)):o};var V2=({pageBorderBoxCenter:e,viewport:n,destination:o,insideDestination:s,afterCritical:l})=>s.filter(u=>A0({target:z2(u,l),destination:o,viewport:n.frame,withDroppableDisplacement:!0})).sort((u,f)=>{const h=Gs(e,Gu(o,og(u,l))),p=Gs(e,Gu(o,og(f,l)));return h<p?-1:p<h?1:u.descriptor.index-f.descriptor.index})[0]||null,ri=mt(function(n,o){const s=o[n.line];return{value:s,point:to(n.line,s)}});const G2=(e,n,o)=>{const s=e.axis;if(e.descriptor.mode==="virtual")return to(s.line,n[s.line]);const l=e.subject.page.contentBox[s.size],h=Lo(e.descriptor.id,o).reduce((p,m)=>p+m.client.marginBox[s.size],0)+n[s.line]-l;return h<=0?null:to(s.line,h)},T0=(e,n)=>({...e,scroll:{...e.scroll,max:n}}),M0=(e,n,o)=>{const s=e.frame;Bo(n,e)&&ue(),e.subject.withPlaceholder&&ue();const l=ri(e.axis,n.displaceBy).point,a=G2(e,l,o),u={placeholderSize:l,increasedBy:a,oldFrameMaxScroll:e.frame?e.frame.scroll.max:null};if(!s){const m=To({page:e.subject.page,withPlaceholder:u,axis:e.axis,frame:e.frame});return{...e,subject:m}}const f=a?Nt(s.scroll.max,a):s.scroll.max,h=T0(s,f),p=To({page:e.subject.page,withPlaceholder:u,axis:e.axis,frame:h});return{...e,subject:p,frame:h}},H2=e=>{const n=e.subject.withPlaceholder;n||ue();const o=e.frame;if(!o){const u=To({page:e.subject.page,axis:e.axis,frame:null,withPlaceholder:null});return{...e,subject:u}}const s=n.oldFrameMaxScroll;s||ue();const l=T0(o,s),a=To({page:e.subject.page,axis:e.axis,frame:l,withPlaceholder:null});return{...e,subject:a,frame:l}};var W2=({previousPageBorderBoxCenter:e,moveRelativeTo:n,insideDestination:o,draggable:s,draggables:l,destination:a,viewport:u,afterCritical:f})=>{if(!n){if(o.length)return null;const g={displaced:Hs,displacedBy:D0,at:{type:"REORDER",destination:{droppableId:a.descriptor.id,index:0}}},x=Qa({impact:g,draggable:s,droppable:a,draggables:l,afterCritical:f}),b=Bo(s,a)?a:M0(a,s,l);return R0({draggable:s,destination:b,newPageBorderBoxCenter:x,viewport:u.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0})?g:null}const h=e[a.axis.line]<=n.page.borderBox.center[a.axis.line],p=(()=>{const g=n.descriptor.index;return n.descriptor.id===s.descriptor.id||h?g:g+1})(),m=ri(a.axis,s.displaceBy);return Oa({draggable:s,insideDestination:o,destination:a,viewport:u,displacedBy:m,last:Hs,index:p})},q2=({isMovingForward:e,previousPageBorderBoxCenter:n,draggable:o,isOver:s,draggables:l,droppables:a,viewport:u,afterCritical:f})=>{const h=U2({isMovingForward:e,pageBorderBoxCenter:n,source:s,droppables:a,viewport:u});if(!h)return null;const p=Lo(h.descriptor.id,l),m=V2({pageBorderBoxCenter:n,viewport:u,destination:h,insideDestination:p,afterCritical:f}),g=W2({previousPageBorderBoxCenter:n,destination:h,draggable:o,draggables:l,moveRelativeTo:m,insideDestination:p,viewport:u,afterCritical:f});if(!g)return null;const x=Qa({impact:g,draggable:o,droppable:h,draggables:l,afterCritical:f});return{clientSelection:Sd({pageBorderBoxCenter:x,draggable:o,viewport:u}),impact:g,scrollJumpRequest:null}},en=e=>{const n=e.at;return n?n.type==="REORDER"?n.destination.droppableId:n.combine.droppableId:null};const K2=(e,n)=>{const o=en(e);return o?n[o]:null};var Y2=({state:e,type:n})=>{const o=K2(e.impact,e.dimensions.droppables),s=!!o,l=e.dimensions.droppables[e.critical.droppable.id],a=o||l,u=a.axis.direction,f=u==="vertical"&&(n==="MOVE_UP"||n==="MOVE_DOWN")||u==="horizontal"&&(n==="MOVE_LEFT"||n==="MOVE_RIGHT");if(f&&!s)return null;const h=n==="MOVE_DOWN"||n==="MOVE_RIGHT",p=e.dimensions.draggables[e.critical.draggable.id],m=e.current.page.borderBoxCenter,{draggables:g,droppables:x}=e.dimensions;return f?$2({isMovingForward:h,previousPageBorderBoxCenter:m,draggable:p,destination:a,draggables:g,viewport:e.viewport,previousClientSelection:e.current.client.selection,previousImpact:e.impact,afterCritical:e.afterCritical}):q2({isMovingForward:h,previousPageBorderBoxCenter:m,draggable:p,isOver:a,draggables:g,droppables:x,viewport:e.viewport,afterCritical:e.afterCritical})};function Zr(e){return e.phase==="DRAGGING"||e.phase==="COLLECTING"}function O0(e){const n=hn(e.top,e.bottom),o=hn(e.left,e.right);return function(l){return n(l.y)&&o(l.x)}}function Q2(e,n){return e.left<n.right&&e.right>n.left&&e.top<n.bottom&&e.bottom>n.top}function J2({pageBorderBox:e,draggable:n,candidates:o}){const s=n.page.borderBox.center,l=o.map(a=>{const u=a.axis,f=to(a.axis.line,e.center[u.line],a.page.borderBox.center[u.crossAxisLine]);return{id:a.descriptor.id,distance:Gs(s,f)}}).sort((a,u)=>u.distance-a.distance);return l[0]?l[0].id:null}function X2({pageBorderBox:e,draggable:n,droppables:o}){const s=qa(o).filter(l=>{if(!l.isEnabled)return!1;const a=l.subject.active;if(!a||!Q2(e,a))return!1;if(O0(a)(e.center))return!0;const u=l.axis,f=a.center[u.crossAxisLine],h=e[u.crossAxisStart],p=e[u.crossAxisEnd],m=hn(a[u.crossAxisStart],a[u.crossAxisEnd]),g=m(h),x=m(p);return!g&&!x?!0:g?h<f:p>f});return s.length?s.length===1?s[0].descriptor.id:J2({pageBorderBox:e,draggable:n,candidates:s}):null}const _0=(e,n)=>En(ni(e,n));var Z2=(e,n)=>{const o=e.frame;return o?_0(n,o.scroll.diff.value):n};function L0({displaced:e,id:n}){return!!(e.visible[n]||e.invisible[n])}function eC({draggable:e,closest:n,inHomeList:o}){return n?o&&n.descriptor.index>e.descriptor.index?n.descriptor.index-1:n.descriptor.index:null}var tC=({pageBorderBoxWithDroppableScroll:e,draggable:n,destination:o,insideDestination:s,last:l,viewport:a,afterCritical:u})=>{const f=o.axis,h=ri(o.axis,n.displaceBy),p=h.value,m=e[f.start],g=e[f.end],b=Ya(n,s).find(E=>{const S=E.descriptor.id,j=E.page.borderBox.center[f.line],R=Ir(S,u),A=L0({displaced:l,id:S});return R?A?g<=j:m<j-p:A?g<=j+p:m<j})||null,C=eC({draggable:n,closest:b,inHomeList:Bo(n,o)});return Oa({draggable:n,insideDestination:s,destination:o,viewport:a,last:l,displacedBy:h,index:C})};const nC=4;var rC=({draggable:e,pageBorderBoxWithDroppableScroll:n,previousImpact:o,destination:s,insideDestination:l,afterCritical:a})=>{if(!s.isCombineEnabled)return null;const u=s.axis,f=ri(s.axis,e.displaceBy),h=f.value,p=n[u.start],m=n[u.end],x=Ya(e,l).find(C=>{const E=C.descriptor.id,S=C.page.borderBox,R=S[u.size]/nC,A=Ir(E,a),D=L0({displaced:o.displaced,id:E});return A?D?m>S[u.start]+R&&m<S[u.end]-R:p>S[u.start]-h+R&&p<S[u.end]-h-R:D?m>S[u.start]+h+R&&m<S[u.end]+h-R:p>S[u.start]+R&&p<S[u.end]-R});return x?{displacedBy:f,displaced:o.displaced,at:{type:"COMBINE",combine:{draggableId:x.descriptor.id,droppableId:s.descriptor.id}}}:null},B0=({pageOffset:e,draggable:n,draggables:o,droppables:s,previousImpact:l,viewport:a,afterCritical:u})=>{const f=_0(n.page.borderBox,e),h=X2({pageBorderBox:f,draggable:n,droppables:s});if(!h)return v2;const p=s[h],m=Lo(p.descriptor.id,o),g=Z2(p,f);return rC({pageBorderBoxWithDroppableScroll:g,draggable:n,previousImpact:l,destination:p,insideDestination:m,afterCritical:u})||tC({pageBorderBoxWithDroppableScroll:g,draggable:n,destination:p,insideDestination:m,last:l.displaced,viewport:a,afterCritical:u})},Ed=(e,n)=>({...e,[n.descriptor.id]:n});const oC=({previousImpact:e,impact:n,droppables:o})=>{const s=en(e),l=en(n);if(!s||s===l)return o;const a=o[s];if(!a.subject.withPlaceholder)return o;const u=H2(a);return Ed(o,u)};var sC=({draggable:e,draggables:n,droppables:o,previousImpact:s,impact:l})=>{const a=oC({previousImpact:s,impact:l,droppables:o}),u=en(l);if(!u)return a;const f=o[u];if(Bo(e,f)||f.subject.withPlaceholder)return a;const h=M0(f,e,n);return Ed(a,h)},Ms=({state:e,clientSelection:n,dimensions:o,viewport:s,impact:l,scrollJumpRequest:a})=>{const u=s||e.viewport,f=o||e.dimensions,h=n||e.current.client.selection,p=Zt(h,e.initial.client.selection),m={offset:p,selection:h,borderBoxCenter:Nt(e.initial.client.borderBoxCenter,p)},g={selection:Nt(m.selection,u.scroll.current),borderBoxCenter:Nt(m.borderBoxCenter,u.scroll.current),offset:Nt(m.offset,u.scroll.diff.value)},x={client:m,page:g};if(e.phase==="COLLECTING")return{...e,dimensions:f,viewport:u,current:x};const b=f.draggables[e.critical.draggable.id],C=l||B0({pageOffset:g.offset,draggable:b,draggables:f.draggables,droppables:f.droppables,previousImpact:e.impact,viewport:u,afterCritical:e.afterCritical}),E=sC({draggable:b,impact:C,previousImpact:e.impact,draggables:f.draggables,droppables:f.droppables});return{...e,current:x,dimensions:{draggables:f.draggables,droppables:E},impact:C,viewport:u,scrollJumpRequest:a||null,forceShouldAnimate:a?!1:null}};function iC(e,n){return e.map(o=>n[o])}var F0=({impact:e,viewport:n,draggables:o,destination:s,forceShouldAnimate:l})=>{const a=e.displaced,u=iC(a.all,o),f=Ws({afterDragging:u,destination:s,displacedBy:e.displacedBy,viewport:n.frame,forceShouldAnimate:l,last:a});return{...e,displaced:f}},$0=({impact:e,draggable:n,droppable:o,draggables:s,viewport:l,afterCritical:a})=>{const u=Qa({impact:e,draggable:n,draggables:s,droppable:o,afterCritical:a});return Sd({pageBorderBoxCenter:u,draggable:n,viewport:l})},U0=({state:e,dimensions:n,viewport:o})=>{e.movementMode!=="SNAP"&&ue();const s=e.impact,l=o||e.viewport,a=n||e.dimensions,{draggables:u,droppables:f}=a,h=u[e.critical.draggable.id],p=en(s);p||ue();const m=f[p],g=F0({impact:s,viewport:l,destination:m,draggables:u}),x=$0({impact:g,draggable:h,droppable:m,draggables:u,viewport:l,afterCritical:e.afterCritical});return Ms({impact:g,clientSelection:x,state:e,dimensions:a,viewport:l})},aC=e=>({index:e.index,droppableId:e.droppableId}),z0=({draggable:e,home:n,draggables:o,viewport:s})=>{const l=ri(n.axis,e.displaceBy),a=Lo(n.descriptor.id,o),u=a.indexOf(e);u===-1&&ue();const f=a.slice(u+1),h=f.reduce((x,b)=>(x[b.descriptor.id]=!0,x),{}),p={inVirtualList:n.descriptor.mode==="virtual",displacedBy:l,effected:h};return{impact:{displaced:Ws({afterDragging:f,destination:n,displacedBy:l,last:null,viewport:s.frame,forceShouldAnimate:!1}),displacedBy:l,at:{type:"REORDER",destination:aC(e.descriptor)}},afterCritical:p}},lC=(e,n)=>({draggables:e.draggables,droppables:Ed(e.droppables,n)}),cC=({draggable:e,offset:n,initialWindowScroll:o})=>{const s=Ia(e.client,n),l=Pa(s,o);return{...e,placeholder:{...e.placeholder,client:s},client:s,page:l}},uC=e=>{const n=e.frame;return n||ue(),n},dC=({additions:e,updatedDroppables:n,viewport:o})=>{const s=o.scroll.diff.value;return e.map(l=>{const a=l.descriptor.droppableId,u=n[a],h=uC(u).scroll.diff.value,p=Nt(s,h);return cC({draggable:l,offset:p,initialWindowScroll:o.scroll.initial})})},fC=({state:e,published:n})=>{const o=n.modified.map(j=>{const R=e.dimensions.droppables[j.droppableId];return yd(R,j.scroll)}),s={...e.dimensions.droppables,...S0(o)},l=E0(dC({additions:n.additions,updatedDroppables:s,viewport:e.viewport})),a={...e.dimensions.draggables,...l};n.removals.forEach(j=>{delete a[j]});const u={droppables:s,draggables:a},f=en(e.impact),h=f?u.droppables[f]:null,p=u.draggables[e.critical.draggable.id],m=u.droppables[e.critical.droppable.id],{impact:g,afterCritical:x}=z0({draggable:p,home:m,draggables:a,viewport:e.viewport}),b=h&&h.isCombineEnabled?e.impact:g,C=B0({pageOffset:e.current.page.offset,draggable:u.draggables[e.critical.draggable.id],draggables:u.draggables,droppables:u.droppables,previousImpact:b,viewport:e.viewport,afterCritical:x}),E={...e,phase:"DRAGGING",impact:C,onLiftImpact:g,dimensions:u,afterCritical:x,forceShouldAnimate:!1};return e.phase==="COLLECTING"?E:{...E,phase:"DROP_PENDING",reason:e.reason,isWaiting:!1}};const Hu=e=>e.movementMode==="SNAP",bu=(e,n,o)=>{const s=lC(e.dimensions,n);return!Hu(e)||o?Ms({state:e,dimensions:s}):U0({state:e,dimensions:s})};function wu(e){return e.isDragging&&e.movementMode==="SNAP"?{...e,scrollJumpRequest:null}:e}const sg={phase:"IDLE",completed:null,shouldFlush:!1};var hC=(e=sg,n)=>{if(n.type==="FLUSH")return{...sg,shouldFlush:!0};if(n.type==="INITIAL_PUBLISH"){e.phase!=="IDLE"&&ue();const{critical:o,clientSelection:s,viewport:l,dimensions:a,movementMode:u}=n.payload,f=a.draggables[o.draggable.id],h=a.droppables[o.droppable.id],p={selection:s,borderBoxCenter:f.client.borderBox.center,offset:gt},m={client:p,page:{selection:Nt(p.selection,l.scroll.initial),borderBoxCenter:Nt(p.selection,l.scroll.initial),offset:Nt(p.selection,l.scroll.diff.value)}},g=qa(a.droppables).every(E=>!E.isFixedOnPage),{impact:x,afterCritical:b}=z0({draggable:f,home:h,draggables:a.draggables,viewport:l});return{phase:"DRAGGING",isDragging:!0,critical:o,movementMode:u,dimensions:a,initial:m,current:m,isWindowScrollAllowed:g,impact:x,afterCritical:b,onLiftImpact:x,viewport:l,scrollJumpRequest:null,forceShouldAnimate:null}}if(n.type==="COLLECTION_STARTING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"?e:(e.phase!=="DRAGGING"&&ue(),{...e,phase:"COLLECTING"});if(n.type==="PUBLISH_WHILE_DRAGGING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"||ue(),fC({state:e,published:n.payload});if(n.type==="MOVE"){if(e.phase==="DROP_PENDING")return e;Zr(e)||ue();const{client:o}=n.payload;return Ar(o,e.current.client.selection)?e:Ms({state:e,clientSelection:o,impact:Hu(e)?e.impact:null})}if(n.type==="UPDATE_DROPPABLE_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="COLLECTING")return wu(e);Zr(e)||ue();const{id:o,newScroll:s}=n.payload,l=e.dimensions.droppables[o];if(!l)return e;const a=yd(l,s);return bu(e,a,!1)}if(n.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(e.phase==="DROP_PENDING")return e;Zr(e)||ue();const{id:o,isEnabled:s}=n.payload,l=e.dimensions.droppables[o];l||ue(),l.isEnabled===s&&ue();const a={...l,isEnabled:s};return bu(e,a,!0)}if(n.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(e.phase==="DROP_PENDING")return e;Zr(e)||ue();const{id:o,isCombineEnabled:s}=n.payload,l=e.dimensions.droppables[o];l||ue(),l.isCombineEnabled===s&&ue();const a={...l,isCombineEnabled:s};return bu(e,a,!0)}if(n.type==="MOVE_BY_WINDOW_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="DROP_ANIMATING")return e;Zr(e)||ue(),e.isWindowScrollAllowed||ue();const o=n.payload.newScroll;if(Ar(e.viewport.scroll.current,o))return wu(e);const s=P0(e.viewport,o);return Hu(e)?U0({state:e,viewport:s}):Ms({state:e,viewport:s})}if(n.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!Zr(e))return e;const o=n.payload.maxScroll;if(Ar(o,e.viewport.scroll.max))return e;const s={...e.viewport,scroll:{...e.viewport.scroll,max:o}};return{...e,viewport:s}}if(n.type==="MOVE_UP"||n.type==="MOVE_DOWN"||n.type==="MOVE_LEFT"||n.type==="MOVE_RIGHT"){if(e.phase==="COLLECTING"||e.phase==="DROP_PENDING")return e;e.phase!=="DRAGGING"&&ue();const o=Y2({state:e,type:n.type});return o?Ms({state:e,impact:o.impact,clientSelection:o.clientSelection,scrollJumpRequest:o.scrollJumpRequest}):e}if(n.type==="DROP_PENDING"){const o=n.payload.reason;return e.phase!=="COLLECTING"&&ue(),{...e,phase:"DROP_PENDING",isWaiting:!0,reason:o}}if(n.type==="DROP_ANIMATE"){const{completed:o,dropDuration:s,newHomeClientOffset:l}=n.payload;return e.phase==="DRAGGING"||e.phase==="DROP_PENDING"||ue(),{phase:"DROP_ANIMATING",completed:o,dropDuration:s,newHomeClientOffset:l,dimensions:e.dimensions}}if(n.type==="DROP_COMPLETE"){const{completed:o}=n.payload;return{phase:"IDLE",completed:o,shouldFlush:!1}}return e};function Ue(e,n){return e instanceof Object&&"type"in e&&e.type===n}const pC=e=>({type:"BEFORE_INITIAL_CAPTURE",payload:e}),mC=e=>({type:"LIFT",payload:e}),gC=e=>({type:"INITIAL_PUBLISH",payload:e}),vC=e=>({type:"PUBLISH_WHILE_DRAGGING",payload:e}),xC=()=>({type:"COLLECTION_STARTING",payload:null}),yC=e=>({type:"UPDATE_DROPPABLE_SCROLL",payload:e}),bC=e=>({type:"UPDATE_DROPPABLE_IS_ENABLED",payload:e}),wC=e=>({type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:e}),V0=e=>({type:"MOVE",payload:e}),NC=e=>({type:"MOVE_BY_WINDOW_SCROLL",payload:e}),CC=e=>({type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:e}),SC=()=>({type:"MOVE_UP",payload:null}),EC=()=>({type:"MOVE_DOWN",payload:null}),DC=()=>({type:"MOVE_RIGHT",payload:null}),jC=()=>({type:"MOVE_LEFT",payload:null}),Dd=()=>({type:"FLUSH",payload:null}),kC=e=>({type:"DROP_ANIMATE",payload:e}),jd=e=>({type:"DROP_COMPLETE",payload:e}),G0=e=>({type:"DROP",payload:e}),AC=e=>({type:"DROP_PENDING",payload:e}),H0=()=>({type:"DROP_ANIMATION_FINISHED",payload:null});var IC=e=>({getState:n,dispatch:o})=>s=>l=>{if(!Ue(l,"LIFT")){s(l);return}const{id:a,clientSelection:u,movementMode:f}=l.payload,h=n();h.phase==="DROP_ANIMATING"&&o(jd({completed:h.completed})),n().phase!=="IDLE"&&ue(),o(Dd()),o(pC({draggableId:a,movementMode:f}));const m={draggableId:a,scrollOptions:{shouldPublishImmediately:f==="SNAP"}},{critical:g,dimensions:x,viewport:b}=e.startPublishing(m);o(gC({critical:g,dimensions:x,clientSelection:u,movementMode:f,viewport:b}))},PC=e=>()=>n=>o=>{Ue(o,"INITIAL_PUBLISH")&&e.dragging(),Ue(o,"DROP_ANIMATE")&&e.dropping(o.payload.completed.result.reason),(Ue(o,"FLUSH")||Ue(o,"DROP_COMPLETE"))&&e.resting(),n(o)};const kd={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},qs={opacity:{drop:0,combining:.7},scale:{drop:.75}},W0={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},Xr=`${W0.outOfTheWay}s ${kd.outOfTheWay}`,Os={fluid:`opacity ${Xr}`,snap:`transform ${Xr}, opacity ${Xr}`,drop:e=>{const n=`${e}s ${kd.drop}`;return`transform ${n}, opacity ${n}`},outOfTheWay:`transform ${Xr}`,placeholder:`height ${Xr}, width ${Xr}, margin ${Xr}`},ig=e=>Ar(e,gt)?void 0:`translate(${e.x}px, ${e.y}px)`,Wu={moveTo:ig,drop:(e,n)=>{const o=ig(e);if(o)return n?`${o} scale(${qs.scale.drop})`:o}},{minDropTime:qu,maxDropTime:q0}=W0,RC=q0-qu,ag=1500,TC=.6;var MC=({current:e,destination:n,reason:o})=>{const s=Gs(e,n);if(s<=0)return qu;if(s>=ag)return q0;const l=s/ag,a=qu+RC*l,u=o==="CANCEL"?a*TC:a;return Number(u.toFixed(2))},OC=({impact:e,draggable:n,dimensions:o,viewport:s,afterCritical:l})=>{const{draggables:a,droppables:u}=o,f=en(e),h=f?u[f]:null,p=u[n.descriptor.droppableId],m=$0({impact:e,draggable:n,draggables:a,afterCritical:l,droppable:h||p,viewport:s});return Zt(m,n.client.borderBox.center)},_C=({draggables:e,reason:n,lastImpact:o,home:s,viewport:l,onLiftImpact:a})=>!o.at||n!=="DROP"?{impact:F0({draggables:e,impact:a,destination:s,viewport:l,forceShouldAnimate:!0}),didDropInsideDroppable:!1}:o.at.type==="REORDER"?{impact:o,didDropInsideDroppable:!0}:{impact:{...o,displaced:Hs},didDropInsideDroppable:!0};const LC=({getState:e,dispatch:n})=>o=>s=>{if(!Ue(s,"DROP")){o(s);return}const l=e(),a=s.payload.reason;if(l.phase==="COLLECTING"){n(AC({reason:a}));return}if(l.phase==="IDLE")return;l.phase==="DROP_PENDING"&&l.isWaiting&&ue(),l.phase==="DRAGGING"||l.phase==="DROP_PENDING"||ue();const f=l.critical,h=l.dimensions,p=h.draggables[l.critical.draggable.id],{impact:m,didDropInsideDroppable:g}=_C({reason:a,lastImpact:l.impact,afterCritical:l.afterCritical,onLiftImpact:l.onLiftImpact,home:l.dimensions.droppables[l.critical.droppable.id],viewport:l.viewport,draggables:l.dimensions.draggables}),x=g?bd(m):null,b=g?Ka(m):null,C={index:f.draggable.index,droppableId:f.droppable.id},E={draggableId:p.descriptor.id,type:p.descriptor.type,source:C,reason:a,mode:l.movementMode,destination:x,combine:b},S=OC({impact:m,draggable:p,dimensions:h,viewport:l.viewport,afterCritical:l.afterCritical}),j={critical:l.critical,afterCritical:l.afterCritical,result:E,impact:m};if(!(!Ar(l.current.client.offset,S)||!!E.combine)){n(jd({completed:j}));return}const A=MC({current:l.current.client.offset,destination:S,reason:a});n(kC({newHomeClientOffset:S,dropDuration:A,completed:j}))};var K0=()=>({x:window.pageXOffset,y:window.pageYOffset});function BC(e){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:n=>{n.target!==window&&n.target!==window.document||e()}}}function FC({onWindowScroll:e}){function n(){e(K0())}const o=Vs(n),s=BC(o);let l=kr;function a(){return l!==kr}function u(){a()&&ue(),l=fn(window,[s])}function f(){a()||ue(),o.cancel(),l(),l=kr}return{start:u,stop:f,isActive:a}}const $C=e=>Ue(e,"DROP_COMPLETE")||Ue(e,"DROP_ANIMATE")||Ue(e,"FLUSH"),UC=e=>{const n=FC({onWindowScroll:o=>{e.dispatch(NC({newScroll:o}))}});return o=>s=>{!n.isActive()&&Ue(s,"INITIAL_PUBLISH")&&n.start(),n.isActive()&&$C(s)&&n.stop(),o(s)}};var zC=e=>{let n=!1,o=!1;const s=setTimeout(()=>{o=!0}),l=a=>{n||o||(n=!0,e(a),clearTimeout(s))};return l.wasCalled=()=>n,l},VC=()=>{const e=[],n=l=>{const a=e.findIndex(f=>f.timerId===l);a===-1&&ue();const[u]=e.splice(a,1);u.callback()};return{add:l=>{const a=setTimeout(()=>n(a)),u={timerId:a,callback:l};e.push(u)},flush:()=>{if(!e.length)return;const l=[...e];e.length=0,l.forEach(a=>{clearTimeout(a.timerId),a.callback()})}}};const GC=(e,n)=>e==null&&n==null?!0:e==null||n==null?!1:e.droppableId===n.droppableId&&e.index===n.index,HC=(e,n)=>e==null&&n==null?!0:e==null||n==null?!1:e.draggableId===n.draggableId&&e.droppableId===n.droppableId,WC=(e,n)=>{if(e===n)return!0;const o=e.draggable.id===n.draggable.id&&e.draggable.droppableId===n.draggable.droppableId&&e.draggable.type===n.draggable.type&&e.draggable.index===n.draggable.index,s=e.droppable.id===n.droppable.id&&e.droppable.type===n.droppable.type;return o&&s},Is=(e,n)=>{n()},va=(e,n)=>({draggableId:e.draggable.id,type:e.droppable.type,source:{droppableId:e.droppable.id,index:e.draggable.index},mode:n});function Nu(e,n,o,s){if(!e){o(s(n));return}const l=zC(o);e(n,{announce:l}),l.wasCalled()||o(s(n))}var qC=(e,n)=>{const o=VC();let s=null;const l=(g,x)=>{s&&ue(),Is("onBeforeCapture",()=>{const b=e().onBeforeCapture;b&&b({draggableId:g,mode:x})})},a=(g,x)=>{s&&ue(),Is("onBeforeDragStart",()=>{const b=e().onBeforeDragStart;b&&b(va(g,x))})},u=(g,x)=>{s&&ue();const b=va(g,x);s={mode:x,lastCritical:g,lastLocation:b.source,lastCombine:null},o.add(()=>{Is("onDragStart",()=>Nu(e().onDragStart,b,n,wa.onDragStart))})},f=(g,x)=>{const b=bd(x),C=Ka(x);s||ue();const E=!WC(g,s.lastCritical);E&&(s.lastCritical=g);const S=!GC(s.lastLocation,b);S&&(s.lastLocation=b);const j=!HC(s.lastCombine,C);if(j&&(s.lastCombine=C),!E&&!S&&!j)return;const R={...va(g,s.mode),combine:C,destination:b};o.add(()=>{Is("onDragUpdate",()=>Nu(e().onDragUpdate,R,n,wa.onDragUpdate))})},h=()=>{s||ue(),o.flush()},p=g=>{s||ue(),s=null,Is("onDragEnd",()=>Nu(e().onDragEnd,g,n,wa.onDragEnd))};return{beforeCapture:l,beforeStart:a,start:u,update:f,flush:h,drop:p,abort:()=>{if(!s)return;const g={...va(s.lastCritical,s.mode),combine:null,destination:null,reason:"CANCEL"};p(g)}}},KC=(e,n)=>{const o=qC(e,n);return s=>l=>a=>{if(Ue(a,"BEFORE_INITIAL_CAPTURE")){o.beforeCapture(a.payload.draggableId,a.payload.movementMode);return}if(Ue(a,"INITIAL_PUBLISH")){const f=a.payload.critical;o.beforeStart(f,a.payload.movementMode),l(a),o.start(f,a.payload.movementMode);return}if(Ue(a,"DROP_COMPLETE")){const f=a.payload.completed.result;o.flush(),l(a),o.drop(f);return}if(l(a),Ue(a,"FLUSH")){o.abort();return}const u=s.getState();u.phase==="DRAGGING"&&o.update(u.critical,u.impact)}};const YC=e=>n=>o=>{if(!Ue(o,"DROP_ANIMATION_FINISHED")){n(o);return}const s=e.getState();s.phase!=="DROP_ANIMATING"&&ue(),e.dispatch(jd({completed:s.completed}))},QC=e=>{let n=null,o=null;function s(){o&&(cancelAnimationFrame(o),o=null),n&&(n(),n=null)}return l=>a=>{if((Ue(a,"FLUSH")||Ue(a,"DROP_COMPLETE")||Ue(a,"DROP_ANIMATION_FINISHED"))&&s(),l(a),!Ue(a,"DROP_ANIMATE"))return;const u={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){e.getState().phase==="DROP_ANIMATING"&&e.dispatch(H0())}};o=requestAnimationFrame(()=>{o=null,n=fn(window,[u])})}};var JC=e=>()=>n=>o=>{(Ue(o,"DROP_COMPLETE")||Ue(o,"FLUSH")||Ue(o,"DROP_ANIMATE"))&&e.stopPublishing(),n(o)},XC=e=>{let n=!1;return()=>o=>s=>{if(Ue(s,"INITIAL_PUBLISH")){n=!0,e.tryRecordFocus(s.payload.critical.draggable.id),o(s),e.tryRestoreFocusRecorded();return}if(o(s),!!n){if(Ue(s,"FLUSH")){n=!1,e.tryRestoreFocusRecorded();return}if(Ue(s,"DROP_COMPLETE")){n=!1;const l=s.payload.completed.result;l.combine&&e.tryShiftRecord(l.draggableId,l.combine.draggableId),e.tryRestoreFocusRecorded()}}}};const ZC=e=>Ue(e,"DROP_COMPLETE")||Ue(e,"DROP_ANIMATE")||Ue(e,"FLUSH");var eS=e=>n=>o=>s=>{if(ZC(s)){e.stop(),o(s);return}if(Ue(s,"INITIAL_PUBLISH")){o(s);const l=n.getState();l.phase!=="DRAGGING"&&ue(),e.start(l);return}o(s),e.scroll(n.getState())};const tS=e=>n=>o=>{if(n(o),!Ue(o,"PUBLISH_WHILE_DRAGGING"))return;const s=e.getState();s.phase==="DROP_PENDING"&&(s.isWaiting||e.dispatch(G0({reason:s.reason})))},nS=u0;var rS=({dimensionMarshal:e,focusMarshal:n,styleMarshal:o,getResponders:s,announce:l,autoScroller:a})=>c0(hC,nS(eN(PC(o),JC(e),IC(e),LC,YC,QC,tS,eS(a),UC,XC(n),KC(s,l))));const Cu=()=>({additions:{},removals:{},modified:{}});function oS({registry:e,callbacks:n}){let o=Cu(),s=null;const l=()=>{s||(n.collectionStarting(),s=requestAnimationFrame(()=>{s=null;const{additions:h,removals:p,modified:m}=o,g=Object.keys(h).map(C=>e.draggable.getById(C).getDimension(gt)).sort((C,E)=>C.descriptor.index-E.descriptor.index),x=Object.keys(m).map(C=>{const S=e.droppable.getById(C).callbacks.getScrollWhileDragging();return{droppableId:C,scroll:S}}),b={additions:g,removals:Object.keys(p),modified:x};o=Cu(),n.publish(b)}))};return{add:h=>{const p=h.descriptor.id;o.additions[p]=h,o.modified[h.descriptor.droppableId]=!0,o.removals[p]&&delete o.removals[p],l()},remove:h=>{const p=h.descriptor;o.removals[p.id]=!0,o.modified[p.droppableId]=!0,o.additions[p.id]&&delete o.additions[p.id],l()},stop:()=>{s&&(cancelAnimationFrame(s),s=null,o=Cu())}}}var Y0=({scrollHeight:e,scrollWidth:n,height:o,width:s})=>{const l=Zt({x:n,y:e},{x:s,y:o});return{x:Math.max(0,l.x),y:Math.max(0,l.y)}},Q0=()=>{const e=document.documentElement;return e||ue(),e},J0=()=>{const e=Q0();return Y0({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,width:e.clientWidth,height:e.clientHeight})},sS=()=>{const e=K0(),n=J0(),o=e.y,s=e.x,l=Q0(),a=l.clientWidth,u=l.clientHeight,f=s+a,h=o+u;return{frame:En({top:o,left:s,right:f,bottom:h}),scroll:{initial:e,current:e,max:n,diff:{value:gt,displacement:gt}}}},iS=({critical:e,scrollOptions:n,registry:o})=>{const s=sS(),l=s.scroll.current,a=e.droppable,u=o.droppable.getAllByType(a.type).map(m=>m.callbacks.getDimensionAndWatchScroll(l,n)),f=o.draggable.getAllByType(e.draggable.type).map(m=>m.getDimension(l));return{dimensions:{draggables:E0(f),droppables:S0(u)},critical:e,viewport:s}};function lg(e,n,o){return!(o.descriptor.id===n.id||o.descriptor.type!==n.type||e.droppable.getById(o.descriptor.droppableId).descriptor.mode!=="virtual")}var aS=(e,n)=>{let o=null;const s=oS({callbacks:{publish:n.publishWhileDragging,collectionStarting:n.collectionStarting},registry:e}),l=(x,b)=>{e.droppable.exists(x)||ue(),o&&n.updateDroppableIsEnabled({id:x,isEnabled:b})},a=(x,b)=>{o&&(e.droppable.exists(x)||ue(),n.updateDroppableIsCombineEnabled({id:x,isCombineEnabled:b}))},u=(x,b)=>{o&&(e.droppable.exists(x)||ue(),n.updateDroppableScroll({id:x,newScroll:b}))},f=(x,b)=>{o&&e.droppable.getById(x).callbacks.scroll(b)},h=()=>{if(!o)return;s.stop();const x=o.critical.droppable;e.droppable.getAllByType(x.type).forEach(b=>b.callbacks.dragStopped()),o.unsubscribe(),o=null},p=x=>{o||ue();const b=o.critical.draggable;x.type==="ADDITION"&&lg(e,b,x.value)&&s.add(x.value),x.type==="REMOVAL"&&lg(e,b,x.value)&&s.remove(x.value)};return{updateDroppableIsEnabled:l,updateDroppableIsCombineEnabled:a,scrollDroppable:f,updateDroppableScroll:u,startPublishing:x=>{o&&ue();const b=e.draggable.getById(x.draggableId),C=e.droppable.getById(b.descriptor.droppableId),E={draggable:b.descriptor,droppable:C.descriptor},S=e.subscribe(p);return o={critical:E,unsubscribe:S},iS({critical:E,registry:e,scrollOptions:x.scrollOptions})},stopPublishing:h}},X0=(e,n)=>e.phase==="IDLE"?!0:e.phase!=="DROP_ANIMATING"||e.completed.result.draggableId===n?!1:e.completed.result.reason==="DROP",lS=e=>{window.scrollBy(e.x,e.y)};const cS=mt(e=>qa(e).filter(n=>!(!n.isEnabled||!n.frame))),uS=(e,n)=>cS(n).find(s=>(s.frame||ue(),O0(s.frame.pageMarginBox)(e)))||null;var dS=({center:e,destination:n,droppables:o})=>{if(n){const l=o[n];return l.frame?l:null}return uS(e,o)};const Ks={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:e=>e**2,durationDampening:{stopDampeningAt:1200,accelerateAt:360},disabled:!1};var fS=(e,n,o=()=>Ks)=>{const s=o(),l=e[n.size]*s.startFromPercentage,a=e[n.size]*s.maxScrollAtPercentage;return{startScrollingFrom:l,maxScrollValueAt:a}},Z0=({startOfRange:e,endOfRange:n,current:o})=>{const s=n-e;return s===0?0:(o-e)/s},Ad=1,hS=(e,n,o=()=>Ks)=>{const s=o();if(e>n.startScrollingFrom)return 0;if(e<=n.maxScrollValueAt)return s.maxPixelScroll;if(e===n.startScrollingFrom)return Ad;const a=1-Z0({startOfRange:n.maxScrollValueAt,endOfRange:n.startScrollingFrom,current:e}),u=s.maxPixelScroll*s.ease(a);return Math.ceil(u)},pS=(e,n,o)=>{const s=o(),l=s.durationDampening.accelerateAt,a=s.durationDampening.stopDampeningAt,u=n,f=a,p=Date.now()-u;if(p>=a)return e;if(p<l)return Ad;const m=Z0({startOfRange:l,endOfRange:f,current:p}),g=e*s.ease(m);return Math.ceil(g)},cg=({distanceToEdge:e,thresholds:n,dragStartTime:o,shouldUseTimeDampening:s,getAutoScrollerOptions:l})=>{const a=hS(e,n,l);return a===0?0:s?Math.max(pS(a,o,l),Ad):a},ug=({container:e,distanceToEdges:n,dragStartTime:o,axis:s,shouldUseTimeDampening:l,getAutoScrollerOptions:a})=>{const u=fS(e,s,a);return n[s.end]<n[s.start]?cg({distanceToEdge:n[s.end],thresholds:u,dragStartTime:o,shouldUseTimeDampening:l,getAutoScrollerOptions:a}):-1*cg({distanceToEdge:n[s.start],thresholds:u,dragStartTime:o,shouldUseTimeDampening:l,getAutoScrollerOptions:a})},mS=({container:e,subject:n,proposedScroll:o})=>{const s=n.height>e.height,l=n.width>e.width;return!l&&!s?o:l&&s?null:{x:l?0:o.x,y:s?0:o.y}};const gS=C0(e=>e===0?0:e);var ev=({dragStartTime:e,container:n,subject:o,center:s,shouldUseTimeDampening:l,getAutoScrollerOptions:a})=>{const u={top:s.y-n.top,right:n.right-s.x,bottom:n.bottom-s.y,left:s.x-n.left},f=ug({container:n,distanceToEdges:u,dragStartTime:e,axis:wd,shouldUseTimeDampening:l,getAutoScrollerOptions:a}),h=ug({container:n,distanceToEdges:u,dragStartTime:e,axis:k0,shouldUseTimeDampening:l,getAutoScrollerOptions:a}),p=gS({x:h,y:f});if(Ar(p,gt))return null;const m=mS({container:n,subject:o,proposedScroll:p});return m?Ar(m,gt)?null:m:null};const vS=C0(e=>e===0?0:e>0?1:-1),Id=(()=>{const e=(n,o)=>n<0?n:n>o?n-o:0;return({current:n,max:o,change:s})=>{const l=Nt(n,s),a={x:e(l.x,o.x),y:e(l.y,o.y)};return Ar(a,gt)?null:a}})(),tv=({max:e,current:n,change:o})=>{const s={x:Math.max(n.x,e.x),y:Math.max(n.y,e.y)},l=vS(o),a=Id({max:s,current:n,change:l});return!a||l.x!==0&&a.x===0||l.y!==0&&a.y===0},Pd=(e,n)=>tv({current:e.scroll.current,max:e.scroll.max,change:n}),xS=(e,n)=>{if(!Pd(e,n))return null;const o=e.scroll.max,s=e.scroll.current;return Id({current:s,max:o,change:n})},Rd=(e,n)=>{const o=e.frame;return o?tv({current:o.scroll.current,max:o.scroll.max,change:n}):!1},yS=(e,n)=>{const o=e.frame;return!o||!Rd(e,n)?null:Id({current:o.scroll.current,max:o.scroll.max,change:n})};var bS=({viewport:e,subject:n,center:o,dragStartTime:s,shouldUseTimeDampening:l,getAutoScrollerOptions:a})=>{const u=ev({dragStartTime:s,container:e.frame,subject:n,center:o,shouldUseTimeDampening:l,getAutoScrollerOptions:a});return u&&Pd(e,u)?u:null},wS=({droppable:e,subject:n,center:o,dragStartTime:s,shouldUseTimeDampening:l,getAutoScrollerOptions:a})=>{const u=e.frame;if(!u)return null;const f=ev({dragStartTime:s,container:u.pageMarginBox,subject:n,center:o,shouldUseTimeDampening:l,getAutoScrollerOptions:a});return f&&Rd(e,f)?f:null},dg=({state:e,dragStartTime:n,shouldUseTimeDampening:o,scrollWindow:s,scrollDroppable:l,getAutoScrollerOptions:a})=>{const u=e.current.page.borderBoxCenter,h=e.dimensions.draggables[e.critical.draggable.id].page.marginBox;if(e.isWindowScrollAllowed){const g=e.viewport,x=bS({dragStartTime:n,viewport:g,subject:h,center:u,shouldUseTimeDampening:o,getAutoScrollerOptions:a});if(x){s(x);return}}const p=dS({center:u,destination:en(e.impact),droppables:e.dimensions.droppables});if(!p)return;const m=wS({dragStartTime:n,droppable:p,subject:h,center:u,shouldUseTimeDampening:o,getAutoScrollerOptions:a});m&&l(p.descriptor.id,m)},NS=({scrollWindow:e,scrollDroppable:n,getAutoScrollerOptions:o=()=>Ks})=>{const s=Vs(e),l=Vs(n);let a=null;const u=p=>{a||ue();const{shouldUseTimeDampening:m,dragStartTime:g}=a;dg({state:p,scrollWindow:s,scrollDroppable:l,dragStartTime:g,shouldUseTimeDampening:m,getAutoScrollerOptions:o})};return{start:p=>{a&&ue();const m=Date.now();let g=!1;const x=()=>{g=!0};dg({state:p,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:x,scrollDroppable:x,getAutoScrollerOptions:o}),a={dragStartTime:m,shouldUseTimeDampening:g},g&&u(p)},stop:()=>{a&&(s.cancel(),l.cancel(),a=null)},scroll:u}},CS=({move:e,scrollDroppable:n,scrollWindow:o})=>{const s=(f,h)=>{const p=Nt(f.current.client.selection,h);e({client:p})},l=(f,h)=>{if(!Rd(f,h))return h;const p=yS(f,h);if(!p)return n(f.descriptor.id,h),null;const m=Zt(h,p);return n(f.descriptor.id,m),Zt(h,m)},a=(f,h,p)=>{if(!f||!Pd(h,p))return p;const m=xS(h,p);if(!m)return o(p),null;const g=Zt(p,m);return o(g),Zt(p,g)};return f=>{const h=f.scrollJumpRequest;if(!h)return;const p=en(f.impact);p||ue();const m=l(f.dimensions.droppables[p],h);if(!m)return;const g=f.viewport,x=a(f.isWindowScrollAllowed,g,m);x&&s(f,x)}},SS=({scrollDroppable:e,scrollWindow:n,move:o,getAutoScrollerOptions:s})=>{const l=NS({scrollWindow:n,scrollDroppable:e,getAutoScrollerOptions:s}),a=CS({move:o,scrollWindow:n,scrollDroppable:e});return{scroll:h=>{if(!(s().disabled||h.phase!=="DRAGGING")){if(h.movementMode==="FLUID"){l.scroll(h);return}h.scrollJumpRequest&&a(h)}},start:l.start,stop:l.stop}};const Mo="data-rfd",Oo=(()=>{const e=`${Mo}-drag-handle`;return{base:e,draggableId:`${e}-draggable-id`,contextId:`${e}-context-id`}})(),Ku=(()=>{const e=`${Mo}-draggable`;return{base:e,contextId:`${e}-context-id`,id:`${e}-id`}})(),ES=(()=>{const e=`${Mo}-droppable`;return{base:e,contextId:`${e}-context-id`,id:`${e}-id`}})(),fg={contextId:`${Mo}-scroll-container-context-id`},DS=e=>n=>`[${n}="${e}"]`,Ps=(e,n)=>e.map(o=>{const s=o.styles[n];return s?`${o.selector} { ${s} }`:""}).join(" "),jS="pointer-events: none;";var kS=e=>{const n=DS(e),o=(()=>{const f=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:n(Oo.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:f,dragging:jS,dropAnimating:f}}})(),s=(()=>{const f=`
      transition: ${Os.outOfTheWay};
    `;return{selector:n(Ku.contextId),styles:{dragging:f,dropAnimating:f,userCancel:f}}})(),l={selector:n(ES.contextId),styles:{always:"overflow-anchor: none;"}},u=[s,o,l,{selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}}];return{always:Ps(u,"always"),resting:Ps(u,"resting"),dragging:Ps(u,"dragging"),dropAnimating:Ps(u,"dropAnimating"),userCancel:Ps(u,"userCancel")}};const tn=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?w.useLayoutEffect:w.useEffect,Su=()=>{const e=document.querySelector("head");return e||ue(),e},hg=e=>{const n=document.createElement("style");return e&&n.setAttribute("nonce",e),n.type="text/css",n};function AS(e,n){const o=Oe(()=>kS(e),[e]),s=w.useRef(null),l=w.useRef(null),a=Ce(mt(g=>{const x=l.current;x||ue(),x.textContent=g}),[]),u=Ce(g=>{const x=s.current;x||ue(),x.textContent=g},[]);tn(()=>{!s.current&&!l.current||ue();const g=hg(n),x=hg(n);return s.current=g,l.current=x,g.setAttribute(`${Mo}-always`,e),x.setAttribute(`${Mo}-dynamic`,e),Su().appendChild(g),Su().appendChild(x),u(o.always),a(o.resting),()=>{const b=C=>{const E=C.current;E||ue(),Su().removeChild(E),C.current=null};b(s),b(l)}},[n,u,a,o.always,o.resting,e]);const f=Ce(()=>a(o.dragging),[a,o.dragging]),h=Ce(g=>{if(g==="DROP"){a(o.dropAnimating);return}a(o.userCancel)},[a,o.dropAnimating,o.userCancel]),p=Ce(()=>{l.current&&a(o.resting)},[a,o.resting]);return Oe(()=>({dragging:f,dropping:h,resting:p}),[f,h,p])}function nv(e,n){return Array.from(e.querySelectorAll(n))}var rv=e=>e&&e.ownerDocument&&e.ownerDocument.defaultView?e.ownerDocument.defaultView:window;function Ja(e){return e instanceof rv(e).HTMLElement}function IS(e,n){const o=`[${Oo.contextId}="${e}"]`,s=nv(document,o);if(!s.length)return null;const l=s.find(a=>a.getAttribute(Oo.draggableId)===n);return!l||!Ja(l)?null:l}function PS(e){const n=w.useRef({}),o=w.useRef(null),s=w.useRef(null),l=w.useRef(!1),a=Ce(function(x,b){const C={id:x,focus:b};return n.current[x]=C,function(){const S=n.current;S[x]!==C&&delete S[x]}},[]),u=Ce(function(x){const b=IS(e,x);b&&b!==document.activeElement&&b.focus()},[e]),f=Ce(function(x,b){o.current===x&&(o.current=b)},[]),h=Ce(function(){s.current||l.current&&(s.current=requestAnimationFrame(()=>{s.current=null;const x=o.current;x&&u(x)}))},[u]),p=Ce(function(x){o.current=null;const b=document.activeElement;b&&b.getAttribute(Oo.draggableId)===x&&(o.current=x)},[]);return tn(()=>(l.current=!0,function(){l.current=!1;const x=s.current;x&&cancelAnimationFrame(x)}),[]),Oe(()=>({register:a,tryRecordFocus:p,tryRestoreFocusRecorded:h,tryShiftRecord:f}),[a,p,h,f])}function RS(){const e={draggables:{},droppables:{}},n=[];function o(g){return n.push(g),function(){const b=n.indexOf(g);b!==-1&&n.splice(b,1)}}function s(g){n.length&&n.forEach(x=>x(g))}function l(g){return e.draggables[g]||null}function a(g){const x=l(g);return x||ue(),x}const u={register:g=>{e.draggables[g.descriptor.id]=g,s({type:"ADDITION",value:g})},update:(g,x)=>{const b=e.draggables[x.descriptor.id];b&&b.uniqueId===g.uniqueId&&(delete e.draggables[x.descriptor.id],e.draggables[g.descriptor.id]=g)},unregister:g=>{const x=g.descriptor.id,b=l(x);b&&g.uniqueId===b.uniqueId&&(delete e.draggables[x],e.droppables[g.descriptor.droppableId]&&s({type:"REMOVAL",value:g}))},getById:a,findById:l,exists:g=>!!l(g),getAllByType:g=>Object.values(e.draggables).filter(x=>x.descriptor.type===g)};function f(g){return e.droppables[g]||null}function h(g){const x=f(g);return x||ue(),x}const p={register:g=>{e.droppables[g.descriptor.id]=g},unregister:g=>{const x=f(g.descriptor.id);x&&g.uniqueId===x.uniqueId&&delete e.droppables[g.descriptor.id]},getById:h,findById:f,exists:g=>!!f(g),getAllByType:g=>Object.values(e.droppables).filter(x=>x.descriptor.type===g)};function m(){e.draggables={},e.droppables={},n.length=0}return{draggable:u,droppable:p,subscribe:o,clean:m}}function TS(){const e=Oe(RS,[]);return w.useEffect(()=>function(){e.clean()},[e]),e}var Td=we.createContext(null),_a=()=>{const e=document.body;return e||ue(),e};const MS={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},OS=e=>`rfd-announcement-${e}`;function _S(e){const n=Oe(()=>OS(e),[e]),o=w.useRef(null);return w.useEffect(function(){const a=document.createElement("div");return o.current=a,a.id=n,a.setAttribute("aria-live","assertive"),a.setAttribute("aria-atomic","true"),Ra(a.style,MS),_a().appendChild(a),function(){setTimeout(function(){const h=_a();h.contains(a)&&h.removeChild(a),a===o.current&&(o.current=null)})}},[n]),Ce(l=>{const a=o.current;if(a){a.textContent=l;return}},[])}const LS={separator:"::"};function Md(e,n=LS){const o=we.useId();return Oe(()=>`${e}${n.separator}${o}`,[n.separator,e,o])}function BS({contextId:e,uniqueId:n}){return`rfd-hidden-text-${e}-${n}`}function FS({contextId:e,text:n}){const o=Md("hidden-text",{separator:"-"}),s=Oe(()=>BS({contextId:e,uniqueId:o}),[o,e]);return w.useEffect(function(){const a=document.createElement("div");return a.id=s,a.textContent=n,a.style.display="none",_a().appendChild(a),function(){const f=_a();f.contains(a)&&f.removeChild(a)}},[s,n]),s}var Xa=we.createContext(null);function ov(e){const n=w.useRef(e);return w.useEffect(()=>{n.current=e}),n}function $S(){let e=null;function n(){return!!e}function o(u){return u===e}function s(u){e&&ue();const f={abandon:u};return e=f,f}function l(){e||ue(),e=null}function a(){e&&(e.abandon(),l())}return{isClaimed:n,isActive:o,claim:s,release:l,tryAbandon:a}}function Ys(e){return e.phase==="IDLE"||e.phase==="DROP_ANIMATING"?!1:e.isDragging}const US=9,zS=13,Od=27,sv=32,VS=33,GS=34,HS=35,WS=36,qS=37,KS=38,YS=39,QS=40,JS={[zS]:!0,[US]:!0};var iv=e=>{JS[e.keyCode]&&e.preventDefault()};const Za=(()=>{const e="visibilitychange";return typeof document>"u"?e:[e,`ms${e}`,`webkit${e}`,`moz${e}`,`o${e}`].find(s=>`on${s}`in document)||e})(),av=0,pg=5;function XS(e,n){return Math.abs(n.x-e.x)>=pg||Math.abs(n.y-e.y)>=pg}const mg={type:"IDLE"};function ZS({cancel:e,completed:n,getPhase:o,setPhase:s}){return[{eventName:"mousemove",fn:l=>{const{button:a,clientX:u,clientY:f}=l;if(a!==av)return;const h={x:u,y:f},p=o();if(p.type==="DRAGGING"){l.preventDefault(),p.actions.move(h);return}p.type!=="PENDING"&&ue();const m=p.point;if(!XS(m,h))return;l.preventDefault();const g=p.actions.fluidLift(h);s({type:"DRAGGING",actions:g})}},{eventName:"mouseup",fn:l=>{const a=o();if(a.type!=="DRAGGING"){e();return}l.preventDefault(),a.actions.drop({shouldBlockNextClick:!0}),n()}},{eventName:"mousedown",fn:l=>{o().type==="DRAGGING"&&l.preventDefault(),e()}},{eventName:"keydown",fn:l=>{if(o().type==="PENDING"){e();return}if(l.keyCode===Od){l.preventDefault(),e();return}iv(l)}},{eventName:"resize",fn:e},{eventName:"scroll",options:{passive:!0,capture:!1},fn:()=>{o().type==="PENDING"&&e()}},{eventName:"webkitmouseforcedown",fn:l=>{const a=o();if(a.type==="IDLE"&&ue(),a.actions.shouldRespectForcePress()){e();return}l.preventDefault()}},{eventName:Za,fn:e}]}function e4(e){const n=w.useRef(mg),o=w.useRef(kr),s=Oe(()=>({eventName:"mousedown",fn:function(g){if(g.defaultPrevented||g.button!==av||g.ctrlKey||g.metaKey||g.shiftKey||g.altKey)return;const x=e.findClosestDraggableId(g);if(!x)return;const b=e.tryGetLock(x,u,{sourceEvent:g});if(!b)return;g.preventDefault();const C={x:g.clientX,y:g.clientY};o.current(),p(b,C)}}),[e]),l=Oe(()=>({eventName:"webkitmouseforcewillbegin",fn:m=>{if(m.defaultPrevented)return;const g=e.findClosestDraggableId(m);if(!g)return;const x=e.findOptionsForDraggable(g);x&&(x.shouldRespectForcePress||e.canGetLock(g)&&m.preventDefault())}}),[e]),a=Ce(function(){const g={passive:!1,capture:!0};o.current=fn(window,[l,s],g)},[l,s]),u=Ce(()=>{n.current.type!=="IDLE"&&(n.current=mg,o.current(),a())},[a]),f=Ce(()=>{const m=n.current;u(),m.type==="DRAGGING"&&m.actions.cancel({shouldBlockNextClick:!0}),m.type==="PENDING"&&m.actions.abort()},[u]),h=Ce(function(){const g={capture:!0,passive:!1},x=ZS({cancel:f,completed:u,getPhase:()=>n.current,setPhase:b=>{n.current=b}});o.current=fn(window,x,g)},[f,u]),p=Ce(function(g,x){n.current.type!=="IDLE"&&ue(),n.current={type:"PENDING",point:x,actions:g},h()},[h]);tn(function(){return a(),function(){o.current()}},[a])}function t4(){}const n4={[GS]:!0,[VS]:!0,[WS]:!0,[HS]:!0};function r4(e,n){function o(){n(),e.cancel()}function s(){n(),e.drop()}return[{eventName:"keydown",fn:l=>{if(l.keyCode===Od){l.preventDefault(),o();return}if(l.keyCode===sv){l.preventDefault(),s();return}if(l.keyCode===QS){l.preventDefault(),e.moveDown();return}if(l.keyCode===KS){l.preventDefault(),e.moveUp();return}if(l.keyCode===YS){l.preventDefault(),e.moveRight();return}if(l.keyCode===qS){l.preventDefault(),e.moveLeft();return}if(n4[l.keyCode]){l.preventDefault();return}iv(l)}},{eventName:"mousedown",fn:o},{eventName:"mouseup",fn:o},{eventName:"click",fn:o},{eventName:"touchstart",fn:o},{eventName:"resize",fn:o},{eventName:"wheel",fn:o,options:{passive:!0}},{eventName:Za,fn:o}]}function o4(e){const n=w.useRef(t4),o=Oe(()=>({eventName:"keydown",fn:function(a){if(a.defaultPrevented||a.keyCode!==sv)return;const u=e.findClosestDraggableId(a);if(!u)return;const f=e.tryGetLock(u,m,{sourceEvent:a});if(!f)return;a.preventDefault();let h=!0;const p=f.snapLift();n.current();function m(){h||ue(),h=!1,n.current(),s()}n.current=fn(window,r4(p,m),{capture:!0,passive:!1})}}),[e]),s=Ce(function(){const a={passive:!1,capture:!0};n.current=fn(window,[o],a)},[o]);tn(function(){return s(),function(){n.current()}},[s])}const Eu={type:"IDLE"},s4=120,i4=.15;function a4({cancel:e,getPhase:n}){return[{eventName:"orientationchange",fn:e},{eventName:"resize",fn:e},{eventName:"contextmenu",fn:o=>{o.preventDefault()}},{eventName:"keydown",fn:o=>{if(n().type!=="DRAGGING"){e();return}o.keyCode===Od&&o.preventDefault(),e()}},{eventName:Za,fn:e}]}function l4({cancel:e,completed:n,getPhase:o}){return[{eventName:"touchmove",options:{capture:!1},fn:s=>{const l=o();if(l.type!=="DRAGGING"){e();return}l.hasMoved=!0;const{clientX:a,clientY:u}=s.touches[0],f={x:a,y:u};s.preventDefault(),l.actions.move(f)}},{eventName:"touchend",fn:s=>{const l=o();if(l.type!=="DRAGGING"){e();return}s.preventDefault(),l.actions.drop({shouldBlockNextClick:!0}),n()}},{eventName:"touchcancel",fn:s=>{if(o().type!=="DRAGGING"){e();return}s.preventDefault(),e()}},{eventName:"touchforcechange",fn:s=>{const l=o();l.type==="IDLE"&&ue();const a=s.touches[0];if(!a||!(a.force>=i4))return;const f=l.actions.shouldRespectForcePress();if(l.type==="PENDING"){f&&e();return}if(f){if(l.hasMoved){s.preventDefault();return}e();return}s.preventDefault()}},{eventName:Za,fn:e}]}function c4(e){const n=w.useRef(Eu),o=w.useRef(kr),s=Ce(function(){return n.current},[]),l=Ce(function(b){n.current=b},[]),a=Oe(()=>({eventName:"touchstart",fn:function(b){if(b.defaultPrevented)return;const C=e.findClosestDraggableId(b);if(!C)return;const E=e.tryGetLock(C,f,{sourceEvent:b});if(!E)return;const S=b.touches[0],{clientX:j,clientY:R}=S,A={x:j,y:R};o.current(),g(E,A)}}),[e]),u=Ce(function(){const b={capture:!0,passive:!1};o.current=fn(window,[a],b)},[a]),f=Ce(()=>{const x=n.current;x.type!=="IDLE"&&(x.type==="PENDING"&&clearTimeout(x.longPressTimerId),l(Eu),o.current(),u())},[u,l]),h=Ce(()=>{const x=n.current;f(),x.type==="DRAGGING"&&x.actions.cancel({shouldBlockNextClick:!0}),x.type==="PENDING"&&x.actions.abort()},[f]),p=Ce(function(){const b={capture:!0,passive:!1},C={cancel:h,completed:f,getPhase:s},E=fn(window,l4(C),b),S=fn(window,a4(C),b);o.current=function(){E(),S()}},[h,s,f]),m=Ce(function(){const b=s();b.type!=="PENDING"&&ue();const C=b.actions.fluidLift(b.point);l({type:"DRAGGING",actions:C,hasMoved:!1})},[s,l]),g=Ce(function(b,C){s().type!=="IDLE"&&ue();const E=setTimeout(m,s4);l({type:"PENDING",point:C,actions:b,longPressTimerId:E}),p()},[p,s,l,m]);tn(function(){return u(),function(){o.current();const C=s();C.type==="PENDING"&&(clearTimeout(C.longPressTimerId),l(Eu))}},[s,u,l]),tn(function(){return fn(window,[{eventName:"touchmove",fn:()=>{},options:{capture:!1,passive:!1}}])},[])}const u4=["input","button","textarea","select","option","optgroup","video","audio"];function lv(e,n){if(n==null)return!1;if(u4.includes(n.tagName.toLowerCase()))return!0;const s=n.getAttribute("contenteditable");return s==="true"||s===""?!0:n===e?!1:lv(e,n.parentElement)}function d4(e,n){const o=n.target;return Ja(o)?lv(e,o):!1}var f4=e=>En(e.getBoundingClientRect()).center;function h4(e){return e instanceof rv(e).Element}const p4=(()=>{const e="matches";return typeof document>"u"?e:[e,"msMatchesSelector","webkitMatchesSelector"].find(s=>s in Element.prototype)||e})();function cv(e,n){return e==null?null:e[p4](n)?e:cv(e.parentElement,n)}function m4(e,n){return e.closest?e.closest(n):cv(e,n)}function g4(e){return`[${Oo.contextId}="${e}"]`}function v4(e,n){const o=n.target;if(!h4(o))return null;const s=g4(e),l=m4(o,s);return!l||!Ja(l)?null:l}function x4(e,n){const o=v4(e,n);return o?o.getAttribute(Oo.draggableId):null}function y4(e,n){const o=`[${Ku.contextId}="${e}"]`,l=nv(document,o).find(a=>a.getAttribute(Ku.id)===n);return!l||!Ja(l)?null:l}function b4(e){e.preventDefault()}function xa({expected:e,phase:n,isLockActive:o,shouldWarn:s}){return!(!o()||e!==n)}function uv({lockAPI:e,store:n,registry:o,draggableId:s}){if(e.isClaimed())return!1;const l=o.draggable.findById(s);return!(!l||!l.options.isEnabled||!X0(n.getState(),s))}function w4({lockAPI:e,contextId:n,store:o,registry:s,draggableId:l,forceSensorStop:a,sourceEvent:u}){if(!uv({lockAPI:e,store:o,registry:s,draggableId:l}))return null;const h=s.draggable.getById(l),p=y4(n,h.descriptor.id);if(!p||u&&!h.options.canDragInteractiveElements&&d4(p,u))return null;const m=e.claim(a||kr);let g="PRE_DRAG";function x(){return h.options.shouldRespectForcePress}function b(){return e.isActive(m)}function C(I,T){xa({expected:I,phase:g,isLockActive:b,shouldWarn:!0})&&o.dispatch(T())}const E=C.bind(null,"DRAGGING");function S(I){function T(){e.release(),g="COMPLETED"}g!=="PRE_DRAG"&&(T(),ue()),o.dispatch(mC(I.liftActionArgs)),g="DRAGGING";function M(_,K={shouldBlockNextClick:!1}){if(I.cleanup(),K.shouldBlockNextClick){const J=fn(window,[{eventName:"click",fn:b4,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(J)}T(),o.dispatch(G0({reason:_}))}return{isActive:()=>xa({expected:"DRAGGING",phase:g,isLockActive:b,shouldWarn:!1}),shouldRespectForcePress:x,drop:_=>M("DROP",_),cancel:_=>M("CANCEL",_),...I.actions}}function j(I){const T=Vs(_=>{E(()=>V0({client:_}))});return{...S({liftActionArgs:{id:l,clientSelection:I,movementMode:"FLUID"},cleanup:()=>T.cancel(),actions:{move:T}}),move:T}}function R(){const I={moveUp:()=>E(SC),moveRight:()=>E(DC),moveDown:()=>E(EC),moveLeft:()=>E(jC)};return S({liftActionArgs:{id:l,clientSelection:f4(p),movementMode:"SNAP"},cleanup:kr,actions:I})}function A(){xa({expected:"PRE_DRAG",phase:g,isLockActive:b,shouldWarn:!0})&&e.release()}return{isActive:()=>xa({expected:"PRE_DRAG",phase:g,isLockActive:b,shouldWarn:!1}),shouldRespectForcePress:x,fluidLift:j,snapLift:R,abort:A}}const N4=[e4,o4,c4];function C4({contextId:e,store:n,registry:o,customSensors:s,enableDefaultSensors:l}){const a=[...l?N4:[],...s||[]],u=w.useState(()=>$S())[0],f=Ce(function(S,j){Ys(S)&&!Ys(j)&&u.tryAbandon()},[u]);tn(function(){let S=n.getState();return n.subscribe(()=>{const R=n.getState();f(S,R),S=R})},[u,n,f]),tn(()=>u.tryAbandon,[u.tryAbandon]);const h=Ce(E=>uv({lockAPI:u,registry:o,store:n,draggableId:E}),[u,o,n]),p=Ce((E,S,j)=>w4({lockAPI:u,registry:o,contextId:e,store:n,draggableId:E,forceSensorStop:S||null,sourceEvent:j&&j.sourceEvent?j.sourceEvent:null}),[e,u,o,n]),m=Ce(E=>x4(e,E),[e]),g=Ce(E=>{const S=o.draggable.findById(E);return S?S.options:null},[o.draggable]),x=Ce(function(){u.isClaimed()&&(u.tryAbandon(),n.getState().phase!=="IDLE"&&n.dispatch(Dd()))},[u,n]),b=Ce(()=>u.isClaimed(),[u]),C=Oe(()=>({canGetLock:h,tryGetLock:p,findClosestDraggableId:m,findOptionsForDraggable:g,tryReleaseLock:x,isLockClaimed:b}),[h,p,m,g,x,b]);for(let E=0;E<a.length;E++)a[E](C)}const S4=e=>({onBeforeCapture:n=>{const o=()=>{e.onBeforeCapture&&e.onBeforeCapture(n)};tr.flushSync(o)},onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragEnd:e.onDragEnd,onDragUpdate:e.onDragUpdate}),E4=e=>({...Ks,...e.autoScrollerOptions,durationDampening:{...Ks.durationDampening,...e.autoScrollerOptions}});function Rs(e){return e.current||ue(),e.current}function D4(e){const{contextId:n,setCallbacks:o,sensors:s,nonce:l,dragHandleUsageInstructions:a}=e,u=w.useRef(null),f=ov(e),h=Ce(()=>S4(f.current),[f]),p=Ce(()=>E4(f.current),[f]),m=_S(n),g=FS({contextId:n,text:a}),x=AS(n,l),b=Ce(J=>{Rs(u).dispatch(J)},[]),C=Oe(()=>Um({publishWhileDragging:vC,updateDroppableScroll:yC,updateDroppableIsEnabled:bC,updateDroppableIsCombineEnabled:wC,collectionStarting:xC},b),[b]),E=TS(),S=Oe(()=>aS(E,C),[E,C]),j=Oe(()=>SS({scrollWindow:lS,scrollDroppable:S.scrollDroppable,getAutoScrollerOptions:p,...Um({move:V0},b)}),[S.scrollDroppable,b,p]),R=PS(n),A=Oe(()=>rS({announce:m,autoScroller:j,dimensionMarshal:S,focusMarshal:R,getResponders:h,styleMarshal:x}),[m,j,S,R,h,x]);u.current=A;const D=Ce(()=>{const J=Rs(u);J.getState().phase!=="IDLE"&&J.dispatch(Dd())},[]),I=Ce(()=>{const J=Rs(u).getState();return J.phase==="DROP_ANIMATING"?!0:J.phase==="IDLE"?!1:J.isDragging},[]),T=Oe(()=>({isDragging:I,tryAbort:D}),[I,D]);o(T);const M=Ce(J=>X0(Rs(u).getState(),J),[]),_=Ce(()=>Zr(Rs(u).getState()),[]),K=Oe(()=>({marshal:S,focus:R,contextId:n,canLift:M,isMovementAllowed:_,dragHandleUsageInstructionsId:g,registry:E}),[n,S,g,R,M,_,E]);return C4({contextId:n,store:A,registry:E,customSensors:s||null,enableDefaultSensors:e.enableDefaultSensors!==!1}),w.useEffect(()=>D,[D]),we.createElement(Xa.Provider,{value:K},we.createElement(JN,{context:Td,store:A},e.children))}function j4(){return we.useId()}function dv(e){const n=j4(),o=e.dragHandleUsageInstructions||wa.dragHandleUsageInstructions;return we.createElement(o2,null,s=>we.createElement(D4,{nonce:e.nonce,contextId:n,setCallbacks:s,dragHandleUsageInstructions:o,enableDefaultSensors:e.enableDefaultSensors,sensors:e.sensors,onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragUpdate:e.onDragUpdate,onDragEnd:e.onDragEnd,autoScrollerOptions:e.autoScrollerOptions},e.children))}const gg={dragging:5e3,dropAnimating:4500},k4=(e,n)=>n?Os.drop(n.duration):e?Os.snap:Os.fluid,A4=(e,n)=>{if(e)return n?qs.opacity.drop:qs.opacity.combining},I4=e=>e.forceShouldAnimate!=null?e.forceShouldAnimate:e.mode==="SNAP";function P4(e){const o=e.dimension.client,{offset:s,combineWith:l,dropping:a}=e,u=!!l,f=I4(e),h=!!a,p=h?Wu.drop(s,u):Wu.moveTo(s);return{position:"fixed",top:o.marginBox.top,left:o.marginBox.left,boxSizing:"border-box",width:o.borderBox.width,height:o.borderBox.height,transition:k4(f,a),transform:p,opacity:A4(u,h),zIndex:h?gg.dropAnimating:gg.dragging,pointerEvents:"none"}}function R4(e){return{transform:Wu.moveTo(e.offset),transition:e.shouldAnimateDisplacement?void 0:"none"}}function T4(e){return e.type==="DRAGGING"?P4(e):R4(e)}function M4(e,n,o=gt){const s=window.getComputedStyle(n),l=n.getBoundingClientRect(),a=v0(l,s),u=Pa(a,o),f={client:a,tagName:n.tagName.toLowerCase(),display:s.display},h={x:a.marginBox.width,y:a.marginBox.height};return{descriptor:e,placeholder:f,displaceBy:h,client:a,page:u}}function O4(e){const n=Md("draggable"),{descriptor:o,registry:s,getDraggableRef:l,canDragInteractiveElements:a,shouldRespectForcePress:u,isEnabled:f}=e,h=Oe(()=>({canDragInteractiveElements:a,shouldRespectForcePress:u,isEnabled:f}),[a,f,u]),p=Ce(b=>{const C=l();return C||ue(),M4(o,C,b)},[o,l]),m=Oe(()=>({uniqueId:n,descriptor:o,options:h,getDimension:p}),[o,p,h,n]),g=w.useRef(m),x=w.useRef(!0);tn(()=>(s.draggable.register(g.current),()=>s.draggable.unregister(g.current)),[s.draggable]),tn(()=>{if(x.current){x.current=!1;return}const b=g.current;g.current=m,s.draggable.update(m,b)},[m,s.draggable])}var _d=we.createContext(null);function La(e){const n=w.useContext(e);return n||ue(),n}function _4(e){e.preventDefault()}const L4=e=>{const n=w.useRef(null),o=Ce((T=null)=>{n.current=T},[]),s=Ce(()=>n.current,[]),{contextId:l,dragHandleUsageInstructionsId:a,registry:u}=La(Xa),{type:f,droppableId:h}=La(_d),p=Oe(()=>({id:e.draggableId,index:e.index,type:f,droppableId:h}),[e.draggableId,e.index,f,h]),{children:m,draggableId:g,isEnabled:x,shouldRespectForcePress:b,canDragInteractiveElements:C,isClone:E,mapped:S,dropAnimationFinished:j}=e;if(!E){const T=Oe(()=>({descriptor:p,registry:u,getDraggableRef:s,canDragInteractiveElements:C,shouldRespectForcePress:b,isEnabled:x}),[p,u,s,C,b,x]);O4(T)}const R=Oe(()=>x?{tabIndex:0,role:"button","aria-describedby":a,"data-rfd-drag-handle-draggable-id":g,"data-rfd-drag-handle-context-id":l,draggable:!1,onDragStart:_4}:null,[l,a,g,x]),A=Ce(T=>{S.type==="DRAGGING"&&S.dropping&&T.propertyName==="transform"&&tr.flushSync(j)},[j,S]),D=Oe(()=>{const T=T4(S),M=S.type==="DRAGGING"&&S.dropping?A:void 0;return{innerRef:o,draggableProps:{"data-rfd-draggable-context-id":l,"data-rfd-draggable-id":g,style:T,onTransitionEnd:M},dragHandleProps:R}},[l,R,g,S,A,o]),I=Oe(()=>({draggableId:p.id,type:p.type,source:{index:p.index,droppableId:p.droppableId}}),[p.droppableId,p.id,p.index,p.type]);return we.createElement(we.Fragment,null,m(D,S.snapshot,I))};var fv=(e,n)=>e===n,hv=e=>{const{combine:n,destination:o}=e;return o?o.droppableId:n?n.droppableId:null};const B4=e=>e.combine?e.combine.draggableId:null,F4=e=>e.at&&e.at.type==="COMBINE"?e.at.combine.draggableId:null;function $4(){const e=mt((l,a)=>({x:l,y:a})),n=mt((l,a,u=null,f=null,h=null)=>({isDragging:!0,isClone:a,isDropAnimating:!!h,dropAnimation:h,mode:l,draggingOver:u,combineWith:f,combineTargetFor:null})),o=mt((l,a,u,f,h=null,p=null,m=null)=>({mapped:{type:"DRAGGING",dropping:null,draggingOver:h,combineWith:p,mode:a,offset:l,dimension:u,forceShouldAnimate:m,snapshot:n(a,f,h,p,null)}}));return(l,a)=>{if(Ys(l)){if(l.critical.draggable.id!==a.draggableId)return null;const u=l.current.client.offset,f=l.dimensions.draggables[a.draggableId],h=en(l.impact),p=F4(l.impact),m=l.forceShouldAnimate;return o(e(u.x,u.y),l.movementMode,f,a.isClone,h,p,m)}if(l.phase==="DROP_ANIMATING"){const u=l.completed;if(u.result.draggableId!==a.draggableId)return null;const f=a.isClone,h=l.dimensions.draggables[a.draggableId],p=u.result,m=p.mode,g=hv(p),x=B4(p),C={duration:l.dropDuration,curve:kd.drop,moveTo:l.newHomeClientOffset,opacity:x?qs.opacity.drop:null,scale:x?qs.scale.drop:null};return{mapped:{type:"DRAGGING",offset:l.newHomeClientOffset,dimension:h,dropping:C,draggingOver:g,combineWith:x,mode:m,forceShouldAnimate:null,snapshot:n(m,f,g,x,C)}}}return null}}function pv(e=null){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:e,combineWith:null}}const U4={mapped:{type:"SECONDARY",offset:gt,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:pv(null)}};function z4(){const e=mt((u,f)=>({x:u,y:f})),n=mt(pv),o=mt((u,f=null,h)=>({mapped:{type:"SECONDARY",offset:u,combineTargetFor:f,shouldAnimateDisplacement:h,snapshot:n(f)}})),s=u=>u?o(gt,u,!0):null,l=(u,f,h,p)=>{const m=h.displaced.visible[u],g=!!(p.inVirtualList&&p.effected[u]),x=Ka(h),b=x&&x.draggableId===u?f:null;if(!m){if(!g)return s(b);if(h.displaced.invisible[u])return null;const S=_o(p.displacedBy.point),j=e(S.x,S.y);return o(j,b,!0)}if(g)return s(b);const C=h.displacedBy.point,E=e(C.x,C.y);return o(E,b,m.shouldAnimate)};return(u,f)=>{if(Ys(u))return u.critical.draggable.id===f.draggableId?null:l(f.draggableId,u.critical.draggable.id,u.impact,u.afterCritical);if(u.phase==="DROP_ANIMATING"){const h=u.completed;return h.result.draggableId===f.draggableId?null:l(f.draggableId,h.result.draggableId,h.impact,h.afterCritical)}return null}}const V4=()=>{const e=$4(),n=z4();return(s,l)=>e(s,l)||n(s,l)||U4},G4={dropAnimationFinished:H0},H4=g0(V4,G4,null,{context:Td,areStatePropsEqual:fv})(L4);function mv(e){return La(_d).isUsingCloneFor===e.draggableId&&!e.isClone?null:we.createElement(H4,e)}function gv(e){const n=typeof e.isDragDisabled=="boolean"?!e.isDragDisabled:!0,o=!!e.disableInteractiveElementBlocking,s=!!e.shouldRespectForcePress;return we.createElement(mv,Ra({},e,{isClone:!1,isEnabled:n,canDragInteractiveElements:o,shouldRespectForcePress:s}))}const vv=e=>n=>e===n,W4=vv("scroll"),q4=vv("auto"),vg=(e,n)=>n(e.overflowX)||n(e.overflowY),K4=e=>{const n=window.getComputedStyle(e),o={overflowX:n.overflowX,overflowY:n.overflowY};return vg(o,W4)||vg(o,q4)},Y4=()=>!1,xv=e=>e==null?null:e===document.body?Y4()?e:null:e===document.documentElement?null:K4(e)?e:xv(e.parentElement);var Yu=e=>({x:e.scrollLeft,y:e.scrollTop});const yv=e=>e?window.getComputedStyle(e).position==="fixed"?!0:yv(e.parentElement):!1;var Q4=e=>{const n=xv(e),o=yv(e);return{closestScrollable:n,isFixedOnPage:o}},J4=({descriptor:e,isEnabled:n,isCombineEnabled:o,isFixedOnPage:s,direction:l,client:a,page:u,closest:f})=>{const h=(()=>{if(!f)return null;const{scrollSize:x,client:b}=f,C=Y0({scrollHeight:x.scrollHeight,scrollWidth:x.scrollWidth,height:b.paddingBox.height,width:b.paddingBox.width});return{pageMarginBox:f.page.marginBox,frameClient:b,scrollSize:x,shouldClipSubject:f.shouldClipSubject,scroll:{initial:f.scroll,current:f.scroll,max:C,diff:{value:gt,displacement:gt}}}})(),p=l==="vertical"?wd:k0,m=To({page:u,withPlaceholder:null,axis:p,frame:h});return{descriptor:e,isCombineEnabled:o,isFixedOnPage:s,axis:p,isEnabled:n,client:a,page:u,frame:h,subject:m}};const X4=(e,n)=>{const o=x0(e);if(!n||e!==n)return o;const s=o.paddingBox.top-n.scrollTop,l=o.paddingBox.left-n.scrollLeft,a=s+n.scrollHeight,u=l+n.scrollWidth,h=vd({top:s,right:u,bottom:a,left:l},o.border);return xd({borderBox:h,margin:o.margin,border:o.border,padding:o.padding})};var Z4=({ref:e,descriptor:n,env:o,windowScroll:s,direction:l,isDropDisabled:a,isCombineEnabled:u,shouldClipSubject:f})=>{const h=o.closestScrollable,p=X4(e,h),m=Pa(p,s),g=(()=>{if(!h)return null;const b=x0(h),C={scrollHeight:h.scrollHeight,scrollWidth:h.scrollWidth};return{client:b,page:Pa(b,s),scroll:Yu(h),scrollSize:C,shouldClipSubject:f}})();return J4({descriptor:n,isEnabled:!a,isCombineEnabled:u,isFixedOnPage:o.isFixedOnPage,direction:l,client:p,page:m,closest:g})};const e5={passive:!1},t5={passive:!0};var xg=e=>e.shouldPublishImmediately?e5:t5;const ya=e=>e&&e.env.closestScrollable||null;function n5(e){const n=w.useRef(null),o=La(Xa),s=Md("droppable"),{registry:l,marshal:a}=o,u=ov(e),f=Oe(()=>({id:e.droppableId,type:e.type,mode:e.mode}),[e.droppableId,e.mode,e.type]),h=w.useRef(f),p=Oe(()=>mt((D,I)=>{n.current||ue();const T={x:D,y:I};a.updateDroppableScroll(f.id,T)}),[f.id,a]),m=Ce(()=>{const D=n.current;return!D||!D.env.closestScrollable?gt:Yu(D.env.closestScrollable)},[]),g=Ce(()=>{const D=m();p(D.x,D.y)},[m,p]),x=Oe(()=>Vs(g),[g]),b=Ce(()=>{const D=n.current,I=ya(D);if(D&&I||ue(),D.scrollOptions.shouldPublishImmediately){g();return}x()},[x,g]),C=Ce((D,I)=>{n.current&&ue();const T=u.current,M=T.getDroppableRef();M||ue();const _=Q4(M),K={ref:M,descriptor:f,env:_,scrollOptions:I};n.current=K;const J=Z4({ref:M,descriptor:f,env:_,windowScroll:D,direction:T.direction,isDropDisabled:T.isDropDisabled,isCombineEnabled:T.isCombineEnabled,shouldClipSubject:!T.ignoreContainerClipping}),te=_.closestScrollable;return te&&(te.setAttribute(fg.contextId,o.contextId),te.addEventListener("scroll",b,xg(K.scrollOptions))),J},[o.contextId,f,b,u]),E=Ce(()=>{const D=n.current,I=ya(D);return D&&I||ue(),Yu(I)},[]),S=Ce(()=>{const D=n.current;D||ue();const I=ya(D);n.current=null,I&&(x.cancel(),I.removeAttribute(fg.contextId),I.removeEventListener("scroll",b,xg(D.scrollOptions)))},[b,x]),j=Ce(D=>{const I=n.current;I||ue();const T=ya(I);T||ue(),T.scrollTop+=D.y,T.scrollLeft+=D.x},[]),R=Oe(()=>({getDimensionAndWatchScroll:C,getScrollWhileDragging:E,dragStopped:S,scroll:j}),[S,C,E,j]),A=Oe(()=>({uniqueId:s,descriptor:f,callbacks:R}),[R,f,s]);tn(()=>(h.current=A.descriptor,l.droppable.register(A),()=>{n.current&&S(),l.droppable.unregister(A)}),[R,f,S,A,a,l.droppable]),tn(()=>{n.current&&a.updateDroppableIsEnabled(h.current.id,!e.isDropDisabled)},[e.isDropDisabled,a]),tn(()=>{n.current&&a.updateDroppableIsCombineEnabled(h.current.id,e.isCombineEnabled)},[e.isCombineEnabled,a])}function Du(){}const yg={width:0,height:0,margin:d2},r5=({isAnimatingOpenOnMount:e,placeholder:n,animate:o})=>e||o==="close"?yg:{height:n.client.borderBox.height,width:n.client.borderBox.width,margin:n.client.margin},o5=({isAnimatingOpenOnMount:e,placeholder:n,animate:o})=>{const s=r5({isAnimatingOpenOnMount:e,placeholder:n,animate:o});return{display:n.display,boxSizing:"border-box",width:s.width,height:s.height,marginTop:s.margin.top,marginRight:s.margin.right,marginBottom:s.margin.bottom,marginLeft:s.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:o!=="none"?Os.placeholder:null}},s5=e=>{const n=w.useRef(null),o=Ce(()=>{n.current&&(clearTimeout(n.current),n.current=null)},[]),{animate:s,onTransitionEnd:l,onClose:a,contextId:u}=e,[f,h]=w.useState(e.animate==="open");w.useEffect(()=>f?s!=="open"?(o(),h(!1),Du):n.current?Du:(n.current=setTimeout(()=>{n.current=null,h(!1)}),o):Du,[s,f,o]);const p=Ce(g=>{g.propertyName==="height"&&(l(),s==="close"&&a())},[s,a,l]),m=o5({isAnimatingOpenOnMount:f,animate:e.animate,placeholder:e.placeholder});return we.createElement(e.placeholder.tagName,{style:m,"data-rfd-placeholder-context-id":u,onTransitionEnd:p,ref:e.innerRef})};var i5=we.memo(s5);class a5 extends we.PureComponent{constructor(...n){super(...n),this.state={isVisible:!!this.props.on,data:this.props.on,animate:this.props.shouldAnimate&&this.props.on?"open":"none"},this.onClose=()=>{this.state.animate==="close"&&this.setState({isVisible:!1})}}static getDerivedStateFromProps(n,o){return n.shouldAnimate?n.on?{isVisible:!0,data:n.on,animate:"open"}:o.isVisible?{isVisible:!0,data:o.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!n.on,data:n.on,animate:"none"}}render(){if(!this.state.isVisible)return null;const n={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(n)}}const l5=e=>{const n=w.useContext(Xa);n||ue();const{contextId:o,isMovementAllowed:s}=n,l=w.useRef(null),a=w.useRef(null),{children:u,droppableId:f,type:h,mode:p,direction:m,ignoreContainerClipping:g,isDropDisabled:x,isCombineEnabled:b,snapshot:C,useClone:E,updateViewportMaxScroll:S,getContainerForClone:j}=e,R=Ce(()=>l.current,[]),A=Ce((te=null)=>{l.current=te},[]);Ce(()=>a.current,[]);const D=Ce((te=null)=>{a.current=te},[]),I=Ce(()=>{s()&&S({maxScroll:J0()})},[s,S]);n5({droppableId:f,type:h,mode:p,direction:m,isDropDisabled:x,isCombineEnabled:b,ignoreContainerClipping:g,getDroppableRef:R});const T=Oe(()=>we.createElement(a5,{on:e.placeholder,shouldAnimate:e.shouldAnimatePlaceholder},({onClose:te,data:L,animate:$})=>we.createElement(i5,{placeholder:L,onClose:te,innerRef:D,animate:$,contextId:o,onTransitionEnd:I})),[o,I,e.placeholder,e.shouldAnimatePlaceholder,D]),M=Oe(()=>({innerRef:A,placeholder:T,droppableProps:{"data-rfd-droppable-id":f,"data-rfd-droppable-context-id":o}}),[o,f,T,A]),_=E?E.dragging.draggableId:null,K=Oe(()=>({droppableId:f,type:h,isUsingCloneFor:_}),[f,_,h]);function J(){if(!E)return null;const{dragging:te,render:L}=E,$=we.createElement(mv,{draggableId:te.draggableId,index:te.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},(G,X)=>L(G,X,te));return H1.createPortal($,j())}return we.createElement(_d.Provider,{value:K},u(M,C),J())};function c5(){return document.body||ue(),document.body}const bg={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:c5},bv=e=>{let n={...e},o;for(o in bg)e[o]===void 0&&(n={...n,[o]:bg[o]});return n},ju=(e,n)=>e===n.droppable.type,wg=(e,n)=>n.draggables[e.draggable.id],u5=()=>{const e={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},n={...e,shouldAnimatePlaceholder:!1},o=mt(a=>({draggableId:a.id,type:a.type,source:{index:a.index,droppableId:a.droppableId}})),s=mt((a,u,f,h,p,m)=>{const g=p.descriptor.id;if(p.descriptor.droppableId===a){const C=m?{render:m,dragging:o(p.descriptor)}:null,E={isDraggingOver:f,draggingOverWith:f?g:null,draggingFromThisWith:g,isUsingPlaceholder:!0};return{placeholder:p.placeholder,shouldAnimatePlaceholder:!1,snapshot:E,useClone:C}}if(!u)return n;if(!h)return e;const b={isDraggingOver:f,draggingOverWith:g,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:p.placeholder,shouldAnimatePlaceholder:!0,snapshot:b,useClone:null}});return(a,u)=>{const f=bv(u),h=f.droppableId,p=f.type,m=!f.isDropDisabled,g=f.renderClone;if(Ys(a)){const x=a.critical;if(!ju(p,x))return n;const b=wg(x,a.dimensions),C=en(a.impact)===h;return s(h,m,C,C,b,g)}if(a.phase==="DROP_ANIMATING"){const x=a.completed;if(!ju(p,x.critical))return n;const b=wg(x.critical,a.dimensions);return s(h,m,hv(x.result)===h,en(x.impact)===h,b,g)}if(a.phase==="IDLE"&&a.completed&&!a.shouldFlush){const x=a.completed;if(!ju(p,x.critical))return n;const b=en(x.impact)===h,C=!!(x.impact.at&&x.impact.at.type==="COMBINE"),E=x.critical.droppable.id===h;return b?C?e:n:E?e:n}return n}},d5={updateViewportMaxScroll:CC},wv=g0(u5,d5,(e,n,o)=>({...bv(o),...e,...n}),{context:Td,areStatePropsEqual:fv})(l5),Jt=e=>e.split(",").map(n=>n.trim()),er=e=>e.join(", "),Na=e=>e.trim()?/^[a-gA-G](##|#|bb|b)?(\d+)?$/.test(e.trim()):!0,Ng=e=>{if(!e.trim())return e;const n=e.trim();if(!Na(n))return n;const o=n.match(/^([a-gA-G])(##|#|bb|b)?(\d*)$/);if(o){const[,s,l="",a]=o;return s.toUpperCase()+l.toLowerCase()+a}return n},f5=e=>{const n={C:0,"C#":1,Db:1,D:2,"D#":3,Eb:3,E:4,"E#":5,Fb:4,F:5,"F#":6,Gb:6,G:7,"G#":8,Ab:8,A:9,"A#":10,Bb:10,B:11,"B#":0,Cb:11},o=e.match(/^([A-Ga-g])(##|#|bb|b)?/);if(!o)return null;const[,s,l=""]=o,a=s.toUpperCase()+l.toLowerCase();return n[a]??null},Cg=e=>Jt(e).map(o=>f5(o)).filter(o=>o!==null),h5=(e,n)=>{const o=new Set(e),s=new Set(n);let l=0;for(const a of o)s.has(a)&&l++;return l},p5=({chords:e,onUpdateChord:n,onFetchOriginalChord:o,onChordClick:s})=>{const[l,a]=w.useState(null),[u,f]=w.useState(null),[h,p]=w.useState(""),[m,g]=w.useState(""),[x,b]=w.useState(""),C=async L=>{const $=L.name.replace(/\/[A-G](##|#|bb|b)?\d*/,"");console.log("Looking for base chord:",$);const G=await Dr.getAllDistinctChords();if(G){const X=G.filter(ee=>ee.chordName===$);if(X.length===0)console.log("No matches found in library for:",$);else{console.log(`Found ${X.length} chord(s) with name "${$}", comparing notes to find best match...`);const ee=Cg(L.originalNotes||L.notes);console.log("Current chord note numbers:",ee,"from:",L.originalNotes||L.notes);let se=X[0],q=0;for(const Q of X)if(Q.chordNoteNames){const Y=Cg(Q.chordNoteNames),k=h5(ee,Y);console.log(`  - Candidate notes: ${Q.chordNoteNames} (note numbers: ${Y}) - ${k} shared notes`),k>q&&(q=k,se=Q)}if(se?.chordNoteNames&&q>0)return console.log(`✓ Best match selected (${q} shared notes):`,se.chordNoteNames),se.chordNoteNames;console.warn(`✗ No good match found (max shared notes: ${q})`)}}if(L.originalKey&&L.originalMode&&o)try{console.log("Fetching base chord",$,"from API");const X=await o($,L.originalKey,L.originalMode);if(X)return console.log("Fetched base chord from API:",X),X}catch(X){console.warn("Failed to fetch base chord from API:",X)}return console.warn("Could not find base chord definition for:",$),null},E=async()=>{if(p(""),b(""),!!u)try{const L=await C(u);if(L)if(Jt(L).every(ee=>/^[A-Ga-g]/.test(ee.trim())&&Na(ee.trim()))){console.log("Reverting to base chord notes:",L),f({...u,notes:L});return}else console.warn("Base chord notes are in invalid format:",L);const $=Jt(u.notes);if($.length>1){const G=$[0],X=h.replace(/\d+/,"");if(G.replace(/\d+/,"")===X){const se=$.slice(1),q=er(se);console.log("Removing slash note manually, result:",q),f({...u,notes:q});return}}console.warn("Could not revert slash note - no base chord found and no obvious slash note to remove")}catch(L){console.error("Error removing slash note:",L)}},S=L=>{if(!h.trim()||!m)return!1;const $=L.replace(/\d+/,""),G=h.trim().replace(/\d+/,"");return $===G?!Jt(m).some(se=>se.replace(/\d+/,"")===G):!1},j=async(L,$)=>{a(L),f({...$});try{const X=await C($);g(X||$.notes)}catch(X){console.warn("Failed to load original chord, using current notes:",X),g($.originalNotes||$.notes)}const G=$.name.match(/\/([A-G](##|#|bb|b)?\d*)/);p(G?G[1]:"")},R=()=>{if(l!==null&&u&&n){if(x)return;let L=u.name.replace(/\/[A-G](##|#|bb|b)?\d*/,""),$=u.notes;if(h.trim()){L+=`/${h.trim()}`;const X=Jt($),ee=h.trim();if(X.some(q=>{const Q=q.replace(/\d+/,""),Y=ee.replace(/\d+/,"");return Q===Y})){const q=X.filter(Y=>{const k=Y.replace(/\d+/,""),U=ee.replace(/\d+/,"");return k!==U}),Q=[ee,...q];$=er(Q)}else{const q=[ee,...X];$=er(q)}}const G={...u,name:L,notes:$,originalNotes:u.originalNotes||m};n(l,G)}A()},A=()=>{a(null),f(null),p(""),g(""),b("")},D=async L=>{if(!u||L===0)return;const $=Jt(u.notes);L===1&&S($[0])||([$[L],$[L-1]]=[$[L-1],$[L]],f({...u,notes:er($)}),await M($))},I=async L=>{if(!u)return;const $=Jt(u.notes);L!==$.length-1&&(L===0&&S($[0])||([$[L],$[L+1]]=[$[L+1],$[L]],f({...u,notes:er($)}),await M($)))},T=async L=>{if(u)try{const G=await C(u)||u.originalNotes||m;if(!G)return;if(!L.trim()){f({...u,notes:G});return}const X=Jt(G),ee=L.trim(),se=X.some(Q=>{const Y=Q.replace(/\d+/,""),k=ee.replace(/\d+/,"");return Y===k});let q;if(se){const Q=X.filter(k=>{const U=k.replace(/\d+/,""),ae=ee.replace(/\d+/,"");return U!==ae}),Y=X.find(k=>{const U=k.replace(/\d+/,""),ae=ee.replace(/\d+/,"");return U===ae});q=Y?[Y,...Q]:[ee,...Q]}else q=[ee,...X];f({...u,notes:er(q)})}catch($){console.warn("Failed to update chord with slash note:",$);const G=u.originalNotes||m;if(!G)return;if(!L.trim()){f({...u,notes:G});return}const X=Jt(G),se=[L.trim(),...X];f({...u,notes:er(se)})}},M=async L=>{if(!(!u||L.length===0))try{const G=await C(u)||u.originalNotes||m;if(!G)return;const X=Jt(G),ee=L[0],se=X[0];p(ee!==se?ee:"")}catch($){console.warn("Failed to detect slash note from order:",$);const G=u.originalNotes||m;if(!G)return;const X=Jt(G),ee=L[0],se=X[0];p(ee!==se?ee:"")}};return{editingChordIndex:l,editingChord:u,slashNote:h,originalChordNotes:m,slashNoteError:x,handleEditChord:j,handleSaveEdit:R,handleCancelEdit:A,moveNoteUp:D,moveNoteDown:I,removeSlashNote:E,handleSlashNoteChange:async L=>{const $=L.trim();if(!$){b(""),p(""),await T("");return}if(!Na($)){b("Invalid note. Use A-G with optional # or b (e.g., C, F#, Bb, D4)"),p(L);return}b("");const G=Ng($);p(G),await T(G)},handleDragEnd:async L=>{if(!L.destination||!u||L.source.index===L.destination.index)return;const $=Jt(u.notes);if(L.source.index===0&&S($[0])||L.destination.index===0&&S($[0]))return;const[G]=$.splice(L.source.index,1);$.splice(L.destination.index,0,G),f({...u,notes:er($)}),await M($)},handlePreviewChord:()=>{u&&s(u.notes,-1)},isSlashNote:L=>{if(!h.trim())return!1;const $=L.replace(/\d+/,""),G=h.trim().replace(/\d+/,"");return $===G},isManualSlashNote:S,parseNotes:Jt,notesToString:er,formatNoteName:Ng,isValidNoteName:Na}},m5=4,g5=8,v5=({activeMidiNotes:e})=>{const n=we.useRef(null),[o,s]=we.useState(400),l=we.useMemo(()=>o<400?Math.max(300,o-20):o<768?Math.min(500,o-40):Math.min(600,o-60),[o]);we.useEffect(()=>{const p=()=>{n.current&&s(n.current.offsetWidth)};p();const m=new ResizeObserver(()=>{p()});return n.current&&m.observe(n.current),()=>{m.disconnect()}},[]),we.useEffect(()=>{const p=document.createElement("style");return p.textContent=`
            /* Disable all pointer events on piano keys to prevent hover/click interference */
            .ReactPiano__Key {
                pointer-events: none !important;
            }
            
            /* Ultra-specific CSS to override react-piano styles */
            div[class*="ReactPiano"] .ReactPiano__Key--active,
            div[class*="ReactPiano"] .ReactPiano__Key--active.ReactPiano__Key--natural,
            div[class*="ReactPiano"] .ReactPiano__Key--active.ReactPiano__Key--accidental,
            .ReactPiano__Key--active[class*="ReactPiano__Key"],
            .ReactPiano__Key--active[class*="ReactPiano__Key"]:hover,
            .ReactPiano__Key--active[class*="ReactPiano__Key"]:active,
            .ReactPiano__Key--active[class*="ReactPiano__Key"]:focus {
                background: #3b82f6 !important;
                background-color: #3b82f6 !important;
                background-image: none !important;
                color: white !important;
                border-color: #2563eb !important;
                border-top-color: #2563eb !important;
                border-left-color: #2563eb !important;
                border-right-color: #2563eb !important;
                border-bottom-color: #2563eb !important;
                box-shadow: none !important;
                transition: none !important;
            }
            
            /* Force natural (white) keys to stay blue */
            div[class*="ReactPiano"] .ReactPiano__Key--active.ReactPiano__Key--natural,
            .ReactPiano__Key--active.ReactPiano__Key--natural[class*="ReactPiano__Key"],
            .ReactPiano__Key--active.ReactPiano__Key--natural[class*="ReactPiano__Key"]:hover,
            .ReactPiano__Key--active.ReactPiano__Key--natural[class*="ReactPiano__Key"]:active,
            .ReactPiano__Key--active.ReactPiano__Key--natural[class*="ReactPiano__Key"]:focus {
                background: linear-gradient(to bottom, #3b82f6 0%, #2563eb 100%) !important;
                background-color: #3b82f6 !important;
                color: white !important;
                border-top: 1px solid #2563eb !important;
                border-left: 1px solid #2563eb !important;
                border-right: 1px solid #2563eb !important;
                border-bottom: 1px solid #1e40af !important;
                box-shadow: 
                    inset 0 0 0 1px rgba(37, 99, 235, 0.3),
                    inset 0 -3px 6px rgba(0,0,0,0.1) !important;
            }
            
            /* Force accidental (black) keys to stay blue */
            div[class*="ReactPiano"] .ReactPiano__Key--active.ReactPiano__Key--accidental,
            .ReactPiano__Key--active.ReactPiano__Key--accidental[class*="ReactPiano__Key"],
            .ReactPiano__Key--active.ReactPiano__Key--accidental[class*="ReactPiano__Key"]:hover,
            .ReactPiano__Key--active.ReactPiano__Key--accidental[class*="ReactPiano__Key"]:active,
            .ReactPiano__Key--active.ReactPiano__Key--accidental[class*="ReactPiano__Key"]:focus {
                background: linear-gradient(to bottom, #1d4ed8 0%, #1e40af 100%) !important;
                background-color: #1d4ed8 !important;
                color: white !important;
                border: 1px solid #1e40af !important;
                box-shadow: 
                    inset 0 0 0 1px rgba(30, 64, 175, 0.4),
                    inset 0 -2px 4px rgba(0,0,0,0.2) !important;
            }
            
            /* Override any CSS animations or transitions */
            .ReactPiano__Key--active * {
                transition: none !important;
                animation: none !important;
            }
            
            /* Nuclear option - override any inline styles that might be applied */
            .ReactPiano__Key--active[style] {
                background: #3b82f6 !important;
                background-color: #3b82f6 !important;
            }
            
            .ReactPiano__Key--active.ReactPiano__Key--natural[style] {
                background: linear-gradient(to bottom, #3b82f6 0%, #2563eb 100%) !important;
            }
            
            .ReactPiano__Key--active.ReactPiano__Key--accidental[style] {
                background: linear-gradient(to bottom, #1d4ed8 0%, #1e40af 100%) !important;
            }
        `,document.head.appendChild(p),()=>{document.head.removeChild(p)}},[]);const a=4,u=7,f=wt.fromNote(`c${a}`),h=wt.fromNote(`c${u}`);return c.jsx("div",{ref:n,className:"w-full",children:c.jsx(ld,{noteRange:{first:f,last:h},playNote:()=>{},stopNote:()=>{},disabled:!1,width:l,activeNotes:e,className:"mx-auto"})})},x5=({editingChordIndex:e,editingChord:n,totalChords:o,chords:s,onUpdateChord:l,onFetchOriginalChord:a,onChordClick:u,onClose:f,onNavigateToChord:h})=>{const{editingChord:p,slashNote:m,slashNoteError:g,handleEditChord:x,handleSaveEdit:b,handleCancelEdit:C,moveNoteUp:E,moveNoteDown:S,removeSlashNote:j,handleSlashNoteChange:R,handleDragEnd:A,handlePreviewChord:D,isSlashNote:I,isManualSlashNote:T,parseNotes:M}=p5({chords:s,onUpdateChord:l,onFetchOriginalChord:a,onChordClick:u});we.useEffect(()=>{x(e,n)},[e,n]);const _=()=>{b(),f()},K=()=>{C(),f()},J=()=>{e>0&&h&&h(e-1)},te=()=>{e<o-1&&h&&h(e+1)},L=we.useMemo(()=>{if(!p?.notes)return[];try{return ja(m5,g5,p.notes).map(({note:se,octave:q})=>{try{return wt.fromNote(`${se}${q}`)}catch(Q){return console.warn(`Failed to parse note: ${se}${q}`,Q),null}}).filter(Boolean)}catch(ee){return console.warn("Failed to parse chord notes:",ee),[]}},[p?.notes]);if(!p)return null;const $=M(p.notes),G=e>0,X=e<o-1;return c.jsxs("div",{className:"fixed inset-0 bg-[#1a1e24] bg-opacity-95 backdrop-blur-sm z-50 flex flex-col",children:[c.jsxs("div",{className:"flex-shrink-0 max-w-4xl mx-auto px-4 py-4 w-full",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsxs("div",{className:"flex items-center space-x-2 flex-1 min-w-0",children:[c.jsxs("h2",{className:"text-lg sm:text-xl font-bold text-white truncate",children:["Edit: ",p.name.replace(/\/[A-G](##|#|bb|b)?\d*/,"")]}),c.jsxs("span",{className:"px-2 py-1 text-xs bg-slate-700 text-slate-300 rounded font-mono flex-shrink-0",children:[e+1," / ",o]})]}),c.jsxs("div",{className:"flex items-center space-x-2 flex-shrink-0",children:[c.jsxs(Sn,{onClick:_,variant:"primary",size:"sm",disabled:!!g,className:pt("bg-green-600 hover:bg-green-700",g&&"opacity-50 cursor-not-allowed"),title:g?"Fix slash note error before saving":"Save changes",children:[c.jsx(a1,{className:"w-4 h-4 sm:mr-1"}),c.jsx("span",{className:"hidden sm:inline",children:"Save"})]}),c.jsxs(Sn,{onClick:K,variant:"secondary",size:"sm",children:[c.jsx("span",{className:"hidden sm:inline",children:"Cancel"}),c.jsx("span",{className:"sm:hidden",children:"✕"})]})]})]}),c.jsx("div",{className:"flex items-center",children:h&&c.jsxs("div",{className:"flex items-center space-x-1",children:[c.jsx(Sn,{onClick:J,variant:"secondary",size:"sm",disabled:!G,title:"Previous chord",className:"px-2",children:c.jsx(u1,{className:"w-4 h-4"})}),c.jsx(Sn,{onClick:te,variant:"secondary",size:"sm",disabled:!X,title:"Next chord",className:"px-2",children:c.jsx(Kg,{className:"w-4 h-4"})})]})}),c.jsxs("div",{className:"p-3 bg-[#2a2f38] rounded-lg border border-gray-600 mb-4 mt-4",children:[c.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Slash Note (Bass Note)"}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("input",{type:"text",value:m,onChange:ee=>R(ee.target.value),onBlur:ee=>R(ee.target.value),onKeyDown:ee=>{ee.key==="Enter"&&R(ee.currentTarget.value)},placeholder:"e.g., C4, F#, Bb3",className:pt("flex-1 px-3 py-2 bg-[#1a1e24] border rounded text-white placeholder-gray-400 focus:outline-none transition-colors text-sm",g?"border-red-500 focus:border-red-400":"border-gray-600 focus:border-blue-500")}),m.trim()&&!g&&c.jsx("button",{onClick:j,className:"p-2 text-red-400 hover:text-red-300 hover:bg-red-500/10 rounded transition-colors",title:"Remove slash note",children:c.jsx(Bu,{className:"w-4 h-4"})})]}),g?c.jsxs("p",{className:"text-xs text-red-400 mt-1 flex items-center space-x-1",children:[c.jsx(Bu,{className:"w-3 h-3 flex-shrink-0"}),c.jsx("span",{children:g})]}):c.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Add bass note (e.g., Cmaj7/E)"}),$.length>0&&T($[0])&&!g&&c.jsx("div",{className:"mt-2 p-2 bg-amber-500/10 border border-amber-500/30 rounded text-xs text-amber-300",children:c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(tm,{className:"w-3 h-3"}),c.jsx("span",{children:"Slash note locked in first position"})]})})]}),c.jsx("div",{className:"bg-[#2a2f38] rounded-lg border border-gray-600 p-3 mb-4",children:c.jsx("div",{className:"bg-[#1a1e24] rounded p-2 flex justify-center overflow-x-auto",children:c.jsx(v5,{activeMidiNotes:L})})})]}),c.jsx("div",{className:"flex-1 max-w-4xl mx-auto px-4 w-full overflow-hidden flex flex-col -mt-4",children:c.jsxs("div",{className:"bg-[#2a2f38] rounded-lg border border-gray-600 p-4 flex-1 flex flex-col min-h-0",children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsxs(Sn,{onClick:D,variant:"secondary",size:"sm",className:"bg-blue-600 hover:bg-blue-700 text-white",title:"Preview chord",children:[c.jsx(Yg,{className:"w-4 h-4 sm:mr-1"}),c.jsx("span",{className:"hidden sm:inline",children:"Preview"})]}),c.jsxs("div",{className:"flex-1 text-center mx-4",children:[c.jsx("h3",{className:"text-lg font-medium text-white leading-tight",children:"Chord Notes"}),c.jsx("p",{className:"text-xs text-gray-400 leading-tight",children:"Drag to reorder"})]}),c.jsx("div",{className:"w-16 sm:w-20"})," "]}),c.jsx("div",{className:"flex-1 min-h-0",children:c.jsx(dv,{onDragEnd:A,children:c.jsx(wv,{droppableId:"notes-list",children:(ee,se)=>c.jsxs("div",{...ee.droppableProps,ref:ee.innerRef,className:pt("space-y-3 transition-colors duration-200 overflow-y-auto h-full",{"bg-blue-500/5 rounded-lg p-2":se.isDraggingOver}),children:[$.map((q,Q)=>{const Y=I(q),U=T(q)&&Q===0;return c.jsx(gv,{draggableId:`${q}-${Q}`,index:Q,isDragDisabled:U,children:(ae,fe)=>c.jsxs("div",{ref:ae.innerRef,...ae.draggableProps,...ae.dragHandleProps,className:pt("flex items-center space-x-3 p-3 rounded border transition-all duration-200",{"shadow-lg shadow-blue-500/20 border-blue-500 transform scale-105":fe.isDragging,"cursor-grab":!fe.isDragging&&!U,"cursor-grabbing":fe.isDragging,"cursor-not-allowed":U,"bg-amber-500/10 border-amber-500/50":Y&&!fe.isDragging,"hover:border-amber-400/70":Y&&!fe.isDragging,"bg-amber-600/15 border-amber-600/60":U&&!fe.isDragging,"bg-[#1a1e24] border-gray-600":!Y&&!U&&!fe.isDragging,"hover:border-gray-500":!Y&&!U&&!fe.isDragging}),style:ae.draggableProps.style,children:[c.jsxs("div",{className:"flex-1 text-left",children:[c.jsxs("div",{className:"flex items-center justify-between mb-1",children:[c.jsx("span",{className:"text-white font-mono text-lg font-semibold",children:q}),c.jsxs("div",{className:"flex items-center space-x-2",children:[Y&&c.jsx("span",{className:"px-2 py-1 text-xs bg-amber-500/20 text-amber-300 rounded border border-amber-500/30 font-medium",children:"SLASH"}),U&&c.jsxs("span",{className:"px-2 py-1 text-xs bg-amber-600/20 text-amber-200 rounded border border-amber-600/30 font-medium flex items-center space-x-1",children:[c.jsx(tm,{className:"w-3 h-3"}),c.jsx("span",{children:"LOCKED"})]})]})]}),c.jsxs("div",{className:"text-xs text-slate-400 font-medium",children:["Note ",Q+1]})]}),c.jsxs("div",{className:"flex items-center space-x-1",children:[c.jsx("span",{className:"text-xs text-slate-400 mr-2",children:"Order:"}),c.jsx("button",{onClick:ne=>{ne.stopPropagation(),E(Q)},disabled:Q===0||U||Q===1&&T($[0]),className:"p-1 text-slate-300 hover:text-white hover:bg-[#4a5262] rounded transition-colors disabled:opacity-30 disabled:cursor-not-allowed",title:U?"Cannot move locked slash note":Q===1&&T($[0])?"Cannot move past locked slash note":"Move up",children:c.jsx($s,{className:"w-4 h-4"})}),c.jsx("button",{onClick:ne=>{ne.stopPropagation(),S(Q)},disabled:Q===$.length-1||U,className:"p-1 text-slate-300 hover:text-white hover:bg-[#4a5262] rounded transition-colors disabled:opacity-30 disabled:cursor-not-allowed",title:U?"Cannot move locked slash note":"Move down",children:c.jsx(eo,{className:"w-4 h-4"})})]})]})},`${q}-${Q}`)}),ee.placeholder]})})})})]})}),c.jsx("div",{className:"flex-shrink-0 h-4"})]})},y5=4,b5=7,w5=({musicStore:e,playbackStore:n,patternStore:o,uiStore:s,setEditingChordIndex:l})=>{const[a,u]=w.useState(!1),[f,h]=w.useState(!1),p=w.useRef(null);w.useEffect(()=>{const A=()=>{const D=window.innerHeight,I=parseFloat(getComputedStyle(document.documentElement).fontSize);h(D<35*I)};return A(),window.addEventListener("resize",A,{passive:!0}),window.addEventListener("orientationchange",A,{passive:!0}),()=>{window.removeEventListener("resize",A),window.removeEventListener("orientationchange",A)}},[]),w.useEffect(()=>{const{isLiveMode:A}=s;if(A){const D=document.body.style.overflow,I=document.body.style.overscrollBehavior,T=document.body.style.touchAction;document.body.style.overflow="hidden",document.body.style.overscrollBehavior="none",document.body.style.touchAction="none";const M=()=>{setTimeout(()=>{if(p.current&&A&&!a){const _=p.current;_.style.overflowY="hidden",_.style.touchAction="pan-y",_.offsetHeight,_.style.overflowY="auto",_.style.WebkitOverflowScrolling="touch"}},300)};return window.addEventListener("orientationchange",M),()=>{document.body.style.overflow=D,document.body.style.overscrollBehavior=I,document.body.style.touchAction=T,window.removeEventListener("orientationchange",M)}}},[s.isLiveMode,a]),w.useEffect(()=>{const A=()=>/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||"ontouchstart"in window||navigator.maxTouchPoints>0;if(p.current&&s.isLiveMode){const D=p.current;a?A()?(D.style.touchAction="pan-y",D.style.overflowY="auto",D.style.WebkitOverflowScrolling="auto"):(D.style.removeProperty("touchAction"),D.style.overflowY="auto",D.style.WebkitOverflowScrolling="touch"):(D.style.overflowY="auto",D.style.touchAction="pan-y",D.style.WebkitOverflowScrolling="touch")}},[a,s.isLiveMode]);const m=w.useCallback((A,D,I)=>{if(s.isDeleteMode&&D!==void 0){n.removeChord(D);return}const T=ja(y5,b5,A);D!==void 0?(n.setTemporaryChord(null),n.setActiveChordIndex(D),o.globalPatternState.isPlaying||n.playNotes(T),n.setHighlightedChordIndex(D),setTimeout(()=>n.setHighlightedChordIndex(null),150)):(I&&n.setTemporaryChord({name:I,notes:A}),o.globalPatternState.isPlaying||n.playNotes(T))},[s.isDeleteMode,o.globalPatternState.isPlaying,n]),g=w.useCallback(()=>{n.clearAllChords(),o.setGlobalPatternState({isPlaying:!1}),s.setIsLiveMode(!1)},[n,o,s]),x=w.useCallback(()=>{o.setGlobalPatternState({isPlaying:!o.globalPatternState.isPlaying})},[o]),b=w.useCallback(()=>{s.setIsDeleteMode(!s.isDeleteMode)},[s]),C=w.useCallback(()=>{s.setIsLiveMode(!s.isLiveMode)},[s]),E=w.useCallback((A,D)=>{const I={name:D.name,notes:D.notes,pattern:D.pattern||["1","2","3","4"],originalKey:D.originalKey||e.key,originalMode:D.originalMode||e.mode,originalNotes:D.originalNotes||D.notes};n.updateChord(A,I)},[e,n]),S=w.useCallback(A=>{l(A)},[l]),j=w.useCallback(()=>{l(null)},[l]),R=w.useCallback(A=>{A>=0&&A<n.addedChords.length&&l(A)},[n.addedChords.length,l]);return{isEditMode:a,setIsEditMode:u,isCompactHeight:f,scrollContainerRef:p,handleChordClick:m,handleUpdateChord:E,handleEditChord:S,handleCloseEditor:j,handleNavigateToChord:R,handleClearAll:g,handleTogglePlayback:x,handleToggleDeleteMode:b,handleToggleLiveMode:C}};function N5(){for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return w.useMemo(()=>s=>{n.forEach(l=>l(s))},n)}const el=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Fo(e){const n=Object.prototype.toString.call(e);return n==="[object Window]"||n==="[object global]"}function Ld(e){return"nodeType"in e}function Vt(e){var n,o;return e?Fo(e)?e:Ld(e)&&(n=(o=e.ownerDocument)==null?void 0:o.defaultView)!=null?n:window:window}function Bd(e){const{Document:n}=Vt(e);return e instanceof n}function oi(e){return Fo(e)?!1:e instanceof Vt(e).HTMLElement}function Nv(e){return e instanceof Vt(e).SVGElement}function $o(e){return e?Fo(e)?e.document:Ld(e)?Bd(e)?e:oi(e)||Nv(e)?e.ownerDocument:document:document:document}const $n=el?w.useLayoutEffect:w.useEffect;function Fd(e){const n=w.useRef(e);return $n(()=>{n.current=e}),w.useCallback(function(){for(var o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return n.current==null?void 0:n.current(...s)},[])}function C5(){const e=w.useRef(null),n=w.useCallback((s,l)=>{e.current=setInterval(s,l)},[]),o=w.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[n,o]}function Qs(e,n){n===void 0&&(n=[e]);const o=w.useRef(e);return $n(()=>{o.current!==e&&(o.current=e)},n),o}function si(e,n){const o=w.useRef();return w.useMemo(()=>{const s=e(o.current);return o.current=s,s},[...n])}function Ba(e){const n=Fd(e),o=w.useRef(null),s=w.useCallback(l=>{l!==o.current&&n?.(l,o.current),o.current=l},[]);return[o,s]}function Qu(e){const n=w.useRef();return w.useEffect(()=>{n.current=e},[e]),n.current}let ku={};function ii(e,n){return w.useMemo(()=>{if(n)return n;const o=ku[e]==null?0:ku[e]+1;return ku[e]=o,e+"-"+o},[e,n])}function Cv(e){return function(n){for(var o=arguments.length,s=new Array(o>1?o-1:0),l=1;l<o;l++)s[l-1]=arguments[l];return s.reduce((a,u)=>{const f=Object.entries(u);for(const[h,p]of f){const m=a[h];m!=null&&(a[h]=m+e*p)}return a},{...n})}}const Po=Cv(1),Js=Cv(-1);function S5(e){return"clientX"in e&&"clientY"in e}function $d(e){if(!e)return!1;const{KeyboardEvent:n}=Vt(e.target);return n&&e instanceof n}function E5(e){if(!e)return!1;const{TouchEvent:n}=Vt(e.target);return n&&e instanceof n}function Ju(e){if(E5(e)){if(e.touches&&e.touches.length){const{clientX:n,clientY:o}=e.touches[0];return{x:n,y:o}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:n,clientY:o}=e.changedTouches[0];return{x:n,y:o}}}return S5(e)?{x:e.clientX,y:e.clientY}:null}const Xs=Object.freeze({Translate:{toString(e){if(!e)return;const{x:n,y:o}=e;return"translate3d("+(n?Math.round(n):0)+"px, "+(o?Math.round(o):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:n,scaleY:o}=e;return"scaleX("+n+") scaleY("+o+")"}},Transform:{toString(e){if(e)return[Xs.Translate.toString(e),Xs.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:n,duration:o,easing:s}=e;return n+" "+o+"ms "+s}}}),Sg="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function D5(e){return e.matches(Sg)?e:e.querySelector(Sg)}const j5={display:"none"};function k5(e){let{id:n,value:o}=e;return we.createElement("div",{id:n,style:j5},o)}function A5(e){let{id:n,announcement:o,ariaLiveType:s="assertive"}=e;const l={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return we.createElement("div",{id:n,style:l,role:"status","aria-live":s,"aria-atomic":!0},o)}function I5(){const[e,n]=w.useState("");return{announce:w.useCallback(s=>{s!=null&&n(s)},[]),announcement:e}}const Sv=w.createContext(null);function P5(e){const n=w.useContext(Sv);w.useEffect(()=>{if(!n)throw new Error("useDndMonitor must be used within a children of <DndContext>");return n(e)},[e,n])}function R5(){const[e]=w.useState(()=>new Set),n=w.useCallback(s=>(e.add(s),()=>e.delete(s)),[e]);return[w.useCallback(s=>{let{type:l,event:a}=s;e.forEach(u=>{var f;return(f=u[l])==null?void 0:f.call(u,a)})},[e]),n]}const T5={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},M5={onDragStart(e){let{active:n}=e;return"Picked up draggable item "+n.id+"."},onDragOver(e){let{active:n,over:o}=e;return o?"Draggable item "+n.id+" was moved over droppable area "+o.id+".":"Draggable item "+n.id+" is no longer over a droppable area."},onDragEnd(e){let{active:n,over:o}=e;return o?"Draggable item "+n.id+" was dropped over droppable area "+o.id:"Draggable item "+n.id+" was dropped."},onDragCancel(e){let{active:n}=e;return"Dragging was cancelled. Draggable item "+n.id+" was dropped."}};function O5(e){let{announcements:n=M5,container:o,hiddenTextDescribedById:s,screenReaderInstructions:l=T5}=e;const{announce:a,announcement:u}=I5(),f=ii("DndLiveRegion"),[h,p]=w.useState(!1);if(w.useEffect(()=>{p(!0)},[]),P5(w.useMemo(()=>({onDragStart(g){let{active:x}=g;a(n.onDragStart({active:x}))},onDragMove(g){let{active:x,over:b}=g;n.onDragMove&&a(n.onDragMove({active:x,over:b}))},onDragOver(g){let{active:x,over:b}=g;a(n.onDragOver({active:x,over:b}))},onDragEnd(g){let{active:x,over:b}=g;a(n.onDragEnd({active:x,over:b}))},onDragCancel(g){let{active:x,over:b}=g;a(n.onDragCancel({active:x,over:b}))}}),[a,n])),!h)return null;const m=we.createElement(we.Fragment,null,we.createElement(k5,{id:s,value:l.draggable}),we.createElement(A5,{id:f,announcement:u}));return o?tr.createPortal(m,o):m}var at;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(at||(at={}));function Fa(){}function Au(e,n){return w.useMemo(()=>({sensor:e,options:n??{}}),[e,n])}function _5(){for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return w.useMemo(()=>[...n].filter(s=>s!=null),[...n])}const jn=Object.freeze({x:0,y:0});function Ev(e,n){return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}function Dv(e,n){let{data:{value:o}}=e,{data:{value:s}}=n;return o-s}function L5(e,n){let{data:{value:o}}=e,{data:{value:s}}=n;return s-o}function Eg(e){let{left:n,top:o,height:s,width:l}=e;return[{x:n,y:o},{x:n+l,y:o},{x:n,y:o+s},{x:n+l,y:o+s}]}function jv(e,n){if(!e||e.length===0)return null;const[o]=e;return o[n]}function Dg(e,n,o){return n===void 0&&(n=e.left),o===void 0&&(o=e.top),{x:n+e.width*.5,y:o+e.height*.5}}const B5=e=>{let{collisionRect:n,droppableRects:o,droppableContainers:s}=e;const l=Dg(n,n.left,n.top),a=[];for(const u of s){const{id:f}=u,h=o.get(f);if(h){const p=Ev(Dg(h),l);a.push({id:f,data:{droppableContainer:u,value:p}})}}return a.sort(Dv)},F5=e=>{let{collisionRect:n,droppableRects:o,droppableContainers:s}=e;const l=Eg(n),a=[];for(const u of s){const{id:f}=u,h=o.get(f);if(h){const p=Eg(h),m=l.reduce((x,b,C)=>x+Ev(p[C],b),0),g=Number((m/4).toFixed(4));a.push({id:f,data:{droppableContainer:u,value:g}})}}return a.sort(Dv)};function $5(e,n){const o=Math.max(n.top,e.top),s=Math.max(n.left,e.left),l=Math.min(n.left+n.width,e.left+e.width),a=Math.min(n.top+n.height,e.top+e.height),u=l-s,f=a-o;if(s<l&&o<a){const h=n.width*n.height,p=e.width*e.height,m=u*f,g=m/(h+p-m);return Number(g.toFixed(4))}return 0}const U5=e=>{let{collisionRect:n,droppableRects:o,droppableContainers:s}=e;const l=[];for(const a of s){const{id:u}=a,f=o.get(u);if(f){const h=$5(f,n);h>0&&l.push({id:u,data:{droppableContainer:a,value:h}})}}return l.sort(L5)};function z5(e,n,o){return{...e,scaleX:n&&o?n.width/o.width:1,scaleY:n&&o?n.height/o.height:1}}function kv(e,n){return e&&n?{x:e.left-n.left,y:e.top-n.top}:jn}function V5(e){return function(o){for(var s=arguments.length,l=new Array(s>1?s-1:0),a=1;a<s;a++)l[a-1]=arguments[a];return l.reduce((u,f)=>({...u,top:u.top+e*f.y,bottom:u.bottom+e*f.y,left:u.left+e*f.x,right:u.right+e*f.x}),{...o})}}const G5=V5(1);function H5(e){if(e.startsWith("matrix3d(")){const n=e.slice(9,-1).split(/, /);return{x:+n[12],y:+n[13],scaleX:+n[0],scaleY:+n[5]}}else if(e.startsWith("matrix(")){const n=e.slice(7,-1).split(/, /);return{x:+n[4],y:+n[5],scaleX:+n[0],scaleY:+n[3]}}return null}function W5(e,n,o){const s=H5(n);if(!s)return e;const{scaleX:l,scaleY:a,x:u,y:f}=s,h=e.left-u-(1-l)*parseFloat(o),p=e.top-f-(1-a)*parseFloat(o.slice(o.indexOf(" ")+1)),m=l?e.width/l:e.width,g=a?e.height/a:e.height;return{width:m,height:g,top:p,right:h+m,bottom:p+g,left:h}}const q5={ignoreTransform:!1};function Uo(e,n){n===void 0&&(n=q5);let o=e.getBoundingClientRect();if(n.ignoreTransform){const{transform:p,transformOrigin:m}=Vt(e).getComputedStyle(e);p&&(o=W5(o,p,m))}const{top:s,left:l,width:a,height:u,bottom:f,right:h}=o;return{top:s,left:l,width:a,height:u,bottom:f,right:h}}function jg(e){return Uo(e,{ignoreTransform:!0})}function K5(e){const n=e.innerWidth,o=e.innerHeight;return{top:0,left:0,right:n,bottom:o,width:n,height:o}}function Y5(e,n){return n===void 0&&(n=Vt(e).getComputedStyle(e)),n.position==="fixed"}function Q5(e,n){n===void 0&&(n=Vt(e).getComputedStyle(e));const o=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(l=>{const a=n[l];return typeof a=="string"?o.test(a):!1})}function tl(e,n){const o=[];function s(l){if(n!=null&&o.length>=n||!l)return o;if(Bd(l)&&l.scrollingElement!=null&&!o.includes(l.scrollingElement))return o.push(l.scrollingElement),o;if(!oi(l)||Nv(l)||o.includes(l))return o;const a=Vt(e).getComputedStyle(l);return l!==e&&Q5(l,a)&&o.push(l),Y5(l,a)?o:s(l.parentNode)}return e?s(e):o}function Av(e){const[n]=tl(e,1);return n??null}function Iu(e){return!el||!e?null:Fo(e)?e:Ld(e)?Bd(e)||e===$o(e).scrollingElement?window:oi(e)?e:null:null}function Iv(e){return Fo(e)?e.scrollX:e.scrollLeft}function Pv(e){return Fo(e)?e.scrollY:e.scrollTop}function Xu(e){return{x:Iv(e),y:Pv(e)}}var ht;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(ht||(ht={}));function Rv(e){return!el||!e?!1:e===document.scrollingElement}function Tv(e){const n={x:0,y:0},o=Rv(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},s={x:e.scrollWidth-o.width,y:e.scrollHeight-o.height},l=e.scrollTop<=n.y,a=e.scrollLeft<=n.x,u=e.scrollTop>=s.y,f=e.scrollLeft>=s.x;return{isTop:l,isLeft:a,isBottom:u,isRight:f,maxScroll:s,minScroll:n}}const J5={x:.2,y:.2};function X5(e,n,o,s,l){let{top:a,left:u,right:f,bottom:h}=o;s===void 0&&(s=10),l===void 0&&(l=J5);const{isTop:p,isBottom:m,isLeft:g,isRight:x}=Tv(e),b={x:0,y:0},C={x:0,y:0},E={height:n.height*l.y,width:n.width*l.x};return!p&&a<=n.top+E.height?(b.y=ht.Backward,C.y=s*Math.abs((n.top+E.height-a)/E.height)):!m&&h>=n.bottom-E.height&&(b.y=ht.Forward,C.y=s*Math.abs((n.bottom-E.height-h)/E.height)),!x&&f>=n.right-E.width?(b.x=ht.Forward,C.x=s*Math.abs((n.right-E.width-f)/E.width)):!g&&u<=n.left+E.width&&(b.x=ht.Backward,C.x=s*Math.abs((n.left+E.width-u)/E.width)),{direction:b,speed:C}}function Z5(e){if(e===document.scrollingElement){const{innerWidth:a,innerHeight:u}=window;return{top:0,left:0,right:a,bottom:u,width:a,height:u}}const{top:n,left:o,right:s,bottom:l}=e.getBoundingClientRect();return{top:n,left:o,right:s,bottom:l,width:e.clientWidth,height:e.clientHeight}}function Mv(e){return e.reduce((n,o)=>Po(n,Xu(o)),jn)}function e3(e){return e.reduce((n,o)=>n+Iv(o),0)}function t3(e){return e.reduce((n,o)=>n+Pv(o),0)}function n3(e,n){if(n===void 0&&(n=Uo),!e)return;const{top:o,left:s,bottom:l,right:a}=n(e);Av(e)&&(l<=0||a<=0||o>=window.innerHeight||s>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const r3=[["x",["left","right"],e3],["y",["top","bottom"],t3]];class Ud{constructor(n,o){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const s=tl(o),l=Mv(s);this.rect={...n},this.width=n.width,this.height=n.height;for(const[a,u,f]of r3)for(const h of u)Object.defineProperty(this,h,{get:()=>{const p=f(s),m=l[a]-p;return this.rect[h]+m},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class _s{constructor(n){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(o=>{var s;return(s=this.target)==null?void 0:s.removeEventListener(...o)})},this.target=n}add(n,o,s){var l;(l=this.target)==null||l.addEventListener(n,o,s),this.listeners.push([n,o,s])}}function o3(e){const{EventTarget:n}=Vt(e);return e instanceof n?e:$o(e)}function Pu(e,n){const o=Math.abs(e.x),s=Math.abs(e.y);return typeof n=="number"?Math.sqrt(o**2+s**2)>n:"x"in n&&"y"in n?o>n.x&&s>n.y:"x"in n?o>n.x:"y"in n?s>n.y:!1}var dn;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(dn||(dn={}));function kg(e){e.preventDefault()}function s3(e){e.stopPropagation()}var Me;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(Me||(Me={}));const Ov={start:[Me.Space,Me.Enter],cancel:[Me.Esc],end:[Me.Space,Me.Enter,Me.Tab]},i3=(e,n)=>{let{currentCoordinates:o}=n;switch(e.code){case Me.Right:return{...o,x:o.x+25};case Me.Left:return{...o,x:o.x-25};case Me.Down:return{...o,y:o.y+25};case Me.Up:return{...o,y:o.y-25}}};class zd{constructor(n){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=n;const{event:{target:o}}=n;this.props=n,this.listeners=new _s($o(o)),this.windowListeners=new _s(Vt(o)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(dn.Resize,this.handleCancel),this.windowListeners.add(dn.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(dn.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:n,onStart:o}=this.props,s=n.node.current;s&&n3(s),o(jn)}handleKeyDown(n){if($d(n)){const{active:o,context:s,options:l}=this.props,{keyboardCodes:a=Ov,coordinateGetter:u=i3,scrollBehavior:f="smooth"}=l,{code:h}=n;if(a.end.includes(h)){this.handleEnd(n);return}if(a.cancel.includes(h)){this.handleCancel(n);return}const{collisionRect:p}=s.current,m=p?{x:p.left,y:p.top}:jn;this.referenceCoordinates||(this.referenceCoordinates=m);const g=u(n,{active:o,context:s.current,currentCoordinates:m});if(g){const x=Js(g,m),b={x:0,y:0},{scrollableAncestors:C}=s.current;for(const E of C){const S=n.code,{isTop:j,isRight:R,isLeft:A,isBottom:D,maxScroll:I,minScroll:T}=Tv(E),M=Z5(E),_={x:Math.min(S===Me.Right?M.right-M.width/2:M.right,Math.max(S===Me.Right?M.left:M.left+M.width/2,g.x)),y:Math.min(S===Me.Down?M.bottom-M.height/2:M.bottom,Math.max(S===Me.Down?M.top:M.top+M.height/2,g.y))},K=S===Me.Right&&!R||S===Me.Left&&!A,J=S===Me.Down&&!D||S===Me.Up&&!j;if(K&&_.x!==g.x){const te=E.scrollLeft+x.x,L=S===Me.Right&&te<=I.x||S===Me.Left&&te>=T.x;if(L&&!x.y){E.scrollTo({left:te,behavior:f});return}L?b.x=E.scrollLeft-te:b.x=S===Me.Right?E.scrollLeft-I.x:E.scrollLeft-T.x,b.x&&E.scrollBy({left:-b.x,behavior:f});break}else if(J&&_.y!==g.y){const te=E.scrollTop+x.y,L=S===Me.Down&&te<=I.y||S===Me.Up&&te>=T.y;if(L&&!x.x){E.scrollTo({top:te,behavior:f});return}L?b.y=E.scrollTop-te:b.y=S===Me.Down?E.scrollTop-I.y:E.scrollTop-T.y,b.y&&E.scrollBy({top:-b.y,behavior:f});break}}this.handleMove(n,Po(Js(g,this.referenceCoordinates),b))}}}handleMove(n,o){const{onMove:s}=this.props;n.preventDefault(),s(o)}handleEnd(n){const{onEnd:o}=this.props;n.preventDefault(),this.detach(),o()}handleCancel(n){const{onCancel:o}=this.props;n.preventDefault(),this.detach(),o()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}zd.activators=[{eventName:"onKeyDown",handler:(e,n,o)=>{let{keyboardCodes:s=Ov,onActivation:l}=n,{active:a}=o;const{code:u}=e.nativeEvent;if(s.start.includes(u)){const f=a.activatorNode.current;return f&&e.target!==f?!1:(e.preventDefault(),l?.({event:e.nativeEvent}),!0)}return!1}}];function Ag(e){return!!(e&&"distance"in e)}function Ig(e){return!!(e&&"delay"in e)}class Vd{constructor(n,o,s){var l;s===void 0&&(s=o3(n.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=n,this.events=o;const{event:a}=n,{target:u}=a;this.props=n,this.events=o,this.document=$o(u),this.documentListeners=new _s(this.document),this.listeners=new _s(s),this.windowListeners=new _s(Vt(u)),this.initialCoordinates=(l=Ju(a))!=null?l:jn,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:n,props:{options:{activationConstraint:o,bypassActivationConstraint:s}}}=this;if(this.listeners.add(n.move.name,this.handleMove,{passive:!1}),this.listeners.add(n.end.name,this.handleEnd),n.cancel&&this.listeners.add(n.cancel.name,this.handleCancel),this.windowListeners.add(dn.Resize,this.handleCancel),this.windowListeners.add(dn.DragStart,kg),this.windowListeners.add(dn.VisibilityChange,this.handleCancel),this.windowListeners.add(dn.ContextMenu,kg),this.documentListeners.add(dn.Keydown,this.handleKeydown),o){if(s!=null&&s({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(Ig(o)){this.timeoutId=setTimeout(this.handleStart,o.delay),this.handlePending(o);return}if(Ag(o)){this.handlePending(o);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(n,o){const{active:s,onPending:l}=this.props;l(s,n,this.initialCoordinates,o)}handleStart(){const{initialCoordinates:n}=this,{onStart:o}=this.props;n&&(this.activated=!0,this.documentListeners.add(dn.Click,s3,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(dn.SelectionChange,this.removeTextSelection),o(n))}handleMove(n){var o;const{activated:s,initialCoordinates:l,props:a}=this,{onMove:u,options:{activationConstraint:f}}=a;if(!l)return;const h=(o=Ju(n))!=null?o:jn,p=Js(l,h);if(!s&&f){if(Ag(f)){if(f.tolerance!=null&&Pu(p,f.tolerance))return this.handleCancel();if(Pu(p,f.distance))return this.handleStart()}if(Ig(f)&&Pu(p,f.tolerance))return this.handleCancel();this.handlePending(f,p);return}n.cancelable&&n.preventDefault(),u(h)}handleEnd(){const{onAbort:n,onEnd:o}=this.props;this.detach(),this.activated||n(this.props.active),o()}handleCancel(){const{onAbort:n,onCancel:o}=this.props;this.detach(),this.activated||n(this.props.active),o()}handleKeydown(n){n.code===Me.Esc&&this.handleCancel()}removeTextSelection(){var n;(n=this.document.getSelection())==null||n.removeAllRanges()}}const a3={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Gd extends Vd{constructor(n){const{event:o}=n,s=$o(o.target);super(n,a3,s)}}Gd.activators=[{eventName:"onPointerDown",handler:(e,n)=>{let{nativeEvent:o}=e,{onActivation:s}=n;return!o.isPrimary||o.button!==0?!1:(s?.({event:o}),!0)}}];const l3={move:{name:"mousemove"},end:{name:"mouseup"}};var Zu;(function(e){e[e.RightClick=2]="RightClick"})(Zu||(Zu={}));class c3 extends Vd{constructor(n){super(n,l3,$o(n.event.target))}}c3.activators=[{eventName:"onMouseDown",handler:(e,n)=>{let{nativeEvent:o}=e,{onActivation:s}=n;return o.button===Zu.RightClick?!1:(s?.({event:o}),!0)}}];const Ru={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class _v extends Vd{constructor(n){super(n,Ru)}static setup(){return window.addEventListener(Ru.move.name,n,{capture:!1,passive:!1}),function(){window.removeEventListener(Ru.move.name,n)};function n(){}}}_v.activators=[{eventName:"onTouchStart",handler:(e,n)=>{let{nativeEvent:o}=e,{onActivation:s}=n;const{touches:l}=o;return l.length>1?!1:(s?.({event:o}),!0)}}];var Ls;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(Ls||(Ls={}));var $a;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})($a||($a={}));function u3(e){let{acceleration:n,activator:o=Ls.Pointer,canScroll:s,draggingRect:l,enabled:a,interval:u=5,order:f=$a.TreeOrder,pointerCoordinates:h,scrollableAncestors:p,scrollableAncestorRects:m,delta:g,threshold:x}=e;const b=f3({delta:g,disabled:!a}),[C,E]=C5(),S=w.useRef({x:0,y:0}),j=w.useRef({x:0,y:0}),R=w.useMemo(()=>{switch(o){case Ls.Pointer:return h?{top:h.y,bottom:h.y,left:h.x,right:h.x}:null;case Ls.DraggableRect:return l}},[o,l,h]),A=w.useRef(null),D=w.useCallback(()=>{const T=A.current;if(!T)return;const M=S.current.x*j.current.x,_=S.current.y*j.current.y;T.scrollBy(M,_)},[]),I=w.useMemo(()=>f===$a.TreeOrder?[...p].reverse():p,[f,p]);w.useEffect(()=>{if(!a||!p.length||!R){E();return}for(const T of I){if(s?.(T)===!1)continue;const M=p.indexOf(T),_=m[M];if(!_)continue;const{direction:K,speed:J}=X5(T,_,R,n,x);for(const te of["x","y"])b[te][K[te]]||(J[te]=0,K[te]=0);if(J.x>0||J.y>0){E(),A.current=T,C(D,u),S.current=J,j.current=K;return}}S.current={x:0,y:0},j.current={x:0,y:0},E()},[n,D,s,E,a,u,JSON.stringify(R),JSON.stringify(b),C,p,I,m,JSON.stringify(x)])}const d3={x:{[ht.Backward]:!1,[ht.Forward]:!1},y:{[ht.Backward]:!1,[ht.Forward]:!1}};function f3(e){let{delta:n,disabled:o}=e;const s=Qu(n);return si(l=>{if(o||!s||!l)return d3;const a={x:Math.sign(n.x-s.x),y:Math.sign(n.y-s.y)};return{x:{[ht.Backward]:l.x[ht.Backward]||a.x===-1,[ht.Forward]:l.x[ht.Forward]||a.x===1},y:{[ht.Backward]:l.y[ht.Backward]||a.y===-1,[ht.Forward]:l.y[ht.Forward]||a.y===1}}},[o,n,s])}function h3(e,n){const o=n!=null?e.get(n):void 0,s=o?o.node.current:null;return si(l=>{var a;return n==null?null:(a=s??l)!=null?a:null},[s,n])}function p3(e,n){return w.useMemo(()=>e.reduce((o,s)=>{const{sensor:l}=s,a=l.activators.map(u=>({eventName:u.eventName,handler:n(u.handler,s)}));return[...o,...a]},[]),[e,n])}var Zs;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(Zs||(Zs={}));var ed;(function(e){e.Optimized="optimized"})(ed||(ed={}));const Pg=new Map;function m3(e,n){let{dragging:o,dependencies:s,config:l}=n;const[a,u]=w.useState(null),{frequency:f,measure:h,strategy:p}=l,m=w.useRef(e),g=S(),x=Qs(g),b=w.useCallback(function(j){j===void 0&&(j=[]),!x.current&&u(R=>R===null?j:R.concat(j.filter(A=>!R.includes(A))))},[x]),C=w.useRef(null),E=si(j=>{if(g&&!o)return Pg;if(!j||j===Pg||m.current!==e||a!=null){const R=new Map;for(let A of e){if(!A)continue;if(a&&a.length>0&&!a.includes(A.id)&&A.rect.current){R.set(A.id,A.rect.current);continue}const D=A.node.current,I=D?new Ud(h(D),D):null;A.rect.current=I,I&&R.set(A.id,I)}return R}return j},[e,a,o,g,h]);return w.useEffect(()=>{m.current=e},[e]),w.useEffect(()=>{g||b()},[o,g]),w.useEffect(()=>{a&&a.length>0&&u(null)},[JSON.stringify(a)]),w.useEffect(()=>{g||typeof f!="number"||C.current!==null||(C.current=setTimeout(()=>{b(),C.current=null},f))},[f,g,b,...s]),{droppableRects:E,measureDroppableContainers:b,measuringScheduled:a!=null};function S(){switch(p){case Zs.Always:return!1;case Zs.BeforeDragging:return o;default:return!o}}}function Lv(e,n){return si(o=>e?o||(typeof n=="function"?n(e):e):null,[n,e])}function g3(e,n){return Lv(e,n)}function v3(e){let{callback:n,disabled:o}=e;const s=Fd(n),l=w.useMemo(()=>{if(o||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:a}=window;return new a(s)},[s,o]);return w.useEffect(()=>()=>l?.disconnect(),[l]),l}function nl(e){let{callback:n,disabled:o}=e;const s=Fd(n),l=w.useMemo(()=>{if(o||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:a}=window;return new a(s)},[o]);return w.useEffect(()=>()=>l?.disconnect(),[l]),l}function x3(e){return new Ud(Uo(e),e)}function Rg(e,n,o){n===void 0&&(n=x3);const[s,l]=w.useState(null);function a(){l(h=>{if(!e)return null;if(e.isConnected===!1){var p;return(p=h??o)!=null?p:null}const m=n(e);return JSON.stringify(h)===JSON.stringify(m)?h:m})}const u=v3({callback(h){if(e)for(const p of h){const{type:m,target:g}=p;if(m==="childList"&&g instanceof HTMLElement&&g.contains(e)){a();break}}}}),f=nl({callback:a});return $n(()=>{a(),e?(f?.observe(e),u?.observe(document.body,{childList:!0,subtree:!0})):(f?.disconnect(),u?.disconnect())},[e]),s}function y3(e){const n=Lv(e);return kv(e,n)}const Tg=[];function b3(e){const n=w.useRef(e),o=si(s=>e?s&&s!==Tg&&e&&n.current&&e.parentNode===n.current.parentNode?s:tl(e):Tg,[e]);return w.useEffect(()=>{n.current=e},[e]),o}function w3(e){const[n,o]=w.useState(null),s=w.useRef(e),l=w.useCallback(a=>{const u=Iu(a.target);u&&o(f=>f?(f.set(u,Xu(u)),new Map(f)):null)},[]);return w.useEffect(()=>{const a=s.current;if(e!==a){u(a);const f=e.map(h=>{const p=Iu(h);return p?(p.addEventListener("scroll",l,{passive:!0}),[p,Xu(p)]):null}).filter(h=>h!=null);o(f.length?new Map(f):null),s.current=e}return()=>{u(e),u(a)};function u(f){f.forEach(h=>{const p=Iu(h);p?.removeEventListener("scroll",l)})}},[l,e]),w.useMemo(()=>e.length?n?Array.from(n.values()).reduce((a,u)=>Po(a,u),jn):Mv(e):jn,[e,n])}function Mg(e,n){n===void 0&&(n=[]);const o=w.useRef(null);return w.useEffect(()=>{o.current=null},n),w.useEffect(()=>{const s=e!==jn;s&&!o.current&&(o.current=e),!s&&o.current&&(o.current=null)},[e]),o.current?Js(e,o.current):jn}function N3(e){w.useEffect(()=>{if(!el)return;const n=e.map(o=>{let{sensor:s}=o;return s.setup==null?void 0:s.setup()});return()=>{for(const o of n)o?.()}},e.map(n=>{let{sensor:o}=n;return o}))}function C3(e,n){return w.useMemo(()=>e.reduce((o,s)=>{let{eventName:l,handler:a}=s;return o[l]=u=>{a(u,n)},o},{}),[e,n])}function Bv(e){return w.useMemo(()=>e?K5(e):null,[e])}const Og=[];function S3(e,n){n===void 0&&(n=Uo);const[o]=e,s=Bv(o?Vt(o):null),[l,a]=w.useState(Og);function u(){a(()=>e.length?e.map(h=>Rv(h)?s:new Ud(n(h),h)):Og)}const f=nl({callback:u});return $n(()=>{f?.disconnect(),u(),e.forEach(h=>f?.observe(h))},[e]),l}function E3(e){if(!e)return null;if(e.children.length>1)return e;const n=e.children[0];return oi(n)?n:e}function D3(e){let{measure:n}=e;const[o,s]=w.useState(null),l=w.useCallback(p=>{for(const{target:m}of p)if(oi(m)){s(g=>{const x=n(m);return g?{...g,width:x.width,height:x.height}:x});break}},[n]),a=nl({callback:l}),u=w.useCallback(p=>{const m=E3(p);a?.disconnect(),m&&a?.observe(m),s(m?n(m):null)},[n,a]),[f,h]=Ba(u);return w.useMemo(()=>({nodeRef:f,rect:o,setRef:h}),[o,f,h])}const j3=[{sensor:Gd,options:{}},{sensor:zd,options:{}}],k3={current:{}},Ca={draggable:{measure:jg},droppable:{measure:jg,strategy:Zs.WhileDragging,frequency:ed.Optimized},dragOverlay:{measure:Uo}};class Bs extends Map{get(n){var o;return n!=null&&(o=super.get(n))!=null?o:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(n=>{let{disabled:o}=n;return!o})}getNodeFor(n){var o,s;return(o=(s=this.get(n))==null?void 0:s.node.current)!=null?o:void 0}}const A3={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Bs,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Fa},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Ca,measureDroppableContainers:Fa,windowRect:null,measuringScheduled:!1},I3={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Fa,draggableNodes:new Map,over:null,measureDroppableContainers:Fa},rl=w.createContext(I3),Fv=w.createContext(A3);function P3(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Bs}}}function R3(e,n){switch(n.type){case at.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:n.initialCoordinates,active:n.active}};case at.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:n.coordinates.x-e.draggable.initialCoordinates.x,y:n.coordinates.y-e.draggable.initialCoordinates.y}}};case at.DragEnd:case at.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case at.RegisterDroppable:{const{element:o}=n,{id:s}=o,l=new Bs(e.droppable.containers);return l.set(s,o),{...e,droppable:{...e.droppable,containers:l}}}case at.SetDroppableDisabled:{const{id:o,key:s,disabled:l}=n,a=e.droppable.containers.get(o);if(!a||s!==a.key)return e;const u=new Bs(e.droppable.containers);return u.set(o,{...a,disabled:l}),{...e,droppable:{...e.droppable,containers:u}}}case at.UnregisterDroppable:{const{id:o,key:s}=n,l=e.droppable.containers.get(o);if(!l||s!==l.key)return e;const a=new Bs(e.droppable.containers);return a.delete(o),{...e,droppable:{...e.droppable,containers:a}}}default:return e}}function T3(e){let{disabled:n}=e;const{active:o,activatorEvent:s,draggableNodes:l}=w.useContext(rl),a=Qu(s),u=Qu(o?.id);return w.useEffect(()=>{if(!n&&!s&&a&&u!=null){if(!$d(a)||document.activeElement===a.target)return;const f=l.get(u);if(!f)return;const{activatorNode:h,node:p}=f;if(!h.current&&!p.current)return;requestAnimationFrame(()=>{for(const m of[h.current,p.current]){if(!m)continue;const g=D5(m);if(g){g.focus();break}}})}},[s,n,l,u,a]),null}function M3(e,n){let{transform:o,...s}=n;return e!=null&&e.length?e.reduce((l,a)=>a({transform:l,...s}),o):o}function O3(e){return w.useMemo(()=>({draggable:{...Ca.draggable,...e?.draggable},droppable:{...Ca.droppable,...e?.droppable},dragOverlay:{...Ca.dragOverlay,...e?.dragOverlay}}),[e?.draggable,e?.droppable,e?.dragOverlay])}function _3(e){let{activeNode:n,measure:o,initialRect:s,config:l=!0}=e;const a=w.useRef(!1),{x:u,y:f}=typeof l=="boolean"?{x:l,y:l}:l;$n(()=>{if(!u&&!f||!n){a.current=!1;return}if(a.current||!s)return;const p=n?.node.current;if(!p||p.isConnected===!1)return;const m=o(p),g=kv(m,s);if(u||(g.x=0),f||(g.y=0),a.current=!0,Math.abs(g.x)>0||Math.abs(g.y)>0){const x=Av(p);x&&x.scrollBy({top:g.y,left:g.x})}},[n,u,f,s,o])}const $v=w.createContext({...jn,scaleX:1,scaleY:1});var Er;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(Er||(Er={}));const L3=w.memo(function(n){var o,s,l,a;let{id:u,accessibility:f,autoScroll:h=!0,children:p,sensors:m=j3,collisionDetection:g=U5,measuring:x,modifiers:b,...C}=n;const E=w.useReducer(R3,void 0,P3),[S,j]=E,[R,A]=R5(),[D,I]=w.useState(Er.Uninitialized),T=D===Er.Initialized,{draggable:{active:M,nodes:_,translate:K},droppable:{containers:J}}=S,te=M!=null?_.get(M):null,L=w.useRef({initial:null,translated:null}),$=w.useMemo(()=>{var z;return M!=null?{id:M,data:(z=te?.data)!=null?z:k3,rect:L}:null},[M,te]),G=w.useRef(null),[X,ee]=w.useState(null),[se,q]=w.useState(null),Q=Qs(C,Object.values(C)),Y=ii("DndDescribedBy",u),k=w.useMemo(()=>J.getEnabled(),[J]),U=O3(x),{droppableRects:ae,measureDroppableContainers:fe,measuringScheduled:ne}=m3(k,{dragging:T,dependencies:[K.x,K.y],config:U.droppable}),de=h3(_,M),Ee=w.useMemo(()=>se?Ju(se):null,[se]),ge=Pn(),le=g3(de,U.draggable.measure);_3({activeNode:M!=null?_.get(M):null,config:ge.layoutShiftCompensation,initialRect:le,measure:U.draggable.measure});const pe=Rg(de,U.draggable.measure,le),Re=Rg(de?de.parentElement:null),De=w.useRef({activatorEvent:null,active:null,activeNode:de,collisionRect:null,collisions:null,droppableRects:ae,draggableNodes:_,draggingNode:null,draggingNodeRect:null,droppableContainers:J,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),xe=J.getNodeFor((o=De.current.over)==null?void 0:o.id),Pe=D3({measure:U.dragOverlay.measure}),_e=(s=Pe.nodeRef.current)!=null?s:de,rt=T?(l=Pe.rect)!=null?l:pe:null,nn=!!(Pe.nodeRef.current&&Pe.rect),Ct=y3(nn?null:pe),pn=Bv(_e?Vt(_e):null),ot=b3(T?xe??de:null),lt=S3(ot),kn=M3(b,{transform:{x:K.x-Ct.x,y:K.y-Ct.y,scaleX:1,scaleY:1},activatorEvent:se,active:$,activeNodeRect:pe,containerNodeRect:Re,draggingNodeRect:rt,over:De.current.over,overlayNodeRect:Pe.rect,scrollableAncestors:ot,scrollableAncestorRects:lt,windowRect:pn}),Rr=Ee?Po(Ee,K):null,Tr=w3(ot),ro=Mg(Tr),Un=Mg(Tr,[pe]),Gt=Po(kn,ro),Ht=rt?G5(rt,kn):null,An=$&&Ht?g({active:$,collisionRect:Ht,droppableRects:ae,droppableContainers:k,pointerCoordinates:Rr}):null,In=jv(An,"id"),[St,oo]=w.useState(null),so=nn?kn:Po(kn,Un),io=z5(so,(a=St?.rect)!=null?a:null,pe),Mr=w.useRef(null),rr=w.useCallback((z,Z)=>{let{sensor:he,options:Ie}=Z;if(G.current==null)return;const Be=_.get(G.current);if(!Be)return;const $e=z.nativeEvent,Ye=new he({active:G.current,activeNode:Be,event:$e,options:Ie,context:De,onAbort(Ve){if(!_.get(Ve))return;const{onDragAbort:Qe}=Q.current,Et={id:Ve};Qe?.(Et),R({type:"onDragAbort",event:Et})},onPending(Ve,Ot,Qe,Et){if(!_.get(Ve))return;const{onDragPending:Rn}=Q.current,Wt={id:Ve,constraint:Ot,initialCoordinates:Qe,offset:Et};Rn?.(Wt),R({type:"onDragPending",event:Wt})},onStart(Ve){const Ot=G.current;if(Ot==null)return;const Qe=_.get(Ot);if(!Qe)return;const{onDragStart:Et}=Q.current,_t={activatorEvent:$e,active:{id:Ot,data:Qe.data,rect:L}};tr.unstable_batchedUpdates(()=>{Et?.(_t),I(Er.Initializing),j({type:at.DragStart,initialCoordinates:Ve,active:Ot}),R({type:"onDragStart",event:_t}),ee(Mr.current),q($e)})},onMove(Ve){j({type:at.DragMove,coordinates:Ve})},onEnd:It(at.DragEnd),onCancel:It(at.DragCancel)});Mr.current=Ye;function It(Ve){return async function(){const{active:Qe,collisions:Et,over:_t,scrollAdjustedTranslate:Rn}=De.current;let Wt=null;if(Qe&&Rn){const{cancelDrop:Gn}=Q.current;Wt={activatorEvent:$e,active:Qe,collisions:Et,delta:Rn,over:_t},Ve===at.DragEnd&&typeof Gn=="function"&&await Promise.resolve(Gn(Wt))&&(Ve=at.DragCancel)}G.current=null,tr.unstable_batchedUpdates(()=>{j({type:Ve}),I(Er.Uninitialized),oo(null),ee(null),q(null),Mr.current=null;const Gn=Ve===at.DragEnd?"onDragEnd":"onDragCancel";if(Wt){const zo=Q.current[Gn];zo?.(Wt),R({type:Gn,event:Wt})}})}}},[_]),zn=w.useCallback((z,Z)=>(he,Ie)=>{const Be=he.nativeEvent,$e=_.get(Ie);if(G.current!==null||!$e||Be.dndKit||Be.defaultPrevented)return;const Ye={active:$e};z(he,Z.options,Ye)===!0&&(Be.dndKit={capturedBy:Z.sensor},G.current=Ie,rr(he,Z))},[_,rr]),Vn=p3(m,zn);N3(m),$n(()=>{pe&&D===Er.Initializing&&I(Er.Initialized)},[pe,D]),w.useEffect(()=>{const{onDragMove:z}=Q.current,{active:Z,activatorEvent:he,collisions:Ie,over:Be}=De.current;if(!Z||!he)return;const $e={active:Z,activatorEvent:he,collisions:Ie,delta:{x:Gt.x,y:Gt.y},over:Be};tr.unstable_batchedUpdates(()=>{z?.($e),R({type:"onDragMove",event:$e})})},[Gt.x,Gt.y]),w.useEffect(()=>{const{active:z,activatorEvent:Z,collisions:he,droppableContainers:Ie,scrollAdjustedTranslate:Be}=De.current;if(!z||G.current==null||!Z||!Be)return;const{onDragOver:$e}=Q.current,Ye=Ie.get(In),It=Ye&&Ye.rect.current?{id:Ye.id,rect:Ye.rect.current,data:Ye.data,disabled:Ye.disabled}:null,Ve={active:z,activatorEvent:Z,collisions:he,delta:{x:Be.x,y:Be.y},over:It};tr.unstable_batchedUpdates(()=>{oo(It),$e?.(Ve),R({type:"onDragOver",event:Ve})})},[In]),$n(()=>{De.current={activatorEvent:se,active:$,activeNode:de,collisionRect:Ht,collisions:An,droppableRects:ae,draggableNodes:_,draggingNode:_e,draggingNodeRect:rt,droppableContainers:J,over:St,scrollableAncestors:ot,scrollAdjustedTranslate:Gt},L.current={initial:rt,translated:Ht}},[$,de,An,Ht,_,_e,rt,ae,J,St,ot,Gt]),u3({...ge,delta:K,draggingRect:Ht,pointerCoordinates:Rr,scrollableAncestors:ot,scrollableAncestorRects:lt});const Or=w.useMemo(()=>({active:$,activeNode:de,activeNodeRect:pe,activatorEvent:se,collisions:An,containerNodeRect:Re,dragOverlay:Pe,draggableNodes:_,droppableContainers:J,droppableRects:ae,over:St,measureDroppableContainers:fe,scrollableAncestors:ot,scrollableAncestorRects:lt,measuringConfiguration:U,measuringScheduled:ne,windowRect:pn}),[$,de,pe,se,An,Re,Pe,_,J,ae,St,fe,ot,lt,U,ne,pn]),or=w.useMemo(()=>({activatorEvent:se,activators:Vn,active:$,activeNodeRect:pe,ariaDescribedById:{draggable:Y},dispatch:j,draggableNodes:_,over:St,measureDroppableContainers:fe}),[se,Vn,$,pe,j,Y,_,St,fe]);return we.createElement(Sv.Provider,{value:A},we.createElement(rl.Provider,{value:or},we.createElement(Fv.Provider,{value:Or},we.createElement($v.Provider,{value:io},p)),we.createElement(T3,{disabled:f?.restoreFocus===!1})),we.createElement(O5,{...f,hiddenTextDescribedById:Y}));function Pn(){const z=X?.autoScrollEnabled===!1,Z=typeof h=="object"?h.enabled===!1:h===!1,he=T&&!z&&!Z;return typeof h=="object"?{...h,enabled:he}:{enabled:he}}}),B3=w.createContext(null),_g="button",F3="Draggable";function $3(e){let{id:n,data:o,disabled:s=!1,attributes:l}=e;const a=ii(F3),{activators:u,activatorEvent:f,active:h,activeNodeRect:p,ariaDescribedById:m,draggableNodes:g,over:x}=w.useContext(rl),{role:b=_g,roleDescription:C="draggable",tabIndex:E=0}=l??{},S=h?.id===n,j=w.useContext(S?$v:B3),[R,A]=Ba(),[D,I]=Ba(),T=C3(u,n),M=Qs(o);$n(()=>(g.set(n,{id:n,key:a,node:R,activatorNode:D,data:M}),()=>{const K=g.get(n);K&&K.key===a&&g.delete(n)}),[g,n]);const _=w.useMemo(()=>({role:b,tabIndex:E,"aria-disabled":s,"aria-pressed":S&&b===_g?!0:void 0,"aria-roledescription":C,"aria-describedby":m.draggable}),[s,b,E,S,C,m.draggable]);return{active:h,activatorEvent:f,activeNodeRect:p,attributes:_,isDragging:S,listeners:s?void 0:T,node:R,over:x,setNodeRef:A,setActivatorNodeRef:I,transform:j}}function U3(){return w.useContext(Fv)}const z3="Droppable",V3={timeout:25};function G3(e){let{data:n,disabled:o=!1,id:s,resizeObserverConfig:l}=e;const a=ii(z3),{active:u,dispatch:f,over:h,measureDroppableContainers:p}=w.useContext(rl),m=w.useRef({disabled:o}),g=w.useRef(!1),x=w.useRef(null),b=w.useRef(null),{disabled:C,updateMeasurementsFor:E,timeout:S}={...V3,...l},j=Qs(E??s),R=w.useCallback(()=>{if(!g.current){g.current=!0;return}b.current!=null&&clearTimeout(b.current),b.current=setTimeout(()=>{p(Array.isArray(j.current)?j.current:[j.current]),b.current=null},S)},[S]),A=nl({callback:R,disabled:C||!u}),D=w.useCallback((_,K)=>{A&&(K&&(A.unobserve(K),g.current=!1),_&&A.observe(_))},[A]),[I,T]=Ba(D),M=Qs(n);return w.useEffect(()=>{!A||!I.current||(A.disconnect(),g.current=!1,A.observe(I.current))},[I,A]),w.useEffect(()=>(f({type:at.RegisterDroppable,element:{id:s,key:a,disabled:o,node:I,rect:x,data:M}}),()=>f({type:at.UnregisterDroppable,key:a,id:s})),[s]),w.useEffect(()=>{o!==m.current.disabled&&(f({type:at.SetDroppableDisabled,id:s,key:a,disabled:o}),m.current.disabled=o)},[s,a,o,f]),{active:u,rect:x,isOver:h?.id===s,node:I,over:h,setNodeRef:T}}function Hd(e,n,o){const s=e.slice();return s.splice(o<0?s.length+o:o,0,s.splice(n,1)[0]),s}function H3(e,n){return e.reduce((o,s,l)=>{const a=n.get(s);return a&&(o[l]=a),o},Array(e.length))}function ba(e){return e!==null&&e>=0}function W3(e,n){if(e===n)return!0;if(e.length!==n.length)return!1;for(let o=0;o<e.length;o++)if(e[o]!==n[o])return!1;return!0}function q3(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const Wd=e=>{let{rects:n,activeIndex:o,overIndex:s,index:l}=e;const a=Hd(n,s,o),u=n[l],f=a[l];return!f||!u?null:{x:f.left-u.left,y:f.top-u.top,scaleX:f.width/u.width,scaleY:f.height/u.height}},Uv="Sortable",zv=we.createContext({activeIndex:-1,containerId:Uv,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:Wd,disabled:{draggable:!1,droppable:!1}});function K3(e){let{children:n,id:o,items:s,strategy:l=Wd,disabled:a=!1}=e;const{active:u,dragOverlay:f,droppableRects:h,over:p,measureDroppableContainers:m}=U3(),g=ii(Uv,o),x=f.rect!==null,b=w.useMemo(()=>s.map(T=>typeof T=="object"&&"id"in T?T.id:T),[s]),C=u!=null,E=u?b.indexOf(u.id):-1,S=p?b.indexOf(p.id):-1,j=w.useRef(b),R=!W3(b,j.current),A=S!==-1&&E===-1||R,D=q3(a);$n(()=>{R&&C&&m(b)},[R,b,C,m]),w.useEffect(()=>{j.current=b},[b]);const I=w.useMemo(()=>({activeIndex:E,containerId:g,disabled:D,disableTransforms:A,items:b,overIndex:S,useDragOverlay:x,sortedRects:H3(b,h),strategy:l}),[E,g,D.draggable,D.droppable,A,b,S,h,x,l]);return we.createElement(zv.Provider,{value:I},n)}const Y3=e=>{let{id:n,items:o,activeIndex:s,overIndex:l}=e;return Hd(o,s,l).indexOf(n)},Q3=e=>{let{containerId:n,isSorting:o,wasDragging:s,index:l,items:a,newIndex:u,previousItems:f,previousContainerId:h,transition:p}=e;return!p||!s||f!==a&&l===u?!1:o?!0:u!==l&&n===h},J3={duration:200,easing:"ease"},Vv="transform",X3=Xs.Transition.toString({property:Vv,duration:0,easing:"linear"}),Z3={roleDescription:"sortable"};function eE(e){let{disabled:n,index:o,node:s,rect:l}=e;const[a,u]=w.useState(null),f=w.useRef(o);return $n(()=>{if(!n&&o!==f.current&&s.current){const h=l.current;if(h){const p=Uo(s.current,{ignoreTransform:!0}),m={x:h.left-p.left,y:h.top-p.top,scaleX:h.width/p.width,scaleY:h.height/p.height};(m.x||m.y)&&u(m)}}o!==f.current&&(f.current=o)},[n,o,s,l]),w.useEffect(()=>{a&&u(null)},[a]),a}function tE(e){let{animateLayoutChanges:n=Q3,attributes:o,disabled:s,data:l,getNewIndex:a=Y3,id:u,strategy:f,resizeObserverConfig:h,transition:p=J3}=e;const{items:m,containerId:g,activeIndex:x,disabled:b,disableTransforms:C,sortedRects:E,overIndex:S,useDragOverlay:j,strategy:R}=w.useContext(zv),A=nE(s,b),D=m.indexOf(u),I=w.useMemo(()=>({sortable:{containerId:g,index:D,items:m},...l}),[g,l,D,m]),T=w.useMemo(()=>m.slice(m.indexOf(u)),[m,u]),{rect:M,node:_,isOver:K,setNodeRef:J}=G3({id:u,data:I,disabled:A.droppable,resizeObserverConfig:{updateMeasurementsFor:T,...h}}),{active:te,activatorEvent:L,activeNodeRect:$,attributes:G,setNodeRef:X,listeners:ee,isDragging:se,over:q,setActivatorNodeRef:Q,transform:Y}=$3({id:u,data:I,attributes:{...Z3,...o},disabled:A.draggable}),k=N5(J,X),U=!!te,ae=U&&!C&&ba(x)&&ba(S),fe=!j&&se,ne=fe&&ae?Y:null,Ee=ae?ne??(f??R)({rects:E,activeNodeRect:$,activeIndex:x,overIndex:S,index:D}):null,ge=ba(x)&&ba(S)?a({id:u,items:m,activeIndex:x,overIndex:S}):D,le=te?.id,pe=w.useRef({activeId:le,items:m,newIndex:ge,containerId:g}),Re=m!==pe.current.items,De=n({active:te,containerId:g,isDragging:se,isSorting:U,id:u,index:D,items:m,newIndex:pe.current.newIndex,previousItems:pe.current.items,previousContainerId:pe.current.containerId,transition:p,wasDragging:pe.current.activeId!=null}),xe=eE({disabled:!De,index:D,node:_,rect:M});return w.useEffect(()=>{U&&pe.current.newIndex!==ge&&(pe.current.newIndex=ge),g!==pe.current.containerId&&(pe.current.containerId=g),m!==pe.current.items&&(pe.current.items=m)},[U,ge,g,m]),w.useEffect(()=>{if(le===pe.current.activeId)return;if(le!=null&&pe.current.activeId==null){pe.current.activeId=le;return}const _e=setTimeout(()=>{pe.current.activeId=le},50);return()=>clearTimeout(_e)},[le]),{active:te,activeIndex:x,attributes:G,data:I,rect:M,index:D,newIndex:ge,items:m,isOver:K,isSorting:U,isDragging:se,listeners:ee,node:_,overIndex:S,over:q,setNodeRef:k,setActivatorNodeRef:Q,setDroppableNodeRef:J,setDraggableNodeRef:X,transform:xe??Ee,transition:Pe()};function Pe(){if(xe||Re&&pe.current.newIndex===D)return X3;if(!(fe&&!$d(L)||!p)&&(U||De))return Xs.Transition.toString({...p,property:Vv})}}function nE(e,n){var o,s;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(o=e?.draggable)!=null?o:n.draggable,droppable:(s=e?.droppable)!=null?s:n.droppable}}function Ua(e){if(!e)return!1;const n=e.data.current;return!!(n&&"sortable"in n&&typeof n.sortable=="object"&&"containerId"in n.sortable&&"items"in n.sortable&&"index"in n.sortable)}const rE=[Me.Down,Me.Right,Me.Up,Me.Left],oE=(e,n)=>{let{context:{active:o,collisionRect:s,droppableRects:l,droppableContainers:a,over:u,scrollableAncestors:f}}=n;if(rE.includes(e.code)){if(e.preventDefault(),!o||!s)return;const h=[];a.getEnabled().forEach(g=>{if(!g||g!=null&&g.disabled)return;const x=l.get(g.id);if(x)switch(e.code){case Me.Down:s.top<x.top&&h.push(g);break;case Me.Up:s.top>x.top&&h.push(g);break;case Me.Left:s.left>x.left&&h.push(g);break;case Me.Right:s.left<x.left&&h.push(g);break}});const p=F5({collisionRect:s,droppableRects:l,droppableContainers:h});let m=jv(p,"id");if(m===u?.id&&p.length>1&&(m=p[1].id),m!=null){const g=a.get(o.id),x=a.get(m),b=x?l.get(x.id):null,C=x?.node.current;if(C&&b&&g&&x){const S=tl(C).some((T,M)=>f[M]!==T),j=Gv(g,x),R=sE(g,x),A=S||!j?{x:0,y:0}:{x:R?s.width-b.width:0,y:R?s.height-b.height:0},D={x:b.left,y:b.top};return A.x&&A.y?D:Js(D,A)}}}};function Gv(e,n){return!Ua(e)||!Ua(n)?!1:e.data.current.sortable.containerId===n.data.current.sortable.containerId}function sE(e,n){return!Ua(e)||!Ua(n)||!Gv(e,n)?!1:e.data.current.sortable.index<n.data.current.sortable.index}const Ts=()=>/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||"ontouchstart"in window||navigator.maxTouchPoints>0,iE=({addedChords:e,activeChordIndex:n,playbackStore:o,isLiveMode:s})=>{const l=_5(Au(Gd,{activationConstraint:Ts()?{delay:300,tolerance:8}:{distance:8}}),Au(_v,{activationConstraint:{delay:400,tolerance:10}}),Au(zd,{coordinateGetter:oE})),a=w.useCallback(()=>{if(document.body.classList.add("dragging"),Ts()){document.body.style.overflow="hidden",document.body.style.overscrollBehavior="none",document.body.style.touchAction="none",document.body.style.userSelect="none",document.body.style.webkitUserSelect="none",document.documentElement.style.overscrollBehavior="none",document.documentElement.style.touchAction="none";const m=document.querySelector('meta[name="viewport"]');m&&(m.setAttribute("data-original-content",m.getAttribute("content")||""),m.setAttribute("content","width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"))}},[]),u=w.useCallback(()=>{if(document.body.classList.remove("dragging"),Ts()){document.body.style.overflow="",document.body.style.overscrollBehavior="",document.body.style.touchAction="",document.body.style.userSelect="",document.body.style.webkitUserSelect="",document.documentElement.style.overscrollBehavior="",document.documentElement.style.touchAction="";const m=document.querySelector('meta[name="viewport"]');if(m){const g=m.getAttribute("data-original-content");g&&(m.setAttribute("content",g),m.removeAttribute("data-original-content"))}}},[]),f=w.useCallback(m=>{const{active:g,over:x}=m;if(document.body.classList.remove("dragging"),Ts()){document.body.style.overflow="",document.body.style.overscrollBehavior="",document.body.style.touchAction="",document.body.style.userSelect="",document.body.style.webkitUserSelect="",document.documentElement.style.overscrollBehavior="",document.documentElement.style.touchAction="";const b=document.querySelector('meta[name="viewport"]');if(b){const C=b.getAttribute("data-original-content");C&&(b.setAttribute("content",C),b.removeAttribute("data-original-content"))}}if(x&&g.id!==x.id){const b=parseInt(g.id.toString().replace("chord-","")),C=parseInt(x.id.toString().replace("chord-",""));if(!isNaN(b)&&!isNaN(C)&&b>=0&&b<e.length&&C>=0&&C<e.length){const E=Hd(e,b,C);console.log("Reordered chords:",E.map(S=>S.name)),o.setAddedChords(E),n!==null&&(n===b?o.setActiveChordIndex(C):b<n&&C>=n?o.setActiveChordIndex(n-1):b>n&&C<=n&&o.setActiveChordIndex(n+1))}}},[e,n,o]),h=w.useCallback(m=>{if(!m.destination)return;const g=m.source.index,x=m.destination.index;if(g===x)return;const b=Array.from(e),[C]=b.splice(g,1);b.splice(x,0,C),o.setAddedChords(b),n!==null&&(n===g?o.setActiveChordIndex(x):g<n&&x>=n?o.setActiveChordIndex(n-1):g>n&&x<=n&&o.setActiveChordIndex(n+1))},[e,n,o]),p=w.useCallback(m=>{const{containerNodeRect:g,draggingNodeRect:x,transform:b}=m;if(!g||!x)return b;const C=Ts()?20:10,E=g.left+C,S=g.right-C,j=g.top+C,R=g.bottom-C,A=x.left+b.x,D=x.right+b.x,I=x.top+b.y,T=x.bottom+b.y;let M=b.x,_=b.y;return A<E?M=E-x.left:D>S&&(M=S-x.right),I<j?_=j-x.top:T>R&&(_=R-x.bottom),{...b,x:M,y:_}},[]);return{sensors:l,handleDragStart:a,handleDragCancel:u,handleDragEndDndKit:f,handleDragEnd:h,restrictToContainer:p}},aE=({isLiveMode:e,isEditMode:n,isDeleteMode:o,isCompactHeight:s,globalPatternState:l,addedChords:a,onTogglePlayback:u,onToggleLiveMode:f,onClearAll:h,onToggleDeleteMode:p})=>c.jsxs("div",{className:`${e?"flex-shrink-0":""} max-w-7xl mx-auto px-4 ${e?s?"pt-2 z-10":"pt-4 z-10":"pt-2"} w-full`,children:[c.jsxs("div",{className:`flex items-center justify-between ${e?s?"mb-1":"mb-3":"mb-2"}`,children:[c.jsxs("div",{className:"flex items-center space-x-4",children:[!e&&c.jsx(Sn,{onClick:u,variant:"icon",size:"icon",active:l.isPlaying,title:l.isPlaying?"Stop":"Play",children:l.isPlaying?c.jsx(Us,{className:"w-4 h-4"}):c.jsx(Yg,{className:"w-4 h-4"})}),e&&c.jsx(Sn,{onClick:u,variant:"play-stop",size:"sm",active:l.isPlaying,className:"shadow-lg",children:l.isPlaying?c.jsxs(c.Fragment,{children:[c.jsx(Us,{className:"w-4 h-4"})," Stop"]}):c.jsxs(c.Fragment,{children:[c.jsx(zs,{className:"w-4 h-4"})," Play"]})})]}),c.jsxs("div",{className:"text-center sm:w-full sm:text-left sm:mx-4",children:[c.jsxs("div",{className:"hidden sm:block text-xs font-bold text-slate-300 uppercase tracking-wider",children:["chords ",n&&c.jsx("span",{className:"text-blue-400",children:"(drag to reorder)"})]}),c.jsxs("div",{className:"block sm:hidden text-xs text-slate-300 uppercase tracking-wider",children:["chords ",n&&c.jsx("span",{className:"text-blue-400",children:"(drag)"})]})]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("button",{onClick:f,className:pt("w-[7em] h-8 flex items-center space-x-2 px-3 py-1.5 text-xs border rounded transition-all duration-200",e?"text-slate-200 bg-[#4a5262] border-gray-600 hover:bg-[#525a6b]":"text-slate-300 hover:text-slate-200 bg-[#4a5262] hover:bg-[#525a6b] border-gray-600"),children:e?c.jsxs(c.Fragment,{children:[c.jsx(r1,{className:"h-3 w-3"}),c.jsx("span",{children:"Collapse"})]}):c.jsxs(c.Fragment,{children:[c.jsx(s1,{className:"h-3 w-3"}),c.jsx("span",{children:"Expand"})]})}),!e&&c.jsxs(c.Fragment,{children:[c.jsx("button",{onClick:()=>{e&&f(),h()},className:"w-[5em] h-8 flex items-center justify-center px-3 py-1.5 text-xs text-slate-300 hover:text-slate-200 bg-[#4a5262] hover:bg-[#525a6b] border border-gray-600 rounded transition-all duration-200",children:"Clear"}),c.jsxs("button",{onClick:p,className:pt("w-[7em] h-8 flex items-center space-x-2 px-3 py-1.5 text-xs border rounded transition-all duration-200",o?"text-white bg-red-600 border-red-500 hover:bg-red-700":"text-slate-300 hover:text-slate-200 bg-[#4a5262] hover:bg-[#525a6b] border-gray-600"),children:[c.jsx(Jg,{className:"h-3 w-3"}),c.jsx("span",{children:o?"Done":"Delete"})]})]})]})]}),e&&!s&&c.jsxs("div",{className:"mb-4 text-sm text-center text-slate-400",children:[c.jsxs("div",{children:["Use 1-",Math.min(a.length,9)," or click chords"]}),c.jsxs("div",{className:"mt-2 text-xs",children:[c.jsx("span",{className:"inline-block w-3 h-3 mr-2 bg-blue-500 rounded-full"}),"Active Chord",n&&c.jsxs(c.Fragment,{children:[c.jsx("span",{className:"mx-2",children:"•"}),c.jsx("span",{className:"text-blue-400",children:"Drag chords to reorder"})]})]})]})]});function lE(e,n,o){const s={...e};return n.top+e.y<=o.top?s.y=o.top-n.top:n.bottom+e.y>=o.top+o.height&&(s.y=o.top+o.height-n.bottom),n.left+e.x<=o.left?s.x=o.left-n.left:n.right+e.x>=o.left+o.width&&(s.x=o.left+o.width-n.right),s}const cE=e=>{let{containerNodeRect:n,draggingNodeRect:o,transform:s}=e;return!o||!n?s:lE(s,o,n)},uE=({id:e,index:n,chord:o,onEdit:s,renderChordButton:l})=>{const{attributes:a,listeners:u,setNodeRef:f,transform:h,transition:p,isDragging:m}=tE({id:e}),g={transform:Xs.Transform.toString(h),transition:m?"none":p},x={...a,style:{userSelect:"none",webkitUserSelect:"none",...g}};return c.jsx("div",{ref:f,...x,...u,className:"mobile-drag-item",style:{WebkitTouchCallout:"none",WebkitTapHighlightColor:"transparent",...x.style},children:l(o,n,m,s)})},Fn={DRAG_STYLES:`
        .dragging {
            overflow: hidden !important;
            touch-action: none !important;
            overscroll-behavior: none !important;
            -webkit-overflow-scrolling: auto !important;
        }
        
        .dragging * {
            pointer-events: none !important;
        }
        
        .dragging .mobile-drag-item,
        .dragging .mobile-drag-item * {
            pointer-events: auto !important;
        }
        
        @media (max-width: 768px) {
            .dragging {
                -webkit-user-select: none !important;
                user-select: none !important;
            }
        }
    `,GRID_CLASSES:{LIVE_MODE:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4 auto-rows-max pt-0",COLLAPSED_MODE:"flex space-x-2 overflow-x-auto pb-2 chord-sequence-scroll -mx-2 px-2"},BUTTON_SIZES:{LIVE_DESKTOP:{container:"py-8 px-6 text-lg min-h-[120px] flex flex-col items-center justify-center",number:"text-xl mb-2",name:"text-base text-center text-white",icon:"h-6 w-6"},LIVE_MOBILE:{container:"py-8 px-6 text-lg min-h-[140px] flex flex-col items-center justify-center",number:"text-xl mb-2",name:"text-base text-center text-white",icon:"h-6 w-6"},COLLAPSED:{container:"py-4 px-2 text-sm min-w-[85px] bottom-nav-button chord-button space-x-1 mt-1 min-h-[60px] !min-w-[70px] flex flex-col items-center justify-center",number:"text-xs mb-1",name:"text-xs",icon:"h-4 w-4"}},MOBILE_USER_AGENTS:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i},dE=()=>Fn.MOBILE_USER_AGENTS.test(navigator.userAgent)||"ontouchstart"in window||navigator.maxTouchPoints>0,fE=({isLiveMode:e,isEditMode:n,onClick:o})=>c.jsx("button",{onClick:o,className:pt("flex items-center justify-center rounded-lg border-2 border-dashed transition-all duration-200",e?"w-full h-full min-h-[120px] py-8 px-6":"w-12 h-12",n?"border-blue-500 text-blue-400 bg-blue-500/10 hover:bg-blue-500/20":"border-gray-500 text-gray-400 hover:border-gray-400 hover:text-gray-300 hover:bg-gray-500/10"),title:n?"Exit edit mode":"Edit chords",style:{minHeight:e&&dE()?"140px":void 0},children:c.jsx(Lu,{className:pt(e?"w-8 h-8":"w-6 h-6",{"animate-spin":n})})}),Lg=()=>Fn.MOBILE_USER_AGENTS.test(navigator.userAgent)||"ontouchstart"in window||navigator.maxTouchPoints>0,hE=({children:e,onClick:n,onTouchStart:o,onTouchEnd:s,className:l="",variant:a="primary",size:u="md",disabled:f=!1,active:h=!1,"aria-label":p,"aria-expanded":m,type:g="button",title:x,style:b,chord:C,index:E,isLiveMode:S,isDeleteMode:j,isEditMode:R,isHighlighted:A,isDragging:D,sizeConfig:I})=>{const T=`
    font-medium transition-all duration-200 rounded-md border
    focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-[#2a2f38]
    disabled:opacity-50 disabled:cursor-not-allowed
    flex items-center justify-center gap-1
  `,M={sm:"py-1 px-3 text-xs",md:"py-2 px-4 text-sm",lg:"py-3 px-6 text-base"},_={primary:h?"bg-blue-600 border-blue-500 text-white focus:ring-blue-500":"bg-blue-700 border-blue-600 hover:bg-blue-600 hover:border-blue-500 text-white focus:ring-blue-500",secondary:h?"bg-[#525a6b] border-gray-500 text-white focus:ring-gray-500":"bg-[#4a5262] border-gray-600 hover:bg-[#525a6b] hover:border-gray-500 text-white focus:ring-gray-500",danger:h?"bg-red-600 border-red-500 text-white focus:ring-red-500":"bg-red-700 border-red-600 hover:bg-red-600 hover:border-red-500 text-white focus:ring-red-500",success:h?"bg-green-600 border-green-500 text-white focus:ring-green-500":"bg-green-700 border-green-600 hover:bg-green-600 hover:border-green-500 text-white focus:ring-green-500"},K=C?pt(T,I?"":M[u],_[a],{transform:A,"shadow-xl":S,"border-blue-500 hover:border-blue-400":R,"cursor-grab active:cursor-grabbing":R&&!Lg(),"opacity-80 shadow-2xl scale-105":D,"select-none":R},l):pt(T,M[u],_[a],l);return C&&typeof E=="number"?c.jsxs("button",{type:g,onClick:n,onTouchStart:o,onTouchEnd:s,disabled:f,"aria-label":p,"aria-expanded":m,title:x,style:b,className:K,children:[j&&c.jsx(Bu,{className:`absolute top-1 right-1 text-white bg-red-500 rounded-full shadow-sm ${S?"h-6 w-6":"h-4 w-4"}`}),R&&c.jsxs(c.Fragment,{children:[c.jsx(Lu,{className:`absolute top-1 right-1 text-white bg-blue-500 rounded-full shadow-sm p-0.5 ${S?"h-6 w-6":"h-4 w-4"}`}),c.jsx(Lu,{className:"absolute rounded-md  right-0 h-full w-full opacity-0"})]}),R&&Lg()&&c.jsx("div",{className:"absolute inset-0 w-full bg-blue-500/5 border-2 border-blue-500/20 rounded-lg pointer-events-none"}),c.jsx("div",{className:`text-blue-200 font-bold ${I?.number||"text-xl mb-2"}`,children:E+1}),c.jsx("div",{className:`leading-tight ${I?.name||"text-base text-center text-white"}`,children:C.name}),S&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"mt-4 text-xs text-center text-slate-300",children:C.notes.replace(/,/g," • ")}),c.jsx("div",{className:"mt-1 font-mono text-xs text-center text-slate-300",children:C.pattern.join("-")})]})]}):c.jsx("button",{type:g,onClick:n,onTouchStart:o,onTouchEnd:s,disabled:f,"aria-label":p,"aria-expanded":m,title:x,style:b,className:K,children:e})},Tu=()=>Fn.MOBILE_USER_AGENTS.test(navigator.userAgent)||"ontouchstart"in window||navigator.maxTouchPoints>0,pE=w.forwardRef(({isLiveMode:e,isEditMode:n,isDeleteMode:o,isCompactHeight:s,addedChords:l,activeChordIndex:a,highlightedChordIndex:u,sensors:f,onChordClick:h,onEditChord:p,onSetEditMode:m,onDragStart:g,onDragEnd:x,onDragEndDndKit:b,onDragCancel:C},E)=>{const S=(I,T,M=!1,_)=>{const K=T===a,J=T===u,te=X=>{console.log("Button clicked!",{isEditMode:n,hasOnEdit:!!_,index:T}),X.stopPropagation(),X.preventDefault(),n&&_?(console.log("Opening editor for chord",T),_(T)):n||(console.log("Playing chord",T),h(I.notes,T))},L=X=>{n||(X.currentTarget.style.transform="scale(0.95)")},$=X=>{n||(X.currentTarget.style.transform="")},G=e?Tu()?Fn.BUTTON_SIZES.LIVE_MOBILE:Fn.BUTTON_SIZES.LIVE_DESKTOP:Fn.BUTTON_SIZES.COLLAPSED;return c.jsx(hE,{onClick:te,onTouchStart:L,onTouchEnd:$,variant:o?"danger":n?"secondary":"primary",active:K&&!o&&!n,"aria-label":`Pattern: ${I.pattern.join("-")}`,className:`relative w-full h-full mobile-drag-item ${G.container}`,style:{touchAction:n?void 0:"auto"},chord:I,index:T,isLiveMode:e,isDeleteMode:o,isEditMode:n,isHighlighted:J,isDragging:M,sizeConfig:G},T)},j=c.jsx(fE,{isLiveMode:e,isEditMode:n,onClick:()=>m(!n)}),R=e?c.jsxs("div",{className:Fn.GRID_CLASSES.LIVE_MODE,children:[l.map((I,T)=>c.jsx("div",{children:S(I,T)},T)),c.jsx("div",{children:j})]}):c.jsxs("div",{className:Fn.GRID_CLASSES.COLLAPSED_MODE,children:[l.map((I,T)=>c.jsx("div",{className:"flex-shrink-0",children:S(I,T)},T)),c.jsx("div",{className:"flex-shrink-0 py-4 px-2 min-w-[85px] min-h-[60px] mt-1 flex items-center justify-center",children:j})]}),A=e?c.jsx(L3,{sensors:f,collisionDetection:B5,onDragStart:g,onDragEnd:b,onDragCancel:C,modifiers:[cE],children:c.jsx(K3,{items:l.map((I,T)=>`chord-${T}`),strategy:Wd,children:c.jsxs("div",{className:Fn.GRID_CLASSES.LIVE_MODE,style:{gap:"1rem"},children:[l.map((I,T)=>c.jsx(uE,{id:`chord-${T}`,index:T,chord:I,onEdit:p,renderChordButton:S},`${I.name}-${I.notes}-${T}`)),c.jsx("div",{children:j})]})})}):c.jsx(dv,{onDragEnd:x,children:c.jsx(wv,{droppableId:"chord-list",direction:"horizontal",children:I=>c.jsxs("div",{ref:I.innerRef,...I.droppableProps,className:"flex pb-2 -mx-2 overflow-x-auto space-x-2 px-2 chord-sequence-scroll",children:[l.map((T,M)=>c.jsx(gv,{draggableId:`chord-${M}`,index:M,children:(_,K)=>c.jsx("div",{ref:_.innerRef,..._.draggableProps,..._.dragHandleProps,className:"flex-shrink-0",children:S(T,M,K.isDragging,p)})},`chord-${M}`)),I.placeholder,c.jsx("div",{className:"flex-shrink-0 py-4 px-2 min-w-[85px] min-h-[60px] mt-1 flex items-center justify-center",children:j})]})})}),D=e&&!n?{WebkitOverflowScrolling:"touch",touchAction:"pan-y",overscrollBehavior:"contain",position:"relative",zIndex:1}:e&&n?{WebkitOverflowScrolling:Tu()?"auto":"touch",touchAction:Tu()?"pan-y":"auto",overscrollBehavior:"contain",position:"relative",zIndex:1}:void 0;return c.jsx("div",{ref:E,className:`flex-1 max-w-7xl mx-auto w-full ${e?`px-4 pb-8 ${s?"pt-1":"pt-2"} overflow-y-auto`:"px-2 pb-1"}`,style:D,children:n?A:R})}),mE=({isEditMode:e,isDeleteMode:n,addedChords:o,onClearAll:s,onToggleDeleteMode:l})=>c.jsx("div",{className:"flex-shrink-0 bg-[#2a2f38] border-t border-gray-600 px-4 py-3",children:c.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[c.jsxs("div",{className:"text-xs font-medium text-slate-400 mr-3",children:[o.length," chord",o.length!==1?"s":""," loaded",e&&c.jsx("span",{className:"ml-2 text-blue-400",children:"• Edit Mode: Click chords to edit"})]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("button",{onClick:s,className:"w-[5em] h-8 flex items-center justify-center px-3 py-1.5 text-xs text-slate-300 hover:text-slate-200 bg-[#4a5262] hover:bg-[#525a6b] border border-gray-600 rounded transition-all duration-200",children:"Clear"}),c.jsxs("button",{onClick:l,className:pt("w-[7em] h-8 flex items-center space-x-2 px-3 py-1.5 text-xs border rounded transition-all duration-200",n?"text-white bg-red-600 border-red-500 hover:bg-red-700":"text-slate-300 hover:text-slate-200 bg-[#4a5262] hover:bg-[#525a6b] border-gray-600"),children:[c.jsx(Jg,{className:"h-3 w-3"}),c.jsx("span",{children:n?"Done":"Delete"})]})]})]})}),gE=()=>{const e=Xt(),n=Dn(),o=no(),s=qg(),{addedChords:l,activeChordIndex:a,highlightedChordIndex:u}=n,{isDeleteMode:f,isLiveMode:h}=s,{globalPatternState:p}=o,{chords:m}=e,[g,x]=w.useState(null),{isEditMode:b,setIsEditMode:C,isCompactHeight:E,scrollContainerRef:S,handleChordClick:j,handleUpdateChord:R,handleEditChord:A,handleCloseEditor:D,handleNavigateToChord:I,handleClearAll:T,handleTogglePlayback:M,handleToggleDeleteMode:_,handleToggleLiveMode:K}=w5({musicStore:e,playbackStore:n,patternStore:o,uiStore:s,setEditingChordIndex:x}),{sensors:J,handleDragStart:te,handleDragCancel:L,handleDragEndDndKit:$,handleDragEnd:G}=iE({addedChords:l,activeChordIndex:a,playbackStore:n,isLiveMode:h});if(l.length===0)return null;if(g!==null){const ee=l[g];if(ee)return c.jsx(x5,{editingChordIndex:g,editingChord:ee,totalChords:l.length,chords:m,onUpdateChord:R,onFetchOriginalChord:n.handleFetchOriginalChord,onChordClick:j,onClose:D,onNavigateToChord:I})}const X=h?"fixed inset-0 bg-[#1a1e24] bg-opacity-95 backdrop-blur-sm z-50 flex flex-col":"fixed bottom-0 left-0 right-0 bg-[#2a2f38] bg-[#363c46] border-t border-gray-600 shadow-2xl z-50";return c.jsxs("div",{className:X,style:h?{touchAction:"none",overscrollBehavior:"none"}:void 0,children:[c.jsx("style",{children:Fn.DRAG_STYLES}),c.jsx(aE,{isLiveMode:h,isEditMode:b,isDeleteMode:f,isCompactHeight:E,globalPatternState:p,addedChords:l,onTogglePlayback:M,onToggleLiveMode:K,onClearAll:T,onToggleDeleteMode:_}),c.jsx(pE,{ref:S,isLiveMode:h,isEditMode:b,isDeleteMode:f,isCompactHeight:E,addedChords:l,activeChordIndex:a,highlightedChordIndex:u,sensors:J,onChordClick:j,onEditChord:A,onSetEditMode:C,onDragStart:te,onDragEnd:G,onDragEndDndKit:$,onDragCancel:L}),h&&c.jsx(mE,{isEditMode:b,isDeleteMode:f,addedChords:l,onClearAll:T,onToggleDeleteMode:_})]})},td=({size:e=48,className:n=""})=>c.jsxs("div",{className:`relative flex items-center ${n}`,children:[c.jsx("div",{className:"relative",style:{width:e,height:e},children:c.jsxs("svg",{viewBox:"0 0 48 48",style:{width:e,height:e},children:[c.jsx("polygon",{points:"24,2 38,12 38,28 24,38 10,28 10,12",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"text-slate-300"}),c.jsx("circle",{cx:"18",cy:"20",r:"2",fill:"currentColor",className:"text-slate-400"}),c.jsx("circle",{cx:"30",cy:"20",r:"2",fill:"currentColor",className:"text-slate-400"}),c.jsx("circle",{cx:"24",cy:"28",r:"2",fill:"currentColor",className:"text-slate-400"}),c.jsx("line",{x1:"18",y1:"20",x2:"24",y2:"28",stroke:"currentColor",strokeWidth:"1.5",className:"text-slate-400"}),c.jsx("line",{x1:"30",y1:"20",x2:"24",y2:"28",stroke:"currentColor",strokeWidth:"1.5",className:"text-slate-400"}),c.jsx("line",{x1:"18",y1:"20",x2:"30",y2:"20",stroke:"currentColor",strokeWidth:"1.5",className:"text-slate-400"})]})}),c.jsx("div",{className:"absolute -top-1 -right-0 w-2 h-2 border border-slate-400 transform rotate-45"})]}),vE=()=>({transposeChords:w.useCallback(async(n,o,s,l)=>{console.log("Transposing from",n,o,"to",s,l);const a=Dn.getState().addedChords;if(console.log("Current chords to transpose:",a.length),a.length===0)return;const u=n!==s?Gg(n,s):0,[f,h]=await Promise.all([Dr.getModeKeyChords(s,l),Dr.getAllDistinctChords()]),p=a.map(m=>{const g=u!==0?Wg(m.name,u):m.name;let x=f.find(b=>b.chordName===g)||h.find(b=>b.chordName===g);if(x||console.log(`Chord ${g} not in ${s} ${l}, found in all chords:`,!1),x?.chordNoteNames)return{...m,name:g,notes:x.chordNoteNames,originalKey:s,originalMode:l,originalNotes:x.chordNoteNames};{console.log(`Chord ${g} not found, manually transposing notes`);const b=u!==0?Da(m.notes,u):m.notes;return{...m,name:g,notes:b,originalNotes:m.originalNotes?u!==0?Da(m.originalNotes,u):m.originalNotes:b}}});Dn.getState().setAddedChords(p),console.log("Transpose complete")},[])}),Bg=({currentKey:e,mode:n,modes:o,pianoSettings:s,availableInstruments:l,isPlayingScale:a,scaleNotes:u,transposeEnabled:f,isDesktop:h=!1,onKeyChange:p,onModeChange:m,onInstrumentChange:g,onToggleTranspose:x,onToggleScalePlayback:b})=>{const C={key:h?"w-[5rem]":"w-[6em]",mode:h?"w-[11rem]":"w-[14rem]",voice:"w-[14rem]"},E=h?"flex flex-col bg-[#3d434f]/30 border border-gray-600/30 rounded-lg px-6 py-4":"space-y-4",S=h?"w-px h-8 bg-gray-600/50 mx-8":"hidden",j=h?"text-sm text-slate-300 font-medium whitespace-nowrap":"text-sm text-slate-300 font-medium whitespace-nowrap w-16 flex items-center";return h?c.jsxs("div",{className:E,children:[c.jsxs("div",{className:"flex items-center",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("span",{className:j,children:"Key:"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Cn,{value:e,className:C.key,buttonClassName:"px-3 py-1.5 text-center font-medium text-xs h-10 flex items-center justify-center",menuClassName:`min-w-[${C.key}]`,onChange:p,showSearch:!1,options:Fs}),c.jsx(Sn,{onClick:b,variant:"play-stop",size:"icon",className:"!w-8 !h-8 flex items-center justify-center ml-1",active:a,title:a?"Stop scale":`Play ${e} ${n} scale`,disabled:!u||u.length===0,children:a?c.jsx(Us,{className:"w-6 h-6"}):c.jsx(zs,{className:"w-6 h-6"})})]})]}),c.jsx("div",{className:S}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("span",{className:j,children:"Mode:"}),o&&c.jsx(Cn,{value:n,className:C.mode,buttonClassName:"px-3 py-1.5 text-left font-medium text-xs h-10 flex items-center",menuClassName:`min-w-[${C.mode}]`,onChange:m,showSearch:!0,options:o})]}),c.jsx("div",{className:S}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("span",{className:j,children:"Voice:"}),c.jsx(Cn,{value:s.instrumentName.replaceAll("_"," "),className:C.voice,buttonClassName:"px-3 py-1.5 text-left font-medium text-xs h-10 flex items-center",menuClassName:"min-w-[11rem]",onChange:g,showSearch:!0,options:l.map(R=>R.replaceAll("_"," "))})]})]}),c.jsx("div",{className:"flex items-start mt-3",children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("span",{className:"text-sm text-slate-300 font-medium whitespace-nowrap invisible",children:"Key:"}),c.jsx("button",{onClick:x,className:`relative flex items-center justify-center px-4 py-2 rounded-lg text-xs font-medium uppercase tracking-wide transition-all duration-200 border ${f?"bg-gradient-to-r from-blue-600 to-blue-700 text-white border-blue-600 shadow-lg shadow-blue-600/25":"bg-[#3d434f] text-slate-400 border-gray-600 hover:bg-[#4a5262] hover:text-slate-300"}`,title:"When enabled, changing key or mode will transpose all added chords",children:c.jsxs("div",{className:`flex items-center gap-2 ${f?"text-white":""}`,children:[c.jsx("div",{className:`w-2 h-2 rounded-full transition-colors duration-200 ${f?"bg-white":"bg-slate-500"}`}),c.jsx("span",{children:"Transpose"})]})})]})})]}):c.jsxs("div",{className:E,children:[c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx("span",{className:`${j} mt-2`,children:"Key:"}),c.jsxs("div",{className:"flex flex-col gap-2",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Cn,{value:e,className:C.key,buttonClassName:"px-3 py-1.5 text-center font-medium text-xs h-10 flex items-center justify-center",menuClassName:"min-w-[6rem]",onChange:p,showSearch:!1,options:Fs}),c.jsx(Sn,{onClick:b,variant:"play-stop",size:"icon",className:"!w-8 !h-8 flex items-center justify-center ml-1",active:a,title:a?"Stop scale":`Play ${e} ${n} scale`,disabled:!u||u.length===0,children:a?c.jsx(Us,{className:"w-6 h-6"}):c.jsx(zs,{className:"w-6 h-6"})})]}),c.jsx("button",{onClick:x,className:`relative flex items-center justify-center px-4 py-2 rounded-lg text-xs font-medium uppercase tracking-wide transition-all duration-200 border max-w-[13em] ${f?"bg-gradient-to-r from-blue-600 to-blue-700 text-white border-blue-600 shadow-lg shadow-blue-600/25":"bg-[#3d434f] text-slate-400 border-gray-600 hover:bg-[#4a5262] hover:text-slate-300"}`,title:"When enabled, changing key or mode will transpose all added chords",children:c.jsxs("div",{className:`flex items-center gap-2 ${f?"text-white":""}`,children:[c.jsx("div",{className:`w-2 h-2 rounded-full transition-colors duration-200 ${f?"bg-white":"bg-slate-500"}`}),c.jsx("span",{children:"Transpose"})]})})]})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("span",{className:j,children:"Mode:"}),o&&c.jsx(Cn,{value:n,className:C.mode,buttonClassName:"px-3 py-1.5 text-left font-medium text-xs h-10 flex items-center",menuClassName:`min-w-[${C.mode}]`,onChange:m,showSearch:!0,options:o})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("span",{className:j,children:"Voice:"}),c.jsx(Cn,{value:s.instrumentName.replaceAll("_"," "),className:C.voice,buttonClassName:"px-3 py-1.5 text-left font-medium text-xs h-10 flex items-center",menuClassName:"min-w-[11rem]",onChange:g,showSearch:!0,options:l.map(R=>R.replaceAll("_"," "))})]})]})},xE=(e,n=4)=>{const o={C:0,"C#":1,Db:1,D:2,"D#":3,Eb:3,E:4,F:5,"F#":6,Gb:6,G:7,"G#":8,Ab:8,A:9,"A#":10,Bb:10,B:11};return(n+1)*12+(o[e]??0)},yE=({className:e="",onKeyChange:n,onModeChange:o,onInstrumentChange:s})=>{const l=Xt(ne=>ne.key),a=Xt(ne=>ne.mode),u=Xt(ne=>ne.modes),f=Xt(ne=>ne.scaleNotes),h=Io(ne=>ne.pianoSettings),p=Io(ne=>ne.availableInstruments),m=Dn(ne=>ne.isPlayingScale),g=no(ne=>ne.globalPatternState),{setKey:x,setMode:b}=Xt(),{setPianoInstrument:C,setCutOffPreviousNotes:E,setEq:S,setOctaveOffset:j,setReverbLevel:R,setNoteDuration:A,setVolume:D,setChorusLevel:I,setDelayLevel:T}=Io(),{setIsPlayingScale:M,clearScalePlaybackTimeouts:_,setActiveNotes:K}=Dn(),[J,te]=w.useState(!1),[L,$]=w.useState(!1),{transposeChords:G}=vE(),X=w.useRef([]),ee=w.useRef(!1);w.useEffect(()=>{(async()=>{l&&a&&l!=="C"&&f.length===0&&(console.log("Forcing data load for key:",l),x(l))})()},[]),w.useEffect(()=>{(async()=>{if(await new Promise(Ee=>setTimeout(Ee,200)),!f||f.length===0){console.log("No scale notes, fetching for",l,a),await Xt.getState().fetchMusicData(l,a);return}const de=f[0]?.noteName;if(de){const Ee=jr(de),ge=jr(l);Ee!==ge&&await Xt.getState().fetchMusicData(l,a)}})()},[l,a,f]);const se=ne=>{const de=ne.replaceAll(" ","_");s?s(de):C(de)},q=async ne=>{n?n(ne):(L&&await G(l,a,ne,a),x(ne))},Q=async ne=>{o?o(ne):(L&&await G(l,a,l,ne),b(ne))},Y=w.useCallback(()=>{X.current.forEach(ne=>clearTimeout(ne)),X.current=[],ee.current=!1},[]),k=w.useCallback(ne=>6e4/ne/2,[]),U=w.useCallback(()=>{if(!f||f.length===0){console.warn("No scale notes available to play");return}Y();const ne=g?.bpm||120,de=k(ne);ee.current=!0,M(!0);const Ee=[...f];if(f.length>0){const xe=f[0];Ee.push({...xe,seqNote:xe.seqNote?xe.seqNote+12:void 0})}const ge=Ee.map(xe=>{const Pe=jr(xe.noteName)||"C",_e=4,rt=xe.seqNote?xe.seqNote:xE(Pe,_e);return{note:Pe,octave:_e,sortValue:rt}}).sort((xe,Pe)=>xe.sortValue-Pe.sortValue),le=xe=>({C:0,"C#":1,Db:1,D:2,"D#":3,Eb:3,E:4,F:5,"F#":6,Gb:6,G:7,"G#":8,Ab:8,A:9,"A#":10,Bb:10,B:11})[xe]??0,pe=[];let Re=4,De=-1;for(let xe=0;xe<ge.length;xe++){const Pe=ge[xe],_e=le(Pe.note);(De!==-1&&De===11&&_e<=11&&_e<De||De!==-1&&_e<De&&!(De===11&&_e===0))&&Re++,pe.push({note:Pe.note,octave:Re}),De=_e}pe.forEach((xe,Pe)=>{const _e=setTimeout(()=>{if(!ee.current)return;K([xe]);const rt=setTimeout(()=>{ee.current&&K([])},de*.8);if(X.current.push(rt),Pe===pe.length-1){const nn=setTimeout(()=>{ee.current&&ae()},de);X.current.push(nn)}},Pe*de);X.current.push(_e)})},[f,g,M,K,Y,k]),ae=w.useCallback(()=>{Y(),K([]),M(!1),_&&_()},[Y,K,M,_]),fe=w.useCallback(()=>{m||ee.current?ae():U()},[m,U,ae]);return we.useEffect(()=>()=>Y(),[Y]),c.jsx("div",{className:`w-full max-w-7xl mx-auto px-2 sm:mt-2 mt-0 mb-0 ${e}`,children:c.jsxs("div",{className:"bg-[#3d434f] border border-gray-600 rounded-lg overflow-hidden",children:[c.jsx("div",{className:"px-4 py-3 border-b border-gray-600",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h2",{className:"text-sm font-bold text-slate-300 uppercase tracking-wider",children:"Controls"}),c.jsx("button",{onClick:()=>te(!J),className:"w-[7em] h-8 flex items-center space-x-2 px-3 py-1.5 text-xs text-slate-300 hover:text-slate-200 bg-[#4a5262] hover:bg-[#525a6b] border border-gray-600 rounded transition-all duration-200",children:J?c.jsxs(c.Fragment,{children:[c.jsx($s,{className:"w-3 h-3"}),c.jsx("span",{children:"Settings"})]}):c.jsxs(c.Fragment,{children:[c.jsx(eo,{className:"w-3 h-3"}),c.jsx("span",{children:"Settings"})]})})]})}),c.jsx("div",{className:"p-6 py-4 bg-[#444b59]",children:c.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-start lg:justify-center gap-6",children:[c.jsxs("div",{className:"hidden lg:flex items-center justify-between w-full",children:[c.jsx("div",{className:"flex-shrink-0 opacity-30",children:c.jsx(td,{size:80})}),c.jsx("div",{className:"flex-shrink-0",children:c.jsx(Bg,{currentKey:l,mode:a,modes:u,pianoSettings:h,availableInstruments:p,isPlayingScale:m,scaleNotes:f,transposeEnabled:L,isDesktop:!0,onKeyChange:q,onModeChange:Q,onInstrumentChange:se,onToggleTranspose:()=>$(!L),onToggleScalePlayback:fe})}),c.jsx("div",{className:"hidden [@media(min-width:72em)]:flex flex-shrink-0 opacity-30",children:c.jsx(td,{size:80})})]}),c.jsx("div",{className:"lg:hidden",children:c.jsx(Bg,{currentKey:l,mode:a,modes:u,pianoSettings:h,availableInstruments:p,isPlayingScale:m,scaleNotes:f,transposeEnabled:L,isDesktop:!1,onKeyChange:q,onModeChange:Q,onInstrumentChange:se,onToggleTranspose:()=>$(!L),onToggleScalePlayback:fe})})]})}),c.jsx("div",{className:`transition-all duration-300 ease-in-out overflow-hidden ${J?" opacity-100":"max-h-0 opacity-0"}`,children:c.jsxs("div",{className:"border-t border-gray-600 bg-[#3d434f]",children:[c.jsx("div",{className:"px-4 py-3 border-b border-gray-600",children:c.jsx("h3",{className:"text-left text-sm font-medium text-slate-200 uppercase tracking-wider",children:"Piano Settings"})}),c.jsx("div",{className:"p-6 bg-[#444b59]",children:c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-x-8",children:[c.jsxs("div",{className:"space-y-6",children:[c.jsx(Sr,{label:"Volume",value:h.volume,min:0,max:1,step:.05,onChange:D,showPercentage:!0}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-medium text-slate-200 mb-2 uppercase tracking-wide",children:"Octave Shift"}),c.jsxs("div",{className:"flex items-center justify-between bg-[#3d434f] border border-gray-600 rounded-md p-1.5",children:[c.jsx("button",{onClick:()=>j(Math.max(-3,h.octaveOffset-1)),className:"w-6 h-6 flex items-center justify-center text-slate-300 hover:text-slate-200 hover:bg-[#4a5262] rounded transition-colors",disabled:h.octaveOffset<=-3,children:"−"}),c.jsx("span",{className:"font-mono text-xs text-slate-200 px-2",children:h.octaveOffset===0?"Normal":`${h.octaveOffset>0?"+":""}${h.octaveOffset} octave${Math.abs(h.octaveOffset)>1?"s":""}`}),c.jsx("button",{onClick:()=>j(Math.min(3,h.octaveOffset+1)),className:"w-6 h-6 flex items-center justify-center text-slate-300 hover:text-slate-200 hover:bg-[#4a5262] rounded transition-colors",disabled:h.octaveOffset>=3,children:"+"})]})]}),c.jsx(Sr,{label:"Reverb",value:h.reverbLevel,min:0,max:1,step:.05,onChange:R,showPercentage:!0}),c.jsx(Sr,{label:"Note Duration",value:h.noteDuration,min:.1,max:1,step:.05,onChange:A,showPercentage:!0}),c.jsx("div",{children:c.jsxs("label",{className:"flex items-center cursor-pointer",children:[c.jsx("input",{type:"checkbox",className:"w-3.5 h-3.5 text-blue-600 bg-[#3d434f] border-gray-600 rounded focus:ring-blue-500 focus:ring-1",checked:h.cutOffPreviousNotes,onChange:ne=>E(ne.target.checked)}),c.jsx("span",{className:"ml-2 text-xs text-slate-300 uppercase tracking-wide",children:"Cut off previous notes"})]})})]}),c.jsxs("div",{className:"space-y-4 mt-6 lg:mt-0",children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-xs font-medium text-slate-200 mb-4 uppercase tracking-wide",children:"Equalizer"}),c.jsx("div",{className:"space-y-3",children:[{label:"Bass",key:"bass"},{label:"Mid",key:"mid"},{label:"Treble",key:"treble"}].map(({label:ne,key:de})=>c.jsx(Sr,{label:ne,value:h.eq[de],min:-24,max:24,step:.5,variant:"split",onChange:Ee=>{const ge={...h.eq,[de]:Ee};S(ge)},formatValue:Ee=>`${Ee>0?"+":""}${Ee.toFixed(1)}dB`},de))})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx(Sr,{label:"Chorus",value:h.chorusLevel,min:0,max:1,step:.05,onChange:I,showPercentage:!0}),c.jsx(Sr,{label:"Delay",value:h.delayLevel,min:0,max:1,step:.05,onChange:T,showPercentage:!0})]})]})]})})]})})]})})},bE=({isOpen:e,onClose:n,onOpenHelp:o})=>{const s=()=>{n(),o()};return c.jsx(pd,{isOpen:e,onClose:n,title:"About",className:"max-w-2xl max-h-[85vh]",fixedHeader:!0,children:c.jsxs("div",{className:"p-6 space-y-6",children:[c.jsx("div",{className:"bg-[#2a2f38] rounded-lg border border-gray-600 overflow-hidden",children:c.jsxs("div",{className:"p-4 text-sm leading-relaxed space-y-3 text-slate-300 text-left",children:[c.jsx("p",{children:"Modal Chord Buildr is a music learning, composition, and performance tool built with React. The app provides an intuitive interface for exploring musical scales and building chord progressions, while also offering basic synth and sequencer functionality."}),c.jsxs("p",{children:["For more details on how to use this app, please refer to the"," ",c.jsx("button",{onClick:s,className:"font-semibold text-blue-400 hover:text-blue-300 underline underline-offset-2 transition-colors cursor-pointer",children:"Help & Guide"})," ","documentation."]})]})}),c.jsxs("div",{className:"bg-[#2a2f38] rounded-lg border border-gray-600 overflow-hidden",children:[c.jsx("div",{className:"bg-[#444b59] px-4 py-3 border-b border-gray-600",children:c.jsx("h4",{className:"text-sm font-semibold text-white uppercase tracking-wide",children:"Key Features"})}),c.jsx("div",{className:"p-4",children:c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"flex items-start space-x-3 p-2 rounded-md hover:bg-[#3d434f]/50 transition-colors",children:[c.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-400 mt-2 flex-shrink-0"}),c.jsx("span",{className:"text-sm text-slate-300 text-left",children:"Interactive piano with multiple instruments and audio effects"})]}),c.jsxs("div",{className:"flex items-start space-x-3 p-2 rounded-md hover:bg-[#3d434f]/50 transition-colors",children:[c.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-400 mt-2 flex-shrink-0"}),c.jsx("span",{className:"text-sm text-slate-300 text-left",children:"Pattern sequencer with customizable rhythmic patterns"})]}),c.jsxs("div",{className:"flex items-start space-x-3 p-2 rounded-md hover:bg-[#3d434f]/50 transition-colors",children:[c.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-400 mt-2 flex-shrink-0"}),c.jsx("span",{className:"text-sm text-slate-300 text-left",children:"Extensive chord explorer with mode-based chord generation"})]}),c.jsxs("div",{className:"flex items-start space-x-3 p-2 rounded-md hover:bg-[#3d434f]/50 transition-colors",children:[c.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-400 mt-2 flex-shrink-0"}),c.jsx("span",{className:"text-sm text-slate-300 text-left",children:"Real-time visualization of scale notes and chord relationships"})]}),c.jsxs("div",{className:"flex items-start space-x-3 p-2 rounded-md hover:bg-[#3d434f]/50 transition-colors",children:[c.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-400 mt-2 flex-shrink-0"}),c.jsx("span",{className:"text-sm text-slate-300 text-left",children:"Live mode for performance and improvisation"})]})]})})]}),c.jsxs("div",{className:"bg-[#2a2f38] rounded-lg border border-gray-600 overflow-hidden",children:[c.jsx("div",{className:"bg-[#444b59] px-4 py-3 border-b border-gray-600",children:c.jsx("h4",{className:"text-sm font-semibold text-white uppercase tracking-wide",children:"Links"})}),c.jsxs("div",{className:"p-4 space-y-3",children:[c.jsxs("a",{href:"https://github.com/jekrch/chord-analyzr",target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-3 p-3 rounded-lg bg-[#3d434f]/50 hover:bg-[#4a5262]/70 transition-all duration-200 group",children:[c.jsx("div",{className:"w-8 h-8 flex items-center justify-center rounded-full bg-gray-700 group-hover:bg-gray-600 transition-colors",children:c.jsx("svg",{className:"w-5 h-5 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:c.jsx("path",{fillRule:"evenodd",d:"M10 0C4.477 0 0 4.484 0 10.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0110 4.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.203 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.942.359.31.678.921.678 1.856 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0020 10.017C20 4.484 15.522 0 10 0z",clipRule:"evenodd"})})}),c.jsxs("div",{className:"flex-1 text-left",children:[c.jsx("div",{className:"text-sm font-medium text-white group-hover:text-blue-200 transition-colors",children:"GitHub Repository"}),c.jsx("div",{className:"text-xs text-slate-400",children:"View source code and documentation"})]})]}),c.jsxs("a",{href:"https://jacobkrch.com",target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-3 p-3 rounded-lg bg-[#3d434f]/50 hover:bg-[#4a5262]/70 transition-all duration-200 group",children:[c.jsx("div",{className:"w-8 h-8 flex items-center justify-center rounded-full bg-blue-600 group-hover:bg-blue-500 transition-colors",children:c.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})}),c.jsx("div",{className:"flex-1 text-left",children:c.jsx("div",{className:"text-sm font-medium text-white group-hover:text-blue-200 transition-colors",children:"jacobkrch.com"})})]})]})]}),c.jsx("div",{className:"pt-4 border-t border-gray-600/50",children:c.jsx("p",{className:"text-xs text-slate-400 text-left",children:"© 2025 Jacob Krch. All rights reserved."})})]})})},Bn=({title:e,children:n,defaultOpen:o=!1})=>{const[s,l]=w.useState(o);return c.jsxs("div",{className:"bg-[#2a2f38] rounded-lg border border-gray-600 overflow-hidden mb-4",children:[c.jsxs("button",{onClick:()=>l(!s),className:"w-full flex items-center justify-between p-4 text-left bg-[#444b59] border-b border-gray-600 hover:bg-[#4a5262] transition-all duration-200",children:[c.jsx("h4",{className:"text-sm font-semibold text-white uppercase tracking-wide",children:e}),s?c.jsx(eo,{className:"w-4 h-4 text-slate-300 flex-shrink-0"}):c.jsx(Kg,{className:"w-4 h-4 text-slate-300 flex-shrink-0"})]}),s&&c.jsx("div",{className:"p-4 text-slate-300",children:n})]})},wE=({isOpen:e,onClose:n})=>c.jsx(pd,{isOpen:e,onClose:n,title:"Help & Guide",className:"max-w-4xl max-h-[85vh]",fixedHeader:!0,children:c.jsxs("div",{className:"p-6 space-y-4",children:[c.jsx(Bn,{title:"Quick Start",defaultOpen:!0,children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-start space-x-4 p-3 rounded-lg bg-[#3d434f]/30 hover:bg-[#3d434f]/50 transition-colors",children:[c.jsx("div",{className:"w-8 h-8 flex items-center justify-center rounded-full bg-blue-600 text-white text-sm font-bold flex-shrink-0",children:"1"}),c.jsxs("div",{className:"text-left",children:[c.jsx("div",{className:"text-sm font-semibold text-white mb-1",children:"Choose a Key & Mode"}),c.jsx("div",{className:"text-sm text-slate-300",children:"Use the Controls section to select your musical key and mode (like C Ionian, D# Lydian, etc.)"})]})]}),c.jsxs("div",{className:"flex items-start space-x-4 p-3 rounded-lg bg-[#3d434f]/30 hover:bg-[#3d434f]/50 transition-colors",children:[c.jsx("div",{className:"w-8 h-8 flex items-center justify-center rounded-full bg-blue-600 text-white text-sm font-bold flex-shrink-0",children:"2"}),c.jsxs("div",{className:"text-left",children:[c.jsx("div",{className:"text-sm font-semibold text-white mb-1",children:"Explore Chords"}),c.jsx("div",{className:"text-sm text-slate-300",children:"Browse the Chord Explorer below to discover chords that fit your chosen key/mode"})]})]}),c.jsxs("div",{className:"flex items-start space-x-4 p-3 rounded-lg bg-[#3d434f]/30 hover:bg-[#3d434f]/50 transition-colors",children:[c.jsx("div",{className:"w-8 h-8 flex items-center justify-center rounded-full bg-blue-600 text-white text-sm font-bold flex-shrink-0",children:"3"}),c.jsxs("div",{className:"text-left",children:[c.jsx("div",{className:"text-sm font-semibold text-white mb-1",children:"Build Sequences"}),c.jsx("div",{className:"text-sm text-slate-300",children:"Click the + button on chords to add them to your sequence"})]})]}),c.jsxs("div",{className:"flex items-start space-x-4 p-3 rounded-lg bg-[#3d434f]/30 hover:bg-[#3d434f]/50 transition-colors",children:[c.jsx("div",{className:"w-8 h-8 flex items-center justify-center rounded-full bg-blue-600 text-white text-sm font-bold flex-shrink-0",children:"4"}),c.jsxs("div",{className:"text-left",children:[c.jsx("div",{className:"text-sm font-semibold text-white mb-1",children:"Create Patterns"}),c.jsx("div",{className:"text-sm text-slate-300",children:"Use the Sequencer to create rhythmic patterns for your chords"})]})]}),c.jsxs("div",{className:"flex items-start space-x-4 p-3 rounded-lg bg-[#3d434f]/30 hover:bg-[#3d434f]/50 transition-colors",children:[c.jsx("div",{className:"w-8 h-8 flex items-center justify-center rounded-full bg-blue-600 text-white text-sm font-bold flex-shrink-0",children:"5"}),c.jsxs("div",{className:"text-left",children:[c.jsx("div",{className:"text-sm font-semibold text-white mb-1",children:"Play & Perform"}),c.jsx("div",{className:"text-sm text-slate-300",children:"Hit Play to hear your creation, or use Live Mode for real-time performance"})]})]})]})}),c.jsx(Bn,{title:"Keyboard Shortcuts",children:c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[c.jsxs("div",{className:"space-y-3",children:[c.jsx("h5",{className:"text-white font-semibold text-sm border-b border-gray-600 pb-2 text-left",children:"Playback Control"}),c.jsxs("div",{className:"flex items-center justify-between p-2 rounded-md bg-[#3d434f]/30",children:[c.jsx("span",{className:"text-sm text-left",children:"Play/Pause sequencer"}),c.jsx("kbd",{className:"px-2 py-1 bg-gray-700 rounded text-xs font-mono",children:"Space"})]})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsx("h5",{className:"text-white font-semibold text-sm border-b border-gray-600 pb-2 text-left",children:"Navigation"}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex items-center justify-between p-2 rounded-md bg-[#3d434f]/30",children:[c.jsx("span",{className:"text-sm text-left",children:"Expand chord buttons"}),c.jsx("kbd",{className:"px-2 py-1 bg-gray-700 rounded text-xs font-mono",children:"L"})]}),c.jsxs("div",{className:"flex items-center justify-between p-2 rounded-md bg-[#3d434f]/30",children:[c.jsx("span",{className:"text-sm text-left",children:"Select chord from sequence"}),c.jsx("kbd",{className:"px-2 py-1 bg-gray-700 rounded text-xs font-mono",children:"1-9"})]})]})]})]})}),c.jsx(Bn,{title:"Piano & Audio Controls",children:c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"p-4 rounded-lg bg-[#3d434f]/30",children:[c.jsx("h5",{className:"text-white font-semibold mb-3 text-sm text-left",children:"Piano Interaction"}),c.jsx("p",{className:"text-sm text-left",children:"Click piano keys to play individual notes. The piano highlights scale notes and chord tones based on your current selection."})]}),c.jsxs("div",{className:"p-4 rounded-lg bg-[#3d434f]/30",children:[c.jsx("h5",{className:"text-white font-semibold mb-3 text-sm text-left",children:"Audio Settings"}),c.jsx("p",{className:"text-sm mb-3 text-left",children:"Access comprehensive audio controls through the Settings panel in the Controls section:"}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex items-start space-x-2 text-sm",children:[c.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-400 mt-2 flex-shrink-0"}),c.jsxs("div",{className:"text-left",children:[c.jsx("strong",{className:"text-white",children:"Voice:"})," ",c.jsx("span",{className:"text-slate-300",children:"Choose from multiple instrument sounds"})]})]}),c.jsxs("div",{className:"flex items-start space-x-2 text-sm",children:[c.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-400 mt-2 flex-shrink-0"}),c.jsxs("div",{className:"text-left",children:[c.jsx("strong",{className:"text-white",children:"Volume & Octave:"})," ",c.jsx("span",{className:"text-slate-300",children:"Adjust overall volume and pitch range"})]})]}),c.jsxs("div",{className:"flex items-start space-x-2 text-sm",children:[c.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-400 mt-2 flex-shrink-0"}),c.jsxs("div",{className:"text-left",children:[c.jsx("strong",{className:"text-white",children:"Effects:"})," ",c.jsx("span",{className:"text-slate-300",children:"Add reverb, chorus, and delay"})]})]}),c.jsxs("div",{className:"flex items-start space-x-2 text-sm",children:[c.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-400 mt-2 flex-shrink-0"}),c.jsxs("div",{className:"text-left",children:[c.jsx("strong",{className:"text-white",children:"Equalizer:"})," ",c.jsx("span",{className:"text-slate-300",children:"Shape the sound with bass, mid, and treble controls"})]})]}),c.jsxs("div",{className:"flex items-start space-x-2 text-sm",children:[c.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-400 mt-2 flex-shrink-0"}),c.jsxs("div",{className:"text-left",children:[c.jsx("strong",{className:"text-white",children:"Note Duration:"})," ",c.jsx("span",{className:"text-slate-300",children:"Control how long notes ring out"})]})]})]})]})]})}),c.jsx(Bn,{title:"Pattern Sequencer",children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"p-4 rounded-lg bg-[#3d434f]/30",children:[c.jsx("h5",{className:"text-white font-semibold mb-3 text-sm text-left",children:"Understanding Patterns"}),c.jsx("p",{className:"text-sm mb-3 text-left",children:"Patterns control which chord tones play at different time steps. Each step can be:"}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex items-center space-x-3 p-2 rounded-md bg-[#2a2f38]",children:[c.jsx("code",{className:"px-2 py-1 bg-gray-700 rounded text-xs font-mono text-white min-w-[4rem] text-center",children:"—"}),c.jsx("span",{className:"text-sm text-slate-300 text-left",children:"Rest/silence (represented as 'x' in custom patterns)"})]}),c.jsxs("div",{className:"flex items-center space-x-3 p-2 rounded-md bg-[#2a2f38]",children:[c.jsx("code",{className:"px-2 py-1 bg-gray-700 rounded text-xs font-mono text-white min-w-[4rem] text-center",children:"1, 2, 3..."}),c.jsx("span",{className:"text-sm text-slate-300 text-left",children:"Play the 1st, 2nd, 3rd... note of the chord"})]}),c.jsxs("div",{className:"flex items-center space-x-3 p-2 rounded-md bg-[#2a2f38]",children:[c.jsx("code",{className:"px-2 py-1 bg-gray-700 rounded text-xs font-mono text-white min-w-[4rem] text-center",children:"1↑, 2↑..."}),c.jsx("span",{className:"text-sm text-slate-300 text-left",children:"Play the note one octave higher ('+' in custom patterns)"})]})]})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[c.jsxs("div",{className:"p-4 rounded-lg bg-[#3d434f]/30",children:[c.jsx("h5",{className:"text-white font-semibold mb-3 text-sm text-left",children:"Pattern Controls"}),c.jsxs("div",{className:"space-y-2 text-sm text-left",children:[c.jsxs("div",{children:[c.jsx("strong",{className:"text-white",children:"Add/Remove Steps:"})," Use the +/- buttons to change pattern length (1-16 steps)"]}),c.jsxs("div",{children:[c.jsx("strong",{className:"text-white",children:"Pattern Presets:"})," Choose from pre-built patterns organized by category and note count"]}),c.jsxs("div",{children:[c.jsx("strong",{className:"text-white",children:"Custom Patterns:"}),' Enter your own pattern using notation like "1,x,3,2+" and click Apply']}),c.jsxs("div",{children:[c.jsx("strong",{className:"text-white",children:"Visual Feedback:"})," Blue indicator shows the currently playing step"]})]})]}),c.jsxs("div",{className:"p-4 rounded-lg bg-[#3d434f]/30",children:[c.jsx("h5",{className:"text-white font-semibold mb-3 text-sm text-left",children:"Timing Controls"}),c.jsxs("div",{className:"space-y-2 text-sm text-left",children:[c.jsxs("div",{children:[c.jsx("strong",{className:"text-white",children:"BPM:"})," Set tempo from 60-200 beats per minute"]}),c.jsxs("div",{children:[c.jsx("strong",{className:"text-white",children:"Subdivision:"})," Choose note duration (32nd, 16th, 8th, quarter, half notes)"]}),c.jsxs("div",{children:[c.jsx("strong",{className:"text-white",children:"Swing:"})," Add groove by delaying alternate notes (0-50%)"]})]})]})]}),c.jsxs("div",{className:"p-4 rounded-lg bg-[#3d434f]/30",children:[c.jsx("h5",{className:"text-white font-semibold mb-3 text-sm text-left",children:"Chord-Specific Patterns"}),c.jsx("p",{className:"text-sm mb-3 text-left",children:"Each chord in your sequence can have its own unique pattern:"}),c.jsxs("div",{className:"space-y-2 text-sm text-left",children:[c.jsxs("div",{children:[c.jsx("strong",{className:"text-white",children:"Global Pattern:"}),' The default pattern that plays when no chord is selected (shown with cyan "Global Pattern" label)']}),c.jsxs("div",{children:[c.jsx("strong",{className:"text-white",children:"Chord Pattern:"})," Select a chord from your sequence to edit its specific pattern (shown with purple chord name label)"]}),c.jsxs("div",{children:[c.jsx("strong",{className:"text-white",children:"Automatic Switching:"})," The sequencer automatically uses each chord's pattern during playback"]}),c.jsxs("div",{children:[c.jsx("strong",{className:"text-white",children:"Visual Indicators:"})," Pattern editor shows which chord you're currently editing"]})]})]}),c.jsxs("div",{className:"p-4 rounded-lg bg-[#3d434f]/30",children:[c.jsx("h5",{className:"text-white font-semibold mb-3 text-sm text-left",children:"Pattern Presets"}),c.jsx("p",{className:"text-sm mb-3 text-left",children:"Browse categorized pattern presets to quickly create common rhythmic patterns:"}),c.jsxs("div",{className:"space-y-2 text-sm text-left",children:[c.jsxs("div",{children:[c.jsx("strong",{className:"text-white",children:"Filter by Note Count:"}),' Enable "Hide patterns with fewer notes" to show only patterns that use all available chord notes']}),c.jsxs("div",{children:[c.jsx("strong",{className:"text-white",children:"Categories:"})," Patterns are organized by style (Arpeggios, Rhythmic, Bass Lines, etc.)"]}),c.jsxs("div",{children:[c.jsx("strong",{className:"text-white",children:"Visual Preview:"})," Each preset shows its pattern notation before applying"]})]})]})]})}),c.jsx(Bn,{title:"MIDI Recording & Export",children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"p-4 rounded-lg bg-[#3d434f]/30",children:[c.jsx("h5",{className:"text-white font-semibold mb-3 text-sm text-left",children:"Automatic MIDI Recording"}),c.jsx("p",{className:"text-sm mb-3 text-left",children:"The app automatically records your sequencer performances as standard MIDI files that you can export and use in any DAW or music software."}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex items-start space-x-3 p-2 rounded-md bg-[#2a2f38]",children:[c.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-400 mt-2 flex-shrink-0"}),c.jsxs("div",{className:"text-sm text-left",children:[c.jsx("strong",{className:"text-white",children:"Start Recording:"})," ",c.jsx("span",{className:"text-slate-300",children:"Recording begins automatically when you press Play on the sequencer"})]})]}),c.jsxs("div",{className:"flex items-start space-x-3 p-2 rounded-md bg-[#2a2f38]",children:[c.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-400 mt-2 flex-shrink-0"}),c.jsxs("div",{className:"text-sm text-left",children:[c.jsx("strong",{className:"text-white",children:"Recording Indicator:"})," ",c.jsx("span",{className:"text-slate-300",children:'A red pulsing indicator appears showing "Recording MIDI" during playback'})]})]}),c.jsxs("div",{className:"flex items-start space-x-3 p-2 rounded-md bg-[#2a2f38]",children:[c.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-400 mt-2 flex-shrink-0"}),c.jsxs("div",{className:"text-sm text-left",children:[c.jsx("strong",{className:"text-white",children:"Stop Recording:"})," ",c.jsx("span",{className:"text-slate-300",children:"Recording stops when you press Stop or Pause on the sequencer"})]})]}),c.jsxs("div",{className:"flex items-start space-x-3 p-2 rounded-md bg-[#2a2f38]",children:[c.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-400 mt-2 flex-shrink-0"}),c.jsxs("div",{className:"text-sm text-left",children:[c.jsx("strong",{className:"text-white",children:"Save MIDI:"})," ",c.jsx("span",{className:"text-slate-300",children:'After stopping, a green "Save MIDI" button appears - click to download your recording'})]})]})]})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[c.jsxs("div",{className:"p-4 rounded-lg bg-[#3d434f]/30",children:[c.jsx("h5",{className:"text-white font-semibold mb-3 text-sm text-left",children:"What Gets Recorded"}),c.jsxs("div",{className:"space-y-2 text-sm text-left",children:[c.jsxs("div",{children:[c.jsx("strong",{className:"text-white",children:"Note Events:"})," All notes played by the sequencer with accurate timing"]}),c.jsxs("div",{children:[c.jsx("strong",{className:"text-white",children:"Tempo:"})," Your BPM setting is preserved in the MIDI file"]}),c.jsxs("div",{children:[c.jsx("strong",{className:"text-white",children:"Duration:"})," Note lengths based on your note duration setting"]}),c.jsxs("div",{children:[c.jsx("strong",{className:"text-white",children:"Patterns:"})," Records the full sequence including chord-specific patterns"]})]})]}),c.jsxs("div",{className:"p-4 rounded-lg bg-[#3d434f]/30",children:[c.jsx("h5",{className:"text-white font-semibold mb-3 text-sm text-left",children:"Using MIDI Files"}),c.jsxs("div",{className:"space-y-2 text-sm text-left",children:[c.jsxs("div",{children:[c.jsx("strong",{className:"text-white",children:"Import to DAW:"})," Drag the .mid file into any music production software"]}),c.jsxs("div",{children:[c.jsx("strong",{className:"text-white",children:"Change Instruments:"})," Assign any virtual instrument or sound"]}),c.jsxs("div",{children:[c.jsx("strong",{className:"text-white",children:"Further Editing:"})," Edit timing, velocities, and notes in your DAW"]}),c.jsxs("div",{children:[c.jsx("strong",{className:"text-white",children:"Timestamped Files:"})," Each export is automatically named with a timestamp"]})]})]})]}),c.jsxs("div",{className:"p-4 rounded-lg bg-[#3d434f]/30",children:[c.jsx("h5",{className:"text-white font-semibold mb-3 text-sm text-left",children:"Tips for MIDI Recording"}),c.jsxs("div",{className:"space-y-2 text-sm text-left",children:[c.jsx("div",{children:"Set your desired BPM and timing before starting playback"}),c.jsx("div",{children:"Let the sequence play through completely for the best recording"}),c.jsx("div",{children:"Multiple recordings can be made - each creates a new file"}),c.jsx("div",{children:'The "Save MIDI" button remains available until you start a new recording'})]})]})]})}),c.jsx(Bn,{title:"Chord Explorer & Sequences",children:c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[c.jsxs("div",{className:"p-4 rounded-lg bg-[#3d434f]/30",children:[c.jsx("h5",{className:"text-white font-semibold mb-3 text-sm text-left",children:"Finding Chords"}),c.jsx("p",{className:"text-sm mb-3 text-left",children:"The Chord Explorer shows all chords that fit your selected key and mode. You can:"}),c.jsxs("div",{className:"space-y-2 text-sm text-left",children:[c.jsxs("div",{children:[c.jsx("strong",{className:"text-white",children:"Filter by root note"})," to find specific chord types"]}),c.jsxs("div",{children:[c.jsx("strong",{className:"text-white",children:"Search"})," for chord names or note combinations"]}),c.jsxs("div",{children:[c.jsx("strong",{className:"text-white",children:"Click to preview"})," any chord"]}),c.jsxs("div",{children:[c.jsx("strong",{className:"text-white",children:"Click ↓"})," to see the individual notes in a chord"]})]})]}),c.jsxs("div",{className:"p-4 rounded-lg bg-[#3d434f]/30",children:[c.jsx("h5",{className:"text-white font-semibold mb-3 text-sm text-left",children:"Building Sequences"}),c.jsxs("p",{className:"text-sm mb-3 text-left",children:["Add chords to your sequence using the ",c.jsx("span",{className:"text-green-400 font-bold",children:"+"})," button. Your chord sequence appears at the bottom where you can:"]}),c.jsxs("div",{className:"space-y-2 text-sm text-left",children:[c.jsx("div",{children:"Click any chord to play it immediately"}),c.jsx("div",{children:"Use numbers 1-9 to jump between chords"}),c.jsx("div",{children:"Toggle Delete mode to remove unwanted chords"}),c.jsx("div",{children:"Clear all chords to start fresh"}),c.jsxs("div",{children:[c.jsx("strong",{className:"text-blue-400",children:"Click the gear icon"})," to enter Edit mode and modify chords"]})]})]})]})}),c.jsx(Bn,{title:"Chord Editing",children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"p-4 rounded-lg bg-[#3d434f]/30",children:[c.jsx("h5",{className:"text-white font-semibold mb-3 text-sm text-left",children:"Edit Mode"}),c.jsxs("p",{className:"text-sm mb-3 text-left",children:["Click the ",c.jsx("span",{className:"text-blue-400 font-bold",children:"gear icon"})," next to your chord sequence to enter Edit Mode. In this mode, you can:"]}),c.jsxs("div",{className:"space-y-2 text-sm text-left",children:[c.jsxs("div",{children:[c.jsx("strong",{className:"text-white",children:"Click any chord"})," to open the chord editor"]}),c.jsxs("div",{children:[c.jsx("strong",{className:"text-white",children:"Modify chord voicings"})," by reordering notes"]}),c.jsxs("div",{children:[c.jsx("strong",{className:"text-white",children:"Add slash chords"})," to change the bass note"]}),c.jsxs("div",{children:[c.jsx("strong",{className:"text-white",children:"Preview changes"})," before saving them"]})]})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[c.jsxs("div",{className:"p-4 rounded-lg bg-[#3d434f]/30",children:[c.jsx("h5",{className:"text-white font-semibold mb-3 text-sm text-left",children:"Slash Chords"}),c.jsx("p",{className:"text-sm mb-3 text-left",children:"Create slash chords (like C/E) by specifying a bass note:"}),c.jsxs("div",{className:"space-y-2 text-sm text-left",children:[c.jsxs("div",{children:[c.jsx("strong",{className:"text-white",children:"Bass Note Field:"})," Enter a note name (e.g., E, Gb, C)"]}),c.jsxs("div",{children:[c.jsx("strong",{className:"text-white",children:"Automatic Voicing:"})," The bass note moves to the lowest position"]}),c.jsxs("div",{children:[c.jsx("strong",{className:"text-white",children:"Chord Name:"})," Updates to show the slash notation (C/E)"]}),c.jsxs("div",{children:[c.jsx("strong",{className:"text-white",children:"Remove Bass:"})," Clear the field to return to original chord"]})]})]}),c.jsxs("div",{className:"p-4 rounded-lg bg-[#3d434f]/30",children:[c.jsx("h5",{className:"text-white font-semibold mb-3 text-sm text-left",children:"Note Reordering"}),c.jsx("p",{className:"text-sm mb-3 text-left",children:"Change the order of chord notes for different voicings:"}),c.jsxs("div",{className:"space-y-2 text-sm text-left",children:[c.jsxs("div",{children:[c.jsx("strong",{className:"text-white",children:"Drag & Drop:"})," Drag notes to reorder them"]}),c.jsxs("div",{children:[c.jsx("strong",{className:"text-white",children:"Arrow Buttons:"})," Use up/down arrows to move notes"]}),c.jsxs("div",{children:[c.jsx("strong",{className:"text-white",children:"Auto-Detection:"})," Slash note updates automatically when you change the bass"]}),c.jsxs("div",{children:[c.jsx("strong",{className:"text-white",children:"Visual Feedback:"})," Slash notes are highlighted in amber"]})]})]})]}),c.jsxs("div",{className:"p-4 rounded-lg bg-[#3d434f]/30",children:[c.jsx("h5",{className:"text-white font-semibold mb-3 text-sm text-left",children:"Editor Controls"}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[c.jsxs("div",{className:"space-y-2 text-sm text-left",children:[c.jsxs("div",{children:[c.jsx("strong",{className:"text-white",children:"Preview:"})," Click the play button to hear your changes"]}),c.jsxs("div",{children:[c.jsx("strong",{className:"text-white",children:"Save:"})," Green checkmark to confirm edits"]}),c.jsxs("div",{children:[c.jsx("strong",{className:"text-white",children:"Cancel:"})," Discard changes and close editor"]})]}),c.jsxs("div",{className:"space-y-2 text-sm text-left",children:[c.jsxs("div",{children:[c.jsx("strong",{className:"text-white",children:"Original Notes:"})," Editor preserves original chord voicing"]}),c.jsxs("div",{children:[c.jsx("strong",{className:"text-white",children:"Real-time Updates:"})," Changes reflect immediately in the editor"]}),c.jsxs("div",{children:[c.jsx("strong",{className:"text-white",children:"Full-screen:"})," Editor takes over the entire interface for focused editing"]})]})]})]})]})}),c.jsx(Bn,{title:"Live Mode",children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"p-4 rounded-lg bg-[#3d434f]/30",children:[c.jsx("h5",{className:"text-white font-semibold mb-3 text-sm text-left",children:"Performance Mode"}),c.jsx("p",{className:"text-sm mb-3 text-left",children:"Live Mode expands your chord sequence into a full-screen performance interface perfect for:"}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex items-start space-x-3 p-2 rounded-md bg-[#2a2f38]",children:[c.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-400 mt-2 flex-shrink-0"}),c.jsxs("div",{className:"text-sm text-left",children:[c.jsx("strong",{className:"text-white",children:"Live performance:"})," ",c.jsx("span",{className:"text-slate-300",children:"Large, touch-friendly chord buttons"})]})]}),c.jsxs("div",{className:"flex items-start space-x-3 p-2 rounded-md bg-[#2a2f38]",children:[c.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-400 mt-2 flex-shrink-0"}),c.jsxs("div",{className:"text-sm text-left",children:[c.jsx("strong",{className:"text-white",children:"Practice sessions:"})," ",c.jsx("span",{className:"text-slate-300",children:"Easy chord switching with visual feedback"})]})]}),c.jsxs("div",{className:"flex items-start space-x-3 p-2 rounded-md bg-[#2a2f38]",children:[c.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-400 mt-2 flex-shrink-0"}),c.jsxs("div",{className:"text-sm text-left",children:[c.jsx("strong",{className:"text-white",children:"Composition:"})," ",c.jsx("span",{className:"text-slate-300",children:"Hear chord progressions in real-time"})]})]})]})]}),c.jsxs("div",{className:"p-4 rounded-lg bg-[#3d434f]/30",children:[c.jsx("h5",{className:"text-white font-semibold mb-3 text-sm text-left",children:"Using Live Mode"}),c.jsxs("div",{className:"space-y-2 text-sm text-left",children:[c.jsx("div",{children:'Click "Expand" in the chord sequence to enter Live Mode'}),c.jsx("div",{children:"Use keyboard numbers 1-9 or click/tap chord buttons"}),c.jsx("div",{children:"The sequencer continues playing your patterns"}),c.jsx("div",{children:"Active chord is highlighted in blue"})]})]})]})}),c.jsxs(Bn,{title:"Interface Tips",children:[c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[c.jsx("div",{className:"space-y-4",children:c.jsxs("div",{className:"p-4 rounded-lg bg-[#3d434f]/30",children:[c.jsx("h5",{className:"text-white font-semibold mb-3 text-sm text-left",children:"Navigation"}),c.jsxs("div",{className:"space-y-2 text-sm text-left",children:[c.jsxs("div",{children:[c.jsx("strong",{className:"text-white",children:"Sequencer Header:"})," Click to show/hide the pattern editor"]}),c.jsxs("div",{children:[c.jsx("strong",{className:"text-white",children:"Settings Panels:"})," Most sections have expandable settings"]}),c.jsxs("div",{children:[c.jsx("strong",{className:"text-white",children:"Status Indicators:"})," Top bar shows current key, mode, and playback status"]})]})]})}),c.jsx("div",{className:"space-y-4",children:c.jsxs("div",{className:"p-4 rounded-lg bg-[#3d434f]/30",children:[c.jsx("h5",{className:"text-white font-semibold mb-3 text-sm text-left",children:"Visual Feedback"}),c.jsxs("div",{className:"space-y-2 text-sm text-left",children:[c.jsxs("div",{children:[c.jsx("strong",{className:"text-white",children:"Piano Keys:"})," Scale notes are highlighted in blue"]}),c.jsxs("div",{children:[c.jsx("strong",{className:"text-white",children:"Chord Tones:"})," Active chord notes show in brighter colors"]}),c.jsxs("div",{children:[c.jsx("strong",{className:"text-white",children:"Step Indicator:"})," Shows current position in the pattern"]}),c.jsxs("div",{children:[c.jsx("strong",{className:"text-white",children:"Animations:"})," Visual feedback for chord changes and playback"]})]})]})})]}),c.jsxs("div",{className:"p-4 rounded-lg bg-[#3d434f]/30 mt-4",children:[c.jsx("h5",{className:"text-white font-semibold mb-3 text-sm text-left",children:"Responsive Design"}),c.jsx("p",{className:"text-sm text-left",children:"The interface adapts to different screen sizes. On mobile devices, some controls are simplified and touch-optimized for better usability."})]})]}),c.jsx(Bn,{title:"Troubleshooting",children:c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[c.jsxs("div",{className:"p-4 rounded-lg bg-[#3d434f]/30",children:[c.jsx("h5",{className:"text-white font-semibold mb-3 text-sm text-left",children:"Audio Issues"}),c.jsxs("div",{className:"space-y-2 text-sm text-left",children:[c.jsxs("div",{children:[c.jsx("strong",{className:"text-white",children:"No sound:"})," Check device volume and ensure audio isn't muted"]}),c.jsxs("div",{children:[c.jsx("strong",{className:"text-white",children:"iOS devices:"})," Tap any button first to initialize audio"]}),c.jsxs("div",{children:[c.jsx("strong",{className:"text-white",children:"Distorted audio:"})," Lower the volume setting in piano controls"]})]})]}),c.jsxs("div",{className:"p-4 rounded-lg bg-[#3d434f]/30",children:[c.jsx("h5",{className:"text-white font-semibold mb-3 text-sm text-left",children:"Performance"}),c.jsxs("div",{className:"space-y-2 text-sm text-left",children:[c.jsxs("div",{children:[c.jsx("strong",{className:"text-white",children:"Lag or glitches:"})," Close other browser tabs using audio"]}),c.jsxs("div",{children:[c.jsx("strong",{className:"text-white",children:"Mobile performance:"})," Use lower reverb/effect settings for better performance"]})]})]})]})}),c.jsx("div",{className:"mt-8 pt-6 border-t border-gray-600/50",children:c.jsx("p",{className:"text-xs text-slate-400 text-left",children:"Need more help? Check the GitHub repository for detailed documentation and examples."})})]})}),Fg=()=>{const[e,n]=w.useState(!1),[o,s]=w.useState(!1),[l,a]=w.useState(!1),u=w.useRef(null),f=w.useRef(null),h=Xt(),{key:p,mode:m}=h;w.useEffect(()=>{const b=C=>{u.current&&f.current&&!u.current.contains(C.target)&&!f.current.contains(C.target)&&a(!1)};return document.addEventListener("mousedown",b),()=>document.removeEventListener("mousedown",b)},[]);const g=b=>{b(),a(!1)},x=()=>{s(!0)};return c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"bg-[#3d434f] border-b border-gray-600",children:c.jsx("div",{className:"relative",children:c.jsxs("div",{className:"flex items-center justify-between px-6 py-4",children:[c.jsxs("div",{className:"flex items-center space-x-4",children:[c.jsx(td,{className:"mt-2"}),c.jsx("div",{className:"flex items-center space-x-3",children:c.jsxs("div",{className:"flex flex-col items-start",children:[c.jsx("h1",{className:"text-xl font-bold text-blue-500 tracking-tight leading-none",children:"modal"}),c.jsxs("div",{className:"flex items-center space-x-0.5",children:[c.jsx("span",{className:"text-xs text-slate-400 font-medium uppercase tracking-widest",children:"chord"}),c.jsx("div",{className:"w-1 h-1 mr-[0.2em] bg-slate-400"}),c.jsx("span",{className:"text-xs text-slate-400 font-medium uppercase tracking-widest",children:"buildr"})]})]})})]}),c.jsxs("div",{className:"flex items-center space-x-4",children:[c.jsxs("div",{className:"hidden sm:flex items-center space-x-2 text-sm",children:[c.jsx("div",{className:"px-2 py-0.5 bg-[#444b59] border border-gray-600 rounded text-slate-300 font-mono",children:p}),c.jsx("div",{className:"w-px h-4 bg-slate-600"}),c.jsx("div",{className:"px-2 py-1 bg-[#444b59] border border-gray-600 rounded text-slate-300 text-xs font-mono",children:m})]}),c.jsxs("div",{className:"relative",children:[c.jsx("button",{ref:f,onClick:()=>a(!l),className:"w-9 h-9 flex items-center justify-center text-slate-400 hover:text-slate-200 hover:bg-[#4a5262] rounded-lg transition-all duration-200 border border-transparent hover:border-gray-600",title:"Menu",children:c.jsx(m1,{className:"w-5 h-5"})}),l&&c.jsx("div",{ref:u,className:"absolute right-0 mt-2 w-64 bg-[#3d434f] border border-gray-600 rounded-lg shadow-xl z-50 overflow-hidden",children:c.jsxs("div",{className:"py-2",children:[c.jsxs("button",{onClick:()=>g(()=>n(!0)),className:"w-full px-4 py-2.5 text-left flex items-center space-x-3 text-slate-400 hover:text-slate-200 hover:bg-[#4a5262] transition-all duration-150",children:[c.jsx(v1,{className:"w-4 h-4 flex-shrink-0"}),c.jsx("span",{className:"text-sm font-medium",children:"About"})]}),c.jsxs("button",{onClick:()=>g(()=>s(!0)),className:"w-full px-4 py-2.5 text-left flex items-center space-x-3 text-slate-400 hover:text-slate-200 hover:bg-[#4a5262] transition-all duration-150",children:[c.jsx(Qg,{className:"w-4 h-4 flex-shrink-0"}),c.jsx("span",{className:"text-sm font-medium",children:"Help"})]})]})})]})]})]})})}),c.jsx(bE,{isOpen:e,onClose:()=>n(!1),onOpenHelp:x}),c.jsx(wE,{isOpen:o,onClose:()=>s(!1)})]})},NE=(e,n,o,s)=>e?s:n!==null&&o[n]?.pattern?o[n].pattern:s,CE=({className:e=""})=>{const{globalPatternState:n,currentlyActivePattern:o}=no(),{temporaryChord:s,activeChordIndex:l,addedChords:a}=Dn(),{isPlaying:u,bpm:f,currentStep:h}=n,p=w.useMemo(()=>NE(s,l,a,o),[s,l,a,o]);if(!u)return null;const m=p.length>0?p.length:1,g=h%m+1;return c.jsx("div",{className:pt("w-full px-2 mx-auto items-center",e),children:c.jsx("div",{className:"px-6 py-3 bg-green-900 bg-opacity-50 rounded-lg border border-green-700 w-full max-w-7xl mx-auto",children:c.jsxs("div",{className:"text-sm text-green-300 flex items-center justify-center space-x-4",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse mr-2"}),c.jsx("span",{className:"font-medium",children:"Sequencer Active"})]}),c.jsxs("div",{className:"text-xs opacity-80 font-mono",children:[p.join("-")," |",` ${f}`," BPM | Step ",g,"/",m,s&&c.jsxs("span",{className:"ml-2 text-yellow-300",children:["• ",s.name]}),!s&&l!==null&&c.jsxs("span",{className:"ml-2 text-purple-300",children:["• ",a[l]?.name]})]})]})})})};function SE(){const{isLiveMode:e,handleChordClick:n,addChordClick:o}=Zb(),s=w.useRef(null),l=w.useRef(!1),[a,u]=w.useState(!1),f=w.useRef(!1),h=w.useRef(null),p=w.useCallback(()=>{const g=window.innerHeight,x=parseFloat(getComputedStyle(document.documentElement).fontSize),b=g<35*x;b!==f.current&&(f.current=b,u(b),setTimeout(()=>{h.current&&(h.current.style.overflow="hidden",h.current.offsetHeight,h.current.style.overflow="auto")},50))},[]);w.useEffect(()=>{let g;const x=()=>{clearTimeout(g),g=setTimeout(p,100)},b=()=>{setTimeout(()=>{if(p(),h.current&&/Mobi|Android/i.test(navigator.userAgent)){const C=h.current;C.style.overflowY="hidden",C.style.touchAction="pan-y",C.offsetHeight,C.style.overflowY="auto",C.style.WebkitOverflowScrolling="touch"}},250)};return p(),window.addEventListener("resize",x,{passive:!0}),window.addEventListener("orientationchange",b,{passive:!0}),()=>{clearTimeout(g),window.removeEventListener("resize",x),window.removeEventListener("orientationchange",b)}},[p]),w.useEffect(()=>{if(h.current){const g=h.current;g.style.WebkitOverflowScrolling="touch",g.style.touchAction="pan-y",g.style.overscrollBehavior="contain"}},[a]);const m=async()=>{if(!l.current)try{await s.current?.play(),l.current=!0,document.removeEventListener("touchstart",m),document.removeEventListener("mousedown",m),document.removeEventListener("click",m)}catch(g){console.error("failed to initialize audio:",g)}};return w.useEffect(()=>(document.addEventListener("touchstart",m),document.addEventListener("mousedown",m),document.addEventListener("click",m),()=>{document.removeEventListener("touchstart",m),document.removeEventListener("mousedown",m),document.removeEventListener("click",m)}),[]),c.jsxs("div",{className:"select-none text-center bg-[#282c34] min-h-screen h-screen w-screen overflow-hidden flex flex-col",children:[c.jsx("audio",{ref:s,preload:"auto",children:c.jsx("source",{src:"/silence.mp3",type:"audio/mp3"})}),!a&&c.jsx("div",{className:"flex-shrink-0",children:c.jsx(Fg,{})}),c.jsxs("div",{ref:h,className:"flex-1 overflow-y-auto flex flex-col",style:{WebkitOverflowScrolling:"touch",touchAction:"pan-y",overscrollBehavior:"contain"},children:[a&&c.jsx("div",{className:"flex-shrink-0",children:c.jsx(Fg,{})}),c.jsxs("div",{className:`flex flex-col items-center justify-start text-[calc(10px+2vmin)] text-white p-4 space-y-4x pb-32 ${a?"":"mt-2"} ${e?"pointer-events-none opacity-30":""}`,children:[c.jsx("div",{className:"w-full max-w-7xl mb-6",children:c.jsx(Iw,{hideConfigControls:!0})}),c.jsx(yE,{}),c.jsx(Qw,{}),c.jsx(CE,{className:"mt-4"}),c.jsx("div",{className:"w-full max-w-7xl mb-20 mt-4",children:c.jsx(T1,{onChordClick:n,addChordClick:o})})]})]}),c.jsx("div",{className:"flex-shrink-0",children:c.jsx(gE,{})})]})}Hy.createRoot(document.getElementById("root")).render(c.jsx(we.StrictMode,{children:c.jsx(SE,{})}));
